var eg=t=>{throw TypeError(t)};var xd=(t,e,n)=>e.has(t)||eg("Cannot "+n);var z=(t,e,n)=>(xd(t,e,"read from private field"),n?n.call(t):e.get(t)),be=(t,e,n)=>e.has(t)?eg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ae=(t,e,n,r)=>(xd(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Me=(t,e,n)=>(xd(t,e,"access private method"),n);var Gl=(t,e,n,r)=>({set _(s){ae(t,e,s,n)},get _(){return z(t,e,r)}});function e2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function t2(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var U0={exports:{}},fu={},W0={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hl=Symbol.for("react.element"),n2=Symbol.for("react.portal"),r2=Symbol.for("react.fragment"),i2=Symbol.for("react.strict_mode"),s2=Symbol.for("react.profiler"),o2=Symbol.for("react.provider"),a2=Symbol.for("react.context"),l2=Symbol.for("react.forward_ref"),c2=Symbol.for("react.suspense"),u2=Symbol.for("react.memo"),d2=Symbol.for("react.lazy"),tg=Symbol.iterator;function h2(t){return t===null||typeof t!="object"?null:(t=tg&&t[tg]||t["@@iterator"],typeof t=="function"?t:null)}var H0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V0=Object.assign,q0={};function Mo(t,e,n){this.props=t,this.context=e,this.refs=q0,this.updater=n||H0}Mo.prototype.isReactComponent={};Mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function G0(){}G0.prototype=Mo.prototype;function Vf(t,e,n){this.props=t,this.context=e,this.refs=q0,this.updater=n||H0}var qf=Vf.prototype=new G0;qf.constructor=Vf;V0(qf,Mo.prototype);qf.isPureReactComponent=!0;var ng=Array.isArray,Z0=Object.prototype.hasOwnProperty,Gf={current:null},K0={key:!0,ref:!0,__self:!0,__source:!0};function Y0(t,e,n){var r,s={},a=null,c=null;if(e!=null)for(r in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(a=""+e.key),e)Z0.call(e,r)&&!K0.hasOwnProperty(r)&&(s[r]=e[r]);var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){for(var h=Array(d),f=0;f<d;f++)h[f]=arguments[f+2];s.children=h}if(t&&t.defaultProps)for(r in d=t.defaultProps,d)s[r]===void 0&&(s[r]=d[r]);return{$$typeof:hl,type:t,key:a,ref:c,props:s,_owner:Gf.current}}function f2(t,e){return{$$typeof:hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zf(t){return typeof t=="object"&&t!==null&&t.$$typeof===hl}function p2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rg=/\/+/g;function wd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?p2(""+t.key):e.toString(36)}function vc(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case hl:case n2:c=!0}}if(c)return c=t,s=s(c),t=r===""?"."+wd(c,0):r,ng(s)?(n="",t!=null&&(n=t.replace(rg,"$&/")+"/"),vc(s,e,n,"",function(f){return f})):s!=null&&(Zf(s)&&(s=f2(s,n+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(rg,"$&/")+"/")+t)),e.push(s)),1;if(c=0,r=r===""?".":r+":",ng(t))for(var d=0;d<t.length;d++){a=t[d];var h=r+wd(a,d);c+=vc(a,e,n,h,s)}else if(h=h2(t),typeof h=="function")for(t=h.call(t),d=0;!(a=t.next()).done;)a=a.value,h=r+wd(a,d++),c+=vc(a,e,n,h,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function Zl(t,e,n){if(t==null)return t;var r=[],s=0;return vc(t,r,"","",function(a){return e.call(n,a,s++)}),r}function m2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},yc={transition:null},g2={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:yc,ReactCurrentOwner:Gf};function J0(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Zl,forEach:function(t,e,n){Zl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zl(t,function(){e++}),e},toArray:function(t){return Zl(t,function(e){return e})||[]},only:function(t){if(!Zf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Mo;Ie.Fragment=r2;Ie.Profiler=s2;Ie.PureComponent=Vf;Ie.StrictMode=i2;Ie.Suspense=c2;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g2;Ie.act=J0;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=V0({},t.props),s=t.key,a=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,c=Gf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(h in e)Z0.call(e,h)&&!K0.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&d!==void 0?d[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){d=Array(h);for(var f=0;f<h;f++)d[f]=arguments[f+2];r.children=d}return{$$typeof:hl,type:t.type,key:s,ref:a,props:r,_owner:c}};Ie.createContext=function(t){return t={$$typeof:a2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o2,_context:t},t.Consumer=t};Ie.createElement=Y0;Ie.createFactory=function(t){var e=Y0.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:l2,render:t}};Ie.isValidElement=Zf;Ie.lazy=function(t){return{$$typeof:d2,_payload:{_status:-1,_result:t},_init:m2}};Ie.memo=function(t,e){return{$$typeof:u2,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=yc.transition;yc.transition={};try{t()}finally{yc.transition=e}};Ie.unstable_act=J0;Ie.useCallback=function(t,e){return rn.current.useCallback(t,e)};Ie.useContext=function(t){return rn.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return rn.current.useEffect(t,e)};Ie.useId=function(){return rn.current.useId()};Ie.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return rn.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};Ie.useRef=function(t){return rn.current.useRef(t)};Ie.useState=function(t){return rn.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return rn.current.useTransition()};Ie.version="18.3.1";W0.exports=Ie;var S=W0.exports;const pi=Hf(S),v2=e2({__proto__:null,default:pi},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=S,_2=Symbol.for("react.element"),x2=Symbol.for("react.fragment"),w2=Object.prototype.hasOwnProperty,b2=y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j2={key:!0,ref:!0,__self:!0,__source:!0};function Q0(t,e,n){var r,s={},a=null,c=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)w2.call(e,r)&&!j2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:_2,type:t,key:a,ref:c,props:s,_owner:b2.current}}fu.Fragment=x2;fu.jsx=Q0;fu.jsxs=Q0;U0.exports=fu;var o=U0.exports,X0={exports:{}},Sn={},ey={exports:{}},ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,Q){var U=D.length;D.push(Q);e:for(;0<U;){var te=U-1>>>1,se=D[te];if(0<s(se,Q))D[te]=Q,D[U]=se,U=te;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var Q=D[0],U=D.pop();if(U!==Q){D[0]=U;e:for(var te=0,se=D.length,pe=se>>>1;te<pe;){var ue=2*(te+1)-1,me=D[ue],Y=ue+1,he=D[Y];if(0>s(me,U))Y<se&&0>s(he,me)?(D[te]=he,D[Y]=U,te=Y):(D[te]=me,D[ue]=U,te=ue);else if(Y<se&&0>s(he,U))D[te]=he,D[Y]=U,te=Y;else break e}}return Q}function s(D,Q){var U=D.sortIndex-Q.sortIndex;return U!==0?U:D.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],f=[],m=1,g=null,w=3,C=!1,b=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var Q=n(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=D)r(f),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=n(f)}}function E(D){if(_=!1,x(D),!b)if(n(h)!==null)b=!0,G(A);else{var Q=n(f);Q!==null&&K(E,Q.startTime-D)}}function A(D,Q){b=!1,_&&(_=!1,y(O),O=-1),C=!0;var U=w;try{for(x(Q),g=n(h);g!==null&&(!(g.expirationTime>Q)||D&&!M());){var te=g.callback;if(typeof te=="function"){g.callback=null,w=g.priorityLevel;var se=te(g.expirationTime<=Q);Q=t.unstable_now(),typeof se=="function"?g.callback=se:g===n(h)&&r(h),x(Q)}else r(h);g=n(h)}if(g!==null)var pe=!0;else{var ue=n(f);ue!==null&&K(E,ue.startTime-Q),pe=!1}return pe}finally{g=null,w=U,C=!1}}var T=!1,B=null,O=-1,R=5,N=-1;function M(){return!(t.unstable_now()-N<R)}function q(){if(B!==null){var D=t.unstable_now();N=D;var Q=!0;try{Q=B(!0,D)}finally{Q?$():(T=!1,B=null)}}else T=!1}var $;if(typeof j=="function")$=function(){j(q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,W=Z.port2;Z.port1.onmessage=q,$=function(){W.postMessage(null)}}else $=function(){k(q,0)};function G(D){B=D,T||(T=!0,$())}function K(D,Q){O=k(function(){D(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){b||C||(b=!0,G(A))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(D){switch(w){case 1:case 2:case 3:var Q=3;break;default:Q=w}var U=w;w=Q;try{return D()}finally{w=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,Q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=w;w=D;try{return Q()}finally{w=U}},t.unstable_scheduleCallback=function(D,Q,U){var te=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?te+U:te):U=te,D){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=U+se,D={id:m++,callback:Q,priorityLevel:D,startTime:U,expirationTime:se,sortIndex:-1},U>te?(D.sortIndex=U,e(f,D),n(h)===null&&D===n(f)&&(_?(y(O),O=-1):_=!0,K(E,U-te))):(D.sortIndex=se,e(h,D),b||C||(b=!0,G(A))),D},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(D){var Q=w;return function(){var U=w;w=Q;try{return D.apply(this,arguments)}finally{w=U}}}})(ty);ey.exports=ty;var k2=ey.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2=S,kn=k2;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ny=new Set,Ma={};function xs(t,e){So(t,e),So(t+"Capture",e)}function So(t,e){for(Ma[t]=e,t=0;t<e.length;t++)ny.add(e[t])}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fh=Object.prototype.hasOwnProperty,C2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ig={},sg={};function P2(t){return fh.call(sg,t)?!0:fh.call(ig,t)?!1:C2.test(t)?sg[t]=!0:(ig[t]=!0,!1)}function E2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function T2(t,e,n,r){if(e===null||typeof e>"u"||E2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,a,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=c}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kf=/[\-:]([a-z])/g;function Yf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kf,Yf);$t[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kf,Yf);$t[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kf,Yf);$t[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jf(t,e,n,r){var s=$t.hasOwnProperty(e)?$t[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(T2(e,n,s,r)&&(n=null),r||s===null?P2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fr=S2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kl=Symbol.for("react.element"),qs=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),Qf=Symbol.for("react.strict_mode"),ph=Symbol.for("react.profiler"),ry=Symbol.for("react.provider"),iy=Symbol.for("react.context"),Xf=Symbol.for("react.forward_ref"),mh=Symbol.for("react.suspense"),gh=Symbol.for("react.suspense_list"),ep=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),sy=Symbol.for("react.offscreen"),og=Symbol.iterator;function ra(t){return t===null||typeof t!="object"?null:(t=og&&t[og]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,bd;function va(t){if(bd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bd=e&&e[1]||""}return`
`+bd+t}var jd=!1;function kd(t,e){if(!t||jd)return"";jd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),a=r.stack.split(`
`),c=s.length-1,d=a.length-1;1<=c&&0<=d&&s[c]!==a[d];)d--;for(;1<=c&&0<=d;c--,d--)if(s[c]!==a[d]){if(c!==1||d!==1)do if(c--,d--,0>d||s[c]!==a[d]){var h=`
`+s[c].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=c&&0<=d);break}}}finally{jd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?va(t):""}function L2(t){switch(t.tag){case 5:return va(t.type);case 16:return va("Lazy");case 13:return va("Suspense");case 19:return va("SuspenseList");case 0:case 2:case 15:return t=kd(t.type,!1),t;case 11:return t=kd(t.type.render,!1),t;case 1:return t=kd(t.type,!0),t;default:return""}}function vh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gs:return"Fragment";case qs:return"Portal";case ph:return"Profiler";case Qf:return"StrictMode";case mh:return"Suspense";case gh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iy:return(t.displayName||"Context")+".Consumer";case ry:return(t._context.displayName||"Context")+".Provider";case Xf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ep:return e=t.displayName||null,e!==null?e:vh(t.type)||"Memo";case Qr:e=t._payload,t=t._init;try{return vh(t(e))}catch{}}return null}function O2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vh(e);case 8:return e===Qf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ci(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function N2(t){var e=oy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(c){r=""+c,a.call(this,c)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yl(t){t._valueTracker||(t._valueTracker=N2(t))}function ay(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=oy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Mc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yh(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ag(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ci(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ly(t,e){e=e.checked,e!=null&&Jf(t,"checked",e,!1)}function _h(t,e){ly(t,e);var n=Ci(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xh(t,e.type,n):e.hasOwnProperty("defaultValue")&&xh(t,e.type,Ci(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xh(t,e,n){(e!=="number"||Mc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ya=Array.isArray;function io(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ci(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function wh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(ya(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ci(n)}}function cy(t,e){var n=Ci(e.value),r=Ci(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ug(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jl,dy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jl=Jl||document.createElement("div"),Jl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R2=["Webkit","ms","Moz","O"];Object.keys(ja).forEach(function(t){R2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ja[e]=ja[t]})});function hy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ja.hasOwnProperty(t)&&ja[t]?(""+e).trim():e+"px"}function fy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var I2=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jh(t,e){if(e){if(I2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function kh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sh=null;function tp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ch=null,so=null,oo=null;function dg(t){if(t=ml(t)){if(typeof Ch!="function")throw Error(X(280));var e=t.stateNode;e&&(e=yu(e),Ch(t.stateNode,t.type,e))}}function py(t){so?oo?oo.push(t):oo=[t]:so=t}function my(){if(so){var t=so,e=oo;if(oo=so=null,dg(t),e)for(t=0;t<e.length;t++)dg(e[t])}}function gy(t,e){return t(e)}function vy(){}var Sd=!1;function yy(t,e,n){if(Sd)return t(e,n);Sd=!0;try{return gy(t,e,n)}finally{Sd=!1,(so!==null||oo!==null)&&(vy(),my())}}function Da(t,e){var n=t.stateNode;if(n===null)return null;var r=yu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Ph=!1;if(Ar)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){Ph=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{Ph=!1}function M2(t,e,n,r,s,a,c,d,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var ka=!1,Ac=null,Dc=!1,Eh=null,A2={onError:function(t){ka=!0,Ac=t}};function D2(t,e,n,r,s,a,c,d,h){ka=!1,Ac=null,M2.apply(A2,arguments)}function z2(t,e,n,r,s,a,c,d,h){if(D2.apply(this,arguments),ka){if(ka){var f=Ac;ka=!1,Ac=null}else throw Error(X(198));Dc||(Dc=!0,Eh=f)}}function ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _y(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hg(t){if(ws(t)!==t)throw Error(X(188))}function B2(t){var e=t.alternate;if(!e){if(e=ws(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return hg(s),t;if(a===r)return hg(s),e;a=a.sibling}throw Error(X(188))}if(n.return!==r.return)n=s,r=a;else{for(var c=!1,d=s.child;d;){if(d===n){c=!0,n=s,r=a;break}if(d===r){c=!0,r=s,n=a;break}d=d.sibling}if(!c){for(d=a.child;d;){if(d===n){c=!0,n=a,r=s;break}if(d===r){c=!0,r=a,n=s;break}d=d.sibling}if(!c)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function xy(t){return t=B2(t),t!==null?wy(t):null}function wy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wy(t);if(e!==null)return e;t=t.sibling}return null}var by=kn.unstable_scheduleCallback,fg=kn.unstable_cancelCallback,$2=kn.unstable_shouldYield,F2=kn.unstable_requestPaint,gt=kn.unstable_now,U2=kn.unstable_getCurrentPriorityLevel,np=kn.unstable_ImmediatePriority,jy=kn.unstable_UserBlockingPriority,zc=kn.unstable_NormalPriority,W2=kn.unstable_LowPriority,ky=kn.unstable_IdlePriority,pu=null,_r=null;function H2(t){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(pu,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:G2,V2=Math.log,q2=Math.LN2;function G2(t){return t>>>=0,t===0?32:31-(V2(t)/q2|0)|0}var Ql=64,Xl=4194304;function _a(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,c=n&268435455;if(c!==0){var d=c&~s;d!==0?r=_a(d):(a&=c,a!==0&&(r=_a(a)))}else c=n&~s,c!==0?r=_a(c):a!==0&&(r=_a(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xn(e),s=1<<n,r|=t[n],e&=~s;return r}function Z2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var c=31-Xn(a),d=1<<c,h=s[c];h===-1?(!(d&n)||d&r)&&(s[c]=Z2(d,e)):h<=e&&(t.expiredLanes|=d),a&=~d}}function Th(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sy(){var t=Ql;return Ql<<=1,!(Ql&4194240)&&(Ql=64),t}function Cd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=n}function Y2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Xn(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function rp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ze=0;function Cy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Py,ip,Ey,Ty,Ly,Lh=!1,ec=[],mi=null,gi=null,vi=null,za=new Map,Ba=new Map,ei=[],J2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pg(t,e){switch(t){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":za.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(e.pointerId)}}function sa(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=ml(e),e!==null&&ip(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Q2(t,e,n,r,s){switch(e){case"focusin":return mi=sa(mi,t,e,n,r,s),!0;case"dragenter":return gi=sa(gi,t,e,n,r,s),!0;case"mouseover":return vi=sa(vi,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return za.set(a,sa(za.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Ba.set(a,sa(Ba.get(a)||null,t,e,n,r,s)),!0}return!1}function Oy(t){var e=Ki(t.target);if(e!==null){var n=ws(e);if(n!==null){if(e=n.tag,e===13){if(e=_y(n),e!==null){t.blockedOn=e,Ly(t.priority,function(){Ey(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _c(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Oh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sh=r,n.target.dispatchEvent(r),Sh=null}else return e=ml(n),e!==null&&ip(e),t.blockedOn=n,!1;e.shift()}return!0}function mg(t,e,n){_c(t)&&n.delete(e)}function X2(){Lh=!1,mi!==null&&_c(mi)&&(mi=null),gi!==null&&_c(gi)&&(gi=null),vi!==null&&_c(vi)&&(vi=null),za.forEach(mg),Ba.forEach(mg)}function oa(t,e){t.blockedOn===e&&(t.blockedOn=null,Lh||(Lh=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,X2)))}function $a(t){function e(s){return oa(s,t)}if(0<ec.length){oa(ec[0],t);for(var n=1;n<ec.length;n++){var r=ec[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mi!==null&&oa(mi,t),gi!==null&&oa(gi,t),vi!==null&&oa(vi,t),za.forEach(e),Ba.forEach(e),n=0;n<ei.length;n++)r=ei[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ei.length&&(n=ei[0],n.blockedOn===null);)Oy(n),n.blockedOn===null&&ei.shift()}var ao=Fr.ReactCurrentBatchConfig,$c=!0;function eb(t,e,n,r){var s=Ze,a=ao.transition;ao.transition=null;try{Ze=1,sp(t,e,n,r)}finally{Ze=s,ao.transition=a}}function tb(t,e,n,r){var s=Ze,a=ao.transition;ao.transition=null;try{Ze=4,sp(t,e,n,r)}finally{Ze=s,ao.transition=a}}function sp(t,e,n,r){if($c){var s=Oh(t,e,n,r);if(s===null)Ad(t,e,r,Fc,n),pg(t,r);else if(Q2(s,t,e,n,r))r.stopPropagation();else if(pg(t,r),e&4&&-1<J2.indexOf(t)){for(;s!==null;){var a=ml(s);if(a!==null&&Py(a),a=Oh(t,e,n,r),a===null&&Ad(t,e,r,Fc,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Ad(t,e,r,null,n)}}var Fc=null;function Oh(t,e,n,r){if(Fc=null,t=tp(r),t=Ki(t),t!==null)if(e=ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_y(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fc=t,null}function Ny(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U2()){case np:return 1;case jy:return 4;case zc:case W2:return 16;case ky:return 536870912;default:return 16}default:return 16}}var di=null,op=null,xc=null;function Ry(){if(xc)return xc;var t,e=op,n=e.length,r,s="value"in di?di.value:di.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var c=n-t;for(r=1;r<=c&&e[n-r]===s[a-r];r++);return xc=s.slice(t,1<r?1-r:void 0)}function wc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tc(){return!0}function gg(){return!1}function Cn(t){function e(n,r,s,a,c){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=c,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?tc:gg,this.isPropagationStopped=gg,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tc)},persist:function(){},isPersistent:tc}),e}var Ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ap=Cn(Ao),pl=ct({},Ao,{view:0,detail:0}),nb=Cn(pl),Pd,Ed,aa,mu=ct({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==aa&&(aa&&t.type==="mousemove"?(Pd=t.screenX-aa.screenX,Ed=t.screenY-aa.screenY):Ed=Pd=0,aa=t),Pd)},movementY:function(t){return"movementY"in t?t.movementY:Ed}}),vg=Cn(mu),rb=ct({},mu,{dataTransfer:0}),ib=Cn(rb),sb=ct({},pl,{relatedTarget:0}),Td=Cn(sb),ob=ct({},Ao,{animationName:0,elapsedTime:0,pseudoElement:0}),ab=Cn(ob),lb=ct({},Ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cb=Cn(lb),ub=ct({},Ao,{data:0}),yg=Cn(ub),db={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fb[t])?!!e[t]:!1}function lp(){return pb}var mb=ct({},pl,{key:function(t){if(t.key){var e=db[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lp,charCode:function(t){return t.type==="keypress"?wc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gb=Cn(mb),vb=ct({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_g=Cn(vb),yb=ct({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lp}),_b=Cn(yb),xb=ct({},Ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),wb=Cn(xb),bb=ct({},mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jb=Cn(bb),kb=[9,13,27,32],cp=Ar&&"CompositionEvent"in window,Sa=null;Ar&&"documentMode"in document&&(Sa=document.documentMode);var Sb=Ar&&"TextEvent"in window&&!Sa,Iy=Ar&&(!cp||Sa&&8<Sa&&11>=Sa),xg=" ",wg=!1;function My(t,e){switch(t){case"keyup":return kb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ay(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zs=!1;function Cb(t,e){switch(t){case"compositionend":return Ay(e);case"keypress":return e.which!==32?null:(wg=!0,xg);case"textInput":return t=e.data,t===xg&&wg?null:t;default:return null}}function Pb(t,e){if(Zs)return t==="compositionend"||!cp&&My(t,e)?(t=Ry(),xc=op=di=null,Zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Iy&&e.locale!=="ko"?null:e.data;default:return null}}var Eb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Eb[t.type]:e==="textarea"}function Dy(t,e,n,r){py(r),e=Uc(e,"onChange"),0<e.length&&(n=new ap("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ca=null,Fa=null;function Tb(t){Zy(t,0)}function gu(t){var e=Js(t);if(ay(e))return t}function Lb(t,e){if(t==="change")return e}var zy=!1;if(Ar){var Ld;if(Ar){var Od="oninput"in document;if(!Od){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),Od=typeof jg.oninput=="function"}Ld=Od}else Ld=!1;zy=Ld&&(!document.documentMode||9<document.documentMode)}function kg(){Ca&&(Ca.detachEvent("onpropertychange",By),Fa=Ca=null)}function By(t){if(t.propertyName==="value"&&gu(Fa)){var e=[];Dy(e,Fa,t,tp(t)),yy(Tb,e)}}function Ob(t,e,n){t==="focusin"?(kg(),Ca=e,Fa=n,Ca.attachEvent("onpropertychange",By)):t==="focusout"&&kg()}function Nb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gu(Fa)}function Rb(t,e){if(t==="click")return gu(e)}function Ib(t,e){if(t==="input"||t==="change")return gu(e)}function Mb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:Mb;function Ua(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fh.call(e,s)||!tr(t[s],e[s]))return!1}return!0}function Sg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cg(t,e){var n=Sg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sg(n)}}function $y(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$y(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Fy(){for(var t=window,e=Mc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mc(t.document)}return e}function up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ab(t){var e=Fy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$y(n.ownerDocument.documentElement,n)){if(r!==null&&up(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=Cg(n,a);var c=Cg(n,r);s&&c&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Db=Ar&&"documentMode"in document&&11>=document.documentMode,Ks=null,Nh=null,Pa=null,Rh=!1;function Pg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rh||Ks==null||Ks!==Mc(r)||(r=Ks,"selectionStart"in r&&up(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pa&&Ua(Pa,r)||(Pa=r,r=Uc(Nh,"onSelect"),0<r.length&&(e=new ap("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ks)))}function nc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ys={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Nd={},Uy={};Ar&&(Uy=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function vu(t){if(Nd[t])return Nd[t];if(!Ys[t])return t;var e=Ys[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Uy)return Nd[t]=e[n];return t}var Wy=vu("animationend"),Hy=vu("animationiteration"),Vy=vu("animationstart"),qy=vu("transitionend"),Gy=new Map,Eg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(t,e){Gy.set(t,e),xs(e,[t])}for(var Rd=0;Rd<Eg.length;Rd++){var Id=Eg[Rd],zb=Id.toLowerCase(),Bb=Id[0].toUpperCase()+Id.slice(1);Ei(zb,"on"+Bb)}Ei(Wy,"onAnimationEnd");Ei(Hy,"onAnimationIteration");Ei(Vy,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(qy,"onTransitionEnd");So("onMouseEnter",["mouseout","mouseover"]);So("onMouseLeave",["mouseout","mouseover"]);So("onPointerEnter",["pointerout","pointerover"]);So("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$b=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function Tg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,z2(r,e,void 0,t),t.currentTarget=null}function Zy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var c=r.length-1;0<=c;c--){var d=r[c],h=d.instance,f=d.currentTarget;if(d=d.listener,h!==a&&s.isPropagationStopped())break e;Tg(s,d,f),a=h}else for(c=0;c<r.length;c++){if(d=r[c],h=d.instance,f=d.currentTarget,d=d.listener,h!==a&&s.isPropagationStopped())break e;Tg(s,d,f),a=h}}}if(Dc)throw t=Eh,Dc=!1,Eh=null,t}function nt(t,e){var n=e[zh];n===void 0&&(n=e[zh]=new Set);var r=t+"__bubble";n.has(r)||(Ky(e,t,2,!1),n.add(r))}function Md(t,e,n){var r=0;e&&(r|=4),Ky(n,t,r,e)}var rc="_reactListening"+Math.random().toString(36).slice(2);function Wa(t){if(!t[rc]){t[rc]=!0,ny.forEach(function(n){n!=="selectionchange"&&($b.has(n)||Md(n,!1,t),Md(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rc]||(e[rc]=!0,Md("selectionchange",!1,e))}}function Ky(t,e,n,r){switch(Ny(e)){case 1:var s=eb;break;case 4:s=tb;break;default:s=sp}n=s.bind(null,e,n,t),s=void 0,!Ph||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ad(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var d=r.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(c===4)for(c=r.return;c!==null;){var h=c.tag;if((h===3||h===4)&&(h=c.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;c=c.return}for(;d!==null;){if(c=Ki(d),c===null)return;if(h=c.tag,h===5||h===6){r=a=c;continue e}d=d.parentNode}}r=r.return}yy(function(){var f=a,m=tp(n),g=[];e:{var w=Gy.get(t);if(w!==void 0){var C=ap,b=t;switch(t){case"keypress":if(wc(n)===0)break e;case"keydown":case"keyup":C=gb;break;case"focusin":b="focus",C=Td;break;case"focusout":b="blur",C=Td;break;case"beforeblur":case"afterblur":C=Td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=vg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=ib;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=_b;break;case Wy:case Hy:case Vy:C=ab;break;case qy:C=wb;break;case"scroll":C=nb;break;case"wheel":C=jb;break;case"copy":case"cut":case"paste":C=cb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=_g}var _=(e&4)!==0,k=!_&&t==="scroll",y=_?w!==null?w+"Capture":null:w;_=[];for(var j=f,x;j!==null;){x=j;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,y!==null&&(E=Da(j,y),E!=null&&_.push(Ha(j,E,x)))),k)break;j=j.return}0<_.length&&(w=new C(w,b,null,n,m),g.push({event:w,listeners:_}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",w&&n!==Sh&&(b=n.relatedTarget||n.fromElement)&&(Ki(b)||b[Dr]))break e;if((C||w)&&(w=m.window===m?m:(w=m.ownerDocument)?w.defaultView||w.parentWindow:window,C?(b=n.relatedTarget||n.toElement,C=f,b=b?Ki(b):null,b!==null&&(k=ws(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(C=null,b=f),C!==b)){if(_=vg,E="onMouseLeave",y="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(_=_g,E="onPointerLeave",y="onPointerEnter",j="pointer"),k=C==null?w:Js(C),x=b==null?w:Js(b),w=new _(E,j+"leave",C,n,m),w.target=k,w.relatedTarget=x,E=null,Ki(m)===f&&(_=new _(y,j+"enter",b,n,m),_.target=x,_.relatedTarget=k,E=_),k=E,C&&b)t:{for(_=C,y=b,j=0,x=_;x;x=As(x))j++;for(x=0,E=y;E;E=As(E))x++;for(;0<j-x;)_=As(_),j--;for(;0<x-j;)y=As(y),x--;for(;j--;){if(_===y||y!==null&&_===y.alternate)break t;_=As(_),y=As(y)}_=null}else _=null;C!==null&&Lg(g,w,C,_,!1),b!==null&&k!==null&&Lg(g,k,b,_,!0)}}e:{if(w=f?Js(f):window,C=w.nodeName&&w.nodeName.toLowerCase(),C==="select"||C==="input"&&w.type==="file")var A=Lb;else if(bg(w))if(zy)A=Ib;else{A=Nb;var T=Ob}else(C=w.nodeName)&&C.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(A=Rb);if(A&&(A=A(t,f))){Dy(g,A,n,m);break e}T&&T(t,w,f),t==="focusout"&&(T=w._wrapperState)&&T.controlled&&w.type==="number"&&xh(w,"number",w.value)}switch(T=f?Js(f):window,t){case"focusin":(bg(T)||T.contentEditable==="true")&&(Ks=T,Nh=f,Pa=null);break;case"focusout":Pa=Nh=Ks=null;break;case"mousedown":Rh=!0;break;case"contextmenu":case"mouseup":case"dragend":Rh=!1,Pg(g,n,m);break;case"selectionchange":if(Db)break;case"keydown":case"keyup":Pg(g,n,m)}var B;if(cp)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Zs?My(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(Iy&&n.locale!=="ko"&&(Zs||O!=="onCompositionStart"?O==="onCompositionEnd"&&Zs&&(B=Ry()):(di=m,op="value"in di?di.value:di.textContent,Zs=!0)),T=Uc(f,O),0<T.length&&(O=new yg(O,t,null,n,m),g.push({event:O,listeners:T}),B?O.data=B:(B=Ay(n),B!==null&&(O.data=B)))),(B=Sb?Cb(t,n):Pb(t,n))&&(f=Uc(f,"onBeforeInput"),0<f.length&&(m=new yg("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=B))}Zy(g,e)})}function Ha(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Uc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Da(t,n),a!=null&&r.unshift(Ha(t,a,s)),a=Da(t,e),a!=null&&r.push(Ha(t,a,s))),t=t.return}return r}function As(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lg(t,e,n,r,s){for(var a=e._reactName,c=[];n!==null&&n!==r;){var d=n,h=d.alternate,f=d.stateNode;if(h!==null&&h===r)break;d.tag===5&&f!==null&&(d=f,s?(h=Da(n,a),h!=null&&c.unshift(Ha(n,h,d))):s||(h=Da(n,a),h!=null&&c.push(Ha(n,h,d)))),n=n.return}c.length!==0&&t.push({event:e,listeners:c})}var Fb=/\r\n?/g,Ub=/\u0000|\uFFFD/g;function Og(t){return(typeof t=="string"?t:""+t).replace(Fb,`
`).replace(Ub,"")}function ic(t,e,n){if(e=Og(e),Og(t)!==e&&n)throw Error(X(425))}function Wc(){}var Ih=null,Mh=null;function Ah(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dh=typeof setTimeout=="function"?setTimeout:void 0,Wb=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,Hb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(t){return Ng.resolve(null).then(t).catch(Vb)}:Dh;function Vb(t){setTimeout(function(){throw t})}function Dd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),$a(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$a(e)}function yi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Do=Math.random().toString(36).slice(2),vr="__reactFiber$"+Do,Va="__reactProps$"+Do,Dr="__reactContainer$"+Do,zh="__reactEvents$"+Do,qb="__reactListeners$"+Do,Gb="__reactHandles$"+Do;function Ki(t){var e=t[vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dr]||n[vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rg(t);t!==null;){if(n=t[vr])return n;t=Rg(t)}return e}t=n,n=t.parentNode}return null}function ml(t){return t=t[vr]||t[Dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function yu(t){return t[Va]||null}var Bh=[],Qs=-1;function Ti(t){return{current:t}}function rt(t){0>Qs||(t.current=Bh[Qs],Bh[Qs]=null,Qs--)}function et(t,e){Qs++,Bh[Qs]=t.current,t.current=e}var Pi={},Gt=Ti(Pi),fn=Ti(!1),fs=Pi;function Co(t,e){var n=t.type.contextTypes;if(!n)return Pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pn(t){return t=t.childContextTypes,t!=null}function Hc(){rt(fn),rt(Gt)}function Ig(t,e,n){if(Gt.current!==Pi)throw Error(X(168));et(Gt,e),et(fn,n)}function Yy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(X(108,O2(t)||"Unknown",s));return ct({},n,r)}function Vc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pi,fs=Gt.current,et(Gt,t),et(fn,fn.current),!0}function Mg(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=Yy(t,e,fs),r.__reactInternalMemoizedMergedChildContext=t,rt(fn),rt(Gt),et(Gt,t)):rt(fn),et(fn,n)}var Tr=null,_u=!1,zd=!1;function Jy(t){Tr===null?Tr=[t]:Tr.push(t)}function Zb(t){_u=!0,Jy(t)}function Li(){if(!zd&&Tr!==null){zd=!0;var t=0,e=Ze;try{var n=Tr;for(Ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tr=null,_u=!1}catch(s){throw Tr!==null&&(Tr=Tr.slice(t+1)),by(np,Li),s}finally{Ze=e,zd=!1}}return null}var Xs=[],eo=0,qc=null,Gc=0,Nn=[],Rn=0,ps=null,Rr=1,Ir="";function Wi(t,e){Xs[eo++]=Gc,Xs[eo++]=qc,qc=t,Gc=e}function Qy(t,e,n){Nn[Rn++]=Rr,Nn[Rn++]=Ir,Nn[Rn++]=ps,ps=t;var r=Rr;t=Ir;var s=32-Xn(r)-1;r&=~(1<<s),n+=1;var a=32-Xn(e)+s;if(30<a){var c=s-s%5;a=(r&(1<<c)-1).toString(32),r>>=c,s-=c,Rr=1<<32-Xn(e)+s|n<<s|r,Ir=a+t}else Rr=1<<a|n<<s|r,Ir=t}function dp(t){t.return!==null&&(Wi(t,1),Qy(t,1,0))}function hp(t){for(;t===qc;)qc=Xs[--eo],Xs[eo]=null,Gc=Xs[--eo],Xs[eo]=null;for(;t===ps;)ps=Nn[--Rn],Nn[Rn]=null,Ir=Nn[--Rn],Nn[Rn]=null,Rr=Nn[--Rn],Nn[Rn]=null}var jn=null,bn=null,st=!1,Qn=null;function Xy(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ag(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jn=t,bn=yi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ps!==null?{id:Rr,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jn=t,bn=null,!0):!1;default:return!1}}function $h(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fh(t){if(st){var e=bn;if(e){var n=e;if(!Ag(t,e)){if($h(t))throw Error(X(418));e=yi(n.nextSibling);var r=jn;e&&Ag(t,e)?Xy(r,n):(t.flags=t.flags&-4097|2,st=!1,jn=t)}}else{if($h(t))throw Error(X(418));t.flags=t.flags&-4097|2,st=!1,jn=t}}}function Dg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jn=t}function sc(t){if(t!==jn)return!1;if(!st)return Dg(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ah(t.type,t.memoizedProps)),e&&(e=bn)){if($h(t))throw e_(),Error(X(418));for(;e;)Xy(t,e),e=yi(e.nextSibling)}if(Dg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=yi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=jn?yi(t.stateNode.nextSibling):null;return!0}function e_(){for(var t=bn;t;)t=yi(t.nextSibling)}function Po(){bn=jn=null,st=!1}function fp(t){Qn===null?Qn=[t]:Qn.push(t)}var Kb=Fr.ReactCurrentBatchConfig;function la(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(c){var d=s.refs;c===null?delete d[a]:d[a]=c},e._stringRef=a,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function oc(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zg(t){var e=t._init;return e(t._payload)}function t_(t){function e(y,j){if(t){var x=y.deletions;x===null?(y.deletions=[j],y.flags|=16):x.push(j)}}function n(y,j){if(!t)return null;for(;j!==null;)e(y,j),j=j.sibling;return null}function r(y,j){for(y=new Map;j!==null;)j.key!==null?y.set(j.key,j):y.set(j.index,j),j=j.sibling;return y}function s(y,j){return y=bi(y,j),y.index=0,y.sibling=null,y}function a(y,j,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<j?(y.flags|=2,j):x):(y.flags|=2,j)):(y.flags|=1048576,j)}function c(y){return t&&y.alternate===null&&(y.flags|=2),y}function d(y,j,x,E){return j===null||j.tag!==6?(j=Vd(x,y.mode,E),j.return=y,j):(j=s(j,x),j.return=y,j)}function h(y,j,x,E){var A=x.type;return A===Gs?m(y,j,x.props.children,E,x.key):j!==null&&(j.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Qr&&zg(A)===j.type)?(E=s(j,x.props),E.ref=la(y,j,x),E.return=y,E):(E=Ec(x.type,x.key,x.props,null,y.mode,E),E.ref=la(y,j,x),E.return=y,E)}function f(y,j,x,E){return j===null||j.tag!==4||j.stateNode.containerInfo!==x.containerInfo||j.stateNode.implementation!==x.implementation?(j=qd(x,y.mode,E),j.return=y,j):(j=s(j,x.children||[]),j.return=y,j)}function m(y,j,x,E,A){return j===null||j.tag!==7?(j=ds(x,y.mode,E,A),j.return=y,j):(j=s(j,x),j.return=y,j)}function g(y,j,x){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Vd(""+j,y.mode,x),j.return=y,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Kl:return x=Ec(j.type,j.key,j.props,null,y.mode,x),x.ref=la(y,null,j),x.return=y,x;case qs:return j=qd(j,y.mode,x),j.return=y,j;case Qr:var E=j._init;return g(y,E(j._payload),x)}if(ya(j)||ra(j))return j=ds(j,y.mode,x,null),j.return=y,j;oc(y,j)}return null}function w(y,j,x,E){var A=j!==null?j.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return A!==null?null:d(y,j,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Kl:return x.key===A?h(y,j,x,E):null;case qs:return x.key===A?f(y,j,x,E):null;case Qr:return A=x._init,w(y,j,A(x._payload),E)}if(ya(x)||ra(x))return A!==null?null:m(y,j,x,E,null);oc(y,x)}return null}function C(y,j,x,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(x)||null,d(j,y,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Kl:return y=y.get(E.key===null?x:E.key)||null,h(j,y,E,A);case qs:return y=y.get(E.key===null?x:E.key)||null,f(j,y,E,A);case Qr:var T=E._init;return C(y,j,x,T(E._payload),A)}if(ya(E)||ra(E))return y=y.get(x)||null,m(j,y,E,A,null);oc(j,E)}return null}function b(y,j,x,E){for(var A=null,T=null,B=j,O=j=0,R=null;B!==null&&O<x.length;O++){B.index>O?(R=B,B=null):R=B.sibling;var N=w(y,B,x[O],E);if(N===null){B===null&&(B=R);break}t&&B&&N.alternate===null&&e(y,B),j=a(N,j,O),T===null?A=N:T.sibling=N,T=N,B=R}if(O===x.length)return n(y,B),st&&Wi(y,O),A;if(B===null){for(;O<x.length;O++)B=g(y,x[O],E),B!==null&&(j=a(B,j,O),T===null?A=B:T.sibling=B,T=B);return st&&Wi(y,O),A}for(B=r(y,B);O<x.length;O++)R=C(B,y,O,x[O],E),R!==null&&(t&&R.alternate!==null&&B.delete(R.key===null?O:R.key),j=a(R,j,O),T===null?A=R:T.sibling=R,T=R);return t&&B.forEach(function(M){return e(y,M)}),st&&Wi(y,O),A}function _(y,j,x,E){var A=ra(x);if(typeof A!="function")throw Error(X(150));if(x=A.call(x),x==null)throw Error(X(151));for(var T=A=null,B=j,O=j=0,R=null,N=x.next();B!==null&&!N.done;O++,N=x.next()){B.index>O?(R=B,B=null):R=B.sibling;var M=w(y,B,N.value,E);if(M===null){B===null&&(B=R);break}t&&B&&M.alternate===null&&e(y,B),j=a(M,j,O),T===null?A=M:T.sibling=M,T=M,B=R}if(N.done)return n(y,B),st&&Wi(y,O),A;if(B===null){for(;!N.done;O++,N=x.next())N=g(y,N.value,E),N!==null&&(j=a(N,j,O),T===null?A=N:T.sibling=N,T=N);return st&&Wi(y,O),A}for(B=r(y,B);!N.done;O++,N=x.next())N=C(B,y,O,N.value,E),N!==null&&(t&&N.alternate!==null&&B.delete(N.key===null?O:N.key),j=a(N,j,O),T===null?A=N:T.sibling=N,T=N);return t&&B.forEach(function(q){return e(y,q)}),st&&Wi(y,O),A}function k(y,j,x,E){if(typeof x=="object"&&x!==null&&x.type===Gs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Kl:e:{for(var A=x.key,T=j;T!==null;){if(T.key===A){if(A=x.type,A===Gs){if(T.tag===7){n(y,T.sibling),j=s(T,x.props.children),j.return=y,y=j;break e}}else if(T.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Qr&&zg(A)===T.type){n(y,T.sibling),j=s(T,x.props),j.ref=la(y,T,x),j.return=y,y=j;break e}n(y,T);break}else e(y,T);T=T.sibling}x.type===Gs?(j=ds(x.props.children,y.mode,E,x.key),j.return=y,y=j):(E=Ec(x.type,x.key,x.props,null,y.mode,E),E.ref=la(y,j,x),E.return=y,y=E)}return c(y);case qs:e:{for(T=x.key;j!==null;){if(j.key===T)if(j.tag===4&&j.stateNode.containerInfo===x.containerInfo&&j.stateNode.implementation===x.implementation){n(y,j.sibling),j=s(j,x.children||[]),j.return=y,y=j;break e}else{n(y,j);break}else e(y,j);j=j.sibling}j=qd(x,y.mode,E),j.return=y,y=j}return c(y);case Qr:return T=x._init,k(y,j,T(x._payload),E)}if(ya(x))return b(y,j,x,E);if(ra(x))return _(y,j,x,E);oc(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,j!==null&&j.tag===6?(n(y,j.sibling),j=s(j,x),j.return=y,y=j):(n(y,j),j=Vd(x,y.mode,E),j.return=y,y=j),c(y)):n(y,j)}return k}var Eo=t_(!0),n_=t_(!1),Zc=Ti(null),Kc=null,to=null,pp=null;function mp(){pp=to=Kc=null}function gp(t){var e=Zc.current;rt(Zc),t._currentValue=e}function Uh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lo(t,e){Kc=t,pp=to=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hn=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(pp!==t)if(t={context:t,memoizedValue:e,next:null},to===null){if(Kc===null)throw Error(X(308));to=t,Kc.dependencies={lanes:0,firstContext:t}}else to=to.next=t;return e}var Yi=null;function vp(t){Yi===null?Yi=[t]:Yi.push(t)}function r_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vp(e)):(n.next=s.next,s.next=n),e.interleaved=n,zr(t,r)}function zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function yp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _i(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Be&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zr(t,n)}return s=r.interleaved,s===null?(e.next=e,vp(r)):(e.next=s.next,s.next=e),r.interleaved=e,zr(t,n)}function bc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rp(t,n)}}function Bg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=c:a=a.next=c,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yc(t,e,n,r){var s=t.updateQueue;Xr=!1;var a=s.firstBaseUpdate,c=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var h=d,f=h.next;h.next=null,c===null?a=f:c.next=f,c=h;var m=t.alternate;m!==null&&(m=m.updateQueue,d=m.lastBaseUpdate,d!==c&&(d===null?m.firstBaseUpdate=f:d.next=f,m.lastBaseUpdate=h))}if(a!==null){var g=s.baseState;c=0,m=f=h=null,d=a;do{var w=d.lane,C=d.eventTime;if((r&w)===w){m!==null&&(m=m.next={eventTime:C,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var b=t,_=d;switch(w=e,C=n,_.tag){case 1:if(b=_.payload,typeof b=="function"){g=b.call(C,g,w);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=_.payload,w=typeof b=="function"?b.call(C,g,w):b,w==null)break e;g=ct({},g,w);break e;case 2:Xr=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,w=s.effects,w===null?s.effects=[d]:w.push(d))}else C={eventTime:C,lane:w,tag:d.tag,payload:d.payload,callback:d.callback,next:null},m===null?(f=m=C,h=g):m=m.next=C,c|=w;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;w=d,d=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(m===null&&(h=g),s.baseState=h,s.firstBaseUpdate=f,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do c|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);gs|=c,t.lanes=c,t.memoizedState=g}}function $g(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(X(191,s));s.call(r)}}}var gl={},xr=Ti(gl),qa=Ti(gl),Ga=Ti(gl);function Ji(t){if(t===gl)throw Error(X(174));return t}function _p(t,e){switch(et(Ga,e),et(qa,t),et(xr,gl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bh(e,t)}rt(xr),et(xr,e)}function To(){rt(xr),rt(qa),rt(Ga)}function s_(t){Ji(Ga.current);var e=Ji(xr.current),n=bh(e,t.type);e!==n&&(et(qa,t),et(xr,n))}function xp(t){qa.current===t&&(rt(xr),rt(qa))}var at=Ti(0);function Jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bd=[];function wp(){for(var t=0;t<Bd.length;t++)Bd[t]._workInProgressVersionPrimary=null;Bd.length=0}var jc=Fr.ReactCurrentDispatcher,$d=Fr.ReactCurrentBatchConfig,ms=0,lt=null,Pt=null,Nt=null,Qc=!1,Ea=!1,Za=0,Yb=0;function Wt(){throw Error(X(321))}function bp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tr(t[n],e[n]))return!1;return!0}function jp(t,e,n,r,s,a){if(ms=a,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jc.current=t===null||t.memoizedState===null?ej:tj,t=n(r,s),Ea){a=0;do{if(Ea=!1,Za=0,25<=a)throw Error(X(301));a+=1,Nt=Pt=null,e.updateQueue=null,jc.current=nj,t=n(r,s)}while(Ea)}if(jc.current=Xc,e=Pt!==null&&Pt.next!==null,ms=0,Nt=Pt=lt=null,Qc=!1,e)throw Error(X(300));return t}function kp(){var t=Za!==0;return Za=0,t}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?lt.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Dn(){if(Pt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=Pt.next;var e=Nt===null?lt.memoizedState:Nt.next;if(e!==null)Nt=e,Pt=t;else{if(t===null)throw Error(X(310));Pt=t,t={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Nt===null?lt.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function Ka(t,e){return typeof e=="function"?e(t):e}function Fd(t){var e=Dn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=Pt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var c=s.next;s.next=a.next,a.next=c}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var d=c=null,h=null,f=a;do{var m=f.lane;if((ms&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(d=h=g,c=r):h=h.next=g,lt.lanes|=m,gs|=m}f=f.next}while(f!==null&&f!==a);h===null?c=r:h.next=d,tr(r,e.memoizedState)||(hn=!0),e.memoizedState=r,e.baseState=c,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,lt.lanes|=a,gs|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ud(t){var e=Dn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var c=s=s.next;do a=t(a,c.action),c=c.next;while(c!==s);tr(a,e.memoizedState)||(hn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function o_(){}function a_(t,e){var n=lt,r=Dn(),s=e(),a=!tr(r.memoizedState,s);if(a&&(r.memoizedState=s,hn=!0),r=r.queue,Sp(u_.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Nt!==null&&Nt.memoizedState.tag&1){if(n.flags|=2048,Ya(9,c_.bind(null,n,r,s,e),void 0,null),Rt===null)throw Error(X(349));ms&30||l_(n,e,s)}return s}function l_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function c_(t,e,n,r){e.value=n,e.getSnapshot=r,d_(e)&&h_(t)}function u_(t,e,n){return n(function(){d_(e)&&h_(t)})}function d_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tr(t,n)}catch{return!0}}function h_(t){var e=zr(t,1);e!==null&&er(e,t,1,-1)}function Fg(t){var e=hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:t},e.queue=t,t=t.dispatch=Xb.bind(null,lt,t),[e.memoizedState,t]}function Ya(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function f_(){return Dn().memoizedState}function kc(t,e,n,r){var s=hr();lt.flags|=t,s.memoizedState=Ya(1|e,n,void 0,r===void 0?null:r)}function xu(t,e,n,r){var s=Dn();r=r===void 0?null:r;var a=void 0;if(Pt!==null){var c=Pt.memoizedState;if(a=c.destroy,r!==null&&bp(r,c.deps)){s.memoizedState=Ya(e,n,a,r);return}}lt.flags|=t,s.memoizedState=Ya(1|e,n,a,r)}function Ug(t,e){return kc(8390656,8,t,e)}function Sp(t,e){return xu(2048,8,t,e)}function p_(t,e){return xu(4,2,t,e)}function m_(t,e){return xu(4,4,t,e)}function g_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function v_(t,e,n){return n=n!=null?n.concat([t]):null,xu(4,4,g_.bind(null,e,t),n)}function Cp(){}function y_(t,e){var n=Dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function __(t,e){var n=Dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function x_(t,e,n){return ms&21?(tr(n,e)||(n=Sy(),lt.lanes|=n,gs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hn=!0),t.memoizedState=n)}function Jb(t,e){var n=Ze;Ze=n!==0&&4>n?n:4,t(!0);var r=$d.transition;$d.transition={};try{t(!1),e()}finally{Ze=n,$d.transition=r}}function w_(){return Dn().memoizedState}function Qb(t,e,n){var r=wi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},b_(t))j_(e,n);else if(n=r_(t,e,n,r),n!==null){var s=tn();er(n,t,r,s),k_(n,e,r)}}function Xb(t,e,n){var r=wi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(b_(t))j_(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var c=e.lastRenderedState,d=a(c,n);if(s.hasEagerState=!0,s.eagerState=d,tr(d,c)){var h=e.interleaved;h===null?(s.next=s,vp(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}n=r_(t,e,s,r),n!==null&&(s=tn(),er(n,t,r,s),k_(n,e,r))}}function b_(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function j_(t,e){Ea=Qc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function k_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rp(t,n)}}var Xc={readContext:An,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},ej={readContext:An,useCallback:function(t,e){return hr().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:Ug,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kc(4194308,4,g_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kc(4194308,4,t,e)},useInsertionEffect:function(t,e){return kc(4,2,t,e)},useMemo:function(t,e){var n=hr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Qb.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=hr();return t={current:t},e.memoizedState=t},useState:Fg,useDebugValue:Cp,useDeferredValue:function(t){return hr().memoizedState=t},useTransition:function(){var t=Fg(!1),e=t[0];return t=Jb.bind(null,t[1]),hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,s=hr();if(st){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Rt===null)throw Error(X(349));ms&30||l_(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,Ug(u_.bind(null,r,a,t),[t]),r.flags|=2048,Ya(9,c_.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=hr(),e=Rt.identifierPrefix;if(st){var n=Ir,r=Rr;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Yb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tj={readContext:An,useCallback:y_,useContext:An,useEffect:Sp,useImperativeHandle:v_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:__,useReducer:Fd,useRef:f_,useState:function(){return Fd(Ka)},useDebugValue:Cp,useDeferredValue:function(t){var e=Dn();return x_(e,Pt.memoizedState,t)},useTransition:function(){var t=Fd(Ka)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:o_,useSyncExternalStore:a_,useId:w_,unstable_isNewReconciler:!1},nj={readContext:An,useCallback:y_,useContext:An,useEffect:Sp,useImperativeHandle:v_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:__,useReducer:Ud,useRef:f_,useState:function(){return Ud(Ka)},useDebugValue:Cp,useDeferredValue:function(t){var e=Dn();return Pt===null?e.memoizedState=t:x_(e,Pt.memoizedState,t)},useTransition:function(){var t=Ud(Ka)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:o_,useSyncExternalStore:a_,useId:w_,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wu={isMounted:function(t){return(t=t._reactInternals)?ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tn(),s=wi(t),a=Mr(r,s);a.payload=e,n!=null&&(a.callback=n),e=_i(t,a,s),e!==null&&(er(e,t,s,r),bc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tn(),s=wi(t),a=Mr(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=_i(t,a,s),e!==null&&(er(e,t,s,r),bc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tn(),r=wi(t),s=Mr(n,r);s.tag=2,e!=null&&(s.callback=e),e=_i(t,s,r),e!==null&&(er(e,t,r,n),bc(e,t,r))}};function Wg(t,e,n,r,s,a,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,c):e.prototype&&e.prototype.isPureReactComponent?!Ua(n,r)||!Ua(s,a):!0}function S_(t,e,n){var r=!1,s=Pi,a=e.contextType;return typeof a=="object"&&a!==null?a=An(a):(s=pn(e)?fs:Gt.current,r=e.contextTypes,a=(r=r!=null)?Co(t,s):Pi),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Hg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wu.enqueueReplaceState(e,e.state,null)}function Hh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},yp(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=An(a):(a=pn(e)?fs:Gt.current,s.context=Co(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Wh(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wu.enqueueReplaceState(s,s.state,null),Yc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Lo(t,e){try{var n="",r=e;do n+=L2(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rj=typeof WeakMap=="function"?WeakMap:Map;function C_(t,e,n){n=Mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tu||(tu=!0,tf=r),Vh(t,e)},n}function P_(t,e,n){n=Mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Vh(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Vh(t,e),typeof r!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),n}function Vg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=vj.bind(null,t,e,n),e.then(t,t))}function qg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mr(-1,1),e.tag=2,_i(n,e,1))),n.lanes|=1),t)}var ij=Fr.ReactCurrentOwner,hn=!1;function en(t,e,n,r){e.child=t===null?n_(e,null,n,r):Eo(e,t.child,n,r)}function Zg(t,e,n,r,s){n=n.render;var a=e.ref;return lo(e,s),r=jp(t,e,n,r,a,s),n=kp(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Br(t,e,s)):(st&&n&&dp(e),e.flags|=1,en(t,e,r,s),e.child)}function Kg(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Ip(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,E_(t,e,a,r,s)):(t=Ec(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var c=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ua,n(c,r)&&t.ref===e.ref)return Br(t,e,s)}return e.flags|=1,t=bi(a,r),t.ref=e.ref,t.return=e,e.child=t}function E_(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Ua(a,r)&&t.ref===e.ref)if(hn=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(hn=!0);else return e.lanes=t.lanes,Br(t,e,s)}return qh(t,e,n,r,s)}function T_(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(ro,xn),xn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et(ro,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,et(ro,xn),xn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,et(ro,xn),xn|=r;return en(t,e,s,n),e.child}function L_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qh(t,e,n,r,s){var a=pn(n)?fs:Gt.current;return a=Co(e,a),lo(e,s),n=jp(t,e,n,r,a,s),r=kp(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Br(t,e,s)):(st&&r&&dp(e),e.flags|=1,en(t,e,n,s),e.child)}function Yg(t,e,n,r,s){if(pn(n)){var a=!0;Vc(e)}else a=!1;if(lo(e,s),e.stateNode===null)Sc(t,e),S_(e,n,r),Hh(e,n,r,s),r=!0;else if(t===null){var c=e.stateNode,d=e.memoizedProps;c.props=d;var h=c.context,f=n.contextType;typeof f=="object"&&f!==null?f=An(f):(f=pn(n)?fs:Gt.current,f=Co(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof c.getSnapshotBeforeUpdate=="function";g||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==r||h!==f)&&Hg(e,c,r,f),Xr=!1;var w=e.memoizedState;c.state=w,Yc(e,r,c,s),h=e.memoizedState,d!==r||w!==h||fn.current||Xr?(typeof m=="function"&&(Wh(e,n,m,r),h=e.memoizedState),(d=Xr||Wg(e,n,d,r,w,h,f))?(g||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),c.props=r,c.state=h,c.context=f,r=d):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{c=e.stateNode,i_(t,e),d=e.memoizedProps,f=e.type===e.elementType?d:Gn(e.type,d),c.props=f,g=e.pendingProps,w=c.context,h=n.contextType,typeof h=="object"&&h!==null?h=An(h):(h=pn(n)?fs:Gt.current,h=Co(e,h));var C=n.getDerivedStateFromProps;(m=typeof C=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==g||w!==h)&&Hg(e,c,r,h),Xr=!1,w=e.memoizedState,c.state=w,Yc(e,r,c,s);var b=e.memoizedState;d!==g||w!==b||fn.current||Xr?(typeof C=="function"&&(Wh(e,n,C,r),b=e.memoizedState),(f=Xr||Wg(e,n,f,r,w,b,h)||!1)?(m||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,b,h),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,b,h)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),c.props=r,c.state=b,c.context=h,r=f):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return Gh(t,e,n,r,a,s)}function Gh(t,e,n,r,s,a){L_(t,e);var c=(e.flags&128)!==0;if(!r&&!c)return s&&Mg(e,n,!1),Br(t,e,a);r=e.stateNode,ij.current=e;var d=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&c?(e.child=Eo(e,t.child,null,a),e.child=Eo(e,null,d,a)):en(t,e,d,a),e.memoizedState=r.state,s&&Mg(e,n,!0),e.child}function O_(t){var e=t.stateNode;e.pendingContext?Ig(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ig(t,e.context,!1),_p(t,e.containerInfo)}function Jg(t,e,n,r,s){return Po(),fp(s),e.flags|=256,en(t,e,n,r),e.child}var Zh={dehydrated:null,treeContext:null,retryLane:0};function Kh(t){return{baseLanes:t,cachePool:null,transitions:null}}function N_(t,e,n){var r=e.pendingProps,s=at.current,a=!1,c=(e.flags&128)!==0,d;if((d=c)||(d=t!==null&&t.memoizedState===null?!1:(s&2)!==0),d?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),et(at,s&1),t===null)return Fh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=r.children,t=r.fallback,a?(r=e.mode,a=e.child,c={mode:"hidden",children:c},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=c):a=ku(c,r,0,null),t=ds(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Kh(n),e.memoizedState=Zh,t):Pp(e,c));if(s=t.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return sj(t,e,c,r,d,s,n);if(a){a=r.fallback,c=e.mode,s=t.child,d=s.sibling;var h={mode:"hidden",children:r.children};return!(c&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=bi(s,h),r.subtreeFlags=s.subtreeFlags&14680064),d!==null?a=bi(d,a):(a=ds(a,c,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,c=t.child.memoizedState,c=c===null?Kh(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=t.childLanes&~n,e.memoizedState=Zh,r}return a=t.child,t=a.sibling,r=bi(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pp(t,e){return e=ku({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ac(t,e,n,r){return r!==null&&fp(r),Eo(e,t.child,null,n),t=Pp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sj(t,e,n,r,s,a,c){if(n)return e.flags&256?(e.flags&=-257,r=Wd(Error(X(422))),ac(t,e,c,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=ku({mode:"visible",children:r.children},s,0,null),a=ds(a,s,c,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Eo(e,t.child,null,c),e.child.memoizedState=Kh(c),e.memoizedState=Zh,a);if(!(e.mode&1))return ac(t,e,c,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var d=r.dgst;return r=d,a=Error(X(419)),r=Wd(a,r,void 0),ac(t,e,c,r)}if(d=(c&t.childLanes)!==0,hn||d){if(r=Rt,r!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|c)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,zr(t,s),er(r,t,s,-1))}return Rp(),r=Wd(Error(X(421))),ac(t,e,c,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yj.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,bn=yi(s.nextSibling),jn=e,st=!0,Qn=null,t!==null&&(Nn[Rn++]=Rr,Nn[Rn++]=Ir,Nn[Rn++]=ps,Rr=t.id,Ir=t.overflow,ps=e),e=Pp(e,r.children),e.flags|=4096,e)}function Qg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Uh(t.return,e,n)}function Hd(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function R_(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(en(t,e,r.children,n),r=at.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qg(t,n,e);else if(t.tag===19)Qg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(et(at,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Hd(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Hd(e,!0,n,null,a);break;case"together":Hd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=bi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oj(t,e,n){switch(e.tag){case 3:O_(e),Po();break;case 5:s_(e);break;case 1:pn(e.type)&&Vc(e);break;case 4:_p(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;et(Zc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(et(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?N_(t,e,n):(et(at,at.current&1),t=Br(t,e,n),t!==null?t.sibling:null);et(at,at.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return R_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),et(at,at.current),r)break;return null;case 22:case 23:return e.lanes=0,T_(t,e,n)}return Br(t,e,n)}var I_,Yh,M_,A_;I_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yh=function(){};M_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ji(xr.current);var a=null;switch(n){case"input":s=yh(t,s),r=yh(t,r),a=[];break;case"select":s=ct({},s,{value:void 0}),r=ct({},r,{value:void 0}),a=[];break;case"textarea":s=wh(t,s),r=wh(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wc)}jh(n,r);var c;n=null;for(f in s)if(!r.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var d=s[f];for(c in d)d.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ma.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in r){var h=r[f];if(d=s!=null?s[f]:void 0,r.hasOwnProperty(f)&&h!==d&&(h!=null||d!=null))if(f==="style")if(d){for(c in d)!d.hasOwnProperty(c)||h&&h.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in h)h.hasOwnProperty(c)&&d[c]!==h[c]&&(n||(n={}),n[c]=h[c])}else n||(a||(a=[]),a.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(a=a||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(a=a||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Ma.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&nt("scroll",t),a||d===h||(a=[])):(a=a||[]).push(f,h))}n&&(a=a||[]).push("style",n);var f=a;(e.updateQueue=f)&&(e.flags|=4)}};A_=function(t,e,n,r){n!==r&&(e.flags|=4)};function ca(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aj(t,e,n){var r=e.pendingProps;switch(hp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return pn(e.type)&&Hc(),Ht(e),null;case 3:return r=e.stateNode,To(),rt(fn),rt(Gt),wp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(sf(Qn),Qn=null))),Yh(t,e),Ht(e),null;case 5:xp(e);var s=Ji(Ga.current);if(n=e.type,t!==null&&e.stateNode!=null)M_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Ht(e),null}if(t=Ji(xr.current),sc(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[vr]=e,r[Va]=a,t=(e.mode&1)!==0,n){case"dialog":nt("cancel",r),nt("close",r);break;case"iframe":case"object":case"embed":nt("load",r);break;case"video":case"audio":for(s=0;s<xa.length;s++)nt(xa[s],r);break;case"source":nt("error",r);break;case"img":case"image":case"link":nt("error",r),nt("load",r);break;case"details":nt("toggle",r);break;case"input":ag(r,a),nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},nt("invalid",r);break;case"textarea":cg(r,a),nt("invalid",r)}jh(n,a),s=null;for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];c==="children"?typeof d=="string"?r.textContent!==d&&(a.suppressHydrationWarning!==!0&&ic(r.textContent,d,t),s=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(a.suppressHydrationWarning!==!0&&ic(r.textContent,d,t),s=["children",""+d]):Ma.hasOwnProperty(c)&&d!=null&&c==="onScroll"&&nt("scroll",r)}switch(n){case"input":Yl(r),lg(r,a,!0);break;case"textarea":Yl(r),ug(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Wc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),n==="select"&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[vr]=e,t[Va]=r,I_(t,e,!1,!1),e.stateNode=t;e:{switch(c=kh(n,r),n){case"dialog":nt("cancel",t),nt("close",t),s=r;break;case"iframe":case"object":case"embed":nt("load",t),s=r;break;case"video":case"audio":for(s=0;s<xa.length;s++)nt(xa[s],t);s=r;break;case"source":nt("error",t),s=r;break;case"img":case"image":case"link":nt("error",t),nt("load",t),s=r;break;case"details":nt("toggle",t),s=r;break;case"input":ag(t,r),s=yh(t,r),nt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ct({},r,{value:void 0}),nt("invalid",t);break;case"textarea":cg(t,r),s=wh(t,r),nt("invalid",t);break;default:s=r}jh(n,s),d=s;for(a in d)if(d.hasOwnProperty(a)){var h=d[a];a==="style"?fy(t,h):a==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&dy(t,h)):a==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Aa(t,h):typeof h=="number"&&Aa(t,""+h):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ma.hasOwnProperty(a)?h!=null&&a==="onScroll"&&nt("scroll",t):h!=null&&Jf(t,a,h,c))}switch(n){case"input":Yl(t),lg(t,r,!1);break;case"textarea":Yl(t),ug(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ci(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?io(t,!!r.multiple,a,!1):r.defaultValue!=null&&io(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)A_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=Ji(Ga.current),Ji(xr.current),sc(e)){if(r=e.stateNode,n=e.memoizedProps,r[vr]=e,(a=r.nodeValue!==n)&&(t=jn,t!==null))switch(t.tag){case 3:ic(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ic(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vr]=e,e.stateNode=r}return Ht(e),null;case 13:if(rt(at),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&bn!==null&&e.mode&1&&!(e.flags&128))e_(),Po(),e.flags|=98560,a=!1;else if(a=sc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(X(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(X(317));a[vr]=e}else Po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),a=!1}else Qn!==null&&(sf(Qn),Qn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?Et===0&&(Et=3):Rp())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return To(),Yh(t,e),t===null&&Wa(e.stateNode.containerInfo),Ht(e),null;case 10:return gp(e.type._context),Ht(e),null;case 17:return pn(e.type)&&Hc(),Ht(e),null;case 19:if(rt(at),a=e.memoizedState,a===null)return Ht(e),null;if(r=(e.flags&128)!==0,c=a.rendering,c===null)if(r)ca(a,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=Jc(t),c!==null){for(e.flags|=128,ca(a,!1),r=c.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,c=a.alternate,c===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,t=c.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return et(at,at.current&1|2),e.child}t=t.sibling}a.tail!==null&&gt()>Oo&&(e.flags|=128,r=!0,ca(a,!1),e.lanes=4194304)}else{if(!r)if(t=Jc(c),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ca(a,!0),a.tail===null&&a.tailMode==="hidden"&&!c.alternate&&!st)return Ht(e),null}else 2*gt()-a.renderingStartTime>Oo&&n!==1073741824&&(e.flags|=128,r=!0,ca(a,!1),e.lanes=4194304);a.isBackwards?(c.sibling=e.child,e.child=c):(n=a.last,n!==null?n.sibling=c:e.child=c,a.last=c)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=gt(),e.sibling=null,n=at.current,et(at,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return Np(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function lj(t,e){switch(hp(e),e.tag){case 1:return pn(e.type)&&Hc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return To(),rt(fn),rt(Gt),wp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xp(e),null;case 13:if(rt(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rt(at),null;case 4:return To(),null;case 10:return gp(e.type._context),null;case 22:case 23:return Np(),null;case 24:return null;default:return null}}var lc=!1,Vt=!1,cj=typeof WeakSet=="function"?WeakSet:Set,ce=null;function no(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function Jh(t,e,n){try{n()}catch(r){dt(t,e,r)}}var Xg=!1;function uj(t,e){if(Ih=$c,t=Fy(),up(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var c=0,d=-1,h=-1,f=0,m=0,g=t,w=null;t:for(;;){for(var C;g!==n||s!==0&&g.nodeType!==3||(d=c+s),g!==a||r!==0&&g.nodeType!==3||(h=c+r),g.nodeType===3&&(c+=g.nodeValue.length),(C=g.firstChild)!==null;)w=g,g=C;for(;;){if(g===t)break t;if(w===n&&++f===s&&(d=c),w===a&&++m===r&&(h=c),(C=g.nextSibling)!==null)break;g=w,w=g.parentNode}g=C}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mh={focusedElem:t,selectionRange:n},$c=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var _=b.memoizedProps,k=b.memoizedState,y=e.stateNode,j=y.getSnapshotBeforeUpdate(e.elementType===e.type?_:Gn(e.type,_),k);y.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(E){dt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return b=Xg,Xg=!1,b}function Ta(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Jh(e,n,a)}s=s.next}while(s!==r)}}function bu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function D_(t){var e=t.alternate;e!==null&&(t.alternate=null,D_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vr],delete e[Va],delete e[zh],delete e[qb],delete e[Gb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function z_(t){return t.tag===5||t.tag===3||t.tag===4}function ev(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wc));else if(r!==4&&(t=t.child,t!==null))for(Xh(t,e,n),t=t.sibling;t!==null;)Xh(t,e,n),t=t.sibling}function ef(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ef(t,e,n),t=t.sibling;t!==null;)ef(t,e,n),t=t.sibling}var Dt=null,Yn=!1;function Gr(t,e,n){for(n=n.child;n!==null;)B_(t,e,n),n=n.sibling}function B_(t,e,n){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(pu,n)}catch{}switch(n.tag){case 5:Vt||no(n,e);case 6:var r=Dt,s=Yn;Dt=null,Gr(t,e,n),Dt=r,Yn=s,Dt!==null&&(Yn?(t=Dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dt.removeChild(n.stateNode));break;case 18:Dt!==null&&(Yn?(t=Dt,n=n.stateNode,t.nodeType===8?Dd(t.parentNode,n):t.nodeType===1&&Dd(t,n),$a(t)):Dd(Dt,n.stateNode));break;case 4:r=Dt,s=Yn,Dt=n.stateNode.containerInfo,Yn=!0,Gr(t,e,n),Dt=r,Yn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,c=a.destroy;a=a.tag,c!==void 0&&(a&2||a&4)&&Jh(n,e,c),s=s.next}while(s!==r)}Gr(t,e,n);break;case 1:if(!Vt&&(no(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){dt(n,e,d)}Gr(t,e,n);break;case 21:Gr(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,Gr(t,e,n),Vt=r):Gr(t,e,n);break;default:Gr(t,e,n)}}function tv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cj),e.forEach(function(r){var s=_j.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,c=e,d=c;e:for(;d!==null;){switch(d.tag){case 5:Dt=d.stateNode,Yn=!1;break e;case 3:Dt=d.stateNode.containerInfo,Yn=!0;break e;case 4:Dt=d.stateNode.containerInfo,Yn=!0;break e}d=d.return}if(Dt===null)throw Error(X(160));B_(a,c,s),Dt=null,Yn=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(f){dt(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$_(e,t),e=e.sibling}function $_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),cr(t),r&4){try{Ta(3,t,t.return),bu(3,t)}catch(_){dt(t,t.return,_)}try{Ta(5,t,t.return)}catch(_){dt(t,t.return,_)}}break;case 1:Wn(e,t),cr(t),r&512&&n!==null&&no(n,n.return);break;case 5:if(Wn(e,t),cr(t),r&512&&n!==null&&no(n,n.return),t.flags&32){var s=t.stateNode;try{Aa(s,"")}catch(_){dt(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,c=n!==null?n.memoizedProps:a,d=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{d==="input"&&a.type==="radio"&&a.name!=null&&ly(s,a),kh(d,c);var f=kh(d,a);for(c=0;c<h.length;c+=2){var m=h[c],g=h[c+1];m==="style"?fy(s,g):m==="dangerouslySetInnerHTML"?dy(s,g):m==="children"?Aa(s,g):Jf(s,m,g,f)}switch(d){case"input":_h(s,a);break;case"textarea":cy(s,a);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var C=a.value;C!=null?io(s,!!a.multiple,C,!1):w!==!!a.multiple&&(a.defaultValue!=null?io(s,!!a.multiple,a.defaultValue,!0):io(s,!!a.multiple,a.multiple?[]:"",!1))}s[Va]=a}catch(_){dt(t,t.return,_)}}break;case 6:if(Wn(e,t),cr(t),r&4){if(t.stateNode===null)throw Error(X(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(_){dt(t,t.return,_)}}break;case 3:if(Wn(e,t),cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$a(e.containerInfo)}catch(_){dt(t,t.return,_)}break;case 4:Wn(e,t),cr(t);break;case 13:Wn(e,t),cr(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Lp=gt())),r&4&&tv(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(f=Vt)||m,Wn(e,t),Vt=f):Wn(e,t),cr(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(ce=t,m=t.child;m!==null;){for(g=ce=m;ce!==null;){switch(w=ce,C=w.child,w.tag){case 0:case 11:case 14:case 15:Ta(4,w,w.return);break;case 1:no(w,w.return);var b=w.stateNode;if(typeof b.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(_){dt(r,n,_)}}break;case 5:no(w,w.return);break;case 22:if(w.memoizedState!==null){rv(g);continue}}C!==null?(C.return=w,ce=C):rv(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{s=g.stateNode,f?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(d=g.stateNode,h=g.memoizedProps.style,c=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=hy("display",c))}catch(_){dt(t,t.return,_)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(_){dt(t,t.return,_)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Wn(e,t),cr(t),r&4&&tv(t);break;case 21:break;default:Wn(e,t),cr(t)}}function cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(z_(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Aa(s,""),r.flags&=-33);var a=ev(t);ef(t,a,s);break;case 3:case 4:var c=r.stateNode.containerInfo,d=ev(t);Xh(t,d,c);break;default:throw Error(X(161))}}catch(h){dt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dj(t,e,n){ce=t,F_(t)}function F_(t,e,n){for(var r=(t.mode&1)!==0;ce!==null;){var s=ce,a=s.child;if(s.tag===22&&r){var c=s.memoizedState!==null||lc;if(!c){var d=s.alternate,h=d!==null&&d.memoizedState!==null||Vt;d=lc;var f=Vt;if(lc=c,(Vt=h)&&!f)for(ce=s;ce!==null;)c=ce,h=c.child,c.tag===22&&c.memoizedState!==null?iv(s):h!==null?(h.return=c,ce=h):iv(s);for(;a!==null;)ce=a,F_(a),a=a.sibling;ce=s,lc=d,Vt=f}nv(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ce=a):nv(t)}}function nv(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||bu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&$g(e,a,r);break;case 3:var c=e.updateQueue;if(c!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$g(e,c,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&$a(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Vt||e.flags&512&&Qh(e)}catch(w){dt(e,e.return,w)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function rv(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function iv(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bu(4,e)}catch(h){dt(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(h){dt(e,s,h)}}var a=e.return;try{Qh(e)}catch(h){dt(e,a,h)}break;case 5:var c=e.return;try{Qh(e)}catch(h){dt(e,c,h)}}}catch(h){dt(e,e.return,h)}if(e===t){ce=null;break}var d=e.sibling;if(d!==null){d.return=e.return,ce=d;break}ce=e.return}}var hj=Math.ceil,eu=Fr.ReactCurrentDispatcher,Ep=Fr.ReactCurrentOwner,Mn=Fr.ReactCurrentBatchConfig,Be=0,Rt=null,kt=null,Bt=0,xn=0,ro=Ti(0),Et=0,Ja=null,gs=0,ju=0,Tp=0,La=null,un=null,Lp=0,Oo=1/0,Pr=null,tu=!1,tf=null,xi=null,cc=!1,hi=null,nu=0,Oa=0,nf=null,Cc=-1,Pc=0;function tn(){return Be&6?gt():Cc!==-1?Cc:Cc=gt()}function wi(t){return t.mode&1?Be&2&&Bt!==0?Bt&-Bt:Kb.transition!==null?(Pc===0&&(Pc=Sy()),Pc):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:Ny(t.type)),t):1}function er(t,e,n,r){if(50<Oa)throw Oa=0,nf=null,Error(X(185));fl(t,n,r),(!(Be&2)||t!==Rt)&&(t===Rt&&(!(Be&2)&&(ju|=n),Et===4&&ti(t,Bt)),mn(t,r),n===1&&Be===0&&!(e.mode&1)&&(Oo=gt()+500,_u&&Li()))}function mn(t,e){var n=t.callbackNode;K2(t,e);var r=Bc(t,t===Rt?Bt:0);if(r===0)n!==null&&fg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fg(n),e===1)t.tag===0?Zb(sv.bind(null,t)):Jy(sv.bind(null,t)),Hb(function(){!(Be&6)&&Li()}),n=null;else{switch(Cy(r)){case 1:n=np;break;case 4:n=jy;break;case 16:n=zc;break;case 536870912:n=ky;break;default:n=zc}n=K_(n,U_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function U_(t,e){if(Cc=-1,Pc=0,Be&6)throw Error(X(327));var n=t.callbackNode;if(co()&&t.callbackNode!==n)return null;var r=Bc(t,t===Rt?Bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ru(t,r);else{e=r;var s=Be;Be|=2;var a=H_();(Rt!==t||Bt!==e)&&(Pr=null,Oo=gt()+500,us(t,e));do try{mj();break}catch(d){W_(t,d)}while(!0);mp(),eu.current=a,Be=s,kt!==null?e=0:(Rt=null,Bt=0,e=Et)}if(e!==0){if(e===2&&(s=Th(t),s!==0&&(r=s,e=rf(t,s))),e===1)throw n=Ja,us(t,0),ti(t,r),mn(t,gt()),n;if(e===6)ti(t,r);else{if(s=t.current.alternate,!(r&30)&&!fj(s)&&(e=ru(t,r),e===2&&(a=Th(t),a!==0&&(r=a,e=rf(t,a))),e===1))throw n=Ja,us(t,0),ti(t,r),mn(t,gt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Hi(t,un,Pr);break;case 3:if(ti(t,r),(r&130023424)===r&&(e=Lp+500-gt(),10<e)){if(Bc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){tn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dh(Hi.bind(null,t,un,Pr),e);break}Hi(t,un,Pr);break;case 4:if(ti(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var c=31-Xn(r);a=1<<c,c=e[c],c>s&&(s=c),r&=~a}if(r=s,r=gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hj(r/1960))-r,10<r){t.timeoutHandle=Dh(Hi.bind(null,t,un,Pr),r);break}Hi(t,un,Pr);break;case 5:Hi(t,un,Pr);break;default:throw Error(X(329))}}}return mn(t,gt()),t.callbackNode===n?U_.bind(null,t):null}function rf(t,e){var n=La;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=ru(t,e),t!==2&&(e=un,un=n,e!==null&&sf(e)),t}function sf(t){un===null?un=t:un.push.apply(un,t)}function fj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!tr(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ti(t,e){for(e&=~Tp,e&=~ju,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xn(e),r=1<<n;t[n]=-1,e&=~r}}function sv(t){if(Be&6)throw Error(X(327));co();var e=Bc(t,0);if(!(e&1))return mn(t,gt()),null;var n=ru(t,e);if(t.tag!==0&&n===2){var r=Th(t);r!==0&&(e=r,n=rf(t,r))}if(n===1)throw n=Ja,us(t,0),ti(t,e),mn(t,gt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hi(t,un,Pr),mn(t,gt()),null}function Op(t,e){var n=Be;Be|=1;try{return t(e)}finally{Be=n,Be===0&&(Oo=gt()+500,_u&&Li())}}function vs(t){hi!==null&&hi.tag===0&&!(Be&6)&&co();var e=Be;Be|=1;var n=Mn.transition,r=Ze;try{if(Mn.transition=null,Ze=1,t)return t()}finally{Ze=r,Mn.transition=n,Be=e,!(Be&6)&&Li()}}function Np(){xn=ro.current,rt(ro)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Wb(n)),kt!==null)for(n=kt.return;n!==null;){var r=n;switch(hp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hc();break;case 3:To(),rt(fn),rt(Gt),wp();break;case 5:xp(r);break;case 4:To();break;case 13:rt(at);break;case 19:rt(at);break;case 10:gp(r.type._context);break;case 22:case 23:Np()}n=n.return}if(Rt=t,kt=t=bi(t.current,null),Bt=xn=e,Et=0,Ja=null,Tp=ju=gs=0,un=La=null,Yi!==null){for(e=0;e<Yi.length;e++)if(n=Yi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var c=a.next;a.next=s,r.next=c}n.pending=r}Yi=null}return t}function W_(t,e){do{var n=kt;try{if(mp(),jc.current=Xc,Qc){for(var r=lt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qc=!1}if(ms=0,Nt=Pt=lt=null,Ea=!1,Za=0,Ep.current=null,n===null||n.return===null){Et=1,Ja=e,kt=null;break}e:{var a=t,c=n.return,d=n,h=e;if(e=Bt,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=d,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var w=m.alternate;w?(m.updateQueue=w.updateQueue,m.memoizedState=w.memoizedState,m.lanes=w.lanes):(m.updateQueue=null,m.memoizedState=null)}var C=qg(c);if(C!==null){C.flags&=-257,Gg(C,c,d,a,e),C.mode&1&&Vg(a,f,e),e=C,h=f;var b=e.updateQueue;if(b===null){var _=new Set;_.add(h),e.updateQueue=_}else b.add(h);break e}else{if(!(e&1)){Vg(a,f,e),Rp();break e}h=Error(X(426))}}else if(st&&d.mode&1){var k=qg(c);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Gg(k,c,d,a,e),fp(Lo(h,d));break e}}a=h=Lo(h,d),Et!==4&&(Et=2),La===null?La=[a]:La.push(a),a=c;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=C_(a,h,e);Bg(a,y);break e;case 1:d=h;var j=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof j.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(xi===null||!xi.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e;var E=P_(a,d,e);Bg(a,E);break e}}a=a.return}while(a!==null)}q_(n)}catch(A){e=A,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function H_(){var t=eu.current;return eu.current=Xc,t===null?Xc:t}function Rp(){(Et===0||Et===3||Et===2)&&(Et=4),Rt===null||!(gs&268435455)&&!(ju&268435455)||ti(Rt,Bt)}function ru(t,e){var n=Be;Be|=2;var r=H_();(Rt!==t||Bt!==e)&&(Pr=null,us(t,e));do try{pj();break}catch(s){W_(t,s)}while(!0);if(mp(),Be=n,eu.current=r,kt!==null)throw Error(X(261));return Rt=null,Bt=0,Et}function pj(){for(;kt!==null;)V_(kt)}function mj(){for(;kt!==null&&!$2();)V_(kt)}function V_(t){var e=Z_(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?q_(t):kt=e,Ep.current=null}function q_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lj(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,kt=null;return}}else if(n=aj(n,e,xn),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Et===0&&(Et=5)}function Hi(t,e,n){var r=Ze,s=Mn.transition;try{Mn.transition=null,Ze=1,gj(t,e,n,r)}finally{Mn.transition=s,Ze=r}return null}function gj(t,e,n,r){do co();while(hi!==null);if(Be&6)throw Error(X(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Y2(t,a),t===Rt&&(kt=Rt=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cc||(cc=!0,K_(zc,function(){return co(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Mn.transition,Mn.transition=null;var c=Ze;Ze=1;var d=Be;Be|=4,Ep.current=null,uj(t,n),$_(n,t),Ab(Mh),$c=!!Ih,Mh=Ih=null,t.current=n,dj(n),F2(),Be=d,Ze=c,Mn.transition=a}else t.current=n;if(cc&&(cc=!1,hi=t,nu=s),a=t.pendingLanes,a===0&&(xi=null),H2(n.stateNode),mn(t,gt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tu)throw tu=!1,t=tf,tf=null,t;return nu&1&&t.tag!==0&&co(),a=t.pendingLanes,a&1?t===nf?Oa++:(Oa=0,nf=t):Oa=0,Li(),null}function co(){if(hi!==null){var t=Cy(nu),e=Mn.transition,n=Ze;try{if(Mn.transition=null,Ze=16>t?16:t,hi===null)var r=!1;else{if(t=hi,hi=null,nu=0,Be&6)throw Error(X(331));var s=Be;for(Be|=4,ce=t.current;ce!==null;){var a=ce,c=a.child;if(ce.flags&16){var d=a.deletions;if(d!==null){for(var h=0;h<d.length;h++){var f=d[h];for(ce=f;ce!==null;){var m=ce;switch(m.tag){case 0:case 11:case 15:Ta(8,m,a)}var g=m.child;if(g!==null)g.return=m,ce=g;else for(;ce!==null;){m=ce;var w=m.sibling,C=m.return;if(D_(m),m===f){ce=null;break}if(w!==null){w.return=C,ce=w;break}ce=C}}}var b=a.alternate;if(b!==null){var _=b.child;if(_!==null){b.child=null;do{var k=_.sibling;_.sibling=null,_=k}while(_!==null)}}ce=a}}if(a.subtreeFlags&2064&&c!==null)c.return=a,ce=c;else e:for(;ce!==null;){if(a=ce,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ta(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,ce=y;break e}ce=a.return}}var j=t.current;for(ce=j;ce!==null;){c=ce;var x=c.child;if(c.subtreeFlags&2064&&x!==null)x.return=c,ce=x;else e:for(c=j;ce!==null;){if(d=ce,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:bu(9,d)}}catch(A){dt(d,d.return,A)}if(d===c){ce=null;break e}var E=d.sibling;if(E!==null){E.return=d.return,ce=E;break e}ce=d.return}}if(Be=s,Li(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(pu,t)}catch{}r=!0}return r}finally{Ze=n,Mn.transition=e}}return!1}function ov(t,e,n){e=Lo(n,e),e=C_(t,e,1),t=_i(t,e,1),e=tn(),t!==null&&(fl(t,1,e),mn(t,e))}function dt(t,e,n){if(t.tag===3)ov(t,t,n);else for(;e!==null;){if(e.tag===3){ov(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xi===null||!xi.has(r))){t=Lo(n,t),t=P_(e,t,1),e=_i(e,t,1),t=tn(),e!==null&&(fl(e,1,t),mn(e,t));break}}e=e.return}}function vj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tn(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Bt&n)===n&&(Et===4||Et===3&&(Bt&130023424)===Bt&&500>gt()-Lp?us(t,0):Tp|=n),mn(t,e)}function G_(t,e){e===0&&(t.mode&1?(e=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):e=1);var n=tn();t=zr(t,e),t!==null&&(fl(t,e,n),mn(t,n))}function yj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),G_(t,n)}function _j(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),G_(t,n)}var Z_;Z_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hn=!1,oj(t,e,n);hn=!!(t.flags&131072)}else hn=!1,st&&e.flags&1048576&&Qy(e,Gc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sc(t,e),t=e.pendingProps;var s=Co(e,Gt.current);lo(e,n),s=jp(null,e,r,t,s,n);var a=kp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(r)?(a=!0,Vc(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yp(e),s.updater=wu,e.stateNode=s,s._reactInternals=e,Hh(e,r,t,n),e=Gh(null,e,r,!0,a,n)):(e.tag=0,st&&a&&dp(e),en(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wj(r),t=Gn(r,t),s){case 0:e=qh(null,e,r,t,n);break e;case 1:e=Yg(null,e,r,t,n);break e;case 11:e=Zg(null,e,r,t,n);break e;case 14:e=Kg(null,e,r,Gn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gn(r,s),qh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gn(r,s),Yg(t,e,r,s,n);case 3:e:{if(O_(e),t===null)throw Error(X(387));r=e.pendingProps,a=e.memoizedState,s=a.element,i_(t,e),Yc(e,r,null,n);var c=e.memoizedState;if(r=c.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Lo(Error(X(423)),e),e=Jg(t,e,r,n,s);break e}else if(r!==s){s=Lo(Error(X(424)),e),e=Jg(t,e,r,n,s);break e}else for(bn=yi(e.stateNode.containerInfo.firstChild),jn=e,st=!0,Qn=null,n=n_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Po(),r===s){e=Br(t,e,n);break e}en(t,e,r,n)}e=e.child}return e;case 5:return s_(e),t===null&&Fh(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,c=s.children,Ah(r,s)?c=null:a!==null&&Ah(r,a)&&(e.flags|=32),L_(t,e),en(t,e,c,n),e.child;case 6:return t===null&&Fh(e),null;case 13:return N_(t,e,n);case 4:return _p(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Eo(e,null,r,n):en(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gn(r,s),Zg(t,e,r,s,n);case 7:return en(t,e,e.pendingProps,n),e.child;case 8:return en(t,e,e.pendingProps.children,n),e.child;case 12:return en(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,c=s.value,et(Zc,r._currentValue),r._currentValue=c,a!==null)if(tr(a.value,c)){if(a.children===s.children&&!fn.current){e=Br(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var d=a.dependencies;if(d!==null){c=a.child;for(var h=d.firstContext;h!==null;){if(h.context===r){if(a.tag===1){h=Mr(-1,n&-n),h.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}a.lanes|=n,h=a.alternate,h!==null&&(h.lanes|=n),Uh(a.return,n,e),d.lanes|=n;break}h=h.next}}else if(a.tag===10)c=a.type===e.type?null:a.child;else if(a.tag===18){if(c=a.return,c===null)throw Error(X(341));c.lanes|=n,d=c.alternate,d!==null&&(d.lanes|=n),Uh(c,n,e),c=a.sibling}else c=a.child;if(c!==null)c.return=a;else for(c=a;c!==null;){if(c===e){c=null;break}if(a=c.sibling,a!==null){a.return=c.return,c=a;break}c=c.return}a=c}en(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,lo(e,n),s=An(s),r=r(s),e.flags|=1,en(t,e,r,n),e.child;case 14:return r=e.type,s=Gn(r,e.pendingProps),s=Gn(r.type,s),Kg(t,e,r,s,n);case 15:return E_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gn(r,s),Sc(t,e),e.tag=1,pn(r)?(t=!0,Vc(e)):t=!1,lo(e,n),S_(e,r,s),Hh(e,r,s,n),Gh(null,e,r,!0,t,n);case 19:return R_(t,e,n);case 22:return T_(t,e,n)}throw Error(X(156,e.tag))};function K_(t,e){return by(t,e)}function xj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new xj(t,e,n,r)}function Ip(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wj(t){if(typeof t=="function")return Ip(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xf)return 11;if(t===ep)return 14}return 2}function bi(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ec(t,e,n,r,s,a){var c=2;if(r=t,typeof t=="function")Ip(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case Gs:return ds(n.children,s,a,e);case Qf:c=8,s|=8;break;case ph:return t=In(12,n,e,s|2),t.elementType=ph,t.lanes=a,t;case mh:return t=In(13,n,e,s),t.elementType=mh,t.lanes=a,t;case gh:return t=In(19,n,e,s),t.elementType=gh,t.lanes=a,t;case sy:return ku(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ry:c=10;break e;case iy:c=9;break e;case Xf:c=11;break e;case ep:c=14;break e;case Qr:c=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=In(c,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function ds(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function ku(t,e,n,r){return t=In(22,t,r,e),t.elementType=sy,t.lanes=n,t.stateNode={isHidden:!1},t}function Vd(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function qd(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cd(0),this.expirationTimes=Cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mp(t,e,n,r,s,a,c,d,h){return t=new bj(t,e,n,d,h),e===1?(e=1,a===!0&&(e|=8)):e=0,a=In(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yp(a),t}function jj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Y_(t){if(!t)return Pi;t=t._reactInternals;e:{if(ws(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(pn(n))return Yy(t,n,e)}return e}function J_(t,e,n,r,s,a,c,d,h){return t=Mp(n,r,!0,t,s,a,c,d,h),t.context=Y_(null),n=t.current,r=tn(),s=wi(n),a=Mr(r,s),a.callback=e??null,_i(n,a,s),t.current.lanes=s,fl(t,s,r),mn(t,r),t}function Su(t,e,n,r){var s=e.current,a=tn(),c=wi(s);return n=Y_(n),e.context===null?e.context=n:e.pendingContext=n,e=Mr(a,c),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_i(s,e,c),t!==null&&(er(t,s,c,a),bc(t,s,c)),c}function iu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function av(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ap(t,e){av(t,e),(t=t.alternate)&&av(t,e)}function kj(){return null}var Q_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dp(t){this._internalRoot=t}Cu.prototype.render=Dp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Su(t,e,null,null)};Cu.prototype.unmount=Dp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vs(function(){Su(null,t,null,null)}),e[Dr]=null}};function Cu(t){this._internalRoot=t}Cu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ty();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ei.length&&e!==0&&e<ei[n].priority;n++);ei.splice(n,0,t),n===0&&Oy(t)}};function zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lv(){}function Sj(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var f=iu(c);a.call(f)}}var c=J_(e,r,t,0,null,!1,!1,"",lv);return t._reactRootContainer=c,t[Dr]=c.current,Wa(t.nodeType===8?t.parentNode:t),vs(),c}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var d=r;r=function(){var f=iu(h);d.call(f)}}var h=Mp(t,0,!1,null,null,!1,!1,"",lv);return t._reactRootContainer=h,t[Dr]=h.current,Wa(t.nodeType===8?t.parentNode:t),vs(function(){Su(e,h,n,r)}),h}function Eu(t,e,n,r,s){var a=n._reactRootContainer;if(a){var c=a;if(typeof s=="function"){var d=s;s=function(){var h=iu(c);d.call(h)}}Su(e,c,t,s)}else c=Sj(n,e,t,s,r);return iu(c)}Py=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_a(e.pendingLanes);n!==0&&(rp(e,n|1),mn(e,gt()),!(Be&6)&&(Oo=gt()+500,Li()))}break;case 13:vs(function(){var r=zr(t,1);if(r!==null){var s=tn();er(r,t,1,s)}}),Ap(t,1)}};ip=function(t){if(t.tag===13){var e=zr(t,134217728);if(e!==null){var n=tn();er(e,t,134217728,n)}Ap(t,134217728)}};Ey=function(t){if(t.tag===13){var e=wi(t),n=zr(t,e);if(n!==null){var r=tn();er(n,t,e,r)}Ap(t,e)}};Ty=function(){return Ze};Ly=function(t,e){var n=Ze;try{return Ze=t,e()}finally{Ze=n}};Ch=function(t,e,n){switch(e){case"input":if(_h(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yu(r);if(!s)throw Error(X(90));ay(r),_h(r,s)}}}break;case"textarea":cy(t,n);break;case"select":e=n.value,e!=null&&io(t,!!n.multiple,e,!1)}};gy=Op;vy=vs;var Cj={usingClientEntryPoint:!1,Events:[ml,Js,yu,py,my,Op]},ua={findFiberByHostInstance:Ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pj={bundleType:ua.bundleType,version:ua.version,rendererPackageName:ua.rendererPackageName,rendererConfig:ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xy(t),t===null?null:t.stateNode},findFiberByHostInstance:ua.findFiberByHostInstance||kj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{pu=uc.inject(Pj),_r=uc}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cj;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zp(e))throw Error(X(200));return jj(t,e,null,n)};Sn.createRoot=function(t,e){if(!zp(t))throw Error(X(299));var n=!1,r="",s=Q_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mp(t,1,!1,null,null,n,!1,r,s),t[Dr]=e.current,Wa(t.nodeType===8?t.parentNode:t),new Dp(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=xy(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return vs(t)};Sn.hydrate=function(t,e,n){if(!Pu(e))throw Error(X(200));return Eu(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!zp(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",c=Q_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),e=J_(e,null,t,1,n??null,s,!1,a,c),t[Dr]=e.current,Wa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Cu(e)};Sn.render=function(t,e,n){if(!Pu(e))throw Error(X(200));return Eu(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!Pu(t))throw Error(X(40));return t._reactRootContainer?(vs(function(){Eu(null,null,t,!1,function(){t._reactRootContainer=null,t[Dr]=null})}),!0):!1};Sn.unstable_batchedUpdates=Op;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pu(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Eu(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function X_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X_)}catch(t){console.error(t)}}X_(),X0.exports=Sn;var Tu=X0.exports,e1,cv=Tu;e1=cv.createRoot,cv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qa(){return Qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qa.apply(this,arguments)}var fi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fi||(fi={}));const uv="popstate";function Ej(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:c,hash:d}=r.location;return of("",{pathname:a,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:su(s)}return Lj(e,n,null,t)}function vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function t1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Tj(){return Math.random().toString(36).substr(2,8)}function dv(t,e){return{usr:t.state,key:t.key,idx:e}}function of(t,e,n,r){return n===void 0&&(n=null),Qa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zo(e):e,{state:n,key:e&&e.key||r||Tj()})}function su(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Lj(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,d=fi.Pop,h=null,f=m();f==null&&(f=0,c.replaceState(Qa({},c.state,{idx:f}),""));function m(){return(c.state||{idx:null}).idx}function g(){d=fi.Pop;let k=m(),y=k==null?null:k-f;f=k,h&&h({action:d,location:_.location,delta:y})}function w(k,y){d=fi.Push;let j=of(_.location,k,y);f=m()+1;let x=dv(j,f),E=_.createHref(j);try{c.pushState(x,"",E)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(E)}a&&h&&h({action:d,location:_.location,delta:1})}function C(k,y){d=fi.Replace;let j=of(_.location,k,y);f=m();let x=dv(j,f),E=_.createHref(j);c.replaceState(x,"",E),a&&h&&h({action:d,location:_.location,delta:0})}function b(k){let y=s.location.origin!=="null"?s.location.origin:s.location.href,j=typeof k=="string"?k:su(k);return j=j.replace(/ $/,"%20"),vt(y,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,y)}let _={get action(){return d},get location(){return t(s,c)},listen(k){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(uv,g),h=k,()=>{s.removeEventListener(uv,g),h=null}},createHref(k){return e(s,k)},createURL:b,encodeLocation(k){let y=b(k);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:w,replace:C,go(k){return c.go(k)}};return _}var hv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hv||(hv={}));function Oj(t,e,n){return n===void 0&&(n="/"),Nj(t,e,n)}function Nj(t,e,n,r){let s=typeof e=="string"?zo(e):e,a=Bp(s.pathname||"/",n);if(a==null)return null;let c=n1(t);Rj(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=Vj(a);d=Uj(c[h],f)}return d}function n1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,c,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(vt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=ji([r,h.relativePath]),m=n.concat(h);a.children&&a.children.length>0&&(vt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),n1(a.children,e,m,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:$j(f,a.index),routesMeta:m})};return t.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,c);else for(let h of r1(a.path))s(a,c,h)}),e}function r1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=r1(r.join("/")),d=[];return d.push(...c.map(h=>h===""?a:[a,h].join("/"))),s&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function Rj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Fj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Ij=/^:[\w-]+$/,Mj=3,Aj=2,Dj=1,zj=10,Bj=-2,fv=t=>t==="*";function $j(t,e){let n=t.split("/"),r=n.length;return n.some(fv)&&(r+=Bj),e&&(r+=Aj),n.filter(s=>!fv(s)).reduce((s,a)=>s+(Ij.test(a)?Mj:a===""?Dj:zj),r)}function Fj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Uj(t,e,n){let{routesMeta:r}=t,s={},a="/",c=[];for(let d=0;d<r.length;++d){let h=r[d],f=d===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",g=Wj({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),w=h.route;if(!g)return null;Object.assign(s,g.params),c.push({params:s,pathname:ji([a,g.pathname]),pathnameBase:Kj(ji([a,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(a=ji([a,g.pathnameBase]))}return c}function Wj(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Hj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((f,m,g)=>{let{paramName:w,isOptional:C}=m;if(w==="*"){let _=d[g]||"";c=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const b=d[g];return C&&!b?f[w]=void 0:f[w]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:t}}function Hj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),t1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Vj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return t1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function qj(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?zo(t):t;return{pathname:n?n.startsWith("/")?n:Gj(n,e):e,search:Yj(r),hash:Jj(s)}}function Gj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Gd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Zj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $p(t,e){let n=Zj(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Fp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=zo(t):(s=Qa({},t),vt(!s.pathname||!s.pathname.includes("?"),Gd("?","pathname","search",s)),vt(!s.pathname||!s.pathname.includes("#"),Gd("#","pathname","hash",s)),vt(!s.search||!s.search.includes("#"),Gd("#","search","hash",s)));let a=t===""||s.pathname==="",c=a?"/":s.pathname,d;if(c==null)d=n;else{let g=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),g-=1;s.pathname=w.join("/")}d=g>=0?e[g]:"/"}let h=qj(s,d),f=c&&c!=="/"&&c.endsWith("/"),m=(a||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const ji=t=>t.join("/").replace(/\/\/+/g,"/"),Kj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Yj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Jj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Qj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const i1=["post","put","patch","delete"];new Set(i1);const Xj=["get",...i1];new Set(Xj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xa(){return Xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xa.apply(this,arguments)}const Up=S.createContext(null),ek=S.createContext(null),Oi=S.createContext(null),Lu=S.createContext(null),Ni=S.createContext({outlet:null,matches:[],isDataRoute:!1}),s1=S.createContext(null);function tk(t,e){let{relative:n}=e===void 0?{}:e;Bo()||vt(!1);let{basename:r,navigator:s}=S.useContext(Oi),{hash:a,pathname:c,search:d}=a1(t,{relative:n}),h=c;return r!=="/"&&(h=c==="/"?r:ji([r,c])),s.createHref({pathname:h,search:d,hash:a})}function Bo(){return S.useContext(Lu)!=null}function bs(){return Bo()||vt(!1),S.useContext(Lu).location}function o1(t){S.useContext(Oi).static||S.useLayoutEffect(t)}function js(){let{isDataRoute:t}=S.useContext(Ni);return t?pk():nk()}function nk(){Bo()||vt(!1);let t=S.useContext(Up),{basename:e,future:n,navigator:r}=S.useContext(Oi),{matches:s}=S.useContext(Ni),{pathname:a}=bs(),c=JSON.stringify($p(s,n.v7_relativeSplatPath)),d=S.useRef(!1);return o1(()=>{d.current=!0}),S.useCallback(function(f,m){if(m===void 0&&(m={}),!d.current)return;if(typeof f=="number"){r.go(f);return}let g=Fp(f,JSON.parse(c),a,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ji([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,c,a,t])}function a1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(Oi),{matches:s}=S.useContext(Ni),{pathname:a}=bs(),c=JSON.stringify($p(s,r.v7_relativeSplatPath));return S.useMemo(()=>Fp(t,JSON.parse(c),a,n==="path"),[t,c,a,n])}function rk(t,e){return ik(t,e)}function ik(t,e,n,r){Bo()||vt(!1);let{navigator:s}=S.useContext(Oi),{matches:a}=S.useContext(Ni),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=bs(),m;if(e){var g;let k=typeof e=="string"?zo(e):e;h==="/"||(g=k.pathname)!=null&&g.startsWith(h)||vt(!1),m=k}else m=f;let w=m.pathname||"/",C=w;if(h!=="/"){let k=h.replace(/^\//,"").split("/");C="/"+w.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=Oj(t,{pathname:C}),_=ck(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:ji([h,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:ji([h,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,n,r);return e&&_?S.createElement(Lu.Provider,{value:{location:Xa({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:fi.Pop}},_):_}function sk(){let t=fk(),e=Qj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const ok=S.createElement(sk,null);class ak extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Ni.Provider,{value:this.props.routeContext},S.createElement(s1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lk(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(Up);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Ni.Provider,{value:e},r)}function ck(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,d=(s=n)==null?void 0:s.errors;if(d!=null){let m=c.findIndex(g=>g.route.id&&(d==null?void 0:d[g.route.id])!==void 0);m>=0||vt(!1),c=c.slice(0,Math.min(c.length,m+1))}let h=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<c.length;m++){let g=c[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:w,errors:C}=n,b=g.route.loader&&w[g.route.id]===void 0&&(!C||C[g.route.id]===void 0);if(g.route.lazy||b){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((m,g,w)=>{let C,b=!1,_=null,k=null;n&&(C=d&&g.route.id?d[g.route.id]:void 0,_=g.route.errorElement||ok,h&&(f<0&&w===0?(mk("route-fallback"),b=!0,k=null):f===w&&(b=!0,k=g.route.hydrateFallbackElement||null)));let y=e.concat(c.slice(0,w+1)),j=()=>{let x;return C?x=_:b?x=k:g.route.Component?x=S.createElement(g.route.Component,null):g.route.element?x=g.route.element:x=m,S.createElement(lk,{match:g,routeContext:{outlet:m,matches:y,isDataRoute:n!=null},children:x})};return n&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?S.createElement(ak,{location:n.location,revalidation:n.revalidation,component:_,error:C,children:j(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):j()},null)}var l1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(l1||{}),c1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(c1||{});function uk(t){let e=S.useContext(Up);return e||vt(!1),e}function dk(t){let e=S.useContext(ek);return e||vt(!1),e}function hk(t){let e=S.useContext(Ni);return e||vt(!1),e}function u1(t){let e=hk(),n=e.matches[e.matches.length-1];return n.route.id||vt(!1),n.route.id}function fk(){var t;let e=S.useContext(s1),n=dk(),r=u1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function pk(){let{router:t}=uk(l1.UseNavigateStable),e=u1(c1.UseNavigateStable),n=S.useRef(!1);return o1(()=>{n.current=!0}),S.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xa({fromRouteId:e},a)))},[t,e])}const pv={};function mk(t,e,n){pv[t]||(pv[t]=!0)}function gk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Zd(t){let{to:e,replace:n,state:r,relative:s}=t;Bo()||vt(!1);let{future:a,static:c}=S.useContext(Oi),{matches:d}=S.useContext(Ni),{pathname:h}=bs(),f=js(),m=Fp(e,$p(d,a.v7_relativeSplatPath),h,s==="path"),g=JSON.stringify(m);return S.useEffect(()=>f(JSON.parse(g),{replace:n,state:r,relative:s}),[f,g,s,n,r]),null}function Sr(t){vt(!1)}function vk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=fi.Pop,navigator:a,static:c=!1,future:d}=t;Bo()&&vt(!1);let h=e.replace(/^\/*/,"/"),f=S.useMemo(()=>({basename:h,navigator:a,static:c,future:Xa({v7_relativeSplatPath:!1},d)}),[h,d,a,c]);typeof r=="string"&&(r=zo(r));let{pathname:m="/",search:g="",hash:w="",state:C=null,key:b="default"}=r,_=S.useMemo(()=>{let k=Bp(m,h);return k==null?null:{location:{pathname:k,search:g,hash:w,state:C,key:b},navigationType:s}},[h,m,g,w,C,b,s]);return _==null?null:S.createElement(Oi.Provider,{value:f},S.createElement(Lu.Provider,{children:n,value:_}))}function yk(t){let{children:e,location:n}=t;return rk(af(e),n)}new Promise(()=>{});function af(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let a=[...e,s];if(r.type===S.Fragment){n.push.apply(n,af(r.props.children,a));return}r.type!==Sr&&vt(!1),!r.props.index||!r.props.children||vt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=af(r.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lf(){return lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lf.apply(this,arguments)}function _k(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function xk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wk(t,e){return t.button===0&&(!e||e==="_self")&&!xk(t)}const bk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jk="6";try{window.__reactRouterVersion=jk}catch{}const kk="startTransition",mv=v2[kk];function Sk(t){let{basename:e,children:n,future:r,window:s}=t,a=S.useRef();a.current==null&&(a.current=Ej({window:s,v5Compat:!0}));let c=a.current,[d,h]=S.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},m=S.useCallback(g=>{f&&mv?mv(()=>h(g)):h(g)},[h,f]);return S.useLayoutEffect(()=>c.listen(m),[c,m]),S.useEffect(()=>gk(r),[r]),S.createElement(vk,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:c,future:r})}const Ck=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Pk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,da=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:c,state:d,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,w=_k(e,bk),{basename:C}=S.useContext(Oi),b,_=!1;if(typeof f=="string"&&Pk.test(f)&&(b=f,Ck))try{let x=new URL(window.location.href),E=f.startsWith("//")?new URL(x.protocol+f):new URL(f),A=Bp(E.pathname,C);E.origin===x.origin&&A!=null?f=A+E.search+E.hash:_=!0}catch{}let k=tk(f,{relative:s}),y=Ek(f,{replace:c,state:d,target:h,preventScrollReset:m,relative:s,viewTransition:g});function j(x){r&&r(x),x.defaultPrevented||y(x)}return S.createElement("a",lf({},w,{href:b||k,onClick:_||a?r:j,ref:n,target:h}))});var gv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gv||(gv={}));var vv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vv||(vv={}));function Ek(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:c,viewTransition:d}=e===void 0?{}:e,h=js(),f=bs(),m=a1(t,{relative:c});return S.useCallback(g=>{if(wk(g,n)){g.preventDefault();let w=r!==void 0?r:su(f)===su(m);h(t,{replace:w,state:s,preventScrollReset:a,relative:c,viewTransition:d})}},[f,h,m,r,s,n,t,a,c,d])}const Hn={getItem:t=>window.localStorage.getItem(t),setItem:(t,e)=>window.localStorage.setItem(t,e),deleteItem:t=>window.localStorage.removeItem(t)},d1=S.createContext();function Tk({children:t,forceShowInit:e}){const[n,r]=S.useState(!1),[s,a]=S.useState(""),[c,d]=S.useState(""),[h,f]=S.useState("user"),[m,g]=S.useState(""),[w,C]=S.useState("#1769aa"),b=S.useCallback(()=>{const j=Hn.getItem("DRIVER_TURA"),x=Hn.getItem("DRIVER_NAME"),E=Hn.getItem("DRIVER_ROLE"),A=Hn.getItem("DEVICE_ID"),T=Hn.getItem("IS_ADMIN");a(j||""),d(x||""),f(E||"user"),g(A||""),r(T==="true"),T==="true"?C("#cc0000"):x&&j&&C("#1769aa")},[]);S.useEffect(()=>{b(),typeof window<"u"&&(window.__USER_CONTEXT__={refreshStatus:b})},[b]);const y={isAdmin:n,driverTura:s,driverName:c,driverRole:h,deviceId:m,userColor:w,refreshStatus:b,resetLoginData:()=>(Hn.deleteItem("DRIVER_TURA"),Hn.deleteItem("DRIVER_NAME"),Hn.deleteItem("DRIVER_ROLE"),Hn.deleteItem("DEVICE_ID"),Hn.deleteItem("IS_ADMIN"),Hn.deleteItem("APP_LANG"),b(),typeof e=="function"&&e(),!0),validateDriverAccess:()=>!(!s||!m)};return o.jsx(d1.Provider,{value:y,children:t})}function Lk(){const t=S.useContext(d1);if(!t)throw new Error("useUserContext mora biti koriten unutar <UserProvider>");return t}const Ok="modulepreload",Nk=function(t){return"/bde-evidencija/"+t},yv={},vl=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=Promise.allSettled(n.map(h=>{if(h=Nk(h),h in yv)return;yv[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Ok,f||(g.as="script"),g.crossOrigin="",g.href=h,d&&g.setAttribute("nonce",d),document.head.appendChild(g),f)return new Promise((w,C)=>{g.addEventListener("load",w),g.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},Rk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>vl(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Wp extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class _v extends Wp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xv extends Wp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wv extends Wp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var cf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(cf||(cf={}));var Ik=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?a(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};class Mk{constructor(e,{headers:n={},customFetch:r,region:s=cf.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Rk(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ik(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:a,method:c,body:d,signal:h}=r;let f={},{region:m}=r;m||(m=this.region);const g=new URL(`${this.url}/${n}`);m&&m!=="any"&&(f["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let w;d&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",w=d):typeof d=="string"?(f["Content-Type"]="text/plain",w=d):typeof FormData<"u"&&d instanceof FormData?w=d:(f["Content-Type"]="application/json",w=JSON.stringify(d)));const C=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:w,signal:h}).catch(y=>{throw y.name==="AbortError"?y:new _v(y)}),b=C.headers.get("x-relay-error");if(b&&b==="true")throw new xv(C);if(!C.ok)throw new wv(C);let _=((s=C.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),k;return _==="application/json"?k=yield C.json():_==="application/octet-stream"?k=yield C.blob():_==="text/event-stream"?k=C:_==="multipart/form-data"?k=yield C.formData():k=yield C.text(),{data:k,error:null,response:C}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new _v(a)}:{data:null,error:a,response:a instanceof wv||a instanceof xv?a.context:void 0}}})}}var dn={},Hp={},Ou={},yl={},Nu={},Ru={},Ak=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},No=Ak();const Dk=No.fetch,h1=No.fetch.bind(No),f1=No.Headers,zk=No.Request,Bk=No.Response,$o=Object.freeze(Object.defineProperty({__proto__:null,Headers:f1,Request:zk,Response:Bk,default:h1,fetch:Dk},Symbol.toStringTag,{value:"Module"})),$k=t2($o);var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});let Fk=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Iu.default=Fk;var p1=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ru,"__esModule",{value:!0});const Uk=p1($k),Wk=p1(Iu);let Hk=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Uk.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var c,d,h,f;let m=null,g=null,w=null,C=a.status,b=a.statusText;if(a.ok){if(this.method!=="HEAD"){const j=await a.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?g=j:g=JSON.parse(j))}const k=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),y=(h=a.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");k&&y&&y.length>1&&(w=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,w=null,C=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const k=await a.text();try{m=JSON.parse(k),Array.isArray(m)&&a.status===404&&(g=[],m=null,C=200,b="OK")}catch{a.status===404&&k===""?(C=204,b="No Content"):m={message:k}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,C=200,b="OK"),m&&this.shouldThrowOnError)throw new Wk.default(m)}return{error:m,data:g,count:w,status:C,statusText:b}});return this.shouldThrowOnError||(s=s.catch(a=>{var c,d,h;return{error:{message:`${(c=a==null?void 0:a.name)!==null&&c!==void 0?c:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(d=a==null?void 0:a.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=a==null?void 0:a.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Ru.default=Hk;var Vk=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nu,"__esModule",{value:!0});const qk=Vk(Ru);let Gk=class extends qk.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const c=a?`${a}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(c,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:c="text"}={}){var d;const h=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Nu.default=Gk;var Zk=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yl,"__esModule",{value:!0});const Kk=Zk(Nu);let Yk=class extends Kk.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${c}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};yl.default=Yk;var Jk=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ou,"__esModule",{value:!0});const ha=Jk(yl);let Qk=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,n){const{head:r=!1,count:s}=n??{},a=r?"HEAD":"GET";let c=!1;const d=(e??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",d),s&&this.headers.append("Prefer",`count=${s}`),new ha.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const a="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new ha.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new ha.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ha.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ha.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ou.default=Qk;var m1=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hp,"__esModule",{value:!0});const Xk=m1(Ou),eS=m1(yl);let tS=class g1{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Xk.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new g1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){var c;let d;const h=new URL(`${this.url}/rpc/${e}`);let f;r||s?(d=r?"HEAD":"GET",Object.entries(n).filter(([g,w])=>w!==void 0).map(([g,w])=>[g,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([g,w])=>{h.searchParams.append(g,w)})):(d="POST",f=n);const m=new Headers(this.headers);return a&&m.set("Prefer",`count=${a}`),new eS.default({method:d,url:h,headers:m,schema:this.schemaName,body:f,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};Hp.default=tS;var Fo=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dn,"__esModule",{value:!0});dn.PostgrestError=dn.PostgrestBuilder=dn.PostgrestTransformBuilder=dn.PostgrestFilterBuilder=dn.PostgrestQueryBuilder=dn.PostgrestClient=void 0;const v1=Fo(Hp);dn.PostgrestClient=v1.default;const y1=Fo(Ou);dn.PostgrestQueryBuilder=y1.default;const _1=Fo(yl);dn.PostgrestFilterBuilder=_1.default;const x1=Fo(Nu);dn.PostgrestTransformBuilder=x1.default;const w1=Fo(Ru);dn.PostgrestBuilder=w1.default;const b1=Fo(Iu);dn.PostgrestError=b1.default;var nS=dn.default={PostgrestClient:v1.default,PostgrestQueryBuilder:y1.default,PostgrestFilterBuilder:_1.default,PostgrestTransformBuilder:x1.default,PostgrestBuilder:w1.default,PostgrestError:b1.default};const{PostgrestClient:rS,PostgrestQueryBuilder:xI,PostgrestFilterBuilder:wI,PostgrestTransformBuilder:bI,PostgrestBuilder:jI,PostgrestError:kI}=nS;class iS{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const sS="2.74.0",oS=`realtime-js/${sS}`,aS="1.0.0",uf=1e4,lS=1e3,cS=100;var Na;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Na||(Na={}));var Ct;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ct||(Ct={}));var Jn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Jn||(Jn={}));var df;(function(t){t.websocket="websocket"})(df||(df={}));var Gi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Gi||(Gi={}));class uS{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2);let c=this.HEADER_LENGTH+2;const d=r.decode(e.slice(c,c+s));c=c+s;const h=r.decode(e.slice(c,c+a));c=c+a;const f=JSON.parse(r.decode(e.slice(c,e.byteLength)));return{ref:null,topic:d,event:h,payload:f}}}class j1{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Xe||(Xe={}));const bv=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,c)=>(a[c]=dS(c,t,e,s),a),{}):{}},dS=(t,e,n,r)=>{const s=e.find(d=>d.name===t),a=s==null?void 0:s.type,c=n[t];return a&&!r.includes(a)?k1(a,c):hf(c)},k1=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return mS(e,n)}switch(t){case Xe.bool:return hS(e);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return fS(e);case Xe.json:case Xe.jsonb:return pS(e);case Xe.timestamp:return gS(e);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return hf(e);default:return hf(e)}},hf=t=>t,hS=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fS=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},mS=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const c=t.slice(1,n);try{a=JSON.parse("["+c+"]")}catch{a=c?c.split(","):[]}return a.map(d=>k1(e,d))}return t},gS=t=>typeof t=="string"?t.replace(" ","T"):t,S1=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Kd{constructor(e,n,r={},s=uf){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var jv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(jv||(jv={}));class Ra{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ra.syncState(this.state,s,a,c),this.pendingDiffs.forEach(h=>{this.state=Ra.syncDiff(this.state,h,a,c)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ra.syncDiff(this.state,s,a,c),d())}),this.onJoin((s,a,c)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:c})}),this.onLeave((s,a,c)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),c=this.transformState(n),d={},h={};return this.map(a,(f,m)=>{c[f]||(h[f]=m)}),this.map(c,(f,m)=>{const g=a[f];if(g){const w=m.map(k=>k.presence_ref),C=g.map(k=>k.presence_ref),b=m.filter(k=>C.indexOf(k.presence_ref)<0),_=g.filter(k=>w.indexOf(k.presence_ref)<0);b.length>0&&(d[f]=b),_.length>0&&(h[f]=_)}else d[f]=m}),this.syncDiff(a,{joins:d,leaves:h},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(d,h)=>{var f;const m=(f=e[d])!==null&&f!==void 0?f:[];if(e[d]=this.cloneDeep(h),m.length>0){const g=e[d].map(C=>C.presence_ref),w=m.filter(C=>g.indexOf(C.presence_ref)<0);e[d].unshift(...w)}r(d,m,h)}),this.map(c,(d,h)=>{let f=e[d];if(!f)return;const m=h.map(g=>g.presence_ref);f=f.filter(g=>m.indexOf(g.presence_ref)<0),e[d]=f,s(d,f,h),f.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(kv||(kv={}));var Ia;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ia||(Ia={}));var Er;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Er||(Er={}));class Vp{constructor(e,n={config:{}},r){var s,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Kd(this,Jn.join,this.params,this.timeout),this.rejoinTimer=new j1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ct.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jn.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new Ra(this),this.broadcastEndpointURL=S1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ct.closed){const{config:{broadcast:c,presence:d,private:h}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(C=>C.filter))!==null&&s!==void 0?s:[],m=!!this.bindings[Ia.PRESENCE]&&this.bindings[Ia.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},w={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:m}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(C=>e==null?void 0:e(Er.CHANNEL_ERROR,C)),this._onClose(()=>e==null?void 0:e(Er.CLOSED)),this.updateJoinPayload(Object.assign({config:w},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:C})=>{var b;if(this.socket.setAuth(),C===void 0){e==null||e(Er.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,k=(b=_==null?void 0:_.length)!==null&&b!==void 0?b:0,y=[];for(let j=0;j<k;j++){const x=_[j],{filter:{event:E,schema:A,table:T,filter:B}}=x,O=C&&C[j];if(O&&O.event===E&&O.schema===A&&O.table===T&&O.filter===B)y.push(Object.assign(Object.assign({},x),{id:O.id}));else{this.unsubscribe(),this.state=Ct.errored,e==null||e(Er.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Er.SUBSCRIBED);return}}).receive("error",C=>{this.state=Ct.errored,e==null||e(Er.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Er.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ct.joined&&e===Ia.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:c}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:c,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var c,d,h;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ct.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Kd(this,Jn.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ct.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),c}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Kd(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>cS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const c=e.toLocaleLowerCase(),{close:d,error:h,leave:f,join:m}=Jn;if(r&&[d,h,f,m].indexOf(c)>=0&&r!==this._joinRef())return;let w=this._onMessage(c,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(C=>{var b,_,k;return((b=C.filter)===null||b===void 0?void 0:b.event)==="*"||((k=(_=C.filter)===null||_===void 0?void 0:_.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===c}).map(C=>C.callback(w,r)):(a=this.bindings[c])===null||a===void 0||a.filter(C=>{var b,_,k,y,j,x;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in C){const E=C.id,A=(b=C.filter)===null||b===void 0?void 0:b.event;return E&&((_=n.ids)===null||_===void 0?void 0:_.includes(E))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const E=(j=(y=C==null?void 0:C.filter)===null||y===void 0?void 0:y.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return E==="*"||E===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===c}).map(C=>{if(typeof w=="object"&&"ids"in w){const b=w.data,{schema:_,table:k,commit_timestamp:y,type:j,errors:x}=b;w=Object.assign(Object.assign({},{schema:_,table:k,commit_timestamp:y,eventType:j,new:{},old:{},errors:x}),this._getPayloadRecords(b))}C.callback(w,r)})}_isClosed(){return this.state===Ct.closed}_isJoined(){return this.state===Ct.joined}_isJoining(){return this.state===Ct.joining}_isLeaving(){return this.state===Ct.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Vp.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jn.close,{},e)}_onError(e){this._on(Jn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ct.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=bv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=bv(e.columns,e.old_record)),n}}const Yd=()=>{},dc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vS=[1e3,2e3,5e3,1e4],yS=1e4,_S=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xS{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=uf,this.transport=null,this.heartbeatIntervalMs=dc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yd,this.ref=0,this.reconnectTimer=null,this.logger=Yd,this.conn=null,this.sendBuffer=[],this.serializer=new uS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...c)=>vl(async()=>{const{default:d}=await Promise.resolve().then(()=>$o);return{default:d}},void 0).then(({default:d})=>d(...c)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...c)=>a(...c)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${df.websocket}`,this.httpEndpoint=S1(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iS.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:aS}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Na.connecting:return Gi.Connecting;case Na.open:return Gi.Open;case Na.closing:return Gi.Closing;default:return Gi.Closed}}isConnected(){return this.connectionState()===Gi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new Vp(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:s,ref:a}=e,c=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(lS,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},dc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:c}=n,d=c?`(${c})`:"",h=a.status||"";this.log("receive",`${h} ${r} ${s} ${d}`.trim(),a),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(s,a,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([_S],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:oS};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Jn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new j1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},dc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,a,c,d,h,f,m;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:uf,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:dc.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:Yd,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:g=>vS[g-1]||yS,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(g,w)=>w(JSON.stringify(g)),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class qp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function jt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class wS extends qp{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ff extends qp{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var bS=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?a(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};const C1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>vl(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},jS=()=>bS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield vl(()=>Promise.resolve().then(()=>$o),void 0)).Response:Response}),pf=t=>{if(Array.isArray(t))return t.map(n=>pf(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=pf(r)}),e},kS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var ks=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?a(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};const Jd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),SS=(t,e,n)=>ks(void 0,void 0,void 0,function*(){const r=yield jS();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const a=t.status||500,c=(s==null?void 0:s.statusCode)||a+"";e(new wS(Jd(s),a,c))}).catch(s=>{e(new ff(Jd(s),s))}):e(new ff(Jd(t),t))}),CS=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(kS(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function _l(t,e,n,r,s,a){return ks(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(n,CS(e,r,s,a)).then(h=>{if(!h.ok)throw h;return r!=null&&r.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>SS(h,d,r))})})}function ou(t,e,n,r){return ks(this,void 0,void 0,function*(){return _l(t,"GET",e,n,r)})}function fr(t,e,n,r,s){return ks(this,void 0,void 0,function*(){return _l(t,"POST",e,r,s,n)})}function mf(t,e,n,r,s){return ks(this,void 0,void 0,function*(){return _l(t,"PUT",e,r,s,n)})}function PS(t,e,n,r){return ks(this,void 0,void 0,function*(){return _l(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function P1(t,e,n,r,s){return ks(this,void 0,void 0,function*(){return _l(t,"DELETE",e,r,s,n)})}var ES=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?a(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};class TS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ES(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jt(e))return{data:null,error:e};throw e}})}}var LS=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?a(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};class OS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new TS(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return LS(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jt(e))return{data:null,error:e};throw e}})}}var an=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?a(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};const NS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class RS{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=C1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return an(this,void 0,void 0,function*(){try{let a;const c=Object.assign(Object.assign({},Sv),s);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",c.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),s!=null&&s.headers&&(d=Object.assign(Object.assign({},d),s.headers));const f=this._removeEmptyFolders(n),m=this._getFinalPath(f),g=yield(e=="PUT"?mf:fr)(this.fetch,`${this.url}/object/${m}`,a,Object.assign({headers:d},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(jt(a))return{data:null,error:a};throw a}})}upload(e,n,r){return an(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return an(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),c=this._getFinalPath(a),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",n);try{let h;const f=Object.assign({upsert:Sv.upsert},s),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",f.cacheControl)):(h=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const g=yield mf(this.fetch,d.toString(),h,{headers:m});return{data:{path:a,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(jt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return an(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield fr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),c=new URL(this.url+a.url),d=c.searchParams.get("token");if(!d)throw new qp("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}update(e,n,r){return an(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return an(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return an(this,void 0,void 0,function*(){try{return{data:{path:(yield fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return an(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield fr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${c}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return an(this,void 0,void 0,function*(){try{const s=yield fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),c=a?`?${a}`:"",d=this._getFinalPath(e),h=()=>ou(this.fetch,`${this.url}/${s}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new OS(h,this.shouldThrowOnError)}info(e){return an(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ou(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:pf(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}exists(e){return an(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield PS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r)&&r instanceof ff){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const d=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&s.push(h);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${f}`)}}}remove(e){return an(this,void 0,void 0,function*(){try{return{data:yield P1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}list(e,n,r){return an(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},NS),n),{prefix:e||""});return{data:yield fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}listV2(e,n){return an(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield fr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const IS="2.74.0",MS={"X-Client-Info":`storage-js/${IS}`};var Ds=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?a(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};class AS{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},MS),n),this.fetch=C1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ds(this,void 0,void 0,function*(){try{return{data:yield ou(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ds(this,void 0,void 0,function*(){try{return{data:yield ou(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}createBucket(e){return Ds(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield fr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return Ds(this,void 0,void 0,function*(){try{return{data:yield mf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ds(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ds(this,void 0,void 0,function*(){try{return{data:yield P1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}}class DS extends AS{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new RS(this.url,this.headers,e,this.fetch)}}const zS="2.74.0";let wa="";typeof Deno<"u"?wa="deno":typeof document<"u"?wa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wa="react-native":wa="node";const BS={"X-Client-Info":`supabase-js-${wa}/${zS}`},$S={headers:BS},FS={schema:"public"},US={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WS={};var HS=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?a(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};const VS=t=>{let e;return t?e=t:typeof fetch>"u"?e=h1:e=fetch,(...n)=>e(...n)},qS=()=>typeof Headers>"u"?f1:Headers,GS=(t,e,n)=>{const r=VS(n),s=qS();return(a,c)=>HS(void 0,void 0,void 0,function*(){var d;const h=(d=yield e())!==null&&d!==void 0?d:t;let f=new s(c==null?void 0:c.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),r(a,Object.assign(Object.assign({},c),{headers:f}))})};var ZS=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?a(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};function KS(t){return t.endsWith("/")?t:t+"/"}function YS(t,e){var n,r;const{db:s,auth:a,realtime:c,global:d}=t,{db:h,auth:f,realtime:m,global:g}=e,w={db:Object.assign(Object.assign({},h),s),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},m),c),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>ZS(this,void 0,void 0,function*(){return""})};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function JS(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(KS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const E1="2.74.0",Hs=30*1e3,gf=3,Qd=gf*Hs,QS="http://localhost:9999",XS="supabase.auth.token",eC={"X-Client-Info":`gotrue-js/${E1}`},vf="X-Supabase-Api-Version",T1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nC=10*60*1e3;class el extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function we(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class rC extends el{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function iC(t){return we(t)&&t.name==="AuthApiError"}class Zi extends el{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ri extends el{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Yr extends Ri{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sC(t){return we(t)&&t.name==="AuthSessionMissingError"}class zs extends Ri{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hc extends Ri{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fc extends Ri{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function oC(t){return we(t)&&t.name==="AuthImplicitGrantRedirectError"}class Cv extends Ri{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yf extends Ri{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Xd(t){return we(t)&&t.name==="AuthRetryableFetchError"}class Pv extends Ri{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class _f extends Ri{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ev=` 	
\r=`.split(""),aC=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ev.length;e+=1)t[Ev[e].charCodeAt(0)]=-2;for(let e=0;e<au.length;e+=1)t[au[e].charCodeAt(0)]=e;return t})();function Tv(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(au[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(au[r]),e.queuedBits-=6}}function L1(t,e,n){const r=aC[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Lv(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=c=>{uC(c,r,n)};for(let c=0;c<t.length;c+=1)L1(t.charCodeAt(c),s,a);return e.join("")}function lC(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function cC(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}lC(r,e)}}function uC(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function uo(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)L1(t.charCodeAt(s),n,r);return new Uint8Array(e)}function dC(t){const e=[];return cC(t,n=>e.push(n)),new Uint8Array(e)}function Qi(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Tv(s,n,r)),Tv(null,n,r),e.join("")}function hC(t){return Math.round(Date.now()/1e3)+t}function fC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const _n=()=>typeof window<"u"&&typeof document<"u",Fi={tested:!1,writable:!1},O1=()=>{if(!_n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fi.tested)return Fi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Fi.tested=!0,Fi.writable=!0}catch{Fi.tested=!0,Fi.writable=!1}return Fi.writable};function pC(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const N1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>vl(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},mC=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Vs=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ui=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Zr=async(t,e)=>{await t.removeItem(e)};class Mu{constructor(){this.promise=new Mu.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Mu.promiseConstructor=Promise;function eh(t){const e=t.split(".");if(e.length!==3)throw new _f("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!tC.test(e[r]))throw new _f("JWT not in base64url format");return{header:JSON.parse(Lv(e[0])),payload:JSON.parse(Lv(e[1])),signature:uo(e[2]),raw:{header:e[0],payload:e[1]}}}async function gC(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function vC(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const c=await t(a);if(!e(a,null,c)){r(c);return}}catch(c){if(!e(a,c)){s(c);return}}})()})}function yC(t){return("0"+t.toString(16)).substr(-2)}function _C(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,yC).join("")}async function xC(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function wC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await xC(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bs(t,e,n=!1){const r=_C();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Vs(t,`${e}-code-verifier`,s);const a=await wC(r);return[a,r===a?"plain":"s256"]}const bC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jC(t){const e=t.headers.get(vf);if(!e||!e.match(bC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kC(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function SC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const CC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $s(t){if(!CC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function th(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ov(t){return JSON.parse(JSON.stringify(t))}var PC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Vi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),EC=[502,503,504];async function Nv(t){var e;if(!mC(t))throw new yf(Vi(t),0);if(EC.includes(t.status))throw new yf(Vi(t),t.status);let n;try{n=await t.json()}catch(a){throw new Zi(Vi(a),a)}let r;const s=jC(t);if(s&&s.getTime()>=T1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Pv(Vi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Yr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0))throw new Pv(Vi(n),t.status,n.weak_password.reasons);throw new rC(Vi(n),t.status||500,r)}const TC=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Se(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[vf]||(a[vf]=T1["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const c=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await LC(t,e,n+d,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function LC(t,e,n,r,s,a){const c=TC(e,r,s,a);let d;try{d=await t(n,Object.assign({},c))}catch(h){throw console.error(h),new yf(Vi(h),0)}if(d.ok||await Nv(d),r!=null&&r.noResolveJson)return d;try{return await d.json()}catch(h){await Nv(h)}}function qn(t){var e;let n=null;RC(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=hC(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Rv(t){const e=qn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ni(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function OC(t){return{data:t,error:null}}function NC(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,c=PC(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},h=Object.assign({},c);return{data:{properties:d,user:h},error:null}}function Iv(t){return t}function RC(t){return t.access_token&&t.refresh_token&&t.expires_in}const nh=["global","local","others"];var IC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class MC{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=N1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=nh[0]){if(nh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nh.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ni})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=IC(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:NC,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(we(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ni})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,c,d,h;try{const f={nextPage:null,lastPage:0,total:0},m=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Iv});if(m.error)throw m.error;const g=await m.json(),w=(c=m.headers.get("x-total-count"))!==null&&c!==void 0?c:0,C=(h=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return C.length>0&&(C.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(b.split(";")[1].split("=")[1]);f[`${k}Page`]=_}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(we(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){$s(e);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ni})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){$s(e);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ni})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){$s(e);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ni})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){$s(e.userId);try{const{data:n,error:r}=await Se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(we(n))return{data:null,error:n};throw n}}async _deleteFactor(e){$s(e.userId),$s(e.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,a,c,d,h;try{const f={nextPage:null,lastPage:0,total:0},m=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Iv});if(m.error)throw m.error;const g=await m.json(),w=(c=m.headers.get("x-total-count"))!==null&&c!==void 0?c:0,C=(h=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return C.length>0&&(C.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(b.split(";")[1].split("=")[1]);f[`${k}Page`]=_}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(we(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}}function Mv(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Fs={debug:!!(globalThis&&O1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class R1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class AC extends R1{}async function DC(t,e,n){Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new AC(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fs.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function zC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function I1(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function BC(t){return parseInt(t,16)}function $C(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function FC(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:c,notBefore:d,requestId:h,resources:f,scheme:m,uri:g,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const C=I1(t.address),b=m?`${m}://${r}`:r,_=t.statement?`${t.statement}
`:"",k=`${b} wants you to sign in with your Ethereum account:
${C}

${_}`;let y=`URI: ${g}
Version: ${w}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${a.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),d&&(y+=`
Not Before: ${d.toISOString()}`),h&&(y+=`
Request ID: ${h}`),f){let j=`
Resources:`;for(const x of f){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);j+=`
- ${x}`}y+=j}return`${k}
${y}`}class bt extends Error{constructor({message:e,code:n,cause:r,name:s}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class lu extends bt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function UC({error:t,options:e}){var n,r,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new bt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(A1(c)){if(a.rp.id!==c)return new bt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function WC({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new bt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(A1(r)){if(n.rpId!==r)return new bt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var M1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class HC{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const VC=new HC;function qC(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=M1(t,["challenge","user","excludeCredentials"]),a=uo(e).buffer,c=Object.assign(Object.assign({},n),{id:uo(n.id).buffer}),d=Object.assign(Object.assign({},s),{challenge:a,user:c});if(r&&r.length>0){d.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const f=r[h];d.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:uo(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function GC(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=M1(t,["challenge","allowCredentials"]),s=uo(e).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];a.allowCredentials[c]=Object.assign(Object.assign({},d),{id:uo(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return a}function ZC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Qi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Qi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function KC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Qi(new Uint8Array(s.authenticatorData)),clientDataJSON:Qi(new Uint8Array(s.clientDataJSON)),signature:Qi(new Uint8Array(s.signature)),userHandle:s.userHandle?Qi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function A1(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Av(){var t,e;return!!(_n()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function YC(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lu("Browser returned unexpected credential type",e)}:{data:null,error:new lu("Empty credential response",e)}}catch(e){return{data:null,error:UC({error:e,options:t})}}}async function JC(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lu("Browser returned unexpected credential type",e)}:{data:null,error:new lu("Empty credential response",e)}}catch(e){return{data:null,error:WC({error:e,options:t})}}}const QC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},XC={userVerification:"preferred",hints:["security-key"]};function cu(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const a in s){const c=s[a];if(c!==void 0)if(Array.isArray(c))r[a]=c;else if(n(c))r[a]=c;else if(e(c)){const d=r[a];e(d)?r[a]=cu(d,c):r[a]=cu(c)}else r[a]=c}return r}function e5(t,e){return cu(QC,t,e||{})}function t5(t,e){return cu(XC,t,e||{})}class n5{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},a){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!c)return{data:null,error:d};const h=s??VC.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:f}=c.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(c.webauthn.type){case"create":{const f=e5(c.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:m,error:g}=await YC({publicKey:f,signal:h});return m?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const f=t5(c.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:m,error:g}=await JC(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:f,signal:h}));return m?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(c){return we(c)?{data:null,error:c}:{data:null,error:new Zi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!n)return{data:null,error:new el("rpId is required for WebAuthn authentication")};try{if(!Av())return{data:null,error:new Zi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!c)return{data:null,error:d};const{webauthn:h}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(c){return we(c)?{data:null,error:c}:{data:null,error:new Zi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!n)return{data:null,error:new el("rpId is required for WebAuthn registration")};try{if(!Av())return{data:null,error:new Zi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:d};const{data:h,error:f}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(c){return we(c)?{data:null,error:c}:{data:null,error:new Zi("Unexpected error in register",c)}}}}zC();const r5={url:QS,storageKey:XS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dv(t,e,n){return await n()}const Us={};class tl{get jwks(){var e,n;return(n=(e=Us[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Us[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tl.nextInstanceID,tl.nextInstanceID+=1,this.instanceID>0&&_n()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},r5),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new MC({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=N1(s.fetch),this.lock=s.lock||Dv,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:_n()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=DC:this.lock=Dv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new n5(this)},this.persistSession?(s.storage?this.storage=s.storage:O1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mv(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Mv(this.memoryStorage)),_n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${E1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=pC(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),_n()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),oC(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:c,redirectType:d}=s;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return we(n)?{error:n}:{error:new Zi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:qn}),{data:c,error:d}=a;if(d||!c)return{data:{user:null,session:null},error:d};const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(a){if(we(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:m,password:g,options:w}=e;let C=null,b=null;this.flowType==="pkce"&&([C,b]=await Bs(this.storage,this.storageKey)),a=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:m,password:g,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:C,code_challenge_method:b},xform:qn})}else if("phone"in e){const{phone:m,password:g,options:w}=e;a=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},channel:(s=w==null?void 0:w.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:qn})}else throw new hc("You must provide either an email or phone number and a password");const{data:c,error:d}=a;if(d||!c)return{data:{user:null,session:null},error:d};const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(a){if(we(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:c,options:d}=e;n=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Rv})}else if("phone"in e){const{phone:a,password:c,options:d}=e;n=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Rv})}else throw new hc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new zs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,a,c,d,h,f,m,g,w;let C,b;if("message"in e)C=e.message,b=e.signature;else{const{chain:_,wallet:k,statement:y,options:j}=e;let x;if(_n())if(typeof k=="object")x=k;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")x=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=k}const E=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href),A=await x.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=I1(A[0]);let B=(r=j==null?void 0:j.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!B){const R=await x.request({method:"eth_chainId"});B=BC(R)}const O={domain:E.host,address:T,statement:y,uri:E.href,version:"1",chainId:B,nonce:(s=j==null?void 0:j.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(c=(a=j==null?void 0:j.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=j==null?void 0:j.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=j==null?void 0:j.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=j==null?void 0:j.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(m=j==null?void 0:j.signInWithEthereum)===null||m===void 0?void 0:m.resources};C=FC(O),b=await x.request({method:"personal_sign",params:[$C(C),T]})}try{const{data:_,error:k}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:b},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:qn});if(k)throw k;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new zs}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:k})}catch(_){if(we(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var n,r,s,a,c,d,h,f,m,g,w,C;let b,_;if("message"in e)b=e.message,_=e.signature;else{const{chain:k,wallet:y,statement:j,options:x}=e;let E;if(_n())if(typeof y=="object")E=y;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))E=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=y}const A=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const T=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),j?{statement:j}:null));let B;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")B=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)B=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)b=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),_=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${A.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((h=x==null?void 0:x.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((f=x==null?void 0:x.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((g=(m=x==null?void 0:x.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...x.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const T=await E.signMessage(new TextEncoder().encode(b),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=T}}try{const{data:k,error:y}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Qi(_)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:qn});if(y)throw y;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new zs}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:y})}catch(k){if(we(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const n=await Ui(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:c}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:qn});if(await Zr(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new zs}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:c})}catch(a){if(we(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:c}=e,d=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:c,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:qn}),{data:h,error:f}=d;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new zs}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:f})}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,a,c;try{if("email"in e){const{email:d,options:h}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Bs(this.storage,this.storageKey));const{error:g}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:d,options:h}=e,{data:f,error:m}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new hc("You must provide either an email or phone number.")}catch(d){if(we(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:d}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:qn});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,f=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let a=null,c=null;return this.flowType==="pkce"&&([a,c]=await Bs(this.storage,this.storageKey)),await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:OC})}catch(a){if(we(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Yr;const{error:s}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(we(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:c}=await Se(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:c,error:d}=await Se(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new hc("You must provide either an email or phone number and a type")}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ui(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Qd:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await Ui(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=th()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,f,m)=>(!c&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,f,m))})}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ni}):await this._useSession(async n=>{var r,s,a;const{data:c,error:d}=n;if(d)throw d;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yr}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:ni})})}catch(n){if(we(n))return sC(n)&&(await this._removeSession(),await Zr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new Yr;const c=s.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await Bs(this.storage,this.storageKey));const{data:f,error:m}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:c.access_token,xform:ni});if(m)throw m;return c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yr;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:c}=eh(e.access_token);if(c.exp&&(r=c.exp,s=r<=n),s){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};a=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(we(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:c,error:d}=n;if(d)throw d;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Yr;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!_n())throw new fc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Cv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Cv("No code detected.");const{data:j,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:c,expires_in:d,expires_at:h,token_type:f}=e;if(!a||!d||!c||!f)throw new fc("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(d);let w=m+g;h&&(w=parseInt(h));const C=w-m;C*1e3<=Hs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${g}s`);const b=w-g;m-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,w,m):m-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,w,m);const{data:_,error:k}=await this._getUser(a);if(k)throw k;const y={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:g,expires_at:w,refresh_token:c,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(we(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ui(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const c=(r=s.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(iC(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Zr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=fC(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:c}=n;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Bs(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(we(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var c,d,h,f,m;const{data:g,error:w}=a;if(w)throw w;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",C,{headers:this.headers,jwt:(m=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return _n()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(we(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:c,provider:d,token:h,access_token:f,nonce:m}=e,g=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:d,id_token:h,access_token:f,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:qn}),{data:w,error:C}=g;return C?{data:{user:null,session:null},error:C}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new zs}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),{data:w,error:C})}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:c}=n;if(c)throw c;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await vC(async s=>(s>0&&await gC(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qn})),(s,a)=>{const c=200*Math.pow(2,s);return a&&Xd(a)&&Date.now()+c-r<Hs})}catch(r){if(this._debug(n,"error",r),we(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),_n()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Ui(this.storage,this.storageKey);if(s&&this.userStorage){let c=await Ui(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:s.user},await Vs(this.userStorage,this.storageKey+"-user",c)),s.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:th()}else if(s&&!s.user&&!s.user){const c=await Ui(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(s.user=c.user,await Zr(this.storage,this.storageKey+"-user"),await Vs(this.storage,this.storageKey,s)):s.user=th()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Qd;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Qd}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:c}=await this._callRefreshToken(s.refresh_token);c&&(console.error(c),Xd(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(s.access_token);!d&&(c!=null&&c.user)?(s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Yr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Mu;const{data:a,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!a.session)throw new Yr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const d={data:a.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(s,"error",a),we(a)){const c={data:null,error:a};return Xd(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(h){a.push(h)}});if(await Promise.all(c),a.length>0){for(let d=0;d<a.length;d+=1)console.error(a[d]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Vs(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Ov(s);await Vs(this.storage,this.storageKey,a)}else{const s=Ov(n);await Vs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Zr(this.storage,this.storageKey),await Zr(this.storage,this.storageKey+"-code-verifier"),await Zr(this.storage,this.storageKey+"-user"),this.userStorage&&await Zr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_n()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Hs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Hs}ms, refresh threshold is ${gf} ticks`),s<=gf&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof R1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_n()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,c]=await Bs(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});s.push(d.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:c}=n;if(c)return{data:null,error:c};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:f}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&h.type==="totp"&&(!((s=h==null?void 0:h.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?ZC(e.webauthn.credential_response):KC(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(n){if(we(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const c=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:qC(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:GC(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(we(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=eh(s.access_token);let d=null;c.aal&&(d=c.aal);let h=d;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(h="aal2");const m=c.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(d=>d.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(d=>d.kid===e),r&&this.jwks_cached_at+nC>s)return r;const{data:a,error:c}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(d=>d.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:C,error:b}=await this.getSession();if(b||!C.session)return{data:null,error:b};r=C.session.access_token}const{header:s,payload:a,signature:c,raw:{header:d,payload:h}}=eh(r);n!=null&&n.allowExpired||kC(a.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:C}=await this.getUser(r);if(C)throw C;return{data:{claims:a,header:s,signature:c},error:null}}const m=SC(s.alg),g=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,c,dC(`${d}.${h}`)))throw new _f("Invalid JWT signature");return{data:{claims:a,header:s,signature:c},error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}}tl.nextInstanceID=0;const i5=tl;class s5 extends i5{constructor(e){super(e)}}var o5=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?a(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};class a5{constructor(e,n,r){var s,a,c;this.supabaseUrl=e,this.supabaseKey=n;const d=JS(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:FS,realtime:WS,auth:Object.assign(Object.assign({},US),{storageKey:h}),global:$S},m=YS(r??{},f);this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=m.global.headers)!==null&&a!==void 0?a:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=m.auth)!==null&&c!==void 0?c:{},this.headers,m.global.fetch),this.fetch=GS(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new rS(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new DS(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Mk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return o5(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:c,flowType:d,lock:h,debug:f},m,g){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new s5({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),m),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,flowType:d,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new xS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const l5=(t,e,n)=>new a5(t,e,n);function c5(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}c5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");async function u5(t){const{data:e,error:n}=await ye.from("holidays").select("*").eq("deleted",0).gte("date",`${t}-01-01`).lte("date",`${t}-12-31`);if(n)throw n;return e||[]}const d5="https://dsltpiupbfopyvuiqffg.supabase.co",h5="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzbHRwaXVwYmZvcHl2dWlxZmZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5Mjc3MzcsImV4cCI6MjA2NTUwMzczN30.suu_OSbTBSEkM3YMiPDFIAgDnX3bDavcD8BX4ZfYZxw",ye=l5(d5,h5);async function f5(t,e){let n=ye.from("deliveries").select("*").eq("deleted",0);t&&e!==void 0&&(n=n.gte("date",`${t}-${String(e+1).padStart(2,"0")}-01`).lt("date",`${t}-${String(e+2).padStart(2,"0")}-01`));const{data:r,error:s}=await n;if(s)throw s;return r||[]}async function p5(){try{const{data:t,error:e}=await ye.from("deliveries").select("zustellung_paketi").eq("deleted",0);if(e)throw e;return(t||[]).reduce((r,s)=>r+(parseInt(s.zustellung_paketi)||0),0)}catch(t){return console.error("Greka pri dohvatanju ukupnog broja dostava:",t),0}}async function m5(){const{data:t,error:e}=await ye.from("drivers").select("*").eq("deleted",0).eq("aktivan",!0).order("tura");if(e)throw e;return t||[]}class g5{constructor(){this.syncInProgress=new Set}async syncUserToDriver(e){if(this.syncInProgress.has(e))return console.log(`Skipping sync for ${e} - already in progress`),!1;this.syncInProgress.add(e);try{const{data:n,error:r}=await ye.from("app_users").select("tura, ime, role, active, last_login").eq("tura",e).single();if(r)return console.error("Error fetching user:",r),!1;if(!n)return console.warn(`User ${e} not found in app_users`),!1;const{data:s,error:a}=await ye.from("drivers").select("id, tura, ime, aktivan, target_per_day").eq("tura",e).eq("deleted",0).maybeSingle();if(a)return console.error("Error checking driver:",a),!1;const c={tura:n.tura,ime:n.ime,aktivan:n.active,role:n.role,last_login:n.last_login,last_updated:new Date};if(n&&n.device_id!==void 0&&(c.device_id=n.device_id),s){const{error:d}=await ye.from("drivers").update(c).eq("id",s.id);if(d)return console.error("Error updating driver:",d),!1;console.log(`Synced user ${e} to existing driver record`)}else{const d={...c,target_per_day:0,deleted:0},{error:h}=await ye.from("drivers").insert([d]);if(h)return console.error("Error creating driver:",h),!1;console.log(`Created new driver record for user ${e}`)}return!0}catch(n){return console.error("Sync error:",n),!1}finally{this.syncInProgress.delete(e)}}async syncDriverToUser(e,n){try{const r={};if(n.ime&&(r.ime=n.ime),n.role&&(r.role=n.role),n.aktivan!==void 0&&(r.active=n.aktivan),n.device_id!==void 0&&(r.device_id=n.device_id),Object.keys(r).length===0)return!0;r.updated_at=new Date;const{error:s}=await ye.from("app_users").update(r).eq("tura",e);return s?(console.error("Error syncing driver to user:",s),!1):(console.log(`Synced driver ${e} changes back to app_users`),!0)}catch(r){return console.error("Sync driver to user error:",r),!1}}async syncAllUsers(){try{const{data:e,error:n}=await ye.from("app_users").select("tura").eq("active",!0);if(n)return console.error("Error fetching all users:",n),!1;const r=e.map(h=>this.syncUserToDriver(h.tura)),a=(await Promise.allSettled(r)).map((h,f)=>{var m;return{tura:(m=e[f])==null?void 0:m.tura,status:h.status,value:h.status==="fulfilled"?h.value:void 0,reason:h.status==="rejected"?h.reason&&h.reason.message||h.reason:void 0}}),c=a.filter(h=>h.status==="fulfilled"&&h.value).length,d=a.length;return console.log("Bulk sync detailed results:",a),console.log(`Bulk sync completed: ${c}/${d} users synced`),{successful:c,total:d,success:c===d,details:a}}catch(e){return console.error("Bulk sync error:",e),!1}}async getCombinedUserData(e){try{const[n,r]=await Promise.all([ye.from("app_users").select("*").eq("tura",e).single(),ye.from("drivers").select("*").eq("tura",e).eq("deleted",0).single()]),s=n.data,a=r.data;return s?{id:s.id,tura:s.tura,ime:s.ime,role:s.role,active:s.active,password_hash:s.password_hash,device_id:s.device_id,last_login:s.last_login,businessId:a==null?void 0:a.id,aktivan:(a==null?void 0:a.aktivan)??s.active,target_per_day:(a==null?void 0:a.target_per_day)??0,last_updated:a==null?void 0:a.last_updated,hasBusiness:!!a,syncNeeded:s.active!==(a==null?void 0:a.aktivan)}:(console.warn(`No auth data found for ${e}`),null)}catch(n){return console.error("Error getting combined data:",n),null}}}const ho=new g5;function xl(){const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,a]=S.useState(null),c=S.useCallback(async()=>{r(!0),a(null);try{const{data:_,error:k}=await ye.from("drivers").select("*").eq("deleted",0).order("target_per_day",{ascending:!1}).order("tura");if(k)throw k;const y=(_==null?void 0:_.map(x=>({id:x.id,tura:x.tura,ime:x.ime,target_per_day:x.target_per_day||0,aktivan:x.aktivan,role:x.role||"driver",password_hash:x.password_hash||"",last_login:x.last_login,last_updated:x.last_updated,deleted:x.deleted||0,name:x.ime,tour:x.tura,active:x.aktivan})))||[],j=["8610","8620","8630","8640"];y.sort((x,E)=>{const A=j.indexOf(String(x.tura)),T=j.indexOf(String(E.tura));if(A!==-1||T!==-1)return A===-1?1:T===-1?-1:A-T;const B=String(x.tura||""),O=String(E.tura||"");return B.localeCompare(O,void 0,{numeric:!0})}),e(y),console.log("useDrivers: drivers loaded",{count:y.length})}catch(_){a(_),e([])}finally{r(!1)}},[]),d=S.useCallback(async _=>{try{const k={ime:_.ime,tura:_.tura,aktivan:_.aktivan??!0,target_per_day:_.target_per_day||0,password_hash:_.password_hash||null,role:_.role||"driver",last_updated:new Date,deleted:0},{data:y,error:j}=await ye.from("drivers").insert([k]).select();if(j)throw j;return await ho.syncDriverToUser(_.tura,{ime:_.ime,role:_.role,aktivan:_.aktivan}),await c(),y[0]}catch(k){throw a(k),k}},[c]),h=S.useCallback(async(_,k)=>{try{const y={ime:k.ime,tura:k.tura,aktivan:k.aktivan,target_per_day:k.target_per_day||0,password_hash:k.password_hash,role:k.role||"driver",last_updated:new Date},{data:j,error:x}=await ye.from("drivers").update(y).eq("id",_).select();if(x)throw x;return j&&j.length>0&&await ho.syncDriverToUser(j[0].tura,{ime:k.ime,role:k.role,aktivan:k.aktivan}),await c(),j[0]}catch(y){throw a(y),y}},[c]),f=S.useCallback(async _=>{try{const{error:k}=await ye.from("drivers").update({deleted:1,last_updated:new Date}).eq("id",_);if(k)throw k;await c()}catch(k){throw a(k),k}},[c]),m=S.useCallback(async(_,k)=>{try{const{data:y,error:j}=await ye.from("drivers").update({aktivan:!k,last_updated:new Date}).eq("id",_).select();if(j)throw j;y&&y.length>0&&await ho.syncDriverToUser(y[0].tura,{aktivan:!k}),await c()}catch(y){throw a(y),y}},[c]),g=S.useCallback(async(_,k)=>{try{const{error:y}=await ye.from("drivers").update({target_per_day:k,last_updated:new Date}).eq("tura",_).eq("deleted",0);if(y)throw y;return await c(),!0}catch(y){throw a(y),y}},[c]),w=S.useCallback(_=>t.find(k=>k.tura===_&&!k.deleted),[t]),C=S.useCallback(()=>t.filter(_=>_.aktivan&&!_.deleted),[t]),b=S.useCallback(()=>t.filter(_=>_.aktivan&&!_.deleted&&_.target_per_day>0),[t]);return S.useEffect(()=>{c()},[c]),{drivers:t,loading:n,error:s,addDriver:d,updateDriver:h,deleteDriver:f,toggleDriverStatus:m,updateDriverTarget:g,getDriverByTura:w,getActiveDrivers:C,getDriversWithTargets:b,refresh:c}}const v5=S.createContext();function y5({children:t}){const e=xl();return o.jsx(v5.Provider,{value:e,children:t})}async function _5(){const{data:t,error:e}=await ye.from("deliveries").select("*");if(e)throw e;return t}async function x5(){const{data:t,error:e}=await ye.from("drivers").select("*");if(e)throw e;return t}class w5{constructor(){this.syncInterval=null,this.isRunning=!1,this.lastSyncTime=null,this.syncInProgress=!1,this.listeners=new Set,this.SYNC_INTERVAL=5*60*1e3,this.MIN_SYNC_DELAY=30*1e3,this.retryDelay=5e3,this.errorCount=0,this.maxErrors=10,this.isOnline=navigator.onLine,window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),this.loadPersistedState()}handleOnline(){console.log(" Network connection restored"),this.isOnline=!0,this.errorCount=0,this.notifyListeners({type:"network",status:"online"}),this.isRunning&&setTimeout(()=>this.syncNow(),1e3)}handleOffline(){console.log(" Network connection lost"),this.isOnline=!1,this.notifyListeners({type:"network",status:"offline"})}isNetworkAvailable(){return this.isOnline&&navigator.onLine}loadPersistedState(){try{const e=localStorage.getItem("autoSyncState");if(e){const n=JSON.parse(e);this.lastSyncTime=n.lastSyncTime,this.errorCount=n.errorCount||0}}catch(e){console.warn("Failed to load persisted sync state:",e)}}saveState(){try{const e={lastSyncTime:this.lastSyncTime,errorCount:this.errorCount,isRunning:this.isRunning};localStorage.setItem("autoSyncState",JSON.stringify(e))}catch(e){console.warn("Failed to save sync state:",e)}}start(e=5){this.isRunning||(this.SYNC_INTERVAL=e*60*1e3,this.isRunning=!0,this.syncNow(),this.syncInterval=setInterval(()=>{this.syncNow()},this.SYNC_INTERVAL),this.notifyListeners({type:"started"}))}stop(){this.isRunning&&(this.isRunning=!1,this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null),this.notifyListeners({type:"stopped"}))}async syncNow(e=!1){if(this.syncInProgress&&!e)return{success:!1,reason:"already_in_progress"};if(!e&&this.lastSyncTime&&Date.now()-this.lastSyncTime<this.MIN_SYNC_DELAY)return{success:!1,reason:"min_delay"};if(!this.isNetworkAvailable())return this.notifyListeners({type:"error",error:"No network connection",code:"NETWORK_ERROR"}),{success:!1,reason:"no_network"};if(this.errorCount>=this.maxErrors)return this.notifyListeners({type:"error",error:`Too many sync errors (${this.errorCount}). Auto-sync paused.`,code:"MAX_ERRORS_REACHED"}),this.stop(),{success:!1,reason:"max_errors_reached"};this.syncInProgress=!0,this.notifyListeners({type:"sync_started"});try{let n=0;const r=3;for(;n<r;)try{return console.log(` Starting sync attempt ${n+1}/${r}`),await _5(),await x5(),this.lastSyncTime=Date.now(),this.errorCount=0,this.saveState(),this.notifyListeners({type:"sync_success",timestamp:this.lastSyncTime,attempt:n+1}),console.log(" Sync completed successfully"),{success:!0,timestamp:this.lastSyncTime}}catch(s){if(n++,this.errorCount++,console.error(` Sync attempt ${n} failed:`,s),n<r){const a=this.retryDelay*n;console.log(` Retrying in ${a/1e3} seconds...`),this.notifyListeners({type:"sync_retry",attempt:n,maxRetries:r,delay:a,error:s.message}),await new Promise(c=>setTimeout(c,a))}else return this.notifyListeners({type:"sync_failed",error:s.message,errorCount:this.errorCount,maxRetries:r}),this.saveState(),{success:!1,error:s,attempts:n}}}finally{this.syncInProgress=!1}}notifyListeners(e){this.listeners.forEach(n=>n(e))}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}}const ur=new w5;function b5(){const[t,e]=S.useState(ur.isRunning),[n,r]=S.useState(ur.syncInProgress),[s,a]=S.useState(ur.lastSyncTime);return S.useEffect(()=>{const c=d=>{d.type==="started"&&e(!0),d.type==="stopped"&&e(!1),d.type==="synced"&&a(ur.lastSyncTime),r(ur.syncInProgress)};return ur.addListener(c),()=>ur.removeListener(c)},[]),{isRunning:t,syncInProgress:n,lastSyncTime:s,start:c=>ur.start(c),stop:()=>ur.stop(),syncNow:c=>ur.syncNow(c)}}const j5=S.createContext(),k5=({children:t})=>{const e=b5(),[n,r]=S.useState(!0),[s,a]=S.useState(15);S.useEffect(()=>(n?e.start(s):e.stop(),()=>{e.stop()}),[n,s]);const c={autoSync:e,globalSyncEnabled:n,setGlobalSyncEnabled:r,syncInterval:s,setSyncInterval:a,isAutoSyncRunning:e.isRunning,isSyncInProgress:e.syncInProgress,lastSyncTime:e.lastSyncTime,nextSyncTime:e.nextSyncTime,startAutoSync:e.start,stopAutoSync:e.stop,syncNow:e.syncNow,getLastSyncText:()=>{if(!e.lastSyncTime)return"Nikad";const h=Date.now()-e.lastSyncTime,f=Math.floor(h/(1e3*60)),m=Math.floor(h%(1e3*60)/1e3);return f>0?`prije ${f}min ${m}s`:`prije ${m}s`},getNextSyncText:()=>{if(!e.nextSyncTime||!e.isRunning)return"Iskljuen";const d=Date.now(),h=e.nextSyncTime-d;if(h<=0)return"Uskoro";const f=Math.floor(h/(1e3*60)),m=Math.floor(h%(1e3*60)/1e3);return f>0?`za ${f}min ${m}s`:`za ${m}s`}};return o.jsx(j5.Provider,{value:c,children:t})},S5={confirm:"Potvrdi",enterTuraOrPin:"Unesi turu ili PIN",selectLanguage:"Odaberi jezik",enterTuraAndSelectLanguage:"Unesi turu i odaberi jezik",welcome:"Dobrodoli!",setupMessage:"Molimo podes aplikaciju prije korienja.",tourNumber:"Broj ture",tourPlaceholder:"Unesite va broj ture (npr. 8610)",appLanguage:"Jezik aplikacije",finishSetup:"Zavri podeavanje",setupInfoMessage:"Ove podatke moete promijeniti kasnije u podeavanjima aplikacije.",unknownTour:"Nepoznat broj ture. Molimo kontaktirajte administratora."},C5={confirm:"Confirm",enterTuraOrPin:"Enter route or PIN",selectLanguage:"Select language",enterTuraAndSelectLanguage:"Enter route and select language",welcome:"Welcome!",setupMessage:"Please configure the application before use.",tourNumber:"Route number",tourPlaceholder:"Enter your route number (e.g. 8610)",appLanguage:"Application language",finishSetup:"Finish setup",setupInfoMessage:"You can change these settings later in application settings.",unknownTour:"Unknown route number. Please contact administrator."},P5={confirm:"Besttigen",enterTuraOrPin:"Route oder PIN eingeben",selectLanguage:"Sprache whlen",enterTuraAndSelectLanguage:"Route eingeben und Sprache whlen",welcome:"Willkommen!",setupMessage:"Bitte konfigurieren Sie die Anwendung vor der Nutzung.",tourNumber:"Routennummer",tourPlaceholder:"Geben Sie Ihre Routennummer ein (z.B. 8610)",appLanguage:"Anwendungssprache",finishSetup:"Setup abschlieen",setupInfoMessage:"Sie knnen diese Einstellungen spter in den Anwendungseinstellungen ndern.",unknownTour:"Unbekannte Routennummer. Bitte kontaktieren Sie den Administrator."},E5={confirm:"Potrdi",enterTuraOrPin:"Vnesi turo ali PIN",selectLanguage:"Izberi jezik",enterTuraAndSelectLanguage:"Vnesi turo in izberi jezik",welcome:"Dobrodoli!",setupMessage:"Prosimo, konfigurirajte aplikacijo pred uporabo.",tourNumber:"tevilka ture",tourPlaceholder:"Vnesite svojo tevilko ture (npr. 8610)",appLanguage:"Jezik aplikacije",finishSetup:"Zakljui nastavitev",setupInfoMessage:"Te nastavitve lahko pozneje spremenite v nastavitvah aplikacije.",unknownTour:"Neznana tevilka ture. Prosimo, kontaktirajte administratorja."},fa={ba:S5,en:C5,de:P5,si:E5},T5=S.createContext(),L5="ba",rh={getItem:t=>window.localStorage.getItem(t),setItem:(t,e)=>window.localStorage.setItem(t,e)},O5=({children:t})=>{const e=rh.getItem("APP_LANG")||L5,[n,r]=S.useState(e),[s,a]=S.useState(fa[e]),[c,d]=S.useState(!1);S.useEffect(()=>{(()=>{const w=rh.getItem("APP_LANG");w&&fa[w]&&w!==n&&(r(w),a(fa[w]))})()},[n]);const m={language:n,translations:s,isLoading:c,changeLanguage:g=>{fa[g]&&(r(g),a(fa[g]),rh.setItem("APP_LANG",g))},t:(g,w)=>{const C=g.split(".");let b=s;for(const _ of C)if(b&&b[_]!==void 0)b=b[_];else return w||g;return b}};return o.jsx(T5.Provider,{value:m,children:t})};function Gp(){const[t,e]=S.useState(null),[n,r]=S.useState(!0),[s,a]=S.useState(null),c=S.useCallback(()=>{try{const C=localStorage.getItem("bde_current_user"),b=localStorage.getItem("bde_login_time");if(C&&b){const _=JSON.parse(C);if(Date.now()-parseInt(b)<24*60*60*1e3)return _;localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}}catch(C){console.error("Error loading user from storage:",C),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}return null},[]),d=S.useCallback(C=>{try{localStorage.setItem("bde_current_user",JSON.stringify(C)),localStorage.setItem("bde_login_time",Date.now().toString())}catch(b){console.error("Error saving user to storage:",b)}},[]),h=S.useCallback(async C=>{console.log(" checkDriverExists called with tura:",C),r(!0),a(null);try{const{data:b,error:_}=await ye.from("drivers").select("id, ime, tura, aktivan, role, password_hash").eq("tura",C.toUpperCase()).eq("aktivan",!0).single();if(_)throw console.error("Database error checking driver:",_),new Error(`Voza sa turom ${C} nije pronaen ili nije aktivan`);console.log(" Driver check result:",{id:b.id,ime:b.ime,tura:b.tura,hasPassword:!!b.password_hash,role:b.role});const k={id:b.id,ime:b.ime,tura:b.tura,role:b.role||"driver",hasPassword:!!b.password_hash};return console.log(" Returning from checkDriverExists:",k),k}catch(b){throw a(b.message),b}finally{r(!1)}},[]),f=S.useCallback(async(C,b)=>{r(!0),a(null);try{const _=btoa(b),{error:k}=await ye.from("drivers").update({password_hash:_,last_login:new Date}).eq("id",C);if(k)throw new Error("Greka pri postavljanju lozinke");return!0}catch(_){throw a(_.message),_}finally{r(!1)}},[]),m=S.useCallback(async(C,b)=>{r(!0),a(null);try{const{data:_,error:k}=await ye.from("drivers").select("*").eq("tura",C.toUpperCase()).eq("aktivan",!0).single();if(k)throw console.error("Database error during login:",k),new Error(`Voza sa turom ${C} nije pronaen ili nije aktivan`);if(console.log(" Driver found for login:",{tura:_.tura,ime:_.ime,hasPassword:!!_.password_hash,role:_.role}),!_.password_hash)throw new Error("Voza nema postavljenu lozinku. Kontaktirajte administratora.");if(!(_.password_hash===b||_.password_hash===btoa(b)))throw new Error("Neispravna lozinka");await ye.from("drivers").update({last_login:new Date}).eq("id",_.id);const j={id:_.id,username:_.tura,name:_.ime,role:_.role||"driver",loginTime:Date.now()};return e(j),d(j),j}catch(_){throw a(_.message),_}finally{r(!1)}},[d]),g=S.useCallback(async(C,b)=>{if(!t)throw new Error("Morate biti ulogovani");r(!0),a(null);try{const{data:_,error:k}=await ye.from("drivers").select("password_hash").eq("id",t.id).single();if(k)throw new Error("Greka pri provjeri korisnika");if(!(_.password_hash===C||_.password_hash===btoa(C)))throw new Error("Stara lozinka nije ispravna");const j=btoa(b),{error:x}=await ye.from("drivers").update({password_hash:j}).eq("id",t.id);if(x)throw new Error("Greka pri auriranju lozinke");return!0}catch(_){throw a(_.message),_}finally{r(!1)}},[t]),w=S.useCallback(()=>{e(null),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time"),a(null),console.log(" User logged out")},[]);return S.useEffect(()=>{const C=c();C&&e(C),r(!1)},[c]),{currentUser:t,loading:n,error:s,checkDriverExists:h,setInitialPassword:f,login:m,changePassword:g,logout:w,isAuthenticated:!!t}}function N5({onDriverSelected:t,loading:e}){const[n,r]=S.useState(""),[s,a]=S.useState(null),c=d=>{if(d.preventDefault(),!n.trim()){a("Molimo unesite vau turu");return}if(n.trim().length<3){a("Tura mora imati najmanje 3 karaktera");return}a(null),t(n.trim().toUpperCase())};return o.jsx("div",{className:"driver-init-screen",children:o.jsxs("div",{className:"init-container",children:[o.jsxs("div",{className:"init-header",children:[o.jsx("div",{className:"header-icon",children:o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),o.jsx("h1",{children:"Dobrodoli!"}),o.jsx("p",{children:"Molimo unesite vau turu za pristup aplikaciji"})]}),o.jsxs("form",{onSubmit:c,className:"init-form",children:[o.jsxs("div",{className:"input-group",children:[o.jsx("label",{htmlFor:"tura",children:"Vaa tura"}),o.jsxs("div",{className:"input-wrapper",children:[o.jsx("input",{type:"text",id:"tura",value:n,onChange:d=>r(d.target.value),placeholder:"npr. 8610",maxLength:"10",disabled:e,autoFocus:!0}),o.jsx("div",{className:"input-icon",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),o.jsx("path",{d:"m20 8 2 2-2 2"}),o.jsx("path",{d:"m16 12-2-2 2-2"})]})})]})]}),s&&o.jsxs("div",{className:"error-message",children:[o.jsx("div",{className:"error-icon",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),o.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),o.jsx("span",{children:s})]}),o.jsx("button",{type:"submit",className:"submit-btn",disabled:e||!n.trim(),children:o.jsx("span",{className:"btn-content",children:e?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"btn-spinner"}),"Provjeram..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"m9 18 6-6-6-6"})}),"Nastavi"]})})})]}),o.jsxs("div",{className:"init-footer",children:[o.jsx("div",{className:"footer-icon",children:o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M18 20V10"}),o.jsx("path",{d:"M12 20V4"}),o.jsx("path",{d:"M6 20v-6"})]})}),o.jsx("p",{children:"B&D Evidencija  Aplikacija za evidenciju vonji"}),o.jsx("div",{className:"version-badge",children:"v4.0.0"})]})]})})}function R5({driver:t,onContinue:e,onLogin:n,onBack:r,loading:s}){const[a,c]=S.useState(""),[d,h]=S.useState(!1),[f,m]=S.useState(null),[g,w]=S.useState(!1),C=b=>{if(b.preventDefault(),!a.trim()){m("Molimo unesite lozinku");return}m(null),n(t.tura,a,d)};return o.jsx("div",{className:"driver-confirm-screen",children:o.jsxs("div",{className:"confirm-container",children:[o.jsxs("div",{className:"confirm-header",children:[o.jsx("div",{className:"header-avatar",children:o.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),o.jsx("h1",{children:"Voza pronaen"}),o.jsx("p",{children:"Uspjeno smo identificirali va profil"})]}),o.jsxs("div",{className:"driver-card",children:[o.jsxs("div",{className:"driver-info",children:[o.jsx("h2",{children:t.ime}),o.jsxs("div",{className:"driver-details",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-icon",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),o.jsx("path",{d:"m20 8 2 2-2 2"}),o.jsx("path",{d:"m16 12-2-2 2-2"})]})}),o.jsxs("span",{children:["Tura: ",t.tura]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-icon",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),o.jsx("path",{d:"m19.4 15-1.1-2.3c-.4-.8-1.2-1.3-2.1-1.3H7.8c-.9 0-1.7.5-2.1 1.3L4.6 15"}),o.jsx("path",{d:"M12 8v7"})]})}),o.jsx("span",{children:t.role==="admin"?"Administrator":"Voza"})]})]})]}),o.jsx("div",{className:"status-indicator",children:t.hasPassword?o.jsxs("div",{className:"status has-password",children:[o.jsx("span",{className:"status-icon",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("circle",{cx:"12",cy:"16",r:"1"}),o.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),o.jsx("span",{children:"Ve imate lozinku"})]}):o.jsxs("div",{className:"status no-password",children:[o.jsx("span",{className:"status-icon",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]})}),o.jsx("span",{children:"Potrebno je postaviti lozinku"})]})})]}),t.hasPassword?o.jsxs("form",{onSubmit:C,className:"login-form",children:[o.jsxs("div",{className:"input-group",children:[o.jsx("label",{htmlFor:"password",children:"Lozinka"}),o.jsxs("div",{className:"input-wrapper",children:[o.jsx("input",{type:g?"text":"password",id:"password",value:a,onChange:b=>c(b.target.value),placeholder:"Unesite vau lozinku",disabled:s,autoFocus:!0}),o.jsx("div",{className:`input-icon ${g?"icon-text":"icon-password"}`,children:g?o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),o.jsx("polyline",{points:"14,2 14,8 20,8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),o.jsx("polyline",{points:"10,9 9,9 8,9"})]}):o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("circle",{cx:"12",cy:"16",r:"1"}),o.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),o.jsx("button",{type:"button",className:"password-toggle",onClick:()=>w(!g),disabled:s,children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g?o.jsxs(o.Fragment,{children:[o.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),o.jsx("path",{d:"m1 1 22 22"})]}):o.jsxs(o.Fragment,{children:[o.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]})]}),o.jsx("div",{className:"checkbox-group",children:o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:d,onChange:b=>h(b.target.checked),disabled:s}),o.jsx("span",{className:"checkbox-custom"}),o.jsx("span",{className:"checkbox-text",children:"Zapamti me"})]})}),f&&o.jsxs("div",{className:"error-message",children:[o.jsx("div",{className:"error-icon",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),o.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),o.jsx("span",{children:f})]}),o.jsxs("div",{className:"confirm-actions",children:[o.jsxs("button",{type:"button",className:"back-btn",onClick:r,disabled:s,children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"m15 18-6-6 6-6"})}),"Nazad"]}),o.jsx("button",{type:"submit",className:"login-btn",disabled:s||!a.trim(),children:o.jsx("span",{className:"btn-content",children:s?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"btn-spinner"}),"Prijavljivam..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"m9 18 6-6-6-6"})}),"Prijavite se"]})})})]})]}):o.jsxs("div",{className:"confirm-actions",children:[o.jsxs("button",{type:"button",className:"back-btn",onClick:r,disabled:s,children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"m15 18-6-6 6-6"})}),"Nazad"]}),o.jsx("button",{type:"button",className:"continue-btn",onClick:e,disabled:s,children:o.jsx("span",{className:"btn-content",children:s?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"btn-spinner"}),"Molim saekajte..."]}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),"Postavite lozinku"]})})})]}),o.jsx("div",{className:"confirm-footer",children:o.jsx("p",{children:"Provjerite da li su podaci ispravni prije nastavka"})})]})})}function I5({driver:t,onPasswordSet:e,onBack:n,loading:r}){const[s,a]=S.useState(""),[c,d]=S.useState(""),[h,f]=S.useState(!1),[m,g]=S.useState(null),[w,C]=S.useState(!1),[b,_]=S.useState(!1),k=y=>{if(y.preventDefault(),!s.trim()){g("Molimo unesite lozinku");return}if(s.length<4){g("Lozinka mora imati najmanje 4 karaktera");return}if(s!==c){g("Lozinke se ne poklapaju");return}g(null),e(s,h)};return o.jsx("div",{className:"password-setup-screen",children:o.jsxs("div",{className:"setup-container",children:[o.jsxs("div",{className:"setup-header",children:[o.jsx("div",{className:"header-avatar",children:o.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("circle",{cx:"12",cy:"16",r:"1"}),o.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),o.jsx("h1",{children:"Postavite lozinku"}),o.jsxs("div",{className:"driver-info-card",children:[o.jsxs("div",{className:"driver-detail",children:[o.jsx("span",{className:"detail-icon",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),o.jsxs("span",{children:[o.jsx("strong",{children:"Voza:"})," ",t.ime]})]}),o.jsxs("div",{className:"driver-detail",children:[o.jsx("span",{className:"detail-icon",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M12 1v6m0 6v6"})]})}),o.jsxs("span",{children:[o.jsx("strong",{children:"Tura:"})," ",t.tura]})]})]}),o.jsx("p",{children:"Ovo je va prvi put. Molimo postavite lozinku za budui pristup."})]}),o.jsxs("form",{onSubmit:k,className:"setup-form",children:[o.jsxs("div",{className:"input-group",children:[o.jsx("label",{htmlFor:"password",children:"Nova lozinka:"}),o.jsxs("div",{className:"input-wrapper",children:[o.jsx("input",{type:w?"text":"password",id:"password",value:s,onChange:y=>a(y.target.value),placeholder:"Unesite lozinku",disabled:r,autoFocus:!0}),o.jsx("div",{className:"input-icon",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("circle",{cx:"12",cy:"16",r:"1"}),o.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),o.jsx("button",{type:"button",className:"password-toggle",onClick:()=>C(!w),disabled:r,children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:w?o.jsxs(o.Fragment,{children:[o.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),o.jsx("path",{d:"m1 1 22 22"})]}):o.jsxs(o.Fragment,{children:[o.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]})]}),o.jsxs("div",{className:"input-group",children:[o.jsx("label",{htmlFor:"confirmPassword",children:"Potvrdite lozinku:"}),o.jsxs("div",{className:"input-wrapper",children:[o.jsx("input",{type:b?"text":"password",id:"confirmPassword",value:c,onChange:y=>d(y.target.value),placeholder:"Ponovite lozinku",disabled:r}),o.jsx("div",{className:"input-icon",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M9 12l2 2 4-4"}),o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("circle",{cx:"12",cy:"16",r:"1"})]})}),o.jsx("button",{type:"button",className:"password-toggle",onClick:()=>_(!b),disabled:r,children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:b?o.jsxs(o.Fragment,{children:[o.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),o.jsx("path",{d:"m1 1 22 22"})]}):o.jsxs(o.Fragment,{children:[o.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]})]}),m&&o.jsxs("div",{className:"error-message",children:[o.jsx("div",{className:"error-icon",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),o.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),m]}),o.jsx("div",{className:"checkbox-group",children:o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:h,onChange:y=>f(y.target.checked),disabled:r}),o.jsx("div",{className:"checkbox-custom"}),o.jsx("span",{className:"checkbox-text",children:"Zapamti me"})]})}),o.jsxs("div",{className:"setup-actions",children:[o.jsxs("button",{type:"button",className:"back-btn",onClick:n,disabled:r,children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"m15 18-6-6 6-6"})}),"Nazad"]}),o.jsx("button",{type:"submit",className:"setup-btn",disabled:r||!s.trim()||!c.trim(),children:o.jsx("span",{className:"btn-content",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"btn-spinner"}),"Postavljam i ulogujem..."]}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),o.jsx("polyline",{points:"10,17 15,12 10,7"}),o.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),"Postavi lozinku i uloguj se"]})})})]})]}),o.jsx("div",{className:"setup-footer",children:o.jsx("p",{children:"Lozinka e biti automatski sauvana i ulogovani ete se odmah."})})]})})}function M5({onLogin:t,loading:e,onBack:n}){const[r,s]=S.useState(""),[a,c]=S.useState(""),[d,h]=S.useState(null),f=m=>{if(m.preventDefault(),!r.trim()){h("Molimo unesite vau turu");return}if(!a.trim()){h("Molimo unesite lozinku");return}h(null),t(r.trim().toUpperCase(),a)};return o.jsx("div",{className:"login-screen",children:o.jsxs("div",{className:"login-container",children:[o.jsxs("div",{className:"login-header",children:[o.jsx("h1",{children:"Prijava"}),o.jsx("p",{children:"Unesite vau turu i lozinku za pristup aplikaciji."})]}),o.jsxs("form",{onSubmit:f,className:"login-form",children:[o.jsxs("div",{className:"input-group",children:[o.jsx("label",{htmlFor:"tura",children:"Tura:"}),o.jsx("input",{type:"text",id:"tura",value:r,onChange:m=>s(m.target.value),placeholder:"npr. 8610",maxLength:"10",disabled:e,autoFocus:!0})]}),o.jsxs("div",{className:"input-group",children:[o.jsx("label",{htmlFor:"password",children:"Lozinka:"}),o.jsx("input",{type:"password",id:"password",value:a,onChange:m=>c(m.target.value),placeholder:"Vaa lozinka",disabled:e})]}),d&&o.jsx("div",{className:"error-message",children:d}),o.jsx("button",{type:"submit",className:"login-btn",disabled:e||!r.trim()||!a.trim(),children:e?"Prijavljivam...":"Prijavite se"})]}),o.jsx("div",{className:"login-footer",children:o.jsx("button",{type:"button",className:"back-btn",onClick:n,disabled:e,children:" Nazad"})})]})})}function A5({onAuthSuccess:t}){const[e,n]=S.useState("init"),[r,s]=S.useState(null),{loading:a,checkDriverExists:c,setInitialPassword:d,login:h}=Gp(),f=async _=>{try{const k=await c(_);s(k),n("confirm")}catch(k){console.error("Driver check failed:",k)}},m=()=>{r.hasPassword?n("login"):n("setup")},g=async(_,k=!1)=>{try{await d(r.id,_);const y=await h(r.tura,_);k&&localStorage.setItem("bde_remember_me","true"),t(y)}catch(y){console.error("Password setup failed:",y)}},w=async(_,k,y=!1)=>{try{const j=await h(_,k);y&&localStorage.setItem("bde_remember_me","true"),t(j)}catch(j){console.error("Login failed:",j)}},C=()=>{n("init"),s(null)},b=()=>{n("confirm")};return e==="init"?o.jsx(N5,{onDriverSelected:f,loading:a}):e==="confirm"?o.jsx(R5,{driver:r,onContinue:m,onLogin:w,onBack:C,loading:a}):e==="setup"?o.jsx(I5,{driver:r,onPasswordSet:g,onBack:b,loading:a}):e==="login"?o.jsx(M5,{onLogin:w,loading:a,onBack:b}):null}function D5({user:t,onChangePassword:e,onLogout:n}){const[r,s]=S.useState(!1),a=S.useRef(null),c=js();S.useEffect(()=>{const h=f=>{a.current&&!a.current.contains(f.target)&&s(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const d=h=>{console.log("handleMenuItemClick pozvan sa action:",h),s(!1),h()};return o.jsxs("div",{className:"user-menu",ref:a,children:[o.jsxs("button",{className:"user-menu-trigger",onClick:()=>s(!r),"aria-expanded":r,children:[o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),o.jsx("span",{className:"user-name",children:t.name}),o.jsxs("span",{className:"user-tura",children:["(",t.username,")"]}),o.jsx("span",{className:`dropdown-arrow ${r?"open":""}`,children:""})]}),r&&o.jsxs("div",{className:"user-menu-dropdown",children:[o.jsxs("div",{className:"user-info",children:[o.jsx("div",{className:"user-detail",children:o.jsx("strong",{children:t.name})}),o.jsxs("div",{className:"user-detail",children:["Tura: ",t.username]}),o.jsxs("div",{className:"user-detail",children:["Uloga: ",t.role==="admin"?"Administrator":"Voza"]})]}),o.jsx("div",{className:"menu-divider"}),(t==null?void 0:t.role)==="admin"&&o.jsxs("button",{className:"menu-item",onClick:()=>d(()=>c("/admin")),children:[o.jsx("span",{className:"menu-icon","aria-hidden":"true",children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M19.14,12.94a7.07,7.07,0,0,0,.05-.94,7.07,7.07,0,0,0-.05-.94l2.11-1.65a.5.5,0,0,0,.12-.64l-2-3.46a.5.5,0,0,0-.6-.22l-2.49,1a7.18,7.18,0,0,0-1.63-.94l-.38-2.65A.5.5,0,0,0,13.7,2H10.3a.5.5,0,0,0-.49.42L9.43,5.07a7.18,7.18,0,0,0-1.63.94l-2.49-1a.5.5,0,0,0-.6.22l-2,3.46a.5.5,0,0,0,.12.64L5,11.06a7.07,7.07,0,0,0-.05.94,7.07,7.07,0,0,0,.05.94L2.89,14.59a.5.5,0,0,0-.12.64l2,3.46a.5.5,0,0,0,.6.22l2.49-1a7.18,7.18,0,0,0,1.63.94l.38,2.65a.5.5,0,0,0,.49.42h3.4a.5.5,0,0,0,.49-.42l.38-2.65a7.18,7.18,0,0,0,1.63-.94l2.49,1a.5.5,0,0,0,.6-.22l2-3.46a.5.5,0,0,0-.12-.64ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"})})}),"Admin panel"]}),(t==null?void 0:t.role)!=="admin"&&o.jsxs("button",{className:"menu-item",onClick:()=>d(()=>c("/payroll")),children:[o.jsx("span",{className:"menu-icon","aria-hidden":"true",children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2C13.1 2 14 2.9 14 4V8H18C19.1 8 20 8.9 20 10V20C20 21.1 19.1 22 18 22H6C4.9 22 4 21.1 4 20V10C4 8.9 4.9 8 6 8H10V4C10 2.9 10.9 2 12 2M12 4V8H12V4M6 10V20H18V10H6M8 12H16V14H8V12M8 16H16V18H8V16Z"})})}),"Platna Lista"]}),o.jsx("div",{className:"menu-divider"}),o.jsxs("button",{className:"menu-item",onClick:()=>d(e),children:[o.jsx("span",{className:"menu-icon","aria-hidden":"true",children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 17a3 3 0 1 0-3-3h-1a4 4 0 1 1 7.9-1H20v6H8v-5h1a3 3 0 0 0 3 3z"})})}),"Promjena lozinke"]}),o.jsx("div",{className:"menu-divider"}),o.jsxs("button",{className:"menu-item logout",onClick:()=>d(n),children:[o.jsx("span",{className:"menu-icon","aria-hidden":"true",children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M10 17v-3h4v-4h-4V7l-5 5 5 5zm9-12h-8v2h8v10h-8v2h8a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z"})})}),"Odjava"]})]})]})}const z5="_modalForm_1wken_3",B5="_inputGroup_1wken_18",$5="_inputLabel_1wken_25",F5="_inputWrapper_1wken_40",U5="_passwordInput_1wken_46",W5="_toggleButton_1wken_71",H5="_strengthIndicator_1wken_88",V5="_strengthWeak_1wken_96",q5="_strengthMedium_1wken_102",G5="_strengthStrong_1wken_108",Z5="_modalActions_1wken_114",K5="_cancelBtn_1wken_121",Y5="_submitBtn_1wken_139",J5="_validationMessage_1wken_165",Q5="_validationSuccess_1wken_175",X5="_validationError_1wken_181",eP="_formHeader_1wken_187",tP="_formTitle_1wken_192",nP="_formSubtitle_1wken_203",rP="_securityTips_1wken_209",Ae={modalForm:z5,inputGroup:B5,inputLabel:$5,inputWrapper:F5,passwordInput:U5,toggleButton:W5,strengthIndicator:H5,strengthWeak:V5,strengthMedium:q5,strengthStrong:G5,modalActions:Z5,cancelBtn:K5,submitBtn:Y5,validationMessage:J5,validationSuccess:Q5,validationError:X5,formHeader:eP,formTitle:tP,formSubtitle:nP,securityTips:rP},iP=({onClose:t,onSubmit:e})=>{const[n,r]=S.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[s,a]=S.useState({old:!1,new:!1,confirm:!1}),[c,d]=S.useState({}),[h,f]=S.useState(!1),m=y=>{if(!y)return null;let j=0;return y.length>=8&&j++,/[A-Z]/.test(y)&&j++,/[a-z]/.test(y)&&j++,/[0-9]/.test(y)&&j++,/[^A-Za-z0-9]/.test(y)&&j++,j<3?{level:"weak",text:" Slaba lozinka"}:j<4?{level:"medium",text:" Srednja lozinka"}:{level:"strong",text:" Jaka lozinka"}},g=()=>{const y={};return n.oldPassword||(y.oldPassword="Stara lozinka je obavezna"),n.newPassword?n.newPassword.length<6&&(y.newPassword="Nova lozinka mora imati najmanje 6 karaktera"):y.newPassword="Nova lozinka je obavezna",n.confirmPassword?n.newPassword!==n.confirmPassword&&(y.confirmPassword="Lozinke se ne poklapaju"):y.confirmPassword="Potvrda lozinke je obavezna",n.oldPassword===n.newPassword&&(y.newPassword="Nova lozinka mora biti razliita od stare"),d(y),Object.keys(y).length===0},w=(y,j)=>{r(x=>({...x,[y]:j})),c[y]&&d(x=>({...x,[y]:null}))},C=y=>{a(j=>({...j,[y]:!j[y]}))},b=async y=>{if(y.preventDefault(),!!g()){f(!0);try{await e(n),t()}catch(j){d({submit:j.message||"Greka pri promeni lozinke"})}finally{f(!1)}}},_=n.oldPassword&&n.newPassword&&n.confirmPassword&&n.newPassword===n.confirmPassword&&n.newPassword.length>=6&&n.oldPassword!==n.newPassword,k=m(n.newPassword);return o.jsxs("form",{className:Ae.modalForm,onSubmit:b,children:[o.jsxs("div",{className:Ae.formHeader,children:[o.jsx("h2",{className:Ae.formTitle,children:" Promena lozinke"}),o.jsx("p",{className:Ae.formSubtitle,children:"Unesite staru lozinku i definiite novu sigurnu lozinku"})]}),o.jsxs("div",{className:Ae.inputGroup,children:[o.jsx("label",{className:Ae.inputLabel,htmlFor:"oldPassword",children:"Trenutna lozinka"}),o.jsxs("div",{className:Ae.inputWrapper,children:[o.jsx("input",{id:"oldPassword",type:s.old?"text":"password",value:n.oldPassword,onChange:y=>w("oldPassword",y.target.value),placeholder:"Unesite trenutnu lozinku",className:Ae.passwordInput,autoComplete:"current-password"}),o.jsx("button",{type:"button",className:Ae.toggleButton,onClick:()=>C("old"),"aria-label":"Prikai/sakrij lozinku",children:s.old?"":""})]}),c.oldPassword&&o.jsxs("div",{className:`${Ae.validationMessage} ${Ae.validationError}`,children:[" ",c.oldPassword]})]}),o.jsxs("div",{className:Ae.inputGroup,children:[o.jsx("label",{className:Ae.inputLabel,htmlFor:"newPassword",children:"Nova lozinka"}),o.jsxs("div",{className:Ae.inputWrapper,children:[o.jsx("input",{id:"newPassword",type:s.new?"text":"password",value:n.newPassword,onChange:y=>w("newPassword",y.target.value),placeholder:"Unesite novu lozinku",className:Ae.passwordInput,autoComplete:"new-password"}),o.jsx("button",{type:"button",className:Ae.toggleButton,onClick:()=>C("new"),"aria-label":"Prikai/sakrij lozinku",children:s.new?"":""})]}),k&&o.jsx("div",{className:`${Ae.strengthIndicator} ${Ae[`strength${k.level.charAt(0).toUpperCase()+k.level.slice(1)}`]}`,children:k.text}),c.newPassword&&o.jsxs("div",{className:`${Ae.validationMessage} ${Ae.validationError}`,children:[" ",c.newPassword]})]}),o.jsxs("div",{className:Ae.inputGroup,children:[o.jsx("label",{className:Ae.inputLabel,htmlFor:"confirmPassword",children:"Potvrdite novu lozinku"}),o.jsxs("div",{className:Ae.inputWrapper,children:[o.jsx("input",{id:"confirmPassword",type:s.confirm?"text":"password",value:n.confirmPassword,onChange:y=>w("confirmPassword",y.target.value),placeholder:"Ponovite novu lozinku",className:Ae.passwordInput,autoComplete:"new-password"}),o.jsx("button",{type:"button",className:Ae.toggleButton,onClick:()=>C("confirm"),"aria-label":"Prikai/sakrij lozinku",children:s.confirm?"":""})]}),n.confirmPassword&&n.newPassword===n.confirmPassword&&o.jsx("div",{className:`${Ae.validationMessage} ${Ae.validationSuccess}`,children:" Lozinke se poklapaju"}),c.confirmPassword&&o.jsxs("div",{className:`${Ae.validationMessage} ${Ae.validationError}`,children:[" ",c.confirmPassword]})]}),o.jsxs("div",{className:Ae.securityTips,children:[o.jsx("h4",{children:" Saveti za sigurnu lozinku:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Najmanje 8 karaktera"}),o.jsx("li",{children:"Kombinacija velikih i malih slova"}),o.jsx("li",{children:"Brojevi i specijalni karakteri (!@#$%)"}),o.jsx("li",{children:"Izbegavajte line podatke"})]})]}),c.submit&&o.jsxs("div",{className:`${Ae.validationMessage} ${Ae.validationError}`,children:[" ",c.submit]}),o.jsxs("div",{className:Ae.modalActions,children:[o.jsx("button",{type:"button",className:Ae.cancelBtn,onClick:t,disabled:h,children:" Otkai"}),o.jsx("button",{type:"submit",className:Ae.submitBtn,disabled:!_||h,children:h?" Menjam...":" Promeni lozinku"})]})]})},D1=6048e5,sP=864e5,zv=Symbol.for("constructDateFrom");function $r(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&zv in t?t[zv](e):t instanceof Date?new t.constructor(e):new Date(e)}function zn(t,e){return $r(e||t,t)}function oP(t,e){const n=zn(t,e==null?void 0:e.in).getDay();return n===0||n===6}let aP={};function Au(){return aP}function nl(t,e){var d,h,f,m;const n=Au(),r=(e==null?void 0:e.weekStartsOn)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,s=zn(t,e==null?void 0:e.in),a=s.getDay(),c=(a<r?7:0)+a-r;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function uu(t,e){return nl(t,{...e,weekStartsOn:1})}function z1(t,e){const n=zn(t,e==null?void 0:e.in),r=n.getFullYear(),s=$r(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=uu(s),c=$r(n,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const d=uu(c);return n.getTime()>=a.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function Bv(t){const e=zn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function B1(t,...e){const n=$r.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function $v(t,e){const n=zn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function lP(t,e,n){const[r,s]=B1(n==null?void 0:n.in,t,e),a=$v(r),c=$v(s),d=+a-Bv(a),h=+c-Bv(c);return Math.round((d-h)/sP)}function cP(t,e){const n=z1(t,e),r=$r(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),uu(r)}function uP(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function dP(t){return!(!uP(t)&&typeof t!="number"||isNaN(+zn(t)))}function hP(t,e){const[n,r]=B1(t,e.start,e.end);return{start:n,end:r}}function fP(t,e){const{start:n,end:r}=hP(e==null?void 0:e.in,t);let s=+n>+r;const a=s?+n:+r,c=s?r:n;c.setHours(0,0,0,0);let d=1;const h=[];for(;+c<=a;)h.push($r(n,c)),c.setDate(c.getDate()+d),c.setHours(0,0,0,0);return s?h.reverse():h}function pP(t,e){const n=zn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const mP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gP=(t,e,n)=>{let r;const s=mP[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ih(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const vP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_P={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xP={date:ih({formats:vP,defaultWidth:"full"}),time:ih({formats:yP,defaultWidth:"full"}),dateTime:ih({formats:_P,defaultWidth:"full"})},wP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bP=(t,e,n,r)=>wP[t];function pa(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,d=n!=null&&n.width?String(n.width):c;s=t.formattingValues[d]||t.formattingValues[c]}else{const c=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[d]||t.values[c]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const jP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},SP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},CP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},PP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},EP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},TP=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},LP={ordinalNumber:TP,era:pa({values:jP,defaultWidth:"wide"}),quarter:pa({values:kP,defaultWidth:"wide",argumentCallback:t=>t-1}),month:pa({values:SP,defaultWidth:"wide"}),day:pa({values:CP,defaultWidth:"wide"}),dayPeriod:pa({values:PP,defaultWidth:"wide",formattingValues:EP,defaultFormattingWidth:"wide"})};function ma(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const c=a[0],d=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(d)?NP(d,g=>g.test(c)):OP(d,g=>g.test(c));let f;f=t.valueCallback?t.valueCallback(h):h,f=n.valueCallback?n.valueCallback(f):f;const m=e.slice(c.length);return{value:f,rest:m}}}function OP(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function NP(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function RP(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let c=t.valueCallback?t.valueCallback(a[0]):a[0];c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(s.length);return{value:c,rest:d}}}const IP=/^(\d+)(th|st|nd|rd)?/i,MP=/\d+/i,AP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},DP={any:[/^b/i,/^(a|c)/i]},zP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},BP={any:[/1/i,/2/i,/3/i,/4/i]},$P={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},FP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},UP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},WP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},HP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},VP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qP={ordinalNumber:RP({matchPattern:IP,parsePattern:MP,valueCallback:t=>parseInt(t,10)}),era:ma({matchPatterns:AP,defaultMatchWidth:"wide",parsePatterns:DP,defaultParseWidth:"any"}),quarter:ma({matchPatterns:zP,defaultMatchWidth:"wide",parsePatterns:BP,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ma({matchPatterns:$P,defaultMatchWidth:"wide",parsePatterns:FP,defaultParseWidth:"any"}),day:ma({matchPatterns:UP,defaultMatchWidth:"wide",parsePatterns:WP,defaultParseWidth:"any"}),dayPeriod:ma({matchPatterns:HP,defaultMatchWidth:"any",parsePatterns:VP,defaultParseWidth:"any"})},GP={code:"en-US",formatDistance:gP,formatLong:xP,formatRelative:bP,localize:LP,match:qP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ZP(t,e){const n=zn(t,e==null?void 0:e.in);return lP(n,pP(n))+1}function KP(t,e){const n=zn(t,e==null?void 0:e.in),r=+uu(n)-+cP(n);return Math.round(r/D1)+1}function $1(t,e){var m,g,w,C;const n=zn(t,e==null?void 0:e.in),r=n.getFullYear(),s=Au(),a=(e==null?void 0:e.firstWeekContainsDate)??((g=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??s.firstWeekContainsDate??((C=(w=s.locale)==null?void 0:w.options)==null?void 0:C.firstWeekContainsDate)??1,c=$r((e==null?void 0:e.in)||t,0);c.setFullYear(r+1,0,a),c.setHours(0,0,0,0);const d=nl(c,e),h=$r((e==null?void 0:e.in)||t,0);h.setFullYear(r,0,a),h.setHours(0,0,0,0);const f=nl(h,e);return+n>=+d?r+1:+n>=+f?r:r-1}function YP(t,e){var d,h,f,m;const n=Au(),r=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,s=$1(t,e),a=$r((e==null?void 0:e.in)||t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),nl(a,e)}function JP(t,e){const n=zn(t,e==null?void 0:e.in),r=+nl(n,e)-+YP(n,e);return Math.round(r/D1)+1}function Ge(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Kr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ge(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ge(n+1,2)},d(t,e){return Ge(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ge(t.getHours()%12||12,e.length)},H(t,e){return Ge(t.getHours(),e.length)},m(t,e){return Ge(t.getMinutes(),e.length)},s(t,e){return Ge(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ge(s,e.length)}},Ws={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fv={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Kr.y(t,e)},Y:function(t,e,n,r){const s=$1(t,r),a=s>0?s:1-s;if(e==="YY"){const c=a%100;return Ge(c,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Ge(a,e.length)},R:function(t,e){const n=z1(t);return Ge(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ge(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ge(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ge(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Kr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ge(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=JP(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Ge(s,e.length)},I:function(t,e,n){const r=KP(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ge(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Kr.d(t,e)},D:function(t,e,n){const r=ZP(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ge(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Ge(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Ge(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Ge(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Ws.noon:r===0?s=Ws.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Ws.evening:r>=12?s=Ws.afternoon:r>=4?s=Ws.morning:s=Ws.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Kr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Kr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ge(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ge(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Kr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Kr.s(t,e)},S:function(t,e){return Kr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Wv(r);case"XXXX":case"XX":return qi(r);case"XXXXX":case"XXX":default:return qi(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Wv(r);case"xxxx":case"xx":return qi(r);case"xxxxx":case"xxx":default:return qi(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Uv(r,":");case"OOOO":default:return"GMT"+qi(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Uv(r,":");case"zzzz":default:return"GMT"+qi(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Ge(r,e.length)},T:function(t,e,n){return Ge(+t,e.length)}};function Uv(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+Ge(a,2)}function Wv(t,e){return t%60===0?(t>0?"-":"+")+Ge(Math.abs(t)/60,2):qi(t,e)}function qi(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Ge(Math.trunc(r/60),2),a=Ge(r%60,2);return n+s+e+a}const Hv=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},F1=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},QP=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Hv(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Hv(r,e)).replace("{{time}}",F1(s,e))},XP={p:F1,P:QP},eE=/^D+$/,tE=/^Y+$/,nE=["D","DD","YY","YYYY"];function rE(t){return eE.test(t)}function iE(t){return tE.test(t)}function sE(t,e,n){const r=oE(t,e,n);if(console.warn(r),nE.includes(t))throw new RangeError(r)}function oE(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const aE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cE=/^'([^]*?)'?$/,uE=/''/g,dE=/[a-zA-Z]/;function ht(t,e,n){var m,g,w,C;const r=Au(),s=r.locale??GP,a=r.firstWeekContainsDate??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,c=r.weekStartsOn??((C=(w=r.locale)==null?void 0:w.options)==null?void 0:C.weekStartsOn)??0,d=zn(t,n==null?void 0:n.in);if(!dP(d))throw new RangeError("Invalid time value");let h=e.match(lE).map(b=>{const _=b[0];if(_==="p"||_==="P"){const k=XP[_];return k(b,s.formatLong)}return b}).join("").match(aE).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const _=b[0];if(_==="'")return{isToken:!1,value:hE(b)};if(Fv[_])return{isToken:!0,value:b};if(_.match(dE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(h=s.localize.preprocessor(d,h));const f={firstWeekContainsDate:a,weekStartsOn:c,locale:s};return h.map(b=>{if(!b.isToken)return b.value;const _=b.value;(iE(_)||rE(_))&&sE(_,e,String(t));const k=Fv[_[0]];return k(d,_,s.localize,f)}).join("")}function hE(t){const e=t.match(cE);return e?e[1].replace(uE,"'"):t}function ki({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M7 4V2C7 1.44772 7.44772 1 8 1S9 1.44772 9 2V4H15V2C15 1.44772 15.4477 1 16 1S17 1.44772 17 2V4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4H7Z",fill:"url(#cal-gradient)"}),o.jsx("path",{d:"M3 10H21V8H3V10Z",fill:"#fff",fillOpacity:"0.3"}),o.jsx("circle",{cx:"8",cy:"13",r:"1",fill:"#fff"}),o.jsx("circle",{cx:"12",cy:"13",r:"1",fill:"#fff"}),o.jsx("circle",{cx:"16",cy:"13",r:"1",fill:"#fff"}),o.jsx("circle",{cx:"8",cy:"17",r:"1",fill:"#fff"}),o.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"#fff"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"cal-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#667eea"}),o.jsx("stop",{offset:"100%",stopColor:"#764ba2"})]})})]})}function Ro({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"8",r:"4",fill:"url(#driver-gradient)"}),o.jsx("path",{d:"M5 18C5 15.7909 6.79086 14 9 14H15C17.2091 14 19 15.7909 19 18V20C19 21.1046 18.1046 22 17 22H7C5.89543 22 5 21.1046 5 20V18Z",fill:"url(#driver-gradient)"}),o.jsx("ellipse",{cx:"12",cy:"8",rx:"2",ry:"2.5",fill:"#fff",fillOpacity:"0.3"}),o.jsx("rect",{x:"10",y:"16",width:"4",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.4"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"driver-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),o.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]})})]})}function fE({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M4 10C4 8.89543 4.89543 8 6 8H18C19.1046 8 20 8.89543 20 10V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V10Z",fill:"url(#rest-gradient)"}),o.jsx("ellipse",{cx:"12",cy:"12",rx:"6",ry:"2",fill:"#fff",fillOpacity:"0.3"}),o.jsx("path",{d:"M8 14C8 13.4477 8.44772 13 9 13H15C15.5523 13 16 13.4477 16 14V16C16 16.5523 15.5523 17 15 17H9C8.44772 17 8 16.5523 8 16V14Z",fill:"#fff",fillOpacity:"0.6"}),o.jsx("circle",{cx:"10",cy:"15",r:"0.5",fill:"url(#rest-gradient)"}),o.jsx("circle",{cx:"12",cy:"15",r:"0.5",fill:"url(#rest-gradient)"}),o.jsx("circle",{cx:"14",cy:"15",r:"0.5",fill:"url(#rest-gradient)"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"rest-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),o.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}function Zp({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M5 14C5 13.4477 5.44772 13 6 13H8C8.55228 13 9 13.4477 9 14V20C9 20.5523 8.55228 21 8 21H6C5.44772 21 5 20.5523 5 20V14Z",fill:"url(#stats-gradient1)"}),o.jsx("path",{d:"M10.5 10C10.5 9.44772 10.9477 9 11.5 9H13.5C14.0523 9 14.5 9.44772 14.5 10V20C14.5 20.5523 14.0523 21 13.5 21H11.5C10.9477 21 10.5 20.5523 10.5 20V10Z",fill:"url(#stats-gradient2)"}),o.jsx("path",{d:"M16 6C16 5.44772 16.4477 5 17 5H19C19.5523 5 20 5.44772 20 6V20C20 20.5523 19.5523 21 19 21H17C16.4477 21 16 20.5523 16 20V6Z",fill:"url(#stats-gradient3)"}),o.jsx("circle",{cx:"7",cy:"16",r:"1",fill:"#fff",fillOpacity:"0.4"}),o.jsx("circle",{cx:"12.5",cy:"13",r:"1",fill:"#fff",fillOpacity:"0.4"}),o.jsx("circle",{cx:"18",cy:"10",r:"1",fill:"#fff",fillOpacity:"0.4"}),o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"stats-gradient1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),o.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]}),o.jsxs("linearGradient",{id:"stats-gradient2",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#2196F3"}),o.jsx("stop",{offset:"100%",stopColor:"#1565C0"})]}),o.jsxs("linearGradient",{id:"stats-gradient3",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),o.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})]})]})}function pE({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"url(#package-gradient)"}),o.jsx("path",{d:"M2 17L12 22L22 17",stroke:"url(#package-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2 12L12 17L22 12",stroke:"url(#package-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M12 12V22",stroke:"#fff",strokeWidth:"1",strokeOpacity:"0.5"}),o.jsx("circle",{cx:"12",cy:"7",r:"1",fill:"#fff",fillOpacity:"0.8"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"package-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),o.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}function Vv({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M5 11L6.5 6.5C6.78 5.61 7.61 5 8.54 5H15.46C16.39 5 17.22 5.61 17.5 6.5L19 11",stroke:"url(#car-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M3 11H21C21.55 11 22 11.45 22 12V16C22 17.1 21.1 18 20 18H19",stroke:"url(#car-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M5 18H4C2.9 18 2 17.1 2 16V12C2 11.45 2.45 11 3 11",stroke:"url(#car-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("circle",{cx:"7",cy:"18",r:"2",fill:"url(#car-gradient)"}),o.jsx("circle",{cx:"17",cy:"18",r:"2",fill:"url(#car-gradient)"}),o.jsx("rect",{x:"8",y:"7",width:"8",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.6"}),o.jsx("circle",{cx:"7",cy:"18",r:"1",fill:"#fff",fillOpacity:"0.8"}),o.jsx("circle",{cx:"17",cy:"18",r:"1",fill:"#fff",fillOpacity:"0.8"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"car-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#9C27B0"}),o.jsx("stop",{offset:"100%",stopColor:"#673AB7"})]})})]})}function mE({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"7",r:"3",fill:"url(#user-gradient)"}),o.jsx("path",{d:"M6 21V19C6 16.7909 7.79086 15 10 15H14C16.2091 15 18 16.7909 18 19V21",stroke:"url(#user-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("circle",{cx:"12",cy:"7",r:"1.5",fill:"#fff",fillOpacity:"0.6"}),o.jsx("path",{d:"M10 17H14C15.1 17 16 17.9 16 19V20H8V19C8 17.9 8.9 17 10 17Z",fill:"#fff",fillOpacity:"0.3"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"user-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#2196F3"}),o.jsx("stop",{offset:"100%",stopColor:"#1976D2"})]})})]})}function qv({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M12 2C15.31 2 18 4.69 18 8C18 13.25 12 22 12 22S6 13.25 6 8C6 4.69 8.69 2 12 2Z",fill:"url(#location-gradient)"}),o.jsx("circle",{cx:"12",cy:"8",r:"2.5",fill:"#fff",fillOpacity:"0.9"}),o.jsx("circle",{cx:"12",cy:"8",r:"1",fill:"url(#location-gradient)"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"location-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#E91E63"}),o.jsx("stop",{offset:"100%",stopColor:"#C2185B"})]})})]})}function Gv({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",fill:"url(#number-gradient)"}),o.jsx("rect",{x:"5",y:"8",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),o.jsx("rect",{x:"9",y:"8",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),o.jsx("rect",{x:"13",y:"8",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),o.jsx("rect",{x:"17",y:"8",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),o.jsx("rect",{x:"5",y:"12",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),o.jsx("rect",{x:"9",y:"12",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),o.jsx("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),o.jsx("rect",{x:"17",y:"12",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"number-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),o.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}function Zv({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M9 4C10.1046 4 11 4.89543 11 6C11 7.10457 10.1046 8 9 8C7.89543 8 7 7.10457 7 6C7 4.89543 7.89543 4 9 4Z",fill:"url(#route-gradient)"}),o.jsx("path",{d:"M15 16C16.1046 16 17 16.8954 17 18C17 19.1046 16.1046 20 15 20C13.8954 20 13 19.1046 13 18C13 16.8954 13.8954 16 15 16Z",fill:"url(#route-gradient)"}),o.jsx("path",{d:"M9 8L9 10C9 11.1046 9.89543 12 11 12L13 12C14.1046 12 15 12.8954 15 14L15 16",stroke:"url(#route-gradient)",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("circle",{cx:"9",cy:"6",r:"1.5",fill:"#fff",fillOpacity:"0.8"}),o.jsx("circle",{cx:"15",cy:"18",r:"1.5",fill:"#fff",fillOpacity:"0.8"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"route-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),o.jsx("stop",{offset:"100%",stopColor:"#388E3C"})]})})]})}function Kv({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"url(#money-gradient)"}),o.jsx("path",{d:"M12 6V8M12 16V18M16 12H18M6 12H8",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("path",{d:"M9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12Z",stroke:"#fff",strokeWidth:"1.5"}),o.jsx("text",{x:"12",y:"13",textAnchor:"middle",dy:"0.3em",fontSize:"6",fill:"#fff",fontWeight:"bold",children:""}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"money-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),o.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]})})]})}function sh({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"url(#pending-gradient)"}),o.jsx("path",{d:"M12 7V12L16 16",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#fff"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"pending-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),o.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}function Yv({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"url(#approved-gradient)"}),o.jsx("path",{d:"M9 12L11 14L15 10",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("circle",{cx:"12",cy:"12",r:"6",stroke:"#fff",strokeWidth:"0.5",opacity:"0.3"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"approved-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),o.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]})})]})}function gE({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",fill:"url(#total-gradient)"}),o.jsx("path",{d:"M7 8H17M7 12H17M7 16H13",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("circle",{cx:"18",cy:"6",r:"3",fill:"#4CAF50"}),o.jsx("text",{x:"18",y:"7",textAnchor:"middle",dy:"0.3em",fontSize:"8",fill:"#fff",fontWeight:"bold",children:""}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"total-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#9C27B0"}),o.jsx("stop",{offset:"100%",stopColor:"#673AB7"})]})})]})}function vE({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"3",y:"6",width:"18",height:"14",rx:"3",fill:"url(#today-gradient)"}),o.jsx("rect",{x:"7",y:"2",width:"2",height:"6",rx:"1",fill:"url(#today-gradient)"}),o.jsx("rect",{x:"15",y:"2",width:"2",height:"6",rx:"1",fill:"url(#today-gradient)"}),o.jsx("rect",{x:"3",y:"10",width:"18",height:"2",fill:"#fff",fillOpacity:"0.3"}),o.jsx("circle",{cx:"12",cy:"15",r:"3",fill:"#fff",fillOpacity:"0.9"}),o.jsx("path",{d:"M10.5 15L11.5 16L13.5 14",stroke:"url(#today-gradient)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"today-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#2196F3"}),o.jsx("stop",{offset:"100%",stopColor:"#1565C0"})]})})]})}function yE({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"3",y:"6",width:"18",height:"14",rx:"3",fill:"url(#month-gradient)"}),o.jsx("rect",{x:"7",y:"2",width:"2",height:"6",rx:"1",fill:"url(#month-gradient)"}),o.jsx("rect",{x:"15",y:"2",width:"2",height:"6",rx:"1",fill:"url(#month-gradient)"}),o.jsx("rect",{x:"3",y:"10",width:"18",height:"2",fill:"#fff",fillOpacity:"0.3"}),o.jsx("circle",{cx:"8",cy:"14",r:"1",fill:"#fff",fillOpacity:"0.7"}),o.jsx("circle",{cx:"12",cy:"14",r:"1",fill:"#fff",fillOpacity:"0.7"}),o.jsx("circle",{cx:"16",cy:"14",r:"1",fill:"#fff",fillOpacity:"0.7"}),o.jsx("circle",{cx:"8",cy:"17",r:"1",fill:"#fff",fillOpacity:"0.7"}),o.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"#fff",fillOpacity:"0.9"}),o.jsx("circle",{cx:"16",cy:"17",r:"1",fill:"#fff",fillOpacity:"0.7"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"month-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),o.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}function _E({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"3",y:"6",width:"18",height:"14",rx:"3",fill:"url(#year-gradient)"}),o.jsx("rect",{x:"7",y:"2",width:"2",height:"6",rx:"1",fill:"url(#year-gradient)"}),o.jsx("rect",{x:"15",y:"2",width:"2",height:"6",rx:"1",fill:"url(#year-gradient)"}),o.jsx("rect",{x:"3",y:"10",width:"18",height:"2",fill:"#fff",fillOpacity:"0.3"}),o.jsx("path",{d:"M12 12C13.1046 12 14 12.8954 14 14V16C14 17.1046 13.1046 18 12 18C10.8954 18 10 17.1046 10 16V14C10 12.8954 10.8954 12 12 12Z",fill:"#fff",fillOpacity:"0.9"}),o.jsx("path",{d:"M9 14H15",stroke:"#fff",strokeWidth:"1",strokeOpacity:"0.7"}),o.jsx("circle",{cx:"12",cy:"15",r:"1",fill:"url(#year-gradient)"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"year-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#9C27B0"}),o.jsx("stop",{offset:"100%",stopColor:"#6A1B9A"})]})})]})}function U1({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"2",y:"8",width:"14",height:"8",rx:"2",fill:"url(#truck-gradient)"}),o.jsx("path",{d:"M16 10H19L21 12V16H19",stroke:"url(#truck-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),o.jsx("circle",{cx:"7",cy:"18",r:"2",fill:"url(#truck-gradient)"}),o.jsx("circle",{cx:"17",cy:"18",r:"2",fill:"url(#truck-gradient)"}),o.jsx("rect",{x:"4",y:"10",width:"8",height:"4",rx:"1",fill:"#fff",fillOpacity:"0.3"}),o.jsx("rect",{x:"5",y:"11",width:"2",height:"2",rx:"0.5",fill:"#fff",fillOpacity:"0.7"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"truck-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),o.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]})})]})}function xE({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"url(#target-gradient)"}),o.jsx("circle",{cx:"12",cy:"12",r:"6",fill:"#fff",fillOpacity:"0.3"}),o.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#fff",fillOpacity:"0.6"}),o.jsx("circle",{cx:"12",cy:"12",r:"1",fill:"url(#target-gradient)"}),o.jsx("path",{d:"M12 3V6M12 18V21M3 12H6M18 12H21",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeOpacity:"0.7"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"target-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#FF5722"}),o.jsx("stop",{offset:"100%",stopColor:"#D32F2F"})]})})]})}function Tc({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",fill:"url(#settings-gradient)"}),o.jsx("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.2578 9.77251 19.9887C9.5799 19.7197 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z",fill:"url(#settings-gradient)"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"settings-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),o.jsx("stop",{offset:"100%",stopColor:"#4338CA"})]})})]})}const wE="_deliv_2r1xc_4",bE="_statLabel_2r1xc_4",jE="_monthYearPicker_2r1xc_11",kE="_statCard_2r1xc_16",SE="_monthSelect_2r1xc_22",CE="_yearSelect_2r1xc_23",PE="_deliveriesScreen_2r1xc_35",EE="_mainGrid_2r1xc_65",TE="_headerCard_2r1xc_76",LE="_heroSection_2r1xc_88",OE="_heroTitle_2r1xc_97",NE="_refreshButton_2r1xc_109",RE="_spin_2r1xc_1",IE="_statsGrid_2r1xc_142",ME="_statIcon_2r1xc_164",AE="_statValue_2r1xc_171",DE="_filtersRow_2r1xc_208",zE="_filterSelect_2r1xc_214",BE="_dataCard_2r1xc_232",$E="_mobileCards_2r1xc_243",FE="_dayCard_2r1xc_249",UE="_holiday_2r1xc_264",WE="_totalHigh_2r1xc_269",HE="_totalLow_2r1xc_274",VE="_dayCardHeader_2r1xc_279",qE="_dayCardBody_2r1xc_291",GE="_driverRow_2r1xc_297",ZE="_driverInfo_2r1xc_305",KE="_driverName_2r1xc_311",YE="_driverTura_2r1xc_316",JE="_driverValue_2r1xc_322",QE="_success_2r1xc_331",XE="_warning_2r1xc_337",eT="_empty_2r1xc_343",tT="_dayTotal_2r1xc_348",nT="_dayTotalTotalHigh_2r1xc_358",rT="_dayTotalTotalLow_2r1xc_366",iT="_tableWrapper_2r1xc_375",sT="_table_2r1xc_375",oT="_tableDriverHeader_2r1xc_405",aT="_tableDriverName_2r1xc_412",lT="_tableDriverTura_2r1xc_417",cT="_cellSuccess_2r1xc_430",uT="_cellWarning_2r1xc_436",dT="_cellEmpty_2r1xc_442",hT="_holidayRow_2r1xc_447",fT="_footerRow_2r1xc_452",pT="_footerCell_2r1xc_457",mT="_bilansSuccess_2r1xc_485",gT="_bilansWarning_2r1xc_490",vT="_loadingContainer_2r1xc_496",yT="_emptyState_2r1xc_504",_T="_dateCard_2r1xc_545",xT="_closeButton_2r1xc_649",wT="_strongPulse_2r1xc_1",bT="_strongBounce_2r1xc_1",de={deliv:wE,statLabel:bE,monthYearPicker:jE,statCard:kE,monthSelect:SE,yearSelect:CE,deliveriesScreen:PE,mainGrid:EE,headerCard:TE,heroSection:LE,heroTitle:OE,refreshButton:NE,spin:RE,statsGrid:IE,statIcon:ME,statValue:AE,filtersRow:DE,filterSelect:zE,dataCard:BE,mobileCards:$E,dayCard:FE,holiday:UE,totalHigh:WE,totalLow:HE,dayCardHeader:VE,dayCardBody:qE,driverRow:GE,driverInfo:ZE,driverName:KE,driverTura:YE,driverValue:JE,success:QE,warning:XE,empty:eT,dayTotal:tT,dayTotalTotalHigh:nT,dayTotalTotalLow:rT,tableWrapper:iT,table:sT,tableDriverHeader:oT,tableDriverName:aT,tableDriverTura:lT,cellSuccess:cT,cellWarning:uT,cellEmpty:dT,holidayRow:hT,footerRow:fT,footerCell:pT,bilansSuccess:mT,bilansWarning:gT,loadingContainer:vT,emptyState:yT,dateCard:_T,closeButton:xT,strongPulse:wT,strongBounce:bT};function W1(t,e,n=[]){return S.useMemo(()=>{const r=new Date(t,e,1),s=new Date(t,e+1,0);return fP({start:r,end:s}).filter(c=>!oP(c)&&!(n||[]).includes(ht(c,"yyyy-MM-dd")))},[t,e,n])}function H1({width:t=75,height:e=48}){return o.jsx("div",{style:{width:t,height:e,backgroundColor:"#e0e0e0",borderRadius:8,margin:"0 2px",animation:"skeletonPulse 1.6s infinite ease-in-out",opacity:.7}})}function V1({syncStatus:t}){const e=t.unsyncedCount===0,n=e?"100%":"30%",r=e?"#4caf50":"#f44336";return o.jsx("div",{style:{width:"100%",height:6,backgroundColor:"#e0e0e0",borderRadius:3,overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",borderRadius:3,width:n,backgroundColor:r,transition:"width 1s, background-color 1s"}})})}function q1({visible:t,onClose:e,children:n,title:r,icon:s}){return t?o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backdropFilter:"blur(8px)",background:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",padding:20},children:o.jsxs("div",{style:{width:"100%",maxWidth:400,borderRadius:20,background:"linear-gradient(180deg, #fff 0%, #f8f9fa 100%)",boxShadow:"0 4px 24px rgba(0,0,0,0.15)"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:20},children:[s,o.jsx("span",{style:{fontSize:20,fontWeight:"bold",color:"#333",flex:1,textAlign:"center",margin:"0 10px"},children:r}),o.jsx("button",{onClick:e,style:{width:32,height:32,borderRadius:16,background:"#f5f5f5",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},"aria-label":"Zatvori modal",children:o.jsx("span",{style:{fontSize:24,color:"#999"},children:""})})]}),n]})}):null}const Kp=()=>null,jT="_monthYearPicker_1f7zg_3",kT="_inputWrapper_1f7zg_12",ST="_modalOverlay_1f7zg_28",CT="_pickerDropdown_1f7zg_58",PT="_modalHeader_1f7zg_89",ET="_modalTitle_1f7zg_99",TT="_closeButton_1f7zg_111",LT="_monthsSection_1f7zg_135",OT="_yearsSection_1f7zg_136",NT="_monthsGrid_1f7zg_146",RT="_monthButton_1f7zg_152",IT="_selected_1f7zg_190",MT="_positive_1f7zg_202",AT="_negative_1f7zg_214",DT="_neutral_1f7zg_226",zT="_current_1f7zg_233",BT="_yearsGrid_1f7zg_262",$T="_yearButton_1f7zg_268",FT="_loadingDot_1f7zg_415",wt={monthYearPicker:jT,inputWrapper:kT,modalOverlay:ST,pickerDropdown:CT,modalHeader:PT,modalTitle:ET,closeButton:TT,monthsSection:LT,yearsSection:OT,monthsGrid:NT,monthButton:RT,selected:IT,positive:MT,negative:AT,neutral:DT,current:zT,yearsGrid:BT,yearButton:$T,loadingDot:FT},UT=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],Yp=({month:t,year:e,onMonthChange:n,onYearChange:r,monthlyPerformance:s={},isLoadingPerformance:a=!1,className:c=""})=>{const[d,h]=S.useState(!1),f=S.useRef(null),m=S.useRef(null);S.useEffect(()=>{const _=k=>{f.current&&!f.current.contains(k.target)&&m.current&&!m.current.contains(k.target)&&h(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const g=()=>{h(!d)},w=_=>{n(_),h(!1)},C=_=>{r(_),h(!1)},b=_=>{const k=new Date,y=k.getMonth(),j=k.getFullYear();if(_===y&&e===j)return wt.current;const x=s[_];return!x||x.change===void 0?"":x.change>0?wt.positive:x.change<0?wt.negative:wt.neutral};return o.jsxs("div",{className:`${wt.monthYearPicker} ${c}`,ref:m,children:[o.jsx("div",{className:wt.inputWrapper,onClick:g}),d&&Tu.createPortal(o.jsx("div",{className:wt.modalOverlay,onClick:()=>h(!1),children:o.jsxs("div",{className:wt.pickerDropdown,ref:f,onClick:_=>_.stopPropagation(),children:[o.jsxs("div",{className:wt.modalHeader,children:[o.jsx("h3",{className:wt.modalTitle,children:"Izaberi mesec i godinu"}),o.jsx("button",{className:wt.closeButton,onClick:()=>h(!1),type:"button",children:""})]}),o.jsx("div",{className:wt.monthsSection,children:o.jsx("div",{className:wt.monthsGrid,children:UT.map((_,k)=>{const y=b(k);return o.jsxs("button",{className:`${wt.monthButton} ${k===t?wt.selected:""} ${y}`,onClick:()=>w(k),type:"button",disabled:a,children:[_,a&&o.jsx("span",{className:wt.loadingDot,children:""})]},k)})})}),o.jsx("div",{className:wt.yearsSection,children:o.jsx("div",{className:wt.yearsGrid,children:[2023,2024,2025,2026,2027].map(_=>o.jsx("button",{className:`${wt.yearButton} ${_===e?wt.selected:""}`,onClick:()=>C(_),type:"button",children:_},_))})})]})}),document.body)]})};var wl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},WT={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ri,Wf,N0,HT=(N0=class{constructor(){be(this,ri,WT);be(this,Wf,!1)}setTimeoutProvider(t){ae(this,ri,t)}setTimeout(t,e){return z(this,ri).setTimeout(t,e)}clearTimeout(t){z(this,ri).clearTimeout(t)}setInterval(t,e){return z(this,ri).setInterval(t,e)}clearInterval(t){z(this,ri).clearInterval(t)}},ri=new WeakMap,Wf=new WeakMap,N0),Xi=new HT;function VT(t){setTimeout(t,0)}var ys=typeof window>"u"||"Deno"in globalThis;function cn(){}function qT(t,e){return typeof t=="function"?t(e):t}function xf(t){return typeof t=="number"&&t>=0&&t!==1/0}function G1(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Si(t,e){return typeof t=="function"?t(e):t}function On(t,e){return typeof t=="function"?t(e):t}function Jv(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:c,stale:d}=t;if(c){if(r){if(e.queryHash!==Jp(c,e.options))return!1}else if(!il(e.queryKey,c))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||s&&s!==e.state.fetchStatus||a&&!a(e))}function Qv(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(rl(e.options.mutationKey)!==rl(a))return!1}else if(!il(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Jp(t,e){return((e==null?void 0:e.queryKeyHashFn)||rl)(t)}function rl(t){return JSON.stringify(t,(e,n)=>bf(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function il(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>il(t[n],e[n])):!1}var GT=Object.prototype.hasOwnProperty;function Z1(t,e){if(t===e)return t;const n=Xv(t)&&Xv(e);if(!n&&!(bf(t)&&bf(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),c=a.length,d=n?new Array(c):{};let h=0;for(let f=0;f<c;f++){const m=n?f:a[f],g=t[m],w=e[m];if(g===w){d[m]=g,(n?f<s:GT.call(t,m))&&h++;continue}if(g===null||w===null||typeof g!="object"||typeof w!="object"){d[m]=w;continue}const C=Z1(g,w);d[m]=C,C===g&&h++}return s===c&&h===s?t:d}function wf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Xv(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function bf(t){if(!e0(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!e0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function e0(t){return Object.prototype.toString.call(t)==="[object Object]"}function ZT(t){return new Promise(e=>{Xi.setTimeout(e,t)})}function jf(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Z1(t,e):e}function KT(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function YT(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Qp=Symbol();function K1(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Qp?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function JT(t,e){return typeof t=="function"?t(...e):!!t}var ts,ii,fo,R0,QT=(R0=class extends wl{constructor(){super();be(this,ts);be(this,ii);be(this,fo);ae(this,fo,e=>{if(!ys&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){z(this,ii)||this.setEventListener(z(this,fo))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,ii))==null||e.call(this),ae(this,ii,void 0))}setEventListener(e){var n;ae(this,fo,e),(n=z(this,ii))==null||n.call(this),ae(this,ii,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,ts)!==e&&(ae(this,ts,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof z(this,ts)=="boolean"?z(this,ts):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ts=new WeakMap,ii=new WeakMap,fo=new WeakMap,R0),Xp=new QT;function kf(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var XT=VT;function e4(){let t=[],e=0,n=d=>{d()},r=d=>{d()},s=XT;const a=d=>{e?t.push(d):s(()=>{n(d)})},c=()=>{const d=t;t=[],d.length&&s(()=>{r(()=>{d.forEach(h=>{n(h)})})})};return{batch:d=>{let h;e++;try{h=d()}finally{e--,e||c()}return h},batchCalls:d=>(...h)=>{a(()=>{d(...h)})},schedule:a,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:d=>{s=d}}}var zt=e4(),po,si,mo,I0,t4=(I0=class extends wl{constructor(){super();be(this,po,!0);be(this,si);be(this,mo);ae(this,mo,e=>{if(!ys&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,si)||this.setEventListener(z(this,mo))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,si))==null||e.call(this),ae(this,si,void 0))}setEventListener(e){var n;ae(this,mo,e),(n=z(this,si))==null||n.call(this),ae(this,si,e(this.setOnline.bind(this)))}setOnline(e){z(this,po)!==e&&(ae(this,po,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,po)}},po=new WeakMap,si=new WeakMap,mo=new WeakMap,I0),du=new t4;function n4(t){return Math.min(1e3*2**t,3e4)}function Y1(t){return(t??"online")==="online"?du.isOnline():!0}var Sf=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function J1(t){let e=!1,n=0,r;const s=kf(),a=()=>s.status!=="pending",c=_=>{var k;if(!a()){const y=new Sf(_);w(y),(k=t.onCancel)==null||k.call(t,y)}},d=()=>{e=!0},h=()=>{e=!1},f=()=>Xp.isFocused()&&(t.networkMode==="always"||du.isOnline())&&t.canRun(),m=()=>Y1(t.networkMode)&&t.canRun(),g=_=>{a()||(r==null||r(),s.resolve(_))},w=_=>{a()||(r==null||r(),s.reject(_))},C=()=>new Promise(_=>{var k;r=y=>{(a()||f())&&_(y)},(k=t.onPause)==null||k.call(t)}).then(()=>{var _;r=void 0,a()||(_=t.onContinue)==null||_.call(t)}),b=()=>{if(a())return;let _;const k=n===0?t.initialPromise:void 0;try{_=k??t.fn()}catch(y){_=Promise.reject(y)}Promise.resolve(_).then(g).catch(y=>{var T;if(a())return;const j=t.retry??(ys?0:3),x=t.retryDelay??n4,E=typeof x=="function"?x(n,y):x,A=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,y);if(e||!A){w(y);return}n++,(T=t.onFail)==null||T.call(t,n,y),ZT(E).then(()=>f()?void 0:C()).then(()=>{e?w(y):b()})})};return{promise:s,status:()=>s.status,cancel:c,continue:()=>(r==null||r(),s),cancelRetry:d,continueRetry:h,canStart:m,start:()=>(m()?b():C().then(b),s)}}var ns,M0,Q1=(M0=class{constructor(){be(this,ns)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xf(this.gcTime)&&ae(this,ns,Xi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ys?1/0:5*60*1e3))}clearGcTimeout(){z(this,ns)&&(Xi.clearTimeout(z(this,ns)),ae(this,ns,void 0))}},ns=new WeakMap,M0),rs,go,Ln,is,Ot,al,ss,Zn,Cr,A0,r4=(A0=class extends Q1{constructor(e){super();be(this,Zn);be(this,rs);be(this,go);be(this,Ln);be(this,is);be(this,Ot);be(this,al);be(this,ss);ae(this,ss,!1),ae(this,al,e.defaultOptions),this.setOptions(e.options),this.observers=[],ae(this,is,e.client),ae(this,Ln,z(this,is).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ae(this,rs,t0(this.options)),this.state=e.state??z(this,rs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=z(this,Ot))==null?void 0:e.promise}setOptions(e){if(this.options={...z(this,al),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=t0(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),ae(this,rs,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,Ln).remove(this)}setData(e,n){const r=jf(this.state.data,e,this.options);return Me(this,Zn,Cr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Me(this,Zn,Cr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=z(this,Ot))==null?void 0:r.promise;return(s=z(this,Ot))==null||s.cancel(e),n?n.then(cn).catch(cn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,rs))}isActive(){return this.observers.some(e=>On(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Si(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!G1(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=z(this,Ot))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=z(this,Ot))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),z(this,Ln).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(z(this,Ot)&&(z(this,ss)?z(this,Ot).cancel({revert:!0}):z(this,Ot).cancelRetry()),this.scheduleGc()),z(this,Ln).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Me(this,Zn,Cr).call(this,{type:"invalidate"})}async fetch(e,n){var h,f,m,g,w,C,b,_,k,y,j,x;if(this.state.fetchStatus!=="idle"&&((h=z(this,Ot))==null?void 0:h.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(z(this,Ot))return z(this,Ot).continueRetry(),z(this,Ot).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(A=>A.options.queryFn);E&&this.setOptions(E.options)}const r=new AbortController,s=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(ae(this,ss,!0),r.signal)})},a=()=>{const E=K1(this.options,n),T=(()=>{const B={client:z(this,is),queryKey:this.queryKey,meta:this.meta};return s(B),B})();return ae(this,ss,!1),this.options.persister?this.options.persister(E,T,this):E(T)},d=(()=>{const E={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:z(this,is),state:this.state,fetchFn:a};return s(E),E})();(f=this.options.behavior)==null||f.onFetch(d,this),ae(this,go,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=d.fetchOptions)==null?void 0:m.meta))&&Me(this,Zn,Cr).call(this,{type:"fetch",meta:(g=d.fetchOptions)==null?void 0:g.meta}),ae(this,Ot,J1({initialPromise:n==null?void 0:n.initialPromise,fn:d.fetchFn,onCancel:E=>{E instanceof Sf&&E.revert&&this.setState({...z(this,go),fetchStatus:"idle"}),r.abort()},onFail:(E,A)=>{Me(this,Zn,Cr).call(this,{type:"failed",failureCount:E,error:A})},onPause:()=>{Me(this,Zn,Cr).call(this,{type:"pause"})},onContinue:()=>{Me(this,Zn,Cr).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const E=await z(this,Ot).start();if(E===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(E),(C=(w=z(this,Ln).config).onSuccess)==null||C.call(w,E,this),(_=(b=z(this,Ln).config).onSettled)==null||_.call(b,E,this.state.error,this),E}catch(E){if(E instanceof Sf){if(E.silent)return z(this,Ot).promise;if(E.revert){if(this.state.data===void 0)throw E;return this.state.data}}throw Me(this,Zn,Cr).call(this,{type:"error",error:E}),(y=(k=z(this,Ln).config).onError)==null||y.call(k,E,this),(x=(j=z(this,Ln).config).onSettled)==null||x.call(j,this.state.data,E,this),E}finally{this.scheduleGc()}}},rs=new WeakMap,go=new WeakMap,Ln=new WeakMap,is=new WeakMap,Ot=new WeakMap,al=new WeakMap,ss=new WeakMap,Zn=new WeakSet,Cr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...X1(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ae(this,go,e.manual?s:void 0),s;case"error":const a=e.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),zt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),z(this,Ln).notify({query:this,type:"updated",action:e})})},A0);function X1(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Y1(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function t0(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ln,De,ll,Qt,os,vo,Lr,oi,cl,yo,_o,as,ls,ai,xo,qe,ba,Cf,Pf,Ef,Tf,Lf,Of,Nf,ex,D0,i4=(D0=class extends wl{constructor(e,n){super();be(this,qe);be(this,ln);be(this,De);be(this,ll);be(this,Qt);be(this,os);be(this,vo);be(this,Lr);be(this,oi);be(this,cl);be(this,yo);be(this,_o);be(this,as);be(this,ls);be(this,ai);be(this,xo,new Set);this.options=n,ae(this,ln,e),ae(this,oi,null),ae(this,Lr,kf()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(z(this,De).addObserver(this),n0(z(this,De),this.options)?Me(this,qe,ba).call(this):this.updateResult(),Me(this,qe,Tf).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Rf(z(this,De),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Rf(z(this,De),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Me(this,qe,Lf).call(this),Me(this,qe,Of).call(this),z(this,De).removeObserver(this)}setOptions(e){const n=this.options,r=z(this,De);if(this.options=z(this,ln).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof On(this.options.enabled,z(this,De))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Me(this,qe,Nf).call(this),z(this,De).setOptions(this.options),n._defaulted&&!wf(this.options,n)&&z(this,ln).getQueryCache().notify({type:"observerOptionsUpdated",query:z(this,De),observer:this});const s=this.hasListeners();s&&r0(z(this,De),r,this.options,n)&&Me(this,qe,ba).call(this),this.updateResult(),s&&(z(this,De)!==r||On(this.options.enabled,z(this,De))!==On(n.enabled,z(this,De))||Si(this.options.staleTime,z(this,De))!==Si(n.staleTime,z(this,De)))&&Me(this,qe,Cf).call(this);const a=Me(this,qe,Pf).call(this);s&&(z(this,De)!==r||On(this.options.enabled,z(this,De))!==On(n.enabled,z(this,De))||a!==z(this,ai))&&Me(this,qe,Ef).call(this,a)}getOptimisticResult(e){const n=z(this,ln).getQueryCache().build(z(this,ln),e),r=this.createResult(n,e);return o4(this,r)&&(ae(this,Qt,r),ae(this,vo,this.options),ae(this,os,z(this,De).state)),r}getCurrentResult(){return z(this,Qt)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&!this.options.experimental_prefetchInRender&&z(this,Lr).status==="pending"&&z(this,Lr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(e){z(this,xo).add(e)}getCurrentQuery(){return z(this,De)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=z(this,ln).defaultQueryOptions(e),r=z(this,ln).getQueryCache().build(z(this,ln),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Me(this,qe,ba).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),z(this,Qt)))}createResult(e,n){var R;const r=z(this,De),s=this.options,a=z(this,Qt),c=z(this,os),d=z(this,vo),f=e!==r?e.state:z(this,ll),{state:m}=e;let g={...m},w=!1,C;if(n._optimisticResults){const N=this.hasListeners(),M=!N&&n0(e,n),q=N&&r0(e,r,n,s);(M||q)&&(g={...g,...X1(m.data,e.options)}),n._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:b,errorUpdatedAt:_,status:k}=g;C=g.data;let y=!1;if(n.placeholderData!==void 0&&C===void 0&&k==="pending"){let N;a!=null&&a.isPlaceholderData&&n.placeholderData===(d==null?void 0:d.placeholderData)?(N=a.data,y=!0):N=typeof n.placeholderData=="function"?n.placeholderData((R=z(this,_o))==null?void 0:R.state.data,z(this,_o)):n.placeholderData,N!==void 0&&(k="success",C=jf(a==null?void 0:a.data,N,n),w=!0)}if(n.select&&C!==void 0&&!y)if(a&&C===(c==null?void 0:c.data)&&n.select===z(this,cl))C=z(this,yo);else try{ae(this,cl,n.select),C=n.select(C),C=jf(a==null?void 0:a.data,C,n),ae(this,yo,C),ae(this,oi,null)}catch(N){ae(this,oi,N)}z(this,oi)&&(b=z(this,oi),C=z(this,yo),_=Date.now(),k="error");const j=g.fetchStatus==="fetching",x=k==="pending",E=k==="error",A=x&&j,T=C!==void 0,O={status:k,fetchStatus:g.fetchStatus,isPending:x,isSuccess:k==="success",isError:E,isInitialLoading:A,isLoading:A,data:C,dataUpdatedAt:g.dataUpdatedAt,error:b,errorUpdatedAt:_,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:j,isRefetching:j&&!x,isLoadingError:E&&!T,isPaused:g.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:E&&T,isStale:em(e,n),refetch:this.refetch,promise:z(this,Lr),isEnabled:On(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const N=$=>{O.status==="error"?$.reject(O.error):O.data!==void 0&&$.resolve(O.data)},M=()=>{const $=ae(this,Lr,O.promise=kf());N($)},q=z(this,Lr);switch(q.status){case"pending":e.queryHash===r.queryHash&&N(q);break;case"fulfilled":(O.status==="error"||O.data!==q.value)&&M();break;case"rejected":(O.status!=="error"||O.error!==q.reason)&&M();break}}return O}updateResult(){const e=z(this,Qt),n=this.createResult(z(this,De),this.options);if(ae(this,os,z(this,De).state),ae(this,vo,this.options),z(this,os).data!==void 0&&ae(this,_o,z(this,De)),wf(n,e))return;ae(this,Qt,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!z(this,xo).size)return!0;const c=new Set(a??z(this,xo));return this.options.throwOnError&&c.add("error"),Object.keys(z(this,Qt)).some(d=>{const h=d;return z(this,Qt)[h]!==e[h]&&c.has(h)})};Me(this,qe,ex).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Me(this,qe,Tf).call(this)}},ln=new WeakMap,De=new WeakMap,ll=new WeakMap,Qt=new WeakMap,os=new WeakMap,vo=new WeakMap,Lr=new WeakMap,oi=new WeakMap,cl=new WeakMap,yo=new WeakMap,_o=new WeakMap,as=new WeakMap,ls=new WeakMap,ai=new WeakMap,xo=new WeakMap,qe=new WeakSet,ba=function(e){Me(this,qe,Nf).call(this);let n=z(this,De).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(cn)),n},Cf=function(){Me(this,qe,Lf).call(this);const e=Si(this.options.staleTime,z(this,De));if(ys||z(this,Qt).isStale||!xf(e))return;const r=G1(z(this,Qt).dataUpdatedAt,e)+1;ae(this,as,Xi.setTimeout(()=>{z(this,Qt).isStale||this.updateResult()},r))},Pf=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(z(this,De)):this.options.refetchInterval)??!1},Ef=function(e){Me(this,qe,Of).call(this),ae(this,ai,e),!(ys||On(this.options.enabled,z(this,De))===!1||!xf(z(this,ai))||z(this,ai)===0)&&ae(this,ls,Xi.setInterval(()=>{(this.options.refetchIntervalInBackground||Xp.isFocused())&&Me(this,qe,ba).call(this)},z(this,ai)))},Tf=function(){Me(this,qe,Cf).call(this),Me(this,qe,Ef).call(this,Me(this,qe,Pf).call(this))},Lf=function(){z(this,as)&&(Xi.clearTimeout(z(this,as)),ae(this,as,void 0))},Of=function(){z(this,ls)&&(Xi.clearInterval(z(this,ls)),ae(this,ls,void 0))},Nf=function(){const e=z(this,ln).getQueryCache().build(z(this,ln),this.options);if(e===z(this,De))return;const n=z(this,De);ae(this,De,e),ae(this,ll,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},ex=function(e){zt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(z(this,Qt))}),z(this,ln).getQueryCache().notify({query:z(this,De),type:"observerResultsUpdated"})})},D0);function s4(t,e){return On(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function n0(t,e){return s4(t,e)||t.state.data!==void 0&&Rf(t,e,e.refetchOnMount)}function Rf(t,e,n){if(On(e.enabled,t)!==!1&&Si(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&em(t,e)}return!1}function r0(t,e,n,r){return(t!==e||On(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&em(t,n)}function em(t,e){return On(e.enabled,t)!==!1&&t.isStaleByTime(Si(e.staleTime,t))}function o4(t,e){return!wf(t.getCurrentResult(),e)}function i0(t){return{onFetch:(e,n)=>{var m,g,w,C,b;const r=e.options,s=(w=(g=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:g.fetchMore)==null?void 0:w.direction,a=((C=e.state.data)==null?void 0:C.pages)||[],c=((b=e.state.data)==null?void 0:b.pageParams)||[];let d={pages:[],pageParams:[]},h=0;const f=async()=>{let _=!1;const k=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},y=K1(e.options,e.fetchOptions),j=async(x,E,A)=>{if(_)return Promise.reject();if(E==null&&x.pages.length)return Promise.resolve(x);const B=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:E,direction:A?"backward":"forward",meta:e.options.meta};return k(M),M})(),O=await y(B),{maxPages:R}=e.options,N=A?YT:KT;return{pages:N(x.pages,O,R),pageParams:N(x.pageParams,E,R)}};if(s&&a.length){const x=s==="backward",E=x?a4:s0,A={pages:a,pageParams:c},T=E(r,A);d=await j(A,T,x)}else{const x=t??a.length;do{const E=h===0?c[0]??r.initialPageParam:s0(r,d);if(h>0&&E==null)break;d=await j(d,E),h++}while(h<x)}return d};e.options.persister?e.fetchFn=()=>{var _,k;return(k=(_=e.options).persister)==null?void 0:k.call(_,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function s0(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function a4(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ul,pr,Xt,cs,mr,Jr,z0,l4=(z0=class extends Q1{constructor(e){super();be(this,mr);be(this,ul);be(this,pr);be(this,Xt);be(this,cs);ae(this,ul,e.client),this.mutationId=e.mutationId,ae(this,Xt,e.mutationCache),ae(this,pr,[]),this.state=e.state||c4(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){z(this,pr).includes(e)||(z(this,pr).push(e),this.clearGcTimeout(),z(this,Xt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ae(this,pr,z(this,pr).filter(n=>n!==e)),this.scheduleGc(),z(this,Xt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){z(this,pr).length||(this.state.status==="pending"?this.scheduleGc():z(this,Xt).remove(this))}continue(){var e;return((e=z(this,cs))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var c,d,h,f,m,g,w,C,b,_,k,y,j,x,E,A,T,B,O,R;const n=()=>{Me(this,mr,Jr).call(this,{type:"continue"})},r={client:z(this,ul),meta:this.options.meta,mutationKey:this.options.mutationKey};ae(this,cs,J1({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(N,M)=>{Me(this,mr,Jr).call(this,{type:"failed",failureCount:N,error:M})},onPause:()=>{Me(this,mr,Jr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,Xt).canRun(this)}));const s=this.state.status==="pending",a=!z(this,cs).canStart();try{if(s)n();else{Me(this,mr,Jr).call(this,{type:"pending",variables:e,isPaused:a}),await((d=(c=z(this,Xt).config).onMutate)==null?void 0:d.call(c,e,this,r));const M=await((f=(h=this.options).onMutate)==null?void 0:f.call(h,e,r));M!==this.state.context&&Me(this,mr,Jr).call(this,{type:"pending",context:M,variables:e,isPaused:a})}const N=await z(this,cs).start();return await((g=(m=z(this,Xt).config).onSuccess)==null?void 0:g.call(m,N,e,this.state.context,this,r)),await((C=(w=this.options).onSuccess)==null?void 0:C.call(w,N,e,this.state.context,r)),await((_=(b=z(this,Xt).config).onSettled)==null?void 0:_.call(b,N,null,this.state.variables,this.state.context,this,r)),await((y=(k=this.options).onSettled)==null?void 0:y.call(k,N,null,e,this.state.context,r)),Me(this,mr,Jr).call(this,{type:"success",data:N}),N}catch(N){try{throw await((x=(j=z(this,Xt).config).onError)==null?void 0:x.call(j,N,e,this.state.context,this,r)),await((A=(E=this.options).onError)==null?void 0:A.call(E,N,e,this.state.context,r)),await((B=(T=z(this,Xt).config).onSettled)==null?void 0:B.call(T,void 0,N,this.state.variables,this.state.context,this,r)),await((R=(O=this.options).onSettled)==null?void 0:R.call(O,void 0,N,e,this.state.context,r)),N}finally{Me(this,mr,Jr).call(this,{type:"error",error:N})}}finally{z(this,Xt).runNext(this)}}},ul=new WeakMap,pr=new WeakMap,Xt=new WeakMap,cs=new WeakMap,mr=new WeakSet,Jr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),zt.batch(()=>{z(this,pr).forEach(r=>{r.onMutationUpdate(e)}),z(this,Xt).notify({mutation:this,type:"updated",action:e})})},z0);function c4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Or,Kn,dl,B0,u4=(B0=class extends wl{constructor(e={}){super();be(this,Or);be(this,Kn);be(this,dl);this.config=e,ae(this,Or,new Set),ae(this,Kn,new Map),ae(this,dl,0)}build(e,n,r){const s=new l4({client:e,mutationCache:this,mutationId:++Gl(this,dl)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){z(this,Or).add(e);const n=pc(e);if(typeof n=="string"){const r=z(this,Kn).get(n);r?r.push(e):z(this,Kn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,Or).delete(e)){const n=pc(e);if(typeof n=="string"){const r=z(this,Kn).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&z(this,Kn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=pc(e);if(typeof n=="string"){const r=z(this,Kn).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=pc(e);if(typeof n=="string"){const s=(r=z(this,Kn).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){zt.batch(()=>{z(this,Or).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,Or).clear(),z(this,Kn).clear()})}getAll(){return Array.from(z(this,Or))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Qv(n,r))}findAll(e={}){return this.getAll().filter(n=>Qv(e,n))}notify(e){zt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return zt.batch(()=>Promise.all(e.map(n=>n.continue().catch(cn))))}},Or=new WeakMap,Kn=new WeakMap,dl=new WeakMap,B0);function pc(t){var e;return(e=t.options.scope)==null?void 0:e.id}var gr,$0,d4=($0=class extends wl{constructor(e={}){super();be(this,gr);this.config=e,ae(this,gr,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Jp(s,n);let c=this.get(a);return c||(c=new r4({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){z(this,gr).has(e.queryHash)||(z(this,gr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=z(this,gr).get(e.queryHash);n&&(e.destroy(),n===e&&z(this,gr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){zt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,gr).get(e)}getAll(){return[...z(this,gr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Jv(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Jv(e,r)):n}notify(e){zt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){zt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){zt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gr=new WeakMap,$0),ut,li,ci,wo,bo,ui,jo,ko,F0,h4=(F0=class{constructor(t={}){be(this,ut);be(this,li);be(this,ci);be(this,wo);be(this,bo);be(this,ui);be(this,jo);be(this,ko);ae(this,ut,t.queryCache||new d4),ae(this,li,t.mutationCache||new u4),ae(this,ci,t.defaultOptions||{}),ae(this,wo,new Map),ae(this,bo,new Map),ae(this,ui,0)}mount(){Gl(this,ui)._++,z(this,ui)===1&&(ae(this,jo,Xp.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,ut).onFocus())})),ae(this,ko,du.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,ut).onOnline())})))}unmount(){var t,e;Gl(this,ui)._--,z(this,ui)===0&&((t=z(this,jo))==null||t.call(this),ae(this,jo,void 0),(e=z(this,ko))==null||e.call(this),ae(this,ko,void 0))}isFetching(t){return z(this,ut).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,li).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,ut).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=z(this,ut).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Si(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return z(this,ut).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=z(this,ut).get(r.queryHash),a=s==null?void 0:s.state.data,c=qT(e,a);if(c!==void 0)return z(this,ut).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return zt.batch(()=>z(this,ut).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,ut).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=z(this,ut);zt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=z(this,ut);return zt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=zt.batch(()=>z(this,ut).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(cn).catch(cn)}invalidateQueries(t,e={}){return zt.batch(()=>(z(this,ut).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=zt.batch(()=>z(this,ut).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(cn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(cn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=z(this,ut).build(this,e);return n.isStaleByTime(Si(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(cn).catch(cn)}fetchInfiniteQuery(t){return t.behavior=i0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(cn).catch(cn)}ensureInfiniteQueryData(t){return t.behavior=i0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return du.isOnline()?z(this,li).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,ut)}getMutationCache(){return z(this,li)}getDefaultOptions(){return z(this,ci)}setDefaultOptions(t){ae(this,ci,t)}setQueryDefaults(t,e){z(this,wo).set(rl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,wo).values()],n={};return e.forEach(r=>{il(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){z(this,bo).set(rl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,bo).values()],n={};return e.forEach(r=>{il(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,ci).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Jp(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Qp&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,ci).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,ut).clear(),z(this,li).clear()}},ut=new WeakMap,li=new WeakMap,ci=new WeakMap,wo=new WeakMap,bo=new WeakMap,ui=new WeakMap,jo=new WeakMap,ko=new WeakMap,F0),tx=S.createContext(void 0),f4=t=>{const e=S.useContext(tx);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},p4=({client:t,children:e})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(tx.Provider,{value:t,children:e})),nx=S.createContext(!1),m4=()=>S.useContext(nx);nx.Provider;function g4(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var v4=S.createContext(g4()),y4=()=>S.useContext(v4),_4=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},x4=t=>{S.useEffect(()=>{t.clearReset()},[t])},w4=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||JT(n,[t.error,r])),b4=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},j4=(t,e)=>t.isLoading&&t.isFetching&&!e,k4=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,o0=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function S4(t,e,n){var g,w,C,b,_;const r=m4(),s=y4(),a=f4(),c=a.defaultQueryOptions(t);(w=(g=a.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||w.call(g,c),c._optimisticResults=r?"isRestoring":"optimistic",b4(c),_4(c,s),x4(s);const d=!a.getQueryCache().get(c.queryHash),[h]=S.useState(()=>new e(a,c)),f=h.getOptimisticResult(c),m=!r&&t.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(k=>{const y=m?h.subscribe(zt.batchCalls(k)):cn;return h.updateResult(),y},[h,m]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),S.useEffect(()=>{h.setOptions(c)},[c,h]),k4(c,f))throw o0(c,h,s);if(w4({result:f,errorResetBoundary:s,throwOnError:c.throwOnError,query:a.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;if((b=(C=a.getDefaultOptions().queries)==null?void 0:C._experimental_afterQuery)==null||b.call(C,c,f),c.experimental_prefetchInRender&&!ys&&j4(f,r)){const k=d?o0(c,h,s):(_=a.getQueryCache().get(c.queryHash))==null?void 0:_.promise;k==null||k.catch(cn).finally(()=>{h.updateResult()})}return c.notifyOnChangeProps?f:h.trackResult(f)}function Du(t,e){return S4(t,i4)}const C4=new h4({defaultOptions:{queries:{staleTime:5*60*1e3,cacheTime:10*60*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!1,retry:2,retryDelay:t=>Math.min(1e3*2**t,3e4),suspense:!1,useErrorBoundary:!1,networkMode:"online"},mutations:{retry:1,networkMode:"online"}}}),Nr={drivers:{all:["drivers"]},deliveries:{all:["deliveries"],byMonth:(t,e)=>[...Nr.deliveries.all,"month",t,e],byYear:t=>[...Nr.deliveries.all,"year",t],byDriver:(t,e,n)=>[...Nr.deliveries.all,"driver",t,e,n],stats:(t,e)=>[...Nr.deliveries.all,"stats",t,e]},holidays:{all:["holidays"],byYear:t=>[...Nr.holidays.all,"year",t]}};function rx(t={}){return Du({queryKey:Nr.drivers.all,queryFn:async()=>{const{data:e,error:n}=await ye.from("drivers").select("*").order("tura",{ascending:!0});if(n)throw n;return e||[]},staleTime:10*60*1e3,...t})}function P4(t,e,n={}){return Du({queryKey:Nr.deliveries.byMonth(t,e),queryFn:()=>f5(t,e),staleTime:3*60*1e3,enabled:t!==void 0&&e!==void 0,...n})}function E4(t,e,n,r={}){return Du({queryKey:Nr.deliveries.byDriver(t,e,n),queryFn:async()=>{const s=new Date(e,n,1),a=new Date(e,n+1,0),c=s.toISOString().split("T")[0],d=a.toISOString().split("T")[0],{data:h,error:f}=await ye.from("deliveries").select("*").eq("driver",t).gte("date",c).lte("date",d).order("date",{ascending:!0});if(f)throw f;return h||[]},enabled:!!t&&e!==void 0&&n!==void 0,staleTime:3*60*1e3,...r})}function ix(t,e={}){return Du({queryKey:Nr.holidays.byYear(t),queryFn:()=>u5(t),staleTime:30*60*1e3,enabled:t!==void 0,...e})}const T4=new Date().getFullYear(),L4=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function O4(){const[t,e]=S.useState(T4),[n,r]=S.useState(new Date().getMonth()),[s,a]=S.useState(!1),[c,d]=S.useState({lastSync:null,unsyncedCount:0}),{data:h=[],isLoading:f}=rx(),{data:m=[],isLoading:g}=P4(t,n),{data:w=[]}=ix(t),C=g||f,b=S.useMemo(()=>{const T={};return m.forEach(B=>{T[B.date]||(T[B.date]={}),T[B.date][B.driver]=B.produktivitaet_stops||0}),T},[m]),_=W1(t,n,w.map(T=>T.date)),k=S.useMemo(()=>{const T=_.length,B=new Set;return m.forEach(O=>{O.produktivitaet_stops>0&&B.add(O.date)}),{totalWorkdays:T,drivers:h.length,remainingDays:Math.max(0,T-B.size)}},[_,m,h]),[y,j]=S.useState(()=>{const T=localStorage.getItem("monthlyPerformance");return T?JSON.parse(T):{}}),[x,E]=S.useState(!1);S.useEffect(()=>{const T=()=>{if(x)return;E(!0);const O={0:{value:6322,change:22},1:{value:5874,change:-126},2:{value:6304,change:304},3:{value:6178,change:-122},4:{value:5876,change:-124},5:{value:5491,change:-209},6:{value:6372,change:-528},7:{value:5586,change:-414},8:{value:6214,change:-386},9:{value:831,change:-6069}},R=new Date().getMonth(),N={};Object.keys(O).forEach(M=>{const q=parseInt(M);q<=R&&(N[q]=O[q])}),localStorage.setItem("monthlyPerformance",JSON.stringify(N)),j(N),E(!1)};Object.keys(y).length===0&&!x&&T();const B=localStorage.getItem("monthlyPerformanceYear");B&&parseInt(B)!==t?(localStorage.removeItem("monthlyPerformance"),localStorage.setItem("monthlyPerformanceYear",t.toString()),T()):B||localStorage.setItem("monthlyPerformanceYear",t.toString())},[t]);const A=async()=>{if(x)return;E(!0);const T={},B=new Date().getMonth(),O=n;for(let R=0;R<=B;R++)try{R!==n&&(r(R),await new Promise(M=>setTimeout(M,800)));const N=document.querySelector("tr._footerRow_j95of_829");if(N){const M=N.querySelectorAll("td");if(M[5]){const q=M[5].querySelector("strong"),$=M[5].querySelector('div[style*="font-size: 0.75rem"]');if(q&&$){const Z=parseInt(q.textContent),W=$.textContent.match(/\(([+-]?\d+)\)/),G=W?parseInt(W[1]):0;Z>0&&(T[R]={value:Z,change:G})}}}}catch(N){console.error(`Error reading month ${R}:`,N)}r(O),localStorage.setItem("monthlyPerformance",JSON.stringify(T)),j(T),E(!1)};return o.jsx("div",{className:de.deliveriesScreen,children:o.jsxs("div",{className:de.mainGrid,children:[o.jsx(Kp,{className:de.closeButton}),o.jsxs("div",{className:de.headerCard,children:[o.jsx("div",{className:de.heroSection,children:o.jsxs("h1",{className:de.heroTitle,children:["Pregled rezultata po Mjesecu",o.jsx("button",{onClick:A,disabled:x,className:de.refreshButton,title:"itaj realne podatke iz tabele",children:x?"":""})]})}),o.jsxs("div",{className:de.statsGrid,children:[o.jsxs("div",{className:de.statCard,children:[o.jsx("div",{className:de.statIcon,children:o.jsx(Ro,{size:22})}),o.jsx("div",{className:de.statValue,children:k.drivers}),o.jsx("div",{className:de.statLabel,children:"Vozaa"})]}),o.jsxs("div",{className:`${de.statCard} ${de.dateCard}`,children:[o.jsx("div",{className:de.statIcon,children:o.jsx(ki,{size:22})}),o.jsx("div",{className:de.statValue,children:L4[n]}),o.jsx("div",{className:de.statLabel,children:t}),o.jsx(Yp,{month:n,year:t,onMonthChange:r,onYearChange:e,monthlyPerformance:y,isLoadingPerformance:x,className:de.monthYearPicker})]}),o.jsxs("div",{className:de.statCard,children:[o.jsx("div",{className:de.statIcon,children:o.jsx(ki,{size:22})}),o.jsx("div",{className:de.statValue,children:k.totalWorkdays}),o.jsx("div",{className:de.statLabel,children:"Radnih dana"})]}),o.jsxs("div",{className:de.statCard,children:[o.jsx("div",{className:de.statIcon,children:o.jsx(fE,{size:22})}),o.jsx("div",{className:de.statValue,children:k.remainingDays}),o.jsx("div",{className:de.statLabel,children:"Preostalo"})]})]})]}),o.jsx(V1,{syncStatus:c}),C?o.jsx("div",{className:de.loadingContainer,children:[...Array(8)].map((T,B)=>o.jsx(H1,{width:80,height:32},B))}):_.length===0?o.jsx("div",{className:de.emptyState,children:"Nema radnih dana"}):o.jsxs("div",{className:de.dataCard,children:[o.jsx("div",{className:de.mobileCards,children:_.filter(T=>b[ht(T,"yyyy-MM-dd")]).map(T=>{const B=ht(T,"yyyy-MM-dd"),O=b[B]||{},R=h.filter(q=>q.aktivan).reduce((q,$)=>q+(O[$.tura]||0),0),N=w.some(q=>q.date===B),M=R>=300?"totalHigh":R>0?"totalLow":"";return o.jsxs("div",{className:`${de.dayCard} ${N?de.holiday:""} ${M?de[M]:""}`,children:[o.jsxs("div",{className:de.dayCardHeader,children:[o.jsx(ki,{size:20})," ",ht(T,"dd.MM.yyyy")]}),o.jsxs("div",{className:de.dayCardBody,children:[h.filter(q=>q.aktivan).map(q=>{const $=O[q.tura],Z=$>=(q.target_per_day||0)?"success":$>0?"warning":"empty";return o.jsxs("div",{className:`${de.driverRow} ${de[Z]}`,children:[o.jsxs("div",{className:de.driverInfo,children:[o.jsxs("div",{className:de.driverName,children:[" ",q.ime]}),o.jsx("div",{className:de.driverTura,children:q.tura})]}),o.jsx("span",{className:de.driverValue,children:$??""})]},q.tura)}),o.jsxs("div",{className:`${de.dayTotal} ${M?de[`dayTotal${M.charAt(0).toUpperCase()}${M.slice(1)}`]:""}`,children:["Ukupno: ",R||""]})]})]},B)})}),o.jsx("div",{className:de.tableWrapper,children:o.jsxs("table",{className:de.table,children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Datum"}),h.filter(T=>T.aktivan).map(T=>o.jsx("th",{children:o.jsxs("div",{className:de.tableDriverHeader,children:[o.jsx("div",{className:de.tableDriverName,children:T.ime}),o.jsx("div",{className:de.tableDriverTura,children:T.tura})]})},T.tura)),o.jsx("th",{children:"Ukupno"})]})}),o.jsx("tbody",{children:Object.keys(b).sort((T,B)=>new Date(T)-new Date(B)).map(T=>{const B=b[T]||{},O=h.filter(N=>N.aktivan).reduce((N,M)=>N+(B[M.tura]||0),0),R=w.some(N=>N.date===T);return o.jsxs("tr",{className:R?de.holidayRow:"",children:[o.jsx("td",{children:ht(new Date(T),"dd.MM.")}),h.filter(N=>N.aktivan).map(N=>{const M=B[N.tura],q=M>=(N.target_per_day||0)?"cellSuccess":M>0?"cellWarning":"cellEmpty";return o.jsx("td",{className:de[q],children:M??""},N.tura)}),o.jsx("td",{className:de[O>=300?"cellSuccess":O>0?"cellWarning":"cellEmpty"],children:O||""})]},T)})}),o.jsx("tfoot",{children:o.jsxs("tr",{className:de.footerRow,children:[o.jsx("td",{className:de.footerCell,children:o.jsx("strong",{children:"Ukupno"})}),h.filter(T=>T.aktivan).map(T=>{const B=_.filter(q=>{const $=ht(q,"yyyy-MM-dd");return(b[$]||{})[T.tura]>0}),O=B.reduce((q,$)=>{const Z=ht($,"yyyy-MM-dd"),W=b[Z]||{};return q+(W[T.tura]||0)},0),R=(T.target_per_day||0)*_.length,N=O-R,M=N>=0?de.bilansSuccess:de.bilansWarning;return o.jsxs("td",{className:de.footerCell,children:[o.jsx("div",{className:B.length>0&&O>=(T.target_per_day||0)*B.length?de.bilansSuccess:de.bilansWarning,children:o.jsx("strong",{children:O})}),o.jsxs("div",{style:{fontSize:"0.75rem",marginTop:"2px"},className:M,children:["(",N>0?`+${N}`:N,")"]})]},T.tura)}),o.jsx("td",{className:`${de.footerCell} ${(()=>{const T=_.reduce((N,M)=>{const q=ht(M,"yyyy-MM-dd"),$=b[q]||{};return N+h.filter(Z=>Z.aktivan).reduce((Z,W)=>Z+($[W.tura]||0),0)},0),B=_.length,O=h.filter(N=>N.aktivan).reduce((N,M)=>N+(M.target_per_day||0)*B,0);return T-O>=0?de.cellSuccess:de.cellWarning})()}`,children:(()=>{const T=_.reduce((N,M)=>{const q=ht(M,"yyyy-MM-dd"),$=b[q]||{};return N+h.filter(Z=>Z.aktivan).reduce((Z,W)=>Z+($[W.tura]||0),0)},0),B=_.length,O=h.filter(N=>N.aktivan).reduce((N,M)=>N+(M.target_per_day||0)*B,0),R=T-O;return o.jsxs("div",{children:[o.jsx("strong",{children:T}),o.jsxs("div",{style:{fontSize:"0.75rem",marginTop:"2px"},children:["(",R>0?`+${R}`:R,")"]})]})})()})]})})]})})]}),s&&o.jsx(q1,{onClose:()=>a(!1),children:o.jsxs("div",{className:"deliveries-modal-form",children:[o.jsx("h2",{children:"Nova dostava"}),o.jsx("button",{onClick:()=>a(!1),children:"Zatvori"})]})})]})})}const N4="_driversScreen_suf66_4",R4="_mainGrid_suf66_41",I4="_closeButton_suf66_52",M4="_headerCard_suf66_74",A4="_heroSection_suf66_86",D4="_heroTitle_suf66_95",z4="_statsGrid_suf66_103",B4="_statCard_suf66_109",$4="_statIcon_suf66_125",F4="_statValue_suf66_132",U4="_statLabel_suf66_139",W4="_monthYearPicker_suf66_146",H4="_monthSelect_suf66_157",V4="_yearSelect_suf66_158",q4="_driverSelect_suf66_159",G4="_dataCard_suf66_202",Z4="_mobileCards_suf66_213",K4="_dayCard_suf66_219",Y4="_holiday_suf66_227",J4="_excellent_suf66_233",Q4="_good_suf66_239",X4="_poor_suf66_245",eL="_complaints_suf66_251",tL="_empty_suf66_269",nL="_dayCardHeader_suf66_275",rL="_dayStats_suf66_287",iL="_dayStat_suf66_287",sL="_tableWrapper_suf66_313",oL="_table_suf66_313",aL="_cellSuccess_suf66_350",lL="_cellWarning_suf66_356",cL="_cellEmpty_suf66_362",uL="_holidayRow_suf66_367",dL="_tableFooter_suf66_372",hL="_footerRow_suf66_380",fL="_footerCell_suf66_385",pL="_loadingContainer_suf66_414",mL="_emptyState_suf66_424",gL="_driverCard_suf66_474",vL="_dateCard_suf66_475",yL="_driverPicker_suf66_547",_L="_strongPulse_suf66_1",xL="_strongBounce_suf66_1",le={driversScreen:N4,mainGrid:R4,closeButton:I4,headerCard:M4,heroSection:A4,heroTitle:D4,statsGrid:z4,statCard:B4,statIcon:$4,statValue:F4,statLabel:U4,monthYearPicker:W4,monthSelect:H4,yearSelect:V4,driverSelect:q4,dataCard:G4,mobileCards:Z4,dayCard:K4,holiday:Y4,excellent:J4,good:Q4,poor:X4,complaints:eL,"complaint-pulse":"_complaint-pulse_suf66_1",empty:tL,dayCardHeader:nL,dayStats:rL,dayStat:iL,tableWrapper:sL,table:oL,cellSuccess:aL,cellWarning:lL,cellEmpty:cL,holidayRow:uL,tableFooter:dL,footerRow:hL,footerCell:fL,loadingContainer:pL,emptyState:mL,driverCard:gL,dateCard:vL,driverPicker:yL,strongPulse:_L,strongBounce:xL},wL="_modalOverlay_165af_4",bL="_modalContent_165af_33",jL="_header_165af_76",kL="_title_165af_96",SL="_closeButton_165af_107",CL="_driversGrid_165af_134",PL="_driverButton_165af_162",EL="_selected_165af_209",TL="_driverInfo_165af_222",LL="_driverName_165af_228",OL="_driverTura_165af_236",Vn={modalOverlay:wL,modalContent:bL,header:jL,title:kL,closeButton:SL,driversGrid:CL,driverButton:PL,selected:EL,driverInfo:TL,driverName:LL,driverTura:OL},sx=({selectedDriver:t,onDriverChange:e,drivers:n=[],onClose:r,className:s=""})=>{const a=S.useRef(null),c=f=>{e(f),setTimeout(()=>{r&&typeof r=="function"&&r()},10)},d=n.filter(f=>f.aktivan||f.tura==="ALL"),h=o.jsx("div",{className:Vn.modalOverlay,onClick:f=>{f.target===f.currentTarget&&(f.stopPropagation(),r&&typeof r=="function"&&r())},children:o.jsxs("div",{className:Vn.modalContent,ref:a,children:[o.jsxs("div",{className:Vn.header,children:[o.jsx("h3",{className:Vn.title,children:"Izaberite vozaa"}),o.jsx("button",{className:Vn.closeButton,onClick:f=>{f.stopPropagation(),r&&typeof r=="function"&&r()},children:""})]}),o.jsx("div",{className:Vn.driversGrid,children:d.map(f=>o.jsx("button",{className:`${Vn.driverButton} ${f.ime===t?Vn.selected:""}`,onClick:()=>c(f.ime),type:"button",children:o.jsxs("div",{className:Vn.driverInfo,children:[o.jsx("div",{className:Vn.driverName,children:f.tura==="ALL"?"Svi vozai":f.ime}),o.jsx("div",{className:Vn.driverTura,children:f.tura==="ALL"?"Prikai sve":`Tura ${f.tura}`})]})},f.tura))})]})});return Tu.createPortal(h,document.body)},NL=new Date().getFullYear(),RL=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function IL(){const[t,e]=S.useState(NL),[n,r]=S.useState(new Date().getMonth()),[s,a]=S.useState(""),[c,d]=S.useState(!1),[h,f]=S.useState({lastSync:null,unsyncedCount:0}),[m,g]=S.useState(!0);S.useEffect(()=>{const R=setInterval(()=>{g(N=>!N)},400);return()=>clearInterval(R)},[]);const{driverName:w}=Lk(),{data:C=[],isLoading:b}=rx(),{data:_=[]}=ix(t);S.useEffect(()=>{if(C.length>0&&!s){const R=w?C.find(N=>N.ime===w):C.find(N=>N.aktivan);R&&a(R.ime)}},[C,w,s]);const k=S.useMemo(()=>C.find(R=>R.ime===s),[C,s]),{data:y=[],isLoading:j}=E4(k==null?void 0:k.tura,t,n,{enabled:!!k}),x=j||b,E=W1(t,n,_.map(R=>R.date)),A=S.useMemo(()=>{if(!y.length)return[];const R=M=>{if(!M)return 0;const q=M.toString().replace("%","").replace(",",".").trim();return parseFloat(q)||0},N={};return y.forEach(M=>{const q=new Date(M.date),$=q.getMonth();if(q.getFullYear()!==t||$!==n)return;const W=M.date;N[W]||(N[W]={date:W,stops:0,packages:0,pickupPackages:0,complaints:0,totalTime:0,realPercentage:R(M.zustellung_proc),undelivered:parseInt(M.zustellung_nedostavljeno)||0,pickupPercentage:R(M.pickup_proc),pickupUndelivered:parseInt(M.pickup_nedostavljeno)||0,firstComplaints:parseInt(M.probleme_prva)||0,secondComplaints:parseInt(M.probleme_druga)||0,stopsPerHourRaw:M.produktivitaet_stops_pro_std||"0"}),N[W].stops+=M.produktivitaet_stops||0,N[W].packages+=M.zustellung_paketi||0,N[W].pickupPackages+=parseInt(M.pickup_paketi)||0,N[W].complaints+=parseInt(M.probleme_druga)||0;const K=(M.produktivitaet_dauer||"0:00").split(":"),D=(parseInt(K[0])||0)*60+(parseInt(K[1])||0);N[W].totalTime+=D}),Object.values(N).map(M=>{const q=M.realPercentage>0?M.realPercentage:M.stops>0?M.packages/M.stops*100:0;return{...M,percentage:q,stopsPerHour:M.totalTime>0?M.stops/(M.totalTime/60):0,undelivered:M.undelivered,pickupPercentage:M.pickupPercentage,pickupUndelivered:M.pickupUndelivered,firstComplaints:M.firstComplaints,secondComplaints:M.secondComplaints,stopsPerHourRaw:M.stopsPerHourRaw}}).sort((M,q)=>new Date(M.date)-new Date(q.date))},[y,t,n]),T=S.useMemo(()=>{const R=E.length,N=A.filter(W=>W.stops>0).length,M=A.reduce((W,G)=>W+G.stops,0),q=A.reduce((W,G)=>W+G.packages,0),$=N>0?M/N:0,Z=N>0?q/N:0;return{totalWorkdays:R,daysWithData:N,avgPackagesPerDay:Math.round(Z),avgStopsPerDay:Math.round($)}},[E,A]),[B,O]=S.useState(()=>{const R=localStorage.getItem("monthlyPerformance");return R?JSON.parse(R):{}});return S.useEffect(()=>{const R=()=>{const N=new Date().getMonth(),M={0:{value:6322,change:22},1:{value:5874,change:-126},2:{value:6304,change:304},3:{value:6178,change:-122},4:{value:5876,change:-124},5:{value:5491,change:-209},6:{value:6372,change:-528},7:{value:5586,change:-414},8:{value:6214,change:-386},9:{value:831,change:-6069}},q={};Object.keys(M).forEach($=>{const Z=parseInt($);Z<=N&&(q[Z]=M[Z])}),O(q),localStorage.setItem("monthlyPerformance",JSON.stringify(q))};if(Object.keys(B).length===0){const N=setTimeout(R,500);return()=>clearTimeout(N)}},[t]),o.jsx("div",{className:le.driversScreen,children:o.jsxs("div",{className:le.mainGrid,children:[o.jsx(Kp,{className:le.closeButton}),o.jsxs("div",{className:le.headerCard,children:[o.jsx("div",{className:le.heroSection,children:o.jsx("h1",{className:le.heroTitle,children:"Pregled vozaa po Mjesecu"})}),o.jsxs("div",{className:le.statsGrid,children:[o.jsxs("div",{className:`${le.statCard} ${le.driverCard}`,onClick:()=>{d(!0)},children:[o.jsx("div",{className:le.statIcon,children:o.jsx(Ro,{size:22})}),o.jsx("div",{className:le.statValue,children:s||"Izaberite vozaa"}),o.jsx("div",{className:le.statLabel,children:(()=>{const R=C.find(N=>N.ime===s);return R?R.tura:"Voza"})()}),c&&o.jsx(sx,{selectedDriver:s,onDriverChange:a,drivers:C,onClose:()=>{d(!1)}},"driver-picker")]}),o.jsxs("div",{className:`${le.statCard} ${le.dateCard}`,children:[o.jsx("div",{className:le.statIcon,children:o.jsx(ki,{size:22})}),o.jsx("div",{className:le.statValue,children:RL[n]}),o.jsx("div",{className:le.statLabel,children:t}),o.jsx(Yp,{month:n,year:t,onMonthChange:r,onYearChange:e,monthlyPerformance:B,isLoadingPerformance:!1,className:le.monthYearPicker})]}),o.jsxs("div",{className:le.statCard,children:[o.jsx("div",{className:le.statIcon,children:o.jsx(Zp,{size:22})}),o.jsx("div",{className:le.statValue,children:T.avgStopsPerDay}),o.jsx("div",{className:le.statLabel,children:"Prosjek stopova"})]}),o.jsxs("div",{className:le.statCard,children:[o.jsx("div",{className:le.statIcon,children:o.jsx(pE,{size:22})}),o.jsx("div",{className:le.statValue,children:T.avgPackagesPerDay}),o.jsx("div",{className:le.statLabel,children:"Prosjek paketa"})]})]})]}),o.jsx(V1,{syncStatus:h}),s?x?o.jsx("div",{className:le.loadingContainer,children:[...Array(8)].map((R,N)=>o.jsx(H1,{width:80,height:32},N))}):E.length===0?o.jsx("div",{className:le.emptyState,children:"Nema radnih dana"}):o.jsxs("div",{className:le.dataCard,children:[o.jsx("div",{className:le.mobileCards,children:A.map(R=>{const N=new Date(R.date),M=_.some(G=>G.date===R.date),q=C.find(G=>G.ime===s),$=(q==null?void 0:q.target_per_day)||50,W=(()=>{if(R.secondComplaints>0)return"complaints";if(!R.stops||R.stops===0)return"empty";const K=R.stops/$*100;return K>=100?"excellent":K>=90?"good":"poor"})();return o.jsxs("div",{className:`${le.dayCard} ${M?le.holiday:""} ${le[W]}`,style:W==="complaints"?{boxShadow:m?"0 0 20px rgba(244, 67, 54, 0.6), inset 0 0 20px rgba(244, 67, 54, 0.1)":"0 0 10px rgba(244, 67, 54, 0.3)",borderColor:"#f44336",borderWidth:"2px",borderStyle:"solid",transition:"all 0.3s ease"}:{},children:[o.jsxs("div",{className:le.dayCardHeader,children:[o.jsx(ki,{size:20})," ",ht(N,"dd.MM.yyyy")]}),o.jsx("div",{className:le.dayCardBody,children:o.jsxs("div",{className:le.dayStats,children:[o.jsxs("div",{className:le.dayStat,children:[o.jsx("span",{children:"Stopovi"}),o.jsx("span",{children:R.stops||""})]}),o.jsxs("div",{className:le.dayStat,children:[o.jsx("span",{children:"Paketi"}),o.jsx("span",{children:R.packages||""})]}),o.jsxs("div",{className:le.dayStat,children:[o.jsx("span",{children:"Pickup"}),o.jsx("span",{children:R.pickupPackages||""})]}),o.jsxs("div",{className:le.dayStat,children:[o.jsx("span",{children:"Reklamacije"}),o.jsx("span",{style:R.secondComplaints>0?{color:"#f44336",fontWeight:"bold",backgroundColor:m?"rgba(244, 67, 54, 0.1)":"transparent",padding:"2px 6px",borderRadius:"4px",transition:"all 0.3s"}:{},children:R.secondComplaints||""})]}),o.jsxs("div",{className:le.dayStat,children:[o.jsx("span",{children:"Vreme"}),o.jsx("span",{children:R.totalTime?`${(R.totalTime/60).toFixed(1)}h`:""})]}),o.jsxs("div",{className:le.dayStat,children:[o.jsx("span",{children:"Efikasnost"}),o.jsx("span",{children:R.percentage?`${R.percentage.toFixed(1)}%`:""})]}),o.jsxs("div",{className:le.dayStat,children:[o.jsx("span",{children:"Stop/h"}),o.jsx("span",{children:R.stopsPerHour?R.stopsPerHour.toFixed(1):""})]})]})})]},R.date)})}),o.jsx("div",{className:le.tableWrapper,children:o.jsxs("table",{className:le.table,children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Datum"}),o.jsx("th",{children:"Stopovi"}),o.jsx("th",{children:"Paketi"}),o.jsx("th",{children:"Pickup"}),o.jsx("th",{children:"Reklamacije"}),o.jsx("th",{children:"Vreme (h)"}),o.jsx("th",{children:"Efikasnost"}),o.jsx("th",{children:"Stop/h"})]})}),o.jsx("tbody",{children:A.map(R=>{const N=new Date(R.date),M=_.some(q=>q.date===R.date);return o.jsxs("tr",{className:M?le.holidayRow:"",children:[o.jsx("td",{children:ht(N,"dd.MM.")}),o.jsx("td",{children:R.stops||""}),o.jsx("td",{children:R.packages||""}),o.jsx("td",{children:R.pickupPackages||""}),o.jsx("td",{className:R.secondComplaints>0?"":le.cellSuccess,style:R.secondComplaints>0?{backgroundColor:m?"#ffffff":"#f44336",color:m?"#f44336":"#ffffff",fontWeight:"900",fontSize:"1rem",textAlign:"center",transition:"all 0.3s",outline:m?"2px solid #f44336":"none",outlineOffset:"-2px"}:{},children:R.secondComplaints||""}),o.jsx("td",{children:R.totalTime?`${(R.totalTime/60).toFixed(1)}h`:""}),o.jsx("td",{className:R.percentage>=98?le.cellSuccess:le.cellWarning,children:R.percentage?`${R.percentage.toFixed(1)}%`:""}),o.jsx("td",{children:R.stopsPerHour?R.stopsPerHour.toFixed(1):""})]},R.date)})}),s&&A.length>0&&o.jsx("tfoot",{children:o.jsxs("tr",{className:le.footerRow,children:[o.jsx("td",{className:le.footerCell,children:o.jsx("strong",{children:"Ukupno"})}),o.jsx("td",{className:`${le.footerCell} ${(()=>{const R=C.find(Z=>Z.ime===s),N=(R==null?void 0:R.target_per_day)||0,M=A.reduce((Z,W)=>Z+(W.stops||0),0),q=A.length;return M-q*N>=0?le.cellSuccess:le.cellWarning})()}`,children:o.jsx("strong",{children:(()=>{const R=C.find(Z=>Z.ime===s),N=(R==null?void 0:R.target_per_day)||0,M=A.reduce((Z,W)=>Z+(W.stops||0),0),q=A.length,$=M-q*N;return $>0?`+${$}`:$})()})}),o.jsx("td",{className:`${le.footerCell} ${le.cellSuccess}`,children:o.jsx("strong",{children:A.reduce((R,N)=>R+(N.packages||0),0)})}),o.jsx("td",{className:`${le.footerCell} ${le.cellSuccess}`,children:o.jsx("strong",{children:A.reduce((R,N)=>R+(N.pickupPackages||0),0)})}),o.jsx("td",{className:`${le.footerCell} ${A.reduce((N,M)=>N+(M.secondComplaints||0),0)===0?le.cellSuccess:""}`,style:A.reduce((N,M)=>N+(M.secondComplaints||0),0)>0?{backgroundColor:m?"#ffffff":"#f44336",color:m?"#f44336":"#ffffff",fontWeight:"900",fontSize:"0.9rem",textAlign:"center",transition:"all 0.3s",borderRadius:"8px",outline:m?"2px solid #f44336":"none",outlineOffset:"-2px"}:{},children:o.jsx("strong",{children:A.reduce((R,N)=>R+(N.secondComplaints||0),0)})}),o.jsx("td",{className:`${le.footerCell} ${le.cellSuccess}`,children:o.jsx("strong",{children:(()=>{const R=A.reduce((N,M)=>N+(M.totalTime||0),0);return R?`${(R/60).toFixed(1)}h`:""})()})}),o.jsx("td",{className:`${le.footerCell} ${le.cellSuccess}`,children:o.jsx("strong",{children:(()=>{const R=A.filter(M=>M.percentage&&M.percentage>0),N=R.length>0?R.reduce((M,q)=>M+q.percentage,0)/R.length:0;return N>0?`${N.toFixed(1)}%`:""})()})}),o.jsx("td",{className:`${le.footerCell} ${le.cellSuccess}`,children:o.jsx("strong",{children:(()=>{const R=A.filter(M=>M.stopsPerHour&&M.stopsPerHour>0),N=R.length>0?(R.reduce((M,q)=>M+q.stopsPerHour,0)/R.length).toFixed(1):"";return N!=="NaN"?N:""})()})})]})})]})})]}):o.jsxs("div",{className:le.emptyState,children:[o.jsx(Ro,{size:48}),o.jsx("h3",{children:"Izaberite vozaa da vidite statistiku"}),o.jsx("p",{children:"Odaberite vozaa iz dropdown liste da vidite detaljnu statistiku njihovih performansi."})]})]})})}const ML="_extraRidesScreen_16fvq_4",AL="_mainGrid_16fvq_41",DL="_headerCard_16fvq_52",zL="_heroSection_16fvq_64",BL="_heroTitle_16fvq_73",$L="_statsGrid_16fvq_115",FL="_statCard_16fvq_121",UL="_statIcon_16fvq_150",WL="_statValue_16fvq_157",HL="_statLabel_16fvq_164",VL="_controlsCard_16fvq_173",qL="_filtersContainer_16fvq_186",GL="_filtersRow_16fvq_216",ZL="_filterHeader_16fvq_223",KL="_filterTitle_16fvq_228",YL="_filterGroup_16fvq_244",JL="_filterLabel_16fvq_250",QL="_monthYearDisplay_16fvq_362",XL="_driverDisplay_16fvq_363",eO="_formRowTwo_16fvq_373",tO="_formInput_16fvq_377",nO="_monthYearPickerWrapper_16fvq_385",rO="_monthYearPicker_16fvq_385",iO="_driverPickerWrapper_16fvq_427",sO="_formContainer_16fvq_460",oO="_formRowSingle_16fvq_489",aO="_priceLabel_16fvq_546",lO="_priceAmount_16fvq_558",cO="_submitButton_16fvq_564",uO="_dataCard_16fvq_588",dO="_tableWrapper_16fvq_597",hO="_ridesGrid_16fvq_603",fO="_rideCard_16fvq_610",pO="_cardHeader_16fvq_645",mO="_cardDate_16fvq_652",gO="_statusBadgePending_16fvq_665",vO="_statusBadgeApproved_16fvq_678",yO="_statusBadgeRejected_16fvq_691",_O="_cardPrice_16fvq_704",xO="_cardInfo_16fvq_727",wO="_infoRowTop_16fvq_731",bO="_infoRowBottom_16fvq_732",jO="_infoItem_16fvq_742",kO="_statusPending_16fvq_836",SO="_statusApproved_16fvq_846",CO="_statusRejected_16fvq_856",PO="_loadingContainer_16fvq_1069",EO="_emptyState_16fvq_1082",re={extraRidesScreen:ML,mainGrid:AL,headerCard:DL,heroSection:zL,heroTitle:BL,statsGrid:$L,statCard:FL,statIcon:UL,statValue:WL,statLabel:HL,controlsCard:VL,filtersContainer:qL,filtersRow:GL,filterHeader:ZL,filterTitle:KL,filterGroup:YL,filterLabel:JL,monthYearDisplay:QL,driverDisplay:XL,formRowTwo:eO,formInput:tO,monthYearPickerWrapper:nO,monthYearPicker:rO,driverPickerWrapper:iO,formContainer:sO,formRowSingle:oO,priceLabel:aO,priceAmount:lO,submitButton:cO,dataCard:uO,tableWrapper:dO,ridesGrid:hO,rideCard:fO,cardHeader:pO,cardDate:mO,statusBadgePending:gO,statusBadgeApproved:vO,statusBadgeRejected:yO,cardPrice:_O,cardInfo:xO,infoRowTop:wO,infoRowBottom:bO,infoItem:jO,statusPending:kO,statusApproved:SO,statusRejected:CO,loadingContainer:PO,emptyState:EO},oh={20:40,21:40,22:40,23:40,24:40,25:40,26:40,27:40,28:40,29:40,30:50,31:50,32:50,33:50,34:50,35:50,36:50,37:50,38:50,39:50,40:61,41:61,42:61,43:61,44:61,45:61,46:61,47:61,48:61,49:61,50:66,51:66,52:66,53:66,54:66,55:66,56:66,57:66,58:66,59:66,60:75,61:75,62:75,63:75,64:75,65:75,66:75,67:75,68:75,69:75,70:83,71:83,72:83,73:83,74:83,75:83,76:83,77:83,78:83,79:83,80:91,81:91,82:91,83:91,84:91,85:91,86:91,87:91,88:91,89:91,90:100,91:100,92:100,93:100,94:100,95:100,96:100,97:100,98:100,99:100,100:106,101:106,102:106,103:106,104:106,105:106,106:106,107:106,108:106,109:106,110:116,112:116,113:116,114:116,115:116,116:116,117:116,118:116,119:116,120:116},ah={9020:15,9061:15,9062:13,9063:16,9064:16,9065:16,9071:13,9072:11,9073:15,9074:13,9081:13,9082:11,9100:16,9102:16,9103:20,9104:20,9111:20,9112:20,9113:20,9121:16,9122:16,9123:20,9124:16,9125:20,9130:16,9131:16,9132:16,9133:20,9135:20,9141:20,9142:20,9143:20,9150:20,9155:20,9161:16,9162:13,9163:16,9170:16,9173:16,9181:13,9182:11,9183:11,9184:10,9201:15,9210:11,9212:11,9220:8,9231:10,9232:8,9241:8,9300:16,9311:16,9312:16,9313:16,9314:16,9321:16,9322:20,9323:20,9330:16,9333:16,9334:16,9335:20,9341:20,9342:16,9343:16,9344:15,9345:15,9346:15,9360:20,9361:20,9362:20,9363:20,9371:16,9372:16,9373:20,9374:20,9375:20,9376:20,9473:20,9500:8,9504:8,9520:8,9521:8,9523:8,9524:8,9530:8,9531:8,9535:10,9536:8,9541:8,9542:10,9543:10,9544:10,9545:15,9546:15,9551:8,9552:8,9555:16,9556:16,9560:11,9562:13,9563:16,9564:16,9565:16,9570:8,9571:16,9572:16,9580:8,9581:8,9582:8,9583:8,9584:8,9585:8,9586:8,9587:8,9601:8,9602:8,9611:8,9612:8,9613:8,9614:11,9615:11,9620:15,9622:16,9623:11,9624:13,9631:16,9632:16,9633:16,9634:16,9635:16,9640:20,9651:20,9652:20,9653:20,9654:20,9655:20,9701:8,9702:8,9710:8,9711:8,9712:8,9713:8,9714:8,9721:8,9722:8,9751:8,9752:8,9753:8,9754:15,9761:11,9762:16,9771:13,9772:15,9773:16,9781:16,9782:20,9800:8,9805:8,9811:10,9812:10,9813:10,9814:10,9815:10,9816:11,9821:13,9822:15,9831:15,9832:16,9833:16,9841:16,9842:16,9843:20,9844:20,9851:8,9852:8,9853:8,9854:8,9861:8,9862:11,9863:11,9871:8,9872:8,9873:8,9900:20,9903:20,9905:16,9906:16,9907:16,9908:16,9909:16,9911:20,9912:20,9913:20,9918:20,9919:20,9920:20,9931:20,9932:20,9941:20,9942:20,9943:20,9951:16,9952:16,9953:16,9954:16,9961:16,9962:20,9963:20,9971:20,9972:20,9974:20,9981:20,9990:16,9991:16,9992:16};function TO(){var me;const{drivers:t}=xl(),e=()=>{try{const Y=typeof window<"u"?localStorage.getItem("bde_current_user"):null;if(Y){const ke=JSON.parse(Y);if(ke!=null&&ke.name)return ke.name}const he=typeof window<"u"?localStorage.getItem("DRIVER_TURA"):null;if(he&&t&&t.length){const ke=t.find(ee=>ee.tura===he);if(ke)return ke.ime}}catch{}return""},[n,r]=S.useState(e),s=S.useRef(!1),[a,c]=S.useState(ht(new Date,"yyyy-MM-dd")),[d,h]=S.useState(""),[f,m]=S.useState(""),[g,w]=S.useState(""),[C,b]=S.useState(0),[_,k]=S.useState(!1),[y,j]=S.useState([]),[x,E]=S.useState(0),[A,T]=S.useState(0),[B,O]=S.useState(0),[R,N]=S.useState(!0),[M,q]=S.useState(null),[$,Z]=S.useState(""),[W,G]=S.useState(new Date().getFullYear()),[K,D]=S.useState(new Date().getMonth()),[Q,U]=S.useState(!1);S.useEffect(()=>{try{localStorage.removeItem("EXTRA_SELECTED_DRIVER")}catch{}if(!t||t.length===0)return;const he=(()=>{try{return JSON.parse(localStorage.getItem("bde_current_user")||"null")}catch{return null}})();let ke="";if(he!=null&&he.name)ke=he.name;else{const ee=localStorage.getItem("DRIVER_TURA"),_e=ee?t.find(xe=>xe.tura===ee):null;_e&&(ke=_e.ime)}ke&&ke!==n&&r(ke),s.current=!0},[t]);const te=S.useMemo(()=>{const Y=t?[...t]:[],he=(()=>{try{return JSON.parse(localStorage.getItem("bde_current_user")||"null")}catch{return null}})(),ke=he!=null&&he.username?Y.find($e=>$e.tura===he.username):null,ee=ke?[ke,...Y]:Y,_e=new Set,xe=ee.filter($e=>{const St=$e.tura||$e.id;return _e.has(St)?!1:(_e.add(St),!0)}),Ce=["8610","8620","8630","8640"];return xe.sort(($e,St)=>{const Ke=Ce.indexOf(String($e.tura)),Ft=Ce.indexOf(String(St.tura));if(Ke!==-1||Ft!==-1)return Ke===-1?1:Ft===-1?-1:Ke-Ft;const Zt=String($e.tura||""),rr=String(St.tura||""),Ur=Zt.localeCompare(rr,void 0,{numeric:!0});return Ur!==0?Ur:String($e.ime||"").localeCompare(String(St.ime||""),void 0,{sensitivity:"base"})}),[{ime:"",tura:"ALL"},...xe]},[t]),se=S.useCallback(async()=>{N(!0);try{const Y=new Date(W,K,1),he=new Date(W,K+1,0),ke=ht(Y,"yyyy-MM-dd"),ee=ht(he,"yyyy-MM-dd"),{data:_e}=await ye.from("extra_rides").select("*").gte("date",ke).lte("date",ee).eq("status","approved"),{data:xe}=await ye.from("extra_rides_pending").select("*").gte("date",ke).lte("date",ee).eq("status","pending");let Ce=_e||[],$e=xe||[];$&&(Ce=Ce.filter(Ke=>Ke.driver===$),$e=$e.filter(Ke=>Ke.driver===$));const St=[...$e.map(Ke=>({...Ke,status:"pending"})),...Ce.map(Ke=>({...Ke,status:"approved"}))].sort((Ke,Ft)=>new Date(Ft.date)-new Date(Ke.date));j(St),E($e.length),T(Ce.length),O(Ce.reduce((Ke,Ft)=>Ke+(Ft.cijena||0),0))}catch(Y){console.error(Y)}finally{N(!1)}},[W,K,$]);S.useEffect(()=>{se()},[se]),S.useEffect(()=>{const Y=parseInt(g),he=parseInt(f),ke=!isNaN(Y)&&oh[Y]?oh[Y]:0,ee=!isNaN(he)&&ah[he]?ah[he]:0;b(ke+ee)},[g,f]);const pe=async()=>{if(!n||!a||!d||!f||!g){alert("Unesite sve podatke!");return}k(!0);try{const Y=(()=>{try{return JSON.parse(localStorage.getItem("bde_current_user")||"null")}catch{return null}})(),he=parseInt(g),ke=parseInt(f),ee=oh[he]||0,_e=ah[ke]||0,xe={driver:n,date:a,tura:d,plz:f,broj_adresa:he,cijena:C,plz_price:_e,adresa_price:ee,action:"create",created_by:(Y==null?void 0:Y.username)||d||null,status:"pending",created_at:new Date().toISOString()},{error:Ce}=await ye.from("extra_rides_pending").insert([xe]);if(Ce)throw Ce;c(ht(new Date,"yyyy-MM-dd")),h(""),m(""),w(""),b(0),ue.current&&ue.current.focus(),se(),alert("Vonja dodana!")}catch(Y){alert("Greka: "+Y.message)}finally{k(!1)}},ue=S.useRef(null);return o.jsxs("div",{className:re.extraRidesScreen,children:[o.jsx("div",{className:re.mainGrid,children:o.jsxs("div",{className:re.headerCard,children:[o.jsx("div",{className:re.heroSection,children:o.jsx("h1",{className:re.heroTitle,children:"Posebne vonje"})}),o.jsxs("div",{className:re.statsGrid,children:[o.jsxs("div",{className:re.statCard,children:[o.jsx("div",{className:re.statIcon,children:o.jsx(sh,{size:22})}),o.jsx("div",{className:re.statValue,children:x}),o.jsx("div",{className:re.statLabel,children:"Na ekanju"})]}),o.jsxs("div",{className:re.statCard,children:[o.jsx("div",{className:re.statIcon,children:o.jsx(Yv,{size:22})}),o.jsx("div",{className:re.statValue,children:A}),o.jsx("div",{className:re.statLabel,children:"Odobreno"})]}),o.jsxs("div",{className:re.statCard,children:[o.jsx("div",{className:re.statIcon,children:o.jsx(gE,{size:22})}),o.jsxs("div",{className:re.statValue,children:[B.toFixed(0),""]}),o.jsx("div",{className:re.statLabel,children:"Ukupan iznos"})]})]})]})}),o.jsx("div",{className:re.controlsCard,children:o.jsxs("div",{className:re.formContainer,children:[o.jsxs("div",{className:re.formRowTwo,children:[o.jsxs("div",{className:re.filterGroup,children:[o.jsxs("div",{className:re.filterLabel,children:[o.jsx(ki,{size:16}),"Datum"]}),o.jsx("input",{type:"date",value:a,onChange:Y=>c(Y.target.value),className:re.formInput})]}),o.jsxs("div",{className:re.filterGroup,children:[o.jsxs("div",{className:re.filterLabel,children:[o.jsx(Ro,{size:16}),"Voza"]}),o.jsx("input",{type:"text",value:n||"",disabled:!0,placeholder:"Ulogovani voza",className:re.formInput})]})]}),o.jsx("div",{className:re.formRowSingle,children:o.jsxs("div",{className:re.filterGroup,children:[o.jsxs("div",{className:re.filterLabel,children:[o.jsx(Zv,{size:16}),"Tura"]}),o.jsx("input",{ref:ue,type:"number",placeholder:"4 broja",min:"1000",max:"9999",value:d,onChange:Y=>{const he=Y.target.value;he.length<=4&&h(he)},onInput:Y=>{Y.target.value=Y.target.value.replace(/[^0-9]/g,"")},className:re.formInput})]})}),o.jsx("div",{className:re.formRowSingle,children:o.jsxs("div",{className:re.filterGroup,children:[o.jsxs("div",{className:re.filterLabel,children:[o.jsx(qv,{size:16}),"PLZ"]}),o.jsx("input",{type:"number",placeholder:"4 broja",min:"1000",max:"9999",value:f,onChange:Y=>{const he=Y.target.value;he.length<=4&&m(he)},onInput:Y=>{Y.target.value=Y.target.value.replace(/[^0-9]/g,"")},className:re.formInput})]})}),o.jsx("div",{className:re.formRowSingle,children:o.jsxs("div",{className:re.filterGroup,children:[o.jsxs("div",{className:re.filterLabel,children:[o.jsx(Gv,{size:16}),"Broj adresa"]}),o.jsx("input",{type:"number",placeholder:"20-120",min:"20",max:"120",value:g,onChange:Y=>{const he=Y.target.value;he.length<=3&&w(he)},onInput:Y=>{Y.target.value=Y.target.value.replace(/[^0-9]/g,"")},className:re.formInput})]})}),o.jsx("div",{className:re.formRowSingle,children:o.jsxs("div",{className:re.filterGroup,children:[o.jsxs("div",{className:re.priceLabel,children:[o.jsx(Kv,{size:18}),"Cena: ",o.jsxs("span",{className:re.priceAmount,children:[C.toFixed(0),""]})]}),o.jsx("button",{onClick:pe,disabled:_,className:re.submitButton,children:_?"Dodajem...":"Dodaj vonju"})]})})]})}),o.jsxs("div",{className:re.dataCard,children:[o.jsxs("div",{className:re.filtersContainer,children:[o.jsx("div",{className:re.filterHeader,children:o.jsx("h3",{className:re.filterTitle,children:" Filtriranje"})}),o.jsxs("div",{className:re.filtersRow,children:[o.jsxs("div",{className:re.filterGroup,children:[o.jsxs("div",{className:re.filterLabel,children:[o.jsx(mE,{size:16}),"Voza"]}),o.jsxs("div",{className:re.driverPickerWrapper,children:[o.jsx("div",{className:re.driverDisplay,onClick:()=>U(!0),children:$?`${$} (${((me=te.find(Y=>Y.ime===$))==null?void 0:me.tura)||""})`:"Svi vozai"}),Q&&o.jsx(sx,{selectedDriver:$,onDriverChange:Y=>{Z(Y),U(!1)},drivers:te,onClose:()=>U(!1)})]})]}),o.jsxs("div",{className:re.filterGroup,children:[o.jsxs("div",{className:re.filterLabel,children:[o.jsx(ki,{size:16}),"Mesec"]}),o.jsxs("div",{className:re.monthYearPickerWrapper,children:[o.jsx(Yp,{month:K,year:W,onMonthChange:D,onYearChange:G,className:re.monthYearPicker}),o.jsxs("div",{className:re.monthYearDisplay,children:[["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"][K]," ",W]})]})]})]})]}),o.jsx("div",{className:re.tableWrapper,children:R?o.jsxs("div",{className:re.loadingContainer,children:[o.jsx(Zp,{size:24}),"Uitavanje..."]}):y.length===0?o.jsxs("div",{className:re.emptyState,children:[o.jsx(Vv,{size:48}),o.jsx("h3",{children:"Nema vonji"}),o.jsx("p",{children:"Dodajte prvu posebnu vonju iznad."})]}):o.jsx("div",{className:re.ridesGrid,children:y.map((Y,he)=>o.jsxs("div",{className:re.rideCard,children:[o.jsxs("div",{className:re.cardHeader,children:[o.jsxs("div",{className:re.cardDate,children:[o.jsx(ki,{size:18}),o.jsx("span",{children:ht(new Date(Y.date),"dd.MM.yyyy")})]}),o.jsx("div",{className:Y.status==="approved"?re.statusBadgeApproved:Y.status==="rejected"?re.statusBadgeRejected:re.statusBadgePending,children:Y.status==="approved"?o.jsxs(o.Fragment,{children:[o.jsx(Yv,{size:16}),o.jsx("span",{children:"Odobreno"})]}):Y.status==="rejected"?o.jsxs(o.Fragment,{children:[o.jsx(sh,{size:16}),o.jsx("span",{children:"Odbaeno"})]}):o.jsxs(o.Fragment,{children:[o.jsx(sh,{size:16}),o.jsx("span",{children:"Na ekanju"})]})})]}),o.jsxs("div",{className:re.cardPrice,children:[o.jsx(Kv,{size:24}),o.jsxs("span",{className:re.priceAmount,children:[Y.cijena,""]})]}),o.jsxs("div",{className:re.cardInfo,children:[o.jsxs("div",{className:re.infoRowTop,children:[o.jsxs("div",{className:re.infoItem,children:[o.jsx(Ro,{size:16}),o.jsx("span",{children:Y.driver})]}),o.jsxs("div",{className:re.infoItem,children:[o.jsx(Zv,{size:16}),o.jsx("span",{children:Y.tura})]})]}),o.jsxs("div",{className:re.infoRowBottom,children:[o.jsxs("div",{className:re.infoItem,children:[o.jsx(qv,{size:16}),o.jsx("span",{children:Y.plz})]}),o.jsxs("div",{className:re.infoItem,children:[o.jsx(Gv,{size:16}),o.jsx("span",{children:Y.broj_adresa})]})]})]})]},he))})})]}),o.jsx(q1,{visible:!!M,onClose:()=>q(null),title:"Detalji vonje",icon:o.jsx(Vv,{size:24}),children:M&&o.jsxs("div",{style:{padding:20,display:"grid",gap:10},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Datum:"})," ",ht(new Date(M.date),"dd.MM.yyyy")]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Voza:"})," ",M.driver]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tura:"})," ",M.tura]}),o.jsxs("div",{children:[o.jsx("strong",{children:"PLZ:"})," ",M.plz]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Broj adresa:"})," ",M.broj_adresa]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Cena:"})," ",Number(M.cijena).toFixed(0)," "]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Status:"})," ",o.jsx("span",{className:M.status==="approved"?re.statusApproved:M.status==="rejected"?re.statusRejected:re.statusPending,children:M.status==="approved"?" Odobreno":M.status==="rejected"?" Odbaeno":" Na ekanju"})]})]})})]})}const LO="_screenContainer_3ramy_3",OO="_header_3ramy_17",NO="_headerContent_3ramy_34",RO="_titleSection_3ramy_42",IO="_titleIcon_3ramy_48",MO="_title_3ramy_42",AO="_content_3ramy_63",DO="_tabsContainer_3ramy_72",zO="_tab_3ramy_72",BO="_activeTab_3ramy_122",$O="_tabIcon_3ramy_131",FO="_tabContent_3ramy_137",UO="_card_3ramy_142",WO="_dashboardContent_3ramy_189",Ye={screenContainer:LO,header:OO,headerContent:NO,titleSection:RO,titleIcon:IO,title:MO,content:AO,tabsContainer:DO,tab:zO,activeTab:BO,tabIcon:$O,tabContent:FO,card:UO,dashboardContent:WO},wn=({loading:t,children:e,...n})=>o.jsx("button",{...n,disabled:t,style:{borderRadius:12,padding:"16px 18px",background:n.bgColor||"#1769aa",color:"#fff",fontWeight:"bold",fontSize:16,display:"flex",alignItems:"center",justifyContent:"center",opacity:t?.7:1,cursor:t?"not-allowed":"pointer"},children:t?o.jsx("span",{className:"spinner"}):e}),If=({status:t,children:e})=>o.jsx("span",{style:{background:t==="active"?"#4caf50":t==="pending"?"#ff9800":"#607d8b",borderRadius:6,padding:"4px 10px",color:"#fff",fontWeight:"bold"},children:e||t}),sl=({icon:t,text:e,subtext:n})=>o.jsxs("div",{style:{alignItems:"center",marginTop:40},children:[o.jsx("span",{style:{fontSize:40,marginBottom:8},children:t}),o.jsx("div",{style:{fontSize:16,fontWeight:"bold"},children:e}),n&&o.jsx("div",{style:{fontSize:13,color:"#888",marginTop:4},children:n})]}),ol=({open:t,title:e,children:n,loading:r,onSubmit:s,onClose:a,submitLabel:c="Sauvaj",closeLabel:d="Otkai",showActions:h=!0})=>t?o.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,animation:"fadeIn 0.3s ease"},children:[o.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"32px",minWidth:"400px",maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.15)",color:"var(--text-on-dark, #f1f5f9)",animation:"scaleIn 0.3s ease"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",paddingBottom:"16px"},children:[o.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:e}),o.jsx("button",{onClick:a,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-on-dark, #f1f5f9)",fontSize:"18px",fontWeight:"bold",transition:"all 0.3s ease",backdropFilter:"blur(5px)"},onMouseEnter:f=>{f.target.style.background="rgba(255, 255, 255, 0.2)",f.target.style.transform="scale(1.1)"},onMouseLeave:f=>{f.target.style.background="rgba(255, 255, 255, 0.1)",f.target.style.transform="scale(1)"},children:""})]}),o.jsxs("form",{onSubmit:f=>{f.preventDefault(),s&&s()},children:[o.jsx("div",{style:{marginBottom:h?"24px":"0"},children:n}),h&&o.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"16px"},children:[o.jsx("button",{type:"button",onClick:a,style:{background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",borderRadius:"12px",padding:"12px 24px",fontWeight:"bold",border:"1px solid rgba(255, 255, 255, 0.2)",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(5px)"},onMouseEnter:f=>{f.target.style.background="rgba(255, 255, 255, 0.2)",f.target.style.transform="translateY(-2px)"},onMouseLeave:f=>{f.target.style.background="rgba(255, 255, 255, 0.1)",f.target.style.transform="translateY(0)"},children:d}),s&&o.jsx("button",{type:"submit",disabled:r,style:{background:r?"rgba(68, 202, 223, 0.5)":"linear-gradient(145deg, #44cadf 0%, #22d3ee 100%)",color:"#fff",borderRadius:"12px",padding:"12px 24px",fontWeight:"bold",border:"none",cursor:r?"not-allowed":"pointer",transition:"all 0.3s ease",boxShadow:r?"none":"0 4px 15px rgba(68, 202, 223, 0.3)",opacity:r?.7:1},onMouseEnter:f=>{r||(f.target.style.transform="translateY(-2px)",f.target.style.boxShadow="0 6px 20px rgba(68, 202, 223, 0.4)")},onMouseLeave:f=>{r||(f.target.style.transform="translateY(0)",f.target.style.boxShadow="0 4px 15px rgba(68, 202, 223, 0.3)")},children:r?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid #fff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"uvanje..."]}):c})]})]})]}),o.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes scaleIn {
          from { 
            opacity: 0; 
            transform: scale(0.9) translateY(20px); 
          }
          to { 
            opacity: 1; 
            transform: scale(1) translateY(0); 
          }
        }
        
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]}):null,HO=()=>{const[t,e]=S.useState([]),[n,r]=S.useState([]),[s,a]=S.useState(!0),[c,d]=S.useState(null),[h,f]=S.useState(!1),[m,g]=S.useState(!1),[w,C]=S.useState(null),[b,_]=S.useState({driver:"",date:"",tura:"",plz:"",broj_adresa:"",cijena:"",notes:""}),[k,y]=S.useState(ht(new Date,"yyyy-MM")),j=window.innerWidth>700,x=S.useCallback(async()=>{a(!0);try{const[O,R]=k.split("-"),N=new Date(parseInt(O),parseInt(R)-1,1),M=new Date(parseInt(O),parseInt(R),0),q=ht(N,"yyyy-MM-dd"),$=ht(M,"yyyy-MM-dd");console.log(" [RidesTab] Date range:",q,"to",$);const{data:Z,error:W}=await ye.from("extra_rides").select("*").gte("date",q).lte("date",$).eq("status","approved").order("date",{ascending:!1}),{data:G,error:K}=await ye.from("extra_rides_pending").select("*").gte("date",q).lte("date",$).eq("status","pending").order("date",{ascending:!1});W&&console.error("Error fetching approved rides:",W),K&&console.error(" [RidesTab] Error fetching pending rides:",K);const D=(G||[]).map(U=>({id:U.id,vozac:U.driver,datum:ht(new Date(U.date),"dd.MM.yyyy"),tura:U.tura,plz:U.plz,brojAdresa:U.broj_adresa,cijena:`${U.cijena}`,status:U.status,napomena:U.notes||""})),Q=(Z||[]).map(U=>({id:U.id,vozac:U.driver,datum:ht(new Date(U.date),"dd.MM.yyyy"),tura:U.tura,plz:U.plz,brojAdresa:U.broj_adresa,cijena:`${U.cijena}`,status:"approved",napomena:U.notes||""}));e(D),r(Q)}catch(O){console.error(" [RidesTab] Error fetching rides:",O),e([]),r([])}finally{a(!1)}},[k]);S.useEffect(()=>{x()},[x]);const E=async O=>{try{if(!t.find(Z=>Z.id===O))return;const{data:N,error:M}=await ye.from("extra_rides_pending").select("*").eq("id",O).single();if(M)throw M;const{error:q}=await ye.from("extra_rides").insert([{date:N.date,driver:N.driver,tura:N.tura,plz:N.plz,broj_adresa:N.broj_adresa,cijena:N.cijena,notes:N.notes,plz_price:N.plz_price,adresa_price:N.adresa_price,created_by:N.created_by,status:"approved",approved_by:"Admin",approved_at:new Date().toISOString(),original_id:N.original_id}]);if(q)throw q;const{error:$}=await ye.from("extra_rides_pending").delete().eq("id",O);if($)throw $;await x(),alert("Vonja je uspeno odobrena!")}catch(R){console.error(" [RidesTab] Error approving ride:",R),alert("Greka pri odobravanju vonje: "+R.message)}},A=async O=>{try{const{error:R}=await ye.from("extra_rides_pending").update({status:"rejected"}).eq("id",O);if(R)throw R;await x(),alert("Vonja je odbijena!")}catch(R){console.error(" [RidesTab] Error rejecting ride:",R),alert("Greka pri odbijanju vonje: "+R.message)}},T=(O,R=!0)=>{console.log(" [RidesTab] Opening edit modal for ride:",O),C({...O,isPending:R}),_({driver:O.vozac,date:O.datum.split(".").reverse().join("-"),tura:O.tura,plz:O.plz,broj_adresa:O.brojAdresa,cijena:parseFloat(O.cijena.replace("","")),notes:O.napomena||""}),g(!0)},B=async()=>{if(w)try{console.log(" [RidesTab] Saving ride edit:",b);const O={driver:b.driver,date:b.date,tura:b.tura,plz:b.plz,broj_adresa:parseInt(b.broj_adresa),cijena:parseFloat(b.cijena),notes:b.notes,last_updated:new Date().toISOString()},R=w.isPending?"extra_rides_pending":"extra_rides",{error:N}=await ye.from(R).update(O).eq("id",w.id);if(N)throw N;g(!1),C(null),await x(),alert("Vonja je uspeno izmenjena!")}catch(O){console.error(" [RidesTab] Error saving ride edit:",O),alert("Greka pri uvanju izmena: "+O.message)}};return o.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 50%, rgba(255, 255, 255, 0.04) 100%)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"16px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)",padding:"2rem",color:"var(--text-on-dark, #f1f5f9)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[o.jsx("h2",{style:{fontWeight:"bold",margin:0,color:"var(--text-on-dark, #f1f5f9)"},children:" Extra vonje - Odobravanje"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[o.jsx("label",{style:{fontSize:14,color:"var(--text-on-dark, #f1f5f9)",opacity:.8},children:"Mesec:"}),o.jsx("input",{type:"month",value:k,onChange:O=>y(O.target.value),style:{padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]})]}),o.jsxs("div",{style:{display:"flex",gap:8,marginBottom:20},children:[o.jsx("div",{style:{background:"rgba(255, 193, 7, 0.15)",borderRadius:16,padding:16,flex:1,border:"1px solid rgba(255, 193, 7, 0.3)",backdropFilter:"blur(5px)"},children:o.jsxs("span",{style:{color:"#ffc107",fontWeight:"bold"},children:[" Pending: ",t.length]})}),o.jsx("div",{style:{background:"rgba(40, 167, 69, 0.15)",borderRadius:16,padding:16,flex:1,border:"1px solid rgba(40, 167, 69, 0.3)",backdropFilter:"blur(5px)"},children:o.jsxs("span",{style:{color:"#28a745",fontWeight:"bold"},children:[" Odobreno: ",n.length]})})]}),o.jsx("h3",{style:{marginBottom:10,color:"var(--text-on-dark, #f1f5f9)"},children:" Vonje na ekanju"}),s?o.jsx("div",{style:{textAlign:"center",padding:"20px"},children:o.jsx("div",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Uitavanje..."})}):t.length===0?o.jsx(sl,{icon:o.jsx("span",{children:""}),text:"Nema vonji na ekanju",subtext:"Sve vonje su obraene."}):o.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:12,marginBottom:24},children:t.map(O=>o.jsxs("div",{style:{background:"rgba(255, 193, 7, 0.1)",borderRadius:12,padding:14,border:"1px solid rgba(255, 193, 7, 0.3)",backdropFilter:"blur(5px)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[o.jsxs("span",{style:{fontWeight:"bold",fontSize:16,color:"var(--text-on-dark, #f1f5f9)"},children:[" ",O.vozac]}),o.jsxs(If,{status:O.status,children:[" ",O.status]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:8,marginBottom:12},children:[o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Datum: ",o.jsx("strong",{children:O.datum})]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Tura: ",o.jsx("strong",{children:O.tura})]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" PLZ: ",o.jsx("strong",{children:O.plz})]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Adrese: ",o.jsx("strong",{children:O.brojAdresa})]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Cijena: ",o.jsx("strong",{children:O.cijena})]})]}),o.jsxs("div",{style:{display:"flex",marginTop:12,gap:8,flexWrap:"wrap"},children:[o.jsx(wn,{onClick:()=>E(O.id),bgColor:"#28a745",children:" Odobri"}),o.jsx(wn,{onClick:()=>A(O.id),bgColor:"#dc3545",children:" Odbij"}),o.jsx(wn,{onClick:()=>T(O,!0),bgColor:"#ffc107",children:" Uredi"}),o.jsx(wn,{onClick:()=>{d(O),f(!0)},bgColor:"#007bff",children:" Detalji"})]})]},O.id))}),o.jsx("h3",{style:{marginTop:24,marginBottom:10,color:"var(--text-on-dark, #f1f5f9)"},children:" Odobrene vonje"}),n.length===0?o.jsx(sl,{icon:o.jsx("span",{children:""}),text:"Nema odobrenih vonji",subtext:"Za odabrani mesec."}):o.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${j?2:1}, 1fr)`,gap:12},children:n.map(O=>o.jsxs("div",{style:{background:"rgba(40, 167, 69, 0.1)",borderRadius:12,padding:14,border:"1px solid rgba(40, 167, 69, 0.3)",backdropFilter:"blur(5px)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[o.jsxs("span",{style:{fontWeight:"bold",fontSize:16,color:"var(--text-on-dark, #f1f5f9)"},children:[" ",O.vozac]}),o.jsx(If,{status:"approved",children:" Odobreno"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:6,marginBottom:12},children:[o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" ",O.datum]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" ",O.tura]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" ",O.plz]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" ",O.brojAdresa]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" ",O.cijena]})]}),o.jsxs("div",{style:{display:"flex",marginTop:10,gap:8},children:[o.jsx(wn,{onClick:()=>T(O,!1),bgColor:"#ffc107",children:" Uredi"}),o.jsx(wn,{onClick:()=>{d(O),f(!0)},bgColor:"#007bff",children:" Detalji"})]})]},O.id))}),o.jsx(ol,{open:h,title:" Detalji vonje",onClose:()=>f(!1),showActions:!1,children:c&&o.jsx("div",{style:{display:"grid",gap:16},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"12px",alignItems:"center"},children:[o.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Voza:"}),o.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.vozac}),o.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Datum:"}),o.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.datum}),o.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Tura:"}),o.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.tura}),o.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" PLZ:"}),o.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.plz}),o.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Broj adresa:"}),o.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.brojAdresa}),o.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Cijena:"}),o.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.cijena}),o.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Status:"}),o.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.status}),c.napomena&&o.jsxs(o.Fragment,{children:[o.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Napomena:"}),o.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.napomena})]})]})})}),o.jsx(ol,{open:m,title:` Uredi vonju ${w!=null&&w.isPending?"(Pending)":"(Odobreno)"}`,onClose:()=>g(!1),onSubmit:B,loading:s,submitLabel:" Sauvaj promjene",closeLabel:" Otkai",children:o.jsxs("div",{style:{display:"grid",gap:16},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Voza:"}),o.jsx("input",{type:"text",value:b.driver,onChange:O=>_({...b,driver:O.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Datum:"}),o.jsx("input",{type:"date",value:b.date,onChange:O=>_({...b,date:O.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Tura:"}),o.jsx("input",{type:"text",value:b.tura,onChange:O=>_({...b,tura:O.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" PLZ:"}),o.jsx("input",{type:"text",value:b.plz,onChange:O=>_({...b,plz:O.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Broj adresa:"}),o.jsx("input",{type:"number",min:"1",value:b.broj_adresa,onChange:O=>_({...b,broj_adresa:O.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Cijena ():"}),o.jsx("input",{type:"number",min:"0",step:"0.01",value:b.cijena,onChange:O=>_({...b,cijena:O.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Napomena:"}),o.jsx("textarea",{value:b.notes,onChange:O=>_({...b,notes:O.target.value}),rows:3,style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",resize:"vertical",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"},placeholder:"Dodajte napomenu..."})]})]})})]})},VO=()=>{const{drivers:t,loading:e,error:n,addDriver:r,updateDriver:s,deleteDriver:a,toggleDriverStatus:c}=xl(),[d,h]=S.useState(null),[f,m]=S.useState(!1),[g,w]=S.useState(!1),[C,b]=S.useState(!1),[_,k]=S.useState({}),[y,j]=S.useState({ime:"",tura:"",aktivan:!0,target_per_day:0,password_hash:"",role:"driver"}),x=window.innerWidth>700,E=$=>{k(Z=>({...Z,[$]:!Z[$]}))},A=$=>{try{return atob($)}catch{return $}},T=$=>{try{return btoa($)}catch{return $}},B=async()=>{b(!0);try{const $={...y,password_hash:y.password_hash?T(y.password_hash):""};await r($),w(!1),j({ime:"",tura:"",aktivan:!0,target_per_day:0,password_hash:"",role:"driver"})}catch($){console.error("Greka pri dodavanju vozaa:",$),alert("Greka pri dodavanju vozaa: "+$.message)}finally{b(!1)}},O=async()=>{if(d){b(!0);try{const $={...y,password_hash:y.password_hash?T(y.password_hash):d.password_hash};await s(d.id,$),m(!1),h(null)}catch($){console.error("Greka pri auriranju vozaa:",$),alert("Greka pri auriranju vozaa: "+$.message)}finally{b(!1)}}},R=async $=>{if(window.confirm(`Da li ste sigurni da elite obrisati vozaa ${$.ime}?`))try{await a($.id)}catch(Z){console.error("Greka pri brisanju vozaa:",Z),alert("Greka pri brisanju vozaa: "+Z.message)}},N=async $=>{try{await c($.id,$.aktivan)}catch(Z){console.error("Greka pri mijenjanju statusa:",Z),alert("Greka pri mijenjanju statusa: "+Z.message)}},M=$=>{h($),j({ime:$.ime,tura:$.tura,aktivan:$.aktivan,target_per_day:$.target_per_day||0,password_hash:$.password_hash?A($.password_hash):"",role:$.role||"driver"}),m(!0)},q=()=>{j({ime:"",tura:"",aktivan:!0,target_per_day:0,password_hash:"",role:"driver"}),w(!0)};return o.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 50%, rgba(255, 255, 255, 0.04) 100%)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"16px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)",padding:"2rem",color:"var(--text-on-dark, #f1f5f9)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[o.jsx("h2",{style:{fontWeight:"bold",margin:0,color:"var(--text-on-dark, #f1f5f9)"},children:" Upravljanje korisnicima"}),o.jsx(wn,{onClick:q,bgColor:"#007bff",children:" Dodaj korisnika"})]}),o.jsxs("div",{style:{display:"flex",gap:8,marginBottom:20},children:[o.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",borderRadius:16,padding:16,flex:1,border:"1px solid rgba(76, 175, 80, 0.3)",backdropFilter:"blur(5px)"},children:o.jsxs("span",{style:{color:"#4caf50",fontWeight:"bold"},children:[" Aktivni: ",t.filter($=>$.aktivan).length]})}),o.jsx("div",{style:{background:"rgba(255, 193, 7, 0.15)",borderRadius:16,padding:16,flex:1,border:"1px solid rgba(255, 193, 7, 0.3)",backdropFilter:"blur(5px)"},children:o.jsxs("span",{style:{color:"#ffc107",fontWeight:"bold"},children:[" Neaktivni: ",t.filter($=>!$.aktivan).length]})}),o.jsx("div",{style:{background:"rgba(33, 150, 243, 0.15)",borderRadius:16,padding:16,flex:1,border:"1px solid rgba(33, 150, 243, 0.3)",backdropFilter:"blur(5px)"},children:o.jsxs("span",{style:{color:"#2196f3",fontWeight:"bold"},children:[" Ukupno: ",t.length]})})]}),n&&o.jsxs("div",{style:{background:"rgba(220, 53, 69, 0.15)",border:"1px solid rgba(220, 53, 69, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",color:"#dc3545"},children:[" Greka: ",n.message]}),e?o.jsx("div",{style:{textAlign:"center",padding:"20px"},children:o.jsx("div",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Uitavanje korisnika..."})}):t.length===0?o.jsx(sl,{icon:o.jsx("span",{children:""}),text:"Nema korisnika",subtext:"Nema registrovanih korisnika."}):o.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${x?2:1}, 1fr)`,gap:12},children:t.map($=>o.jsxs("div",{style:{background:$.aktivan?"rgba(76, 175, 80, 0.1)":"rgba(255, 193, 7, 0.1)",border:$.aktivan?"1px solid rgba(76, 175, 80, 0.3)":"1px solid rgba(255, 193, 7, 0.3)",borderRadius:12,padding:14,backdropFilter:"blur(5px)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[o.jsxs("span",{style:{fontWeight:"bold",fontSize:16,color:"var(--text-on-dark, #f1f5f9)"},children:[" ",$.ime]}),o.jsx(If,{status:$.aktivan?"active":"blocked",children:$.aktivan?" Aktivan":" Blokiran"})]}),o.jsxs("div",{style:{display:"grid",gap:6,marginBottom:12},children:[o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Tura: ",o.jsx("strong",{children:$.tura})]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Target/dan: ",o.jsx("strong",{children:$.target_per_day||0})]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Password:",o.jsx("strong",{children:$.password_hash?_[$.id]?A($.password_hash):"":"N/A"}),$.password_hash&&o.jsx("button",{onClick:()=>E($.id),style:{marginLeft:"8px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",padding:"2px 6px",color:"var(--text-on-dark, #f1f5f9)",cursor:"pointer",fontSize:"11px",backdropFilter:"blur(5px)"},children:_[$.id]?"":""})]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Uloga: ",o.jsx("strong",{children:$.role==="admin"?" Admin":" Voza"})]}),$.last_login&&o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Zadnji login: ",o.jsx("strong",{children:new Date($.last_login).toLocaleDateString("bs-BA")})]})]}),o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[o.jsx(wn,{onClick:()=>M($),bgColor:"#007bff",children:" Uredi"}),o.jsx(wn,{onClick:()=>N($),bgColor:$.aktivan?"#ff9800":"#4caf50",children:$.aktivan?" Deaktiviraj":" Aktiviraj"}),o.jsx(wn,{onClick:()=>R($),bgColor:"#dc3545",children:" Obrii"})]})]},$.id))}),o.jsx(ol,{open:g,title:" Dodaj novog korisnika",onClose:()=>w(!1),onSubmit:B,loading:C,submitLabel:" Dodaj korisnika",closeLabel:" Otkai",children:o.jsxs("div",{style:{display:"grid",gap:16},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Ime korisnika:"}),o.jsx("input",{type:"text",value:y.ime,onChange:$=>j({...y,ime:$.target.value}),placeholder:"Unesite ime korisnika",required:!0,style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Tura:"}),o.jsx("input",{type:"text",value:y.tura,onChange:$=>j({...y,tura:$.target.value}),placeholder:"npr. A1, B2, C3...",required:!0,style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Target po danu:"}),o.jsx("input",{type:"number",value:y.target_per_day,onChange:$=>j({...y,target_per_day:parseInt($.target.value)||0}),placeholder:"0",min:"0",style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Uloga:"}),o.jsxs("select",{value:y.role,onChange:$=>j({...y,role:$.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"},children:[o.jsx("option",{value:"user",children:" Korisnik"}),o.jsx("option",{value:"admin",children:" Administrator"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Password:"}),o.jsx("input",{type:"password",value:y.password_hash,onChange:$=>j({...y,password_hash:$.target.value}),placeholder:"Unesite password",style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",id:"addActiveCheckbox",checked:y.aktivan,onChange:$=>j({...y,aktivan:$.target.checked}),style:{accentColor:"#4caf50"}}),o.jsx("label",{htmlFor:"addActiveCheckbox",style:{color:"var(--text-on-dark, #f1f5f9)",fontSize:"14px"},children:" Aktivan korisnik"})]})]})}),o.jsx(ol,{open:f,title:" Uredi korisnika",onClose:()=>m(!1),onSubmit:O,loading:C,submitLabel:" Sauvaj promjene",closeLabel:" Otkai",children:o.jsxs("div",{style:{display:"grid",gap:16},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Ime korisnika:"}),o.jsx("input",{type:"text",value:y.ime,onChange:$=>j({...y,ime:$.target.value}),placeholder:"Unesite ime korisnika",required:!0,style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Tura:"}),o.jsx("input",{type:"text",value:y.tura,onChange:$=>j({...y,tura:$.target.value}),placeholder:"npr. A1, B2, C3...",required:!0,style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Target po danu:"}),o.jsx("input",{type:"number",value:y.target_per_day,onChange:$=>j({...y,target_per_day:parseInt($.target.value)||0}),placeholder:"0",min:"0",style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Uloga:"}),o.jsxs("select",{value:y.role,onChange:$=>j({...y,role:$.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"},children:[o.jsx("option",{value:"driver",children:" Voza"}),o.jsx("option",{value:"admin",children:" Administrator"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Password:"}),o.jsx("input",{type:"password",value:y.password_hash,onChange:$=>j({...y,password_hash:$.target.value}),placeholder:"Ostavite prazno da ne mijenjate",style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",id:"editActiveCheckbox",checked:y.aktivan,onChange:$=>j({...y,aktivan:$.target.checked}),style:{accentColor:"#4caf50"}}),o.jsx("label",{htmlFor:"editActiveCheckbox",style:{color:"var(--text-on-dark, #f1f5f9)",fontSize:"14px"},children:" Aktivan korisnik"})]})]})})]})};function ox(t,e){return function(){return t.apply(e,arguments)}}const{toString:qO}=Object.prototype,{getPrototypeOf:tm}=Object,{iterator:zu,toStringTag:ax}=Symbol,Bu=(t=>e=>{const n=qO.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),nr=t=>(t=t.toLowerCase(),e=>Bu(e)===t),$u=t=>e=>typeof e===t,{isArray:Uo}=Array,Io=$u("undefined");function bl(t){return t!==null&&!Io(t)&&t.constructor!==null&&!Io(t.constructor)&&gn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const lx=nr("ArrayBuffer");function GO(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&lx(t.buffer),e}const ZO=$u("string"),gn=$u("function"),cx=$u("number"),jl=t=>t!==null&&typeof t=="object",KO=t=>t===!0||t===!1,Lc=t=>{if(Bu(t)!=="object")return!1;const e=tm(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ax in t)&&!(zu in t)},YO=t=>{if(!jl(t)||bl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},JO=nr("Date"),QO=nr("File"),XO=nr("Blob"),eN=nr("FileList"),tN=t=>jl(t)&&gn(t.pipe),nN=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||gn(t.append)&&((e=Bu(t))==="formdata"||e==="object"&&gn(t.toString)&&t.toString()==="[object FormData]"))},rN=nr("URLSearchParams"),[iN,sN,oN,aN]=["ReadableStream","Request","Response","Headers"].map(nr),lN=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Uo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(bl(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),c=a.length;let d;for(r=0;r<c;r++)d=a[r],e.call(null,t[d],d,t)}}function ux(t,e){if(bl(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const es=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dx=t=>!Io(t)&&t!==es;function Mf(){const{caseless:t,skipUndefined:e}=dx(this)&&this||{},n={},r=(s,a)=>{const c=t&&ux(n,a)||a;Lc(n[c])&&Lc(s)?n[c]=Mf(n[c],s):Lc(s)?n[c]=Mf({},s):Uo(s)?n[c]=s.slice():(!e||!Io(s))&&(n[c]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&kl(arguments[s],r);return n}const cN=(t,e,n,{allOwnKeys:r}={})=>(kl(e,(s,a)=>{n&&gn(s)?t[a]=ox(s,n):t[a]=s},{allOwnKeys:r}),t),uN=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),dN=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},hN=(t,e,n,r)=>{let s,a,c;const d={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),a=s.length;a-- >0;)c=s[a],(!r||r(c,t,e))&&!d[c]&&(e[c]=t[c],d[c]=!0);t=n!==!1&&tm(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},fN=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},pN=t=>{if(!t)return null;if(Uo(t))return t;let e=t.length;if(!cx(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},mN=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&tm(Uint8Array)),gN=(t,e)=>{const r=(t&&t[zu]).call(t);let s;for(;(s=r.next())&&!s.done;){const a=s.value;e.call(t,a[0],a[1])}},vN=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},yN=nr("HTMLFormElement"),_N=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),a0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),xN=nr("RegExp"),hx=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};kl(n,(s,a)=>{let c;(c=e(s,a,t))!==!1&&(r[a]=c||s)}),Object.defineProperties(t,r)},wN=t=>{hx(t,(e,n)=>{if(gn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(gn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},bN=(t,e)=>{const n={},r=s=>{s.forEach(a=>{n[a]=!0})};return Uo(t)?r(t):r(String(t).split(e)),n},jN=()=>{},kN=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function SN(t){return!!(t&&gn(t.append)&&t[ax]==="FormData"&&t[zu])}const CN=t=>{const e=new Array(10),n=(r,s)=>{if(jl(r)){if(e.indexOf(r)>=0)return;if(bl(r))return r;if(!("toJSON"in r)){e[s]=r;const a=Uo(r)?[]:{};return kl(r,(c,d)=>{const h=n(c,s+1);!Io(h)&&(a[d]=h)}),e[s]=void 0,a}}return r};return n(t,0)},PN=nr("AsyncFunction"),EN=t=>t&&(jl(t)||gn(t))&&gn(t.then)&&gn(t.catch),fx=((t,e)=>t?setImmediate:e?((n,r)=>(es.addEventListener("message",({source:s,data:a})=>{s===es&&a===n&&r.length&&r.shift()()},!1),s=>{r.push(s),es.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",gn(es.postMessage)),TN=typeof queueMicrotask<"u"?queueMicrotask.bind(es):typeof process<"u"&&process.nextTick||fx,LN=t=>t!=null&&gn(t[zu]),V={isArray:Uo,isArrayBuffer:lx,isBuffer:bl,isFormData:nN,isArrayBufferView:GO,isString:ZO,isNumber:cx,isBoolean:KO,isObject:jl,isPlainObject:Lc,isEmptyObject:YO,isReadableStream:iN,isRequest:sN,isResponse:oN,isHeaders:aN,isUndefined:Io,isDate:JO,isFile:QO,isBlob:XO,isRegExp:xN,isFunction:gn,isStream:tN,isURLSearchParams:rN,isTypedArray:mN,isFileList:eN,forEach:kl,merge:Mf,extend:cN,trim:lN,stripBOM:uN,inherits:dN,toFlatObject:hN,kindOf:Bu,kindOfTest:nr,endsWith:fN,toArray:pN,forEachEntry:gN,matchAll:vN,isHTMLForm:yN,hasOwnProperty:a0,hasOwnProp:a0,reduceDescriptors:hx,freezeMethods:wN,toObjectSet:bN,toCamelCase:_N,noop:jN,toFiniteNumber:kN,findKey:ux,global:es,isContextDefined:dx,isSpecCompliantForm:SN,toJSONObject:CN,isAsyncFn:PN,isThenable:EN,setImmediate:fx,asap:TN,isIterable:LN};function Ee(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}V.inherits(Ee,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const px=Ee.prototype,mx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mx[t]={value:t}});Object.defineProperties(Ee,mx);Object.defineProperty(px,"isAxiosError",{value:!0});Ee.from=(t,e,n,r,s,a)=>{const c=Object.create(px);V.toFlatObject(t,c,function(m){return m!==Error.prototype},f=>f!=="isAxiosError");const d=t&&t.message?t.message:"Error",h=e==null&&t?t.code:e;return Ee.call(c,d,h,n,r,s),t&&c.cause==null&&Object.defineProperty(c,"cause",{value:t,configurable:!0}),c.name=t&&t.name||"Error",a&&Object.assign(c,a),c};const ON=null;function Af(t){return V.isPlainObject(t)||V.isArray(t)}function gx(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function l0(t,e,n){return t?t.concat(e).map(function(s,a){return s=gx(s),!n&&a?"["+s+"]":s}).join(n?".":""):e}function NN(t){return V.isArray(t)&&!t.some(Af)}const RN=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function Fu(t,e,n){if(!V.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=V.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,k){return!V.isUndefined(k[_])});const r=n.metaTokens,s=n.visitor||m,a=n.dots,c=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(s))throw new TypeError("visitor must be a function");function f(b){if(b===null)return"";if(V.isDate(b))return b.toISOString();if(V.isBoolean(b))return b.toString();if(!h&&V.isBlob(b))throw new Ee("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(b)||V.isTypedArray(b)?h&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function m(b,_,k){let y=b;if(b&&!k&&typeof b=="object"){if(V.endsWith(_,"{}"))_=r?_:_.slice(0,-2),b=JSON.stringify(b);else if(V.isArray(b)&&NN(b)||(V.isFileList(b)||V.endsWith(_,"[]"))&&(y=V.toArray(b)))return _=gx(_),y.forEach(function(x,E){!(V.isUndefined(x)||x===null)&&e.append(c===!0?l0([_],E,a):c===null?_:_+"[]",f(x))}),!1}return Af(b)?!0:(e.append(l0(k,_,a),f(b)),!1)}const g=[],w=Object.assign(RN,{defaultVisitor:m,convertValue:f,isVisitable:Af});function C(b,_){if(!V.isUndefined(b)){if(g.indexOf(b)!==-1)throw Error("Circular reference detected in "+_.join("."));g.push(b),V.forEach(b,function(y,j){(!(V.isUndefined(y)||y===null)&&s.call(e,y,V.isString(j)?j.trim():j,_,w))===!0&&C(y,_?_.concat(j):[j])}),g.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return C(t),e}function c0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function nm(t,e){this._pairs=[],t&&Fu(t,this,e)}const vx=nm.prototype;vx.append=function(e,n){this._pairs.push([e,n])};vx.toString=function(e){const n=e?function(r){return e.call(this,r,c0)}:c0;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function IN(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yx(t,e,n){if(!e)return t;const r=n&&n.encode||IN;V.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(s?a=s(e,n):a=V.isURLSearchParams(e)?e.toString():new nm(e,n).toString(r),a){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class u0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(r){r!==null&&e(r)})}}const _x={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},MN=typeof URLSearchParams<"u"?URLSearchParams:nm,AN=typeof FormData<"u"?FormData:null,DN=typeof Blob<"u"?Blob:null,zN={isBrowser:!0,classes:{URLSearchParams:MN,FormData:AN,Blob:DN},protocols:["http","https","file","blob","url","data"]},rm=typeof window<"u"&&typeof document<"u",Df=typeof navigator=="object"&&navigator||void 0,BN=rm&&(!Df||["ReactNative","NativeScript","NS"].indexOf(Df.product)<0),$N=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",FN=rm&&window.location.href||"http://localhost",UN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rm,hasStandardBrowserEnv:BN,hasStandardBrowserWebWorkerEnv:$N,navigator:Df,origin:FN},Symbol.toStringTag,{value:"Module"})),qt={...UN,...zN};function WN(t,e){return Fu(t,new qt.classes.URLSearchParams,{visitor:function(n,r,s,a){return qt.isNode&&V.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function HN(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function VN(t){const e={},n=Object.keys(t);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],e[a]=t[a];return e}function xx(t){function e(n,r,s,a){let c=n[a++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),h=a>=n.length;return c=!c&&V.isArray(s)?s.length:c,h?(V.hasOwnProp(s,c)?s[c]=[s[c],r]:s[c]=r,!d):((!s[c]||!V.isObject(s[c]))&&(s[c]=[]),e(n,r,s[c],a)&&V.isArray(s[c])&&(s[c]=VN(s[c])),!d)}if(V.isFormData(t)&&V.isFunction(t.entries)){const n={};return V.forEachEntry(t,(r,s)=>{e(HN(r),s,n,0)}),n}return null}function qN(t,e,n){if(V.isString(t))try{return(e||JSON.parse)(t),V.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Sl={transitional:_x,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,a=V.isObject(e);if(a&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return s?JSON.stringify(xx(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return WN(e,this.formSerializer).toString();if((d=V.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Fu(d?{"files[]":e}:e,h&&new h,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),qN(e)):e}],transformResponse:[function(e){const n=this.transitional||Sl.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(r&&!this.responseType||s)){const c=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(d){if(c)throw d.name==="SyntaxError"?Ee.from(d,Ee.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qt.classes.FormData,Blob:qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{Sl.headers[t]={}});const GN=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ZN=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(c){s=c.indexOf(":"),n=c.substring(0,s).trim().toLowerCase(),r=c.substring(s+1).trim(),!(!n||e[n]&&GN[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},d0=Symbol("internals");function ga(t){return t&&String(t).trim().toLowerCase()}function Oc(t){return t===!1||t==null?t:V.isArray(t)?t.map(Oc):String(t)}function KN(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const YN=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function lh(t,e,n,r,s){if(V.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!V.isString(e)){if(V.isString(r))return e.indexOf(r)!==-1;if(V.isRegExp(r))return r.test(e)}}function JN(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function QN(t,e){const n=V.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,a,c){return this[r].call(this,e,s,a,c)},configurable:!0})})}let vn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function a(d,h,f){const m=ga(h);if(!m)throw new Error("header name must be a non-empty string");const g=V.findKey(s,m);(!g||s[g]===void 0||f===!0||f===void 0&&s[g]!==!1)&&(s[g||h]=Oc(d))}const c=(d,h)=>V.forEach(d,(f,m)=>a(f,m,h));if(V.isPlainObject(e)||e instanceof this.constructor)c(e,n);else if(V.isString(e)&&(e=e.trim())&&!YN(e))c(ZN(e),n);else if(V.isObject(e)&&V.isIterable(e)){let d={},h,f;for(const m of e){if(!V.isArray(m))throw TypeError("Object iterator must return a key-value pair");d[f=m[0]]=(h=d[f])?V.isArray(h)?[...h,m[1]]:[h,m[1]]:m[1]}c(d,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=ga(e),e){const r=V.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return KN(s);if(V.isFunction(n))return n.call(this,s,r);if(V.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ga(e),e){const r=V.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||lh(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function a(c){if(c=ga(c),c){const d=V.findKey(r,c);d&&(!n||lh(r,r[d],d,n))&&(delete r[d],s=!0)}}return V.isArray(e)?e.forEach(a):a(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const a=n[r];(!e||lh(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const n=this,r={};return V.forEach(this,(s,a)=>{const c=V.findKey(r,a);if(c){n[c]=Oc(s),delete n[a];return}const d=e?JN(a):String(a).trim();d!==a&&delete n[a],n[d]=Oc(s),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return V.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&V.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[d0]=this[d0]={accessors:{}}).accessors,s=this.prototype;function a(c){const d=ga(c);r[d]||(QN(s,c),r[d]=!0)}return V.isArray(e)?e.forEach(a):a(e),this}};vn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(vn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});V.freezeMethods(vn);function ch(t,e){const n=this||Sl,r=e||n,s=vn.from(r.headers);let a=r.data;return V.forEach(t,function(d){a=d.call(n,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function wx(t){return!!(t&&t.__CANCEL__)}function Wo(t,e,n){Ee.call(this,t??"canceled",Ee.ERR_CANCELED,e,n),this.name="CanceledError"}V.inherits(Wo,Ee,{__CANCEL__:!0});function bx(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ee("Request failed with status code "+n.status,[Ee.ERR_BAD_REQUEST,Ee.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function XN(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function e3(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,a=0,c;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),m=r[a];c||(c=f),n[s]=h,r[s]=f;let g=a,w=0;for(;g!==s;)w+=n[g++],g=g%t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),f-c<e)return;const C=m&&f-m;return C?Math.round(w*1e3/C):void 0}}function t3(t,e){let n=0,r=1e3/e,s,a;const c=(f,m=Date.now())=>{n=m,s=null,a&&(clearTimeout(a),a=null),t(...f)};return[(...f)=>{const m=Date.now(),g=m-n;g>=r?c(f,m):(s=f,a||(a=setTimeout(()=>{a=null,c(s)},r-g)))},()=>s&&c(s)]}const hu=(t,e,n=3)=>{let r=0;const s=e3(50,250);return t3(a=>{const c=a.loaded,d=a.lengthComputable?a.total:void 0,h=c-r,f=s(h),m=c<=d;r=c;const g={loaded:c,total:d,progress:d?c/d:void 0,bytes:h,rate:f||void 0,estimated:f&&d&&m?(d-c)/f:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(g)},n)},h0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},f0=t=>(...e)=>V.asap(()=>t(...e)),n3=qt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,qt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(qt.origin),qt.navigator&&/(msie|trident)/i.test(qt.navigator.userAgent)):()=>!0,r3=qt.hasStandardBrowserEnv?{write(t,e,n,r,s,a){const c=[t+"="+encodeURIComponent(e)];V.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),V.isString(r)&&c.push("path="+r),V.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function i3(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function s3(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function jx(t,e,n){let r=!i3(e);return t&&(r||n==!1)?s3(t,e):e}const p0=t=>t instanceof vn?{...t}:t;function _s(t,e){e=e||{};const n={};function r(f,m,g,w){return V.isPlainObject(f)&&V.isPlainObject(m)?V.merge.call({caseless:w},f,m):V.isPlainObject(m)?V.merge({},m):V.isArray(m)?m.slice():m}function s(f,m,g,w){if(V.isUndefined(m)){if(!V.isUndefined(f))return r(void 0,f,g,w)}else return r(f,m,g,w)}function a(f,m){if(!V.isUndefined(m))return r(void 0,m)}function c(f,m){if(V.isUndefined(m)){if(!V.isUndefined(f))return r(void 0,f)}else return r(void 0,m)}function d(f,m,g){if(g in e)return r(f,m);if(g in t)return r(void 0,f)}const h={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(f,m,g)=>s(p0(f),p0(m),g,!0)};return V.forEach(Object.keys({...t,...e}),function(m){const g=h[m]||s,w=g(t[m],e[m],m);V.isUndefined(w)&&g!==d||(n[m]=w)}),n}const kx=t=>{const e=_s({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:c,auth:d}=e;if(e.headers=c=vn.from(c),e.url=yx(jx(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),V.isFormData(n)){if(qt.hasStandardBrowserEnv||qt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(V.isFunction(n.getHeaders)){const h=n.getHeaders(),f=["content-type","content-length"];Object.entries(h).forEach(([m,g])=>{f.includes(m.toLowerCase())&&c.set(m,g)})}}if(qt.hasStandardBrowserEnv&&(r&&V.isFunction(r)&&(r=r(e)),r||r!==!1&&n3(e.url))){const h=s&&a&&r3.read(a);h&&c.set(s,h)}return e},o3=typeof XMLHttpRequest<"u",a3=o3&&function(t){return new Promise(function(n,r){const s=kx(t);let a=s.data;const c=vn.from(s.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:f}=s,m,g,w,C,b;function _(){C&&C(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function y(){if(!k)return;const x=vn.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),A={data:!d||d==="text"||d==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:x,config:t,request:k};bx(function(B){n(B),_()},function(B){r(B),_()},A),k=null}"onloadend"in k?k.onloadend=y:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(y)},k.onabort=function(){k&&(r(new Ee("Request aborted",Ee.ECONNABORTED,t,k)),k=null)},k.onerror=function(E){const A=E&&E.message?E.message:"Network Error",T=new Ee(A,Ee.ERR_NETWORK,t,k);T.event=E||null,r(T),k=null},k.ontimeout=function(){let E=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const A=s.transitional||_x;s.timeoutErrorMessage&&(E=s.timeoutErrorMessage),r(new Ee(E,A.clarifyTimeoutError?Ee.ETIMEDOUT:Ee.ECONNABORTED,t,k)),k=null},a===void 0&&c.setContentType(null),"setRequestHeader"in k&&V.forEach(c.toJSON(),function(E,A){k.setRequestHeader(A,E)}),V.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),d&&d!=="json"&&(k.responseType=s.responseType),f&&([w,b]=hu(f,!0),k.addEventListener("progress",w)),h&&k.upload&&([g,C]=hu(h),k.upload.addEventListener("progress",g),k.upload.addEventListener("loadend",C)),(s.cancelToken||s.signal)&&(m=x=>{k&&(r(!x||x.type?new Wo(null,t,k):x),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const j=XN(s.url);if(j&&qt.protocols.indexOf(j)===-1){r(new Ee("Unsupported protocol "+j+":",Ee.ERR_BAD_REQUEST,t));return}k.send(a||null)})},l3=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const a=function(f){if(!s){s=!0,d();const m=f instanceof Error?f:this.reason;r.abort(m instanceof Ee?m:new Wo(m instanceof Error?m.message:m))}};let c=e&&setTimeout(()=>{c=null,a(new Ee(`timeout ${e} of ms exceeded`,Ee.ETIMEDOUT))},e);const d=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(a):f.removeEventListener("abort",a)}),t=null)};t.forEach(f=>f.addEventListener("abort",a));const{signal:h}=r;return h.unsubscribe=()=>V.asap(d),h}},c3=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},u3=async function*(t,e){for await(const n of d3(t))yield*c3(n,e)},d3=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},m0=(t,e,n,r)=>{const s=u3(t,e);let a=0,c,d=h=>{c||(c=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:f,value:m}=await s.next();if(f){d(),h.close();return}let g=m.byteLength;if(n){let w=a+=g;n(w)}h.enqueue(new Uint8Array(m))}catch(f){throw d(f),f}},cancel(h){return d(h),s.return()}},{highWaterMark:2})},g0=64*1024,{isFunction:mc}=V,h3=(({Request:t,Response:e})=>({Request:t,Response:e}))(V.global),{ReadableStream:v0,TextEncoder:y0}=V.global,_0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},f3=t=>{t=V.merge.call({skipUndefined:!0},h3,t);const{fetch:e,Request:n,Response:r}=t,s=e?mc(e):typeof fetch=="function",a=mc(n),c=mc(r);if(!s)return!1;const d=s&&mc(v0),h=s&&(typeof y0=="function"?(b=>_=>b.encode(_))(new y0):async b=>new Uint8Array(await new n(b).arrayBuffer())),f=a&&d&&_0(()=>{let b=!1;const _=new n(qt.origin,{body:new v0,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!_}),m=c&&d&&_0(()=>V.isReadableStream(new r("").body)),g={stream:m&&(b=>b.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!g[b]&&(g[b]=(_,k)=>{let y=_&&_[b];if(y)return y.call(_);throw new Ee(`Response type '${b}' is not supported`,Ee.ERR_NOT_SUPPORT,k)})});const w=async b=>{if(b==null)return 0;if(V.isBlob(b))return b.size;if(V.isSpecCompliantForm(b))return(await new n(qt.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(V.isArrayBufferView(b)||V.isArrayBuffer(b))return b.byteLength;if(V.isURLSearchParams(b)&&(b=b+""),V.isString(b))return(await h(b)).byteLength},C=async(b,_)=>{const k=V.toFiniteNumber(b.getContentLength());return k??w(_)};return async b=>{let{url:_,method:k,data:y,signal:j,cancelToken:x,timeout:E,onDownloadProgress:A,onUploadProgress:T,responseType:B,headers:O,withCredentials:R="same-origin",fetchOptions:N}=kx(b),M=e||fetch;B=B?(B+"").toLowerCase():"text";let q=l3([j,x&&x.toAbortSignal()],E),$=null;const Z=q&&q.unsubscribe&&(()=>{q.unsubscribe()});let W;try{if(T&&f&&k!=="get"&&k!=="head"&&(W=await C(O,y))!==0){let te=new n(_,{method:"POST",body:y,duplex:"half"}),se;if(V.isFormData(y)&&(se=te.headers.get("content-type"))&&O.setContentType(se),te.body){const[pe,ue]=h0(W,hu(f0(T)));y=m0(te.body,g0,pe,ue)}}V.isString(R)||(R=R?"include":"omit");const G=a&&"credentials"in n.prototype,K={...N,signal:q,method:k.toUpperCase(),headers:O.normalize().toJSON(),body:y,duplex:"half",credentials:G?R:void 0};$=a&&new n(_,K);let D=await(a?M($,N):M(_,K));const Q=m&&(B==="stream"||B==="response");if(m&&(A||Q&&Z)){const te={};["status","statusText","headers"].forEach(me=>{te[me]=D[me]});const se=V.toFiniteNumber(D.headers.get("content-length")),[pe,ue]=A&&h0(se,hu(f0(A),!0))||[];D=new r(m0(D.body,g0,pe,()=>{ue&&ue(),Z&&Z()}),te)}B=B||"text";let U=await g[V.findKey(g,B)||"text"](D,b);return!Q&&Z&&Z(),await new Promise((te,se)=>{bx(te,se,{data:U,headers:vn.from(D.headers),status:D.status,statusText:D.statusText,config:b,request:$})})}catch(G){throw Z&&Z(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new Ee("Network Error",Ee.ERR_NETWORK,b,$),{cause:G.cause||G}):Ee.from(G,G&&G.code,b,$)}}},p3=new Map,Sx=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:s}=e,a=[r,s,n];let c=a.length,d=c,h,f,m=p3;for(;d--;)h=a[d],f=m.get(h),f===void 0&&m.set(h,f=d?new Map:f3(e)),m=f;return f};Sx();const zf={http:ON,xhr:a3,fetch:{get:Sx}};V.forEach(zf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const x0=t=>`- ${t}`,m3=t=>V.isFunction(t)||t===null||t===!1,Cx={getAdapter:(t,e)=>{t=V.isArray(t)?t:[t];const{length:n}=t;let r,s;const a={};for(let c=0;c<n;c++){r=t[c];let d;if(s=r,!m3(r)&&(s=zf[(d=String(r)).toLowerCase()],s===void 0))throw new Ee(`Unknown adapter '${d}'`);if(s&&(V.isFunction(s)||(s=s.get(e))))break;a[d||"#"+c]=s}if(!s){const c=Object.entries(a).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let d=n?c.length>1?`since :
`+c.map(x0).join(`
`):" "+x0(c[0]):"as no adapter specified";throw new Ee("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return s},adapters:zf};function uh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Wo(null,t)}function w0(t){return uh(t),t.headers=vn.from(t.headers),t.data=ch.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Cx.getAdapter(t.adapter||Sl.adapter,t)(t).then(function(r){return uh(t),r.data=ch.call(t,t.transformResponse,r),r.headers=vn.from(r.headers),r},function(r){return wx(r)||(uh(t),r&&r.response&&(r.response.data=ch.call(t,t.transformResponse,r.response),r.response.headers=vn.from(r.response.headers))),Promise.reject(r)})}const Px="1.12.2",Uu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Uu[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const b0={};Uu.transitional=function(e,n,r){function s(a,c){return"[Axios v"+Px+"] Transitional option '"+a+"'"+c+(r?". "+r:"")}return(a,c,d)=>{if(e===!1)throw new Ee(s(c," has been removed"+(n?" in "+n:"")),Ee.ERR_DEPRECATED);return n&&!b0[c]&&(b0[c]=!0,console.warn(s(c," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,c,d):!0}};Uu.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function g3(t,e,n){if(typeof t!="object")throw new Ee("options must be an object",Ee.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const a=r[s],c=e[a];if(c){const d=t[a],h=d===void 0||c(d,a,t);if(h!==!0)throw new Ee("option "+a+" must be "+h,Ee.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ee("Unknown option "+a,Ee.ERR_BAD_OPTION)}}const Nc={assertOptions:g3,validators:Uu},dr=Nc.validators;let hs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new u0,response:new u0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=_s(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:a}=n;r!==void 0&&Nc.assertOptions(r,{silentJSONParsing:dr.transitional(dr.boolean),forcedJSONParsing:dr.transitional(dr.boolean),clarifyTimeoutError:dr.transitional(dr.boolean)},!1),s!=null&&(V.isFunction(s)?n.paramsSerializer={serialize:s}:Nc.assertOptions(s,{encode:dr.function,serialize:dr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Nc.assertOptions(n,{baseUrl:dr.spelling("baseURL"),withXsrfToken:dr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=a&&V.merge(a.common,a[n.method]);a&&V.forEach(["delete","get","head","post","put","patch","common"],b=>{delete a[b]}),n.headers=vn.concat(c,a);const d=[];let h=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(h=h&&_.synchronous,d.unshift(_.fulfilled,_.rejected))});const f=[];this.interceptors.response.forEach(function(_){f.push(_.fulfilled,_.rejected)});let m,g=0,w;if(!h){const b=[w0.bind(this),void 0];for(b.unshift(...d),b.push(...f),w=b.length,m=Promise.resolve(n);g<w;)m=m.then(b[g++],b[g++]);return m}w=d.length;let C=n;for(;g<w;){const b=d[g++],_=d[g++];try{C=b(C)}catch(k){_.call(this,k);break}}try{m=w0.call(this,C)}catch(b){return Promise.reject(b)}for(g=0,w=f.length;g<w;)m=m.then(f[g++],f[g++]);return m}getUri(e){e=_s(this.defaults,e);const n=jx(e.baseURL,e.url,e.allowAbsoluteUrls);return yx(n,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){hs.prototype[e]=function(n,r){return this.request(_s(r||{},{method:e,url:n,data:(r||{}).data}))}});V.forEach(["post","put","patch"],function(e){function n(r){return function(a,c,d){return this.request(_s(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}hs.prototype[e]=n(),hs.prototype[e+"Form"]=n(!0)});let v3=class Ex{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const c=new Promise(d=>{r.subscribe(d),a=d}).then(s);return c.cancel=function(){r.unsubscribe(a)},c},e(function(a,c,d){r.reason||(r.reason=new Wo(a,c,d),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Ex(function(s){e=s}),cancel:e}}};function y3(t){return function(n){return t.apply(null,n)}}function _3(t){return V.isObject(t)&&t.isAxiosError===!0}const Bf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Bf).forEach(([t,e])=>{Bf[e]=t});function Tx(t){const e=new hs(t),n=ox(hs.prototype.request,e);return V.extend(n,hs.prototype,e,{allOwnKeys:!0}),V.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Tx(_s(t,s))},n}const ft=Tx(Sl);ft.Axios=hs;ft.CanceledError=Wo;ft.CancelToken=v3;ft.isCancel=wx;ft.VERSION=Px;ft.toFormData=Fu;ft.AxiosError=Ee;ft.Cancel=ft.CanceledError;ft.all=function(e){return Promise.all(e)};ft.spread=y3;ft.isAxiosError=_3;ft.mergeConfig=_s;ft.AxiosHeaders=vn;ft.formToJSON=t=>xx(V.isHTMLForm(t)?new FormData(t):t);ft.getAdapter=Cx.getAdapter;ft.HttpStatusCode=Bf;ft.default=ft;const{Axios:PI,AxiosError:EI,CanceledError:TI,isCancel:LI,CancelToken:OI,VERSION:NI,all:RI,Cancel:II,isAxiosError:MI,spread:AI,toFormData:DI,AxiosHeaders:zI,HttpStatusCode:BI,formToJSON:$I,getAdapter:FI,mergeConfig:UI}=ft;var Lx={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(nn,function(){var n=1e3,r=6e4,s=36e5,a="millisecond",c="second",d="minute",h="hour",f="day",m="week",g="month",w="quarter",C="year",b="date",_="Invalid Date",k=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Z){var W=["th","st","nd","rd"],G=Z%100;return"["+Z+(W[(G-20)%10]||W[G]||W[0])+"]"}},x=function(Z,W,G){var K=String(Z);return!K||K.length>=W?Z:""+Array(W+1-K.length).join(G)+Z},E={s:x,z:function(Z){var W=-Z.utcOffset(),G=Math.abs(W),K=Math.floor(G/60),D=G%60;return(W<=0?"+":"-")+x(K,2,"0")+":"+x(D,2,"0")},m:function Z(W,G){if(W.date()<G.date())return-Z(G,W);var K=12*(G.year()-W.year())+(G.month()-W.month()),D=W.clone().add(K,g),Q=G-D<0,U=W.clone().add(K+(Q?-1:1),g);return+(-(K+(G-D)/(Q?D-U:U-D))||0)},a:function(Z){return Z<0?Math.ceil(Z)||0:Math.floor(Z)},p:function(Z){return{M:g,y:C,w:m,d:f,D:b,h,m:d,s:c,ms:a,Q:w}[Z]||String(Z||"").toLowerCase().replace(/s$/,"")},u:function(Z){return Z===void 0}},A="en",T={};T[A]=j;var B="$isDayjsObject",O=function(Z){return Z instanceof q||!(!Z||!Z[B])},R=function Z(W,G,K){var D;if(!W)return A;if(typeof W=="string"){var Q=W.toLowerCase();T[Q]&&(D=Q),G&&(T[Q]=G,D=Q);var U=W.split("-");if(!D&&U.length>1)return Z(U[0])}else{var te=W.name;T[te]=W,D=te}return!K&&D&&(A=D),D||!K&&A},N=function(Z,W){if(O(Z))return Z.clone();var G=typeof W=="object"?W:{};return G.date=Z,G.args=arguments,new q(G)},M=E;M.l=R,M.i=O,M.w=function(Z,W){return N(Z,{locale:W.$L,utc:W.$u,x:W.$x,$offset:W.$offset})};var q=function(){function Z(G){this.$L=R(G.locale,null,!0),this.parse(G),this.$x=this.$x||G.x||{},this[B]=!0}var W=Z.prototype;return W.parse=function(G){this.$d=function(K){var D=K.date,Q=K.utc;if(D===null)return new Date(NaN);if(M.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var U=D.match(k);if(U){var te=U[2]-1||0,se=(U[7]||"0").substring(0,3);return Q?new Date(Date.UTC(U[1],te,U[3]||1,U[4]||0,U[5]||0,U[6]||0,se)):new Date(U[1],te,U[3]||1,U[4]||0,U[5]||0,U[6]||0,se)}}return new Date(D)}(G),this.init()},W.init=function(){var G=this.$d;this.$y=G.getFullYear(),this.$M=G.getMonth(),this.$D=G.getDate(),this.$W=G.getDay(),this.$H=G.getHours(),this.$m=G.getMinutes(),this.$s=G.getSeconds(),this.$ms=G.getMilliseconds()},W.$utils=function(){return M},W.isValid=function(){return this.$d.toString()!==_},W.isSame=function(G,K){var D=N(G);return this.startOf(K)<=D&&D<=this.endOf(K)},W.isAfter=function(G,K){return N(G)<this.startOf(K)},W.isBefore=function(G,K){return this.endOf(K)<N(G)},W.$g=function(G,K,D){return M.u(G)?this[K]:this.set(D,G)},W.unix=function(){return Math.floor(this.valueOf()/1e3)},W.valueOf=function(){return this.$d.getTime()},W.startOf=function(G,K){var D=this,Q=!!M.u(K)||K,U=M.p(G),te=function(ee,_e){var xe=M.w(D.$u?Date.UTC(D.$y,_e,ee):new Date(D.$y,_e,ee),D);return Q?xe:xe.endOf(f)},se=function(ee,_e){return M.w(D.toDate()[ee].apply(D.toDate("s"),(Q?[0,0,0,0]:[23,59,59,999]).slice(_e)),D)},pe=this.$W,ue=this.$M,me=this.$D,Y="set"+(this.$u?"UTC":"");switch(U){case C:return Q?te(1,0):te(31,11);case g:return Q?te(1,ue):te(0,ue+1);case m:var he=this.$locale().weekStart||0,ke=(pe<he?pe+7:pe)-he;return te(Q?me-ke:me+(6-ke),ue);case f:case b:return se(Y+"Hours",0);case h:return se(Y+"Minutes",1);case d:return se(Y+"Seconds",2);case c:return se(Y+"Milliseconds",3);default:return this.clone()}},W.endOf=function(G){return this.startOf(G,!1)},W.$set=function(G,K){var D,Q=M.p(G),U="set"+(this.$u?"UTC":""),te=(D={},D[f]=U+"Date",D[b]=U+"Date",D[g]=U+"Month",D[C]=U+"FullYear",D[h]=U+"Hours",D[d]=U+"Minutes",D[c]=U+"Seconds",D[a]=U+"Milliseconds",D)[Q],se=Q===f?this.$D+(K-this.$W):K;if(Q===g||Q===C){var pe=this.clone().set(b,1);pe.$d[te](se),pe.init(),this.$d=pe.set(b,Math.min(this.$D,pe.daysInMonth())).$d}else te&&this.$d[te](se);return this.init(),this},W.set=function(G,K){return this.clone().$set(G,K)},W.get=function(G){return this[M.p(G)]()},W.add=function(G,K){var D,Q=this;G=Number(G);var U=M.p(K),te=function(ue){var me=N(Q);return M.w(me.date(me.date()+Math.round(ue*G)),Q)};if(U===g)return this.set(g,this.$M+G);if(U===C)return this.set(C,this.$y+G);if(U===f)return te(1);if(U===m)return te(7);var se=(D={},D[d]=r,D[h]=s,D[c]=n,D)[U]||1,pe=this.$d.getTime()+G*se;return M.w(pe,this)},W.subtract=function(G,K){return this.add(-1*G,K)},W.format=function(G){var K=this,D=this.$locale();if(!this.isValid())return D.invalidDate||_;var Q=G||"YYYY-MM-DDTHH:mm:ssZ",U=M.z(this),te=this.$H,se=this.$m,pe=this.$M,ue=D.weekdays,me=D.months,Y=D.meridiem,he=function(_e,xe,Ce,$e){return _e&&(_e[xe]||_e(K,Q))||Ce[xe].slice(0,$e)},ke=function(_e){return M.s(te%12||12,_e,"0")},ee=Y||function(_e,xe,Ce){var $e=_e<12?"AM":"PM";return Ce?$e.toLowerCase():$e};return Q.replace(y,function(_e,xe){return xe||function(Ce){switch(Ce){case"YY":return String(K.$y).slice(-2);case"YYYY":return M.s(K.$y,4,"0");case"M":return pe+1;case"MM":return M.s(pe+1,2,"0");case"MMM":return he(D.monthsShort,pe,me,3);case"MMMM":return he(me,pe);case"D":return K.$D;case"DD":return M.s(K.$D,2,"0");case"d":return String(K.$W);case"dd":return he(D.weekdaysMin,K.$W,ue,2);case"ddd":return he(D.weekdaysShort,K.$W,ue,3);case"dddd":return ue[K.$W];case"H":return String(te);case"HH":return M.s(te,2,"0");case"h":return ke(1);case"hh":return ke(2);case"a":return ee(te,se,!0);case"A":return ee(te,se,!1);case"m":return String(se);case"mm":return M.s(se,2,"0");case"s":return String(K.$s);case"ss":return M.s(K.$s,2,"0");case"SSS":return M.s(K.$ms,3,"0");case"Z":return U}return null}(_e)||U.replace(":","")})},W.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},W.diff=function(G,K,D){var Q,U=this,te=M.p(K),se=N(G),pe=(se.utcOffset()-this.utcOffset())*r,ue=this-se,me=function(){return M.m(U,se)};switch(te){case C:Q=me()/12;break;case g:Q=me();break;case w:Q=me()/3;break;case m:Q=(ue-pe)/6048e5;break;case f:Q=(ue-pe)/864e5;break;case h:Q=ue/s;break;case d:Q=ue/r;break;case c:Q=ue/n;break;default:Q=ue}return D?Q:M.a(Q)},W.daysInMonth=function(){return this.endOf(g).$D},W.$locale=function(){return T[this.$L]},W.locale=function(G,K){if(!G)return this.$L;var D=this.clone(),Q=R(G,K,!0);return Q&&(D.$L=Q),D},W.clone=function(){return M.w(this.$d,this)},W.toDate=function(){return new Date(this.valueOf())},W.toJSON=function(){return this.isValid()?this.toISOString():null},W.toISOString=function(){return this.$d.toISOString()},W.toString=function(){return this.$d.toUTCString()},Z}(),$=q.prototype;return N.prototype=$,[["$ms",a],["$s",c],["$m",d],["$H",h],["$W",f],["$M",g],["$y",C],["$D",b]].forEach(function(Z){$[Z[1]]=function(W){return this.$g(W,Z[0],Z[1])}}),N.extend=function(Z,W){return Z.$i||(Z(W,q,N),Z.$i=!0),N},N.locale=R,N.isDayjs=O,N.unix=function(Z){return N(1e3*Z)},N.en=T[A],N.Ls=T,N.p={},N})})(Lx);var x3=Lx.exports;const w3=Hf(x3);var Ox={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(nn,function(){return function(n,r,s){n=n||{};var a=r.prototype,c={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function d(f,m,g,w){return a.fromToBase(f,m,g,w)}s.en.relativeTime=c,a.fromToBase=function(f,m,g,w,C){for(var b,_,k,y=g.$locale().relativeTime||c,j=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],x=j.length,E=0;E<x;E+=1){var A=j[E];A.d&&(b=w?s(f).diff(g,A.d,!0):g.diff(f,A.d,!0));var T=(n.rounding||Math.round)(Math.abs(b));if(k=b>0,T<=A.r||!A.r){T<=1&&E>0&&(A=j[E-1]);var B=y[A.l];C&&(T=C(""+T)),_=typeof B=="string"?B.replace("%d",T):B(T,m,A.l,k);break}}if(m)return _;var O=k?y.future:y.past;return typeof O=="function"?O(_):O.replace("%s",_)},a.to=function(f,m){return d(f,m,this,!0)},a.from=function(f,m){return d(f,m,this)};var h=function(f){return f.$u?s.utc():s()};a.toNow=function(f){return this.to(h(this),f)},a.fromNow=function(f){return this.from(h(this),f)}}})})(Ox);var b3=Ox.exports;const j3=Hf(b3);w3.extend(j3);const k3="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",dh="eldin007b/gls-scraper",j0="scraper.yml",S3=()=>{const[t,e]=S.useState(!1),[n,r]=S.useState(null),[s,a]=S.useState(!1),[c,d]=S.useState([]),[h,f]=S.useState(k3),m=h&&h.length>10;S.useEffect(()=>{const x=()=>{try{const A=localStorage.getItem("github_scraper_history");d(A?JSON.parse(A):[])}catch(A){console.error("Greka prilikom uitavanja historije:",A)}},E=async()=>{a(!0);try{const A=await w();r(A)}catch(A){console.error("Greka prilikom uitavanja GitHub workflow statusa:",A)}finally{a(!1)}};x(),E()},[]);const g=async(x,E)=>{const A={status:x,mode:E,timestamp:new Date().toLocaleString("bs-BA")};try{const T=[A,...c];d(T),localStorage.setItem("github_scraper_history",JSON.stringify(T))}catch(T){console.error("Greka prilikom uvanja historije:",T)}},w=async()=>{if(!m)return console.warn("GitHub token nije dostupan"),null;try{const x=await ft.get(`https://api.github.com/repos/${dh}/actions/runs`,{headers:{Authorization:`token ${h}`,Accept:"application/vnd.github.v3+json","User-Agent":"Evidencija-App/1.0.0"},params:{per_page:1}});if(x.data.workflow_runs&&x.data.workflow_runs.length>0){const E=x.data.workflow_runs[0];return{name:E.name,status:E.status,conclusion:E.conclusion,started_at:E.run_started_at||E.created_at,duration:E.updated_at?Math.round((new Date(E.updated_at)-new Date(E.run_started_at||E.created_at))/6e4):null,mode:E.event==="schedule"?"Automatski":"Runo",html_url:E.html_url,id:E.id}}else return null}catch(x){return console.error("Greka prilikom dohvaanja statusa workflow-a:",x),null}},C=async()=>{if(!m){alert("GitHub token nije postavljen! Molimo unesite valjan token.");return}e(!0),a(!0),r(null);try{const x=await ft.post(`https://api.github.com/repos/${dh}/actions/workflows/${j0}/dispatches`,{ref:"main"},{headers:{Authorization:`token ${h}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json","User-Agent":"Evidencija-App/1.0.0"}});if(x.status===204)await g("success","manual"),alert("Uspjeh! GitHub Actions workflow je uspjeno pokrenut!"),setTimeout(async()=>{const E=await w();r(E),a(!1)},3e3);else throw new Error(`GitHub API vratilo status: ${x.status}`)}catch(x){await g("error","manual"),alert(`Greka: Neuspjeno pokretanje GitHub Actions: ${x.message}`),a(!1)}finally{e(!1)}},b=x=>{const E=new Date,A=new Date(x),T=Math.floor((E-A)/(1e3*60));if(T<60)return`${T} minuta ago`;if(T<1440){const B=Math.floor(T/60);return`${B===1?"an":B} hour${B===1?"":"s"} ago`}else{const B=Math.floor(T/1440);return`${B} day${B===1?"":"s"} ago`}},_=C,k=()=>{if(s)return o.jsx("span",{children:" Uitavanje statusa..."});if(n){const x=n.status==="completed"?n.conclusion==="success"?"#22c55e":"#ef4444":"#f59e0b";return o.jsxs("div",{style:{marginTop:10,padding:15,background:"rgba(255, 255, 255, 0.1)",borderRadius:12,border:`2px solid ${x}`,backdropFilter:"blur(10px)"},children:[o.jsxs("div",{style:{color:x,fontWeight:"bold",fontSize:"16px",marginBottom:"8px"},children:[" ",n.name||"GitHub Workflow"]}),o.jsxs("div",{style:{display:"grid",gap:"6px",fontSize:"14px",color:"var(--text-on-dark, #f1f5f9)"},children:[o.jsxs("div",{children:[" Status: ",o.jsx("strong",{children:n.status})]}),n.conclusion&&o.jsxs("div",{children:[" Zakljuak: ",o.jsx("strong",{children:n.conclusion})]}),o.jsxs("div",{children:[" Pokrenuto: ",o.jsx("strong",{children:b(n.started_at)})]}),n.duration&&o.jsxs("div",{children:[" Trajanje: ",o.jsxs("strong",{children:[n.duration," min"]})]}),o.jsxs("div",{children:[" Tip: ",o.jsx("strong",{children:n.mode})]}),n.html_url&&o.jsx("div",{children:o.jsx("a",{href:n.html_url,target:"_blank",rel:"noopener noreferrer",style:{color:x,textDecoration:"underline"},children:" Pogledaj na GitHub-u"})})]})]})}return o.jsx(sl,{icon:o.jsx("span",{children:""}),text:"Nema dostupnih informacija o statusu."})},y=()=>{localStorage.setItem("github_token",h),alert("GitHub token je sauvan! Restart aplikacije da promjene stupaju na snagu.")},j=()=>{f(""),localStorage.removeItem("github_token"),alert("GitHub token je obrisan!")};return o.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 50%, rgba(255, 255, 255, 0.04) 100%)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"16px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)",padding:"2rem",color:"var(--text-on-dark, #f1f5f9)"},children:[o.jsx("h2",{style:{fontWeight:"bold",marginBottom:20,color:"var(--text-on-dark, #f1f5f9)"},children:" GitHub Actions Control Panel"}),o.jsxs("div",{style:{background:m?"rgba(34, 197, 94, 0.15)":"rgba(255, 193, 7, 0.15)",border:m?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[o.jsx("h3",{style:{color:m?"#22c55e":"#ffc107",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:m?" GitHub API Konfigurisan":" GitHub Token potreban"}),o.jsxs("div",{style:{display:"grid",gap:"8px",fontSize:"14px"},children:[o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:[" Repository: ",o.jsx("strong",{children:dh})]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:[" Workflow: ",o.jsx("strong",{children:j0})]}),o.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:[" Token: ",o.jsx("strong",{children:m?`${h.substring(0,8)}...`:"Nije postavljen"})]})]}),!m&&o.jsxs("div",{style:{marginTop:"12px"},children:[o.jsxs("p",{style:{color:"var(--text-on-dark, #f1f5f9)",marginBottom:"12px",fontSize:"14px"},children:["Za pokretanje GitHub Actions potreban je Personal Access Token s dozvolama: ",o.jsx("code",{children:"repo"}),", ",o.jsx("code",{children:"workflow"})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[o.jsx("input",{type:"password",value:h,onChange:x=>f(x.target.value),placeholder:"Unesite GitHub Personal Access Token",style:{flex:1,padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}}),o.jsx(wn,{onClick:y,bgColor:"#ffc107",children:" Sauvaj"})]})]}),m&&o.jsx("div",{style:{marginTop:"12px",display:"flex",gap:"8px"},children:o.jsx(wn,{onClick:j,bgColor:"#dc3545",children:" Obrii Token"})})]}),o.jsx(wn,{loading:t||s,onClick:_,style:{marginBottom:20},bgColor:m?"#238636":"#6c757d",disabled:!m,children:t?" Pokretanje...":m?" Pokreni Scraper Workflow":" Token potreban"}),k(),o.jsx("h3",{style:{fontWeight:"bold",marginTop:30,marginBottom:15,color:"var(--text-on-dark, #f1f5f9)"},children:" Historija Pokretanja"}),o.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:c.length===0?o.jsx(sl,{icon:o.jsx("span",{children:""}),text:"Nema historije pokretanja"}):c.map((x,E)=>o.jsx("div",{style:{padding:12,marginBottom:8,background:x.status==="success"?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",border:x.status==="success"?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(239, 68, 68, 0.3)",borderRadius:8,backdropFilter:"blur(5px)"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:[x.status==="success"?"":""," ",x.status==="success"?"Uspjeno":"Greka"]}),o.jsxs("div",{style:{fontSize:"12px",opacity:.8,color:"var(--text-on-dark, #f1f5f9)"},children:[" Tip: ",x.mode==="manual"?"Runo pokretanje":"Automatsko pokretanje"]})]}),o.jsxs("div",{style:{fontSize:"12px",opacity:.7,color:"var(--text-on-dark, #f1f5f9)"},children:[" ",x.timestamp]})]})},E))})]})},C3=()=>{const[t,e]=S.useState({}),[n,r]=S.useState(!1),[s,a]=S.useState(""),[c,d]=S.useState({drivers:!0,deliveries:!0,extra_rides:!0,extra_rides_pending:!0,holidays:!0}),[h,f]=S.useState(!1),[m,g]=S.useState(null),[w,C]=S.useState([]),b=[{key:"drivers",name:"Vozai",icon:"",description:"Svi vozai i njihovi podaci"},{key:"deliveries",name:"Dostave",icon:"",description:"Svi podaci o dostavama"},{key:"extra_rides",name:"Extra vonje",icon:"",description:"Odobrene extra vonje"},{key:"extra_rides_pending",name:"Pending vonje",icon:"",description:"Vonje na ekanju"},{key:"holidays",name:"Praznici",icon:"",description:"Kalendar praznika"}];S.useEffect(()=>{_()},[]);const _=()=>{const O=JSON.parse(localStorage.getItem("backupHistory")||"[]");C(O.slice(-10))},k=O=>{const R=JSON.parse(localStorage.getItem("backupHistory")||"[]"),N={id:Date.now(),timestamp:new Date().toISOString(),tables:Object.keys(O),totalRecords:Object.values(O).reduce((M,q)=>M+q.length,0),...O};R.push(N),localStorage.setItem("backupHistory",JSON.stringify(R.slice(-20))),_()},y=async()=>{r(!0),a(" Kreiranje kompletnog backup-a...");try{const O={};let R=0;for(const N of b)if(c[N.key]){a(` Backup tabele: ${N.name}...`);const{data:M,error:q}=await ye.from(N.key).select("*");if(q)throw q;O[N.key]=M,R+=M.length,await new Promise($=>setTimeout($,500))}O._metadata={created_at:new Date().toISOString(),version:"1.0",total_records:R,tables:Object.keys(O).filter(N=>N!=="_metadata")},e(O),k(O),a(` Backup kreiran! Ukupno ${R} zapisa`),j(O)}catch(O){console.error("Backup error:",O),a(` Greka: ${O.message}`)}finally{r(!1)}},j=(O=t)=>{const N=`supabase-backup-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,M=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),q=URL.createObjectURL(M),$=document.createElement("a");$.href=q,$.download=N,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(q)},x=O=>{const R=O.target.files[0];if(!R)return;const N=new FileReader;N.onload=async M=>{try{const q=JSON.parse(M.target.result);await E(q)}catch(q){a(` Neispravna backup datoteka: ${q.message}`)}},N.readAsText(R)},E=async O=>{r(!0),a(" Vraanje backup-a u bazu...");try{let R=0;for(const[N,M]of Object.entries(O)){if(N==="_metadata"||!c[N])continue;a(` Vraanje tabele: ${N} (${M.length} zapisa)...`);const q=100;for(let $=0;$<M.length;$+=q){const Z=M.slice($,$+q),{error:W}=await ye.from(N).upsert(Z);if(W)throw W;R+=Z.length,await new Promise(G=>setTimeout(G,200))}}a(` Backup vraen! ${R} zapisa uspeno vraeno`)}catch(R){console.error("Restore error:",R),a(` Greka pri vraanju: ${R.message}`)}finally{r(!1)}},A=async O=>{r(!0),a(` Brisanje podataka iz tabele: ${O}...`);try{const{data:R,error:N}=await ye.from(O).select("id");if(N)throw N;if(R.length===0){a(` Tabela ${O} je ve prazna`),r(!1);return}const M=100;let q=0;for(let $=0;$<R.length;$+=M){const W=R.slice($,$+M).map(K=>K.id),{error:G}=await ye.from(O).delete().in("id",W);if(G)throw G;q+=W.length,a(` Obrisano ${q}/${R.length} zapisa iz ${O}...`),await new Promise(K=>setTimeout(K,200))}a(` Uspeno obrisano ${q} zapisa iz tabele ${O}`)}catch(R){console.error("Delete error:",R),a(` Greka pri brisanju: ${R.message}`)}finally{r(!1),f(!1),g(null)}},[T,B]=S.useState({});return S.useEffect(()=>{(async()=>{const R={};for(const N of b)try{const{count:M,error:q}=await ye.from(N.key).select("*",{count:"exact",head:!0});q||(R[N.key]=M)}catch{R[N.key]=0}B(R)})()},[]),o.jsxs("div",{style:{padding:"1.5rem",color:"var(--text-on-dark)"},children:[o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsxs("h2",{style:{color:"#44cadf",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Tc,{size:24}),"Sistem & Backup Upravljanje"]}),o.jsx("p",{style:{opacity:.8,margin:0},children:"Kompletno backup/restore reenje za Supabase bazu podataka"})]}),s&&o.jsx("div",{style:{padding:"1rem",background:n?"rgba(255, 193, 7, 0.1)":"rgba(34, 197, 94, 0.1)",borderRadius:"8px",marginBottom:"1.5rem",border:`1px solid ${n?"rgba(255, 193, 7, 0.2)":"rgba(34, 197, 94, 0.2)"}`,fontFamily:"monospace"},children:s}),o.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[o.jsx("h3",{style:{marginBottom:"1rem",color:"#22c55e"},children:" Izbor tabela za backup/restore"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem"},children:b.map(O=>o.jsxs("div",{style:{padding:"1rem",background:c[O.key]?"rgba(68, 202, 223, 0.1)":"rgba(255, 255, 255, 0.02)",borderRadius:"8px",border:`1px solid ${c[O.key]?"rgba(68, 202, 223, 0.3)":"rgba(255, 255, 255, 0.1)"}`,cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>d(R=>({...R,[O.key]:!R[O.key]})),children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:O.icon}),o.jsx("strong",{children:O.name}),o.jsxs("span",{style:{marginLeft:"auto",padding:"0.2rem 0.5rem",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",fontSize:"0.8rem"},children:[T[O.key]||0," zapisa"]})]}),o.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:O.description}),o.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",width:"16px",height:"16px",borderRadius:"50%",background:c[O.key]?"#22c55e":"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"white"},children:c[O.key]?"":""})]},O.key))})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsxs("div",{style:{background:"rgba(68, 202, 223, 0.1)",borderRadius:"12px",padding:"1.5rem",border:"1px solid rgba(68, 202, 223, 0.2)"},children:[o.jsx("h3",{style:{color:"#44cadf",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Kreiranje Backup-a"}),o.jsx("p",{style:{opacity:.8,marginBottom:"1rem",fontSize:"0.9rem"},children:"Kreiraj backup izabranih tabela i preuzmi kao JSON fajl"}),o.jsx("button",{onClick:y,disabled:n||Object.values(c).every(O=>!O),style:{width:"100%",padding:"0.75rem",background:"linear-gradient(145deg, #44cadf, #22d3ee)",color:"white",border:"none",borderRadius:"8px",cursor:n?"not-allowed":"pointer",fontWeight:"bold",opacity:n?.6:1},children:n?" Kreiram backup...":" Kreiraj i preuzmi backup"})]}),o.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",borderRadius:"12px",padding:"1.5rem",border:"1px solid rgba(34, 197, 94, 0.2)"},children:[o.jsx("h3",{style:{color:"#22c55e",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Restore Backup-a"}),o.jsx("p",{style:{opacity:.8,marginBottom:"1rem",fontSize:"0.9rem"},children:"Vrati podatke iz backup JSON fajla u bazu"}),o.jsx("input",{type:"file",accept:".json",onChange:x,disabled:n,style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",cursor:"pointer"}})]}),o.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1.5rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[o.jsx("h3",{style:{color:"#ef4444",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Brisanje Podataka"}),o.jsx("p",{style:{opacity:.8,marginBottom:"1rem",fontSize:"0.9rem"},children:"Obrii sve podatke iz izabranih tabela (OPREZ!)"}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:b.map(O=>c[O.key]&&o.jsxs("button",{onClick:()=>{g(O),f(!0)},disabled:n,style:{padding:"0.5rem 1rem",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:[" ",O.name]},O.key))})]})]}),o.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[o.jsx("h3",{style:{color:"#a855f7",marginBottom:"1rem"},children:" Backup Istorija"}),w.length===0?o.jsx("p",{style:{opacity:.6,fontStyle:"italic"},children:"Nema prethodnih backup-ova"}):o.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:w.slice().reverse().map(O=>o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:new Date(O.timestamp).toLocaleString()}),o.jsxs("div",{style:{fontSize:"0.8rem",opacity:.8},children:[O.tables.join(", "),"  ",O.totalRecords," zapisa"]})]}),o.jsx("button",{onClick:()=>j(O),style:{padding:"0.4rem 0.8rem",background:"rgba(168, 85, 247, 0.2)",color:"#a855f7",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:" Download"})]},O.id))})]}),h&&m&&o.jsx(ol,{onClose:()=>{f(!1),g(null)},children:o.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h2",{style:{color:"#ef4444",marginBottom:"1rem"},children:"Potvrdi brisanje"}),o.jsxs("p",{style:{marginBottom:"1.5rem"},children:["Da li ste sigurni da elite da obriete ",o.jsx("strong",{children:"SVE PODATKE"})," iz tabele:"]}),o.jsxs("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[o.jsxs("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:[m.icon," ",m.name]}),o.jsxs("div",{style:{fontSize:"0.9rem",opacity:.8},children:[T[m.key]||0," zapisa e biti TRAJNO OBRISANO"]})]}),o.jsx("p",{style:{fontSize:"0.9rem",opacity:.8,marginBottom:"2rem"},children:"Ova akcija se NE MOE ponititi! Preporuujemo da prvo napravite backup."}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>{f(!1),g(null)},style:{padding:"0.75rem 1.5rem",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",cursor:"pointer"},children:" Otkai"}),o.jsx("button",{onClick:()=>A(m.key),style:{padding:"0.75rem 1.5rem",background:"linear-gradient(145deg, #ef4444, #dc2626)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:" DA, OBRII SVE"})]})]})})]})};function P3(){const[t,e]=S.useState("dashboard"),[n,r]=S.useState({totalDeliveries:0,totalExtraRides:0,activeDrivers:0,totalDrivers:0,pendingRides:0,completedToday:0,lastWeekComparison:0}),[s,a]=S.useState(!0),{drivers:c}=xl();return S.useEffect(()=>{const d=async()=>{var h;a(!0);try{const f=localStorage.getItem("monthlyPerformance"),m=f?JSON.parse(f):{},g=new Date().getMonth(),w=m[g]||{value:0,change:0},C=JSON.parse(localStorage.getItem("driverStatsCache")||"{}"),b=Object.values(C).find(E=>{var A;return E.stats&&E.stats[0]&&((A=E.stats[0].label)==null?void 0:A.includes("Danas"))}),_=((h=b==null?void 0:b.stats[0])==null?void 0:h.value)||0,[k,y]=await Promise.all([ye.from("extra_rides").select("id",{count:"exact"}),ye.from("extra_rides_pending").select("id",{count:"exact"})]),j=c.filter(E=>E.aktivan).length,x=c.length;r({totalDeliveries:w.value||0,totalExtraRides:k.count||0,activeDrivers:j,totalDrivers:x,pendingRides:y.count||0,completedToday:_,lastWeekComparison:0})}catch(f){console.error("Greka pri dohvaanju dashboard podataka:",f)}finally{a(!1)}};c.length>0&&d()},[c]),o.jsxs("div",{className:Ye.screenContainer,children:[o.jsx("div",{className:Ye.header,children:o.jsxs("div",{className:Ye.headerContent,children:[o.jsxs("div",{className:Ye.titleSection,children:[o.jsx(Tc,{className:Ye.titleIcon}),o.jsx("h1",{className:Ye.title,children:"Admin Panel"})]}),o.jsx(Kp,{})]})}),o.jsxs("div",{className:Ye.content,children:[o.jsxs("div",{className:Ye.tabsContainer,children:[o.jsxs("button",{className:`${Ye.tab} ${t==="dashboard"?Ye.activeTab:""}`,onClick:()=>e("dashboard"),children:[o.jsx(Zp,{className:Ye.tabIcon}),"Dashboard"]}),o.jsxs("button",{className:`${Ye.tab} ${t==="users"?Ye.activeTab:""}`,onClick:()=>e("users"),children:[o.jsx(Ro,{className:Ye.tabIcon}),"Korisnici"]}),o.jsxs("button",{className:`${Ye.tab} ${t==="rides"?Ye.activeTab:""}`,onClick:()=>e("rides"),children:[o.jsx(U1,{className:Ye.tabIcon}),"Vonje"]}),o.jsxs("button",{className:`${Ye.tab} ${t==="settings"?Ye.activeTab:""}`,onClick:()=>e("settings"),children:[o.jsx(Tc,{className:Ye.tabIcon}),"Sistem"]}),o.jsxs("button",{className:`${Ye.tab} ${t==="github"?Ye.activeTab:""}`,onClick:()=>e("github"),children:[o.jsx(Tc,{className:Ye.tabIcon}),"GitHub"]})]}),o.jsxs("div",{className:Ye.tabContent,children:[t==="dashboard"&&o.jsxs("div",{className:Ye.dashboardContent,children:[o.jsxs("div",{className:Ye.card,children:[o.jsx("h2",{children:" Pregled sistema u realnom vremenu"}),s?o.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-on-dark)"},children:" Uitavanje podataka..."}):o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[o.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"rgba(68, 202, 223, 0.1)",borderRadius:"12px",border:"1px solid rgba(68, 202, 223, 0.2)"},children:[o.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#44cadf"},children:n.totalDeliveries}),o.jsx("div",{style:{color:"var(--text-on-dark)",opacity:.9},children:"Dostave (ovaj mjesec)"}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-on-dark)",opacity:.7,marginTop:"4px"},children:[" Danas: ",n.completedToday]})]}),o.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"12px",border:"1px solid rgba(34, 197, 94, 0.2)"},children:[o.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#22c55e"},children:n.activeDrivers}),o.jsx("div",{style:{color:"var(--text-on-dark)",opacity:.9},children:"Aktivni vozai"}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-on-dark)",opacity:.7,marginTop:"4px"},children:[" Od ukupno ",n.totalDrivers]})]}),o.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"rgba(168, 85, 247, 0.1)",borderRadius:"12px",border:"1px solid rgba(168, 85, 247, 0.2)"},children:[o.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#a855f7"},children:n.totalExtraRides}),o.jsx("div",{style:{color:"var(--text-on-dark)",opacity:.9},children:"Extra vonje"}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-on-dark)",opacity:.7,marginTop:"4px"},children:[" Pending: ",n.pendingRides]})]}),o.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"rgba(255, 193, 7, 0.1)",borderRadius:"12px",border:"1px solid rgba(255, 193, 7, 0.2)"},children:[o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffc107"},children:[n.totalDeliveries>0?(n.totalDeliveries/(n.totalDeliveries+n.pendingRides)*100).toFixed(1):"0","%"]}),o.jsx("div",{style:{color:"var(--text-on-dark)",opacity:.9},children:"Uspenost"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-on-dark)",opacity:.7,marginTop:"4px"},children:" Trend pozitivan"})]})]})]}),o.jsxs("div",{className:Ye.card,children:[o.jsx("h2",{children:" Analitika performansi"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[o.jsxs("div",{style:{padding:"1rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[o.jsx("h3",{style:{color:"#44cadf",marginBottom:"0.5rem",fontSize:"1rem"},children:" Prosjek po vozau (mjesec)"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--text-on-dark)"},children:[n.activeDrivers>0?Math.round(n.totalDeliveries/n.activeDrivers):0," dostava"]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-on-dark)",opacity:.7,marginTop:"4px"},children:"baziran na Cell 5 podacima"})]}),o.jsxs("div",{style:{padding:"1rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[o.jsx("h3",{style:{color:"#22c55e",marginBottom:"0.5rem",fontSize:"1rem"},children:" Dananja aktivnost"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--text-on-dark)"},children:[n.completedToday," dostava"]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-on-dark)",opacity:.7,marginTop:"4px"},children:" Podaci iz sidebar cache-a"})]}),o.jsxs("div",{style:{padding:"1rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[o.jsx("h3",{style:{color:"#ffc107",marginBottom:"0.5rem",fontSize:"1rem"},children:" eka odobrenje"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--text-on-dark)"},children:[n.pendingRides," vonji"]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-on-dark)",opacity:.7,marginTop:"4px"},children:n.pendingRides>5?" Potrebna panja":" Pod kontrolom"})]})]})]}),o.jsxs("div",{className:Ye.card,children:[o.jsx("h2",{children:" Brze akcije"}),o.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"1rem"},children:[o.jsx("button",{onClick:()=>e("rides"),style:{padding:"1rem 1.5rem",background:"linear-gradient(145deg, #44cadf, #22d3ee)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontWeight:"bold",fontSize:"14px"},children:" Upravljaj vonjama"}),o.jsx("button",{onClick:()=>e("users"),style:{padding:"1rem 1.5rem",background:"linear-gradient(145deg, #22c55e, #16a34a)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontWeight:"bold",fontSize:"14px"},children:" Upravljaj korisnicima"}),o.jsx("button",{onClick:()=>e("github"),style:{padding:"1rem 1.5rem",background:"linear-gradient(145deg, #a855f7, #9333ea)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontWeight:"bold",fontSize:"14px"},children:" GitHub Actions"})]})]})]}),t==="users"&&o.jsx(VO,{}),t==="rides"&&o.jsx(HO,{}),t==="github"&&o.jsx(S3,{}),t==="settings"&&o.jsx(C3,{})]})]})]})}const $f=()=>o.jsxs("div",{className:"loading-spinner",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{children:"Uitavanje..."})]}),E3="_toastContainer_12kgv_1",T3="_toast_12kgv_1",L3="_visible_12kgv_24",hh={toastContainer:E3,toast:T3,visible:L3},Nx=({message:t,isOpen:e,duration:n=2500,onClose:r})=>(S.useEffect(()=>{if(!e)return;const s=setTimeout(()=>{r&&r()},n);return()=>clearTimeout(s)},[e,n,r]),o.jsx("div",{className:hh.toastContainer,"aria-live":"polite","aria-atomic":"true",children:o.jsx("div",{className:`${hh.toast} ${e?hh.visible:""}`,role:"status",children:t})}));function O3({pdfUrl:t,fileName:e,onClose:n,isVisible:r}){const[s,a]=S.useState(!0),[c,d]=S.useState(null),[h,f]=S.useState(null),[m,g]=S.useState(!1);S.useEffect(()=>{r&&t&&w()},[t,r]);const w=async()=>{try{if(a(!0),d(null),t.startsWith("blob:")){f(t),a(!1);return}let _=t;if(t.includes("drive.google.com"))if(t.includes("/preview"))_=t;else{const k=t.match(/id=([a-zA-Z0-9-_]+)/);k&&(_=`https://drive.google.com/file/d/${k[1]}/preview`)}else(t.startsWith("/")||t.startsWith("http"))&&(_=t);f(_),a(!1)}catch(_){console.error("Greka pri uitavanju PDF-a:",_),d("Greka pri uitavanju PDF fajla"),a(!1)}},C=async()=>{if(t&&!m)try{if(g(!0),t.includes("drive.google.com")){let k=null;if(t.includes("/preview")){const y=t.match(/\/file\/d\/([a-zA-Z0-9-_]+)\/preview/);y&&(k=y[1])}else{const y=t.match(/id=([a-zA-Z0-9-_]+)/);y&&(k=y[1])}if(k){const y=""}}const _=document.createElement("a");_.href=t,_.download=e||"dokument.pdf",_.target="_blank",document.body.appendChild(_),_.click(),document.body.removeChild(_),g(!1)}catch(_){console.error("Download error:",_),g(!1),window.open(t,"_blank")}},b=()=>{if(t){let _=t;if(t.includes("drive.google.com")){const k=t.match(/id=([a-zA-Z0-9-_]+)/);k&&(_=`https://drive.google.com/file/d/${k[1]}/view`)}window.open(_,"_blank")}};return r?o.jsx("div",{className:"pdf-viewer-overlay",children:o.jsxs("div",{className:"pdf-viewer-modal",children:[o.jsxs("div",{className:"pdf-viewer-header",children:[o.jsxs("div",{className:"pdf-file-info",children:[o.jsx("div",{className:"pdf-icon",children:""}),o.jsxs("div",{className:"pdf-title",children:[o.jsx("h3",{children:e||"PDF Dokument"}),o.jsx("p",{children:"PDF Viewer"})]})]}),o.jsxs("div",{className:"pdf-actions",children:[o.jsx("button",{className:"pdf-action-btn open-btn",onClick:b,title:"Otvori u novom tabu",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),o.jsx("polyline",{points:"15,3 21,3 21,9"}),o.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}),o.jsx("button",{className:`pdf-action-btn download-btn ${m?"downloading":""}`,onClick:C,disabled:m,title:"Preuzmi PDF",children:m?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-small"}),"Preuzimam..."]}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"7,10 12,15 17,10"}),o.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Preuzmi"]})}),o.jsx("button",{className:"pdf-action-btn close-btn",onClick:n,title:"Zatvori",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),o.jsxs("div",{className:"pdf-viewer-content",children:[s&&o.jsxs("div",{className:"pdf-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Uitavam PDF..."})]}),c&&o.jsxs("div",{className:"pdf-error",children:[o.jsx("div",{className:"error-icon",children:""}),o.jsx("h3",{children:"Greka pri uitavanju"}),o.jsx("p",{children:c}),o.jsx("button",{className:"retry-btn",onClick:w,children:"Pokuaj ponovo"})]}),!s&&!c&&h&&o.jsx("div",{className:"pdf-container",children:o.jsx("iframe",{src:h,className:"pdf-iframe",title:e||"PDF Dokument",frameBorder:"0",onLoad:_=>{a(!1)},onError:_=>{if(t.includes("drive.google.com")&&!h.includes("/preview")){const k=t.match(/id=([a-zA-Z0-9-_]+)/);if(k){const j=`https://drive.google.com/uc?export=view&id=${k[1]}`;f(j);return}}d("PDF se nije mogao uitati. Molimo koristite Download dugme."),a(!1)},style:{display:"block"}})})]})]})}):null}class N3{constructor(){this.API_KEY="",this.FOLDER_ID="",this.BASE_URL="https://www.googleapis.com/drive/v3"}async getPayrollFiles(e){try{const n=await this.findDriverFolder(e);if(!n)return[];const r=await this.getFilesInFolder(n),s=[];for(const a of r)if(a.mimeType==="application/pdf"||a.name.toLowerCase().endsWith(".pdf")){const c=a.name.match(/(\d{2})-(\d{4})/),d=c?`${c[1]}/${c[2]}`:a.name.replace(".pdf",""),h={id:a.id,month:d,fileName:a.name,fileId:a.id,downloadUrl:this.getDownloadUrl(a.id),uploadDate:a.modifiedTime,size:this.formatFileSize(a.size)};s.push(h)}return s.sort((a,c)=>c.month.localeCompare(a.month))}catch(n){return console.error("Greka pri dohvaanju platnih lista:",n),[]}}async findDriverFolder(e){try{const n=`'${this.FOLDER_ID}' in parents and mimeType='application/vnd.google-apps.folder' and name='${e}'`,r=await fetch(`${this.BASE_URL}/files?q=${encodeURIComponent(n)}&key=${this.API_KEY}`);if(!r.ok){const a=await r.text();throw console.error(`Google Drive API error: ${r.status} - ${a}`),new Error(`HTTP error! status: ${r.status}`)}const s=await r.json();return s.files.length>0?s.files[0].id:null}catch(n){return console.error("Greka pri traenju foldera vozaa:",n),null}}async getFilesInFolder(e){try{const n=`'${e}' in parents and trashed=false`,r=await fetch(`${this.BASE_URL}/files?q=${encodeURIComponent(n)}&fields=files(id,name,mimeType,size,modifiedTime)&key=${this.API_KEY}`);if(!r.ok){const a=await r.text();throw console.error(`Files API error: ${r.status} - ${a}`),new Error(`HTTP error! status: ${r.status}`)}return(await r.json()).files||[]}catch(n){return console.error("Greka pri dohvaanju fajlova:",n),[]}}getDownloadUrl(e){return`https://www.googleapis.com/drive/v3/files/${e}?alt=media&key=${this.API_KEY}`}formatFileSize(e){if(!e)return"Nepoznato";const n=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,r)*100)/100+" "+n[r]}async downloadFile(e,n){try{console.log("Downloading file:",e,n);const r=`https://www.googleapis.com/drive/v3/files/${e}?alt=media&key=${this.API_KEY}`,s=await fetch(r);if(!s.ok){console.error("Download failed:",s.status,s.statusText);const h=`https://drive.google.com/uc?export=download&id=${e}`;window.open(h,"_blank");return}const a=await s.blob(),c=window.URL.createObjectURL(a),d=document.createElement("a");d.href=c,d.download=n,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c),console.log("File downloaded successfully:",n)}catch(r){console.error("Greka pri downloadu fajla:",r);const s=`https://drive.google.com/uc?export=download&id=${e}`;console.log("Using fallback download URL:",s),window.open(s,"_blank")}}}const k0=new N3;function R3({user:t}){const e=js(),[n,r]=S.useState([]),[s,a]=S.useState(!0),[c,d]=S.useState(null),[h,f]=S.useState({open:!1,message:"",type:"info"}),[m,g]=S.useState(null),[w,C]=S.useState({isOpen:!1,url:null,fileName:null});S.useEffect(()=>{try{if(!t){e("/");return}if(t.role==="admin"){g("Admini nemaju pristup platnim listama"),a(!1);return}b(t.username)}catch(x){console.error("Greka pri uitavanju korisnikih podataka:",x),g("Greka pri uitavanju korisnikih podataka"),a(!1)}},[t,e]);const b=async x=>{try{a(!0),console.warn("Google Drive API klju nije postavljen, koristim mock podatke"),_();return}catch(E){console.error("Greka pri uitavanju platnih lista:",E),g("Greka pri uitavanju platnih lista iz Google Drive"),a(!1)}},_=()=>{const x=[{id:"1",month:"01/2025",fileName:"01/2025.pdf",fileId:"mock_file_id_1",downloadUrl:"#",uploadDate:"2025-01-15T10:30:00.000Z",size:"245 KB"},{id:"2",month:"02/2025",fileName:"02/2025.pdf",fileId:"mock_file_id_2",downloadUrl:"#",uploadDate:"2025-02-15T10:30:00.000Z",size:"251 KB"},{id:"3",month:"03/2025",fileName:"03/2025.pdf",fileId:"mock_file_id_3",downloadUrl:"#",uploadDate:"2025-03-15T10:30:00.000Z",size:"238 KB"}];setTimeout(()=>{r(x),a(!1)},1e3)},k=async x=>{try{d(x.id),x.fileId.startsWith("mock_")?(await new Promise(E=>setTimeout(E,2e3)),f({open:!0,type:"info",message:`Mock preuzimanje ${x.fileName} - Google Drive API nije konfigurisan`})):(await k0.downloadFile(x.fileId,x.fileName),f({open:!0,type:"success",message:`Platna lista ${x.month} je uspjeno preuzeta!`}))}catch(E){console.error("Greka pri preuzimanju:",E),f({open:!0,type:"error",message:"Greka pri preuzimanju platne liste"})}finally{d(null)}},y=x=>{let E;x.fileId.startsWith("mock_")?E="/bde-evidencija/sample-payroll.pdf":E=`https://drive.google.com/file/d/${x.fileId}/preview`,C({isOpen:!0,url:E,fileName:x.fileName})},j=x=>new Date(x).toLocaleDateString("bs-BA",{day:"2-digit",month:"2-digit",year:"numeric"});return s?o.jsx("div",{className:"payroll-screen",children:o.jsxs("div",{className:"payroll-loading",children:[o.jsx($f,{}),o.jsx("p",{children:"Uitavam platne liste..."})]})}):m?o.jsx("div",{className:"payroll-screen",children:o.jsxs("div",{className:"payroll-error",children:[o.jsx("div",{className:"error-icon",children:""}),o.jsx("h2",{children:"Greka"}),o.jsx("p",{children:m}),o.jsx("button",{className:"back-button",onClick:()=>e("/"),children:"Nazad na poetnu"})]})}):o.jsxs("div",{className:"payroll-screen",children:[o.jsxs("div",{className:"payroll-header",children:[o.jsxs("button",{className:"back-button",onClick:()=>e("/"),children:[o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Nazad"]}),o.jsxs("div",{className:"header-info",children:[o.jsx("h1",{children:" Platne Liste"}),o.jsxs("p",{children:["Voza: ",o.jsx("strong",{children:t==null?void 0:t.name})," (",t==null?void 0:t.username,")"]})]})]}),o.jsx("div",{className:"payroll-content",children:n.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-icon",children:""}),o.jsx("h3",{children:"Nema dostupnih platnih lista"}),o.jsx("p",{children:"Trenutno nema uploadovanih platnih lista za va ID vozaa."})]}):o.jsx("div",{className:"payroll-grid",children:n.map(x=>o.jsxs("div",{className:"payroll-card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("div",{className:"month-badge",children:x.month}),o.jsx("div",{className:"file-size",children:x.size})]}),o.jsxs("div",{className:"card-body",children:[o.jsx("div",{className:"file-icon",children:o.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),o.jsxs("div",{className:"file-info",children:[o.jsx("h3",{children:x.fileName}),o.jsxs("p",{children:["Uploaded: ",j(x.uploadDate)]})]})]}),o.jsxs("div",{className:"card-actions",children:[o.jsxs("button",{className:"view-button",onClick:()=>y(x),title:"Prikai PDF",children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Prikai"]}),o.jsx("button",{className:`download-button ${c===x.id?"downloading":""}`,onClick:()=>k(x),disabled:c===x.id,children:c===x.id?o.jsxs(o.Fragment,{children:[o.jsx($f,{size:"small"}),"Preuzimam..."]}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"7,10 12,15 17,10"}),o.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Preuzmi"]})})]})]},x.id))})}),h.open&&o.jsx(Nx,{isOpen:h.open,message:h.message,type:h.type,onClose:()=>f({...h,open:!1})}),o.jsx(O3,{pdfUrl:w.url,fileName:w.fileName,isVisible:w.isOpen,onClose:()=>C({isOpen:!1,url:null,fileName:null})})]})}const I3=[{version:"4.0.0",date:"06.10.2025",details:"Kompletna modernizacija UI dizajna sa glassmorphism efektima, optimizacija performansi, dinamike statistike iz baze podataka"},{version:"3.5.0",date:"05.10.2025",details:"Dodana MapCard moderna sa poboljanim blur efektima, novi Sidebar dizajn, optimizacija mobile responsivnosti"},{version:"3.4.0",date:"04.10.2025",details:"Poboljanja u DeliveryScreen - centriran naslov, validacija input polja, ograniavanje numerikih vrednosti"},{version:"3.3.0",date:"03.10.2025",details:"ExtraRidesScreen refaktorisanje - optimizovane boje za bolju preglednost, uklanjanje emoji ikona iz input polja"},{version:"3.2.0",date:"02.10.2025",details:"Dodana validacija za PLZ i broj adresa, poboljana UX sa placeholder tekstovima umesto alert poruka"},{version:"3.1.0",date:"01.10.2025",details:"Pojaano upozorenje za reklamacije, poboljanja u input validaciji, optimizacija korisnikog interfejsa"},{version:"3.0.0",date:"30.09.2025",details:"Nova arhitektura aplikacije, PWA optimizacije, poboljana sinhronizacija sa cloud bazom podataka"}],M3=()=>{js();const[t,e]=S.useState("4.0.0"),[n,r]=S.useState({users:0,years:0,deliveries:0});S.useEffect(()=>{(async()=>{try{const h=await(await fetch("/latest.json")).json();e(h.version||"4.0.0")}catch{e("4.0.0")}})(),(async()=>{try{const h=(await m5()).length,f=await p5();(()=>{const g={users:h,years:7,deliveries:f},w=2500,C=120;let b=0;const _=setInterval(()=>{b++;const k=b/C;r({users:Math.min(g.users,Math.round(g.users*k)),years:Math.min(g.years,Math.round(g.years*k)),deliveries:Math.min(g.deliveries,Math.round(g.deliveries*k))}),b>=C&&clearInterval(_)},w/C)})()}catch(d){console.error("Greka pri dohvatanju statistika:",d),(()=>{const f={users:4,years:7,deliveries:1247},m=2500,g=120;let w=0;const C=setInterval(()=>{w++;const b=w/g;r({users:Math.min(f.users,Math.round(f.users*b)),years:Math.min(f.years,Math.round(f.years*b)),deliveries:Math.min(f.deliveries,Math.round(f.deliveries*b))}),w>=g&&clearInterval(C)},m/g)})()}})()},[]);const s=(a,c)=>{a==="email"?window.location.href=`mailto:${c}`:a==="phone"&&(window.location.href=`tel:${c}`)};return o.jsx("div",{className:"aboutScreenModern",children:o.jsxs("div",{className:"aboutContainerModern",children:[o.jsxs("div",{className:"aboutHeaderModern",children:[o.jsx("div",{className:"aboutLogoModern",children:o.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:[o.jsx("path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"}),o.jsx("path",{d:"M15 18H9"}),o.jsx("path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"}),o.jsx("circle",{cx:"17",cy:"18",r:"2"}),o.jsx("circle",{cx:"7",cy:"18",r:"2"})]})}),o.jsx("h1",{className:"aboutTitleModern",children:"O Aplikaciji"}),o.jsx("p",{className:"aboutSubtitleModern",children:"B&D Evidencija - PWA verzija"})]}),o.jsxs("div",{className:"aboutGridModern",children:[o.jsx("div",{className:"glassCardModern fullWidthCard",children:o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf",marginBottom:"15px"},children:[o.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),o.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),o.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),o.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]}),o.jsxs("h3",{style:{margin:"10px 0",color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.5rem"},children:["Verzija ",t]}),o.jsx("p",{style:{color:"var(--text-on-dark, #f1f5f9)",margin:0,opacity:.9,fontSize:"1.1rem"},children:"Moderna glassmorphism PWA"})]})}),o.jsx("div",{className:"glassCardModern",children:o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf",marginBottom:"15px"},children:[o.jsx("path",{d:"M3 21h18"}),o.jsx("path",{d:"M5 21V7l8-4v18"}),o.jsx("path",{d:"M19 21V11l-6-4"}),o.jsx("path",{d:"M9 9v.01"}),o.jsx("path",{d:"M9 12v.01"}),o.jsx("path",{d:"M9 15v.01"}),o.jsx("path",{d:"M9 18v.01"})]}),o.jsx("h3",{style:{margin:"10px 0",color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.3rem"},children:"B&D Kleintransporte KG"}),o.jsx("p",{style:{color:"var(--text-on-dark, #f1f5f9)",margin:0,opacity:.9},children:"Profesionalne transportne usluge"})]})}),o.jsxs("div",{className:"glassCardModern",children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[o.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf",marginBottom:"15px"},children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),o.jsx("h3",{style:{margin:"10px 0",color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.3rem"},children:"Eldin Begi"}),o.jsx("p",{style:{color:"var(--text-on-dark, #f1f5f9)",margin:0,opacity:.9},children:"Developer & Support"})]}),o.jsxs("div",{className:"contactButtonsModern",children:[o.jsxs("button",{className:"contactButtonModern",onClick:()=>s("email","begic.prodaja@gmail.com"),children:[o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:[o.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),o.jsx("polyline",{points:"22,6 12,13 2,6"})]}),o.jsx("span",{children:"Email"})]}),o.jsxs("button",{className:"contactButtonModern",onClick:()=>s("phone","06645875413"),children:[o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:o.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),o.jsx("span",{children:"Pozovi"})]})]})]})]}),o.jsxs("div",{className:"glassCardModern fullWidthCard",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"25px"},children:[o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:[o.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),o.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),o.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"16"})]}),o.jsx("h3",{style:{textAlign:"center",margin:0,color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.5rem"},children:"Statistike"})]}),o.jsxs("div",{className:"statsGridModern",children:[o.jsxs("div",{className:"statItemModern",children:[o.jsx("span",{className:"statNumberModern",children:n.users}),o.jsx("span",{className:"statLabelModern",children:"Korisnika"})]}),o.jsxs("div",{className:"statItemModern",children:[o.jsx("span",{className:"statNumberModern",children:n.years}),o.jsx("span",{className:"statLabelModern",children:"Godina rada"})]}),o.jsxs("div",{className:"statItemModern",children:[o.jsxs("span",{className:"statNumberModern",children:[n.deliveries,"+"]}),o.jsx("span",{className:"statLabelModern",children:"Dostava"})]})]})]}),o.jsxs("div",{className:"glassCardModern fullWidthCard",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"20px"},children:[o.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:o.jsx("polygon",{points:"13,2 3,14 12,14 11,22 21,10 12,10"})}),o.jsx("h3",{style:{textAlign:"center",margin:0,color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.5rem"},children:"Tehnologije"})]}),o.jsxs("div",{className:"techStackModern",children:[o.jsxs("span",{className:"techTagModern",children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}),o.jsx("path",{d:"M2 12h20"})]}),"React"]}),o.jsxs("span",{className:"techTagModern",children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})}),"Supabase"]}),o.jsxs("span",{className:"techTagModern",children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}),o.jsx("path",{d:"M2 12h20"})]}),"PWA"]}),o.jsxs("span",{className:"techTagModern",children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),o.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),o.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),"Responsive"]}),o.jsxs("span",{className:"techTagModern",children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("polygon",{points:"12,2 22,8.5 22,15.5 12,22 2,15.5 2,8.5"}),o.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"15.5"}),o.jsx("polyline",{points:"22,8.5 12,15.5 2,8.5"})]}),"CSS3"]}),o.jsxs("span",{className:"techTagModern",children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polygon",{points:"13,2 3,14 12,14 11,22 21,10 12,10"})}),"Vite"]})]})]}),o.jsxs("div",{className:"glassCardModern fullWidthCard",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"25px"},children:[o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:[o.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),o.jsx("polyline",{points:"14,2 14,8 20,8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),o.jsx("polyline",{points:"10,9 9,9 8,9"})]}),o.jsx("h3",{style:{textAlign:"center",margin:0,color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.5rem"},children:"Historija Verzija"})]}),o.jsx("div",{className:"changelogListModern",children:I3.map(a=>o.jsxs("div",{className:"changelogItemModern",children:[o.jsxs("div",{className:"changelogHeaderModern",children:[o.jsxs("span",{className:"changelogVersionModern",children:[a.highlight?" ":" ",a.version]}),o.jsx("span",{className:"changelogDateModern",children:a.date})]}),o.jsx("div",{className:"changelogDetailsModern",children:a.details})]},a.version))})]}),o.jsxs("div",{className:"aboutFooterModern",children:[o.jsx("div",{className:"footerTextModern",children:" 2025 B&D Kleintransporte KG"}),o.jsx("div",{className:"footerSubtextModern",children:"Sva prava zadrana"})]})]})})},A3="_sidebarModern_1puxn_61",D3="_driverCardFade_1puxn_89",z3="_driverCardModern_1puxn_96",B3="_switching_1puxn_151",$3="_driverHeader_1puxn_156",F3="_driverAvatar_1puxn_163",U3="_loadingSpinner_1puxn_207",W3="_driverInfo_1puxn_220",H3="_driverName_1puxn_225",V3="_driverTour_1puxn_236",q3="_driverTarget_1puxn_244",G3="_targetValue_1puxn_264",Z3="_targetLabel_1puxn_269",K3="_statsSectionModern_1puxn_277",Y3="_statsGridModern_1puxn_285",J3="_statCardModern_1puxn_315",Q3="_statHeader_1puxn_342",X3="_statIcon_1puxn_351",eR="_statPeriod_1puxn_363",tR="_statContent_1puxn_371",nR="_statRow_1puxn_377",rR="_statLabelContainer_1puxn_385",iR="_statLabel_1puxn_385",sR="_statValue_1puxn_398",oR="_statGood_1puxn_409",aR="_statBad_1puxn_418",lR="_neutral_1puxn_427",cR="_warningPulse_1puxn_468",Re={sidebarModern:A3,driverCardFade:D3,driverCardModern:z3,switching:B3,driverHeader:$3,driverAvatar:F3,loadingSpinner:U3,driverInfo:W3,driverName:H3,driverTour:V3,driverTarget:q3,targetValue:G3,targetLabel:Z3,statsSectionModern:K3,statsGridModern:Y3,statCardModern:J3,statHeader:Q3,statIcon:X3,statPeriod:eR,statContent:tR,statRow:nR,statLabelContainer:rR,statLabel:iR,statValue:sR,statGood:oR,statBad:aR,neutral:lR,warningPulse:cR};function uR({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"url(#check-green)"}),o.jsx("path",{d:"M8 12.5L11 15.5L16 9.5",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"check-green",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#10B981"}),o.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]})}function dR({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"url(#x-red)"}),o.jsx("path",{d:"M8 8L16 16M16 8L8 16",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"x-red",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#EF4444"}),o.jsx("stop",{offset:"100%",stopColor:"#B91C1C"})]})})]})}function hR({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"url(#arrow-green)"}),o.jsx("path",{d:"M12 16V8M12 8L8 12M12 8L16 12",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"arrow-green",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#10B981"}),o.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]})}function fR({size:t=24}){return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"url(#arrow-red)"}),o.jsx("path",{d:"M12 8V16M12 16L8 12M12 16L16 12",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"arrow-red",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#EF4444"}),o.jsx("stop",{offset:"100%",stopColor:"#B91C1C"})]})})]})}const S0=({stats:t,user:e,onSwitchDriver:n,isLoading:r=!1})=>{var b,_,k;const[s,a]=S.useState(!1),c=y=>{if(y==null)return NaN;if(typeof y=="number")return y;const j=String(y).replace(/,/g,".").replace(/[^0-9.\-]/g,"").trim();if(j==="")return NaN;const x=Number(j);return isNaN(x)?NaN:x},d=y=>{const j=c(y);return isNaN(j)?Re.neutral:j>0?Re.statGood:j<0?Re.statBad:Re.neutral},h=y=>{const j=c(y);return isNaN(j)?Re.neutral:j===0?Re.statGood:j>0?Re.statBad:Re.neutral},f=y=>{const j=c(y);return isNaN(j)?null:j>0?o.jsx(hR,{size:18}):j<0?o.jsx(fR,{size:18}):null},m=y=>{const j=c(y);return isNaN(j)?null:j===0?o.jsx(uR,{size:18}):j>0?o.jsx(dR,{size:18}):null},g=()=>{s||!n||(a(!0),n(),setTimeout(()=>a(!1),500))},w=Array.isArray(t)&&t.length===6?t:[{label:"Danas",value:"--",trend:"neutral"},{label:"Reklamacije",value:"--",trend:"neutral"},{label:"Ovaj mjesec",value:"--",trend:"neutral"},{label:"Reklamacije",value:"--",trend:"neutral"},{label:"Ova godina",value:"--",trend:"neutral"},{label:"Reklamacije",value:"--",trend:"neutral"}],C=[{title:"Danas",period:((b=w[0])==null?void 0:b.label)||"Danas",delivery:w[0],complaints:w[1],icon:o.jsx(vE,{size:20})},{title:"Ovaj mjesec",period:((_=w[2])==null?void 0:_.label)||"Ovaj mjesec",delivery:w[2],complaints:w[3],icon:o.jsx(yE,{size:20})},{title:"Ova godina",period:((k=w[4])==null?void 0:k.label)||"Ova godina",delivery:w[4],complaints:w[5],icon:o.jsx(_E,{size:20})}];return o.jsxs("aside",{className:Re.sidebarModern,children:[o.jsx("div",{className:`${Re.driverCardModern} ${s?Re.switching+" "+Re.driverCardFade:""}`,onClick:g,role:"button",tabIndex:0,"aria-label":`Promijeni vozaa. Trenutno: ${(e==null?void 0:e.ime)||"N/A"}`,children:o.jsxs("div",{className:Re.driverHeader,children:[o.jsxs("div",{className:Re.driverAvatar,children:[o.jsx(U1,{size:32}),s&&o.jsx("div",{className:Re.loadingSpinner})]}),o.jsxs("div",{className:Re.driverInfo,children:[o.jsx("h3",{className:Re.driverName,children:(e==null?void 0:e.ime)||"Voza"}),o.jsxs("p",{className:Re.driverTour,children:["Tura: ",(e==null?void 0:e.tura)||"--"]})]}),o.jsxs("div",{className:Re.driverTarget,children:[o.jsx(xE,{size:18}),o.jsx("span",{className:Re.targetValue,children:(e==null?void 0:e.target_per_day)||"--"}),o.jsx("span",{className:Re.targetLabel,children:"/dan"})]})]})}),o.jsx("div",{className:Re.statsSectionModern,children:o.jsx("div",{className:Re.statsGridModern,children:C.map((y,j)=>{var x,E,A,T,B,O,R;return o.jsxs("div",{className:Re.statCardModern,children:[o.jsxs("div",{className:Re.statHeader,children:[o.jsx("span",{className:Re.statIcon,children:y.icon}),o.jsx("span",{className:Re.statPeriod,children:y.period})]}),o.jsxs("div",{className:Re.statContent,children:[o.jsxs("div",{className:Re.statRow,children:[o.jsx("div",{className:Re.statLabelContainer,children:o.jsx("span",{className:Re.statLabel,children:"Stopova"})}),o.jsxs("span",{className:`${Re.statValue} ${d((x=y.delivery)==null?void 0:x.value)}`,children:[(E=y.delivery)==null?void 0:E.value," ",f((A=y.delivery)==null?void 0:A.value)]})]}),o.jsxs("div",{className:Re.statRow,children:[o.jsx("div",{className:Re.statLabelContainer,children:o.jsx("span",{className:Re.statLabel,children:"Reklamacije"})}),o.jsxs("span",{className:`${Re.statValue} ${h((T=y.complaints)==null?void 0:T.value)} ${c((B=y.complaints)==null?void 0:B.value)>0?Re.warningPulse:""}`,children:[(O=y.complaints)==null?void 0:O.value," ",m((R=y.complaints)==null?void 0:R.value)]})]})]})]},j)})})})]})},pR="_mapCardModern_eomvl_2",mR="_addressBarIntegrated_eomvl_44",gR="_searchContainer_eomvl_101",vR="_searchInputWrapper_eomvl_112",yR="_searchIcon_eomvl_118",_R="_searchInput_eomvl_112",xR="_navigateBtn_eomvl_158",wR="_suggestionsDropdown_eomvl_197",bR="_suggestionItem_eomvl_215",jR="_suggestionAddress_eomvl_232",kR="_mapContent_eomvl_240",SR="_mapLoading_eomvl_252",CR="_mapFooter_eomvl_263",PR="_addressExpandable_eomvl_286",ER="_expanded_eomvl_293",TR="_addressInfo_eomvl_299",LR="_modernLocationIcon_eomvl_308",OR="_modernTargetIcon_eomvl_318",NR="_currentAddress_eomvl_328",RR="_selectedAddress_eomvl_328",IR="_distanceInfo_eomvl_359",MR="_distanceInfoInner_eomvl_365",AR="_distanceText_eomvl_371",DR="_routeSummary_eomvl_380",zR="_distanceSmall_eomvl_388",BR="_spinnerWrapper_eomvl_397",$R="_loadingSpinner_eomvl_402",FR="_loadingSpinnerSmall_eomvl_411",UR="_mapControlsFloating_eomvl_541",WR="_floatingControlBtn_eomvl_549",ve={mapCardModern:pR,addressBarIntegrated:mR,searchContainer:gR,searchInputWrapper:vR,searchIcon:yR,searchInput:_R,navigateBtn:xR,suggestionsDropdown:wR,suggestionItem:bR,suggestionAddress:jR,mapContent:kR,mapLoading:SR,mapFooter:CR,addressExpandable:PR,expanded:ER,addressInfo:TR,modernLocationIcon:LR,modernTargetIcon:OR,currentAddress:NR,selectedAddress:RR,distanceInfo:IR,distanceInfoInner:MR,distanceText:AR,routeSummary:DR,distanceSmall:zR,spinnerWrapper:BR,loadingSpinner:$R,loadingSpinnerSmall:FR,mapControlsFloating:UR,floatingControlBtn:WR},C0={VITE_GITHUB_REPO:"eldin007b/gls-scraper",VITE_GITHUB_TOKEN:"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",VITE_MAPQUEST_API_KEY:"",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzbHRwaXVwYmZvcHl2dWlxZmZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5Mjc3MzcsImV4cCI6MjA2NTUwMzczN30.suu_OSbTBSEkM3YMiPDFIAgDnX3bDavcD8BX4ZfYZxw",VITE_SUPABASE_URL:"https://dsltpiupbfopyvuiqffg.supabase.co",VITE_WORKFLOW_FILE:"scraper.yml"};var P0={};const mt=typeof import.meta<"u"&&C0?C0:{},yr=typeof process<"u"&&P0?P0:{},HR="https://dsltpiupbfopyvuiqffg.supabase.co",VR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzbHRwaXVwYmZvcHl2dWlxZmZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5Mjc3MzcsImV4cCI6MjA2NTUwMzczN30.suu_OSbTBSEkM3YMiPDFIAgDnX3bDavcD8BX4ZfYZxw",qR="https://dsltpiupbfopyvuiqffg.supabase.co/functions/v1",Bn={SUPABASE_URL:mt.VITE_SUPABASE_URL||mt.REACT_APP_SUPABASE_URL||yr.REACT_APP_SUPABASE_URL||HR,SUPABASE_KEY:mt.VITE_SUPABASE_ANON_KEY||mt.VITE_SUPABASE_KEY||mt.REACT_APP_SUPABASE_KEY||yr.REACT_APP_SUPABASE_KEY||VR,API_BASE_URL:mt.VITE_API_BASE_URL||mt.REACT_APP_API_BASE_URL||yr.REACT_APP_API_BASE_URL||qR,GOOGLE_MAPS_API_KEY:mt.VITE_GOOGLE_MAPS_API_KEY||mt.REACT_APP_GOOGLE_MAPS_API_KEY||yr.REACT_APP_GOOGLE_MAPS_API_KEY||""};Bn.MAPQUEST_API_KEY=mt.VITE_MAPQUEST_API_KEY||mt.REACT_APP_MAPQUEST_API_KEY||yr.REACT_APP_MAPQUEST_API_KEY||"HFcTXnwL6PW3Snh7rVohjnYopqvPhCL5";Bn.GITHUB_TOKEN=mt.VITE_GITHUB_TOKEN||mt.REACT_APP_GITHUB_TOKEN||yr.REACT_APP_GITHUB_TOKEN||"";Bn.GITHUB_REPO=mt.VITE_GITHUB_REPO||mt.REACT_APP_GITHUB_REPO||yr.REACT_APP_GITHUB_REPO||"eldin007b/gls-scraper";Bn.WORKFLOW_FILE=mt.VITE_WORKFLOW_FILE||mt.REACT_APP_WORKFLOW_FILE||yr.REACT_APP_WORKFLOW_FILE||"scraper.yml";Bn.ROUTE_STRATEGY=mt.VITE_ROUTE_STRATEGY||mt.REACT_APP_ROUTE_STRATEGY||yr.REACT_APP_ROUTE_STRATEGY||"";Bn.VORANACHB_URL=mt.VITE_VORANACHB_URL||mt.REACT_APP_VORANACHB_URL||yr.REACT_APP_VORANACHB_URL||"";async function GR(t){var n,r,s,a;const e={id:"ibwmnqg8g2kj8iwg",ver:"1.59",lang:"deu",auth:{type:"AID",aid:"wf7mcf9bv3nv8g5f"},client:{id:"VAO",type:"WEB",name:"webapp",l:"vs_anachb",v:10010,pos:{x:14289510,y:46624050,acc:16.185}},formatted:!1,ext:"VAO.22",svcReqL:[{meth:"LocMatch",req:{input:{field:"S",loc:{type:"ALL",dist:1e3,name:t},maxLoc:7}},id:"1|43|"}]};try{const c=await fetch(`${Bn.API_BASE_URL}/vor-proxy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(c.ok){const d=await c.json();return((a=(s=(r=(n=d==null?void 0:d.svcResL)==null?void 0:n[0])==null?void 0:r.res)==null?void 0:s.match)==null?void 0:a.locL)||[]}}catch(c){console.warn("VAO proxy failed, falling back to Nominatim",c)}try{const c=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(t)}&format=json&addressdetails=1&limit=8&accept-language=de`,d=await fetch(c,{headers:{"User-Agent":"bde-evidencija/1.0 (+https://eldin007b.github.io/bde-evidencija)"}});return d.ok?(await d.json()).map(f=>({name:f.display_name,nameFormatted:{text:f.display_name},crd:{x:Math.round(f.lon*1e6),y:Math.round(f.lat*1e6)}})):[]}catch(c){return console.warn("Nominatim fallback failed",c),[]}}function Rx(t){var s;if(t.info.statuscode!==0){const a={400:"Bad request",401:"Unauthorized - check API key",403:"Forbidden",500:"MapQuest server error"};throw new Error(`MapQuest API error ${t.info.statuscode}: ${a[t.info.statuscode]||((s=t.info.messages)==null?void 0:s.join(", "))||"Unknown error"}`)}const e=t.route;if(!e)throw new Error("No route data received from MapQuest");const n=Math.round(e.distance*1e3),r=Math.round(e.time);return{distanceMeters:n,distanceText:JR(n),durationSeconds:r,durationText:QR(r),mapQuestData:{fuelUsed:e.fuelUsed,realTime:e.hasRealTime,sessionId:e.sessionId}}}async function Ix(t,e,n,r){return await ZR(t,e,n,r)}async function ZR(t,e,n,r){if(!Bn.API_BASE_URL.includes("localhost"))try{return await KR(t,e,n,r)}catch{}try{return await YR(t,e,n,r)}catch(s){throw new Error(`Both MapQuest methods failed. Proxy: ${(proxyError==null?void 0:proxyError.message)||"not available"}, Direct: ${s.message}`)}}async function KR(t,e,n,r){try{const s={locations:[{latLng:{lat:t,lng:e}},{latLng:{lat:n,lng:r}}],options:{routeType:"fastest",unit:"k",doReverseGeocode:!1,enhancesNarratives:!1,avoidTimedConditions:!1}},a=await fetch(`${Bn.API_BASE_URL}/mapquest-proxy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error(`MapQuest proxy error: ${a.status} - ${a.statusText}`);const c=await a.json();return Rx(c)}catch(s){throw s}}async function YR(t,e,n,r){const s=Bn.MAPQUEST_API_KEY;if(!s||s==="your_mapquest_key_here")throw new Error("MapQuest API key not configured");try{const a=`https://www.mapquestapi.com/directions/v2/route?key=${encodeURIComponent(s)}`,d=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({locations:[{latLng:{lat:t,lng:e}},{latLng:{lat:n,lng:r}}],options:{routeType:"fastest",unit:"k",doReverseGeocode:!1,enhancesNarratives:!1,avoidTimedConditions:!1}})});if(!d.ok)throw new Error(`MapQuest API error: ${d.status} - ${d.statusText}`);const h=await d.json();return Rx(h)}catch(a){throw a}}function JR(t){if(t==null)return null;if(t>=1e3){const e=t/1e3;return new Intl.NumberFormat("de-DE",{maximumFractionDigits:1}).format(e)+" km"}return`${t} m`}function QR(t){if(t==null)return null;const e=Math.round(t/60);if(e>=60){const n=Math.floor(e/60),r=e%60;return r>0?`${n}h ${r}min`:`${n}h`}return`${e} min`}function Rc(t){if(t==null)return null;if(t>=1e3){const e=t/1e3;return new Intl.NumberFormat("de-DE",{maximumFractionDigits:1}).format(e)+" km"}return`${t} m`}function Ic(t){if(t==null)return null;const e=Math.round(t/60);if(e>=60){const n=Math.floor(e/60),r=e%60;return r>0?`${n}h ${r}min`:`${n}h`}return`${e} min`}async function XR(t,e,n,r){try{const s=await Ix(t,e,n,r);return s?{...s,source:"mapquest"}:{distanceMeters:null,distanceText:null,durationSeconds:null,durationText:null,source:"none"}}catch(s){return console.warn("MapQuest routing failed:",(s==null?void 0:s.message)||s),{distanceMeters:null,distanceText:null,durationSeconds:null,durationText:null,source:"none",error:(s==null?void 0:s.message)||String(s)}}}function e6(t){return!t||typeof t!="string"?[]:t.split(";").map(e=>{const n=e.split(",").map(a=>a.trim());if(n.length<2)return null;const r=parseFloat(n[0]),s=parseFloat(n[1]);return isNaN(r)||isNaN(s)?null:{lat:r,lon:s}}).filter(Boolean)}function t6(t,e){if(!t||!e)return 0;const n=w=>w*Math.PI/180,r=6371e3,s=n(e.lat-t.lat),a=n(e.lon-t.lon),c=n(t.lat),d=n(e.lat),h=Math.sin(s/2),f=Math.sin(a/2),m=h*h+Math.cos(c)*Math.cos(d)*f*f,g=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));return r*g}function n6(t){if(!Array.isArray(t)||t.length<2)return 0;let e=0;for(let n=1;n<t.length;n++)e+=t6(t[n-1],t[n]);return Math.round(e)}function r6(t,e=80){if(!t||isNaN(t)||e<=0)return null;const n=t/1e3/e;return Math.round(n*3600)}function i6(t,e){const n=t?Rc(t):"--";return`${e?Ic(e):"--"}(${n})`}function s6(t,e=100){const n=e6(t),r=n6(n),s=r6(r,e),a=i6(r,s);return{points:n,distanceMeters:r,durationSeconds:s,compact:a}}const E0=({children:t,className:e="",style:n,title:r="Mapa dostave - Austrija",loading:s=!1,address:a="",city:c="",onNavigate:d,onSearchSelect:h,mapRef:f,onLocateMe:m,autoLocate:g=!0,selectedMarker:w=null,footerRef:C,isMobile:b=typeof window<"u"?window.innerWidth<768:!1,headerHeight:_=80,onMapClickCloseSidebar:k})=>{const y=(ne,ie)=>{if(!ne&&!ie)return"";let fe="",Te="";if(ne&&(fe=ne.split(",")[0].trim()),ie){const He=String(ie).match(/(\d{3,6})/);Te=He?He[0]:String(ie).split(",")[0].trim()}return fe&&Te?`${fe}, ${Te}`:fe||Te},j=ne=>{if(!ne)return"";const ie=String(ne).replace(/<br\s*\/?[^>]*>/gi,",").trim();if(!ie)return"";if(ie.includes(",")){const fe=ie.split(","),Te=fe[0].trim(),He=fe.slice(1).join(",").trim();return y(Te,He)}return ie.length>40?ie.slice(0,37)+"...":ie},x=()=>{var ne;(ne=f==null?void 0:f.current)!=null&&ne.zoomIn&&f.current.zoomIn()},E=()=>{var ne;(ne=f==null?void 0:f.current)!=null&&ne.zoomOut&&f.current.zoomOut()},A=()=>{if(console.log(" Lociraj me kliknuto - traim GPS lokaciju"),!navigator.geolocation){alert("Geolokacija nije podrana u ovom pregledniku.");return}navigator.geolocation.getCurrentPosition(ne=>{var fe;console.log(" GPS lokacija pronaena:",ne.coords);const ie=[ne.coords.latitude,ne.coords.longitude];G({lat:ne.coords.latitude,lon:ne.coords.longitude});try{(fe=f==null?void 0:f.current)!=null&&fe.setView&&f.current.setView(ie,17)}catch(Te){console.warn("Map setView not available",Te)}m&&m(ie)},ne=>{console.error(" GPS greka:",ne),alert("Nije mogue dobiti lokaciju. Provjerite dozvole preglednika.")},{enableHighAccuracy:!0,maximumAge:5e3,timeout:15e3})},[T,B]=S.useState(""),[O,R]=S.useState([]),[N,M]=S.useState(!1),[q,$]=S.useState(!1),Z=S.useRef(),[W,G]=S.useState(null),[K,D]=S.useState(null),[Q,U]=S.useState(""),[te,se]=S.useState(!1),[pe,ue]=S.useState(null),[me,Y]=S.useState(!0),[he,ke]=S.useState(!1),[ee,_e]=S.useState(null),xe=S.useRef({ts:0,key:null}),Ce=S.useRef(null),$e=S.useRef(null),St=S.useRef(!1);S.useEffect(()=>{let ne=!1;if(!T.trim()){R([]),M(!1);return}return M(!0),GR(T).then(ie=>{ne||(R(ie||[]),M(!1))}).catch(ie=>{ne||(console.error("Address search error:",ie),R([]),M(!1))}),()=>{ne=!0}},[T]),S.useEffect(()=>{B(a?c?`${a}, ${c}`:a:"")},[a,c]),S.useEffect(()=>{var ne;if(w&&(typeof w.lat=="number"||typeof w.lon=="number")){const ie={address:w.address||((ne=w.data)==null?void 0:ne.name)||a||"",city:w.city||"",lat:w.lat,lon:w.lon};if(D(ie),w.polyline)try{const fe=s6(w.polyline,80);_e(fe)}catch(fe){console.warn("Polyline analysis failed",fe),_e(null)}else _e(null);if(w.hafasUrl||w.hafasHtml){const Te=`${Bn.API_BASE_URL.replace(/\/$/,"")}/hafas/parse`;(async()=>{try{const He=w.hafasHtml?{html:w.hafasHtml}:{url:w.hafasUrl},Je=await fetch(Te,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(He)});if(Je.ok){const Ve=await Je.json();ue({distanceMeters:Ve.distanceMeters||null,durationSeconds:Ve.durationSeconds||null,distanceText:Ve.distanceText||null,durationText:Ve.durationText||null,provider:"HAFAS"})}}catch(He){console.warn("HAFAS proxy error",He)}})()}}else a&&D(ie=>({address:a||"",city:c||"",lat:ie==null?void 0:ie.lat,lon:ie==null?void 0:ie.lon}))},[w,a,c]);const Ke=ne=>{var Te,He,Je,Ve;const ie=(Te=ne.crd)==null?void 0:Te.x,fe=(He=ne.crd)==null?void 0:He.y;if(typeof ie=="number"&&typeof fe=="number"&&((Je=f==null?void 0:f.current)!=null&&Je.setView)){const it=fe/1e6,Fe=ie/1e6;f.current.setView([it,Fe],17);let Ue=((Ve=ne.nameFormatted)==null?void 0:Ve.text)||ne.name||"",Tt=Ue,yt="";const Oe=/<br\s*\/?.*?>/i;if(Oe.test(Ue)){const Ut=Ue.split(Oe);Tt=Ut[0].trim(),yt=Ut.slice(1).join(" ").trim()}else if(Ue.includes(",")){const Ut=Ue.split(",");Tt=Ut[0].trim(),yt=Ut.slice(1).join(",").trim()}B(Tt+(yt?`, ${yt}`:""));const tt={address:Tt,city:yt,lat:it,lon:Fe};D(tt),h&&h(tt),R([]),$(!1)}},Ft=()=>{if(d){if(K&&typeof K.lat=="number"&&typeof K.lon=="number"){d({lat:K.lat,lon:K.lon,address:K.address,city:K.city});return}T&&T.trim()&&d(T.trim())}},Zt=ne=>{var ie;ne.key==="Enter"?Ft():ne.key==="Escape"&&(R([]),$(!1),(ie=Z.current)==null||ie.blur())},rr=(ne,ie,fe,Te)=>{const He=Tt=>Tt*Math.PI/180,Ve=He(fe-ne),it=He(Te-ie),Fe=Math.sin(Ve/2)*Math.sin(Ve/2)+Math.cos(He(ne))*Math.cos(He(fe))*Math.sin(it/2)*Math.sin(it/2);return 6371*(2*Math.atan2(Math.sqrt(Fe),Math.sqrt(1-Fe)))},Ur=(ne,ie=40)=>{if(!ne||isNaN(ne))return null;const fe=ne/1e3/ie;return Math.round(fe*3600)},[$n,Ii]=S.useState(null),Kt=ne=>{b&&Ii(ie=>ie===ne?null:ne)},[ir,Ss]=S.useState(null);S.useEffect(()=>{if(typeof window>"u")return;const ne=()=>{try{if(!b){Ss(null);return}const Te=window.innerHeight||document.documentElement.clientHeight||0,He=C&&C.current&&C.current.getBoundingClientRect().height||0,Je=Number(_)||0;let Ve=Math.max(0,Math.round(Te-Je-He));Ve<200&&(Ve=Math.max(200,Math.round(Te-Je))),Ss(Ve)}catch{}};ne();let ie;if(C&&C.current&&typeof ResizeObserver<"u")try{ie=new ResizeObserver(()=>ne()),ie.observe(C.current)}catch{ie=null}window.addEventListener("resize",ne);const fe=()=>setTimeout(ne,120);return window.addEventListener("orientationchange",fe),()=>{window.removeEventListener("resize",ne),window.removeEventListener("orientationchange",fe),ie&&ie.disconnect&&ie.disconnect()}},[C,_,b]);const Ho=b&&ir?{height:`${ir}px`}:void 0;S.useEffect(()=>{const ne=()=>{if(b&&typeof k=="function")try{k()}catch{}},ie=document.querySelector(".mapContainerModern");return ie&&typeof ie.addEventListener=="function"&&ie.addEventListener("click",ne),()=>{ie&&typeof ie.removeEventListener=="function"&&ie.removeEventListener("click",ne)}},[b,k]);const Mi=(ne,ie)=>({x:Math.round(ie*1e6),y:Math.round(ne*1e6)}),Wr=async(ne,ie)=>{try{const{x:fe,y:Te}=Mi(ne,ie),He="/vor-proxy",Je={id:"ibwmnqg8g2kj8iwg",ver:"1.59",lang:"deu",auth:{type:"AID",aid:"wf7mcf9bv3nv8g5f"},client:{id:"VAO",type:"WEB",name:"webapp",l:"vs_anachb",v:10010,pos:{x:fe,y:Te,acc:20}},formatted:!1,ext:"VAO.22",svcReqL:[]},Ve={...Je,svcReqL:[{meth:"LocGeoPos",req:{ring:{cCrd:{x:fe,y:Te},minDist:0,maxDist:30},maxLoc:1,locFltrL:[{type:"PROD",mode:"INC",value:4087}],getPOIs:!0},id:"1|5|"}]};try{const Ue=await(await fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ve)})).json();if(Ue&&Ue.svcResL&&Ue.svcResL.length>0&&Ue.svcResL[0].res&&Ue.svcResL[0].res.locL&&Ue.svcResL[0].res.locL.length>0){const Tt=Ue.svcResL[0].res.locL[0];let yt=Tt.nameFormatted&&Tt.nameFormatted.text||Tt.name||Tt.txt||"";if(/^-?\d+\.\d+, ?-?\d+\.\d+$/.test(yt)&&(yt=""),!yt)return{address:"",city:""};let Oe=yt,tt="";if(yt.includes(",")){const Ut=yt.split(",");Oe=Ut[0].trim(),tt=Ut.slice(1).join(",").trim()}return{address:Oe,city:tt}}}catch(Fe){console.warn("reverseGeocode LocGeoPos error",Fe)}const it={...Je,svcReqL:[{meth:"LocMatch",req:{input:{field:"S",loc:{type:"C",crd:{x:fe,y:Te}},maxLoc:1,locFltrL:[{type:"META",value:"in_austria_test"}]}},id:"1|24|"}]};try{const Ue=await(await fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)})).json();if(Ue&&Ue.svcResL&&Ue.svcResL.length>0&&Ue.svcResL[0].res&&Ue.svcResL[0].res.match&&Ue.svcResL[0].res.match.locL&&Ue.svcResL[0].res.match.locL.length>0){const Tt=Ue.svcResL[0].res.match.locL.slice(),yt=Tt.filter(yn=>yn.state==="F");let Oe=null;if(yt.length>0?Oe=yt.find(yn=>yn.type==="A")||yt[0]:Oe=Tt.find(yn=>yn.type==="A")||Tt[0],!Oe)return{address:"",city:""};let tt=Oe.nameFormatted&&Oe.nameFormatted.text||Oe.name||Oe.txt||"";if(/^-?\d+\.\d+, ?-?\d+\.\d+$/.test(tt)&&(tt=""),!tt)return{address:"",city:""};let Ut=tt,Yt="";if(tt.includes(",")){const yn=tt.split(",");Ut=yn[0].trim(),Yt=yn.slice(1).join(",").trim()}return{address:Ut,city:Yt}}}catch(Fe){console.warn("reverseGeocode LocMatch error",Fe)}return{address:"",city:""}}catch(fe){return console.error("Reverse geocode error",fe),{address:"",city:""}}};return S.useEffect(()=>()=>{var ne;Ce.current&&((ne=navigator.geolocation)!=null&&ne.clearWatch)&&navigator.geolocation.clearWatch(Ce.current)},[]),S.useEffect(()=>{g&&A()},[g]),S.useEffect(()=>{var ne;if(W&&((ne=f==null?void 0:f.current)!=null&&ne.setView)&&!St.current)try{f.current.setView([W.lat,W.lon],17),St.current=!0}catch{}},[W,f]),S.useEffect(()=>{let ne=!1;if(!W)return;const ie=`${W.lat.toFixed(6)},${W.lon.toFixed(6)}`;if($e.current!==ie)return $e.current=ie,se(!0),(async()=>{try{const fe=await Wr(W.lat,W.lon);if(!ne&&fe&&(fe.address||fe.city)){const Te=fe.address?fe.city?`${fe.address}, ${fe.city}`:fe.address:fe.city||"";U(Te)}else ne||U(`Lokacija: ${W.lat.toFixed(6)}, ${W.lon.toFixed(6)}`)}catch{ne||U(`Lokacija: ${W.lat.toFixed(6)}, ${W.lon.toFixed(6)}`)}finally{ne||se(!1)}})(),()=>{ne=!0,se(!1)}},[W]),S.useEffect(()=>{let ne=!1;if(!me){ue(null);return}if(W&&K&&typeof W.lat=="number"&&typeof W.lon=="number"&&typeof K.lat=="number"&&typeof K.lon=="number"){const ie=`${W.lat},${W.lon}->${K.lat},${K.lon}`,fe=Date.now();if(xe.current.key===ie&&fe-xe.current.ts<3e4&&pe)return;ke(!0),(async()=>{try{const Te=W.lat,He=W.lon,Je=K.lat,Ve=K.lon;let it=null;try{if(it=await Ix(Te,He,Je,Ve),it){ue({distanceMeters:it.distanceMeters,distanceText:it.distanceText,durationSeconds:it.durationSeconds,durationText:it.durationText,provider:"MapQuest"}),xe.current={ts:Date.now(),key:ie};return}}catch(Fe){console.warn("MapQuest routing failed, falling back to Google:",Fe.message||Fe)}try{const Fe=await XR({lat:Te,lon:He},{lat:Je,lon:Ve});Fe?(ue({distanceMeters:Fe.distanceMeters,distanceText:Fe.distanceText||Rc(Fe.distanceMeters),durationSeconds:Fe.durationSeconds,durationText:Fe.durationText||Ic(Fe.durationSeconds),provider:Fe.provider||"Google"}),xe.current={ts:Date.now(),key:ie}):ue(null)}catch(Fe){console.warn("Google routing failed as fallback:",Fe),ue(null)}}catch{ne||ue(null)}finally{ne||ke(!1)}})()}else ue(null);return()=>{ne=!0,ke(!1)}},[W,K]),o.jsxs("div",{className:`${ve.mapCardModern} ${e}`,style:n,children:[o.jsx("div",{className:ve.addressBarIntegrated,children:o.jsxs("div",{className:ve.searchContainer,children:[o.jsxs("div",{className:ve.searchInputWrapper,children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:ve.searchIcon,children:o.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),o.jsx("input",{ref:Z,type:"text",className:ve.searchInput,value:T,onChange:ne=>B(ne.target.value),onFocus:()=>$(!0),onBlur:()=>setTimeout(()=>$(!1),150),onKeyDown:Zt,placeholder:"Unesi adresu (npr: hauprstrasse 60 9340)...",autoComplete:"off"})]}),o.jsx("button",{className:ve.navigateBtn,onClick:Ft,disabled:!T.trim(),title:"Otvori navigaciju","aria-label":"Navigiraj",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:o.jsx("path",{d:"M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"})})}),q&&T&&o.jsx("div",{className:ve.suggestionsDropdown,children:N?o.jsxs("div",{className:ve.suggestionItem,children:[o.jsx("div",{className:ve.loadingSpinnerSmall}),"Traim adrese..."]}):O.length===0?o.jsxs("div",{className:ve.suggestionItem,children:['Nema rezultata za "',T,'"']}):O.map((ne,ie)=>{var fe,Te;return o.jsx("div",{className:ve.suggestionItem,onClick:()=>Ke(ne),onMouseDown:He=>He.preventDefault(),children:o.jsx("div",{className:ve.suggestionAddress,children:((Te=(fe=ne.nameFormatted)==null?void 0:fe.text)==null?void 0:Te.replace(/<[^>]*>/g,""))||ne.name||""})},ie)})})]})}),o.jsx("div",{className:ve.mapContent,style:Ho,children:s?o.jsxs("div",{className:ve.mapLoading,children:[o.jsx("div",{className:ve.loadingSpinner}),o.jsx("p",{children:"Uitavam mapu..."})]}):o.jsxs(o.Fragment,{children:[t,o.jsxs("div",{className:ve.mapControlsFloating,children:[o.jsxs("button",{className:ve.floatingControlBtn,onClick:x,title:"Poveaj zoom",children:[o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"})}),o.jsx("span",{className:"sr-only",children:"Poveaj zoom"})]}),o.jsxs("button",{className:ve.floatingControlBtn,onClick:E,title:"Smanji zoom",children:[o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M19 11H5v2h14z"})}),o.jsx("span",{className:"sr-only",children:"Smanji zoom"})]}),o.jsxs("button",{className:ve.floatingControlBtn,onClick:A,title:"Lociraj na adresu",children:[o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"})}),o.jsx("span",{className:"sr-only",children:"Lociraj na adresu"})]})]})]})}),o.jsxs("div",{ref:C,className:`${ve.mapFooter} mapFooter`,children:[o.jsxs("div",{className:ve.addressInfo,children:[te?o.jsxs("div",{className:`${ve.currentAddress} ${ve.addressExpandable}`,onClick:()=>Kt("current"),children:[o.jsxs("svg",{className:ve.modernLocationIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[o.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),o.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),o.jsx("div",{className:ve.loadingSpinnerSmall,style:{display:"inline-block",marginRight:"8px"}}),"Prepoznajem adresu..."]}):Q?o.jsxs("div",{className:`${ve.currentAddress} ${ve.addressExpandable} ${$n==="current"?ve.expanded:""}`,onClick:()=>Kt("current"),title:Q,children:[o.jsxs("svg",{className:ve.modernLocationIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[o.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),o.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),$n==="current"?Q:b?j(Q):Q]}):W?o.jsxs("div",{className:`${ve.currentAddress} ${ve.addressExpandable}`,onClick:()=>Kt("current"),children:[o.jsxs("svg",{className:ve.modernLocationIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[o.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),o.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),W.lat.toFixed(6),", ",W.lon.toFixed(6)]}):o.jsxs("div",{className:`${ve.currentAddress} ${ve.addressExpandable}`,onClick:()=>Kt("current"),children:[o.jsxs("svg",{className:ve.modernLocationIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[o.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),o.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Lokacija nije dostupna"]}),K?o.jsxs("div",{className:`${ve.selectedAddress} ${ve.addressExpandable} ${$n==="selected"?ve.expanded:""}`,title:`${K.address}${K.city?`, ${K.city}`:""}`,onClick:()=>Kt("selected"),children:[o.jsxs("svg",{className:ve.modernTargetIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("circle",{cx:"12",cy:"12",r:"6"}),o.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),b?$n==="selected"?`${K.address}${K.city?`, ${K.city}`:""}`:y(K.address,K.city):`${K.address}${K.city?`, ${K.city}`:""}`]}):T?o.jsxs("div",{className:`${ve.selectedAddress} ${ve.addressExpandable} ${$n==="selected"?ve.expanded:""}`,title:T,onClick:()=>Kt("selected"),children:[o.jsx("span",{style:{marginRight:"8px"},children:""}),b?$n==="selected"?T:y(T,""):T]}):null]}),o.jsx("div",{className:ve.distanceInfo,children:o.jsx("div",{className:ve.distanceInfoInner,children:ee?o.jsxs("div",{className:ve.distanceText,children:[o.jsx("span",{children:ee.compact}),o.jsx("small",{className:ve.distanceSmall,children:"Polyline"})]}):pe?o.jsxs("div",{className:ve.distanceText,children:[o.jsxs("span",{className:ve.routeSummary,children:[pe.durationText||Ic(pe.durationSeconds)||"--","  ",pe.distanceText||Rc(pe.distanceMeters)||"--"]}),he&&o.jsx("span",{className:ve.spinnerWrapper,children:o.jsx("div",{className:ve.loadingSpinnerSmall,"aria-hidden":"true"})}),pe.provider&&pe.provider.toLowerCase()!=="mapquest"&&o.jsx("small",{className:ve.distanceSmall,children:pe.provider})]}):W&&K?o.jsx("div",{className:ve.distanceText,children:o.jsx("span",{className:ve.routeSummary,children:(()=>{const ne=rr(W.lat,W.lon,K.lat,K.lon),ie=Math.round(ne*1e3),fe=Ur(ie,40);return fe?`${Ic(fe)}  ${Rc(ie)}`:"--"})()})}):o.jsx("div",{className:ve.distanceText,children:o.jsx("span",{className:ve.routeSummary,children:"--"})})})})]})]})};function Mx(t,e){const n=S.useRef(e);S.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function o6(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const a6=1;function l6(t){return Object.freeze({__version:a6,map:t})}function Ax(t,e){return Object.freeze({...t,...e})}const Dx=S.createContext(null),zx=Dx.Provider;function Wu(){const t=S.useContext(Dx);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Bx(t){function e(n,r){const{instance:s,context:a}=t(n).current;return S.useImperativeHandle(r,()=>s),n.children==null?null:pi.createElement(zx,{value:a},n.children)}return S.forwardRef(e)}function c6(t){function e(n,r){const[s,a]=S.useState(!1),{instance:c}=t(n,a).current;S.useImperativeHandle(r,()=>c),S.useEffect(function(){s&&c.update()},[c,s,n.children]);const d=c._contentNode;return d?Tu.createPortal(n.children,d):null}return S.forwardRef(e)}function u6(t){function e(n,r){const{instance:s}=t(n).current;return S.useImperativeHandle(r,()=>s),null}return S.forwardRef(e)}function im(t,e){const n=S.useRef();S.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Hu(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function d6(t,e){return function(r,s){const a=Wu(),c=t(Hu(r,a),a);return Mx(a.map,r.attribution),im(c.current,r.eventHandlers),e(c.current,a,r,s),c}}var Ff={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(nn,function(n){var r="1.9.4";function s(i){var l,u,p,v;for(u=1,p=arguments.length;u<p;u++){v=arguments[u];for(l in v)i[l]=v[l]}return i}var a=Object.create||function(){function i(){}return function(l){return i.prototype=l,new i}}();function c(i,l){var u=Array.prototype.slice;if(i.bind)return i.bind.apply(i,u.call(arguments,1));var p=u.call(arguments,2);return function(){return i.apply(l,p.length?p.concat(u.call(arguments)):arguments)}}var d=0;function h(i){return"_leaflet_id"in i||(i._leaflet_id=++d),i._leaflet_id}function f(i,l,u){var p,v,P,I;return I=function(){p=!1,v&&(P.apply(u,v),v=!1)},P=function(){p?v=arguments:(i.apply(u,arguments),setTimeout(I,l),p=!0)},P}function m(i,l,u){var p=l[1],v=l[0],P=p-v;return i===p&&u?i:((i-v)%P+P)%P+v}function g(){return!1}function w(i,l){if(l===!1)return i;var u=Math.pow(10,l===void 0?6:l);return Math.round(i*u)/u}function C(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function b(i){return C(i).split(/\s+/)}function _(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var u in l)i.options[u]=l[u];return i.options}function k(i,l,u){var p=[];for(var v in i)p.push(encodeURIComponent(u?v.toUpperCase():v)+"="+encodeURIComponent(i[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function j(i,l){return i.replace(y,function(u,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+u);return typeof v=="function"&&(v=v(l)),v})}var x=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function E(i,l){for(var u=0;u<i.length;u++)if(i[u]===l)return u;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function T(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var B=0;function O(i){var l=+new Date,u=Math.max(0,16-(l-B));return B=l+u,window.setTimeout(i,u)}var R=window.requestAnimationFrame||T("RequestAnimationFrame")||O,N=window.cancelAnimationFrame||T("CancelAnimationFrame")||T("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function M(i,l,u){if(u&&R===O)i.call(l);else return R.call(window,c(i,l))}function q(i){i&&N.call(window,i)}var $={__proto__:null,extend:s,create:a,bind:c,get lastId(){return d},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:w,trim:C,splitWords:b,setOptions:_,getParamString:k,template:j,isArray:x,indexOf:E,emptyImageUrl:A,requestFn:R,cancelFn:N,requestAnimFrame:M,cancelAnimFrame:q};function Z(){}Z.extend=function(i){var l=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=l.__super__=this.prototype,p=a(u);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return i.statics&&s(l,i.statics),i.includes&&(W(i.includes),s.apply(null,[p].concat(i.includes))),s(p,i),delete p.statics,delete p.includes,p.options&&(p.options=u.options?a(u.options):{},s(p.options,i.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,I=p._initHooks.length;P<I;P++)p._initHooks[P].call(this)}},l},Z.include=function(i){var l=this.prototype.options;return s(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},Z.mergeOptions=function(i){return s(this.prototype.options,i),this},Z.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),u=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function W(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=x(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(i,l,u){if(typeof i=="object")for(var p in i)this._on(p,i[p],l);else{i=b(i);for(var v=0,P=i.length;v<P;v++)this._on(i[v],l,u)}return this},off:function(i,l,u){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var p in i)this._off(p,i[p],l);else{i=b(i);for(var v=arguments.length===1,P=0,I=i.length;P<I;P++)v?this._off(i[P]):this._off(i[P],l,u)}return this},_on:function(i,l,u,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,u)===!1){u===this&&(u=void 0);var v={fn:l,ctx:u};p&&(v.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(v)}},_off:function(i,l,u){var p,v,P;if(this._events&&(p=this._events[i],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,P=p.length;v<P;v++)p[v].fn=g;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var I=this._listens(i,l,u);if(I!==!1){var F=p[I];this._firingCount&&(F.fn=g,this._events[i]=p=p.slice()),p.splice(I,1)}}},fire:function(i,l,u){if(!this.listens(i,u))return this;var p=s({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[i];if(v){this._firingCount=this._firingCount+1||1;for(var P=0,I=v.length;P<I;P++){var F=v[P],H=F.fn;F.once&&this.off(i,H,F.ctx),H.call(F.ctx||this,p)}this._firingCount--}}return u&&this._propagateEvent(p),this},listens:function(i,l,u,p){typeof i!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,u=void 0);var P=this._events&&this._events[i];if(P&&P.length&&this._listens(i,v,u)!==!1)return!0;if(p){for(var I in this._eventParents)if(this._eventParents[I].listens(i,l,u,p))return!0}return!1},_listens:function(i,l,u){if(!this._events)return!1;var p=this._events[i]||[];if(!l)return!!p.length;u===this&&(u=void 0);for(var v=0,P=p.length;v<P;v++)if(p[v].fn===l&&p[v].ctx===u)return v;return!1},once:function(i,l,u){if(typeof i=="object")for(var p in i)this._on(p,i[p],l,!0);else{i=b(i);for(var v=0,P=i.length;v<P;v++)this._on(i[v],l,u,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[h(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[h(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var K=Z.extend(G);function D(i,l,u){this.x=u?Math.round(i):i,this.y=u?Math.round(l):l}var Q=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(i){return this.clone()._add(U(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(U(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new D(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new D(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Q(this.x),this.y=Q(this.y),this},distanceTo:function(i){i=U(i);var l=i.x-this.x,u=i.y-this.y;return Math.sqrt(l*l+u*u)},equals:function(i){return i=U(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=U(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function U(i,l,u){return i instanceof D?i:x(i)?new D(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new D(i.x,i.y):new D(i,l,u)}function te(i,l){if(i)for(var u=l?[i,l]:i,p=0,v=u.length;p<v;p++)this.extend(u[p])}te.prototype={extend:function(i){var l,u;if(!i)return this;if(i instanceof D||typeof i[0]=="number"||"x"in i)l=u=U(i);else if(i=se(i),l=i.min,u=i.max,!l||!u)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=u.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(i){return U((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return U(this.min.x,this.max.y)},getTopRight:function(){return U(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,u;return typeof i[0]=="number"||i instanceof D?i=U(i):i=se(i),i instanceof te?(l=i.min,u=i.max):l=u=i,l.x>=this.min.x&&u.x<=this.max.x&&l.y>=this.min.y&&u.y<=this.max.y},intersects:function(i){i=se(i);var l=this.min,u=this.max,p=i.min,v=i.max,P=v.x>=l.x&&p.x<=u.x,I=v.y>=l.y&&p.y<=u.y;return P&&I},overlaps:function(i){i=se(i);var l=this.min,u=this.max,p=i.min,v=i.max,P=v.x>l.x&&p.x<u.x,I=v.y>l.y&&p.y<u.y;return P&&I},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,u=this.max,p=Math.abs(l.x-u.x)*i,v=Math.abs(l.y-u.y)*i;return se(U(l.x-p,l.y-v),U(u.x+p,u.y+v))},equals:function(i){return i?(i=se(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function se(i,l){return!i||i instanceof te?i:new te(i,l)}function pe(i,l){if(i)for(var u=l?[i,l]:i,p=0,v=u.length;p<v;p++)this.extend(u[p])}pe.prototype={extend:function(i){var l=this._southWest,u=this._northEast,p,v;if(i instanceof me)p=i,v=i;else if(i instanceof pe){if(p=i._southWest,v=i._northEast,!p||!v)return this}else return i?this.extend(Y(i)||ue(i)):this;return!l&&!u?(this._southWest=new me(p.lat,p.lng),this._northEast=new me(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),u.lat=Math.max(v.lat,u.lat),u.lng=Math.max(v.lng,u.lng)),this},pad:function(i){var l=this._southWest,u=this._northEast,p=Math.abs(l.lat-u.lat)*i,v=Math.abs(l.lng-u.lng)*i;return new pe(new me(l.lat-p,l.lng-v),new me(u.lat+p,u.lng+v))},getCenter:function(){return new me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new me(this.getNorth(),this.getWest())},getSouthEast:function(){return new me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof me||"lat"in i?i=Y(i):i=ue(i);var l=this._southWest,u=this._northEast,p,v;return i instanceof pe?(p=i.getSouthWest(),v=i.getNorthEast()):p=v=i,p.lat>=l.lat&&v.lat<=u.lat&&p.lng>=l.lng&&v.lng<=u.lng},intersects:function(i){i=ue(i);var l=this._southWest,u=this._northEast,p=i.getSouthWest(),v=i.getNorthEast(),P=v.lat>=l.lat&&p.lat<=u.lat,I=v.lng>=l.lng&&p.lng<=u.lng;return P&&I},overlaps:function(i){i=ue(i);var l=this._southWest,u=this._northEast,p=i.getSouthWest(),v=i.getNorthEast(),P=v.lat>l.lat&&p.lat<u.lat,I=v.lng>l.lng&&p.lng<u.lng;return P&&I},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=ue(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ue(i,l){return i instanceof pe?i:new pe(i,l)}function me(i,l,u){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,u!==void 0&&(this.alt=+u)}me.prototype={equals:function(i,l){if(!i)return!1;i=Y(i);var u=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return u<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+w(this.lat,i)+", "+w(this.lng,i)+")"},distanceTo:function(i){return ke.distance(this,Y(i))},wrap:function(){return ke.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,u=l/Math.cos(Math.PI/180*this.lat);return ue([this.lat-l,this.lng-u],[this.lat+l,this.lng+u])},clone:function(){return new me(this.lat,this.lng,this.alt)}};function Y(i,l,u){return i instanceof me?i:x(i)&&typeof i[0]!="object"?i.length===3?new me(i[0],i[1],i[2]):i.length===2?new me(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new me(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new me(i,l,u)}var he={latLngToPoint:function(i,l){var u=this.projection.project(i),p=this.scale(l);return this.transformation._transform(u,p)},pointToLatLng:function(i,l){var u=this.scale(l),p=this.transformation.untransform(i,u);return this.projection.unproject(p)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,u=this.scale(i),p=this.transformation.transform(l.min,u),v=this.transformation.transform(l.max,u);return new te(p,v)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?m(i.lng,this.wrapLng,!0):i.lng,u=this.wrapLat?m(i.lat,this.wrapLat,!0):i.lat,p=i.alt;return new me(u,l,p)},wrapLatLngBounds:function(i){var l=i.getCenter(),u=this.wrapLatLng(l),p=l.lat-u.lat,v=l.lng-u.lng;if(p===0&&v===0)return i;var P=i.getSouthWest(),I=i.getNorthEast(),F=new me(P.lat-p,P.lng-v),H=new me(I.lat-p,I.lng-v);return new pe(F,H)}},ke=s({},he,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var u=Math.PI/180,p=i.lat*u,v=l.lat*u,P=Math.sin((l.lat-i.lat)*u/2),I=Math.sin((l.lng-i.lng)*u/2),F=P*P+Math.cos(p)*Math.cos(v)*I*I,H=2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F));return this.R*H}}),ee=6378137,_e={R:ee,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,u=this.MAX_LATITUDE,p=Math.max(Math.min(u,i.lat),-u),v=Math.sin(p*l);return new D(this.R*i.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(i){var l=180/Math.PI;return new me((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:function(){var i=ee*Math.PI;return new te([-i,-i],[i,i])}()};function xe(i,l,u,p){if(x(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=u,this._d=p}xe.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new D((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function Ce(i,l,u,p){return new xe(i,l,u,p)}var $e=s({},ke,{code:"EPSG:3857",projection:_e,transformation:function(){var i=.5/(Math.PI*_e.R);return Ce(i,.5,-i,.5)}()}),St=s({},$e,{code:"EPSG:900913"});function Ke(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ft(i,l){var u="",p,v,P,I,F,H;for(p=0,P=i.length;p<P;p++){for(F=i[p],v=0,I=F.length;v<I;v++)H=F[v],u+=(v?"L":"M")+H.x+" "+H.y;u+=l?ge.svg?"z":"x":""}return u||"M0 0"}var Zt=document.documentElement.style,rr="ActiveXObject"in window,Ur=rr&&!document.addEventListener,$n="msLaunchUri"in navigator&&!("documentMode"in document),Ii=sr("webkit"),Kt=sr("android"),ir=sr("android 2")||sr("android 3"),Ss=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ho=Kt&&sr("Google")&&Ss<537&&!("AudioNode"in window),Mi=!!window.opera,Wr=!$n&&sr("chrome"),ne=sr("gecko")&&!Ii&&!Mi&&!rr,ie=!Wr&&sr("safari"),fe=sr("phantom"),Te="OTransition"in Zt,He=navigator.platform.indexOf("Win")===0,Je=rr&&"transition"in Zt,Ve="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ir,it="MozPerspective"in Zt,Fe=!window.L_DISABLE_3D&&(Je||Ve||it)&&!Te&&!fe,Ue=typeof orientation<"u"||sr("mobile"),Tt=Ue&&Ii,yt=Ue&&Ve,Oe=!window.PointerEvent&&window.MSPointerEvent,tt=!!(window.PointerEvent||Oe),Ut="ontouchstart"in window||!!window.TouchEvent,Yt=!window.L_NO_TOUCH&&(Ut||tt),yn=Ue&&Mi,Cs=Ue&&ne,Hr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pl=function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return i}(),El=function(){return!!document.createElement("canvas").getContext}(),Gu=!!(document.createElementNS&&Ke("svg").createSVGRect),Vx=!!Gu&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),qx=!Gu&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Gx=navigator.platform.indexOf("Mac")===0,Zx=navigator.platform.indexOf("Linux")===0;function sr(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ge={ie:rr,ielt9:Ur,edge:$n,webkit:Ii,android:Kt,android23:ir,androidStock:Ho,opera:Mi,chrome:Wr,gecko:ne,safari:ie,phantom:fe,opera12:Te,win:He,ie3d:Je,webkit3d:Ve,gecko3d:it,any3d:Fe,mobile:Ue,mobileWebkit:Tt,mobileWebkit3d:yt,msPointer:Oe,pointer:tt,touch:Yt,touchNative:Ut,mobileOpera:yn,mobileGecko:Cs,retina:Hr,passiveEvents:Pl,canvas:El,svg:Gu,vml:qx,inlineSvg:Vx,mac:Gx,linux:Zx},sm=ge.msPointer?"MSPointerDown":"pointerdown",om=ge.msPointer?"MSPointerMove":"pointermove",am=ge.msPointer?"MSPointerUp":"pointerup",lm=ge.msPointer?"MSPointerCancel":"pointercancel",Zu={touchstart:sm,touchmove:om,touchend:am,touchcancel:lm},cm={touchstart:ew,touchmove:Tl,touchend:Tl,touchcancel:Tl},Ps={},um=!1;function Kx(i,l,u){return l==="touchstart"&&Xx(),cm[l]?(u=cm[l].bind(this,u),i.addEventListener(Zu[l],u,!1),u):(console.warn("wrong event specified:",l),g)}function Yx(i,l,u){if(!Zu[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Zu[l],u,!1)}function Jx(i){Ps[i.pointerId]=i}function Qx(i){Ps[i.pointerId]&&(Ps[i.pointerId]=i)}function dm(i){delete Ps[i.pointerId]}function Xx(){um||(document.addEventListener(sm,Jx,!0),document.addEventListener(om,Qx,!0),document.addEventListener(am,dm,!0),document.addEventListener(lm,dm,!0),um=!0)}function Tl(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var u in Ps)l.touches.push(Ps[u]);l.changedTouches=[l],i(l)}}function ew(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&It(l),Tl(i,l)}function tw(i){var l={},u,p;for(p in i)u=i[p],l[p]=u&&u.bind?u.bind(i):u;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var nw=200;function rw(i,l){i.addEventListener("dblclick",l);var u=0,p;function v(P){if(P.detail!==1){p=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var I=gm(P);if(!(I.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!I.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var F=Date.now();F-u<=nw?(p++,p===2&&l(tw(P))):p=1,u=F}}}return i.addEventListener("click",v),{dblclick:l,simDblclick:v}}function iw(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var Ku=Nl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Vo=Nl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),hm=Vo==="webkitTransition"||Vo==="OTransition"?Vo+"End":"transitionend";function fm(i){return typeof i=="string"?document.getElementById(i):i}function qo(i,l){var u=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!u||u==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(i,null);u=p?p[l]:null}return u==="auto"?null:u}function We(i,l,u){var p=document.createElement(i);return p.className=l||"",u&&u.appendChild(p),p}function ot(i){var l=i.parentNode;l&&l.removeChild(i)}function Ll(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Es(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function Ts(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Yu(i,l){if(i.classList!==void 0)return i.classList.contains(l);var u=Ol(i);return u.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(u)}function Le(i,l){if(i.classList!==void 0)for(var u=b(l),p=0,v=u.length;p<v;p++)i.classList.add(u[p]);else if(!Yu(i,l)){var P=Ol(i);Ju(i,(P?P+" ":"")+l)}}function pt(i,l){i.classList!==void 0?i.classList.remove(l):Ju(i,C((" "+Ol(i)+" ").replace(" "+l+" "," ")))}function Ju(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function Ol(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Pn(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&sw(i,l)}function sw(i,l){var u=!1,p="DXImageTransform.Microsoft.Alpha";try{u=i.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),u?(u.Enabled=l!==100,u.Opacity=l):i.style.filter+=" progid:"+p+"(opacity="+l+")"}function Nl(i){for(var l=document.documentElement.style,u=0;u<i.length;u++)if(i[u]in l)return i[u];return!1}function Ai(i,l,u){var p=l||new D(0,0);i.style[Ku]=(ge.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(u?" scale("+u+")":"")}function _t(i,l){i._leaflet_pos=l,ge.any3d?Ai(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function Di(i){return i._leaflet_pos||new D(0,0)}var Go,Zo,Qu;if("onselectstart"in document)Go=function(){Pe(window,"selectstart",It)},Zo=function(){Qe(window,"selectstart",It)};else{var Ko=Nl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Go=function(){if(Ko){var i=document.documentElement.style;Qu=i[Ko],i[Ko]="none"}},Zo=function(){Ko&&(document.documentElement.style[Ko]=Qu,Qu=void 0)}}function Xu(){Pe(window,"dragstart",It)}function ed(){Qe(window,"dragstart",It)}var Rl,td;function nd(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Il(),Rl=i,td=i.style.outlineStyle,i.style.outlineStyle="none",Pe(window,"keydown",Il))}function Il(){Rl&&(Rl.style.outlineStyle=td,Rl=void 0,td=void 0,Qe(window,"keydown",Il))}function pm(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function rd(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var ow={__proto__:null,TRANSFORM:Ku,TRANSITION:Vo,TRANSITION_END:hm,get:fm,getStyle:qo,create:We,remove:ot,empty:Ll,toFront:Es,toBack:Ts,hasClass:Yu,addClass:Le,removeClass:pt,setClass:Ju,getClass:Ol,setOpacity:Pn,testProp:Nl,setTransform:Ai,setPosition:_t,getPosition:Di,get disableTextSelection(){return Go},get enableTextSelection(){return Zo},disableImageDrag:Xu,enableImageDrag:ed,preventOutline:nd,restoreOutline:Il,getSizedParentNode:pm,getScale:rd};function Pe(i,l,u,p){if(l&&typeof l=="object")for(var v in l)sd(i,v,l[v],u);else{l=b(l);for(var P=0,I=l.length;P<I;P++)sd(i,l[P],u,p)}return this}var or="_leaflet_events";function Qe(i,l,u,p){if(arguments.length===1)mm(i),delete i[or];else if(l&&typeof l=="object")for(var v in l)od(i,v,l[v],u);else if(l=b(l),arguments.length===2)mm(i,function(F){return E(l,F)!==-1});else for(var P=0,I=l.length;P<I;P++)od(i,l[P],u,p);return this}function mm(i,l){for(var u in i[or]){var p=u.split(/\d/)[0];(!l||l(p))&&od(i,p,null,null,u)}}var id={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function sd(i,l,u,p){var v=l+h(u)+(p?"_"+h(p):"");if(i[or]&&i[or][v])return this;var P=function(F){return u.call(p||i,F||window.event)},I=P;!ge.touchNative&&ge.pointer&&l.indexOf("touch")===0?P=Kx(i,l,P):ge.touch&&l==="dblclick"?P=rw(i,P):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(id[l]||l,P,ge.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function(F){F=F||window.event,ld(i,F)&&I(F)},i.addEventListener(id[l],P,!1)):i.addEventListener(l,I,!1):i.attachEvent("on"+l,P),i[or]=i[or]||{},i[or][v]=P}function od(i,l,u,p,v){v=v||l+h(u)+(p?"_"+h(p):"");var P=i[or]&&i[or][v];if(!P)return this;!ge.touchNative&&ge.pointer&&l.indexOf("touch")===0?Yx(i,l,P):ge.touch&&l==="dblclick"?iw(i,P):"removeEventListener"in i?i.removeEventListener(id[l]||l,P,!1):i.detachEvent("on"+l,P),i[or][v]=null}function zi(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function ad(i){return sd(i,"wheel",zi),this}function Yo(i){return Pe(i,"mousedown touchstart dblclick contextmenu",zi),i._leaflet_disable_click=!0,this}function It(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Bi(i){return It(i),zi(i),this}function gm(i){if(i.composedPath)return i.composedPath();for(var l=[],u=i.target;u;)l.push(u),u=u.parentNode;return l}function vm(i,l){if(!l)return new D(i.clientX,i.clientY);var u=rd(l),p=u.boundingClientRect;return new D((i.clientX-p.left)/u.x-l.clientLeft,(i.clientY-p.top)/u.y-l.clientTop)}var aw=ge.linux&&ge.chrome?window.devicePixelRatio:ge.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ym(i){return ge.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/aw:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function ld(i,l){var u=l.relatedTarget;if(!u)return!0;try{for(;u&&u!==i;)u=u.parentNode}catch{return!1}return u!==i}var lw={__proto__:null,on:Pe,off:Qe,stopPropagation:zi,disableScrollPropagation:ad,disableClickPropagation:Yo,preventDefault:It,stop:Bi,getPropagationPath:gm,getMousePosition:vm,getWheelDelta:ym,isExternalTarget:ld,addListener:Pe,removeListener:Qe},_m=K.extend({run:function(i,l,u,p){this.stop(),this._el=i,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Di(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,u=this._duration*1e3;l<u?this._runFrame(this._easeOut(l/u),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var u=this._startPos.add(this._offset.multiplyBy(i));l&&u._round(),_t(this._el,u),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),ze=K.extend({options:{crs:$e,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=_(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(Y(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Vo&&ge.any3d&&!ge.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,hm,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,u){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(Y(i),l,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,u.zoom):this._tryAnimatedPan(i,u.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,u.pan&&u.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,u){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),P=i instanceof D?i:this.latLngToContainerPoint(i),I=P.subtract(v).multiplyBy(1-1/p),F=this.containerPointToLatLng(v.add(I));return this.setView(F,l,{zoom:u})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():ue(i);var u=U(l.paddingTopLeft||l.padding||[0,0]),p=U(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(i,!1,u.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:i.getCenter(),zoom:v};var P=p.subtract(u).divideBy(2),I=this.project(i.getSouthWest(),v),F=this.project(i.getNorthEast(),v),H=this.unproject(I.add(F).divideBy(2).add(P),v);return{center:H,zoom:v}},fitBounds:function(i,l){if(i=ue(i),!i.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(i,l);return this.setView(u.center,u.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=U(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _m,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Le(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,u,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,u){if(u=u||{},u.animate===!1||!ge.any3d)return this.setView(i,l,u);this._stop();var p=this.project(this.getCenter()),v=this.project(i),P=this.getSize(),I=this._zoom;i=Y(i),l=l===void 0?I:l;var F=Math.max(P.x,P.y),H=F*this.getZoomScale(I,l),J=v.distanceTo(p)||1,oe=1.42,je=oe*oe;function Ne(xt){var ql=xt?-1:1,Yw=xt?H:F,Jw=H*H-F*F+ql*je*je*J*J,Qw=2*Yw*je*J,_d=Jw/Qw,Xm=Math.sqrt(_d*_d+1)-_d,Xw=Xm<1e-9?-18:Math.log(Xm);return Xw}function Jt(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function Lt(xt){return(Math.exp(xt)+Math.exp(-xt))/2}function Tn(xt){return Jt(xt)/Lt(xt)}var on=Ne(0);function Ms(xt){return F*(Lt(on)/Lt(on+oe*xt))}function qw(xt){return F*(Lt(on)*Tn(on+oe*xt)-Jt(on))/je}function Gw(xt){return 1-Math.pow(1-xt,1.5)}var Zw=Date.now(),Jm=(Ne(1)-on)/oe,Kw=u.duration?1e3*u.duration:1e3*Jm*.8;function Qm(){var xt=(Date.now()-Zw)/Kw,ql=Gw(xt)*Jm;xt<=1?(this._flyToFrame=M(Qm,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(qw(ql)/J)),I),this.getScaleZoom(F/Ms(ql),I),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Qm.call(this),this},flyToBounds:function(i,l){var u=this._getBoundsCenterZoom(i,l);return this.flyTo(u.center,u.zoom,l)},setMaxBounds:function(i){return i=ue(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var u=this.getCenter(),p=this._limitCenter(u,this._zoom,ue(i));return u.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var u=U(l.paddingTopLeft||l.padding||[0,0]),p=U(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),P=this.project(i),I=this.getPixelBounds(),F=se([I.min.add(u),I.max.subtract(p)]),H=F.getSize();if(!F.contains(P)){this._enforcingBounds=!0;var J=P.subtract(F.getCenter()),oe=F.extend(P).getSize().subtract(H);v.x+=J.x<0?-oe.x:oe.x,v.y+=J.y<0?-oe.y:oe.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),p=l.divideBy(2).round(),v=u.divideBy(2).round(),P=p.subtract(v);return!P.x&&!P.y?this:(i.animate&&i.pan?this.panBy(P):(i.pan&&this._rawPanBy(P),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=c(this._handleGeolocationResponse,this),u=c(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,u,i):navigator.geolocation.getCurrentPosition(l,u,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,u=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,u=i.coords.longitude,p=new me(l,u),v=p.toBounds(i.coords.accuracy*2),P=this._locateOptions;if(P.setView){var I=this.getBoundsZoom(v);this.setView(p,P.maxZoom?Math.min(I,P.maxZoom):I)}var F={latlng:p,bounds:v,timestamp:i.timestamp};for(var H in i.coords)typeof i.coords[H]=="number"&&(F[H]=i.coords[H]);this.fire("locationfound",F)}},addHandler:function(i,l){if(!l)return this;var u=this[i]=new l(this);return this._handlers.push(u),this.options[i]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ot(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)ot(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var u="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),p=We("div",u,l||this._mapPane);return i&&(this._panes[i]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),u=this.unproject(i.getTopRight());return new pe(l,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,u){i=ue(i),u=U(u||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),P=this.getMaxZoom(),I=i.getNorthWest(),F=i.getSouthEast(),H=this.getSize().subtract(u),J=se(this.project(F,p),this.project(I,p)).getSize(),oe=ge.any3d?this.options.zoomSnap:1,je=H.x/J.x,Ne=H.y/J.y,Jt=l?Math.max(je,Ne):Math.min(je,Ne);return p=this.getScaleZoom(Jt,p),oe&&(p=Math.round(p/(oe/100))*(oe/100),p=l?Math.ceil(p/oe)*oe:Math.floor(p/oe)*oe),Math.max(v,Math.min(P,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var u=this._getTopLeftPoint(i,l);return new te(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var u=this.options.crs;return l=l===void 0?this._zoom:l,u.scale(i)/u.scale(l)},getScaleZoom:function(i,l){var u=this.options.crs;l=l===void 0?this._zoom:l;var p=u.zoom(i*u.scale(l));return isNaN(p)?1/0:p},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(Y(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(U(i),l)},layerPointToLatLng:function(i){var l=U(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(Y(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Y(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ue(i))},distance:function(i,l){return this.options.crs.distance(Y(i),Y(l))},containerPointToLayerPoint:function(i){return U(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return U(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(U(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Y(i)))},mouseEventToContainerPoint:function(i){return vm(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=fm(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Pe(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ge.any3d,Le(i,"leaflet-container"+(ge.touch?" leaflet-touch":"")+(ge.retina?" leaflet-retina":"")+(ge.ielt9?" leaflet-oldie":"")+(ge.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=qo(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_t(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Le(i.markerPane,"leaflet-zoom-hide"),Le(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,u){_t(this._mapPane,new D(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,u)._move(i,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,u,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),p?u&&u.pinch&&this.fire("zoom",u):((v||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){_t(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[h(this._container)]=this;var l=i?Qe:Pe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ge.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var u=[],p,v=l==="mouseout"||l==="mouseover",P=i.target||i.srcElement,I=!1;P;){if(p=this._targets[h(P)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){I=!0;break}if(p&&p.listens(l,!0)&&(v&&!ld(P,i)||(u.push(p),v))||P===this._container)break;P=P.parentNode}return!u.length&&!I&&!v&&this.listens(l,!0)&&(u=[this]),u},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var u=i.type;u==="mousedown"&&nd(l),this._fireDOMEvent(i,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,u){if(i.type==="click"){var p=s({},i);p.type="preclick",this._fireDOMEvent(p,p.type,u)}var v=this._findEventTargets(i,l);if(u){for(var P=[],I=0;I<u.length;I++)u[I].listens(l,!0)&&P.push(u[I]);v=P.concat(v)}if(v.length){l==="contextmenu"&&It(i);var F=v[0],H={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var J=F.getLatLng&&(!F._radius||F._radius<=10);H.containerPoint=J?this.latLngToContainerPoint(F.getLatLng()):this.mouseEventToContainerPoint(i),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=J?F.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(I=0;I<v.length;I++)if(v[I].fire(l,H,!0),H.originalEvent._stopped||v[I].options.bubblingMouseEvents===!1&&E(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return Di(this._mapPane)||new D(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var u=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var u=this.getSize()._divideBy(2);return this.project(i,l)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,u){var p=this._getNewPixelOrigin(u,l);return this.project(i,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(i,l,u){var p=this._getNewPixelOrigin(u,l);return se([this.project(i.getSouthWest(),l)._subtract(p),this.project(i.getNorthWest(),l)._subtract(p),this.project(i.getSouthEast(),l)._subtract(p),this.project(i.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,u){if(!u)return i;var p=this.project(i,l),v=this.getSize().divideBy(2),P=new te(p.subtract(v),p.add(v)),I=this._getBoundsOffset(P,u,l);return Math.abs(I.x)<=1&&Math.abs(I.y)<=1?i:this.unproject(p.add(I),l)},_limitOffset:function(i,l){if(!l)return i;var u=this.getPixelBounds(),p=new te(u.min.add(i),u.max.add(i));return i.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(i,l,u){var p=se(this.project(l.getNorthEast(),u),this.project(l.getSouthWest(),u)),v=p.min.subtract(i.min),P=p.max.subtract(i.max),I=this._rebound(v.x,-P.x),F=this._rebound(v.y,-P.y);return new D(I,F)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),u=this.getMaxZoom(),p=ge.any3d?this.options.zoomSnap:1;return p&&(i=Math.round(i/p)*p),Math.max(l,Math.min(u,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var u=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,l),!0)},_createAnimProxy:function(){var i=this._proxy=We("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var u=Ku,p=this._proxy.style[u];Ai(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ot(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();Ai(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(i)._divideBy(1-1/p);return u.animate!==!0&&!this.getSize().contains(v)?!1:(M(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,u,p){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,Le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function cw(i,l){return new ze(i,l)}var Fn=Z.extend({options:{position:"topright"},initialize:function(i){_(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),u=this.getPosition(),p=i._controlCorners[u];return Le(l,"leaflet-control"),u.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ot(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Jo=function(i){return new Fn(i)};ze.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",u=this._controlContainer=We("div",l+"control-container",this._container);function p(v,P){var I=l+v+" "+l+P;i[v+P]=We("div",I,u)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)ot(this._controlCorners[i]);ot(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var xm=Fn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,u,p){return u<p?-1:p<u?1:0}},initialize:function(i,l,u){_(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in i)this._addLayer(i[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Fn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):pt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=We("div",i),u=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Yo(l),ad(l);var p=this._section=We("section",i+"-list");u&&(this._map.on("click",this.collapse,this),Pe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=We("a",i+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Pe(v,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){It(P),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=We("div",i+"-base",p),this._separator=We("div",i+"-separator",p),this._overlaysList=We("div",i+"-overlays",p),l.appendChild(p)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,u){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:u}),this.options.sortLayers&&this._layers.sort(c(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ll(this._baseLayersList),Ll(this._overlaysList),this._layerControlInputs=[];var i,l,u,p,v=0;for(u=0;u<this._layers.length;u++)p=this._layers[u],this._addItem(p),l=l||p.overlay,i=i||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(i=i&&v>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(h(i.target)),u=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;u&&this._map.fire(u,l)},_createRadioElement:function(i,l){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=u,p.firstChild},_addItem:function(i){var l=document.createElement("label"),u=this._map.hasLayer(i.layer),p;i.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=u):p=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(p),p.layerId=h(i.layer),Pe(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+i.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(p),P.appendChild(v);var I=i.overlay?this._overlaysList:this._baseLayersList;return I.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,u,p=[],v=[];this._handlingClick=!0;for(var P=i.length-1;P>=0;P--)l=i[P],u=this._getLayer(l.layerId).layer,l.checked?p.push(u):l.checked||v.push(u);for(P=0;P<v.length;P++)this._map.hasLayer(v[P])&&this._map.removeLayer(v[P]);for(P=0;P<p.length;P++)this._map.hasLayer(p[P])||this._map.addLayer(p[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,u,p=this._map.getZoom(),v=i.length-1;v>=0;v--)l=i[v],u=this._getLayer(l.layerId).layer,l.disabled=u.options.minZoom!==void 0&&p<u.options.minZoom||u.options.maxZoom!==void 0&&p>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Pe(i,"click",It),this.expand();var l=this;setTimeout(function(){Qe(i,"click",It),l._preventClick=!1})}}),uw=function(i,l,u){return new xm(i,l,u)},cd=Fn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",u=We("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",u,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,u,p,v){var P=We("a",u,p);return P.innerHTML=i,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),Yo(P),Pe(P,"click",Bi),Pe(P,"click",v,this),Pe(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";pt(this._zoomInButton,l),pt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Le(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Le(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});ze.mergeOptions({zoomControl:!0}),ze.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cd,this.addControl(this.zoomControl))});var dw=function(i){return new cd(i)},wm=Fn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",u=We("div",l),p=this.options;return this._addScales(p,l+"-line",u),i.on(p.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),u},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,u){i.metric&&(this._mScale=We("div",l,u)),i.imperial&&(this._iScale=We("div",l,u))},_update:function(){var i=this._map,l=i.getSize().y/2,u=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(u)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),u=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,u,l/i)},_updateImperial:function(i){var l=i*3.2808399,u,p,v;l>5280?(u=l/5280,p=this._getRoundNum(u),this._updateScale(this._iScale,p+" mi",p/u)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(i,l,u){i.style.width=Math.round(this.options.maxWidth*u)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),u=i/l;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,l*u}}),hw=function(i){return new wm(i)},fw='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ud=Fn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ge.inlineSvg?fw+" ":"")+"Leaflet</a>"},initialize:function(i){_(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=We("div","leaflet-control-attribution"),Yo(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var u=[];this.options.prefix&&u.push(this.options.prefix),i.length&&u.push(i.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});ze.mergeOptions({attributionControl:!0}),ze.addInitHook(function(){this.options.attributionControl&&new ud().addTo(this)});var pw=function(i){return new ud(i)};Fn.Layers=xm,Fn.Zoom=cd,Fn.Scale=wm,Fn.Attribution=ud,Jo.layers=uw,Jo.zoom=dw,Jo.scale=hw,Jo.attribution=pw;var ar=Z.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ar.addTo=function(i,l){return i.addHandler(l,this),this};var mw={Events:G},bm=ge.touch?"touchstart mousedown":"mousedown",Vr=K.extend({options:{clickTolerance:3},initialize:function(i,l,u,p){_(this,p),this._element=i,this._dragStartTarget=l||i,this._preventOutline=u},enable:function(){this._enabled||(Pe(this._dragStartTarget,bm,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vr._dragging===this&&this.finishDrag(!0),Qe(this._dragStartTarget,bm,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Yu(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Vr._dragging===this&&this.finishDrag();return}if(!(Vr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Vr._dragging=this,this._preventOutline&&nd(this._element),Xu(),Go(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,u=pm(this._element);this._startPoint=new D(l.clientX,l.clientY),this._startPos=Di(this._element),this._parentScale=rd(u);var p=i.type==="mousedown";Pe(document,p?"mousemove":"touchmove",this._onMove,this),Pe(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,u=new D(l.clientX,l.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,It(i),this._moved||(this.fire("dragstart"),this._moved=!0,Le(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),_t(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){pt(document.body,"leaflet-dragging"),this._lastTarget&&(pt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qe(document,"mousemove touchmove",this._onMove,this),Qe(document,"mouseup touchend touchcancel",this._onUp,this),ed(),Zo();var l=this._moved&&this._moving;this._moving=!1,Vr._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function jm(i,l,u){var p,v=[1,4,2,8],P,I,F,H,J,oe,je,Ne;for(P=0,oe=i.length;P<oe;P++)i[P]._code=$i(i[P],l);for(F=0;F<4;F++){for(je=v[F],p=[],P=0,oe=i.length,I=oe-1;P<oe;I=P++)H=i[P],J=i[I],H._code&je?J._code&je||(Ne=Ml(J,H,je,l,u),Ne._code=$i(Ne,l),p.push(Ne)):(J._code&je&&(Ne=Ml(J,H,je,l,u),Ne._code=$i(Ne,l),p.push(Ne)),p.push(H));i=p}return i}function km(i,l){var u,p,v,P,I,F,H,J,oe;if(!i||i.length===0)throw new Error("latlngs not passed");En(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var je=Y([0,0]),Ne=ue(i),Jt=Ne.getNorthWest().distanceTo(Ne.getSouthWest())*Ne.getNorthEast().distanceTo(Ne.getNorthWest());Jt<1700&&(je=dd(i));var Lt=i.length,Tn=[];for(u=0;u<Lt;u++){var on=Y(i[u]);Tn.push(l.project(Y([on.lat-je.lat,on.lng-je.lng])))}for(F=H=J=0,u=0,p=Lt-1;u<Lt;p=u++)v=Tn[u],P=Tn[p],I=v.y*P.x-P.y*v.x,H+=(v.x+P.x)*I,J+=(v.y+P.y)*I,F+=I*3;F===0?oe=Tn[0]:oe=[H/F,J/F];var Ms=l.unproject(U(oe));return Y([Ms.lat+je.lat,Ms.lng+je.lng])}function dd(i){for(var l=0,u=0,p=0,v=0;v<i.length;v++){var P=Y(i[v]);l+=P.lat,u+=P.lng,p++}return Y([l/p,u/p])}var gw={__proto__:null,clipPolygon:jm,polygonCenter:km,centroid:dd};function Sm(i,l){if(!l||!i.length)return i.slice();var u=l*l;return i=_w(i,u),i=yw(i,u),i}function Cm(i,l,u){return Math.sqrt(Qo(i,l,u,!0))}function vw(i,l,u){return Qo(i,l,u)}function yw(i,l){var u=i.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(u);v[0]=v[u-1]=1,hd(i,v,l,0,u-1);var P,I=[];for(P=0;P<u;P++)v[P]&&I.push(i[P]);return I}function hd(i,l,u,p,v){var P=0,I,F,H;for(F=p+1;F<=v-1;F++)H=Qo(i[F],i[p],i[v],!0),H>P&&(I=F,P=H);P>u&&(l[I]=1,hd(i,l,u,p,I),hd(i,l,u,I,v))}function _w(i,l){for(var u=[i[0]],p=1,v=0,P=i.length;p<P;p++)xw(i[p],i[v])>l&&(u.push(i[p]),v=p);return v<P-1&&u.push(i[P-1]),u}var Pm;function Em(i,l,u,p,v){var P=p?Pm:$i(i,u),I=$i(l,u),F,H,J;for(Pm=I;;){if(!(P|I))return[i,l];if(P&I)return!1;F=P||I,H=Ml(i,l,F,u,v),J=$i(H,u),F===P?(i=H,P=J):(l=H,I=J)}}function Ml(i,l,u,p,v){var P=l.x-i.x,I=l.y-i.y,F=p.min,H=p.max,J,oe;return u&8?(J=i.x+P*(H.y-i.y)/I,oe=H.y):u&4?(J=i.x+P*(F.y-i.y)/I,oe=F.y):u&2?(J=H.x,oe=i.y+I*(H.x-i.x)/P):u&1&&(J=F.x,oe=i.y+I*(F.x-i.x)/P),new D(J,oe,v)}function $i(i,l){var u=0;return i.x<l.min.x?u|=1:i.x>l.max.x&&(u|=2),i.y<l.min.y?u|=4:i.y>l.max.y&&(u|=8),u}function xw(i,l){var u=l.x-i.x,p=l.y-i.y;return u*u+p*p}function Qo(i,l,u,p){var v=l.x,P=l.y,I=u.x-v,F=u.y-P,H=I*I+F*F,J;return H>0&&(J=((i.x-v)*I+(i.y-P)*F)/H,J>1?(v=u.x,P=u.y):J>0&&(v+=I*J,P+=F*J)),I=i.x-v,F=i.y-P,p?I*I+F*F:new D(v,P)}function En(i){return!x(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Tm(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),En(i)}function Lm(i,l){var u,p,v,P,I,F,H,J;if(!i||i.length===0)throw new Error("latlngs not passed");En(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var oe=Y([0,0]),je=ue(i),Ne=je.getNorthWest().distanceTo(je.getSouthWest())*je.getNorthEast().distanceTo(je.getNorthWest());Ne<1700&&(oe=dd(i));var Jt=i.length,Lt=[];for(u=0;u<Jt;u++){var Tn=Y(i[u]);Lt.push(l.project(Y([Tn.lat-oe.lat,Tn.lng-oe.lng])))}for(u=0,p=0;u<Jt-1;u++)p+=Lt[u].distanceTo(Lt[u+1])/2;if(p===0)J=Lt[0];else for(u=0,P=0;u<Jt-1;u++)if(I=Lt[u],F=Lt[u+1],v=I.distanceTo(F),P+=v,P>p){H=(P-p)/v,J=[F.x-H*(F.x-I.x),F.y-H*(F.y-I.y)];break}var on=l.unproject(U(J));return Y([on.lat+oe.lat,on.lng+oe.lng])}var ww={__proto__:null,simplify:Sm,pointToSegmentDistance:Cm,closestPointOnSegment:vw,clipSegment:Em,_getEdgeIntersection:Ml,_getBitCode:$i,_sqClosestPointOnSegment:Qo,isFlat:En,_flat:Tm,polylineCenter:Lm},fd={project:function(i){return new D(i.lng,i.lat)},unproject:function(i){return new me(i.y,i.x)},bounds:new te([-180,-90],[180,90])},pd={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,u=this.R,p=i.lat*l,v=this.R_MINOR/u,P=Math.sqrt(1-v*v),I=P*Math.sin(p),F=Math.tan(Math.PI/4-p/2)/Math.pow((1-I)/(1+I),P/2);return p=-u*Math.log(Math.max(F,1e-10)),new D(i.lng*l*u,p)},unproject:function(i){for(var l=180/Math.PI,u=this.R,p=this.R_MINOR/u,v=Math.sqrt(1-p*p),P=Math.exp(-i.y/u),I=Math.PI/2-2*Math.atan(P),F=0,H=.1,J;F<15&&Math.abs(H)>1e-7;F++)J=v*Math.sin(I),J=Math.pow((1-J)/(1+J),v/2),H=Math.PI/2-2*Math.atan(P*J)-I,I+=H;return new me(I*l,i.x*l/u)}},bw={__proto__:null,LonLat:fd,Mercator:pd,SphericalMercator:_e},jw=s({},ke,{code:"EPSG:3395",projection:pd,transformation:function(){var i=.5/(Math.PI*pd.R);return Ce(i,.5,-i,.5)}()}),Om=s({},ke,{code:"EPSG:4326",projection:fd,transformation:Ce(1/180,1,-1/180,.5)}),kw=s({},he,{projection:fd,transformation:Ce(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var u=l.lng-i.lng,p=l.lat-i.lat;return Math.sqrt(u*u+p*p)},infinite:!0});he.Earth=ke,he.EPSG3395=jw,he.EPSG3857=$e,he.EPSG900913=St,he.EPSG4326=Om,he.Simple=kw;var Un=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[h(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[h(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var u=this.getEvents();l.on(u,this),this.once("remove",function(){l.off(u,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});ze.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=h(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return h(i)in this._layers},eachLayer:function(i,l){for(var u in this._layers)i.call(l,this._layers[u]);return this},_addLayers:function(i){i=i?x(i)?i:[i]:[];for(var l=0,u=i.length;l<u;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[h(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=h(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,u=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;i=v.minZoom===void 0?i:Math.min(i,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ls=Un.extend({initialize:function(i,l){_(this,l),this._layers={};var u,p;if(i)for(u=0,p=i.length;u<p;u++)this.addLayer(i[u])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),u,p;for(u in this._layers)p=this._layers[u],p[i]&&p[i].apply(p,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var u in this._layers)i.call(l,this._layers[u]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return h(i)}}),Sw=function(i,l){return new Ls(i,l)},wr=Ls.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Ls.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Ls.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new pe;for(var l in this._layers){var u=this._layers[l];i.extend(u.getBounds?u.getBounds():u.getLatLng())}return i}}),Cw=function(i,l){return new wr(i,l)},Os=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){_(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var u=this._getIconUrl(i);if(!u){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(u,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(i,l){var u=this.options,p=u[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=U(p),P=U(l==="shadow"&&u.shadowAnchor||u.iconAnchor||v&&v.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(u.className||""),P&&(i.style.marginLeft=-P.x+"px",i.style.marginTop=-P.y+"px"),v&&(i.style.width=v.x+"px",i.style.height=v.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return ge.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Pw(i){return new Os(i)}var Xo=Os.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Xo.imagePath!="string"&&(Xo.imagePath=this._detectIconPath()),(this.options.imagePath||Xo.imagePath)+Os.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(u,p,v){var P=p.exec(u);return P&&P[v]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=We("div","leaflet-default-icon-path",document.body),l=qo(i,"background-image")||qo(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Nm=ar.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Vr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Le(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,u=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,P=Di(l._icon),I=u.getPixelBounds(),F=u.getPixelOrigin(),H=se(I.min._subtract(F).add(v),I.max._subtract(F).subtract(v));if(!H.contains(P)){var J=U((Math.max(H.max.x,P.x)-H.max.x)/(I.max.x-H.max.x)-(Math.min(H.min.x,P.x)-H.min.x)/(I.min.x-H.min.x),(Math.max(H.max.y,P.y)-H.max.y)/(I.max.y-H.max.y)-(Math.min(H.min.y,P.y)-H.min.y)/(I.min.y-H.min.y)).multiplyBy(p);u.panBy(J,{animate:!1}),this._draggable._newPos._add(J),this._draggable._startPos._add(J),_t(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=M(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,u=l._shadow,p=Di(l._icon),v=l._map.layerPointToLatLng(p);u&&_t(u,p),l._latlng=v,i.latlng=v,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Al=Un.extend({options:{icon:new Xo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){_(this,l),this._latlng=Y(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=Y(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=i.icon.createIcon(this._icon),p=!1;u!==this._icon&&(this._icon&&this._removeIcon(),p=!0,i.title&&(u.title=i.title),u.tagName==="IMG"&&(u.alt=i.alt||"")),Le(u,l),i.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(u,"focus",this._panOnFocus,this);var v=i.icon.createShadow(this._shadow),P=!1;v!==this._shadow&&(this._removeShadow(),P=!0),v&&(Le(v,l),v.alt=""),this._shadow=v,i.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&P&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qe(this._icon,"focus",this._panOnFocus,this),ot(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ot(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&_t(this._icon,i),this._shadow&&_t(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Nm)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Nm(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Pn(this._icon,i),this._shadow&&Pn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,u=l.iconSize?U(l.iconSize):U(0,0),p=l.iconAnchor?U(l.iconAnchor):U(0,0);i.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:u.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ew(i,l){return new Al(i,l)}var qr=Un.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return _(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Dl=qr.extend({options:{fill:!0,radius:10},initialize:function(i,l){_(this,l),this._latlng=Y(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=Y(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return qr.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,u=this._clickTolerance(),p=[i+u,l+u];this._pxBounds=new te(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Tw(i,l){return new Dl(i,l)}var md=Dl.extend({initialize:function(i,l,u){if(typeof l=="number"&&(l=s({},u,{radius:l})),_(this,l),this._latlng=Y(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new pe(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:qr.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,u=this._map,p=u.options.crs;if(p.distance===ke.distance){var v=Math.PI/180,P=this._mRadius/ke.R/v,I=u.project([l+P,i]),F=u.project([l-P,i]),H=I.add(F).divideBy(2),J=u.unproject(H).lat,oe=Math.acos((Math.cos(P*v)-Math.sin(l*v)*Math.sin(J*v))/(Math.cos(l*v)*Math.cos(J*v)))/v;(isNaN(oe)||oe===0)&&(oe=P/Math.cos(Math.PI/180*l)),this._point=H.subtract(u.getPixelOrigin()),this._radius=isNaN(oe)?0:H.x-u.project([J,i-oe]).x,this._radiusY=H.y-I.y}else{var je=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(je).x}this._updateBounds()}});function Lw(i,l,u){return new md(i,l,u)}var br=qr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){_(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,u=null,p=Qo,v,P,I=0,F=this._parts.length;I<F;I++)for(var H=this._parts[I],J=1,oe=H.length;J<oe;J++){v=H[J-1],P=H[J];var je=p(i,v,P,!0);je<l&&(l=je,u=p(i,v,P))}return u&&(u.distance=Math.sqrt(l)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lm(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=Y(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new pe,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return En(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],u=En(i),p=0,v=i.length;p<v;p++)u?(l[p]=Y(i[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(i[p]);return l},_project:function(){var i=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new D(i,i);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,u){var p=i[0]instanceof me,v=i.length,P,I;if(p){for(I=[],P=0;P<v;P++)I[P]=this._map.latLngToLayerPoint(i[P]),u.extend(I[P]);l.push(I)}else for(P=0;P<v;P++)this._projectLatlngs(i[P],l,u)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,u,p,v,P,I,F,H;for(u=0,v=0,P=this._rings.length;u<P;u++)for(H=this._rings[u],p=0,I=H.length;p<I-1;p++)F=Em(H[p],H[p+1],i,p,!0),F&&(l[v]=l[v]||[],l[v].push(F[0]),(F[1]!==H[p+1]||p===I-2)&&(l[v].push(F[1]),v++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,u=0,p=i.length;u<p;u++)i[u]=Sm(i[u],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var u,p,v,P,I,F,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(u=0,P=this._parts.length;u<P;u++)for(F=this._parts[u],p=0,I=F.length,v=I-1;p<I;v=p++)if(!(!l&&p===0)&&Cm(i,F[v],F[p])<=H)return!0;return!1}});function Ow(i,l){return new br(i,l)}br._flat=Tm;var Ns=br.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return km(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=br.prototype._convertLatLngs.call(this,i),u=l.length;return u>=2&&l[0]instanceof me&&l[0].equals(l[u-1])&&l.pop(),l},_setLatLngs:function(i){br.prototype._setLatLngs.call(this,i),En(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return En(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,u=new D(l,l);if(i=new te(i.min.subtract(u),i.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,P;p<v;p++)P=jm(this._rings[p],i,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,u,p,v,P,I,F,H,J;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(P=0,H=this._parts.length;P<H;P++)for(u=this._parts[P],I=0,J=u.length,F=J-1;I<J;F=I++)p=u[I],v=u[F],p.y>i.y!=v.y>i.y&&i.x<(v.x-p.x)*(i.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||br.prototype._containsPoint.call(this,i,!0)}});function Nw(i,l){return new Ns(i,l)}var jr=wr.extend({initialize:function(i,l){_(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=x(i)?i:i.features,u,p,v;if(l){for(u=0,p=l.length;u<p;u++)v=l[u],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var P=this.options;if(P.filter&&!P.filter(i))return this;var I=zl(i,P);return I?(I.feature=Fl(i),I.defaultOptions=I.options,this.resetStyle(I),P.onEachFeature&&P.onEachFeature(i,I),this.addLayer(I)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function zl(i,l){var u=i.type==="Feature"?i.geometry:i,p=u?u.coordinates:null,v=[],P=l&&l.pointToLayer,I=l&&l.coordsToLatLng||gd,F,H,J,oe;if(!p&&!u)return null;switch(u.type){case"Point":return F=I(p),Rm(P,i,F,l);case"MultiPoint":for(J=0,oe=p.length;J<oe;J++)F=I(p[J]),v.push(Rm(P,i,F,l));return new wr(v);case"LineString":case"MultiLineString":return H=Bl(p,u.type==="LineString"?0:1,I),new br(H,l);case"Polygon":case"MultiPolygon":return H=Bl(p,u.type==="Polygon"?1:2,I),new Ns(H,l);case"GeometryCollection":for(J=0,oe=u.geometries.length;J<oe;J++){var je=zl({geometry:u.geometries[J],type:"Feature",properties:i.properties},l);je&&v.push(je)}return new wr(v);case"FeatureCollection":for(J=0,oe=u.features.length;J<oe;J++){var Ne=zl(u.features[J],l);Ne&&v.push(Ne)}return new wr(v);default:throw new Error("Invalid GeoJSON object.")}}function Rm(i,l,u,p){return i?i(l,u):new Al(u,p&&p.markersInheritOptions&&p)}function gd(i){return new me(i[1],i[0],i[2])}function Bl(i,l,u){for(var p=[],v=0,P=i.length,I;v<P;v++)I=l?Bl(i[v],l-1,u):(u||gd)(i[v]),p.push(I);return p}function vd(i,l){return i=Y(i),i.alt!==void 0?[w(i.lng,l),w(i.lat,l),w(i.alt,l)]:[w(i.lng,l),w(i.lat,l)]}function $l(i,l,u,p){for(var v=[],P=0,I=i.length;P<I;P++)v.push(l?$l(i[P],En(i[P])?0:l-1,u,p):vd(i[P],p));return!l&&u&&v.length>0&&v.push(v[0].slice()),v}function Rs(i,l){return i.feature?s({},i.feature,{geometry:l}):Fl(l)}function Fl(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var yd={toGeoJSON:function(i){return Rs(this,{type:"Point",coordinates:vd(this.getLatLng(),i)})}};Al.include(yd),md.include(yd),Dl.include(yd),br.include({toGeoJSON:function(i){var l=!En(this._latlngs),u=$l(this._latlngs,l?1:0,!1,i);return Rs(this,{type:(l?"Multi":"")+"LineString",coordinates:u})}}),Ns.include({toGeoJSON:function(i){var l=!En(this._latlngs),u=l&&!En(this._latlngs[0]),p=$l(this._latlngs,u?2:l?1:0,!0,i);return l||(p=[p]),Rs(this,{type:(u?"Multi":"")+"Polygon",coordinates:p})}}),Ls.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(u){l.push(u.toGeoJSON(i).geometry.coordinates)}),Rs(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var u=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var P=v.toGeoJSON(i);if(u)p.push(P.geometry);else{var I=Fl(P);I.type==="FeatureCollection"?p.push.apply(p,I.features):p.push(I)}}}),u?Rs(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Im(i,l){return new jr(i,l)}var Rw=Im,Ul=Un.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,u){this._url=i,this._bounds=ue(l),_(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ot(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Es(this._image),this},bringToBack:function(){return this._map&&Ts(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ue(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:We("img");if(Le(l,"leaflet-image-layer"),this._zoomAnimated&&Le(l,"leaflet-zoom-animated"),this.options.className&&Le(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=c(this.fire,this,"load"),l.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Ai(this._image,u,l)},_reset:function(){var i=this._image,l=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=l.getSize();_t(i,l.min),i.style.width=u.x+"px",i.style.height=u.y+"px"},_updateOpacity:function(){Pn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Iw=function(i,l,u){return new Ul(i,l,u)},Mm=Ul.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:We("video");if(Le(l,"leaflet-image-layer"),this._zoomAnimated&&Le(l,"leaflet-zoom-animated"),this.options.className&&Le(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=c(this.fire,this,"load"),i){for(var u=l.getElementsByTagName("source"),p=[],v=0;v<u.length;v++)p.push(u[v].src);this._url=u.length>0?p:[l.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var I=We("source");I.src=this._url[P],l.appendChild(I)}}});function Mw(i,l,u){return new Mm(i,l,u)}var Am=Ul.extend({_initImage:function(){var i=this._image=this._url;Le(i,"leaflet-image-layer"),this._zoomAnimated&&Le(i,"leaflet-zoom-animated"),this.options.className&&Le(i,this.options.className),i.onselectstart=g,i.onmousemove=g}});function Aw(i,l,u){return new Am(i,l,u)}var lr=Un.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof me||x(i))?(this._latlng=Y(i),_(this,l)):(_(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Pn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Pn(this._container,1),this.bringToFront(),this.options.interactive&&(Le(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Pn(this._container,0),this._removeTimeout=setTimeout(c(ot,void 0,this._container),200)):ot(this._container),this.options.interactive&&(pt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Y(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Es(this._container),this},bringToBack:function(){return this._map&&Ts(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof wr){l=null;var u=this._source._layers;for(var p in u)if(u[p]._map){l=u[p];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=U(this.options.offset),u=this._getAnchor();this._zoomAnimated?_t(this._container,i.add(u)):l=l.add(i).add(u);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});ze.include({_initOverlay:function(i,l,u,p){var v=l;return v instanceof i||(v=new i(p).setContent(l)),u&&v.setLatLng(u),v}}),Un.include({_initOverlay:function(i,l,u,p){var v=u;return v instanceof i?(_(v,p),v._source=this):(v=l&&!p?l:new i(p,this),v.setContent(u)),v}});var Wl=lr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,lr.prototype.openOn.call(this,i)},onAdd:function(i){lr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qr||this._source.on("preclick",zi))},onRemove:function(i){lr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qr||this._source.off("preclick",zi))},getEvents:function(){var i=lr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=We("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=We("div",i+"-content-wrapper",l);if(this._contentNode=We("div",i+"-content",u),Yo(l),ad(this._contentNode),Pe(l,"contextmenu",zi),this._tipContainer=We("div",i+"-tip-container",l),this._tip=We("div",i+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=We("a",i+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Pe(p,"click",function(v){It(v),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var u=i.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),l.width=u+1+"px",l.whiteSpace="",l.height="";var p=i.offsetHeight,v=this.options.maxHeight,P="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",Le(i,P)):pt(i,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),u=this._getAnchor();_t(this._container,l.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(qo(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+l,p=this._containerWidth,v=new D(this._containerLeft,-u-this._containerBottom);v._add(Di(this._container));var P=i.layerPointToContainerPoint(v),I=U(this.options.autoPanPadding),F=U(this.options.autoPanPaddingTopLeft||I),H=U(this.options.autoPanPaddingBottomRight||I),J=i.getSize(),oe=0,je=0;P.x+p+H.x>J.x&&(oe=P.x+p-J.x+H.x),P.x-oe-F.x<0&&(oe=P.x-F.x),P.y+u+H.y>J.y&&(je=P.y+u-J.y+H.y),P.y-je-F.y<0&&(je=P.y-F.y),(oe||je)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([oe,je]))}},_getAnchor:function(){return U(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Dw=function(i,l){return new Wl(i,l)};ze.mergeOptions({closePopupOnClick:!0}),ze.include({openPopup:function(i,l,u){return this._initOverlay(Wl,i,l,u).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Un.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Wl,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof wr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Bi(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof qr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Hl=lr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){lr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){lr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=lr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=We("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,u,p=this._map,v=this._container,P=p.latLngToContainerPoint(p.getCenter()),I=p.layerPointToContainerPoint(i),F=this.options.direction,H=v.offsetWidth,J=v.offsetHeight,oe=U(this.options.offset),je=this._getAnchor();F==="top"?(l=H/2,u=J):F==="bottom"?(l=H/2,u=0):F==="center"?(l=H/2,u=J/2):F==="right"?(l=0,u=J/2):F==="left"?(l=H,u=J/2):I.x<P.x?(F="right",l=0,u=J/2):(F="left",l=H+(oe.x+je.x)*2,u=J/2),i=i.subtract(U(l,u,!0)).add(oe).add(je),pt(v,"leaflet-tooltip-right"),pt(v,"leaflet-tooltip-left"),pt(v,"leaflet-tooltip-top"),pt(v,"leaflet-tooltip-bottom"),Le(v,"leaflet-tooltip-"+F),_t(v,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Pn(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return U(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),zw=function(i,l){return new Hl(i,l)};ze.include({openTooltip:function(i,l,u){return this._initOverlay(Hl,i,l,u).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Un.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Hl,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[l](u),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof wr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(Pe(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Pe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,u,p;this._tooltip.options.sticky&&i.originalEvent&&(u=this._map.mouseEventToContainerPoint(i.originalEvent),p=this._map.containerPointToLayerPoint(u),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Dm=Os.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Ll(l),l.appendChild(u.html)):l.innerHTML=u.html!==!1?u.html:"",u.bgPos){var p=U(u.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Bw(i){return new Dm(i)}Os.Default=Xo;var ea=Un.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ge.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){_(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),ot(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Es(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ts(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof D?i:new D(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,u=-i(-1/0,1/0),p=0,v=l.length,P;p<v;p++)P=l[p].style.zIndex,l[p]!==this._container&&P&&(u=i(u,+P));isFinite(u)&&(this.options.zIndex=u+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ge.ielt9){Pn(this._container,this.options.opacity);var i=+new Date,l=!1,u=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var P=Math.min(1,(i-v.loaded)/200);Pn(v.el,P),P<1?l=!0:(v.active?u=!0:this._onOpaqueTile(v),v.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),l&&(q(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=We("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===i?(this._levels[u].el.style.zIndex=l-Math.abs(i-u),this._onUpdateLevel(u)):(ot(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var p=this._levels[i],v=this._map;return p||(p=this._levels[i]={},p.el=We("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),i).round(),p.zoom=i,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var i,l,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)ot(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,u,p){var v=Math.floor(i/2),P=Math.floor(l/2),I=u-1,F=new D(+v,+P);F.z=+I;var H=this._tileCoordsToKey(F),J=this._tiles[H];return J&&J.active?(J.retain=!0,!0):(J&&J.loaded&&(J.retain=!0),I>p?this._retainParent(v,P,I,p):!1)},_retainChildren:function(i,l,u,p){for(var v=2*i;v<2*i+2;v++)for(var P=2*l;P<2*l+2;P++){var I=new D(v,P);I.z=u+1;var F=this._tileCoordsToKey(I),H=this._tiles[F];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);u+1<p&&this._retainChildren(v,P,u+1,p)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,u,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var P=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||P)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(i),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var u in this._levels)this._setZoomTransform(this._levels[u],i,l)},_setZoomTransform:function(i,l,u){var p=this._map.getZoomScale(u,i.zoom),v=i.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,u)).round();ge.any3d?Ai(i.el,v,p):_t(i.el,v)},_resetGrid:function(){var i=this._map,l=i.options.crs,u=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],p).x/u.x),Math.ceil(i.project([0,l.wrapLng[1]],p).x/u.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],p).y/u.x),Math.ceil(i.project([l.wrapLat[1],0],p).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,u=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(u,this._tileZoom),v=l.project(i,this._tileZoom).floor(),P=l.getSize().divideBy(p*2);return new te(v.subtract(P),v.add(P))},_update:function(i){var l=this._map;if(l){var u=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(i),v=this._pxBoundsToTileRange(p),P=v.getCenter(),I=[],F=this.options.keepBuffer,H=new te(v.getBottomLeft().subtract([F,-F]),v.getTopRight().add([F,-F]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var J in this._tiles){var oe=this._tiles[J].coords;(oe.z!==this._tileZoom||!H.contains(new D(oe.x,oe.y)))&&(this._tiles[J].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(i,u);return}for(var je=v.min.y;je<=v.max.y;je++)for(var Ne=v.min.x;Ne<=v.max.x;Ne++){var Jt=new D(Ne,je);if(Jt.z=this._tileZoom,!!this._isValidTile(Jt)){var Lt=this._tiles[this._tileCoordsToKey(Jt)];Lt?Lt.current=!0:I.push(Jt)}}if(I.sort(function(on,Ms){return on.distanceTo(P)-Ms.distanceTo(P)}),I.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tn=document.createDocumentFragment();for(Ne=0;Ne<I.length;Ne++)this._addTile(I[Ne],Tn);this._level.el.appendChild(Tn)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var u=this._globalTileRange;if(!l.wrapLng&&(i.x<u.min.x||i.x>u.max.x)||!l.wrapLat&&(i.y<u.min.y||i.y>u.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(i);return ue(this.options.bounds).overlaps(p)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,u=this.getTileSize(),p=i.scaleBy(u),v=p.add(u),P=l.unproject(p,i.z),I=l.unproject(v,i.z);return[P,I]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),u=new pe(l[0],l[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),u=new D(+l[0],+l[1]);return u.z=+l[2],u},_removeTile:function(i){var l=this._tiles[i];l&&(ot(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Le(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=g,i.onmousemove=g,ge.ielt9&&this.options.opacity<1&&Pn(i,this.options.opacity)},_addTile:function(i,l){var u=this._getTilePos(i),p=this._tileCoordsToKey(i),v=this.createTile(this._wrapCoords(i),c(this._tileReady,this,i));this._initTile(v),this.createTile.length<2&&M(c(this._tileReady,this,i,null,v)),_t(v,u),this._tiles[p]={el:v,coords:i,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:i})},_tileReady:function(i,l,u){l&&this.fire("tileerror",{error:l,tile:u,coords:i});var p=this._tileCoordsToKey(i);u=this._tiles[p],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Pn(u.el,0),q(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),l||(Le(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ge.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new D(this._wrapX?m(i.x,this._wrapX):i.x,this._wrapY?m(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new te(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function $w(i){return new ea(i)}var Is=ea.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=_(this,l),l.detectRetina&&ge.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var u=document.createElement("img");return Pe(u,"load",c(this._tileOnLoad,this,l,u)),Pe(u,"error",c(this._tileOnError,this,l,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(i),u},getTileUrl:function(i){var l={r:ge.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=u),l["-y"]=u}return j(this._url,s(l,this.options))},_tileOnLoad:function(i,l){ge.ielt9?setTimeout(c(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,u){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),i(u,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,u=this.options.zoomReverse,p=this.options.zoomOffset;return u&&(i=l-i),i+p},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=g,l.onerror=g,!l.complete)){l.src=A;var u=this._tiles[i].coords;ot(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:u})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",A),ea.prototype._removeTile.call(this,i)},_tileReady:function(i,l,u){if(!(!this._map||u&&u.getAttribute("src")===A))return ea.prototype._tileReady.call(this,i,l,u)}});function zm(i,l){return new Is(i,l)}var Bm=Is.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var u=s({},this.defaultWmsParams);for(var p in l)p in this.options||(u[p]=l[p]);l=_(this,l);var v=l.detectRetina&&ge.retina?2:1,P=this.getTileSize();u.width=P.x*v,u.height=P.y*v,this.wmsParams=u},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Is.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),u=this._crs,p=se(u.project(l[0]),u.project(l[1])),v=p.min,P=p.max,I=(this._wmsVersion>=1.3&&this._crs===Om?[v.y,v.x,P.y,P.x]:[v.x,v.y,P.x,P.y]).join(","),F=Is.prototype.getTileUrl.call(this,i);return F+k(this.wmsParams,F,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+I},setParams:function(i,l){return s(this.wmsParams,i),l||this.redraw(),this}});function Fw(i,l){return new Bm(i,l)}Is.WMS=Bm,zm.wms=Fw;var kr=Un.extend({options:{padding:.1},initialize:function(i){_(this,i),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var u=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),P=p.multiplyBy(-u).add(v).subtract(this._map._getNewPixelOrigin(i,l));ge.any3d?Ai(this._container,P,u):_t(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),u=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new te(u,u.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$m=kr.extend({options:{tolerance:0},getEvents:function(){var i=kr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){kr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Pe(i,"mousemove",this._onMouseMove,this),Pe(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,ot(this._container),Qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kr.prototype._update.call(this);var i=this._bounds,l=this._container,u=i.getSize(),p=ge.retina?2:1;_t(l,i.min),l.width=p*u.x,l.height=p*u.y,l.style.width=u.x+"px",l.style.height=u.y+"px",ge.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){kr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[h(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,u=l.next,p=l.prev;u?u.prev=p:this._drawLast=p,p?p.next=u:this._drawFirst=u,delete i._order,delete this._layers[h(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),u=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;u.push(p)}i.options._dashArray=u}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var u=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)i=p.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var u,p,v,P,I=i._parts,F=I.length,H=this._ctx;if(F){for(H.beginPath(),u=0;u<F;u++){for(p=0,v=I[u].length;p<v;p++)P=I[u][p],H[p?"lineTo":"moveTo"](P.x,P.y);l&&H.closePath()}this._fillStroke(H,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,u=this._ctx,p=Math.max(Math.round(i._radius),1),v=(Math.max(Math.round(i._radiusY),1)||p)/p;v!==1&&(u.save(),u.scale(1,v)),u.beginPath(),u.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&u.restore(),this._fillStroke(u,i)}},_fillStroke:function(i,l){var u=l.options;u.fill&&(i.globalAlpha=u.fillOpacity,i.fillStyle=u.fillColor||u.color,i.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=u.opacity,i.lineWidth=u.weight,i.strokeStyle=u.color,i.lineCap=u.lineCap,i.lineJoin=u.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),u,p,v=this._drawFirst;v;v=v.next)u=v.layer,u.options.interactive&&u._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(u))&&(p=u);this._fireEvent(p?[p]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(pt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var u,p,v=this._drawFirst;v;v=v.next)u=v.layer,u.options.interactive&&u._containsPoint(l)&&(p=u);p!==this._hoveredLayer&&(this._handleMouseOut(i),p&&(Le(this._container,"leaflet-interactive"),this._fireEvent([p],i,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,u){this._map._fireDOMEvent(l,u||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var u=l.next,p=l.prev;if(u)u.prev=p;else return;p?p.next=u:u&&(this._drawFirst=u),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var u=l.next,p=l.prev;if(p)p.next=u;else return;u?u.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function Fm(i){return ge.canvas?new $m(i):null}var ta=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Uw={_initContainer:function(){this._container=We("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(kr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=ta("shape");Le(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=ta("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[h(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;ot(l),i.removeInteractiveTarget(l),delete this._layers[h(i)]},_updateStyle:function(i){var l=i._stroke,u=i._fill,p=i.options,v=i._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=i._stroke=ta("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=x(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),i._stroke=null),p.fill?(u||(u=i._fill=ta("fill")),v.appendChild(u),u.color=p.fillColor||p.color,u.opacity=p.fillOpacity):u&&(v.removeChild(u),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),u=Math.round(i._radius),p=Math.round(i._radiusY||u);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+u+","+p+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){Es(i._container)},_bringToBack:function(i){Ts(i._container)}},Vl=ge.vml?ta:Ke,na=kr.extend({_initContainer:function(){this._container=Vl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ot(this._container),Qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,u.setAttribute("width",l.x),u.setAttribute("height",l.y)),_t(u,i.min),u.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=Vl("path");i.options.className&&Le(l,i.options.className),i.options.interactive&&Le(l,"leaflet-interactive"),this._updateStyle(i),this._layers[h(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){ot(i._path),i.removeInteractiveTarget(i._path),delete this._layers[h(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,u=i.options;l&&(u.stroke?(l.setAttribute("stroke",u.color),l.setAttribute("stroke-opacity",u.opacity),l.setAttribute("stroke-width",u.weight),l.setAttribute("stroke-linecap",u.lineCap),l.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?l.setAttribute("stroke-dasharray",u.dashArray):l.removeAttribute("stroke-dasharray"),u.dashOffset?l.setAttribute("stroke-dashoffset",u.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),u.fill?(l.setAttribute("fill",u.fillColor||u.color),l.setAttribute("fill-opacity",u.fillOpacity),l.setAttribute("fill-rule",u.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Ft(i._parts,l))},_updateCircle:function(i){var l=i._point,u=Math.max(Math.round(i._radius),1),p=Math.max(Math.round(i._radiusY),1)||u,v="a"+u+","+p+" 0 1,0 ",P=i._empty()?"M0 0":"M"+(l.x-u)+","+l.y+v+u*2+",0 "+v+-u*2+",0 ";this._setPath(i,P)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){Es(i._path)},_bringToBack:function(i){Ts(i._path)}});ge.vml&&na.include(Uw);function Um(i){return ge.svg||ge.vml?new na(i):null}ze.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&Fm(i)||Um(i)}});var Wm=Ns.extend({initialize:function(i,l){Ns.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ue(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Ww(i,l){return new Wm(i,l)}na.create=Vl,na.pointsToPath=Ft,jr.geometryToLayer=zl,jr.coordsToLatLng=gd,jr.coordsToLatLngs=Bl,jr.latLngToCoords=vd,jr.latLngsToCoords=$l,jr.getFeature=Rs,jr.asFeature=Fl,ze.mergeOptions({boxZoom:!0});var Hm=ar.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ot(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Go(),Xu(),this._startPoint=this._map.mouseEventToContainerPoint(i),Pe(document,{contextmenu:Bi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=We("div","leaflet-zoom-box",this._container),Le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new te(this._point,this._startPoint),u=l.getSize();_t(this._box,l.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(ot(this._box),pt(this._container,"leaflet-crosshair")),Zo(),ed(),Qe(document,{contextmenu:Bi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var l=new pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ze.addInitHook("addHandler","boxZoom",Hm),ze.mergeOptions({doubleClickZoom:!0});var Vm=ar.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,u=l.getZoom(),p=l.options.zoomDelta,v=i.originalEvent.shiftKey?u-p:u+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(i.containerPoint,v)}});ze.addInitHook("addHandler","doubleClickZoom",Vm),ze.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var qm=ar.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Vr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pt(this._map._container,"leaflet-grab"),pt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ue(this._map.options.maxBounds);this._offsetLimit=se(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),u=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+u)%i+l-u,P=(p+l+u)%i-l-u,I=Math.abs(v+u)<Math.abs(P+u)?v:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=I},_onDragEnd:function(i){var l=this._map,u=l.options,p=!u.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,I=u.easeLinearity,F=v.multiplyBy(I/P),H=F.distanceTo([0,0]),J=Math.min(u.inertiaMaxSpeed,H),oe=F.multiplyBy(J/H),je=J/(u.inertiaDeceleration*I),Ne=oe.multiplyBy(-je/2).round();!Ne.x&&!Ne.y?l.fire("moveend"):(Ne=l._limitOffset(Ne,l.options.maxBounds),M(function(){l.panBy(Ne,{duration:je,easeLinearity:I,noMoveStart:!0,animate:!0})}))}}});ze.addInitHook("addHandler","dragging",qm),ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Gm=ar.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Pe(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,u=i.scrollTop||l.scrollTop,p=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},u=this.keyCodes,p,v;for(p=0,v=u.left.length;p<v;p++)l[u.left[p]]=[-1*i,0];for(p=0,v=u.right.length;p<v;p++)l[u.right[p]]=[i,0];for(p=0,v=u.down.length;p<v;p++)l[u.down[p]]=[0,i];for(p=0,v=u.up.length;p<v;p++)l[u.up[p]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},u=this.keyCodes,p,v;for(p=0,v=u.zoomIn.length;p<v;p++)l[u.zoomIn[p]]=i;for(p=0,v=u.zoomOut.length;p<v;p++)l[u.zoomOut[p]]=-i},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,u=this._map,p;if(l in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(p=this._panKeys[l],i.shiftKey&&(p=U(p).multiplyBy(3)),u.options.maxBounds&&(p=u._limitOffset(U(p),u.options.maxBounds)),u.options.worldCopyJump){var v=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(p)));u.panTo(v)}else u.panBy(p)}else if(l in this._zoomKeys)u.setZoom(u.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;Bi(i)}}});ze.addInitHook("addHandler","keyboard",Gm),ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Zm=ar.extend({addHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=ym(i),u=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var p=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),p),Bi(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),u=this._map.options.zoomSnap||0;i._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,P=u?Math.ceil(v/u)*u:v,I=i._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,I&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+I):i.setZoomAround(this._lastMousePos,l+I))}});ze.addInitHook("addHandler","scrollWheelZoom",Zm);var Hw=600;ze.mergeOptions({tapHold:ge.touchNative&&ge.safari&&ge.mobile,tapTolerance:15});var Km=ar.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new D(l.clientX,l.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Pe(document,"touchend",It),Pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Hw),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Qe(document,"touchend",It),Qe(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Qe(document,"touchend touchcancel contextmenu",this._cancel,this),Qe(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new D(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var u=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});u._simulated=!0,l.target.dispatchEvent(u)}});ze.addInitHook("addHandler","tapHold",Km),ze.mergeOptions({touchZoom:ge.touch,bounceAtZoomLimits:!0});var Ym=ar.extend({addHooks:function(){Le(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),Qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var u=l.mouseEventToContainerPoint(i.touches[0]),p=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(u.add(p)._divideBy(2))),this._startDist=u.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),It(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,u=l.mouseEventToContainerPoint(i.touches[0]),p=l.mouseEventToContainerPoint(i.touches[1]),v=u.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var P=u._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var I=c(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(I,this,!0),It(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),Qe(document,"touchmove",this._onTouchMove,this),Qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ze.addInitHook("addHandler","touchZoom",Ym),ze.BoxZoom=Hm,ze.DoubleClickZoom=Vm,ze.Drag=qm,ze.Keyboard=Gm,ze.ScrollWheelZoom=Zm,ze.TapHold=Km,ze.TouchZoom=Ym,n.Bounds=te,n.Browser=ge,n.CRS=he,n.Canvas=$m,n.Circle=md,n.CircleMarker=Dl,n.Class=Z,n.Control=Fn,n.DivIcon=Dm,n.DivOverlay=lr,n.DomEvent=lw,n.DomUtil=ow,n.Draggable=Vr,n.Evented=K,n.FeatureGroup=wr,n.GeoJSON=jr,n.GridLayer=ea,n.Handler=ar,n.Icon=Os,n.ImageOverlay=Ul,n.LatLng=me,n.LatLngBounds=pe,n.Layer=Un,n.LayerGroup=Ls,n.LineUtil=ww,n.Map=ze,n.Marker=Al,n.Mixin=mw,n.Path=qr,n.Point=D,n.PolyUtil=gw,n.Polygon=Ns,n.Polyline=br,n.Popup=Wl,n.PosAnimation=_m,n.Projection=bw,n.Rectangle=Wm,n.Renderer=kr,n.SVG=na,n.SVGOverlay=Am,n.TileLayer=Is,n.Tooltip=Hl,n.Transformation=xe,n.Util=$,n.VideoOverlay=Mm,n.bind=c,n.bounds=se,n.canvas=Fm,n.circle=Lw,n.circleMarker=Tw,n.control=Jo,n.divIcon=Bw,n.extend=s,n.featureGroup=Cw,n.geoJSON=Im,n.geoJson=Rw,n.gridLayer=$w,n.icon=Pw,n.imageOverlay=Iw,n.latLng=Y,n.latLngBounds=ue,n.layerGroup=Sw,n.map=cw,n.marker=Ew,n.point=U,n.polygon=Nw,n.polyline=Ow,n.popup=Dw,n.rectangle=Ww,n.setOptions=_,n.stamp=h,n.svg=Um,n.svgOverlay=Aw,n.tileLayer=zm,n.tooltip=zw,n.transformation=Ce,n.version=r,n.videoOverlay=Mw;var Vw=window.L;n.noConflict=function(){return window.L=Vw,this},window.L=n})})(Ff,Ff.exports);var Cl=Ff.exports;function Vu(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function qu(t,e){return e==null?function(r,s){const a=S.useRef();return a.current||(a.current=t(r,s)),a}:function(r,s){const a=S.useRef();a.current||(a.current=t(r,s));const c=S.useRef(r),{instance:d}=a.current;return S.useEffect(function(){c.current!==r&&(e(d,r,c.current),c.current=r)},[d,r,s]),a}}function $x(t,e){S.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Fx(t){return function(n){const r=Wu(),s=t(Hu(n,r),r);return Mx(r.map,n.attribution),im(s.current,n.eventHandlers),$x(s.current,r),s}}function h6(t,e){const n=S.useRef();S.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function f6(t){return function(n){const r=Wu(),s=t(Hu(n,r),r);return im(s.current,n.eventHandlers),$x(s.current,r),h6(s.current,n),s}}function p6(t,e){const n=qu(t,e),r=Fx(n);return Bx(r)}function m6(t,e){const n=qu(t),r=d6(n,e);return c6(r)}function g6(t,e){const n=qu(t,e),r=f6(n);return Bx(r)}function v6(t,e){const n=qu(t,e),r=Fx(n);return u6(r)}function y6(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Ux(){return Wu().map}function T0(t){const e=Ux();return S.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const Wx=g6(function({center:e,children:n,...r},s){const a=new Cl.CircleMarker(e,r);return Vu(a,Ax(s,{overlayContainer:a}))},o6);function Uf(){return Uf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uf.apply(this,arguments)}function _6({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:a,placeholder:c,style:d,whenReady:h,zoom:f,...m},g){const[w]=S.useState({className:s,id:a,style:d}),[C,b]=S.useState(null);S.useImperativeHandle(g,()=>(C==null?void 0:C.map)??null,[C]);const _=S.useCallback(y=>{if(y!==null&&C===null){const j=new Cl.Map(y,m);n!=null&&f!=null?j.setView(n,f):t!=null&&j.fitBounds(t,e),h!=null&&j.whenReady(h),b(l6(j))}},[]);S.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const k=C?pi.createElement(zx,{value:C},r):c??null;return pi.createElement("div",Uf({},w,{ref:_}),k)}const x6=S.forwardRef(_6),w6=p6(function({position:e,...n},r){const s=new Cl.Marker(e,n);return Vu(s,Ax(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),b6=m6(function(e,n){const r=new Cl.Popup(e,n.overlayContainer);return Vu(r,n)},function(e,n,{position:r},s){S.useEffect(function(){const{instance:c}=e;function d(f){f.popup===c&&(c.update(),s(!0))}function h(f){f.popup===c&&s(!1)}return n.map.on({popupopen:d,popupclose:h}),n.overlayContainer==null?(r!=null&&c.setLatLng(r),c.openOn(n.map)):n.overlayContainer.bindPopup(c),function(){var m;n.map.off({popupopen:d,popupclose:h}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(c)}},[e,n,s,r])}),j6=v6(function({url:e,...n},r){const s=new Cl.TileLayer(e,Hu(n,r));return Vu(s,r)},function(e,n,r){y6(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)}),k6=()=>{const t=Ux();return S.useEffect(()=>{setTimeout(()=>{t.invalidateSize()},200)},[t]),null};function S6(t,e){const n=Math.round(e*1e6),r=Math.round(t*1e6);return{x:n,y:r}}const L0=`${Bn.API_BASE_URL}/vor-proxy`,gc={id:"ibwmnqg8g2kj8iwg",ver:"1.59",lang:"deu",auth:{type:"AID",aid:"wf7mcf9bv3nv8g5f"},client:{id:"VAO",type:"WEB",name:"webapp",l:"vs_anachb",v:10010,pos:{x:14289513,y:46624058,acc:20}},formatted:!1,ext:"VAO.22",svcReqL:[]};function C6({onAddressSelect:t}){const[e,n]=S.useState(null),[r,s]=S.useState(""),[a,c]=S.useState(null);if(S.useRef(null),T0({click:f=>{n(f.latlng),s("Uitavanje adrese..."),c(null),h(!0);const{x:m,y:g}=S6(f.latlng.lat,f.latlng.lng);(async()=>{const w={...gc,client:{...gc.client,pos:{x:m,y:g,acc:20}},svcReqL:[{meth:"LocGeoPos",req:{ring:{cCrd:{x:m,y:g},minDist:0,maxDist:30},maxLoc:1,locFltrL:[{type:"PROD",mode:"INC",value:4087}],getPOIs:!0},id:"1|5|"}]};try{const b=await(await fetch(L0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).json();if(b&&b.svcResL&&b.svcResL.length>0&&b.svcResL[0].res&&b.svcResL[0].res.locL&&b.svcResL[0].res.locL.length>0){const j=b.svcResL[0].res.locL[0];let x=j.nameFormatted&&j.nameFormatted.text||j.name||j.txt||"";/^-?\d+\.\d+, ?-?\d+\.\d+$/.test(x)&&(x="Nema adrese za ovu lokaciju"),s(x||"Adresa pronaena"),c({geoData:b,x:m,y:g});let E=x,A="";if(x&&x.includes(",")){const T=x.split(",");E=T[0].trim(),A=T.slice(1).join(",").trim()}t&&t({address:E,city:A,lat:f.latlng.lat,lon:f.latlng.lng});return}const _={...gc,client:{...gc.client,pos:{x:m,y:g,acc:20}},svcReqL:[{meth:"LocMatch",req:{input:{field:"S",loc:{type:"C",crd:{x:m,y:g}},maxLoc:1,locFltrL:[{type:"META",value:"in_austria_test"}]}},id:"1|24|"}]},y=await(await fetch(L0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).json();if(c({matchData:y,x:m,y:g}),y&&y.svcResL&&y.svcResL.length>0&&y.svcResL[0].res&&y.svcResL[0].res.match&&y.svcResL[0].res.match.locL&&y.svcResL[0].res.match.locL.length>0){const j=y.svcResL[0].res.match.locL[0];let x=j.nameFormatted&&j.nameFormatted.text||j.name||j.txt||"";/^-?\d+\.\d+, ?-?\d+\.\d+$/.test(x)&&(x="Nema adrese za ovu lokaciju"),s(x||"Adresa pronaena");let E=x,A="";if(x&&x.includes(",")){const T=x.split(",");E=T[0].trim(),A=T.slice(1).join(",").trim()}t&&t({address:E,city:A,lat:f.latlng.lat,lon:f.latlng.lng});return}s("Adresa nije pronaena"),t&&t({address:"",city:"",lat:f.latlng.lat,lon:f.latlng.lng})}catch(C){s("Greka pri dohvaanju adrese: "+((C==null?void 0:C.message)||JSON.stringify(C))),c(C),t&&t({address:"",city:"",lat:f.latlng.lat,lon:f.latlng.lng})}})()},move:()=>{n(null),s(""),h(!1)}}),r&&r.includes(",")){const f=r.split(",");f[0].trim(),f.slice(1).join(",").trim()}e==null||e.lat,e==null||e.lng;const[d,h]=S.useState(!0);return T0({}),e?o.jsx(Wx,{center:e,radius:7,pathOptions:{color:"#0ea5e9",fillColor:"#0ea5e9",fillOpacity:.92,weight:1.5}}):null}const P6="_mapContainer_5ziih_6",E6="_leafletContainer_5ziih_14",T6="_searchOverlay_5ziih_28",L6="_searchForm_5ziih_48",O6="_searchInput_5ziih_52",N6="_suggestionsBox_5ziih_70",R6="_noResults_5ziih_83",I6="_suggestionItem_5ziih_89",M6="_suggestionActive_5ziih_110",A6="_suggestionMain_5ziih_116",D6="_suggestionMeta_5ziih_122",z6="_suggestionType_5ziih_130",B6="_suggestionDistance_5ziih_134",$6="_popupContent_5ziih_140",F6="_popupCloseBtn_5ziih_154",U6="_popupAddress_5ziih_173",W6="_popupNavBtn_5ziih_179",At={mapContainer:P6,leafletContainer:E6,searchOverlay:T6,searchForm:L6,searchInput:O6,suggestionsBox:N6,noResults:R6,suggestionItem:I6,suggestionActive:M6,suggestionMain:A6,suggestionMeta:D6,suggestionType:z6,suggestionDistance:B6,popupContent:$6,popupCloseBtn:F6,popupAddress:U6,popupNavBtn:W6};function H6(t,e=300){const[n,r]=S.useState(t);return S.useEffect(()=>{const s=setTimeout(()=>r(t),e);return()=>clearTimeout(s)},[t,e]),n}function V6({address:t,lat:e,lon:n,onClose:r}){let s=t,a="";if(t&&t.includes(",")){const d=t.split(",");s=d[0].trim(),a=d.slice(1).join(",").trim()}const c=e&&n?`https://www.google.com/maps/search/?api=1&query=${e},${n}`:"#";return o.jsxs("div",{className:At.popupContent,children:[o.jsx("button",{onClick:r,className:At.popupCloseBtn,"aria-label":"Zatvori popup",title:"Zatvori",children:""}),o.jsxs("div",{className:At.popupAddress,children:[s,a&&o.jsxs(o.Fragment,{children:[o.jsx("br",{}),a]})]}),o.jsx("button",{onClick:()=>window.open(c,"_blank"),className:At.popupNavBtn,children:"Navigiraj ovdje"})]})}function q6({position:t}){return!t||!Array.isArray(t)?null:o.jsx(Wx,{center:t,radius:9,pathOptions:{color:"#0ea5e9",fillColor:"#0ea5e9",fillOpacity:.95,weight:3}})}function G6({marker:t,onAddressSelect:e}){var r,s,a;if(!t||!t.lat||!t.lon)return null;const n=[t.lat,t.lon];return o.jsx(w6,{position:n,children:o.jsx(b6,{autoPan:!0,autoClose:!1,closeOnClick:!1,children:o.jsx(V6,{address:((s=(r=t.data)==null?void 0:r.nameFormatted)==null?void 0:s.text)||((a=t.data)==null?void 0:a.name)||t.label||"",lat:t.lat,lon:t.lon,onClose:()=>{e&&e(null)}})})})}function O0({onAddressSelect:t,mapRef:e,selectedMarker:n,userLocation:r}){const[s,a]=S.useState(!1),[c,d]=S.useState(""),[h,f]=S.useState([]),[m,g]=S.useState(!1),w=H6(c,350),C=S.useRef(),b=S.useRef(),_=S.useRef(null),[k,y]=S.useState(-1),j=e||C,x=S.useRef(null);S.useEffect(()=>{let T=!0;if(_.current){try{_.current.abort()}catch{}_.current=null}if(!w||w.trim()==="")return f([]),g(!1),y(-1),()=>{T=!1};g(!0),y(-1);const B=new AbortController;return _.current=B,(async()=>{try{const O=w.trim();if(x.current&&typeof x.current=="function"){const R=await x.current(O,{signal:B.signal});if(!T)return;f(R||[])}else{const R=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(O)}&format=json&limit=6`,M=await(await fetch(R,{signal:B.signal})).json();if(!T)return;const q=M.map($=>({name:$.display_name,lat:parseFloat($.lat),lon:parseFloat($.lon),nameFormatted:{text:$.display_name}}));f(q)}}catch(O){O.name==="AbortError"||T&&f([])}finally{T&&g(!1)}})(),()=>{T=!1;try{B.abort()}catch{}_.current=null}},[w]);const E=S.useCallback(T=>{y(B=>{const O=h.length;if(O===0)return-1;let R=B+T;return R<0&&(R=O-1),R>=O&&(R=0),R})},[h.length]),A=T=>{s&&(T.key==="ArrowDown"?(T.preventDefault(),E(1)):T.key==="ArrowUp"?(T.preventDefault(),E(-1)):T.key==="Escape"?a(!1):T.key==="Enter"&&k>=0&&h[k]&&(T.preventDefault(),handleSuggestionClick(h[k])))};return o.jsxs("div",{className:At.mapContainer,children:[s&&o.jsxs("div",{className:At.searchOverlay,children:[o.jsx("form",{onSubmit:handleSearchSubmit,className:At.searchForm,children:o.jsx("input",{ref:b,type:"text",maxLength:20,value:c,onChange:T=>d(T.target.value),onKeyDown:A,placeholder:"Unesi adresu...",className:At.searchInput,autoComplete:"off"})}),o.jsx("div",{className:At.suggestionsBox,role:"list","aria-label":"Rezultati pretrage",children:m?o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:12},children:o.jsx($f,{})}):h.length===0?o.jsx("div",{className:At.noResults,children:"Nema rezultata"}):h.map((T,B)=>{var R,N,M;let O=null;try{if(r&&T.lat&&T.lon){const q=D=>D*Math.PI/180,Z=q(T.lat-r[0]),W=q(T.lon-r[1]),G=Math.sin(Z/2)*Math.sin(Z/2)+Math.cos(q(r[0]))*Math.cos(q(T.lat))*Math.sin(W/2)*Math.sin(W/2);O=6371*(2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G)))}}catch{O=null}return o.jsxs("div",{role:"listitem",onClick:()=>handleSuggestionClick(T),className:`${At.suggestionItem} ${B===k?At.suggestionActive:""}`,tabIndex:0,onKeyDown:q=>{q.key==="Enter"&&handleSuggestionClick(T)},children:[o.jsx("span",{className:At.suggestionMain,children:((R=T.nameFormatted)==null?void 0:R.text)||T.name||"Adresa"}),o.jsxs("div",{className:At.suggestionMeta,children:[((N=T.nameFormatted)==null?void 0:N.text)&&((M=T.nameFormatted)==null?void 0:M.text)!==T.name&&o.jsx("span",{className:At.suggestionType,children:T.name}),O!==null&&o.jsxs("span",{className:At.suggestionDistance,children:[O.toFixed(1)," km"]})]})]},B)})})]}),o.jsxs(x6,{ref:j,whenCreated:T=>{try{e&&e.current!==T&&(e.current=T),C&&C.current!==T&&(C.current=T)}catch{}},center:r&&Array.isArray(r)?r:[48.2082,16.3738],zoom:r?17:13,className:At.leafletContainer,attributionControl:!1,zoomControl:!1,children:[o.jsx(j6,{url:"https://mapsneu.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png",attribution:' <a href="https://basemap.at">basemap.at</a>'}),o.jsx(q6,{position:r}),n&&n.lat&&n.lon&&o.jsx(G6,{marker:n,onAddressSelect:t}),o.jsx(C6,{onAddressSelect:t}),o.jsx(k6,{})]})]})}function Hx(){const[t,e]=S.useState(null),[n,r]=S.useState(!0),[s,a]=S.useState(null),c=S.useCallback(()=>{try{const _=localStorage.getItem("bde_current_user");if(_){const k=JSON.parse(_),y=localStorage.getItem("bde_login_time"),j=Date.now();if(y&&j-parseInt(y)<24*60*60*1e3)return k;localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}}catch(_){console.error("Error loading user from storage:",_),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}return null},[]),d=S.useCallback(_=>{try{localStorage.setItem("bde_current_user",JSON.stringify(_)),localStorage.setItem("bde_login_time",Date.now().toString())}catch(k){console.error("Error saving user to storage:",k)}},[]),h=S.useCallback(async(_,k)=>{r(!0),a(null);try{if(_==="19102420"&&k==="19102420"){const{data:E,error:A}=await ye.from("app_users").select("*").eq("tura","8610").eq("active",!0).single();if(A)throw new Error("Eldin (8610) nije pronaen u bazi");const T={id:E.id,username:E.tura,name:E.ime,role:"admin",loginTime:Date.now(),isAdminLogin:!0,device_id:E.device_id};return e(T),d(T),await ho.syncUserToDriver(E.tura),T}const{data:y,error:j}=await ye.from("app_users").select("*").eq("tura",_).eq("active",!0).single();if(j)throw new Error("Korisnik nije pronaen ili nije aktivan");if(y.password_hash!==k)throw new Error("Neispravna lozinka");const x={id:y.id,username:y.tura,name:y.ime,role:y.role,loginTime:Date.now(),device_id:y.device_id,last_login:y.last_login};return await ye.from("app_users").update({last_login:new Date}).eq("id",y.id),e(x),d(x),await ho.syncUserToDriver(y.tura),x}catch(y){throw a(y.message),y}finally{r(!1)}},[d]),f=S.useCallback(async _=>{r(!0),a(null);try{const{data:k,error:y}=await ye.from("app_users").select("*").eq("tura",_.toUpperCase()).eq("active",!0).single();if(y)throw new Error(`Voza sa turom ${_} nije pronaen ili nije aktivan`);const j={id:k.id,username:k.tura,name:k.ime,role:k.role||"driver",loginTime:Date.now(),device_id:k.device_id,target_per_day:0};return await ye.from("app_users").update({last_login:new Date}).eq("id",k.id),e(j),d(j),await ho.syncUserToDriver(k.tura),j}catch(k){throw a(k.message),k}finally{r(!1)}},[d]),m=S.useCallback(()=>{e(null),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time"),localStorage.removeItem("bde_driver_session"),localStorage.removeItem("bde_driver_login_time")},[]),g=S.useCallback(()=>t!==null,[t]),w=S.useCallback(()=>t&&t.role==="admin",[t]),C=S.useCallback(()=>t&&(t.role==="driver"||t.role==="user"),[t]),b=S.useCallback(async()=>{if(t!=null&&t.username)try{const{data:_,error:k}=await ye.from("app_users").select("*").eq("tura",t.username).eq("active",!0).single();if(k||!_){m();return}const y={...t,name:_.ime,role:_.role,device_id:_.device_id,last_login:_.last_login};e(y),d(y)}catch(_){console.error("Error refreshing user:",_)}},[t,m,d]);return S.useEffect(()=>{const _=c();e(_),r(!1)},[c]),{currentUser:t,loading:n,error:s,authenticate:h,loginDriver:f,logout:m,refreshUser:b,isAuthenticated:g,isAdmin:w,isDriver:C,getCurrentUser:()=>t}}const Z6=({isOpen:t,onClose:e,onLoginSuccess:n})=>{const[r,s]=S.useState({username:"",password:""}),[a,c]=S.useState(""),[d,h]=S.useState(!1),{authenticate:f}=Hx(),m=C=>{const{name:b,value:_}=C.target;s(k=>({...k,[b]:_})),c("")},g=async C=>{C.preventDefault(),h(!0),c("");try{const b=await f(r.username,r.password);b?(s({username:"",password:""}),n(b),e()):c("Neispravno korisniko ime ili lozinka")}catch(b){c("Greka prilikom prijave: "+b.message)}finally{h(!1)}},w=()=>{s({username:"",password:""}),c(""),e()};return t?o.jsx("div",{className:"login-modal-overlay",onClick:w,children:o.jsxs("div",{className:"login-modal",onClick:C=>C.stopPropagation(),children:[o.jsxs("div",{className:"login-header",children:[o.jsx("img",{src:"/bde-evidencija/assets/logo.png",alt:"B&D Logo",className:"login-logo"}),o.jsx("h2",{children:"Admin Pristup"}),o.jsx("p",{children:"Unesite vae podatke za pristup admin panelu"})]}),o.jsxs("form",{onSubmit:g,className:"login-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"username",children:"Korisniko ime"}),o.jsx("input",{type:"text",id:"username",name:"username",value:r.username,onChange:m,placeholder:"Unesite korisniko ime",required:!0,autoComplete:"username"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Lozinka"}),o.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:m,placeholder:"Unesite lozinku",required:!0,autoComplete:"current-password"})]}),a&&o.jsxs("div",{className:"error-message",children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:o.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8S12.42 0 8 0zm4.95 6L10 8.95 12.95 12 12 12.95 9.05 10 6 12.95 5.05 12 8 9.05 5.05 6 6 5.05 9.05 8 12 5.05 12.95 6z"})}),a]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",onClick:w,className:"btn-cancel",children:"Odustani"}),o.jsx("button",{type:"submit",disabled:d||!r.username||!r.password,className:"btn-login",children:d?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner"}),"Prijavljujem..."]}):"Prijavi se"})]})]})]})}):null};function K6({isOpen:t,onClose:e,onLogin:n}){const[r,s]=S.useState(""),[a,c]=S.useState(""),d=h=>{h.preventDefault(),n(r,a),s(""),c("")};return t?o.jsx("div",{className:"admin-modal-overlay",children:o.jsxs("div",{className:"admin-modal",children:[o.jsxs("div",{className:"admin-modal-header",children:[o.jsx("h3",{children:"Admin Pristup"}),o.jsx("button",{className:"admin-modal-close",onClick:e,children:""})]}),o.jsxs("form",{onSubmit:d,className:"admin-modal-form",children:[o.jsxs("div",{className:"admin-input-group",children:[o.jsx("label",{htmlFor:"username",children:"Korisniko ime:"}),o.jsx("input",{id:"username",type:"text",value:r,onChange:h=>s(h.target.value),required:!0})]}),o.jsxs("div",{className:"admin-input-group",children:[o.jsx("label",{htmlFor:"password",children:"Lozinka:"}),o.jsx("input",{id:"password",type:"password",value:a,onChange:h=>c(h.target.value),required:!0})]}),o.jsxs("div",{className:"admin-modal-buttons",children:[o.jsx("button",{type:"button",onClick:e,className:"admin-btn-cancel",children:"Otkai"}),o.jsx("button",{type:"submit",className:"admin-btn-login",children:"Prijavi se"})]})]})]})}):null}const Y6="_homeScreenModern_fvp5h_4",J6="_mainGrid_fvp5h_35",Q6="_sidebarColumn_fvp5h_51",X6="_mapColumn_fvp5h_65",eI="_mapContainer_fvp5h_84",tI="_homeScreenModernSidebarOpen_fvp5h_122",nI="_loading_fvp5h_174",rI="_loadingContent_fvp5h_185",iI="_loadingSpinner_fvp5h_190",sI="_emptyState_fvp5h_200",oI="_emptyStateIcon_fvp5h_210",Mt={homeScreenModern:Y6,mainGrid:J6,sidebarColumn:Q6,mapColumn:X6,mapContainer:eI,homeScreenModernSidebarOpen:tI,loading:nI,loadingContent:rI,loadingSpinner:iI,emptyState:sI,emptyStateIcon:oI},aI=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],lI=aI[new Date().getMonth()],cI=new Date().getFullYear(),uI=()=>{const t=js(),e=S.useRef(),[n,r]=S.useState(!1),[s,a]=S.useState(null),[c,d]=S.useState({address:"",city:"",lat:null,lon:null}),[h,f]=S.useState(null),[m,g]=S.useState(0),[w,C]=S.useState([]),[b,_]=S.useState(""),[k,y]=S.useState(!1),[j,x]=S.useState(!1),[E,A]=S.useState(window.innerWidth<768),[T,B]=S.useState(null),O=20,[R,N]=S.useState(!1),[M,q]=S.useState(60),$=S.useRef({}),{logout:Z,authenticate:W}=Hx(),{drivers:G,loading:K}=xl(),[D,Q]=S.useState({open:!1,message:"",type:"info"}),U=S.useMemo(()=>lI,[]),te=S.useMemo(()=>cI,[]);S.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(ee=>a([ee.coords.latitude,ee.coords.longitude]),()=>_("Lokacija nije dostupna"))},[]),S.useEffect(()=>{const ee=()=>{const _e=window.innerWidth<768;A(_e),!_e&&n&&r(!1);try{const xe=document.querySelector(".app-header"),Ce=xe?Math.ceil(xe.getBoundingClientRect().height):window.innerWidth<640?54:56;q(Ce)}catch{}};return window.addEventListener("resize",ee),ee(),()=>window.removeEventListener("resize",ee)},[n]),S.useEffect(()=>{const ee=()=>{window.innerWidth<768&&r(!0)},_e=()=>{window.innerWidth<768&&r(Ce=>!Ce)},xe=()=>{window.innerWidth<768&&r(!1)};return window.addEventListener("homeSidebarOpen",ee),window.addEventListener("homeSidebarToggle",_e),window.addEventListener("homeSidebarClose",xe),()=>{window.removeEventListener("homeSidebarOpen",ee),window.removeEventListener("homeSidebarToggle",_e),window.removeEventListener("homeSidebarClose",xe)}},[]),S.useEffect(()=>{const ee=()=>{const xe=()=>{try{const $e=document.querySelector(".app-header"),St=$e?$e.getBoundingClientRect():null;if(St){const Ke=St.bottom+O;B(Math.ceil(Ke))}else B(M+O)}catch{B(M+O)}};xe();const Ce=()=>xe();return window.addEventListener("resize",Ce),window.addEventListener("orientationchange",Ce),()=>{window.removeEventListener("resize",Ce),window.removeEventListener("orientationchange",Ce)}};let _e=null;return E&&n?_e=ee():B(null),()=>{typeof _e=="function"&&_e()}},[E,n,M]),S.useEffect(()=>{const ee="no-scroll-overlay";return E&&n?document.body.classList.add(ee):document.body.classList.remove(ee),()=>document.body.classList.remove(ee)},[E,n]),S.useEffect(()=>{if((G==null?void 0:G.length)>0){const ee=localStorage.getItem("DRIVER_TURA"),_e=G.find(xe=>xe.tura===ee)||G[0];f(_e),g(G.findIndex(xe=>xe.tura===_e.tura))}},[G]);const se=S.useCallback(()=>{if(!G||G.length<=1)return;const ee=(m+1)%G.length,_e=G[ee];localStorage.setItem("DRIVER_TURA",_e.tura),f(_e),g(ee)},[G,m]);S.useCallback(()=>{r(ee=>!ee)},[]);const pe=S.useCallback(()=>{Z(),f(null),localStorage.removeItem("DRIVER_TURA"),t("/")},[Z,t]),ue=()=>y(!1),me=S.useCallback(ee=>ee==="8610"?50:ee==="8620"||ee==="8630"?85:ee==="8640"?80:50,[]),Y=S.useCallback(async ee=>{var Ft;if(!ee||!ee.tura)return;const _e=ee.tura,xe=new Date;new Date(xe.getFullYear(),xe.getMonth(),1).toISOString().slice(0,10),new Date(xe.getFullYear(),xe.getMonth()+1,0).toISOString().slice(0,10);const Ce=new Date().toISOString().slice(0,10),$e=Ce.slice(0,7),St=Ce.slice(0,4),Ke=$.current[_e];if(Ke&&Ke.dayDate===Ce&&Ke.monthKey===$e&&Ke.year===St){C(Ke.stats);return}N(!0);try{const Zt=new Date,rr=new Date(Zt.getFullYear(),Zt.getMonth(),1).toISOString().slice(0,10),Ur=new Date(Zt.getFullYear(),Zt.getMonth()+1,0).toISOString().slice(0,10),$n=new Date(Zt.getFullYear(),0,1).toISOString().slice(0,10),Ii=new Date(Zt.getFullYear(),11,31).toISOString().slice(0,10),{data:Kt}=await ye.from("deliveries").select("*").eq("driver",ee.tura).eq("deleted",0).order("date",{ascending:!1}).limit(1),ir=(Ft=Kt==null?void 0:Kt[0])!=null&&Ft.date&&typeof Kt[0].date=="string"?Kt[0].date.slice(0,10):Ce,[Ss,Ho,Mi]=await Promise.all([ye.from("deliveries").select("*").eq("driver",ee.tura).gte("date",`${ir}T00:00:00`).lte("date",`${ir}T23:59:59`).eq("deleted",0),ye.from("deliveries").select("*").eq("driver",ee.tura).gte("date",rr).lte("date",Ur).eq("deleted",0),ye.from("deliveries").select("*").eq("driver",ee.tura).gte("date",$n).lte("date",Ii).eq("deleted",0)]),Wr=me(ee.tura),ne=(Je,Ve)=>{if(Ve==="month"&&console.log("RAW monthResult.data",Je),!Je||Je.length===0)return{packages:0,diff:Ve==="day"?-Wr:0,complaints:0,date:Ve==="day"?ir:null};let it=Je;if(Ve==="month"){const Oe=new Date,tt=Oe.getFullYear(),Ut=Oe.getMonth();it=Je.filter(Yt=>{if(!(Yt!=null&&Yt.date))return!1;const yn=typeof Yt.date=="string"?Yt.date.slice(0,10):Yt.date,Cs=new Date(yn),Hr=Yt.zustellung_paketi,Pl=Hr!=null&&Hr!==""&&!isNaN(Number(Hr))&&Number(Hr)>0,El=Cs.getFullYear()===tt&&Cs.getMonth()===Ut&&Yt.driver==ee.tura&&Yt.deleted==0&&Pl;return console.log("FILTER month",{date:Yt.date,dateStr:yn,year:Cs.getFullYear(),month:Cs.getMonth(),paketi:Hr,validPaketi:Pl,pass:El}),El})}else Ve==="year"?it=Je.filter(Oe=>parseInt((Oe==null?void 0:Oe.produktivitaet_stops)||0,10)>0):Ve==="day"&&(it=Je.filter(Oe=>parseInt((Oe==null?void 0:Oe.produktivitaet_stops)||0,10)>0));const Fe=it.reduce((Oe,tt)=>Oe+(parseInt((tt==null?void 0:tt.produktivitaet_stops)||0,10)||0),0),Ue=it.reduce((Oe,tt)=>Oe+(parseInt((tt==null?void 0:tt.probleme_druga)||0,10)||0),0),yt=(new Set(it.map(Oe=>Oe!=null&&Oe.date?typeof Oe.date=="string"?Oe.date.slice(0,10):new Date(Oe.date).toISOString().slice(0,10):null).filter(Boolean)).size||0)*Wr;return Ve==="day"?{packages:Fe,diff:Fe-Wr,complaints:Ue,date:ir}:{packages:Fe,diff:Fe-yt,complaints:Ue,date:null}},ie=ne(Ss.data,"day"),fe=ne(Ho.data,"month"),Te=ne(Mi.data,"year"),He=[{label:`Dostava (${ie.date||""})`,value:ie.diff,complaints:ie.complaints},{label:`Reklamacije (${ie.date||""})`,value:ie.complaints},{label:`Dostava za ${U}`,value:fe.diff,complaints:fe.complaints},{label:`Reklamacije za ${U}`,value:fe.complaints},{label:`Dostava za ${te}`,value:Te.diff,complaints:Te.complaints},{label:`Reklamacije za ${te}`,value:Te.complaints}];$.current[_e]={dayDate:Ce,monthKey:$e,year:St,stats:He},C(He)}catch{C([])}finally{N(!1)}},[me,U,te]);S.useEffect(()=>{h&&Y(h)},[h,Y]);const he=S.useCallback(()=>R?Array(6).fill({label:"Uitavanje...",value:"--",trend:"neutral"}):w!=null&&w.length?w.slice(0,6).map(ee=>({label:ee.label||"--",value:ee.value!==void 0?ee.value:"--",trend:typeof ee.value=="number"?ee.value>0?"positive":ee.value<0?"negative":"neutral":"neutral"})):Array(6).fill({label:"--",value:"--",trend:"neutral"}),[w,R]);if(K)return o.jsx("div",{className:Mt.homeScreenModern,children:o.jsx("div",{className:Mt.loading,children:o.jsxs("div",{className:Mt.loadingContent,children:[o.jsx("div",{className:Mt.loadingSpinner}),o.jsx("p",{children:"Uitavam podatke..."})]})})});if(!K&&(!G||G.length===0))return o.jsx("div",{className:Mt.homeScreenModern,children:o.jsxs("div",{className:Mt.emptyState,children:[o.jsx("div",{className:Mt.emptyStateIcon,children:""}),o.jsx("h3",{children:"Nema dostupnih vozaa"}),o.jsx("p",{children:"Dodajte vozae u sistem da biste poeli koristiti aplikaciju"})]})});const ke=E;return o.jsxs("div",{className:`${Mt.homeScreenModern} ${ke?Mt.mobileClean:""} ${n?Mt.homeScreenModernSidebarOpen:""}`,children:[o.jsx("div",{className:Mt.mainGrid,children:E?n?o.jsx("aside",{className:Mt.sidebarColumn,children:o.jsx(S0,{stats:he(),user:h,onSwitchDriver:se,isLoading:R,onLogout:pe})}):o.jsx("main",{className:Mt.mapColumn,children:o.jsx("div",{className:Mt.mapContainer,children:o.jsx(E0,{title:"Mapa dostave - Austrija",mapRef:e,address:c.address,city:c.city,selectedMarker:c,headerHeight:M,onNavigate:ee=>{if(ee&&typeof ee=="object"&&typeof ee.lat=="number"&&typeof ee.lon=="number"){window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${ee.lat},${ee.lon}`)}&travelmode=driving`,"_blank");return}ee&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ee)}`,"_blank")},onSearchSelect:d,onLocateMe:a,children:o.jsx(O0,{onAddressSelect:d,mapRef:e,selectedMarker:c,userLocation:s})})})}):o.jsxs(pi.Fragment,{children:[o.jsx("aside",{className:Mt.sidebarColumn,children:o.jsx(S0,{stats:he(),user:h,onSwitchDriver:se,isLoading:R,onLogout:pe})}),o.jsx("main",{className:Mt.mapColumn,children:o.jsx("div",{className:Mt.mapContainer,children:o.jsx(E0,{title:"Mapa dostave - Austrija",mapRef:e,address:c.address,city:c.city,selectedMarker:c,headerHeight:M,onNavigate:ee=>{if(ee&&typeof ee=="object"&&typeof ee.lat=="number"&&typeof ee.lon=="number"){window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${ee.lat},${ee.lon}`)}&travelmode=driving`,"_blank");return}ee&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ee)}`,"_blank")},onSearchSelect:d,onLocateMe:a,children:o.jsx(O0,{onAddressSelect:d,mapRef:e,selectedMarker:c,userLocation:s})})})})]})}),o.jsx(Z6,{isOpen:k,onClose:()=>y(!1),onLoginSuccess:ue}),o.jsx(K6,{isOpen:j,onClose:()=>x(!1),onLogin:async(ee,_e)=>{try{const xe=await W(ee,_e);x(!1),xe&&(xe.role==="admin"||xe.isAdminLogin)?t("/admin"):Q({open:!0,message:"Uspjeno prijavljen, ali nemate administratorski pristup.",type:"warning"})}catch(xe){Q({open:!0,message:(xe==null?void 0:xe.message)||"Neuspjela prijava. Provjerite korisniko ime i lozinku.",type:"error"})}}}),o.jsx(Nx,{isOpen:D.open,message:D.message,type:D.type,onClose:()=>Q({...D,open:!1})})]})};function dI({user:t,onChangePassword:e,onLogout:n}){var f;(f=document.querySelector('meta[name="build-timestamp"]'))!=null&&f.content;const[r,s]=pi.useState(!1),a=js(),c=bs(),d=()=>{if(c.pathname!=="/")a("/"),setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("homeSidebarToggle"))}catch{}},80);else try{window.dispatchEvent(new CustomEvent("homeSidebarToggle"))}catch{}},h=()=>s(!1);return pi.useEffect(()=>{s(!1)},[c.pathname]),pi.useEffect(()=>{const m="no-scroll-mobile-menu";return r?document.body.classList.add(m):document.body.classList.remove(m),()=>document.body.classList.remove(m)},[r]),o.jsxs("header",{className:"app-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsxs("div",{className:"app-logo",children:[o.jsx("button",{className:"mobile-nav-trigger","aria-label":"Otvori meni",onClick:()=>s(m=>!m),children:o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),o.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),o.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),o.jsx(da,{to:"/",className:"logo-link",children:o.jsx("h1",{children:"B&D Evidencija"})})]}),o.jsxs("nav",{className:"header-nav",children:[o.jsxs(da,{to:"/deliveries",children:[o.jsx("span",{className:"nav-icon","aria-hidden":"true",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 3h5v5"}),o.jsx("path",{d:"M8 3H3v5"}),o.jsx("path",{d:"M12 22v-8.3a4 4 0 0 0-4-4H3"}),o.jsx("path",{d:"M3 9a9 9 0 0 1 9 9"})]})}),o.jsx("span",{children:"Dostave"})]}),o.jsxs(da,{to:"/drivers",children:[o.jsx("span",{className:"nav-icon","aria-hidden":"true",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),o.jsx("span",{children:"Vozai"})]}),o.jsxs(da,{to:"/extra-rides",children:[o.jsx("span",{className:"nav-icon","aria-hidden":"true",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),o.jsx("path",{d:"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),o.jsx("path",{d:"M5 17h-2v-4m-1 -8h11v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5"})]})}),o.jsx("span",{children:"Extra vonje"})]}),o.jsxs(da,{to:"/about",children:[o.jsx("span",{className:"nav-icon","aria-hidden":"true",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),o.jsx("path",{d:"M12 17h.01"})]})}),o.jsx("span",{children:"O aplikaciji"})]})]}),o.jsx("button",{className:"mobile-center-trigger","aria-label":"Prebaci Sidebar/Mapa",onClick:d,children:o.jsxs("svg",{width:"60",height:"24",viewBox:"0 0 60 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"3",width:"24",height:"18",rx:"3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),o.jsx("line",{x1:"5",y1:"7",x2:"20",y2:"7",strokeWidth:"1.5"}),o.jsx("line",{x1:"5",y1:"10",x2:"16",y2:"10",strokeWidth:"1.5"}),o.jsx("line",{x1:"5",y1:"13",x2:"18",y2:"13",strokeWidth:"1.5"}),o.jsx("line",{x1:"5",y1:"16",x2:"14",y2:"16",strokeWidth:"1.5"}),o.jsx("rect",{x:"28",y:"8",width:"24",height:"8",rx:"4",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.6"}),o.jsx("circle",{cx:"33",cy:"12",r:"2.5",fill:"currentColor",opacity:"0.8",children:o.jsx("animate",{attributeName:"cx",values:"33;47;33",dur:"3s",repeatCount:"indefinite"})}),o.jsx("text",{x:"40",y:"6",fontSize:"4",fill:"currentColor",opacity:"0.7",textAnchor:"middle",children:"TOGGLE"}),o.jsx("rect",{x:"34",y:"3",width:"24",height:"18",rx:"3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),o.jsx("path",{d:"M38 8 L42 12 L46 8 L50 12 L54 8",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.7"}),o.jsx("circle",{cx:"45",cy:"10",r:"2",fill:"currentColor",opacity:"0.9"}),o.jsx("path",{d:"M41 16 L43 14 L45 16 L47 14 L49 16",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.6"}),o.jsx("circle",{cx:"50",cy:"15",r:"1",fill:"currentColor",opacity:"0.6"}),o.jsx("path",{d:"M26 6 L30 9 L26 12",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.5",children:o.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0.3",dur:"2s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M54 6 L50 9 L54 12",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.5",children:o.jsx("animate",{attributeName:"opacity",values:"0.8;0.3;0.8",dur:"2s",repeatCount:"indefinite"})})]})}),o.jsx(D5,{user:t,onChangePassword:e,onLogout:n})]}),r&&o.jsxs("div",{className:"mobile-menu-dropdown",children:[o.jsxs("button",{className:"mobile-menu-item",onClick:()=>{a("/"),h()},children:[o.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.jsx("polyline",{points:"9,22 9,12 15,12 15,22"})]})}),"Poetna"]}),o.jsxs("button",{className:"mobile-menu-item",onClick:()=>{a("/deliveries"),h()},children:[o.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 3h5v5"}),o.jsx("path",{d:"M8 3H3v5"}),o.jsx("path",{d:"M12 22v-8.3a4 4 0 0 0-4-4H3"}),o.jsx("path",{d:"M3 9a9 9 0 0 1 9 9"})]})}),"Dostave"]}),o.jsxs("button",{className:"mobile-menu-item",onClick:()=>{a("/drivers"),h()},children:[o.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),"Vozai"]}),o.jsxs("button",{className:"mobile-menu-item",onClick:()=>{a("/extra-rides"),h()},children:[o.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),o.jsx("path",{d:"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),o.jsx("path",{d:"M5 17h-2v-4m-1 -8h11v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5"})]})}),"Extra vonje"]}),t.role==="admin"&&o.jsxs("button",{className:"mobile-menu-item",onClick:()=>{a("/admin"),h()},children:[o.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),"Admin"]}),o.jsxs("button",{className:"mobile-menu-item",onClick:()=>{a("/about"),h()},children:[o.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),o.jsx("path",{d:"M12 17h.01"})]})}),"O aplikaciji"]})]})]})}function hI({onLogout:t}){const[e,n]=S.useState(!1),{currentUser:r,changePassword:s,logout:a}=Gp(),c=bs(),d=c.pathname==="/"||c.pathname==="",h=()=>{n(!0)},f=async(g,w)=>{await s(g,w)},m=()=>{window.confirm("Da li ste sigurni da se elite odjaviti?")&&(a(),t&&t())};return r?o.jsxs("div",{className:"app-content",children:[o.jsx(dI,{user:r,onChangePassword:h,onLogout:m}),o.jsx("main",{className:`app-main${d?" home-fullbleed":""}`,children:o.jsxs(yk,{children:[o.jsx(Sr,{path:"/",element:o.jsx(uI,{})}),o.jsx(Sr,{path:"/deliveries",element:o.jsx(O4,{})}),o.jsx(Sr,{path:"/drivers",element:o.jsx(IL,{})}),o.jsx(Sr,{path:"/extra-rides",element:o.jsx(TO,{})}),o.jsx(Sr,{path:"/admin",element:(r==null?void 0:r.role)==="admin"?o.jsx(P3,{}):o.jsx(Zd,{to:"/"})}),o.jsx(Sr,{path:"/payroll",element:(r==null?void 0:r.role)!=="admin"?o.jsx(R3,{user:r}):o.jsx(Zd,{to:"/"})}),o.jsx(Sr,{path:"/about",element:o.jsx(M3,{})}),o.jsx(Sr,{path:"*",element:o.jsx(Zd,{to:"/"})})]})}),e&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:o.jsx(iP,{onClose:()=>n(!1),onSubmit:async g=>{await f(g.oldPassword,g.newPassword),n(!1)}})})]}):o.jsx("div",{children:"Loading..."})}function fI(){const{currentUser:t,isAuthenticated:e}=Gp(),[n,r]=S.useState(!1),[s,a]=S.useState(!1),c=h=>{r(!0),a(!1)},d=()=>{a(!0),r(!1)};return S.useEffect(()=>{!t&&!e&&r(!1),t&&e&&a(!1)},[t,e]),o.jsx(Sk,{basename:"/bde-evidencija",children:o.jsx(O5,{children:o.jsx(Tk,{children:o.jsx(y5,{children:o.jsx(k5,{children:o.jsx("div",{className:"app",children:(e||n)&&!s?o.jsx(hI,{onLogout:d}):o.jsx(A5,{onAuthSuccess:c})})})})})})})}console.log(" BDEVidencija v4.0.0 - ULTRA NUCLEAR FORCE UPDATE - 20251007");console.log(" PWA Cache Status: FORCED REFRESH");"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",function(){window.location.reload()});e1(document.getElementById("root")).render(o.jsx(p4,{client:C4,children:o.jsx(fI,{})}));

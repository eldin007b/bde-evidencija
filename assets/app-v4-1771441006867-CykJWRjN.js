var eg=t=>{throw TypeError(t)};var wd=(t,e,n)=>e.has(t)||eg("Cannot "+n);var B=(t,e,n)=>(wd(t,e,"read from private field"),n?n.call(t):e.get(t)),je=(t,e,n)=>e.has(t)?eg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),le=(t,e,n,r)=>(wd(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ae=(t,e,n)=>(wd(t,e,"access private method"),n);var Zl=(t,e,n,r)=>({set _(s){le(t,e,s,n)},get _(){return B(t,e,r)}});function e2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function t2(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var F0={exports:{}},pu={},U0={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pl=Symbol.for("react.element"),n2=Symbol.for("react.portal"),r2=Symbol.for("react.fragment"),i2=Symbol.for("react.strict_mode"),s2=Symbol.for("react.profiler"),o2=Symbol.for("react.provider"),a2=Symbol.for("react.context"),l2=Symbol.for("react.forward_ref"),c2=Symbol.for("react.suspense"),u2=Symbol.for("react.memo"),d2=Symbol.for("react.lazy"),tg=Symbol.iterator;function h2(t){return t===null||typeof t!="object"?null:(t=tg&&t[tg]||t["@@iterator"],typeof t=="function"?t:null)}var W0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H0=Object.assign,V0={};function Ao(t,e,n){this.props=t,this.context=e,this.refs=V0,this.updater=n||W0}Ao.prototype.isReactComponent={};Ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function q0(){}q0.prototype=Ao.prototype;function Vf(t,e,n){this.props=t,this.context=e,this.refs=V0,this.updater=n||W0}var qf=Vf.prototype=new q0;qf.constructor=Vf;H0(qf,Ao.prototype);qf.isPureReactComponent=!0;var ng=Array.isArray,G0=Object.prototype.hasOwnProperty,Gf={current:null},Z0={key:!0,ref:!0,__self:!0,__source:!0};function K0(t,e,n){var r,s={},o=null,c=null;if(e!=null)for(r in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)G0.call(e,r)&&!Z0.hasOwnProperty(r)&&(s[r]=e[r]);var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){for(var h=Array(d),f=0;f<d;f++)h[f]=arguments[f+2];s.children=h}if(t&&t.defaultProps)for(r in d=t.defaultProps,d)s[r]===void 0&&(s[r]=d[r]);return{$$typeof:pl,type:t,key:o,ref:c,props:s,_owner:Gf.current}}function f2(t,e){return{$$typeof:pl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zf(t){return typeof t=="object"&&t!==null&&t.$$typeof===pl}function p2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rg=/\/+/g;function bd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?p2(""+t.key):e.toString(36)}function yc(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case pl:case n2:c=!0}}if(c)return c=t,s=s(c),t=r===""?"."+bd(c,0):r,ng(s)?(n="",t!=null&&(n=t.replace(rg,"$&/")+"/"),yc(s,e,n,"",function(f){return f})):s!=null&&(Zf(s)&&(s=f2(s,n+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(rg,"$&/")+"/")+t)),e.push(s)),1;if(c=0,r=r===""?".":r+":",ng(t))for(var d=0;d<t.length;d++){o=t[d];var h=r+bd(o,d);c+=yc(o,e,n,h,s)}else if(h=h2(t),typeof h=="function")for(t=h.call(t),d=0;!(o=t.next()).done;)o=o.value,h=r+bd(o,d++),c+=yc(o,e,n,h,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function Kl(t,e,n){if(t==null)return t;var r=[],s=0;return yc(t,r,"","",function(o){return e.call(n,o,s++)}),r}function m2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},_c={transition:null},g2={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:_c,ReactCurrentOwner:Gf};function Y0(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Kl,forEach:function(t,e,n){Kl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kl(t,function(){e++}),e},toArray:function(t){return Kl(t,function(e){return e})||[]},only:function(t){if(!Zf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=Ao;Me.Fragment=r2;Me.Profiler=s2;Me.PureComponent=Vf;Me.StrictMode=i2;Me.Suspense=c2;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g2;Me.act=Y0;Me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=H0({},t.props),s=t.key,o=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=Gf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(h in e)G0.call(e,h)&&!Z0.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&d!==void 0?d[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){d=Array(h);for(var f=0;f<h;f++)d[f]=arguments[f+2];r.children=d}return{$$typeof:pl,type:t.type,key:s,ref:o,props:r,_owner:c}};Me.createContext=function(t){return t={$$typeof:a2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o2,_context:t},t.Consumer=t};Me.createElement=K0;Me.createFactory=function(t){var e=K0.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:l2,render:t}};Me.isValidElement=Zf;Me.lazy=function(t){return{$$typeof:d2,_payload:{_status:-1,_result:t},_init:m2}};Me.memo=function(t,e){return{$$typeof:u2,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=_c.transition;_c.transition={};try{t()}finally{_c.transition=e}};Me.unstable_act=Y0;Me.useCallback=function(t,e){return sn.current.useCallback(t,e)};Me.useContext=function(t){return sn.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};Me.useEffect=function(t,e){return sn.current.useEffect(t,e)};Me.useId=function(){return sn.current.useId()};Me.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};Me.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return sn.current.useMemo(t,e)};Me.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};Me.useRef=function(t){return sn.current.useRef(t)};Me.useState=function(t){return sn.current.useState(t)};Me.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};Me.useTransition=function(){return sn.current.useTransition()};Me.version="18.3.1";U0.exports=Me;var C=U0.exports;const mi=Hf(C),v2=e2({__proto__:null,default:mi},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=C,_2=Symbol.for("react.element"),x2=Symbol.for("react.fragment"),w2=Object.prototype.hasOwnProperty,b2=y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j2={key:!0,ref:!0,__self:!0,__source:!0};function J0(t,e,n){var r,s={},o=null,c=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)w2.call(e,r)&&!j2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:_2,type:t,key:o,ref:c,props:s,_owner:b2.current}}pu.Fragment=x2;pu.jsx=J0;pu.jsxs=J0;F0.exports=pu;var a=F0.exports,Q0={exports:{}},Cn={},X0={exports:{}},ey={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,X){var W=z.length;z.push(X);e:for(;0<W;){var ne=W-1>>>1,oe=z[ne];if(0<s(oe,X))z[ne]=X,z[W]=oe,W=ne;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var X=z[0],W=z.pop();if(W!==X){z[0]=W;e:for(var ne=0,oe=z.length,ge=oe>>>1;ne<ge;){var de=2*(ne+1)-1,ve=z[de],J=de+1,fe=z[J];if(0>s(ve,W))J<oe&&0>s(fe,ve)?(z[ne]=fe,z[J]=W,ne=J):(z[ne]=ve,z[de]=W,ne=de);else if(J<oe&&0>s(fe,W))z[ne]=fe,z[J]=W,ne=J;else break e}}return X}function s(z,X){var W=z.sortIndex-X.sortIndex;return W!==0?W:z.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],f=[],m=1,g=null,x=3,P=!1,b=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(z){for(var X=n(f);X!==null;){if(X.callback===null)r(f);else if(X.startTime<=z)r(f),X.sortIndex=X.expirationTime,e(h,X);else break;X=n(f)}}function O(z){if(_=!1,k(z),!b)if(n(h)!==null)b=!0,Z(D);else{var X=n(f);X!==null&&Y(O,X.startTime-z)}}function D(z,X){b=!1,_&&(_=!1,y(N),N=-1),P=!0;var W=x;try{for(k(X),g=n(h);g!==null&&(!(g.expirationTime>X)||z&&!A());){var ne=g.callback;if(typeof ne=="function"){g.callback=null,x=g.priorityLevel;var oe=ne(g.expirationTime<=X);X=t.unstable_now(),typeof oe=="function"?g.callback=oe:g===n(h)&&r(h),k(X)}else r(h);g=n(h)}if(g!==null)var ge=!0;else{var de=n(f);de!==null&&Y(O,de.startTime-X),ge=!1}return ge}finally{g=null,x=W,P=!1}}var T=!1,$=null,N=-1,I=5,R=-1;function A(){return!(t.unstable_now()-R<I)}function G(){if($!==null){var z=t.unstable_now();R=z;var X=!0;try{X=$(!0,z)}finally{X?F():(T=!1,$=null)}}else T=!1}var F;if(typeof j=="function")F=function(){j(G)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,H=K.port2;K.port1.onmessage=G,F=function(){H.postMessage(null)}}else F=function(){S(G,0)};function Z(z){$=z,T||(T=!0,F())}function Y(z,X){N=S(function(){z(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||P||(b=!0,Z(D))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(z){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var W=x;x=X;try{return z()}finally{x=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var W=x;x=z;try{return X()}finally{x=W}},t.unstable_scheduleCallback=function(z,X,W){var ne=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ne+W:ne):W=ne,z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=W+oe,z={id:m++,callback:X,priorityLevel:z,startTime:W,expirationTime:oe,sortIndex:-1},W>ne?(z.sortIndex=W,e(f,z),n(h)===null&&z===n(f)&&(_?(y(N),N=-1):_=!0,Y(O,W-ne))):(z.sortIndex=oe,e(h,z),b||P||(b=!0,Z(D))),z},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(z){var X=x;return function(){var W=x;x=X;try{return z.apply(this,arguments)}finally{x=W}}}})(ey);X0.exports=ey;var k2=X0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2=C,Sn=k2;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ty=new Set,Da={};function ws(t,e){Co(t,e),Co(t+"Capture",e)}function Co(t,e){for(Da[t]=e,t=0;t<e.length;t++)ty.add(e[t])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=Object.prototype.hasOwnProperty,C2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ig={},sg={};function P2(t){return ph.call(sg,t)?!0:ph.call(ig,t)?!1:C2.test(t)?sg[t]=!0:(ig[t]=!0,!1)}function E2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function T2(t,e,n,r){if(e===null||typeof e>"u"||E2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,s,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ft[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ft[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ft[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ft[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ft[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ft[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ft[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ft[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ft[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kf=/[\-:]([a-z])/g;function Yf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kf,Yf);Ft[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kf,Yf);Ft[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kf,Yf);Ft[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ft[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ft[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jf(t,e,n,r){var s=Ft.hasOwnProperty(e)?Ft[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(T2(e,n,s,r)&&(n=null),r||s===null?P2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ur=S2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yl=Symbol.for("react.element"),Gs=Symbol.for("react.portal"),Zs=Symbol.for("react.fragment"),Qf=Symbol.for("react.strict_mode"),mh=Symbol.for("react.profiler"),ny=Symbol.for("react.provider"),ry=Symbol.for("react.context"),Xf=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),vh=Symbol.for("react.suspense_list"),ep=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),iy=Symbol.for("react.offscreen"),og=Symbol.iterator;function sa(t){return t===null||typeof t!="object"?null:(t=og&&t[og]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,jd;function _a(t){if(jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var kd=!1;function Sd(t,e){if(!t||kd)return"";kd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),o=r.stack.split(`
`),c=s.length-1,d=o.length-1;1<=c&&0<=d&&s[c]!==o[d];)d--;for(;1<=c&&0<=d;c--,d--)if(s[c]!==o[d]){if(c!==1||d!==1)do if(c--,d--,0>d||s[c]!==o[d]){var h=`
`+s[c].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=c&&0<=d);break}}}finally{kd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_a(t):""}function L2(t){switch(t.tag){case 5:return _a(t.type);case 16:return _a("Lazy");case 13:return _a("Suspense");case 19:return _a("SuspenseList");case 0:case 2:case 15:return t=Sd(t.type,!1),t;case 11:return t=Sd(t.type.render,!1),t;case 1:return t=Sd(t.type,!0),t;default:return""}}function yh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zs:return"Fragment";case Gs:return"Portal";case mh:return"Profiler";case Qf:return"StrictMode";case gh:return"Suspense";case vh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ry:return(t.displayName||"Context")+".Consumer";case ny:return(t._context.displayName||"Context")+".Provider";case Xf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ep:return e=t.displayName||null,e!==null?e:yh(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return yh(t(e))}catch{}}return null}function O2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yh(e);case 8:return e===Qf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function N2(t){var e=sy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(c){r=""+c,o.call(this,c)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jl(t){t._valueTracker||(t._valueTracker=N2(t))}function oy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ac(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _h(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ag(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ay(t,e){e=e.checked,e!=null&&Jf(t,"checked",e,!1)}function xh(t,e){ay(t,e);var n=Pi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wh(t,e.type,n):e.hasOwnProperty("defaultValue")&&wh(t,e.type,Pi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wh(t,e,n){(e!=="number"||Ac(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xa=Array.isArray;function so(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function bh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(xa(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pi(n)}}function ly(t,e){var n=Pi(e.value),r=Pi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ug(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ql,uy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ql=Ql||document.createElement("div"),Ql.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ql.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function za(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R2=["Webkit","ms","Moz","O"];Object.keys(Sa).forEach(function(t){R2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sa[e]=Sa[t]})});function dy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sa.hasOwnProperty(t)&&Sa[t]?(""+e).trim():e+"px"}function hy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=dy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var I2=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kh(t,e){if(e){if(I2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Sh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ch=null;function tp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ph=null,oo=null,ao=null;function dg(t){if(t=vl(t)){if(typeof Ph!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=_u(e),Ph(t.stateNode,t.type,e))}}function fy(t){oo?ao?ao.push(t):ao=[t]:oo=t}function py(){if(oo){var t=oo,e=ao;if(ao=oo=null,dg(t),e)for(t=0;t<e.length;t++)dg(e[t])}}function my(t,e){return t(e)}function gy(){}var Cd=!1;function vy(t,e,n){if(Cd)return t(e,n);Cd=!0;try{return my(t,e,n)}finally{Cd=!1,(oo!==null||ao!==null)&&(gy(),py())}}function Ba(t,e){var n=t.stateNode;if(n===null)return null;var r=_u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Eh=!1;if(Dr)try{var oa={};Object.defineProperty(oa,"passive",{get:function(){Eh=!0}}),window.addEventListener("test",oa,oa),window.removeEventListener("test",oa,oa)}catch{Eh=!1}function M2(t,e,n,r,s,o,c,d,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var Ca=!1,Dc=null,zc=!1,Th=null,A2={onError:function(t){Ca=!0,Dc=t}};function D2(t,e,n,r,s,o,c,d,h){Ca=!1,Dc=null,M2.apply(A2,arguments)}function z2(t,e,n,r,s,o,c,d,h){if(D2.apply(this,arguments),Ca){if(Ca){var f=Dc;Ca=!1,Dc=null}else throw Error(ee(198));zc||(zc=!0,Th=f)}}function bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hg(t){if(bs(t)!==t)throw Error(ee(188))}function B2(t){var e=t.alternate;if(!e){if(e=bs(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return hg(s),t;if(o===r)return hg(s),e;o=o.sibling}throw Error(ee(188))}if(n.return!==r.return)n=s,r=o;else{for(var c=!1,d=s.child;d;){if(d===n){c=!0,n=s,r=o;break}if(d===r){c=!0,r=s,n=o;break}d=d.sibling}if(!c){for(d=o.child;d;){if(d===n){c=!0,n=o,r=s;break}if(d===r){c=!0,r=o,n=s;break}d=d.sibling}if(!c)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function _y(t){return t=B2(t),t!==null?xy(t):null}function xy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xy(t);if(e!==null)return e;t=t.sibling}return null}var wy=Sn.unstable_scheduleCallback,fg=Sn.unstable_cancelCallback,$2=Sn.unstable_shouldYield,F2=Sn.unstable_requestPaint,vt=Sn.unstable_now,U2=Sn.unstable_getCurrentPriorityLevel,np=Sn.unstable_ImmediatePriority,by=Sn.unstable_UserBlockingPriority,Bc=Sn.unstable_NormalPriority,W2=Sn.unstable_LowPriority,jy=Sn.unstable_IdlePriority,mu=null,xr=null;function H2(t){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(mu,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:G2,V2=Math.log,q2=Math.LN2;function G2(t){return t>>>=0,t===0?32:31-(V2(t)/q2|0)|0}var Xl=64,ec=4194304;function wa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $c(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,c=n&268435455;if(c!==0){var d=c&~s;d!==0?r=wa(d):(o&=c,o!==0&&(r=wa(o)))}else c=n&~s,c!==0?r=wa(c):o!==0&&(r=wa(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-er(e),s=1<<n,r|=t[n],e&=~s;return r}function Z2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var c=31-er(o),d=1<<c,h=s[c];h===-1?(!(d&n)||d&r)&&(s[c]=Z2(d,e)):h<=e&&(t.expiredLanes|=d),o&=~d}}function Lh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ky(){var t=Xl;return Xl<<=1,!(Xl&4194240)&&(Xl=64),t}function Pd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ml(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function Y2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-er(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function rp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-er(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ke=0;function Sy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cy,ip,Py,Ey,Ty,Oh=!1,tc=[],gi=null,vi=null,yi=null,$a=new Map,Fa=new Map,ti=[],J2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pg(t,e){switch(t){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":$a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(e.pointerId)}}function aa(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=vl(e),e!==null&&ip(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Q2(t,e,n,r,s){switch(e){case"focusin":return gi=aa(gi,t,e,n,r,s),!0;case"dragenter":return vi=aa(vi,t,e,n,r,s),!0;case"mouseover":return yi=aa(yi,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return $a.set(o,aa($a.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Fa.set(o,aa(Fa.get(o)||null,t,e,n,r,s)),!0}return!1}function Ly(t){var e=Yi(t.target);if(e!==null){var n=bs(e);if(n!==null){if(e=n.tag,e===13){if(e=yy(n),e!==null){t.blockedOn=e,Ty(t.priority,function(){Py(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ch=r,n.target.dispatchEvent(r),Ch=null}else return e=vl(n),e!==null&&ip(e),t.blockedOn=n,!1;e.shift()}return!0}function mg(t,e,n){xc(t)&&n.delete(e)}function X2(){Oh=!1,gi!==null&&xc(gi)&&(gi=null),vi!==null&&xc(vi)&&(vi=null),yi!==null&&xc(yi)&&(yi=null),$a.forEach(mg),Fa.forEach(mg)}function la(t,e){t.blockedOn===e&&(t.blockedOn=null,Oh||(Oh=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,X2)))}function Ua(t){function e(s){return la(s,t)}if(0<tc.length){la(tc[0],t);for(var n=1;n<tc.length;n++){var r=tc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gi!==null&&la(gi,t),vi!==null&&la(vi,t),yi!==null&&la(yi,t),$a.forEach(e),Fa.forEach(e),n=0;n<ti.length;n++)r=ti[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ti.length&&(n=ti[0],n.blockedOn===null);)Ly(n),n.blockedOn===null&&ti.shift()}var lo=Ur.ReactCurrentBatchConfig,Fc=!0;function eb(t,e,n,r){var s=Ke,o=lo.transition;lo.transition=null;try{Ke=1,sp(t,e,n,r)}finally{Ke=s,lo.transition=o}}function tb(t,e,n,r){var s=Ke,o=lo.transition;lo.transition=null;try{Ke=4,sp(t,e,n,r)}finally{Ke=s,lo.transition=o}}function sp(t,e,n,r){if(Fc){var s=Nh(t,e,n,r);if(s===null)Dd(t,e,r,Uc,n),pg(t,r);else if(Q2(s,t,e,n,r))r.stopPropagation();else if(pg(t,r),e&4&&-1<J2.indexOf(t)){for(;s!==null;){var o=vl(s);if(o!==null&&Cy(o),o=Nh(t,e,n,r),o===null&&Dd(t,e,r,Uc,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Dd(t,e,r,null,n)}}var Uc=null;function Nh(t,e,n,r){if(Uc=null,t=tp(r),t=Yi(t),t!==null)if(e=bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Uc=t,null}function Oy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U2()){case np:return 1;case by:return 4;case Bc:case W2:return 16;case jy:return 536870912;default:return 16}default:return 16}}var hi=null,op=null,wc=null;function Ny(){if(wc)return wc;var t,e=op,n=e.length,r,s="value"in hi?hi.value:hi.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var c=n-t;for(r=1;r<=c&&e[n-r]===s[o-r];r++);return wc=s.slice(t,1<r?1-r:void 0)}function bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nc(){return!0}function gg(){return!1}function Pn(t){function e(n,r,s,o,c){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?nc:gg,this.isPropagationStopped=gg,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nc)},persist:function(){},isPersistent:nc}),e}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ap=Pn(Do),gl=ut({},Do,{view:0,detail:0}),nb=Pn(gl),Ed,Td,ca,gu=ut({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ca&&(ca&&t.type==="mousemove"?(Ed=t.screenX-ca.screenX,Td=t.screenY-ca.screenY):Td=Ed=0,ca=t),Ed)},movementY:function(t){return"movementY"in t?t.movementY:Td}}),vg=Pn(gu),rb=ut({},gu,{dataTransfer:0}),ib=Pn(rb),sb=ut({},gl,{relatedTarget:0}),Ld=Pn(sb),ob=ut({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),ab=Pn(ob),lb=ut({},Do,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cb=Pn(lb),ub=ut({},Do,{data:0}),yg=Pn(ub),db={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fb[t])?!!e[t]:!1}function lp(){return pb}var mb=ut({},gl,{key:function(t){if(t.key){var e=db[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lp,charCode:function(t){return t.type==="keypress"?bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gb=Pn(mb),vb=ut({},gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_g=Pn(vb),yb=ut({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lp}),_b=Pn(yb),xb=ut({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),wb=Pn(xb),bb=ut({},gu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jb=Pn(bb),kb=[9,13,27,32],cp=Dr&&"CompositionEvent"in window,Pa=null;Dr&&"documentMode"in document&&(Pa=document.documentMode);var Sb=Dr&&"TextEvent"in window&&!Pa,Ry=Dr&&(!cp||Pa&&8<Pa&&11>=Pa),xg=" ",wg=!1;function Iy(t,e){switch(t){case"keyup":return kb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function My(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ks=!1;function Cb(t,e){switch(t){case"compositionend":return My(e);case"keypress":return e.which!==32?null:(wg=!0,xg);case"textInput":return t=e.data,t===xg&&wg?null:t;default:return null}}function Pb(t,e){if(Ks)return t==="compositionend"||!cp&&Iy(t,e)?(t=Ny(),wc=op=hi=null,Ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ry&&e.locale!=="ko"?null:e.data;default:return null}}var Eb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Eb[t.type]:e==="textarea"}function Ay(t,e,n,r){fy(r),e=Wc(e,"onChange"),0<e.length&&(n=new ap("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ea=null,Wa=null;function Tb(t){Gy(t,0)}function vu(t){var e=Qs(t);if(oy(e))return t}function Lb(t,e){if(t==="change")return e}var Dy=!1;if(Dr){var Od;if(Dr){var Nd="oninput"in document;if(!Nd){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),Nd=typeof jg.oninput=="function"}Od=Nd}else Od=!1;Dy=Od&&(!document.documentMode||9<document.documentMode)}function kg(){Ea&&(Ea.detachEvent("onpropertychange",zy),Wa=Ea=null)}function zy(t){if(t.propertyName==="value"&&vu(Wa)){var e=[];Ay(e,Wa,t,tp(t)),vy(Tb,e)}}function Ob(t,e,n){t==="focusin"?(kg(),Ea=e,Wa=n,Ea.attachEvent("onpropertychange",zy)):t==="focusout"&&kg()}function Nb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vu(Wa)}function Rb(t,e){if(t==="click")return vu(e)}function Ib(t,e){if(t==="input"||t==="change")return vu(e)}function Mb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:Mb;function Ha(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ph.call(e,s)||!nr(t[s],e[s]))return!1}return!0}function Sg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cg(t,e){var n=Sg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sg(n)}}function By(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?By(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $y(){for(var t=window,e=Ac();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ac(t.document)}return e}function up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ab(t){var e=$y(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&By(n.ownerDocument.documentElement,n)){if(r!==null&&up(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=Cg(n,o);var c=Cg(n,r);s&&c&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Db=Dr&&"documentMode"in document&&11>=document.documentMode,Ys=null,Rh=null,Ta=null,Ih=!1;function Pg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ih||Ys==null||Ys!==Ac(r)||(r=Ys,"selectionStart"in r&&up(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ta&&Ha(Ta,r)||(Ta=r,r=Wc(Rh,"onSelect"),0<r.length&&(e=new ap("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ys)))}function rc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Js={animationend:rc("Animation","AnimationEnd"),animationiteration:rc("Animation","AnimationIteration"),animationstart:rc("Animation","AnimationStart"),transitionend:rc("Transition","TransitionEnd")},Rd={},Fy={};Dr&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function yu(t){if(Rd[t])return Rd[t];if(!Js[t])return t;var e=Js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fy)return Rd[t]=e[n];return t}var Uy=yu("animationend"),Wy=yu("animationiteration"),Hy=yu("animationstart"),Vy=yu("transitionend"),qy=new Map,Eg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(t,e){qy.set(t,e),ws(e,[t])}for(var Id=0;Id<Eg.length;Id++){var Md=Eg[Id],zb=Md.toLowerCase(),Bb=Md[0].toUpperCase()+Md.slice(1);Ti(zb,"on"+Bb)}Ti(Uy,"onAnimationEnd");Ti(Wy,"onAnimationIteration");Ti(Hy,"onAnimationStart");Ti("dblclick","onDoubleClick");Ti("focusin","onFocus");Ti("focusout","onBlur");Ti(Vy,"onTransitionEnd");Co("onMouseEnter",["mouseout","mouseover"]);Co("onMouseLeave",["mouseout","mouseover"]);Co("onPointerEnter",["pointerout","pointerover"]);Co("onPointerLeave",["pointerout","pointerover"]);ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$b=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function Tg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,z2(r,e,void 0,t),t.currentTarget=null}function Gy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var c=r.length-1;0<=c;c--){var d=r[c],h=d.instance,f=d.currentTarget;if(d=d.listener,h!==o&&s.isPropagationStopped())break e;Tg(s,d,f),o=h}else for(c=0;c<r.length;c++){if(d=r[c],h=d.instance,f=d.currentTarget,d=d.listener,h!==o&&s.isPropagationStopped())break e;Tg(s,d,f),o=h}}}if(zc)throw t=Th,zc=!1,Th=null,t}function rt(t,e){var n=e[Bh];n===void 0&&(n=e[Bh]=new Set);var r=t+"__bubble";n.has(r)||(Zy(e,t,2,!1),n.add(r))}function Ad(t,e,n){var r=0;e&&(r|=4),Zy(n,t,r,e)}var ic="_reactListening"+Math.random().toString(36).slice(2);function Va(t){if(!t[ic]){t[ic]=!0,ty.forEach(function(n){n!=="selectionchange"&&($b.has(n)||Ad(n,!1,t),Ad(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ic]||(e[ic]=!0,Ad("selectionchange",!1,e))}}function Zy(t,e,n,r){switch(Oy(e)){case 1:var s=eb;break;case 4:s=tb;break;default:s=sp}n=s.bind(null,e,n,t),s=void 0,!Eh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Dd(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var d=r.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(c===4)for(c=r.return;c!==null;){var h=c.tag;if((h===3||h===4)&&(h=c.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;c=c.return}for(;d!==null;){if(c=Yi(d),c===null)return;if(h=c.tag,h===5||h===6){r=o=c;continue e}d=d.parentNode}}r=r.return}vy(function(){var f=o,m=tp(n),g=[];e:{var x=qy.get(t);if(x!==void 0){var P=ap,b=t;switch(t){case"keypress":if(bc(n)===0)break e;case"keydown":case"keyup":P=gb;break;case"focusin":b="focus",P=Ld;break;case"focusout":b="blur",P=Ld;break;case"beforeblur":case"afterblur":P=Ld;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=vg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=ib;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=_b;break;case Uy:case Wy:case Hy:P=ab;break;case Vy:P=wb;break;case"scroll":P=nb;break;case"wheel":P=jb;break;case"copy":case"cut":case"paste":P=cb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=_g}var _=(e&4)!==0,S=!_&&t==="scroll",y=_?x!==null?x+"Capture":null:x;_=[];for(var j=f,k;j!==null;){k=j;var O=k.stateNode;if(k.tag===5&&O!==null&&(k=O,y!==null&&(O=Ba(j,y),O!=null&&_.push(qa(j,O,k)))),S)break;j=j.return}0<_.length&&(x=new P(x,b,null,n,m),g.push({event:x,listeners:_}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",x&&n!==Ch&&(b=n.relatedTarget||n.fromElement)&&(Yi(b)||b[zr]))break e;if((P||x)&&(x=m.window===m?m:(x=m.ownerDocument)?x.defaultView||x.parentWindow:window,P?(b=n.relatedTarget||n.toElement,P=f,b=b?Yi(b):null,b!==null&&(S=bs(b),b!==S||b.tag!==5&&b.tag!==6)&&(b=null)):(P=null,b=f),P!==b)){if(_=vg,O="onMouseLeave",y="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(_=_g,O="onPointerLeave",y="onPointerEnter",j="pointer"),S=P==null?x:Qs(P),k=b==null?x:Qs(b),x=new _(O,j+"leave",P,n,m),x.target=S,x.relatedTarget=k,O=null,Yi(m)===f&&(_=new _(y,j+"enter",b,n,m),_.target=k,_.relatedTarget=S,O=_),S=O,P&&b)t:{for(_=P,y=b,j=0,k=_;k;k=Ds(k))j++;for(k=0,O=y;O;O=Ds(O))k++;for(;0<j-k;)_=Ds(_),j--;for(;0<k-j;)y=Ds(y),k--;for(;j--;){if(_===y||y!==null&&_===y.alternate)break t;_=Ds(_),y=Ds(y)}_=null}else _=null;P!==null&&Lg(g,x,P,_,!1),b!==null&&S!==null&&Lg(g,S,b,_,!0)}}e:{if(x=f?Qs(f):window,P=x.nodeName&&x.nodeName.toLowerCase(),P==="select"||P==="input"&&x.type==="file")var D=Lb;else if(bg(x))if(Dy)D=Ib;else{D=Nb;var T=Ob}else(P=x.nodeName)&&P.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(D=Rb);if(D&&(D=D(t,f))){Ay(g,D,n,m);break e}T&&T(t,x,f),t==="focusout"&&(T=x._wrapperState)&&T.controlled&&x.type==="number"&&wh(x,"number",x.value)}switch(T=f?Qs(f):window,t){case"focusin":(bg(T)||T.contentEditable==="true")&&(Ys=T,Rh=f,Ta=null);break;case"focusout":Ta=Rh=Ys=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,Pg(g,n,m);break;case"selectionchange":if(Db)break;case"keydown":case"keyup":Pg(g,n,m)}var $;if(cp)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ks?Iy(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Ry&&n.locale!=="ko"&&(Ks||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ks&&($=Ny()):(hi=m,op="value"in hi?hi.value:hi.textContent,Ks=!0)),T=Wc(f,N),0<T.length&&(N=new yg(N,t,null,n,m),g.push({event:N,listeners:T}),$?N.data=$:($=My(n),$!==null&&(N.data=$)))),($=Sb?Cb(t,n):Pb(t,n))&&(f=Wc(f,"onBeforeInput"),0<f.length&&(m=new yg("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=$))}Gy(g,e)})}function qa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ba(t,n),o!=null&&r.unshift(qa(t,o,s)),o=Ba(t,e),o!=null&&r.push(qa(t,o,s))),t=t.return}return r}function Ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lg(t,e,n,r,s){for(var o=e._reactName,c=[];n!==null&&n!==r;){var d=n,h=d.alternate,f=d.stateNode;if(h!==null&&h===r)break;d.tag===5&&f!==null&&(d=f,s?(h=Ba(n,o),h!=null&&c.unshift(qa(n,h,d))):s||(h=Ba(n,o),h!=null&&c.push(qa(n,h,d)))),n=n.return}c.length!==0&&t.push({event:e,listeners:c})}var Fb=/\r\n?/g,Ub=/\u0000|\uFFFD/g;function Og(t){return(typeof t=="string"?t:""+t).replace(Fb,`
`).replace(Ub,"")}function sc(t,e,n){if(e=Og(e),Og(t)!==e&&n)throw Error(ee(425))}function Hc(){}var Mh=null,Ah=null;function Dh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zh=typeof setTimeout=="function"?setTimeout:void 0,Wb=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,Hb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(t){return Ng.resolve(null).then(t).catch(Vb)}:zh;function Vb(t){setTimeout(function(){throw t})}function zd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ua(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ua(e)}function _i(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zo=Math.random().toString(36).slice(2),yr="__reactFiber$"+zo,Ga="__reactProps$"+zo,zr="__reactContainer$"+zo,Bh="__reactEvents$"+zo,qb="__reactListeners$"+zo,Gb="__reactHandles$"+zo;function Yi(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zr]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rg(t);t!==null;){if(n=t[yr])return n;t=Rg(t)}return e}t=n,n=t.parentNode}return null}function vl(t){return t=t[yr]||t[zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function _u(t){return t[Ga]||null}var $h=[],Xs=-1;function Li(t){return{current:t}}function it(t){0>Xs||(t.current=$h[Xs],$h[Xs]=null,Xs--)}function tt(t,e){Xs++,$h[Xs]=t.current,t.current=e}var Ei={},Zt=Li(Ei),pn=Li(!1),ps=Ei;function Po(t,e){var n=t.type.contextTypes;if(!n)return Ei;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mn(t){return t=t.childContextTypes,t!=null}function Vc(){it(pn),it(Zt)}function Ig(t,e,n){if(Zt.current!==Ei)throw Error(ee(168));tt(Zt,e),tt(pn,n)}function Ky(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ee(108,O2(t)||"Unknown",s));return ut({},n,r)}function qc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ei,ps=Zt.current,tt(Zt,t),tt(pn,pn.current),!0}function Mg(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=Ky(t,e,ps),r.__reactInternalMemoizedMergedChildContext=t,it(pn),it(Zt),tt(Zt,t)):it(pn),tt(pn,n)}var Lr=null,xu=!1,Bd=!1;function Yy(t){Lr===null?Lr=[t]:Lr.push(t)}function Zb(t){xu=!0,Yy(t)}function Oi(){if(!Bd&&Lr!==null){Bd=!0;var t=0,e=Ke;try{var n=Lr;for(Ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lr=null,xu=!1}catch(s){throw Lr!==null&&(Lr=Lr.slice(t+1)),wy(np,Oi),s}finally{Ke=e,Bd=!1}}return null}var eo=[],to=0,Gc=null,Zc=0,Rn=[],In=0,ms=null,Ir=1,Mr="";function Hi(t,e){eo[to++]=Zc,eo[to++]=Gc,Gc=t,Zc=e}function Jy(t,e,n){Rn[In++]=Ir,Rn[In++]=Mr,Rn[In++]=ms,ms=t;var r=Ir;t=Mr;var s=32-er(r)-1;r&=~(1<<s),n+=1;var o=32-er(e)+s;if(30<o){var c=s-s%5;o=(r&(1<<c)-1).toString(32),r>>=c,s-=c,Ir=1<<32-er(e)+s|n<<s|r,Mr=o+t}else Ir=1<<o|n<<s|r,Mr=t}function dp(t){t.return!==null&&(Hi(t,1),Jy(t,1,0))}function hp(t){for(;t===Gc;)Gc=eo[--to],eo[to]=null,Zc=eo[--to],eo[to]=null;for(;t===ms;)ms=Rn[--In],Rn[In]=null,Mr=Rn[--In],Rn[In]=null,Ir=Rn[--In],Rn[In]=null}var kn=null,jn=null,ot=!1,Xn=null;function Qy(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ag(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,jn=_i(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ms!==null?{id:Ir,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,jn=null,!0):!1;default:return!1}}function Fh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uh(t){if(ot){var e=jn;if(e){var n=e;if(!Ag(t,e)){if(Fh(t))throw Error(ee(418));e=_i(n.nextSibling);var r=kn;e&&Ag(t,e)?Qy(r,n):(t.flags=t.flags&-4097|2,ot=!1,kn=t)}}else{if(Fh(t))throw Error(ee(418));t.flags=t.flags&-4097|2,ot=!1,kn=t}}}function Dg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function oc(t){if(t!==kn)return!1;if(!ot)return Dg(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dh(t.type,t.memoizedProps)),e&&(e=jn)){if(Fh(t))throw Xy(),Error(ee(418));for(;e;)Qy(t,e),e=_i(e.nextSibling)}if(Dg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jn=_i(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jn=null}}else jn=kn?_i(t.stateNode.nextSibling):null;return!0}function Xy(){for(var t=jn;t;)t=_i(t.nextSibling)}function Eo(){jn=kn=null,ot=!1}function fp(t){Xn===null?Xn=[t]:Xn.push(t)}var Kb=Ur.ReactCurrentBatchConfig;function ua(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var d=s.refs;c===null?delete d[o]:d[o]=c},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function ac(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zg(t){var e=t._init;return e(t._payload)}function e_(t){function e(y,j){if(t){var k=y.deletions;k===null?(y.deletions=[j],y.flags|=16):k.push(j)}}function n(y,j){if(!t)return null;for(;j!==null;)e(y,j),j=j.sibling;return null}function r(y,j){for(y=new Map;j!==null;)j.key!==null?y.set(j.key,j):y.set(j.index,j),j=j.sibling;return y}function s(y,j){return y=ji(y,j),y.index=0,y.sibling=null,y}function o(y,j,k){return y.index=k,t?(k=y.alternate,k!==null?(k=k.index,k<j?(y.flags|=2,j):k):(y.flags|=2,j)):(y.flags|=1048576,j)}function c(y){return t&&y.alternate===null&&(y.flags|=2),y}function d(y,j,k,O){return j===null||j.tag!==6?(j=qd(k,y.mode,O),j.return=y,j):(j=s(j,k),j.return=y,j)}function h(y,j,k,O){var D=k.type;return D===Zs?m(y,j,k.props.children,O,k.key):j!==null&&(j.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Xr&&zg(D)===j.type)?(O=s(j,k.props),O.ref=ua(y,j,k),O.return=y,O):(O=Tc(k.type,k.key,k.props,null,y.mode,O),O.ref=ua(y,j,k),O.return=y,O)}function f(y,j,k,O){return j===null||j.tag!==4||j.stateNode.containerInfo!==k.containerInfo||j.stateNode.implementation!==k.implementation?(j=Gd(k,y.mode,O),j.return=y,j):(j=s(j,k.children||[]),j.return=y,j)}function m(y,j,k,O,D){return j===null||j.tag!==7?(j=hs(k,y.mode,O,D),j.return=y,j):(j=s(j,k),j.return=y,j)}function g(y,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return j=qd(""+j,y.mode,k),j.return=y,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Yl:return k=Tc(j.type,j.key,j.props,null,y.mode,k),k.ref=ua(y,null,j),k.return=y,k;case Gs:return j=Gd(j,y.mode,k),j.return=y,j;case Xr:var O=j._init;return g(y,O(j._payload),k)}if(xa(j)||sa(j))return j=hs(j,y.mode,k,null),j.return=y,j;ac(y,j)}return null}function x(y,j,k,O){var D=j!==null?j.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return D!==null?null:d(y,j,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Yl:return k.key===D?h(y,j,k,O):null;case Gs:return k.key===D?f(y,j,k,O):null;case Xr:return D=k._init,x(y,j,D(k._payload),O)}if(xa(k)||sa(k))return D!==null?null:m(y,j,k,O,null);ac(y,k)}return null}function P(y,j,k,O,D){if(typeof O=="string"&&O!==""||typeof O=="number")return y=y.get(k)||null,d(j,y,""+O,D);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Yl:return y=y.get(O.key===null?k:O.key)||null,h(j,y,O,D);case Gs:return y=y.get(O.key===null?k:O.key)||null,f(j,y,O,D);case Xr:var T=O._init;return P(y,j,k,T(O._payload),D)}if(xa(O)||sa(O))return y=y.get(k)||null,m(j,y,O,D,null);ac(j,O)}return null}function b(y,j,k,O){for(var D=null,T=null,$=j,N=j=0,I=null;$!==null&&N<k.length;N++){$.index>N?(I=$,$=null):I=$.sibling;var R=x(y,$,k[N],O);if(R===null){$===null&&($=I);break}t&&$&&R.alternate===null&&e(y,$),j=o(R,j,N),T===null?D=R:T.sibling=R,T=R,$=I}if(N===k.length)return n(y,$),ot&&Hi(y,N),D;if($===null){for(;N<k.length;N++)$=g(y,k[N],O),$!==null&&(j=o($,j,N),T===null?D=$:T.sibling=$,T=$);return ot&&Hi(y,N),D}for($=r(y,$);N<k.length;N++)I=P($,y,N,k[N],O),I!==null&&(t&&I.alternate!==null&&$.delete(I.key===null?N:I.key),j=o(I,j,N),T===null?D=I:T.sibling=I,T=I);return t&&$.forEach(function(A){return e(y,A)}),ot&&Hi(y,N),D}function _(y,j,k,O){var D=sa(k);if(typeof D!="function")throw Error(ee(150));if(k=D.call(k),k==null)throw Error(ee(151));for(var T=D=null,$=j,N=j=0,I=null,R=k.next();$!==null&&!R.done;N++,R=k.next()){$.index>N?(I=$,$=null):I=$.sibling;var A=x(y,$,R.value,O);if(A===null){$===null&&($=I);break}t&&$&&A.alternate===null&&e(y,$),j=o(A,j,N),T===null?D=A:T.sibling=A,T=A,$=I}if(R.done)return n(y,$),ot&&Hi(y,N),D;if($===null){for(;!R.done;N++,R=k.next())R=g(y,R.value,O),R!==null&&(j=o(R,j,N),T===null?D=R:T.sibling=R,T=R);return ot&&Hi(y,N),D}for($=r(y,$);!R.done;N++,R=k.next())R=P($,y,N,R.value,O),R!==null&&(t&&R.alternate!==null&&$.delete(R.key===null?N:R.key),j=o(R,j,N),T===null?D=R:T.sibling=R,T=R);return t&&$.forEach(function(G){return e(y,G)}),ot&&Hi(y,N),D}function S(y,j,k,O){if(typeof k=="object"&&k!==null&&k.type===Zs&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Yl:e:{for(var D=k.key,T=j;T!==null;){if(T.key===D){if(D=k.type,D===Zs){if(T.tag===7){n(y,T.sibling),j=s(T,k.props.children),j.return=y,y=j;break e}}else if(T.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Xr&&zg(D)===T.type){n(y,T.sibling),j=s(T,k.props),j.ref=ua(y,T,k),j.return=y,y=j;break e}n(y,T);break}else e(y,T);T=T.sibling}k.type===Zs?(j=hs(k.props.children,y.mode,O,k.key),j.return=y,y=j):(O=Tc(k.type,k.key,k.props,null,y.mode,O),O.ref=ua(y,j,k),O.return=y,y=O)}return c(y);case Gs:e:{for(T=k.key;j!==null;){if(j.key===T)if(j.tag===4&&j.stateNode.containerInfo===k.containerInfo&&j.stateNode.implementation===k.implementation){n(y,j.sibling),j=s(j,k.children||[]),j.return=y,y=j;break e}else{n(y,j);break}else e(y,j);j=j.sibling}j=Gd(k,y.mode,O),j.return=y,y=j}return c(y);case Xr:return T=k._init,S(y,j,T(k._payload),O)}if(xa(k))return b(y,j,k,O);if(sa(k))return _(y,j,k,O);ac(y,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,j!==null&&j.tag===6?(n(y,j.sibling),j=s(j,k),j.return=y,y=j):(n(y,j),j=qd(k,y.mode,O),j.return=y,y=j),c(y)):n(y,j)}return S}var To=e_(!0),t_=e_(!1),Kc=Li(null),Yc=null,no=null,pp=null;function mp(){pp=no=Yc=null}function gp(t){var e=Kc.current;it(Kc),t._currentValue=e}function Wh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function co(t,e){Yc=t,pp=no=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(pp!==t)if(t={context:t,memoizedValue:e,next:null},no===null){if(Yc===null)throw Error(ee(308));no=t,Yc.dependencies={lanes:0,firstContext:t}}else no=no.next=t;return e}var Ji=null;function vp(t){Ji===null?Ji=[t]:Ji.push(t)}function n_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Br(t,r)}function Br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ei=!1;function yp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Br(t,n)}return s=r.interleaved,s===null?(e.next=e,vp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Br(t,n)}function jc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rp(t,n)}}function Bg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=c:o=o.next=c,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jc(t,e,n,r){var s=t.updateQueue;ei=!1;var o=s.firstBaseUpdate,c=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var h=d,f=h.next;h.next=null,c===null?o=f:c.next=f,c=h;var m=t.alternate;m!==null&&(m=m.updateQueue,d=m.lastBaseUpdate,d!==c&&(d===null?m.firstBaseUpdate=f:d.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=s.baseState;c=0,m=f=h=null,d=o;do{var x=d.lane,P=d.eventTime;if((r&x)===x){m!==null&&(m=m.next={eventTime:P,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var b=t,_=d;switch(x=e,P=n,_.tag){case 1:if(b=_.payload,typeof b=="function"){g=b.call(P,g,x);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=_.payload,x=typeof b=="function"?b.call(P,g,x):b,x==null)break e;g=ut({},g,x);break e;case 2:ei=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[d]:x.push(d))}else P={eventTime:P,lane:x,tag:d.tag,payload:d.payload,callback:d.callback,next:null},m===null?(f=m=P,h=g):m=m.next=P,c|=x;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;x=d,d=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(m===null&&(h=g),s.baseState=h,s.firstBaseUpdate=f,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do c|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);vs|=c,t.lanes=c,t.memoizedState=g}}function $g(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ee(191,s));s.call(r)}}}var yl={},wr=Li(yl),Za=Li(yl),Ka=Li(yl);function Qi(t){if(t===yl)throw Error(ee(174));return t}function _p(t,e){switch(tt(Ka,e),tt(Za,t),tt(wr,yl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jh(e,t)}it(wr),tt(wr,e)}function Lo(){it(wr),it(Za),it(Ka)}function i_(t){Qi(Ka.current);var e=Qi(wr.current),n=jh(e,t.type);e!==n&&(tt(Za,t),tt(wr,n))}function xp(t){Za.current===t&&(it(wr),it(Za))}var lt=Li(0);function Qc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $d=[];function wp(){for(var t=0;t<$d.length;t++)$d[t]._workInProgressVersionPrimary=null;$d.length=0}var kc=Ur.ReactCurrentDispatcher,Fd=Ur.ReactCurrentBatchConfig,gs=0,ct=null,Et=null,Rt=null,Xc=!1,La=!1,Ya=0,Yb=0;function Ht(){throw Error(ee(321))}function bp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function jp(t,e,n,r,s,o){if(gs=o,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kc.current=t===null||t.memoizedState===null?ej:tj,t=n(r,s),La){o=0;do{if(La=!1,Ya=0,25<=o)throw Error(ee(301));o+=1,Rt=Et=null,e.updateQueue=null,kc.current=nj,t=n(r,s)}while(La)}if(kc.current=eu,e=Et!==null&&Et.next!==null,gs=0,Rt=Et=ct=null,Xc=!1,e)throw Error(ee(300));return t}function kp(){var t=Ya!==0;return Ya=0,t}function fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?ct.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function zn(){if(Et===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=Rt===null?ct.memoizedState:Rt.next;if(e!==null)Rt=e,Et=t;else{if(t===null)throw Error(ee(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?ct.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Ja(t,e){return typeof e=="function"?e(t):e}function Ud(t){var e=zn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=Et,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var c=s.next;s.next=o.next,o.next=c}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var d=c=null,h=null,f=o;do{var m=f.lane;if((gs&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(d=h=g,c=r):h=h.next=g,ct.lanes|=m,vs|=m}f=f.next}while(f!==null&&f!==o);h===null?c=r:h.next=d,nr(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=c,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,ct.lanes|=o,vs|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wd(t){var e=zn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var c=s=s.next;do o=t(o,c.action),c=c.next;while(c!==s);nr(o,e.memoizedState)||(fn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function s_(){}function o_(t,e){var n=ct,r=zn(),s=e(),o=!nr(r.memoizedState,s);if(o&&(r.memoizedState=s,fn=!0),r=r.queue,Sp(c_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Qa(9,l_.bind(null,n,r,s,e),void 0,null),It===null)throw Error(ee(349));gs&30||a_(n,e,s)}return s}function a_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function l_(t,e,n,r){e.value=n,e.getSnapshot=r,u_(e)&&d_(t)}function c_(t,e,n){return n(function(){u_(e)&&d_(t)})}function u_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function d_(t){var e=Br(t,1);e!==null&&tr(e,t,1,-1)}function Fg(t){var e=fr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:t},e.queue=t,t=t.dispatch=Xb.bind(null,ct,t),[e.memoizedState,t]}function Qa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function h_(){return zn().memoizedState}function Sc(t,e,n,r){var s=fr();ct.flags|=t,s.memoizedState=Qa(1|e,n,void 0,r===void 0?null:r)}function wu(t,e,n,r){var s=zn();r=r===void 0?null:r;var o=void 0;if(Et!==null){var c=Et.memoizedState;if(o=c.destroy,r!==null&&bp(r,c.deps)){s.memoizedState=Qa(e,n,o,r);return}}ct.flags|=t,s.memoizedState=Qa(1|e,n,o,r)}function Ug(t,e){return Sc(8390656,8,t,e)}function Sp(t,e){return wu(2048,8,t,e)}function f_(t,e){return wu(4,2,t,e)}function p_(t,e){return wu(4,4,t,e)}function m_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function g_(t,e,n){return n=n!=null?n.concat([t]):null,wu(4,4,m_.bind(null,e,t),n)}function Cp(){}function v_(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function y_(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function __(t,e,n){return gs&21?(nr(n,e)||(n=ky(),ct.lanes|=n,vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function Jb(t,e){var n=Ke;Ke=n!==0&&4>n?n:4,t(!0);var r=Fd.transition;Fd.transition={};try{t(!1),e()}finally{Ke=n,Fd.transition=r}}function x_(){return zn().memoizedState}function Qb(t,e,n){var r=bi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},w_(t))b_(e,n);else if(n=n_(t,e,n,r),n!==null){var s=nn();tr(n,t,r,s),j_(n,e,r)}}function Xb(t,e,n){var r=bi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(w_(t))b_(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,d=o(c,n);if(s.hasEagerState=!0,s.eagerState=d,nr(d,c)){var h=e.interleaved;h===null?(s.next=s,vp(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}n=n_(t,e,s,r),n!==null&&(s=nn(),tr(n,t,r,s),j_(n,e,r))}}function w_(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function b_(t,e){La=Xc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function j_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rp(t,n)}}var eu={readContext:Dn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},ej={readContext:Dn,useCallback:function(t,e){return fr().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:Ug,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sc(4194308,4,m_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sc(4,2,t,e)},useMemo:function(t,e){var n=fr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Qb.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=fr();return t={current:t},e.memoizedState=t},useState:Fg,useDebugValue:Cp,useDeferredValue:function(t){return fr().memoizedState=t},useTransition:function(){var t=Fg(!1),e=t[0];return t=Jb.bind(null,t[1]),fr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,s=fr();if(ot){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),It===null)throw Error(ee(349));gs&30||a_(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,Ug(c_.bind(null,r,o,t),[t]),r.flags|=2048,Qa(9,l_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=fr(),e=It.identifierPrefix;if(ot){var n=Mr,r=Ir;n=(r&~(1<<32-er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ya++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Yb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tj={readContext:Dn,useCallback:v_,useContext:Dn,useEffect:Sp,useImperativeHandle:g_,useInsertionEffect:f_,useLayoutEffect:p_,useMemo:y_,useReducer:Ud,useRef:h_,useState:function(){return Ud(Ja)},useDebugValue:Cp,useDeferredValue:function(t){var e=zn();return __(e,Et.memoizedState,t)},useTransition:function(){var t=Ud(Ja)[0],e=zn().memoizedState;return[t,e]},useMutableSource:s_,useSyncExternalStore:o_,useId:x_,unstable_isNewReconciler:!1},nj={readContext:Dn,useCallback:v_,useContext:Dn,useEffect:Sp,useImperativeHandle:g_,useInsertionEffect:f_,useLayoutEffect:p_,useMemo:y_,useReducer:Wd,useRef:h_,useState:function(){return Wd(Ja)},useDebugValue:Cp,useDeferredValue:function(t){var e=zn();return Et===null?e.memoizedState=t:__(e,Et.memoizedState,t)},useTransition:function(){var t=Wd(Ja)[0],e=zn().memoizedState;return[t,e]},useMutableSource:s_,useSyncExternalStore:o_,useId:x_,unstable_isNewReconciler:!1};function Zn(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bu={isMounted:function(t){return(t=t._reactInternals)?bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),s=bi(t),o=Ar(r,s);o.payload=e,n!=null&&(o.callback=n),e=xi(t,o,s),e!==null&&(tr(e,t,s,r),jc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),s=bi(t),o=Ar(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=xi(t,o,s),e!==null&&(tr(e,t,s,r),jc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=bi(t),s=Ar(n,r);s.tag=2,e!=null&&(s.callback=e),e=xi(t,s,r),e!==null&&(tr(e,t,r,n),jc(e,t,r))}};function Wg(t,e,n,r,s,o,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,c):e.prototype&&e.prototype.isPureReactComponent?!Ha(n,r)||!Ha(s,o):!0}function k_(t,e,n){var r=!1,s=Ei,o=e.contextType;return typeof o=="object"&&o!==null?o=Dn(o):(s=mn(e)?ps:Zt.current,r=e.contextTypes,o=(r=r!=null)?Po(t,s):Ei),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function Hg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bu.enqueueReplaceState(e,e.state,null)}function Vh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},yp(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Dn(o):(o=mn(e)?ps:Zt.current,s.context=Po(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Hh(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bu.enqueueReplaceState(s,s.state,null),Jc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Oo(t,e){try{var n="",r=e;do n+=L2(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Hd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rj=typeof WeakMap=="function"?WeakMap:Map;function S_(t,e,n){n=Ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nu||(nu=!0,nf=r),qh(t,e)},n}function C_(t,e,n){n=Ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){qh(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){qh(t,e),typeof r!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),n}function Vg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=vj.bind(null,t,e,n),e.then(t,t))}function qg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ar(-1,1),e.tag=2,xi(n,e,1))),n.lanes|=1),t)}var ij=Ur.ReactCurrentOwner,fn=!1;function tn(t,e,n,r){e.child=t===null?t_(e,null,n,r):To(e,t.child,n,r)}function Zg(t,e,n,r,s){n=n.render;var o=e.ref;return co(e,s),r=jp(t,e,n,r,o,s),n=kp(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$r(t,e,s)):(ot&&n&&dp(e),e.flags|=1,tn(t,e,r,s),e.child)}function Kg(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!Ip(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,P_(t,e,o,r,s)):(t=Tc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var c=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ha,n(c,r)&&t.ref===e.ref)return $r(t,e,s)}return e.flags|=1,t=ji(o,r),t.ref=e.ref,t.return=e,e.child=t}function P_(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Ha(o,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,$r(t,e,s)}return Gh(t,e,n,r,s)}function E_(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(io,wn),wn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tt(io,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,tt(io,wn),wn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,tt(io,wn),wn|=r;return tn(t,e,s,n),e.child}function T_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gh(t,e,n,r,s){var o=mn(n)?ps:Zt.current;return o=Po(e,o),co(e,s),n=jp(t,e,n,r,o,s),r=kp(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$r(t,e,s)):(ot&&r&&dp(e),e.flags|=1,tn(t,e,n,s),e.child)}function Yg(t,e,n,r,s){if(mn(n)){var o=!0;qc(e)}else o=!1;if(co(e,s),e.stateNode===null)Cc(t,e),k_(e,n,r),Vh(e,n,r,s),r=!0;else if(t===null){var c=e.stateNode,d=e.memoizedProps;c.props=d;var h=c.context,f=n.contextType;typeof f=="object"&&f!==null?f=Dn(f):(f=mn(n)?ps:Zt.current,f=Po(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof c.getSnapshotBeforeUpdate=="function";g||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==r||h!==f)&&Hg(e,c,r,f),ei=!1;var x=e.memoizedState;c.state=x,Jc(e,r,c,s),h=e.memoizedState,d!==r||x!==h||pn.current||ei?(typeof m=="function"&&(Hh(e,n,m,r),h=e.memoizedState),(d=ei||Wg(e,n,d,r,x,h,f))?(g||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),c.props=r,c.state=h,c.context=f,r=d):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{c=e.stateNode,r_(t,e),d=e.memoizedProps,f=e.type===e.elementType?d:Zn(e.type,d),c.props=f,g=e.pendingProps,x=c.context,h=n.contextType,typeof h=="object"&&h!==null?h=Dn(h):(h=mn(n)?ps:Zt.current,h=Po(e,h));var P=n.getDerivedStateFromProps;(m=typeof P=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==g||x!==h)&&Hg(e,c,r,h),ei=!1,x=e.memoizedState,c.state=x,Jc(e,r,c,s);var b=e.memoizedState;d!==g||x!==b||pn.current||ei?(typeof P=="function"&&(Hh(e,n,P,r),b=e.memoizedState),(f=ei||Wg(e,n,f,r,x,b,h)||!1)?(m||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,b,h),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,b,h)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),c.props=r,c.state=b,c.context=h,r=f):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return Zh(t,e,n,r,o,s)}function Zh(t,e,n,r,s,o){T_(t,e);var c=(e.flags&128)!==0;if(!r&&!c)return s&&Mg(e,n,!1),$r(t,e,o);r=e.stateNode,ij.current=e;var d=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&c?(e.child=To(e,t.child,null,o),e.child=To(e,null,d,o)):tn(t,e,d,o),e.memoizedState=r.state,s&&Mg(e,n,!0),e.child}function L_(t){var e=t.stateNode;e.pendingContext?Ig(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ig(t,e.context,!1),_p(t,e.containerInfo)}function Jg(t,e,n,r,s){return Eo(),fp(s),e.flags|=256,tn(t,e,n,r),e.child}var Kh={dehydrated:null,treeContext:null,retryLane:0};function Yh(t){return{baseLanes:t,cachePool:null,transitions:null}}function O_(t,e,n){var r=e.pendingProps,s=lt.current,o=!1,c=(e.flags&128)!==0,d;if((d=c)||(d=t!==null&&t.memoizedState===null?!1:(s&2)!==0),d?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),tt(lt,s&1),t===null)return Uh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=r.children,t=r.fallback,o?(r=e.mode,o=e.child,c={mode:"hidden",children:c},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=Su(c,r,0,null),t=hs(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Yh(n),e.memoizedState=Kh,t):Pp(e,c));if(s=t.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return sj(t,e,c,r,d,s,n);if(o){o=r.fallback,c=e.mode,s=t.child,d=s.sibling;var h={mode:"hidden",children:r.children};return!(c&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=ji(s,h),r.subtreeFlags=s.subtreeFlags&14680064),d!==null?o=ji(d,o):(o=hs(o,c,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,c=t.child.memoizedState,c=c===null?Yh(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=t.childLanes&~n,e.memoizedState=Kh,r}return o=t.child,t=o.sibling,r=ji(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pp(t,e){return e=Su({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lc(t,e,n,r){return r!==null&&fp(r),To(e,t.child,null,n),t=Pp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sj(t,e,n,r,s,o,c){if(n)return e.flags&256?(e.flags&=-257,r=Hd(Error(ee(422))),lc(t,e,c,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=Su({mode:"visible",children:r.children},s,0,null),o=hs(o,s,c,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&To(e,t.child,null,c),e.child.memoizedState=Yh(c),e.memoizedState=Kh,o);if(!(e.mode&1))return lc(t,e,c,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var d=r.dgst;return r=d,o=Error(ee(419)),r=Hd(o,r,void 0),lc(t,e,c,r)}if(d=(c&t.childLanes)!==0,fn||d){if(r=It,r!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|c)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Br(t,s),tr(r,t,s,-1))}return Rp(),r=Hd(Error(ee(421))),lc(t,e,c,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yj.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,jn=_i(s.nextSibling),kn=e,ot=!0,Xn=null,t!==null&&(Rn[In++]=Ir,Rn[In++]=Mr,Rn[In++]=ms,Ir=t.id,Mr=t.overflow,ms=e),e=Pp(e,r.children),e.flags|=4096,e)}function Qg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wh(t.return,e,n)}function Vd(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function N_(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(tn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qg(t,n,e);else if(t.tag===19)Qg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(tt(lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Qc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vd(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vd(e,!0,n,null,o);break;case"together":Vd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=ji(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ji(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oj(t,e,n){switch(e.tag){case 3:L_(e),Eo();break;case 5:i_(e);break;case 1:mn(e.type)&&qc(e);break;case 4:_p(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;tt(Kc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(tt(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?O_(t,e,n):(tt(lt,lt.current&1),t=$r(t,e,n),t!==null?t.sibling:null);tt(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return N_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),tt(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,E_(t,e,n)}return $r(t,e,n)}var R_,Jh,I_,M_;R_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jh=function(){};I_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Qi(wr.current);var o=null;switch(n){case"input":s=_h(t,s),r=_h(t,r),o=[];break;case"select":s=ut({},s,{value:void 0}),r=ut({},r,{value:void 0}),o=[];break;case"textarea":s=bh(t,s),r=bh(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hc)}kh(n,r);var c;n=null;for(f in s)if(!r.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var d=s[f];for(c in d)d.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Da.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var h=r[f];if(d=s!=null?s[f]:void 0,r.hasOwnProperty(f)&&h!==d&&(h!=null||d!=null))if(f==="style")if(d){for(c in d)!d.hasOwnProperty(c)||h&&h.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in h)h.hasOwnProperty(c)&&d[c]!==h[c]&&(n||(n={}),n[c]=h[c])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Da.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&rt("scroll",t),o||d===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};M_=function(t,e,n,r){n!==r&&(e.flags|=4)};function da(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aj(t,e,n){var r=e.pendingProps;switch(hp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return mn(e.type)&&Vc(),Vt(e),null;case 3:return r=e.stateNode,Lo(),it(pn),it(Zt),wp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(oc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(of(Xn),Xn=null))),Jh(t,e),Vt(e),null;case 5:xp(e);var s=Qi(Ka.current);if(n=e.type,t!==null&&e.stateNode!=null)I_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return Vt(e),null}if(t=Qi(wr.current),oc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[yr]=e,r[Ga]=o,t=(e.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(s=0;s<ba.length;s++)rt(ba[s],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":ag(r,o),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},rt("invalid",r);break;case"textarea":cg(r,o),rt("invalid",r)}kh(n,o),s=null;for(var c in o)if(o.hasOwnProperty(c)){var d=o[c];c==="children"?typeof d=="string"?r.textContent!==d&&(o.suppressHydrationWarning!==!0&&sc(r.textContent,d,t),s=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&sc(r.textContent,d,t),s=["children",""+d]):Da.hasOwnProperty(c)&&d!=null&&c==="onScroll"&&rt("scroll",r)}switch(n){case"input":Jl(r),lg(r,o,!0);break;case"textarea":Jl(r),ug(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Hc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),n==="select"&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[yr]=e,t[Ga]=r,R_(t,e,!1,!1),e.stateNode=t;e:{switch(c=Sh(n,r),n){case"dialog":rt("cancel",t),rt("close",t),s=r;break;case"iframe":case"object":case"embed":rt("load",t),s=r;break;case"video":case"audio":for(s=0;s<ba.length;s++)rt(ba[s],t);s=r;break;case"source":rt("error",t),s=r;break;case"img":case"image":case"link":rt("error",t),rt("load",t),s=r;break;case"details":rt("toggle",t),s=r;break;case"input":ag(t,r),s=_h(t,r),rt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ut({},r,{value:void 0}),rt("invalid",t);break;case"textarea":cg(t,r),s=bh(t,r),rt("invalid",t);break;default:s=r}kh(n,s),d=s;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];o==="style"?hy(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&uy(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&za(t,h):typeof h=="number"&&za(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Da.hasOwnProperty(o)?h!=null&&o==="onScroll"&&rt("scroll",t):h!=null&&Jf(t,o,h,c))}switch(n){case"input":Jl(t),lg(t,r,!1);break;case"textarea":Jl(t),ug(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?so(t,!!r.multiple,o,!1):r.defaultValue!=null&&so(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)M_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Qi(Ka.current),Qi(wr.current),oc(e)){if(r=e.stateNode,n=e.memoizedProps,r[yr]=e,(o=r.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:sc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return Vt(e),null;case 13:if(it(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&jn!==null&&e.mode&1&&!(e.flags&128))Xy(),Eo(),e.flags|=98560,o=!1;else if(o=oc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[yr]=e}else Eo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),o=!1}else Xn!==null&&(of(Xn),Xn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?Tt===0&&(Tt=3):Rp())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Lo(),Jh(t,e),t===null&&Va(e.stateNode.containerInfo),Vt(e),null;case 10:return gp(e.type._context),Vt(e),null;case 17:return mn(e.type)&&Vc(),Vt(e),null;case 19:if(it(lt),o=e.memoizedState,o===null)return Vt(e),null;if(r=(e.flags&128)!==0,c=o.rendering,c===null)if(r)da(o,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=Qc(t),c!==null){for(e.flags|=128,da(o,!1),r=c.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,t=c.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return tt(lt,lt.current&1|2),e.child}t=t.sibling}o.tail!==null&&vt()>No&&(e.flags|=128,r=!0,da(o,!1),e.lanes=4194304)}else{if(!r)if(t=Qc(c),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),da(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!ot)return Vt(e),null}else 2*vt()-o.renderingStartTime>No&&n!==1073741824&&(e.flags|=128,r=!0,da(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(n=o.last,n!==null?n.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=vt(),e.sibling=null,n=lt.current,tt(lt,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return Np(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function lj(t,e){switch(hp(e),e.tag){case 1:return mn(e.type)&&Vc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Lo(),it(pn),it(Zt),wp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xp(e),null;case 13:if(it(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Eo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(lt),null;case 4:return Lo(),null;case 10:return gp(e.type._context),null;case 22:case 23:return Np(),null;case 24:return null;default:return null}}var cc=!1,qt=!1,cj=typeof WeakSet=="function"?WeakSet:Set,ue=null;function ro(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function Qh(t,e,n){try{n()}catch(r){ht(t,e,r)}}var Xg=!1;function uj(t,e){if(Mh=Fc,t=$y(),up(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var c=0,d=-1,h=-1,f=0,m=0,g=t,x=null;t:for(;;){for(var P;g!==n||s!==0&&g.nodeType!==3||(d=c+s),g!==o||r!==0&&g.nodeType!==3||(h=c+r),g.nodeType===3&&(c+=g.nodeValue.length),(P=g.firstChild)!==null;)x=g,g=P;for(;;){if(g===t)break t;if(x===n&&++f===s&&(d=c),x===o&&++m===r&&(h=c),(P=g.nextSibling)!==null)break;g=x,x=g.parentNode}g=P}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ah={focusedElem:t,selectionRange:n},Fc=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var _=b.memoizedProps,S=b.memoizedState,y=e.stateNode,j=y.getSnapshotBeforeUpdate(e.elementType===e.type?_:Zn(e.type,_),S);y.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(O){ht(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return b=Xg,Xg=!1,b}function Oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Qh(e,n,o)}s=s.next}while(s!==r)}}function ju(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function A_(t){var e=t.alternate;e!==null&&(t.alternate=null,A_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[Ga],delete e[Bh],delete e[qb],delete e[Gb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function D_(t){return t.tag===5||t.tag===3||t.tag===4}function ev(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||D_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ef(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hc));else if(r!==4&&(t=t.child,t!==null))for(ef(t,e,n),t=t.sibling;t!==null;)ef(t,e,n),t=t.sibling}function tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tf(t,e,n),t=t.sibling;t!==null;)tf(t,e,n),t=t.sibling}var zt=null,Jn=!1;function Zr(t,e,n){for(n=n.child;n!==null;)z_(t,e,n),n=n.sibling}function z_(t,e,n){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(mu,n)}catch{}switch(n.tag){case 5:qt||ro(n,e);case 6:var r=zt,s=Jn;zt=null,Zr(t,e,n),zt=r,Jn=s,zt!==null&&(Jn?(t=zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zt.removeChild(n.stateNode));break;case 18:zt!==null&&(Jn?(t=zt,n=n.stateNode,t.nodeType===8?zd(t.parentNode,n):t.nodeType===1&&zd(t,n),Ua(t)):zd(zt,n.stateNode));break;case 4:r=zt,s=Jn,zt=n.stateNode.containerInfo,Jn=!0,Zr(t,e,n),zt=r,Jn=s;break;case 0:case 11:case 14:case 15:if(!qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&Qh(n,e,c),s=s.next}while(s!==r)}Zr(t,e,n);break;case 1:if(!qt&&(ro(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){ht(n,e,d)}Zr(t,e,n);break;case 21:Zr(t,e,n);break;case 22:n.mode&1?(qt=(r=qt)||n.memoizedState!==null,Zr(t,e,n),qt=r):Zr(t,e,n);break;default:Zr(t,e,n)}}function tv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cj),e.forEach(function(r){var s=_j.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,c=e,d=c;e:for(;d!==null;){switch(d.tag){case 5:zt=d.stateNode,Jn=!1;break e;case 3:zt=d.stateNode.containerInfo,Jn=!0;break e;case 4:zt=d.stateNode.containerInfo,Jn=!0;break e}d=d.return}if(zt===null)throw Error(ee(160));z_(o,c,s),zt=null,Jn=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(f){ht(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)B_(e,t),e=e.sibling}function B_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),ur(t),r&4){try{Oa(3,t,t.return),ju(3,t)}catch(_){ht(t,t.return,_)}try{Oa(5,t,t.return)}catch(_){ht(t,t.return,_)}}break;case 1:Hn(e,t),ur(t),r&512&&n!==null&&ro(n,n.return);break;case 5:if(Hn(e,t),ur(t),r&512&&n!==null&&ro(n,n.return),t.flags&32){var s=t.stateNode;try{za(s,"")}catch(_){ht(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,c=n!==null?n.memoizedProps:o,d=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&ay(s,o),Sh(d,c);var f=Sh(d,o);for(c=0;c<h.length;c+=2){var m=h[c],g=h[c+1];m==="style"?hy(s,g):m==="dangerouslySetInnerHTML"?uy(s,g):m==="children"?za(s,g):Jf(s,m,g,f)}switch(d){case"input":xh(s,o);break;case"textarea":ly(s,o);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var P=o.value;P!=null?so(s,!!o.multiple,P,!1):x!==!!o.multiple&&(o.defaultValue!=null?so(s,!!o.multiple,o.defaultValue,!0):so(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ga]=o}catch(_){ht(t,t.return,_)}}break;case 6:if(Hn(e,t),ur(t),r&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(_){ht(t,t.return,_)}}break;case 3:if(Hn(e,t),ur(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ua(e.containerInfo)}catch(_){ht(t,t.return,_)}break;case 4:Hn(e,t),ur(t);break;case 13:Hn(e,t),ur(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Lp=vt())),r&4&&tv(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(qt=(f=qt)||m,Hn(e,t),qt=f):Hn(e,t),ur(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(ue=t,m=t.child;m!==null;){for(g=ue=m;ue!==null;){switch(x=ue,P=x.child,x.tag){case 0:case 11:case 14:case 15:Oa(4,x,x.return);break;case 1:ro(x,x.return);var b=x.stateNode;if(typeof b.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(_){ht(r,n,_)}}break;case 5:ro(x,x.return);break;case 22:if(x.memoizedState!==null){rv(g);continue}}P!==null?(P.return=x,ue=P):rv(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{s=g.stateNode,f?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=g.stateNode,h=g.memoizedProps.style,c=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=dy("display",c))}catch(_){ht(t,t.return,_)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(_){ht(t,t.return,_)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Hn(e,t),ur(t),r&4&&tv(t);break;case 21:break;default:Hn(e,t),ur(t)}}function ur(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(D_(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(za(s,""),r.flags&=-33);var o=ev(t);tf(t,o,s);break;case 3:case 4:var c=r.stateNode.containerInfo,d=ev(t);ef(t,d,c);break;default:throw Error(ee(161))}}catch(h){ht(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dj(t,e,n){ue=t,$_(t)}function $_(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var s=ue,o=s.child;if(s.tag===22&&r){var c=s.memoizedState!==null||cc;if(!c){var d=s.alternate,h=d!==null&&d.memoizedState!==null||qt;d=cc;var f=qt;if(cc=c,(qt=h)&&!f)for(ue=s;ue!==null;)c=ue,h=c.child,c.tag===22&&c.memoizedState!==null?iv(s):h!==null?(h.return=c,ue=h):iv(s);for(;o!==null;)ue=o,$_(o),o=o.sibling;ue=s,cc=d,qt=f}nv(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ue=o):nv(t)}}function nv(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||ju(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!qt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&$g(e,o,r);break;case 3:var c=e.updateQueue;if(c!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$g(e,c,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Ua(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}qt||e.flags&512&&Xh(e)}catch(x){ht(e,e.return,x)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function rv(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function iv(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ju(4,e)}catch(h){ht(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(h){ht(e,s,h)}}var o=e.return;try{Xh(e)}catch(h){ht(e,o,h)}break;case 5:var c=e.return;try{Xh(e)}catch(h){ht(e,c,h)}}}catch(h){ht(e,e.return,h)}if(e===t){ue=null;break}var d=e.sibling;if(d!==null){d.return=e.return,ue=d;break}ue=e.return}}var hj=Math.ceil,tu=Ur.ReactCurrentDispatcher,Ep=Ur.ReactCurrentOwner,An=Ur.ReactCurrentBatchConfig,$e=0,It=null,St=null,$t=0,wn=0,io=Li(0),Tt=0,Xa=null,vs=0,ku=0,Tp=0,Na=null,dn=null,Lp=0,No=1/0,Er=null,nu=!1,nf=null,wi=null,uc=!1,fi=null,ru=0,Ra=0,rf=null,Pc=-1,Ec=0;function nn(){return $e&6?vt():Pc!==-1?Pc:Pc=vt()}function bi(t){return t.mode&1?$e&2&&$t!==0?$t&-$t:Kb.transition!==null?(Ec===0&&(Ec=ky()),Ec):(t=Ke,t!==0||(t=window.event,t=t===void 0?16:Oy(t.type)),t):1}function tr(t,e,n,r){if(50<Ra)throw Ra=0,rf=null,Error(ee(185));ml(t,n,r),(!($e&2)||t!==It)&&(t===It&&(!($e&2)&&(ku|=n),Tt===4&&ni(t,$t)),gn(t,r),n===1&&$e===0&&!(e.mode&1)&&(No=vt()+500,xu&&Oi()))}function gn(t,e){var n=t.callbackNode;K2(t,e);var r=$c(t,t===It?$t:0);if(r===0)n!==null&&fg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fg(n),e===1)t.tag===0?Zb(sv.bind(null,t)):Yy(sv.bind(null,t)),Hb(function(){!($e&6)&&Oi()}),n=null;else{switch(Sy(r)){case 1:n=np;break;case 4:n=by;break;case 16:n=Bc;break;case 536870912:n=jy;break;default:n=Bc}n=Z_(n,F_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F_(t,e){if(Pc=-1,Ec=0,$e&6)throw Error(ee(327));var n=t.callbackNode;if(uo()&&t.callbackNode!==n)return null;var r=$c(t,t===It?$t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=iu(t,r);else{e=r;var s=$e;$e|=2;var o=W_();(It!==t||$t!==e)&&(Er=null,No=vt()+500,ds(t,e));do try{mj();break}catch(d){U_(t,d)}while(!0);mp(),tu.current=o,$e=s,St!==null?e=0:(It=null,$t=0,e=Tt)}if(e!==0){if(e===2&&(s=Lh(t),s!==0&&(r=s,e=sf(t,s))),e===1)throw n=Xa,ds(t,0),ni(t,r),gn(t,vt()),n;if(e===6)ni(t,r);else{if(s=t.current.alternate,!(r&30)&&!fj(s)&&(e=iu(t,r),e===2&&(o=Lh(t),o!==0&&(r=o,e=sf(t,o))),e===1))throw n=Xa,ds(t,0),ni(t,r),gn(t,vt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:Vi(t,dn,Er);break;case 3:if(ni(t,r),(r&130023424)===r&&(e=Lp+500-vt(),10<e)){if($c(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=zh(Vi.bind(null,t,dn,Er),e);break}Vi(t,dn,Er);break;case 4:if(ni(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var c=31-er(r);o=1<<c,c=e[c],c>s&&(s=c),r&=~o}if(r=s,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hj(r/1960))-r,10<r){t.timeoutHandle=zh(Vi.bind(null,t,dn,Er),r);break}Vi(t,dn,Er);break;case 5:Vi(t,dn,Er);break;default:throw Error(ee(329))}}}return gn(t,vt()),t.callbackNode===n?F_.bind(null,t):null}function sf(t,e){var n=Na;return t.current.memoizedState.isDehydrated&&(ds(t,e).flags|=256),t=iu(t,e),t!==2&&(e=dn,dn=n,e!==null&&of(e)),t}function of(t){dn===null?dn=t:dn.push.apply(dn,t)}function fj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!nr(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ni(t,e){for(e&=~Tp,e&=~ku,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),r=1<<n;t[n]=-1,e&=~r}}function sv(t){if($e&6)throw Error(ee(327));uo();var e=$c(t,0);if(!(e&1))return gn(t,vt()),null;var n=iu(t,e);if(t.tag!==0&&n===2){var r=Lh(t);r!==0&&(e=r,n=sf(t,r))}if(n===1)throw n=Xa,ds(t,0),ni(t,e),gn(t,vt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vi(t,dn,Er),gn(t,vt()),null}function Op(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(No=vt()+500,xu&&Oi())}}function ys(t){fi!==null&&fi.tag===0&&!($e&6)&&uo();var e=$e;$e|=1;var n=An.transition,r=Ke;try{if(An.transition=null,Ke=1,t)return t()}finally{Ke=r,An.transition=n,$e=e,!($e&6)&&Oi()}}function Np(){wn=io.current,it(io)}function ds(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Wb(n)),St!==null)for(n=St.return;n!==null;){var r=n;switch(hp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vc();break;case 3:Lo(),it(pn),it(Zt),wp();break;case 5:xp(r);break;case 4:Lo();break;case 13:it(lt);break;case 19:it(lt);break;case 10:gp(r.type._context);break;case 22:case 23:Np()}n=n.return}if(It=t,St=t=ji(t.current,null),$t=wn=e,Tt=0,Xa=null,Tp=ku=vs=0,dn=Na=null,Ji!==null){for(e=0;e<Ji.length;e++)if(n=Ji[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var c=o.next;o.next=s,r.next=c}n.pending=r}Ji=null}return t}function U_(t,e){do{var n=St;try{if(mp(),kc.current=eu,Xc){for(var r=ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xc=!1}if(gs=0,Rt=Et=ct=null,La=!1,Ya=0,Ep.current=null,n===null||n.return===null){Tt=1,Xa=e,St=null;break}e:{var o=t,c=n.return,d=n,h=e;if(e=$t,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=d,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var x=m.alternate;x?(m.updateQueue=x.updateQueue,m.memoizedState=x.memoizedState,m.lanes=x.lanes):(m.updateQueue=null,m.memoizedState=null)}var P=qg(c);if(P!==null){P.flags&=-257,Gg(P,c,d,o,e),P.mode&1&&Vg(o,f,e),e=P,h=f;var b=e.updateQueue;if(b===null){var _=new Set;_.add(h),e.updateQueue=_}else b.add(h);break e}else{if(!(e&1)){Vg(o,f,e),Rp();break e}h=Error(ee(426))}}else if(ot&&d.mode&1){var S=qg(c);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Gg(S,c,d,o,e),fp(Oo(h,d));break e}}o=h=Oo(h,d),Tt!==4&&(Tt=2),Na===null?Na=[o]:Na.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=S_(o,h,e);Bg(o,y);break e;case 1:d=h;var j=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof j.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(wi===null||!wi.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var O=C_(o,d,e);Bg(o,O);break e}}o=o.return}while(o!==null)}V_(n)}catch(D){e=D,St===n&&n!==null&&(St=n=n.return);continue}break}while(!0)}function W_(){var t=tu.current;return tu.current=eu,t===null?eu:t}function Rp(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),It===null||!(vs&268435455)&&!(ku&268435455)||ni(It,$t)}function iu(t,e){var n=$e;$e|=2;var r=W_();(It!==t||$t!==e)&&(Er=null,ds(t,e));do try{pj();break}catch(s){U_(t,s)}while(!0);if(mp(),$e=n,tu.current=r,St!==null)throw Error(ee(261));return It=null,$t=0,Tt}function pj(){for(;St!==null;)H_(St)}function mj(){for(;St!==null&&!$2();)H_(St)}function H_(t){var e=G_(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?V_(t):St=e,Ep.current=null}function V_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lj(n,e),n!==null){n.flags&=32767,St=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,St=null;return}}else if(n=aj(n,e,wn),n!==null){St=n;return}if(e=e.sibling,e!==null){St=e;return}St=e=t}while(e!==null);Tt===0&&(Tt=5)}function Vi(t,e,n){var r=Ke,s=An.transition;try{An.transition=null,Ke=1,gj(t,e,n,r)}finally{An.transition=s,Ke=r}return null}function gj(t,e,n,r){do uo();while(fi!==null);if($e&6)throw Error(ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Y2(t,o),t===It&&(St=It=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uc||(uc=!0,Z_(Bc,function(){return uo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=An.transition,An.transition=null;var c=Ke;Ke=1;var d=$e;$e|=4,Ep.current=null,uj(t,n),B_(n,t),Ab(Ah),Fc=!!Mh,Ah=Mh=null,t.current=n,dj(n),F2(),$e=d,Ke=c,An.transition=o}else t.current=n;if(uc&&(uc=!1,fi=t,ru=s),o=t.pendingLanes,o===0&&(wi=null),H2(n.stateNode),gn(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(nu)throw nu=!1,t=nf,nf=null,t;return ru&1&&t.tag!==0&&uo(),o=t.pendingLanes,o&1?t===rf?Ra++:(Ra=0,rf=t):Ra=0,Oi(),null}function uo(){if(fi!==null){var t=Sy(ru),e=An.transition,n=Ke;try{if(An.transition=null,Ke=16>t?16:t,fi===null)var r=!1;else{if(t=fi,fi=null,ru=0,$e&6)throw Error(ee(331));var s=$e;for($e|=4,ue=t.current;ue!==null;){var o=ue,c=o.child;if(ue.flags&16){var d=o.deletions;if(d!==null){for(var h=0;h<d.length;h++){var f=d[h];for(ue=f;ue!==null;){var m=ue;switch(m.tag){case 0:case 11:case 15:Oa(8,m,o)}var g=m.child;if(g!==null)g.return=m,ue=g;else for(;ue!==null;){m=ue;var x=m.sibling,P=m.return;if(A_(m),m===f){ue=null;break}if(x!==null){x.return=P,ue=x;break}ue=P}}}var b=o.alternate;if(b!==null){var _=b.child;if(_!==null){b.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}ue=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,ue=c;else e:for(;ue!==null;){if(o=ue,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Oa(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,ue=y;break e}ue=o.return}}var j=t.current;for(ue=j;ue!==null;){c=ue;var k=c.child;if(c.subtreeFlags&2064&&k!==null)k.return=c,ue=k;else e:for(c=j;ue!==null;){if(d=ue,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:ju(9,d)}}catch(D){ht(d,d.return,D)}if(d===c){ue=null;break e}var O=d.sibling;if(O!==null){O.return=d.return,ue=O;break e}ue=d.return}}if($e=s,Oi(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(mu,t)}catch{}r=!0}return r}finally{Ke=n,An.transition=e}}return!1}function ov(t,e,n){e=Oo(n,e),e=S_(t,e,1),t=xi(t,e,1),e=nn(),t!==null&&(ml(t,1,e),gn(t,e))}function ht(t,e,n){if(t.tag===3)ov(t,t,n);else for(;e!==null;){if(e.tag===3){ov(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wi===null||!wi.has(r))){t=Oo(n,t),t=C_(e,t,1),e=xi(e,t,1),t=nn(),e!==null&&(ml(e,1,t),gn(e,t));break}}e=e.return}}function vj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,It===t&&($t&n)===n&&(Tt===4||Tt===3&&($t&130023424)===$t&&500>vt()-Lp?ds(t,0):Tp|=n),gn(t,e)}function q_(t,e){e===0&&(t.mode&1?(e=ec,ec<<=1,!(ec&130023424)&&(ec=4194304)):e=1);var n=nn();t=Br(t,e),t!==null&&(ml(t,e,n),gn(t,n))}function yj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),q_(t,n)}function _j(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),q_(t,n)}var G_;G_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,oj(t,e,n);fn=!!(t.flags&131072)}else fn=!1,ot&&e.flags&1048576&&Jy(e,Zc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cc(t,e),t=e.pendingProps;var s=Po(e,Zt.current);co(e,n),s=jp(null,e,r,t,s,n);var o=kp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(o=!0,qc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yp(e),s.updater=bu,e.stateNode=s,s._reactInternals=e,Vh(e,r,t,n),e=Zh(null,e,r,!0,o,n)):(e.tag=0,ot&&o&&dp(e),tn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wj(r),t=Zn(r,t),s){case 0:e=Gh(null,e,r,t,n);break e;case 1:e=Yg(null,e,r,t,n);break e;case 11:e=Zg(null,e,r,t,n);break e;case 14:e=Kg(null,e,r,Zn(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Gh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Yg(t,e,r,s,n);case 3:e:{if(L_(e),t===null)throw Error(ee(387));r=e.pendingProps,o=e.memoizedState,s=o.element,r_(t,e),Jc(e,r,null,n);var c=e.memoizedState;if(r=c.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Oo(Error(ee(423)),e),e=Jg(t,e,r,n,s);break e}else if(r!==s){s=Oo(Error(ee(424)),e),e=Jg(t,e,r,n,s);break e}else for(jn=_i(e.stateNode.containerInfo.firstChild),kn=e,ot=!0,Xn=null,n=t_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Eo(),r===s){e=$r(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return i_(e),t===null&&Uh(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,c=s.children,Dh(r,s)?c=null:o!==null&&Dh(r,o)&&(e.flags|=32),T_(t,e),tn(t,e,c,n),e.child;case 6:return t===null&&Uh(e),null;case 13:return O_(t,e,n);case 4:return _p(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=To(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Zg(t,e,r,s,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,c=s.value,tt(Kc,r._currentValue),r._currentValue=c,o!==null)if(nr(o.value,c)){if(o.children===s.children&&!pn.current){e=$r(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){c=o.child;for(var h=d.firstContext;h!==null;){if(h.context===r){if(o.tag===1){h=Ar(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Wh(o.return,n,e),d.lanes|=n;break}h=h.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(ee(341));c.lanes|=n,d=c.alternate,d!==null&&(d.lanes|=n),Wh(c,n,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}tn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,co(e,n),s=Dn(s),r=r(s),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,s=Zn(r,e.pendingProps),s=Zn(r.type,s),Kg(t,e,r,s,n);case 15:return P_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Cc(t,e),e.tag=1,mn(r)?(t=!0,qc(e)):t=!1,co(e,n),k_(e,r,s),Vh(e,r,s,n),Zh(null,e,r,!0,t,n);case 19:return N_(t,e,n);case 22:return E_(t,e,n)}throw Error(ee(156,e.tag))};function Z_(t,e){return wy(t,e)}function xj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new xj(t,e,n,r)}function Ip(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wj(t){if(typeof t=="function")return Ip(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xf)return 11;if(t===ep)return 14}return 2}function ji(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tc(t,e,n,r,s,o){var c=2;if(r=t,typeof t=="function")Ip(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case Zs:return hs(n.children,s,o,e);case Qf:c=8,s|=8;break;case mh:return t=Mn(12,n,e,s|2),t.elementType=mh,t.lanes=o,t;case gh:return t=Mn(13,n,e,s),t.elementType=gh,t.lanes=o,t;case vh:return t=Mn(19,n,e,s),t.elementType=vh,t.lanes=o,t;case iy:return Su(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ny:c=10;break e;case ry:c=9;break e;case Xf:c=11;break e;case ep:c=14;break e;case Xr:c=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Mn(c,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function hs(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function Su(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=iy,t.lanes=n,t.stateNode={isHidden:!1},t}function qd(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function Gd(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pd(0),this.expirationTimes=Pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mp(t,e,n,r,s,o,c,d,h){return t=new bj(t,e,n,d,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Mn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yp(o),t}function jj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function K_(t){if(!t)return Ei;t=t._reactInternals;e:{if(bs(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(mn(n))return Ky(t,n,e)}return e}function Y_(t,e,n,r,s,o,c,d,h){return t=Mp(n,r,!0,t,s,o,c,d,h),t.context=K_(null),n=t.current,r=nn(),s=bi(n),o=Ar(r,s),o.callback=e??null,xi(n,o,s),t.current.lanes=s,ml(t,s,r),gn(t,r),t}function Cu(t,e,n,r){var s=e.current,o=nn(),c=bi(s);return n=K_(n),e.context===null?e.context=n:e.pendingContext=n,e=Ar(o,c),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xi(s,e,c),t!==null&&(tr(t,s,c,o),jc(t,s,c)),c}function su(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function av(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ap(t,e){av(t,e),(t=t.alternate)&&av(t,e)}function kj(){return null}var J_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dp(t){this._internalRoot=t}Pu.prototype.render=Dp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Cu(t,e,null,null)};Pu.prototype.unmount=Dp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){Cu(null,t,null,null)}),e[zr]=null}};function Pu(t){this._internalRoot=t}Pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ey();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ti.length&&e!==0&&e<ti[n].priority;n++);ti.splice(n,0,t),n===0&&Ly(t)}};function zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Eu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lv(){}function Sj(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var f=su(c);o.call(f)}}var c=Y_(e,r,t,0,null,!1,!1,"",lv);return t._reactRootContainer=c,t[zr]=c.current,Va(t.nodeType===8?t.parentNode:t),ys(),c}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var d=r;r=function(){var f=su(h);d.call(f)}}var h=Mp(t,0,!1,null,null,!1,!1,"",lv);return t._reactRootContainer=h,t[zr]=h.current,Va(t.nodeType===8?t.parentNode:t),ys(function(){Cu(e,h,n,r)}),h}function Tu(t,e,n,r,s){var o=n._reactRootContainer;if(o){var c=o;if(typeof s=="function"){var d=s;s=function(){var h=su(c);d.call(h)}}Cu(e,c,t,s)}else c=Sj(n,e,t,s,r);return su(c)}Cy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wa(e.pendingLanes);n!==0&&(rp(e,n|1),gn(e,vt()),!($e&6)&&(No=vt()+500,Oi()))}break;case 13:ys(function(){var r=Br(t,1);if(r!==null){var s=nn();tr(r,t,1,s)}}),Ap(t,1)}};ip=function(t){if(t.tag===13){var e=Br(t,134217728);if(e!==null){var n=nn();tr(e,t,134217728,n)}Ap(t,134217728)}};Py=function(t){if(t.tag===13){var e=bi(t),n=Br(t,e);if(n!==null){var r=nn();tr(n,t,e,r)}Ap(t,e)}};Ey=function(){return Ke};Ty=function(t,e){var n=Ke;try{return Ke=t,e()}finally{Ke=n}};Ph=function(t,e,n){switch(e){case"input":if(xh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=_u(r);if(!s)throw Error(ee(90));oy(r),xh(r,s)}}}break;case"textarea":ly(t,n);break;case"select":e=n.value,e!=null&&so(t,!!n.multiple,e,!1)}};my=Op;gy=ys;var Cj={usingClientEntryPoint:!1,Events:[vl,Qs,_u,fy,py,Op]},ha={findFiberByHostInstance:Yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pj={bundleType:ha.bundleType,version:ha.version,rendererPackageName:ha.rendererPackageName,rendererConfig:ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_y(t),t===null?null:t.stateNode},findFiberByHostInstance:ha.findFiberByHostInstance||kj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{mu=dc.inject(Pj),xr=dc}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cj;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zp(e))throw Error(ee(200));return jj(t,e,null,n)};Cn.createRoot=function(t,e){if(!zp(t))throw Error(ee(299));var n=!1,r="",s=J_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mp(t,1,!1,null,null,n,!1,r,s),t[zr]=e.current,Va(t.nodeType===8?t.parentNode:t),new Dp(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=_y(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return ys(t)};Cn.hydrate=function(t,e,n){if(!Eu(e))throw Error(ee(200));return Tu(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!zp(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",c=J_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),e=Y_(e,null,t,1,n??null,s,!1,o,c),t[zr]=e.current,Va(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pu(e)};Cn.render=function(t,e,n){if(!Eu(e))throw Error(ee(200));return Tu(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!Eu(t))throw Error(ee(40));return t._reactRootContainer?(ys(function(){Tu(null,null,t,!1,function(){t._reactRootContainer=null,t[zr]=null})}),!0):!1};Cn.unstable_batchedUpdates=Op;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Eu(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Tu(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function Q_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q_)}catch(t){console.error(t)}}Q_(),Q0.exports=Cn;var Lu=Q0.exports,X_,cv=Lu;X_=cv.createRoot,cv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function el(){return el=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},el.apply(this,arguments)}var pi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(pi||(pi={}));const uv="popstate";function Ej(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:c,hash:d}=r.location;return af("",{pathname:o,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ou(s)}return Lj(e,n,null,t)}function yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function e1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Tj(){return Math.random().toString(36).substr(2,8)}function dv(t,e){return{usr:t.state,key:t.key,idx:e}}function af(t,e,n,r){return n===void 0&&(n=null),el({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bo(e):e,{state:n,key:e&&e.key||r||Tj()})}function ou(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Lj(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,c=s.history,d=pi.Pop,h=null,f=m();f==null&&(f=0,c.replaceState(el({},c.state,{idx:f}),""));function m(){return(c.state||{idx:null}).idx}function g(){d=pi.Pop;let S=m(),y=S==null?null:S-f;f=S,h&&h({action:d,location:_.location,delta:y})}function x(S,y){d=pi.Push;let j=af(_.location,S,y);f=m()+1;let k=dv(j,f),O=_.createHref(j);try{c.pushState(k,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(O)}o&&h&&h({action:d,location:_.location,delta:1})}function P(S,y){d=pi.Replace;let j=af(_.location,S,y);f=m();let k=dv(j,f),O=_.createHref(j);c.replaceState(k,"",O),o&&h&&h({action:d,location:_.location,delta:0})}function b(S){let y=s.location.origin!=="null"?s.location.origin:s.location.href,j=typeof S=="string"?S:ou(S);return j=j.replace(/ $/,"%20"),yt(y,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,y)}let _={get action(){return d},get location(){return t(s,c)},listen(S){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(uv,g),h=S,()=>{s.removeEventListener(uv,g),h=null}},createHref(S){return e(s,S)},createURL:b,encodeLocation(S){let y=b(S);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:x,replace:P,go(S){return c.go(S)}};return _}var hv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hv||(hv={}));function Oj(t,e,n){return n===void 0&&(n="/"),Nj(t,e,n)}function Nj(t,e,n,r){let s=typeof e=="string"?Bo(e):e,o=Bp(s.pathname||"/",n);if(o==null)return null;let c=t1(t);Rj(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=Vj(o);d=Uj(c[h],f)}return d}function t1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,c,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&(yt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=ki([r,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(yt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),t1(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:$j(f,o.index),routesMeta:m})};return t.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))s(o,c);else for(let h of n1(o.path))s(o,c,h)}),e}function n1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let c=n1(r.join("/")),d=[];return d.push(...c.map(h=>h===""?o:[o,h].join("/"))),s&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function Rj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Fj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Ij=/^:[\w-]+$/,Mj=3,Aj=2,Dj=1,zj=10,Bj=-2,fv=t=>t==="*";function $j(t,e){let n=t.split("/"),r=n.length;return n.some(fv)&&(r+=Bj),e&&(r+=Aj),n.filter(s=>!fv(s)).reduce((s,o)=>s+(Ij.test(o)?Mj:o===""?Dj:zj),r)}function Fj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Uj(t,e,n){let{routesMeta:r}=t,s={},o="/",c=[];for(let d=0;d<r.length;++d){let h=r[d],f=d===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=Wj({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),x=h.route;if(!g)return null;Object.assign(s,g.params),c.push({params:s,pathname:ki([o,g.pathname]),pathnameBase:Kj(ki([o,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(o=ki([o,g.pathnameBase]))}return c}function Wj(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Hj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((f,m,g)=>{let{paramName:x,isOptional:P}=m;if(x==="*"){let _=d[g]||"";c=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const b=d[g];return P&&!b?f[x]=void 0:f[x]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:t}}function Hj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),e1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Vj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return e1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function qj(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bo(t):t;return{pathname:n?n.startsWith("/")?n:Gj(n,e):e,search:Yj(r),hash:Jj(s)}}function Gj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Zd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Zj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $p(t,e){let n=Zj(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Fp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bo(t):(s=el({},t),yt(!s.pathname||!s.pathname.includes("?"),Zd("?","pathname","search",s)),yt(!s.pathname||!s.pathname.includes("#"),Zd("#","pathname","hash",s)),yt(!s.search||!s.search.includes("#"),Zd("#","search","hash",s)));let o=t===""||s.pathname==="",c=o?"/":s.pathname,d;if(c==null)d=n;else{let g=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),g-=1;s.pathname=x.join("/")}d=g>=0?e[g]:"/"}let h=qj(s,d),f=c&&c!=="/"&&c.endsWith("/"),m=(o||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const ki=t=>t.join("/").replace(/\/\/+/g,"/"),Kj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Yj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Jj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Qj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const r1=["post","put","patch","delete"];new Set(r1);const Xj=["get",...r1];new Set(Xj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tl.apply(this,arguments)}const Up=C.createContext(null),ek=C.createContext(null),Ni=C.createContext(null),Ou=C.createContext(null),Ri=C.createContext({outlet:null,matches:[],isDataRoute:!1}),i1=C.createContext(null);function tk(t,e){let{relative:n}=e===void 0?{}:e;$o()||yt(!1);let{basename:r,navigator:s}=C.useContext(Ni),{hash:o,pathname:c,search:d}=o1(t,{relative:n}),h=c;return r!=="/"&&(h=c==="/"?r:ki([r,c])),s.createHref({pathname:h,search:d,hash:o})}function $o(){return C.useContext(Ou)!=null}function js(){return $o()||yt(!1),C.useContext(Ou).location}function s1(t){C.useContext(Ni).static||C.useLayoutEffect(t)}function ks(){let{isDataRoute:t}=C.useContext(Ri);return t?pk():nk()}function nk(){$o()||yt(!1);let t=C.useContext(Up),{basename:e,future:n,navigator:r}=C.useContext(Ni),{matches:s}=C.useContext(Ri),{pathname:o}=js(),c=JSON.stringify($p(s,n.v7_relativeSplatPath)),d=C.useRef(!1);return s1(()=>{d.current=!0}),C.useCallback(function(f,m){if(m===void 0&&(m={}),!d.current)return;if(typeof f=="number"){r.go(f);return}let g=Fp(f,JSON.parse(c),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ki([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,c,o,t])}function o1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(Ni),{matches:s}=C.useContext(Ri),{pathname:o}=js(),c=JSON.stringify($p(s,r.v7_relativeSplatPath));return C.useMemo(()=>Fp(t,JSON.parse(c),o,n==="path"),[t,c,o,n])}function rk(t,e){return ik(t,e)}function ik(t,e,n,r){$o()||yt(!1);let{navigator:s}=C.useContext(Ni),{matches:o}=C.useContext(Ri),c=o[o.length-1],d=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=js(),m;if(e){var g;let S=typeof e=="string"?Bo(e):e;h==="/"||(g=S.pathname)!=null&&g.startsWith(h)||yt(!1),m=S}else m=f;let x=m.pathname||"/",P=x;if(h!=="/"){let S=h.replace(/^\//,"").split("/");P="/"+x.replace(/^\//,"").split("/").slice(S.length).join("/")}let b=Oj(t,{pathname:P}),_=ck(b&&b.map(S=>Object.assign({},S,{params:Object.assign({},d,S.params),pathname:ki([h,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:ki([h,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,r);return e&&_?C.createElement(Ou.Provider,{value:{location:tl({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:pi.Pop}},_):_}function sk(){let t=fk(),e=Qj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,null)}const ok=C.createElement(sk,null);class ak extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(Ri.Provider,{value:this.props.routeContext},C.createElement(i1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lk(t){let{routeContext:e,match:n,children:r}=t,s=C.useContext(Up);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(Ri.Provider,{value:e},r)}function ck(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,d=(s=n)==null?void 0:s.errors;if(d!=null){let m=c.findIndex(g=>g.route.id&&(d==null?void 0:d[g.route.id])!==void 0);m>=0||yt(!1),c=c.slice(0,Math.min(c.length,m+1))}let h=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<c.length;m++){let g=c[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:x,errors:P}=n,b=g.route.loader&&x[g.route.id]===void 0&&(!P||P[g.route.id]===void 0);if(g.route.lazy||b){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((m,g,x)=>{let P,b=!1,_=null,S=null;n&&(P=d&&g.route.id?d[g.route.id]:void 0,_=g.route.errorElement||ok,h&&(f<0&&x===0?(mk("route-fallback"),b=!0,S=null):f===x&&(b=!0,S=g.route.hydrateFallbackElement||null)));let y=e.concat(c.slice(0,x+1)),j=()=>{let k;return P?k=_:b?k=S:g.route.Component?k=C.createElement(g.route.Component,null):g.route.element?k=g.route.element:k=m,C.createElement(lk,{match:g,routeContext:{outlet:m,matches:y,isDataRoute:n!=null},children:k})};return n&&(g.route.ErrorBoundary||g.route.errorElement||x===0)?C.createElement(ak,{location:n.location,revalidation:n.revalidation,component:_,error:P,children:j(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):j()},null)}var a1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(a1||{}),l1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(l1||{});function uk(t){let e=C.useContext(Up);return e||yt(!1),e}function dk(t){let e=C.useContext(ek);return e||yt(!1),e}function hk(t){let e=C.useContext(Ri);return e||yt(!1),e}function c1(t){let e=hk(),n=e.matches[e.matches.length-1];return n.route.id||yt(!1),n.route.id}function fk(){var t;let e=C.useContext(i1),n=dk(),r=c1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function pk(){let{router:t}=uk(a1.UseNavigateStable),e=c1(l1.UseNavigateStable),n=C.useRef(!1);return s1(()=>{n.current=!0}),C.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,tl({fromRouteId:e},o)))},[t,e])}const pv={};function mk(t,e,n){pv[t]||(pv[t]=!0)}function gk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Kd(t){let{to:e,replace:n,state:r,relative:s}=t;$o()||yt(!1);let{future:o,static:c}=C.useContext(Ni),{matches:d}=C.useContext(Ri),{pathname:h}=js(),f=ks(),m=Fp(e,$p(d,o.v7_relativeSplatPath),h,s==="path"),g=JSON.stringify(m);return C.useEffect(()=>f(JSON.parse(g),{replace:n,state:r,relative:s}),[f,g,s,n,r]),null}function Cr(t){yt(!1)}function vk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=pi.Pop,navigator:o,static:c=!1,future:d}=t;$o()&&yt(!1);let h=e.replace(/^\/*/,"/"),f=C.useMemo(()=>({basename:h,navigator:o,static:c,future:tl({v7_relativeSplatPath:!1},d)}),[h,d,o,c]);typeof r=="string"&&(r=Bo(r));let{pathname:m="/",search:g="",hash:x="",state:P=null,key:b="default"}=r,_=C.useMemo(()=>{let S=Bp(m,h);return S==null?null:{location:{pathname:S,search:g,hash:x,state:P,key:b},navigationType:s}},[h,m,g,x,P,b,s]);return _==null?null:C.createElement(Ni.Provider,{value:f},C.createElement(Ou.Provider,{children:n,value:_}))}function yk(t){let{children:e,location:n}=t;return rk(lf(e),n)}new Promise(()=>{});function lf(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let o=[...e,s];if(r.type===C.Fragment){n.push.apply(n,lf(r.props.children,o));return}r.type!==Cr&&yt(!1),!r.props.index||!r.props.children||yt(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=lf(r.props.children,o)),n.push(c)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cf.apply(this,arguments)}function _k(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function xk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wk(t,e){return t.button===0&&(!e||e==="_self")&&!xk(t)}const bk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jk="6";try{window.__reactRouterVersion=jk}catch{}const kk="startTransition",mv=v2[kk];function Sk(t){let{basename:e,children:n,future:r,window:s}=t,o=C.useRef();o.current==null&&(o.current=Ej({window:s,v5Compat:!0}));let c=o.current,[d,h]=C.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},m=C.useCallback(g=>{f&&mv?mv(()=>h(g)):h(g)},[h,f]);return C.useLayoutEffect(()=>c.listen(m),[c,m]),C.useEffect(()=>gk(r),[r]),C.createElement(vk,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:c,future:r})}const Ck=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Pk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fa=C.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:o,replace:c,state:d,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,x=_k(e,bk),{basename:P}=C.useContext(Ni),b,_=!1;if(typeof f=="string"&&Pk.test(f)&&(b=f,Ck))try{let k=new URL(window.location.href),O=f.startsWith("//")?new URL(k.protocol+f):new URL(f),D=Bp(O.pathname,P);O.origin===k.origin&&D!=null?f=D+O.search+O.hash:_=!0}catch{}let S=tk(f,{relative:s}),y=Ek(f,{replace:c,state:d,target:h,preventScrollReset:m,relative:s,viewTransition:g});function j(k){r&&r(k),k.defaultPrevented||y(k)}return C.createElement("a",cf({},x,{href:b||S,onClick:_||o?r:j,ref:n,target:h}))});var gv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gv||(gv={}));var vv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vv||(vv={}));function Ek(t,e){let{target:n,replace:r,state:s,preventScrollReset:o,relative:c,viewTransition:d}=e===void 0?{}:e,h=ks(),f=js(),m=o1(t,{relative:c});return C.useCallback(g=>{if(wk(g,n)){g.preventDefault();let x=r!==void 0?r:ou(f)===ou(m);h(t,{replace:x,state:s,preventScrollReset:o,relative:c,viewTransition:d})}},[f,h,m,r,s,n,t,o,c,d])}const Vn={getItem:t=>window.localStorage.getItem(t),setItem:(t,e)=>window.localStorage.setItem(t,e),deleteItem:t=>window.localStorage.removeItem(t)},u1=C.createContext();function Tk({children:t,forceShowInit:e}){const[n,r]=C.useState(!1),[s,o]=C.useState(""),[c,d]=C.useState(""),[h,f]=C.useState("user"),[m,g]=C.useState(""),[x,P]=C.useState("#1769aa"),b=C.useCallback(()=>{const j=Vn.getItem("DRIVER_TURA"),k=Vn.getItem("DRIVER_NAME"),O=Vn.getItem("DRIVER_ROLE"),D=Vn.getItem("DEVICE_ID"),T=Vn.getItem("IS_ADMIN");o(j||""),d(k||""),f(O||"user"),g(D||""),r(T==="true"),T==="true"?P("#cc0000"):k&&j&&P("#1769aa")},[]);C.useEffect(()=>{b(),typeof window<"u"&&(window.__USER_CONTEXT__={refreshStatus:b})},[b]);const y={isAdmin:n,driverTura:s,driverName:c,driverRole:h,deviceId:m,userColor:x,refreshStatus:b,resetLoginData:()=>(Vn.deleteItem("DRIVER_TURA"),Vn.deleteItem("DRIVER_NAME"),Vn.deleteItem("DRIVER_ROLE"),Vn.deleteItem("DEVICE_ID"),Vn.deleteItem("IS_ADMIN"),Vn.deleteItem("APP_LANG"),b(),typeof e=="function"&&e(),!0),validateDriverAccess:()=>!(!s||!m)};return a.jsx(u1.Provider,{value:y,children:t})}function Lk(){const t=C.useContext(u1);if(!t)throw new Error("useUserContext mora biti koriten unutar <UserProvider>");return t}const Ok="modulepreload",Nk=function(t){return"/bde-evidencija/"+t},yv={},_l=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=Promise.allSettled(n.map(h=>{if(h=Nk(h),h in yv)return;yv[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Ok,f||(g.as="script"),g.crossOrigin="",g.href=h,d&&g.setAttribute("nonce",d),document.head.appendChild(g),f)return new Promise((x,P)=>{g.addEventListener("load",x),g.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},Rk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_l(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Wp extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class _v extends Wp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xv extends Wp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wv extends Wp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var uf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(uf||(uf={}));var Ik=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};class Mk{constructor(e,{headers:n={},customFetch:r,region:s=uf.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Rk(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ik(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:o,method:c,body:d,signal:h}=r;let f={},{region:m}=r;m||(m=this.region);const g=new URL(`${this.url}/${n}`);m&&m!=="any"&&(f["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let x;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=d):typeof d=="string"?(f["Content-Type"]="text/plain",x=d):typeof FormData<"u"&&d instanceof FormData?x=d:(f["Content-Type"]="application/json",x=JSON.stringify(d)));const P=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:x,signal:h}).catch(y=>{throw y.name==="AbortError"?y:new _v(y)}),b=P.headers.get("x-relay-error");if(b&&b==="true")throw new xv(P);if(!P.ok)throw new wv(P);let _=((s=P.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return _==="application/json"?S=yield P.json():_==="application/octet-stream"?S=yield P.blob():_==="text/event-stream"?S=P:_==="multipart/form-data"?S=yield P.formData():S=yield P.text(),{data:S,error:null,response:P}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new _v(o)}:{data:null,error:o,response:o instanceof wv||o instanceof xv?o.context:void 0}}})}}var hn={},Hp={},Nu={},xl={},Ru={},Iu={},Ak=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ro=Ak();const Dk=Ro.fetch,d1=Ro.fetch.bind(Ro),h1=Ro.Headers,zk=Ro.Request,Bk=Ro.Response,Fo=Object.freeze(Object.defineProperty({__proto__:null,Headers:h1,Request:zk,Response:Bk,default:d1,fetch:Dk},Symbol.toStringTag,{value:"Module"})),$k=t2(Fo);var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});let Fk=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Mu.default=Fk;var f1=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Iu,"__esModule",{value:!0});const Uk=f1($k),Wk=f1(Mu);let Hk=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Uk.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var c,d,h,f;let m=null,g=null,x=null,P=o.status,b=o.statusText;if(o.ok){if(this.method!=="HEAD"){const j=await o.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?g=j:g=JSON.parse(j))}const S=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),y=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");S&&y&&y.length>1&&(x=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,x=null,P=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const S=await o.text();try{m=JSON.parse(S),Array.isArray(m)&&o.status===404&&(g=[],m=null,P=200,b="OK")}catch{o.status===404&&S===""?(P=204,b="No Content"):m={message:S}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,P=200,b="OK"),m&&this.shouldThrowOnError)throw new Wk.default(m)}return{error:m,data:g,count:x,status:P,statusText:b}});return this.shouldThrowOnError||(s=s.catch(o=>{var c,d,h;return{error:{message:`${(c=o==null?void 0:o.name)!==null&&c!==void 0?c:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(d=o==null?void 0:o.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=o==null?void 0:o.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Iu.default=Hk;var Vk=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ru,"__esModule",{value:!0});const qk=Vk(Iu);let Gk=class extends qk.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:o=s}={}){const c=o?`${o}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(c,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:o=!1,format:c="text"}={}){var d;const h=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ru.default=Gk;var Zk=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xl,"__esModule",{value:!0});const Kk=Zk(Ru);let Yk=class extends Kk.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${c}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};xl.default=Yk;var Jk=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nu,"__esModule",{value:!0});const pa=Jk(xl);let Qk=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,n){const{head:r=!1,count:s}=n??{},o=r?"HEAD":"GET";let c=!1;const d=(e??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",d),s&&this.headers.append("Prefer",`count=${s}`),new pa.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const o="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new pa.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:o=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new pa.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new pa.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new pa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Nu.default=Qk;var p1=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hp,"__esModule",{value:!0});const Xk=p1(Nu),eS=p1(xl);let tS=class m1{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Xk.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new m1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:o}={}){var c;let d;const h=new URL(`${this.url}/rpc/${e}`);let f;r||s?(d=r?"HEAD":"GET",Object.entries(n).filter(([g,x])=>x!==void 0).map(([g,x])=>[g,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([g,x])=>{h.searchParams.append(g,x)})):(d="POST",f=n);const m=new Headers(this.headers);return o&&m.set("Prefer",`count=${o}`),new eS.default({method:d,url:h,headers:m,schema:this.schemaName,body:f,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};Hp.default=tS;var Uo=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hn,"__esModule",{value:!0});hn.PostgrestError=hn.PostgrestBuilder=hn.PostgrestTransformBuilder=hn.PostgrestFilterBuilder=hn.PostgrestQueryBuilder=hn.PostgrestClient=void 0;const g1=Uo(Hp);hn.PostgrestClient=g1.default;const v1=Uo(Nu);hn.PostgrestQueryBuilder=v1.default;const y1=Uo(xl);hn.PostgrestFilterBuilder=y1.default;const _1=Uo(Ru);hn.PostgrestTransformBuilder=_1.default;const x1=Uo(Iu);hn.PostgrestBuilder=x1.default;const w1=Uo(Mu);hn.PostgrestError=w1.default;var nS=hn.default={PostgrestClient:g1.default,PostgrestQueryBuilder:v1.default,PostgrestFilterBuilder:y1.default,PostgrestTransformBuilder:_1.default,PostgrestBuilder:x1.default,PostgrestError:w1.default};const{PostgrestClient:rS,PostgrestQueryBuilder:xI,PostgrestFilterBuilder:wI,PostgrestTransformBuilder:bI,PostgrestBuilder:jI,PostgrestError:kI}=nS;class iS{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const sS="2.74.0",oS=`realtime-js/${sS}`,aS="1.0.0",df=1e4,lS=1e3,cS=100;var Ia;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ia||(Ia={}));var Pt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Pt||(Pt={}));var Qn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Qn||(Qn={}));var hf;(function(t){t.websocket="websocket"})(hf||(hf={}));var Zi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Zi||(Zi={}));class uS{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let c=this.HEADER_LENGTH+2;const d=r.decode(e.slice(c,c+s));c=c+s;const h=r.decode(e.slice(c,c+o));c=c+o;const f=JSON.parse(r.decode(e.slice(c,e.byteLength)));return{ref:null,topic:d,event:h,payload:f}}}class b1{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(et||(et={}));const bv=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=dS(c,t,e,s),o),{}):{}},dS=(t,e,n,r)=>{const s=e.find(d=>d.name===t),o=s==null?void 0:s.type,c=n[t];return o&&!r.includes(o)?j1(o,c):ff(c)},j1=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return mS(e,n)}switch(t){case et.bool:return hS(e);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return fS(e);case et.json:case et.jsonb:return pS(e);case et.timestamp:return gS(e);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return ff(e);default:return ff(e)}},ff=t=>t,hS=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fS=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},mS=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const c=t.slice(1,n);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(d=>j1(e,d))}return t},gS=t=>typeof t=="string"?t.replace(" ","T"):t,k1=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Yd{constructor(e,n,r={},s=df){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var jv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(jv||(jv={}));class Ma{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ma.syncState(this.state,s,o,c),this.pendingDiffs.forEach(h=>{this.state=Ma.syncDiff(this.state,h,o,c)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ma.syncDiff(this.state,s,o,c),d())}),this.onJoin((s,o,c)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:c})}),this.onLeave((s,o,c)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),c=this.transformState(n),d={},h={};return this.map(o,(f,m)=>{c[f]||(h[f]=m)}),this.map(c,(f,m)=>{const g=o[f];if(g){const x=m.map(S=>S.presence_ref),P=g.map(S=>S.presence_ref),b=m.filter(S=>P.indexOf(S.presence_ref)<0),_=g.filter(S=>x.indexOf(S.presence_ref)<0);b.length>0&&(d[f]=b),_.length>0&&(h[f]=_)}else d[f]=m}),this.syncDiff(o,{joins:d,leaves:h},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(d,h)=>{var f;const m=(f=e[d])!==null&&f!==void 0?f:[];if(e[d]=this.cloneDeep(h),m.length>0){const g=e[d].map(P=>P.presence_ref),x=m.filter(P=>g.indexOf(P.presence_ref)<0);e[d].unshift(...x)}r(d,m,h)}),this.map(c,(d,h)=>{let f=e[d];if(!f)return;const m=h.map(g=>g.presence_ref);f=f.filter(g=>m.indexOf(g.presence_ref)<0),e[d]=f,s(d,f,h),f.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(kv||(kv={}));var Aa;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Aa||(Aa={}));var Tr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Tr||(Tr={}));class Vp{constructor(e,n={config:{}},r){var s,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Yd(this,Qn.join,this.params,this.timeout),this.rejoinTimer=new b1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qn.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new Ma(this),this.broadcastEndpointURL=k1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:c,presence:d,private:h}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(P=>P.filter))!==null&&s!==void 0?s:[],m=!!this.bindings[Aa.PRESENCE]&&this.bindings[Aa.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,g={},x={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:m}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(P=>e==null?void 0:e(Tr.CHANNEL_ERROR,P)),this._onClose(()=>e==null?void 0:e(Tr.CLOSED)),this.updateJoinPayload(Object.assign({config:x},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:P})=>{var b;if(this.socket.setAuth(),P===void 0){e==null||e(Tr.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(b=_==null?void 0:_.length)!==null&&b!==void 0?b:0,y=[];for(let j=0;j<S;j++){const k=_[j],{filter:{event:O,schema:D,table:T,filter:$}}=k,N=P&&P[j];if(N&&N.event===O&&N.schema===D&&N.table===T&&N.filter===$)y.push(Object.assign(Object.assign({},k),{id:N.id}));else{this.unsubscribe(),this.state=Pt.errored,e==null||e(Tr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Tr.SUBSCRIBED);return}}).receive("error",P=>{this.state=Pt.errored,e==null||e(Tr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(P).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Tr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Pt.joined&&e===Aa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:c}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,d,h;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Yd(this,Qn.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),c}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Yd(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>cS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const c=e.toLocaleLowerCase(),{close:d,error:h,leave:f,join:m}=Qn;if(r&&[d,h,f,m].indexOf(c)>=0&&r!==this._joinRef())return;let x=this._onMessage(c,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(P=>{var b,_,S;return((b=P.filter)===null||b===void 0?void 0:b.event)==="*"||((S=(_=P.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===c}).map(P=>P.callback(x,r)):(o=this.bindings[c])===null||o===void 0||o.filter(P=>{var b,_,S,y,j,k;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in P){const O=P.id,D=(b=P.filter)===null||b===void 0?void 0:b.event;return O&&((_=n.ids)===null||_===void 0?void 0:_.includes(O))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const O=(j=(y=P==null?void 0:P.filter)===null||y===void 0?void 0:y.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return O==="*"||O===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return P.type.toLocaleLowerCase()===c}).map(P=>{if(typeof x=="object"&&"ids"in x){const b=x.data,{schema:_,table:S,commit_timestamp:y,type:j,errors:k}=b;x=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:y,eventType:j,new:{},old:{},errors:k}),this._getPayloadRecords(b))}P.callback(x,r)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Vp.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Qn.close,{},e)}_onError(e){this._on(Qn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=bv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=bv(e.columns,e.old_record)),n}}const Jd=()=>{},hc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vS=[1e3,2e3,5e3,1e4],yS=1e4,_S=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xS{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=df,this.transport=null,this.heartbeatIntervalMs=hc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jd,this.ref=0,this.reconnectTimer=null,this.logger=Jd,this.conn=null,this.sendBuffer=[],this.serializer=new uS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...c)=>_l(async()=>{const{default:d}=await Promise.resolve().then(()=>Fo);return{default:d}},void 0).then(({default:d})=>d(...c)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...c)=>o(...c)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${hf.websocket}`,this.httpEndpoint=k1(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iS.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:aS}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ia.connecting:return Zi.Connecting;case Ia.open:return Zi.Open;case Ia.closing:return Zi.Closing;default:return Zi.Closed}}isConnected(){return this.connectionState()===Zi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new Vp(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:s,ref:o}=e,c=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(lS,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},hc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:c}=n,d=c?`(${c})`:"",h=o.status||"";this.log("receive",`${h} ${r} ${s} ${d}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(s,o,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Qn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([_S],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:oS};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Qn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new b1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,o,c,d,h,f,m;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:df,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:hc.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:Jd,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:g=>vS[g-1]||yS,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(g,x)=>x(JSON.stringify(g)),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class qp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function kt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class wS extends qp{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class pf extends qp{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var bS=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};const S1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_l(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},jS=()=>bS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield _l(()=>Promise.resolve().then(()=>Fo),void 0)).Response:Response}),mf=t=>{if(Array.isArray(t))return t.map(n=>mf(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=mf(r)}),e},kS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ss=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};const Qd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),SS=(t,e,n)=>Ss(void 0,void 0,void 0,function*(){const r=yield jS();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const o=t.status||500,c=(s==null?void 0:s.statusCode)||o+"";e(new wS(Qd(s),o,c))}).catch(s=>{e(new pf(Qd(s),s))}):e(new pf(Qd(t),t))}),CS=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(kS(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function wl(t,e,n,r,s,o){return Ss(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(n,CS(e,r,s,o)).then(h=>{if(!h.ok)throw h;return r!=null&&r.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>SS(h,d,r))})})}function au(t,e,n,r){return Ss(this,void 0,void 0,function*(){return wl(t,"GET",e,n,r)})}function pr(t,e,n,r,s){return Ss(this,void 0,void 0,function*(){return wl(t,"POST",e,r,s,n)})}function gf(t,e,n,r,s){return Ss(this,void 0,void 0,function*(){return wl(t,"PUT",e,r,s,n)})}function PS(t,e,n,r){return Ss(this,void 0,void 0,function*(){return wl(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function C1(t,e,n,r,s){return Ss(this,void 0,void 0,function*(){return wl(t,"DELETE",e,r,s,n)})}var ES=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};class TS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ES(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(kt(e))return{data:null,error:e};throw e}})}}var LS=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};class OS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new TS(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return LS(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(kt(e))return{data:null,error:e};throw e}})}}var ln=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};const NS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class RS{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=S1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return ln(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},Sv),s);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),h&&o.append("metadata",this.encodeMetadata(h)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",c.cacheControl),h&&o.append("metadata",this.encodeMetadata(h))):(o=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),s!=null&&s.headers&&(d=Object.assign(Object.assign({},d),s.headers));const f=this._removeEmptyFolders(n),m=this._getFinalPath(f),g=yield(e=="PUT"?gf:pr)(this.fetch,`${this.url}/object/${m}`,o,Object.assign({headers:d},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(kt(o))return{data:null,error:o};throw o}})}upload(e,n,r){return ln(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return ln(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",n);try{let h;const f=Object.assign({upsert:Sv.upsert},s),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",f.cacheControl)):(h=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const g=yield gf(this.fetch,d.toString(),h,{headers:m});return{data:{path:o,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(kt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return ln(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield pr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),c=new URL(this.url+o.url),d=c.searchParams.get("token");if(!d)throw new qp("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kt(r))return{data:null,error:r};throw r}})}update(e,n,r){return ln(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ln(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return ln(this,void 0,void 0,function*(){try{return{data:{path:(yield pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return ln(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield pr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return ln(this,void 0,void 0,function*(){try{const s=yield pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kt(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),c=o?`?${o}`:"",d=this._getFinalPath(e),h=()=>au(this.fetch,`${this.url}/${s}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new OS(h,this.shouldThrowOnError)}info(e){return ln(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield au(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:mf(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kt(r))return{data:null,error:r};throw r}})}exists(e){return ln(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield PS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kt(r)&&r instanceof pf){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const d=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&s.push(h);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${f}`)}}}remove(e){return ln(this,void 0,void 0,function*(){try{return{data:yield C1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kt(n))return{data:null,error:n};throw n}})}list(e,n,r){return ln(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},NS),n),{prefix:e||""});return{data:yield pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kt(s))return{data:null,error:s};throw s}})}listV2(e,n){return ln(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield pr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const IS="2.74.0",MS={"X-Client-Info":`storage-js/${IS}`};var zs=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};class AS{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},MS),n),this.fetch=S1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return zs(this,void 0,void 0,function*(){try{return{data:yield au(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(kt(e))return{data:null,error:e};throw e}})}getBucket(e){return zs(this,void 0,void 0,function*(){try{return{data:yield au(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kt(n))return{data:null,error:n};throw n}})}createBucket(e){return zs(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kt(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return zs(this,void 0,void 0,function*(){try{return{data:yield gf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return zs(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return zs(this,void 0,void 0,function*(){try{return{data:yield C1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kt(n))return{data:null,error:n};throw n}})}}class DS extends AS{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new RS(this.url,this.headers,e,this.fetch)}}const zS="2.74.0";let ja="";typeof Deno<"u"?ja="deno":typeof document<"u"?ja="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ja="react-native":ja="node";const BS={"X-Client-Info":`supabase-js-${ja}/${zS}`},$S={headers:BS},FS={schema:"public"},US={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WS={};var HS=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};const VS=t=>{let e;return t?e=t:typeof fetch>"u"?e=d1:e=fetch,(...n)=>e(...n)},qS=()=>typeof Headers>"u"?h1:Headers,GS=(t,e,n)=>{const r=VS(n),s=qS();return(o,c)=>HS(void 0,void 0,void 0,function*(){var d;const h=(d=yield e())!==null&&d!==void 0?d:t;let f=new s(c==null?void 0:c.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),r(o,Object.assign(Object.assign({},c),{headers:f}))})};var ZS=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};function KS(t){return t.endsWith("/")?t:t+"/"}function YS(t,e){var n,r;const{db:s,auth:o,realtime:c,global:d}=t,{db:h,auth:f,realtime:m,global:g}=e,x={db:Object.assign(Object.assign({},h),s),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},m),c),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>ZS(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}function JS(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(KS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const P1="2.74.0",Vs=30*1e3,vf=3,Xd=vf*Vs,QS="http://localhost:9999",XS="supabase.auth.token",eC={"X-Client-Info":`gotrue-js/${P1}`},yf="X-Supabase-Api-Version",E1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nC=10*60*1e3;class nl extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function be(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class rC extends nl{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function iC(t){return be(t)&&t.name==="AuthApiError"}class Ki extends nl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ii extends nl{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Jr extends Ii{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sC(t){return be(t)&&t.name==="AuthSessionMissingError"}class Bs extends Ii{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fc extends Ii{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pc extends Ii{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function oC(t){return be(t)&&t.name==="AuthImplicitGrantRedirectError"}class Cv extends Ii{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _f extends Ii{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function eh(t){return be(t)&&t.name==="AuthRetryableFetchError"}class Pv extends Ii{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class xf extends Ii{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const lu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ev=` 	
\r=`.split(""),aC=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ev.length;e+=1)t[Ev[e].charCodeAt(0)]=-2;for(let e=0;e<lu.length;e+=1)t[lu[e].charCodeAt(0)]=e;return t})();function Tv(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(lu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(lu[r]),e.queuedBits-=6}}function T1(t,e,n){const r=aC[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Lv(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=c=>{uC(c,r,n)};for(let c=0;c<t.length;c+=1)T1(t.charCodeAt(c),s,o);return e.join("")}function lC(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function cC(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}lC(r,e)}}function uC(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ho(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)T1(t.charCodeAt(s),n,r);return new Uint8Array(e)}function dC(t){const e=[];return cC(t,n=>e.push(n)),new Uint8Array(e)}function Xi(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Tv(s,n,r)),Tv(null,n,r),e.join("")}function hC(t){return Math.round(Date.now()/1e3)+t}function fC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const xn=()=>typeof window<"u"&&typeof document<"u",Ui={tested:!1,writable:!1},L1=()=>{if(!xn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ui.tested)return Ui.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ui.tested=!0,Ui.writable=!0}catch{Ui.tested=!0,Ui.writable=!1}return Ui.writable};function pC(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const O1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_l(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},mC=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",qs=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Wi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Kr=async(t,e)=>{await t.removeItem(e)};class Au{constructor(){this.promise=new Au.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Au.promiseConstructor=Promise;function th(t){const e=t.split(".");if(e.length!==3)throw new xf("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!tC.test(e[r]))throw new xf("JWT not in base64url format");return{header:JSON.parse(Lv(e[0])),payload:JSON.parse(Lv(e[1])),signature:ho(e[2]),raw:{header:e[0],payload:e[1]}}}async function gC(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function vC(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await t(o);if(!e(o,null,c)){r(c);return}}catch(c){if(!e(o,c)){s(c);return}}})()})}function yC(t){return("0"+t.toString(16)).substr(-2)}function _C(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,yC).join("")}async function xC(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function wC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await xC(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $s(t,e,n=!1){const r=_C();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await qs(t,`${e}-code-verifier`,s);const o=await wC(r);return[o,r===o?"plain":"s256"]}const bC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jC(t){const e=t.headers.get(yf);if(!e||!e.match(bC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kC(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function SC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const CC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fs(t){if(!CC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nh(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ov(t){return JSON.parse(JSON.stringify(t))}var PC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const qi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),EC=[502,503,504];async function Nv(t){var e;if(!mC(t))throw new _f(qi(t),0);if(EC.includes(t.status))throw new _f(qi(t),t.status);let n;try{n=await t.json()}catch(o){throw new Ki(qi(o),o)}let r;const s=jC(t);if(s&&s.getTime()>=E1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Pv(qi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Jr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new Pv(qi(n),t.status,n.weak_password.reasons);throw new rC(qi(n),t.status||500,r)}const TC=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ce(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[yf]||(o[yf]=E1["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const c=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await LC(t,e,n+d,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function LC(t,e,n,r,s,o){const c=TC(e,r,s,o);let d;try{d=await t(n,Object.assign({},c))}catch(h){throw console.error(h),new _f(qi(h),0)}if(d.ok||await Nv(d),r!=null&&r.noResolveJson)return d;try{return await d.json()}catch(h){await Nv(h)}}function Gn(t){var e;let n=null;RC(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=hC(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Rv(t){const e=Gn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ri(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function OC(t){return{data:t,error:null}}function NC(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,c=PC(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},h=Object.assign({},c);return{data:{properties:d,user:h},error:null}}function Iv(t){return t}function RC(t){return t.access_token&&t.refresh_token&&t.expires_in}const rh=["global","local","others"];var IC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class MC{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=O1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=rh[0]){if(rh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rh.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ri})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=IC(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:NC,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(be(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ri})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,c,d,h;try{const f={nextPage:null,lastPage:0,total:0},m=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Iv});if(m.error)throw m.error;const g=await m.json(),x=(c=m.headers.get("x-total-count"))!==null&&c!==void 0?c:0,P=(h=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return P.length>0&&(P.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);f[`${S}Page`]=_}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(be(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Fs(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ri})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Fs(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ri})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Fs(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ri})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Fs(e.userId);try{const{data:n,error:r}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(be(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Fs(e.userId),Fs(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,o,c,d,h;try{const f={nextPage:null,lastPage:0,total:0},m=await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Iv});if(m.error)throw m.error;const g=await m.json(),x=(c=m.headers.get("x-total-count"))!==null&&c!==void 0?c:0,P=(h=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return P.length>0&&(P.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);f[`${S}Page`]=_}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(be(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}}function Mv(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Us={debug:!!(globalThis&&L1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class N1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class AC extends N1{}async function DC(t,e,n){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new AC(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Us.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function zC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function R1(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function BC(t){return parseInt(t,16)}function $C(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function FC(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:c,notBefore:d,requestId:h,resources:f,scheme:m,uri:g,version:x}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const P=R1(t.address),b=m?`${m}://${r}`:r,_=t.statement?`${t.statement}
`:"",S=`${b} wants you to sign in with your Ethereum account:
${P}

${_}`;let y=`URI: ${g}
Version: ${x}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),d&&(y+=`
Not Before: ${d.toISOString()}`),h&&(y+=`
Request ID: ${h}`),f){let j=`
Resources:`;for(const k of f){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);j+=`
- ${k}`}y+=j}return`${S}
${y}`}class jt extends Error{constructor({message:e,code:n,cause:r,name:s}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class cu extends jt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function UC({error:t,options:e}){var n,r,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(M1(c)){if(o.rp.id!==c)return new jt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function WC({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(M1(r)){if(n.rpId!==r)return new jt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var I1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class HC{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const VC=new HC;function qC(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=I1(t,["challenge","user","excludeCredentials"]),o=ho(e).buffer,c=Object.assign(Object.assign({},n),{id:ho(n.id).buffer}),d=Object.assign(Object.assign({},s),{challenge:o,user:c});if(r&&r.length>0){d.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const f=r[h];d.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:ho(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function GC(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=I1(t,["challenge","allowCredentials"]),s=ho(e).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];o.allowCredentials[c]=Object.assign(Object.assign({},d),{id:ho(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function ZC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Xi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Xi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function KC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Xi(new Uint8Array(s.authenticatorData)),clientDataJSON:Xi(new Uint8Array(s.clientDataJSON)),signature:Xi(new Uint8Array(s.signature)),userHandle:s.userHandle?Xi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function M1(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Av(){var t,e;return!!(xn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function YC(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new cu("Browser returned unexpected credential type",e)}:{data:null,error:new cu("Empty credential response",e)}}catch(e){return{data:null,error:UC({error:e,options:t})}}}async function JC(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new cu("Browser returned unexpected credential type",e)}:{data:null,error:new cu("Empty credential response",e)}}catch(e){return{data:null,error:WC({error:e,options:t})}}}const QC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},XC={userVerification:"preferred",hints:["security-key"]};function uu(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const o in s){const c=s[o];if(c!==void 0)if(Array.isArray(c))r[o]=c;else if(n(c))r[o]=c;else if(e(c)){const d=r[o];e(d)?r[o]=uu(d,c):r[o]=uu(c)}else r[o]=c}return r}function eP(t,e){return uu(QC,t,e||{})}function tP(t,e){return uu(XC,t,e||{})}class nP{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},o){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!c)return{data:null,error:d};const h=s??VC.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:f}=c.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(c.webauthn.type){case"create":{const f=eP(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:m,error:g}=await YC({publicKey:f,signal:h});return m?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const f=tP(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:m,error:g}=await JC(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:f,signal:h}));return m?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(c){return be(c)?{data:null,error:c}:{data:null,error:new Ki("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},o){if(!n)return{data:null,error:new nl("rpId is required for WebAuthn authentication")};try{if(!Av())return{data:null,error:new Ki("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:o});if(!c)return{data:null,error:d};const{webauthn:h}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(c){return be(c)?{data:null,error:c}:{data:null,error:new Ki("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},o){if(!n)return{data:null,error:new nl("rpId is required for WebAuthn registration")};try{if(!Av())return{data:null,error:new Ki("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===e&&x.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:d};const{data:h,error:f}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:o});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(c){return be(c)?{data:null,error:c}:{data:null,error:new Ki("Unexpected error in register",c)}}}}zC();const rP={url:QS,storageKey:XS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dv(t,e,n){return await n()}const Ws={};class rl{get jwks(){var e,n;return(n=(e=Ws[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ws[this.storageKey]=Object.assign(Object.assign({},Ws[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ws[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ws[this.storageKey]=Object.assign(Object.assign({},Ws[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=rl.nextInstanceID,rl.nextInstanceID+=1,this.instanceID>0&&xn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},rP),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new MC({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=O1(s.fetch),this.lock=s.lock||Dv,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:xn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=DC:this.lock=Dv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new nP(this)},this.persistSession?(s.storage?this.storage=s.storage:L1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mv(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Mv(this.memoryStorage)),xn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${P1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=pC(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),xn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),oC(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:d}=s;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return be(n)?{error:n}:{error:new Ki("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Gn}),{data:c,error:d}=o;if(d||!c)return{data:{user:null,session:null},error:d};const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(o){if(be(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:m,password:g,options:x}=e;let P=null,b=null;this.flowType==="pkce"&&([P,b]=await $s(this.storage,this.storageKey)),o=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:m,password:g,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:P,code_challenge_method:b},xform:Gn})}else if("phone"in e){const{phone:m,password:g,options:x}=e;o=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Gn})}else throw new fc("You must provide either an email or phone number and a password");const{data:c,error:d}=o;if(d||!c)return{data:{user:null,session:null},error:d};const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(o){if(be(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:c,options:d}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Rv})}else if("phone"in e){const{phone:o,password:c,options:d}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Rv})}else throw new fc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Bs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,o,c,d,h,f,m,g,x;let P,b;if("message"in e)P=e.message,b=e.signature;else{const{chain:_,wallet:S,statement:y,options:j}=e;let k;if(xn())if(typeof S=="object")k=S;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")k=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=S}const O=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href),D=await k.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=R1(D[0]);let $=(r=j==null?void 0:j.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!$){const I=await k.request({method:"eth_chainId"});$=BC(I)}const N={domain:O.host,address:T,statement:y,uri:O.href,version:"1",chainId:$,nonce:(s=j==null?void 0:j.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(c=(o=j==null?void 0:j.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=j==null?void 0:j.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=j==null?void 0:j.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=j==null?void 0:j.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(m=j==null?void 0:j.signInWithEthereum)===null||m===void 0?void 0:m.resources};P=FC(N),b=await k.request({method:"personal_sign",params:[$C(P),T]})}try{const{data:_,error:S}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:P,signature:b},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Gn});if(S)throw S;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Bs}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:S})}catch(_){if(be(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var n,r,s,o,c,d,h,f,m,g,x,P;let b,_;if("message"in e)b=e.message,_=e.signature;else{const{chain:S,wallet:y,statement:j,options:k}=e;let O;if(xn())if(typeof y=="object")O=y;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))O=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=y}const D=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const T=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),j?{statement:j}:null));let $;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")$=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)$=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)b=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),_=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${D.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(s=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((f=k==null?void 0:k.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((g=(m=k==null?void 0:k.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...k.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const T=await O.signMessage(new TextEncoder().encode(b),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=T}}try{const{data:S,error:y}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Xi(_)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(P=e.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:Gn});if(y)throw y;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Bs}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:y})}catch(S){if(be(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(e){const n=await Wi(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:c}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gn});if(await Kr(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Bs}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:c})}catch(o){if(be(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:c}=e,d=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Gn}),{data:h,error:f}=d;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Bs}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:f})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,o,c;try{if("email"in e){const{email:d,options:h}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await $s(this.storage,this.storageKey));const{error:g}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:d,options:h}=e,{data:f,error:m}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new fc("You must provide either an email or phone number.")}catch(d){if(be(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:d}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Gn});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,f=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(s){if(be(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,c=null;return this.flowType==="pkce"&&([o,c]=await $s(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:OC})}catch(o){if(be(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Jr;const{error:s}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:c}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:c,error:d}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new fc("You must provide either an email or phone number and a type")}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Wi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Xd:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await Wi(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=nh()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,f,m)=>(!c&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,f,m))})}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ri}):await this._useSession(async n=>{var r,s,o;const{data:c,error:d}=n;if(d)throw d;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jr}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:ri})})}catch(n){if(be(n))return sC(n)&&(await this._removeSession(),await Kr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Jr;const c=s.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await $s(this.storage,this.storageKey));const{data:f,error:m}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:c.access_token,xform:ri});if(m)throw m;return c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Jr;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:c}=th(e.access_token);if(c.exp&&(r=c.exp,s=r<=n),s){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(be(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:c,error:d}=n;if(d)throw d;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Jr;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!xn())throw new pc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Cv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Cv("No code detected.");const{data:j,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:c,expires_in:d,expires_at:h,token_type:f}=e;if(!o||!d||!c||!f)throw new pc("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(d);let x=m+g;h&&(x=parseInt(h));const P=x-m;P*1e3<=Vs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${P}s, should have been closer to ${g}s`);const b=x-g;m-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,x,m):m-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,x,m);const{data:_,error:S}=await this._getUser(o);if(S)throw S;const y={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:g,expires_at:x,refresh_token:c,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(be(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Wi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const c=(r=s.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(iC(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Kr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=fC(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:c}=n;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await $s(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(be(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var c,d,h,f,m;const{data:g,error:x}=o;if(x)throw x;const P=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",P,{headers:this.headers,jwt:(m=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return xn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(be(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:o}}=n;if(s)throw s;const{options:c,provider:d,token:h,access_token:f,nonce:m}=e,g=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:d,id_token:h,access_token:f,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Gn}),{data:x,error:P}=g;return P?{data:{user:null,session:null},error:P}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new Bs}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),{data:x,error:P})}catch(s){if(be(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:c}=n;if(c)throw c;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await vC(async s=>(s>0&&await gC(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gn})),(s,o)=>{const c=200*Math.pow(2,s);return o&&eh(o)&&Date.now()+c-r<Vs})}catch(r){if(this._debug(n,"error",r),be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),xn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Wi(this.storage,this.storageKey);if(s&&this.userStorage){let c=await Wi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:s.user},await qs(this.userStorage,this.storageKey+"-user",c)),s.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:nh()}else if(s&&!s.user&&!s.user){const c=await Wi(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(s.user=c.user,await Kr(this.storage,this.storageKey+"-user"),await qs(this.storage,this.storageKey,s)):s.user=nh()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Xd;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Xd}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:c}=await this._callRefreshToken(s.refresh_token);c&&(console.error(c),eh(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(s.access_token);!d&&(c!=null&&c.user)?(s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Jr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Au;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new Jr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(s,"error",o),be(o)){const c={data:null,error:o};return eh(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(h){o.push(h)}});if(await Promise.all(c),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await qs(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=Ov(s);await qs(this.storage,this.storageKey,o)}else{const s=Ov(n);await qs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Kr(this.storage,this.storageKey),await Kr(this.storage,this.storageKey+"-code-verifier"),await Kr(this.storage,this.storageKey+"-user"),this.userStorage&&await Kr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Vs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Vs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Vs}ms, refresh threshold is ${vf} ticks`),s<=vf&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof N1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,c]=await $s(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});s.push(d.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:c}=n;if(c)return{data:null,error:c};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:f}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&h.type==="totp"&&(!((s=h==null?void 0:h.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?ZC(e.webauthn.credential_response):KC(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(n){if(be(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const c=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:qC(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:GC(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(be(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=th(s.access_token);let d=null;c.aal&&(d=c.aal);let h=d;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(h="aal2");const m=c.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(d=>d.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(d=>d.kid===e),r&&this.jwks_cached_at+nC>s)return r;const{data:o,error:c}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(d=>d.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:P,error:b}=await this.getSession();if(b||!P.session)return{data:null,error:b};r=P.session.access_token}const{header:s,payload:o,signature:c,raw:{header:d,payload:h}}=th(r);n!=null&&n.allowExpired||kC(o.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:P}=await this.getUser(r);if(P)throw P;return{data:{claims:o,header:s,signature:c},error:null}}const m=SC(s.alg),g=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,c,dC(`${d}.${h}`)))throw new xf("Invalid JWT signature");return{data:{claims:o,header:s,signature:c},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}}rl.nextInstanceID=0;const iP=rl;class sP extends iP{constructor(e){super(e)}}var oP=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((r=r.apply(t,e||[])).next())})};class aP{constructor(e,n,r){var s,o,c;this.supabaseUrl=e,this.supabaseKey=n;const d=JS(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:FS,realtime:WS,auth:Object.assign(Object.assign({},US),{storageKey:h}),global:$S},m=YS(r??{},f);this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=m.auth)!==null&&c!==void 0?c:{},this.headers,m.global.fetch),this.fetch=GS(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new rS(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new DS(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Mk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return oP(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,storageKey:c,flowType:d,lock:h,debug:f},m,g){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sP({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),m),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,flowType:d,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(P=>P.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new xS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lP=(t,e,n)=>new aP(t,e,n);function cP(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}cP()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");async function uP(t){const{data:e,error:n}=await me.from("holidays").select("*").eq("deleted",0).gte("date",`${t}-01-01`).lte("date",`${t}-12-31`);if(n)throw n;return e||[]}const dP="https://dsltpiupbfopyvuiqffg.supabase.co",hP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzbHRwaXVwYmZvcHl2dWlxZmZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5Mjc3MzcsImV4cCI6MjA2NTUwMzczN30.suu_OSbTBSEkM3YMiPDFIAgDnX3bDavcD8BX4ZfYZxw",me=lP(dP,hP);async function fP(t,e){let n=me.from("deliveries").select("*").eq("deleted",0);t&&e!==void 0&&(n=n.gte("date",`${t}-${String(e+1).padStart(2,"0")}-01`).lt("date",`${t}-${String(e+2).padStart(2,"0")}-01`));const{data:r,error:s}=await n;if(s)throw s;return r||[]}async function pP(){try{const{data:t,error:e}=await me.from("deliveries").select("zustellung_paketi").eq("deleted",0);if(e)throw e;return(t||[]).reduce((r,s)=>r+(parseInt(s.zustellung_paketi)||0),0)}catch(t){return console.error("Greka pri dohvatanju ukupnog broja dostava:",t),0}}async function mP(){const{data:t,error:e}=await me.from("drivers").select("*").eq("deleted",0).eq("aktivan",!0).order("tura");if(e)throw e;return t||[]}class gP{constructor(){this.syncInProgress=new Set}async syncUserToDriver(e){if(this.syncInProgress.has(e))return console.log(`Skipping sync for ${e} - already in progress`),!1;this.syncInProgress.add(e);try{const{data:n,error:r}=await me.from("app_users").select("tura, ime, role, active, last_login").eq("tura",e).single();if(r)return console.error("Error fetching user:",r),!1;if(!n)return console.warn(`User ${e} not found in app_users`),!1;const{data:s,error:o}=await me.from("drivers").select("id, tura, ime, aktivan, target_per_day").eq("tura",e).eq("deleted",0).maybeSingle();if(o)return console.error("Error checking driver:",o),!1;const c={tura:n.tura,ime:n.ime,aktivan:n.active,role:n.role,last_login:n.last_login,last_updated:new Date};if(n&&n.device_id!==void 0&&(c.device_id=n.device_id),s){const{error:d}=await me.from("drivers").update(c).eq("id",s.id);if(d)return console.error("Error updating driver:",d),!1;console.log(`Synced user ${e} to existing driver record`)}else{const d={...c,target_per_day:0,deleted:0},{error:h}=await me.from("drivers").insert([d]);if(h)return console.error("Error creating driver:",h),!1;console.log(`Created new driver record for user ${e}`)}return!0}catch(n){return console.error("Sync error:",n),!1}finally{this.syncInProgress.delete(e)}}async syncDriverToUser(e,n){try{const r={};if(n.ime&&(r.ime=n.ime),n.role&&(r.role=n.role),n.aktivan!==void 0&&(r.active=n.aktivan),n.device_id!==void 0&&(r.device_id=n.device_id),Object.keys(r).length===0)return!0;r.updated_at=new Date;const{error:s}=await me.from("app_users").update(r).eq("tura",e);return s?(console.error("Error syncing driver to user:",s),!1):(console.log(`Synced driver ${e} changes back to app_users`),!0)}catch(r){return console.error("Sync driver to user error:",r),!1}}async syncAllUsers(){try{const{data:e,error:n}=await me.from("app_users").select("tura").eq("active",!0);if(n)return console.error("Error fetching all users:",n),!1;const r=e.map(h=>this.syncUserToDriver(h.tura)),o=(await Promise.allSettled(r)).map((h,f)=>{var m;return{tura:(m=e[f])==null?void 0:m.tura,status:h.status,value:h.status==="fulfilled"?h.value:void 0,reason:h.status==="rejected"?h.reason&&h.reason.message||h.reason:void 0}}),c=o.filter(h=>h.status==="fulfilled"&&h.value).length,d=o.length;return console.log("Bulk sync detailed results:",o),console.log(`Bulk sync completed: ${c}/${d} users synced`),{successful:c,total:d,success:c===d,details:o}}catch(e){return console.error("Bulk sync error:",e),!1}}async getCombinedUserData(e){try{const[n,r]=await Promise.all([me.from("app_users").select("*").eq("tura",e).single(),me.from("drivers").select("*").eq("tura",e).eq("deleted",0).single()]),s=n.data,o=r.data;return s?{id:s.id,tura:s.tura,ime:s.ime,role:s.role,active:s.active,password_hash:s.password_hash,device_id:s.device_id,last_login:s.last_login,businessId:o==null?void 0:o.id,aktivan:(o==null?void 0:o.aktivan)??s.active,target_per_day:(o==null?void 0:o.target_per_day)??0,last_updated:o==null?void 0:o.last_updated,hasBusiness:!!o,syncNeeded:s.active!==(o==null?void 0:o.aktivan)}:(console.warn(`No auth data found for ${e}`),null)}catch(n){return console.error("Error getting combined data:",n),null}}}const fo=new gP;function Wo(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,o]=C.useState(null),c=C.useCallback(async()=>{r(!0),o(null);try{const{data:_,error:S}=await me.from("drivers").select("*").eq("deleted",0).order("target_per_day",{ascending:!1}).order("tura");if(S)throw S;const y=(_==null?void 0:_.map(k=>({id:k.id,tura:k.tura,ime:k.ime,target_per_day:k.target_per_day||0,aktivan:k.aktivan,role:k.role||"driver",password_hash:k.password_hash||"",last_login:k.last_login,last_updated:k.last_updated,deleted:k.deleted||0,name:k.ime,tour:k.tura,active:k.aktivan})))||[],j=["8610","8620","8630","8640"];y.sort((k,O)=>{const D=j.indexOf(String(k.tura)),T=j.indexOf(String(O.tura));if(D!==-1||T!==-1)return D===-1?1:T===-1?-1:D-T;const $=String(k.tura||""),N=String(O.tura||"");return $.localeCompare(N,void 0,{numeric:!0})}),e(y),console.log("useDrivers: drivers loaded",{count:y.length})}catch(_){o(_),e([])}finally{r(!1)}},[]),d=C.useCallback(async _=>{try{const S={ime:_.ime,tura:_.tura,aktivan:_.aktivan??!0,target_per_day:_.target_per_day||0,password_hash:_.password_hash||null,role:_.role||"driver",last_updated:new Date,deleted:0},{data:y,error:j}=await me.from("drivers").insert([S]).select();if(j)throw j;return await fo.syncDriverToUser(_.tura,{ime:_.ime,role:_.role,aktivan:_.aktivan}),await c(),y[0]}catch(S){throw o(S),S}},[c]),h=C.useCallback(async(_,S)=>{try{const y={ime:S.ime,tura:S.tura,aktivan:S.aktivan,target_per_day:S.target_per_day||0,password_hash:S.password_hash,role:S.role||"driver",last_updated:new Date},{data:j,error:k}=await me.from("drivers").update(y).eq("id",_).select();if(k)throw k;return j&&j.length>0&&await fo.syncDriverToUser(j[0].tura,{ime:S.ime,role:S.role,aktivan:S.aktivan}),await c(),j[0]}catch(y){throw o(y),y}},[c]),f=C.useCallback(async _=>{try{const{error:S}=await me.from("drivers").update({deleted:1,last_updated:new Date}).eq("id",_);if(S)throw S;await c()}catch(S){throw o(S),S}},[c]),m=C.useCallback(async(_,S)=>{try{const{data:y,error:j}=await me.from("drivers").update({aktivan:!S,last_updated:new Date}).eq("id",_).select();if(j)throw j;y&&y.length>0&&await fo.syncDriverToUser(y[0].tura,{aktivan:!S}),await c()}catch(y){throw o(y),y}},[c]),g=C.useCallback(async(_,S)=>{try{const{error:y}=await me.from("drivers").update({target_per_day:S,last_updated:new Date}).eq("tura",_).eq("deleted",0);if(y)throw y;return await c(),!0}catch(y){throw o(y),y}},[c]),x=C.useCallback(_=>t.find(S=>S.tura===_&&!S.deleted),[t]),P=C.useCallback(()=>t.filter(_=>_.aktivan&&!_.deleted),[t]),b=C.useCallback(()=>t.filter(_=>_.aktivan&&!_.deleted&&_.target_per_day>0),[t]);return C.useEffect(()=>{c()},[c]),{drivers:t,loading:n,error:s,addDriver:d,updateDriver:h,deleteDriver:f,toggleDriverStatus:m,updateDriverTarget:g,getDriverByTura:x,getActiveDrivers:P,getDriversWithTargets:b,refresh:c}}const vP=C.createContext();function yP({children:t}){const e=Wo();return a.jsx(vP.Provider,{value:e,children:t})}async function _P(){const{data:t,error:e}=await me.from("deliveries").select("*");if(e)throw e;return t}async function xP(){const{data:t,error:e}=await me.from("drivers").select("*");if(e)throw e;return t}class wP{constructor(){this.syncInterval=null,this.isRunning=!1,this.lastSyncTime=null,this.syncInProgress=!1,this.listeners=new Set,this.SYNC_INTERVAL=5*60*1e3,this.MIN_SYNC_DELAY=30*1e3,this.retryDelay=5e3,this.errorCount=0,this.maxErrors=10,this.isOnline=navigator.onLine,window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),this.loadPersistedState()}handleOnline(){console.log(" Network connection restored"),this.isOnline=!0,this.errorCount=0,this.notifyListeners({type:"network",status:"online"}),this.isRunning&&setTimeout(()=>this.syncNow(),1e3)}handleOffline(){console.log(" Network connection lost"),this.isOnline=!1,this.notifyListeners({type:"network",status:"offline"})}isNetworkAvailable(){return this.isOnline&&navigator.onLine}loadPersistedState(){try{const e=localStorage.getItem("autoSyncState");if(e){const n=JSON.parse(e);this.lastSyncTime=n.lastSyncTime,this.errorCount=n.errorCount||0}}catch(e){console.warn("Failed to load persisted sync state:",e)}}saveState(){try{const e={lastSyncTime:this.lastSyncTime,errorCount:this.errorCount,isRunning:this.isRunning};localStorage.setItem("autoSyncState",JSON.stringify(e))}catch(e){console.warn("Failed to save sync state:",e)}}start(e=5){this.isRunning||(this.SYNC_INTERVAL=e*60*1e3,this.isRunning=!0,this.syncNow(),this.syncInterval=setInterval(()=>{this.syncNow()},this.SYNC_INTERVAL),this.notifyListeners({type:"started"}))}stop(){this.isRunning&&(this.isRunning=!1,this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null),this.notifyListeners({type:"stopped"}))}async syncNow(e=!1){if(this.syncInProgress&&!e)return{success:!1,reason:"already_in_progress"};if(!e&&this.lastSyncTime&&Date.now()-this.lastSyncTime<this.MIN_SYNC_DELAY)return{success:!1,reason:"min_delay"};if(!this.isNetworkAvailable())return this.notifyListeners({type:"error",error:"No network connection",code:"NETWORK_ERROR"}),{success:!1,reason:"no_network"};if(this.errorCount>=this.maxErrors)return this.notifyListeners({type:"error",error:`Too many sync errors (${this.errorCount}). Auto-sync paused.`,code:"MAX_ERRORS_REACHED"}),this.stop(),{success:!1,reason:"max_errors_reached"};this.syncInProgress=!0,this.notifyListeners({type:"sync_started"});try{let n=0;const r=3;for(;n<r;)try{return console.log(` Starting sync attempt ${n+1}/${r}`),await _P(),await xP(),this.lastSyncTime=Date.now(),this.errorCount=0,this.saveState(),this.notifyListeners({type:"sync_success",timestamp:this.lastSyncTime,attempt:n+1}),console.log(" Sync completed successfully"),{success:!0,timestamp:this.lastSyncTime}}catch(s){if(n++,this.errorCount++,console.error(` Sync attempt ${n} failed:`,s),n<r){const o=this.retryDelay*n;console.log(` Retrying in ${o/1e3} seconds...`),this.notifyListeners({type:"sync_retry",attempt:n,maxRetries:r,delay:o,error:s.message}),await new Promise(c=>setTimeout(c,o))}else return this.notifyListeners({type:"sync_failed",error:s.message,errorCount:this.errorCount,maxRetries:r}),this.saveState(),{success:!1,error:s,attempts:n}}}finally{this.syncInProgress=!1}}notifyListeners(e){this.listeners.forEach(n=>n(e))}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}}const dr=new wP;function bP(){const[t,e]=C.useState(dr.isRunning),[n,r]=C.useState(dr.syncInProgress),[s,o]=C.useState(dr.lastSyncTime);return C.useEffect(()=>{const c=d=>{d.type==="started"&&e(!0),d.type==="stopped"&&e(!1),d.type==="synced"&&o(dr.lastSyncTime),r(dr.syncInProgress)};return dr.addListener(c),()=>dr.removeListener(c)},[]),{isRunning:t,syncInProgress:n,lastSyncTime:s,start:c=>dr.start(c),stop:()=>dr.stop(),syncNow:c=>dr.syncNow(c)}}const jP=C.createContext(),kP=({children:t})=>{const e=bP(),[n,r]=C.useState(!0),[s,o]=C.useState(15);C.useEffect(()=>(n?e.start(s):e.stop(),()=>{e.stop()}),[n,s]);const c={autoSync:e,globalSyncEnabled:n,setGlobalSyncEnabled:r,syncInterval:s,setSyncInterval:o,isAutoSyncRunning:e.isRunning,isSyncInProgress:e.syncInProgress,lastSyncTime:e.lastSyncTime,nextSyncTime:e.nextSyncTime,startAutoSync:e.start,stopAutoSync:e.stop,syncNow:e.syncNow,getLastSyncText:()=>{if(!e.lastSyncTime)return"Nikad";const h=Date.now()-e.lastSyncTime,f=Math.floor(h/(1e3*60)),m=Math.floor(h%(1e3*60)/1e3);return f>0?`prije ${f}min ${m}s`:`prije ${m}s`},getNextSyncText:()=>{if(!e.nextSyncTime||!e.isRunning)return"Iskljuen";const d=Date.now(),h=e.nextSyncTime-d;if(h<=0)return"Uskoro";const f=Math.floor(h/(1e3*60)),m=Math.floor(h%(1e3*60)/1e3);return f>0?`za ${f}min ${m}s`:`za ${m}s`}};return a.jsx(jP.Provider,{value:c,children:t})},SP={confirm:"Potvrdi",enterTuraOrPin:"Unesi turu ili PIN",selectLanguage:"Odaberi jezik",enterTuraAndSelectLanguage:"Unesi turu i odaberi jezik",welcome:"Dobrodoli!",setupMessage:"Molimo podes aplikaciju prije korienja.",tourNumber:"Broj ture",tourPlaceholder:"Unesite va broj ture (npr. 8610)",appLanguage:"Jezik aplikacije",finishSetup:"Zavri podeavanje",setupInfoMessage:"Ove podatke moete promijeniti kasnije u podeavanjima aplikacije.",unknownTour:"Nepoznat broj ture. Molimo kontaktirajte administratora."},CP={confirm:"Confirm",enterTuraOrPin:"Enter route or PIN",selectLanguage:"Select language",enterTuraAndSelectLanguage:"Enter route and select language",welcome:"Welcome!",setupMessage:"Please configure the application before use.",tourNumber:"Route number",tourPlaceholder:"Enter your route number (e.g. 8610)",appLanguage:"Application language",finishSetup:"Finish setup",setupInfoMessage:"You can change these settings later in application settings.",unknownTour:"Unknown route number. Please contact administrator."},PP={confirm:"Besttigen",enterTuraOrPin:"Route oder PIN eingeben",selectLanguage:"Sprache whlen",enterTuraAndSelectLanguage:"Route eingeben und Sprache whlen",welcome:"Willkommen!",setupMessage:"Bitte konfigurieren Sie die Anwendung vor der Nutzung.",tourNumber:"Routennummer",tourPlaceholder:"Geben Sie Ihre Routennummer ein (z.B. 8610)",appLanguage:"Anwendungssprache",finishSetup:"Setup abschlieen",setupInfoMessage:"Sie knnen diese Einstellungen spter in den Anwendungseinstellungen ndern.",unknownTour:"Unbekannte Routennummer. Bitte kontaktieren Sie den Administrator."},EP={confirm:"Potrdi",enterTuraOrPin:"Vnesi turo ali PIN",selectLanguage:"Izberi jezik",enterTuraAndSelectLanguage:"Vnesi turo in izberi jezik",welcome:"Dobrodoli!",setupMessage:"Prosimo, konfigurirajte aplikacijo pred uporabo.",tourNumber:"tevilka ture",tourPlaceholder:"Vnesite svojo tevilko ture (npr. 8610)",appLanguage:"Jezik aplikacije",finishSetup:"Zakljui nastavitev",setupInfoMessage:"Te nastavitve lahko pozneje spremenite v nastavitvah aplikacije.",unknownTour:"Neznana tevilka ture. Prosimo, kontaktirajte administratorja."},ma={ba:SP,en:CP,de:PP,si:EP},TP=C.createContext(),LP="ba",ih={getItem:t=>window.localStorage.getItem(t),setItem:(t,e)=>window.localStorage.setItem(t,e)},OP=({children:t})=>{const e=ih.getItem("APP_LANG")||LP,[n,r]=C.useState(e),[s,o]=C.useState(ma[e]),[c,d]=C.useState(!1);C.useEffect(()=>{(()=>{const x=ih.getItem("APP_LANG");x&&ma[x]&&x!==n&&(r(x),o(ma[x]))})()},[n]);const m={language:n,translations:s,isLoading:c,changeLanguage:g=>{ma[g]&&(r(g),o(ma[g]),ih.setItem("APP_LANG",g))},t:(g,x)=>{const P=g.split(".");let b=s;for(const _ of P)if(b&&b[_]!==void 0)b=b[_];else return x||g;return b}};return a.jsx(TP.Provider,{value:m,children:t})};function Gp(){const[t,e]=C.useState(null),[n,r]=C.useState(!0),[s,o]=C.useState(null),c=C.useCallback(()=>{try{const P=localStorage.getItem("bde_current_user"),b=localStorage.getItem("bde_login_time");if(P&&b){const _=JSON.parse(P);if(Date.now()-parseInt(b)<24*60*60*1e3)return _;localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}}catch(P){console.error("Error loading user from storage:",P),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}return null},[]),d=C.useCallback(P=>{try{localStorage.setItem("bde_current_user",JSON.stringify(P)),localStorage.setItem("bde_login_time",Date.now().toString())}catch(b){console.error("Error saving user to storage:",b)}},[]),h=C.useCallback(async P=>{console.log(" checkDriverExists called with tura:",P),r(!0),o(null);try{const{data:b,error:_}=await me.from("drivers").select("id, ime, tura, aktivan, role, password_hash").eq("tura",P.toUpperCase()).eq("aktivan",!0).single();if(_)throw console.error("Database error checking driver:",_),new Error(`Voza sa turom ${P} nije pronaen ili nije aktivan`);console.log(" Driver check result:",{id:b.id,ime:b.ime,tura:b.tura,hasPassword:!!b.password_hash,role:b.role});const S={id:b.id,ime:b.ime,tura:b.tura,role:b.role||"driver",hasPassword:!!b.password_hash};return console.log(" Returning from checkDriverExists:",S),S}catch(b){throw o(b.message),b}finally{r(!1)}},[]),f=C.useCallback(async(P,b)=>{r(!0),o(null);try{const _=btoa(b),{error:S}=await me.from("drivers").update({password_hash:_,last_login:new Date}).eq("id",P);if(S)throw new Error("Greka pri postavljanju lozinke");return!0}catch(_){throw o(_.message),_}finally{r(!1)}},[]),m=C.useCallback(async(P,b)=>{r(!0),o(null);try{const{data:_,error:S}=await me.from("drivers").select("*").eq("tura",P.toUpperCase()).eq("aktivan",!0).single();if(S)throw console.error("Database error during login:",S),new Error(`Voza sa turom ${P} nije pronaen ili nije aktivan`);if(console.log(" Driver found for login:",{tura:_.tura,ime:_.ime,hasPassword:!!_.password_hash,role:_.role}),!_.password_hash)throw new Error("Voza nema postavljenu lozinku. Kontaktirajte administratora.");if(!(_.password_hash===b||_.password_hash===btoa(b)))throw new Error("Neispravna lozinka");await me.from("drivers").update({last_login:new Date}).eq("id",_.id);const j={id:_.id,username:_.tura,name:_.ime,role:_.role||"driver",loginTime:Date.now()};return e(j),d(j),j}catch(_){throw o(_.message),_}finally{r(!1)}},[d]),g=C.useCallback(async(P,b)=>{if(!t)throw new Error("Morate biti ulogovani");r(!0),o(null);try{const{data:_,error:S}=await me.from("drivers").select("password_hash").eq("id",t.id).single();if(S)throw new Error("Greka pri provjeri korisnika");if(!(_.password_hash===P||_.password_hash===btoa(P)))throw new Error("Stara lozinka nije ispravna");const j=btoa(b),{error:k}=await me.from("drivers").update({password_hash:j}).eq("id",t.id);if(k)throw new Error("Greka pri auriranju lozinke");return!0}catch(_){throw o(_.message),_}finally{r(!1)}},[t]),x=C.useCallback(()=>{e(null),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time"),o(null),console.log(" User logged out")},[]);return C.useEffect(()=>{const P=c();P&&e(P),r(!1)},[c]),{currentUser:t,loading:n,error:s,checkDriverExists:h,setInitialPassword:f,login:m,changePassword:g,logout:x,isAuthenticated:!!t}}function NP({onDriverSelected:t,loading:e}){const[n,r]=C.useState(""),[s,o]=C.useState(null),c=d=>{if(d.preventDefault(),!n.trim()){o("Molimo unesite vau turu");return}if(n.trim().length<3){o("Tura mora imati najmanje 3 karaktera");return}o(null),t(n.trim().toUpperCase())};return a.jsx("div",{className:"driver-init-screen",children:a.jsxs("div",{className:"init-container",children:[a.jsxs("div",{className:"init-header",children:[a.jsx("div",{className:"header-icon",children:a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a.jsx("h1",{children:"Dobrodoli!"}),a.jsx("p",{children:"Molimo unesite vau turu za pristup aplikaciji"})]}),a.jsxs("form",{onSubmit:c,className:"init-form",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"tura",children:"Vaa tura"}),a.jsxs("div",{className:"input-wrapper",children:[a.jsx("input",{type:"text",id:"tura",value:n,onChange:d=>r(d.target.value),placeholder:"npr. 8610",maxLength:"10",disabled:e,autoFocus:!0}),a.jsx("div",{className:"input-icon",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),a.jsx("path",{d:"m20 8 2 2-2 2"}),a.jsx("path",{d:"m16 12-2-2 2-2"})]})})]})]}),s&&a.jsxs("div",{className:"error-message",children:[a.jsx("div",{className:"error-icon",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),a.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),a.jsx("span",{children:s})]}),a.jsx("button",{type:"submit",className:"submit-btn",disabled:e||!n.trim(),children:a.jsx("span",{className:"btn-content",children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"btn-spinner"}),"Provjeram..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),"Nastavi"]})})})]}),a.jsxs("div",{className:"init-footer",children:[a.jsx("div",{className:"footer-icon",children:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M18 20V10"}),a.jsx("path",{d:"M12 20V4"}),a.jsx("path",{d:"M6 20v-6"})]})}),a.jsx("p",{children:"B&D Evidencija  Aplikacija za evidenciju vonji"}),a.jsx("div",{className:"version-badge",children:"v4.0.0"})]})]})})}function RP({driver:t,onContinue:e,onLogin:n,onBack:r,loading:s}){const[o,c]=C.useState(""),[d,h]=C.useState(!1),[f,m]=C.useState(null),[g,x]=C.useState(!1),P=b=>{if(b.preventDefault(),!o.trim()){m("Molimo unesite lozinku");return}m(null),n(t.tura,o,d)};return a.jsx("div",{className:"driver-confirm-screen",children:a.jsxs("div",{className:"confirm-container",children:[a.jsxs("div",{className:"confirm-header",children:[a.jsx("div",{className:"header-avatar",children:a.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a.jsx("h1",{children:"Voza pronaen"}),a.jsx("p",{children:"Uspjeno smo identificirali va profil"})]}),a.jsxs("div",{className:"driver-card",children:[a.jsxs("div",{className:"driver-info",children:[a.jsx("h2",{children:t.ime}),a.jsxs("div",{className:"driver-details",children:[a.jsxs("div",{className:"detail-item",children:[a.jsx("span",{className:"detail-icon",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),a.jsx("path",{d:"m20 8 2 2-2 2"}),a.jsx("path",{d:"m16 12-2-2 2-2"})]})}),a.jsxs("span",{children:["Tura: ",t.tura]})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("span",{className:"detail-icon",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),a.jsx("path",{d:"m19.4 15-1.1-2.3c-.4-.8-1.2-1.3-2.1-1.3H7.8c-.9 0-1.7.5-2.1 1.3L4.6 15"}),a.jsx("path",{d:"M12 8v7"})]})}),a.jsx("span",{children:t.role==="admin"?"Administrator":"Voza"})]})]})]}),a.jsx("div",{className:"status-indicator",children:t.hasPassword?a.jsxs("div",{className:"status has-password",children:[a.jsx("span",{className:"status-icon",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("circle",{cx:"12",cy:"16",r:"1"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("span",{children:"Ve imate lozinku"})]}):a.jsxs("div",{className:"status no-password",children:[a.jsx("span",{className:"status-icon",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]})}),a.jsx("span",{children:"Potrebno je postaviti lozinku"})]})})]}),t.hasPassword?a.jsxs("form",{onSubmit:P,className:"login-form",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"password",children:"Lozinka"}),a.jsxs("div",{className:"input-wrapper",children:[a.jsx("input",{type:g?"text":"password",id:"password",value:o,onChange:b=>c(b.target.value),placeholder:"Unesite vau lozinku",disabled:s,autoFocus:!0}),a.jsx("div",{className:`input-icon ${g?"icon-text":"icon-password"}`,children:g?a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14,2 14,8 20,8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),a.jsx("polyline",{points:"10,9 9,9 8,9"})]}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("circle",{cx:"12",cy:"16",r:"1"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>x(!g),disabled:s,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g?a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),a.jsx("path",{d:"m1 1 22 22"})]}):a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]})]}),a.jsx("div",{className:"checkbox-group",children:a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:b=>h(b.target.checked),disabled:s}),a.jsx("span",{className:"checkbox-custom"}),a.jsx("span",{className:"checkbox-text",children:"Zapamti me"})]})}),f&&a.jsxs("div",{className:"error-message",children:[a.jsx("div",{className:"error-icon",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),a.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),a.jsx("span",{children:f})]}),a.jsxs("div",{className:"confirm-actions",children:[a.jsxs("button",{type:"button",className:"back-btn",onClick:r,disabled:s,children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"m15 18-6-6 6-6"})}),"Nazad"]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:s||!o.trim(),children:a.jsx("span",{className:"btn-content",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"btn-spinner"}),"Prijavljivam..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),"Prijavite se"]})})})]})]}):a.jsxs("div",{className:"confirm-actions",children:[a.jsxs("button",{type:"button",className:"back-btn",onClick:r,disabled:s,children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"m15 18-6-6 6-6"})}),"Nazad"]}),a.jsx("button",{type:"button",className:"continue-btn",onClick:e,disabled:s,children:a.jsx("span",{className:"btn-content",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"btn-spinner"}),"Molim saekajte..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),"Postavite lozinku"]})})})]}),a.jsx("div",{className:"confirm-footer",children:a.jsx("p",{children:"Provjerite da li su podaci ispravni prije nastavka"})})]})})}function IP({driver:t,onPasswordSet:e,onBack:n,loading:r}){const[s,o]=C.useState(""),[c,d]=C.useState(""),[h,f]=C.useState(!1),[m,g]=C.useState(null),[x,P]=C.useState(!1),[b,_]=C.useState(!1),S=y=>{if(y.preventDefault(),!s.trim()){g("Molimo unesite lozinku");return}if(s.length<4){g("Lozinka mora imati najmanje 4 karaktera");return}if(s!==c){g("Lozinke se ne poklapaju");return}g(null),e(s,h)};return a.jsx("div",{className:"password-setup-screen",children:a.jsxs("div",{className:"setup-container",children:[a.jsxs("div",{className:"setup-header",children:[a.jsx("div",{className:"header-avatar",children:a.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("circle",{cx:"12",cy:"16",r:"1"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("h1",{children:"Postavite lozinku"}),a.jsxs("div",{className:"driver-info-card",children:[a.jsxs("div",{className:"driver-detail",children:[a.jsx("span",{className:"detail-icon",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a.jsxs("span",{children:[a.jsx("strong",{children:"Voza:"})," ",t.ime]})]}),a.jsxs("div",{className:"driver-detail",children:[a.jsx("span",{className:"detail-icon",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 1v6m0 6v6"})]})}),a.jsxs("span",{children:[a.jsx("strong",{children:"Tura:"})," ",t.tura]})]})]}),a.jsx("p",{children:"Ovo je va prvi put. Molimo postavite lozinku za budui pristup."})]}),a.jsxs("form",{onSubmit:S,className:"setup-form",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"password",children:"Nova lozinka:"}),a.jsxs("div",{className:"input-wrapper",children:[a.jsx("input",{type:x?"text":"password",id:"password",value:s,onChange:y=>o(y.target.value),placeholder:"Unesite lozinku",disabled:r,autoFocus:!0}),a.jsx("div",{className:"input-icon",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("circle",{cx:"12",cy:"16",r:"1"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>P(!x),disabled:r,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:x?a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),a.jsx("path",{d:"m1 1 22 22"})]}):a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"confirmPassword",children:"Potvrdite lozinku:"}),a.jsxs("div",{className:"input-wrapper",children:[a.jsx("input",{type:b?"text":"password",id:"confirmPassword",value:c,onChange:y=>d(y.target.value),placeholder:"Ponovite lozinku",disabled:r}),a.jsx("div",{className:"input-icon",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 12l2 2 4-4"}),a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("circle",{cx:"12",cy:"16",r:"1"})]})}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>_(!b),disabled:r,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:b?a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),a.jsx("path",{d:"m1 1 22 22"})]}):a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]})]}),m&&a.jsxs("div",{className:"error-message",children:[a.jsx("div",{className:"error-icon",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),a.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),m]}),a.jsx("div",{className:"checkbox-group",children:a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:h,onChange:y=>f(y.target.checked),disabled:r}),a.jsx("div",{className:"checkbox-custom"}),a.jsx("span",{className:"checkbox-text",children:"Zapamti me"})]})}),a.jsxs("div",{className:"setup-actions",children:[a.jsxs("button",{type:"button",className:"back-btn",onClick:n,disabled:r,children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"m15 18-6-6 6-6"})}),"Nazad"]}),a.jsx("button",{type:"submit",className:"setup-btn",disabled:r||!s.trim()||!c.trim(),children:a.jsx("span",{className:"btn-content",children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"btn-spinner"}),"Postavljam i ulogujem..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),a.jsx("polyline",{points:"10,17 15,12 10,7"}),a.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),"Postavi lozinku i uloguj se"]})})})]})]}),a.jsx("div",{className:"setup-footer",children:a.jsx("p",{children:"Lozinka e biti automatski sauvana i ulogovani ete se odmah."})})]})})}function MP({onLogin:t,loading:e,onBack:n}){const[r,s]=C.useState(""),[o,c]=C.useState(""),[d,h]=C.useState(null),f=m=>{if(m.preventDefault(),!r.trim()){h("Molimo unesite vau turu");return}if(!o.trim()){h("Molimo unesite lozinku");return}h(null),t(r.trim().toUpperCase(),o)};return a.jsx("div",{className:"login-screen",children:a.jsxs("div",{className:"login-container",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("h1",{children:"Prijava"}),a.jsx("p",{children:"Unesite vau turu i lozinku za pristup aplikaciji."})]}),a.jsxs("form",{onSubmit:f,className:"login-form",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"tura",children:"Tura:"}),a.jsx("input",{type:"text",id:"tura",value:r,onChange:m=>s(m.target.value),placeholder:"npr. 8610",maxLength:"10",disabled:e,autoFocus:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"password",children:"Lozinka:"}),a.jsx("input",{type:"password",id:"password",value:o,onChange:m=>c(m.target.value),placeholder:"Vaa lozinka",disabled:e})]}),d&&a.jsx("div",{className:"error-message",children:d}),a.jsx("button",{type:"submit",className:"login-btn",disabled:e||!r.trim()||!o.trim(),children:e?"Prijavljivam...":"Prijavite se"})]}),a.jsx("div",{className:"login-footer",children:a.jsx("button",{type:"button",className:"back-btn",onClick:n,disabled:e,children:" Nazad"})})]})})}function AP({onAuthSuccess:t}){const[e,n]=C.useState("init"),[r,s]=C.useState(null),{loading:o,checkDriverExists:c,setInitialPassword:d,login:h}=Gp(),f=async _=>{try{const S=await c(_);s(S),n("confirm")}catch(S){console.error("Driver check failed:",S)}},m=()=>{r.hasPassword?n("login"):n("setup")},g=async(_,S=!1)=>{try{await d(r.id,_);const y=await h(r.tura,_);S&&localStorage.setItem("bde_remember_me","true"),t(y)}catch(y){console.error("Password setup failed:",y)}},x=async(_,S,y=!1)=>{try{const j=await h(_,S);y&&localStorage.setItem("bde_remember_me","true"),t(j)}catch(j){console.error("Login failed:",j)}},P=()=>{n("init"),s(null)},b=()=>{n("confirm")};return e==="init"?a.jsx(NP,{onDriverSelected:f,loading:o}):e==="confirm"?a.jsx(RP,{driver:r,onContinue:m,onLogin:x,onBack:P,loading:o}):e==="setup"?a.jsx(IP,{driver:r,onPasswordSet:g,onBack:b,loading:o}):e==="login"?a.jsx(MP,{onLogin:x,loading:o,onBack:b}):null}function DP({user:t,onChangePassword:e,onLogout:n}){const[r,s]=C.useState(!1),o=C.useRef(null),c=ks();C.useEffect(()=>{const h=f=>{o.current&&!o.current.contains(f.target)&&s(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const d=h=>{console.log("handleMenuItemClick pozvan sa action:",h),s(!1),h()};return a.jsxs("div",{className:"user-menu",ref:o,children:[a.jsxs("button",{className:"user-menu-trigger",onClick:()=>s(!r),"aria-expanded":r,children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{className:"user-name",children:t.name}),a.jsxs("span",{className:"user-tura",children:["(",t.username,")"]}),a.jsx("span",{className:`dropdown-arrow ${r?"open":""}`,children:""})]}),r&&a.jsxs("div",{className:"user-menu-dropdown",children:[a.jsxs("div",{className:"user-info",children:[a.jsx("div",{className:"user-detail",children:a.jsx("strong",{children:t.name})}),a.jsxs("div",{className:"user-detail",children:["Tura: ",t.username]}),a.jsxs("div",{className:"user-detail",children:["Uloga: ",t.role==="admin"?"Administrator":"Voza"]})]}),a.jsx("div",{className:"menu-divider"}),(t==null?void 0:t.role)==="admin"&&a.jsxs("button",{className:"menu-item",onClick:()=>d(()=>c("/admin")),children:[a.jsx("span",{className:"menu-icon","aria-hidden":"true",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19.14,12.94a7.07,7.07,0,0,0,.05-.94,7.07,7.07,0,0,0-.05-.94l2.11-1.65a.5.5,0,0,0,.12-.64l-2-3.46a.5.5,0,0,0-.6-.22l-2.49,1a7.18,7.18,0,0,0-1.63-.94l-.38-2.65A.5.5,0,0,0,13.7,2H10.3a.5.5,0,0,0-.49.42L9.43,5.07a7.18,7.18,0,0,0-1.63.94l-2.49-1a.5.5,0,0,0-.6.22l-2,3.46a.5.5,0,0,0,.12.64L5,11.06a7.07,7.07,0,0,0-.05.94,7.07,7.07,0,0,0,.05.94L2.89,14.59a.5.5,0,0,0-.12.64l2,3.46a.5.5,0,0,0,.6.22l2.49-1a7.18,7.18,0,0,0,1.63.94l.38,2.65a.5.5,0,0,0,.49.42h3.4a.5.5,0,0,0,.49-.42l.38-2.65a7.18,7.18,0,0,0,1.63-.94l2.49,1a.5.5,0,0,0,.6-.22l2-3.46a.5.5,0,0,0-.12-.64ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"})})}),"Admin panel"]}),(t==null?void 0:t.role)!=="admin"&&a.jsxs("button",{className:"menu-item",onClick:()=>d(()=>c("/payroll")),children:[a.jsx("span",{className:"menu-icon","aria-hidden":"true",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2C13.1 2 14 2.9 14 4V8H18C19.1 8 20 8.9 20 10V20C20 21.1 19.1 22 18 22H6C4.9 22 4 21.1 4 20V10C4 8.9 4.9 8 6 8H10V4C10 2.9 10.9 2 12 2M12 4V8H12V4M6 10V20H18V10H6M8 12H16V14H8V12M8 16H16V18H8V16Z"})})}),"Platna Lista"]}),a.jsx("div",{className:"menu-divider"}),a.jsxs("button",{className:"menu-item",onClick:()=>d(e),children:[a.jsx("span",{className:"menu-icon","aria-hidden":"true",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 17a3 3 0 1 0-3-3h-1a4 4 0 1 1 7.9-1H20v6H8v-5h1a3 3 0 0 0 3 3z"})})}),"Promjena lozinke"]}),a.jsx("div",{className:"menu-divider"}),a.jsxs("button",{className:"menu-item logout",onClick:()=>d(n),children:[a.jsx("span",{className:"menu-icon","aria-hidden":"true",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M10 17v-3h4v-4h-4V7l-5 5 5 5zm9-12h-8v2h8v10h-8v2h8a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z"})})}),"Odjava"]})]})]})}const zP="_modalForm_1wken_3",BP="_inputGroup_1wken_18",$P="_inputLabel_1wken_25",FP="_inputWrapper_1wken_40",UP="_passwordInput_1wken_46",WP="_toggleButton_1wken_71",HP="_strengthIndicator_1wken_88",VP="_strengthWeak_1wken_96",qP="_strengthMedium_1wken_102",GP="_strengthStrong_1wken_108",ZP="_modalActions_1wken_114",KP="_cancelBtn_1wken_121",YP="_submitBtn_1wken_139",JP="_validationMessage_1wken_165",QP="_validationSuccess_1wken_175",XP="_validationError_1wken_181",e5="_formHeader_1wken_187",t5="_formTitle_1wken_192",n5="_formSubtitle_1wken_203",r5="_securityTips_1wken_209",De={modalForm:zP,inputGroup:BP,inputLabel:$P,inputWrapper:FP,passwordInput:UP,toggleButton:WP,strengthIndicator:HP,strengthWeak:VP,strengthMedium:qP,strengthStrong:GP,modalActions:ZP,cancelBtn:KP,submitBtn:YP,validationMessage:JP,validationSuccess:QP,validationError:XP,formHeader:e5,formTitle:t5,formSubtitle:n5,securityTips:r5},i5=({onClose:t,onSubmit:e})=>{const[n,r]=C.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[s,o]=C.useState({old:!1,new:!1,confirm:!1}),[c,d]=C.useState({}),[h,f]=C.useState(!1),m=y=>{if(!y)return null;let j=0;return y.length>=8&&j++,/[A-Z]/.test(y)&&j++,/[a-z]/.test(y)&&j++,/[0-9]/.test(y)&&j++,/[^A-Za-z0-9]/.test(y)&&j++,j<3?{level:"weak",text:" Slaba lozinka"}:j<4?{level:"medium",text:" Srednja lozinka"}:{level:"strong",text:" Jaka lozinka"}},g=()=>{const y={};return n.oldPassword||(y.oldPassword="Stara lozinka je obavezna"),n.newPassword?n.newPassword.length<6&&(y.newPassword="Nova lozinka mora imati najmanje 6 karaktera"):y.newPassword="Nova lozinka je obavezna",n.confirmPassword?n.newPassword!==n.confirmPassword&&(y.confirmPassword="Lozinke se ne poklapaju"):y.confirmPassword="Potvrda lozinke je obavezna",n.oldPassword===n.newPassword&&(y.newPassword="Nova lozinka mora biti razliita od stare"),d(y),Object.keys(y).length===0},x=(y,j)=>{r(k=>({...k,[y]:j})),c[y]&&d(k=>({...k,[y]:null}))},P=y=>{o(j=>({...j,[y]:!j[y]}))},b=async y=>{if(y.preventDefault(),!!g()){f(!0);try{await e(n),t()}catch(j){d({submit:j.message||"Greka pri promeni lozinke"})}finally{f(!1)}}},_=n.oldPassword&&n.newPassword&&n.confirmPassword&&n.newPassword===n.confirmPassword&&n.newPassword.length>=6&&n.oldPassword!==n.newPassword,S=m(n.newPassword);return a.jsxs("form",{className:De.modalForm,onSubmit:b,children:[a.jsxs("div",{className:De.formHeader,children:[a.jsx("h2",{className:De.formTitle,children:" Promena lozinke"}),a.jsx("p",{className:De.formSubtitle,children:"Unesite staru lozinku i definiite novu sigurnu lozinku"})]}),a.jsxs("div",{className:De.inputGroup,children:[a.jsx("label",{className:De.inputLabel,htmlFor:"oldPassword",children:"Trenutna lozinka"}),a.jsxs("div",{className:De.inputWrapper,children:[a.jsx("input",{id:"oldPassword",type:s.old?"text":"password",value:n.oldPassword,onChange:y=>x("oldPassword",y.target.value),placeholder:"Unesite trenutnu lozinku",className:De.passwordInput,autoComplete:"current-password"}),a.jsx("button",{type:"button",className:De.toggleButton,onClick:()=>P("old"),"aria-label":"Prikai/sakrij lozinku",children:s.old?"":""})]}),c.oldPassword&&a.jsxs("div",{className:`${De.validationMessage} ${De.validationError}`,children:[" ",c.oldPassword]})]}),a.jsxs("div",{className:De.inputGroup,children:[a.jsx("label",{className:De.inputLabel,htmlFor:"newPassword",children:"Nova lozinka"}),a.jsxs("div",{className:De.inputWrapper,children:[a.jsx("input",{id:"newPassword",type:s.new?"text":"password",value:n.newPassword,onChange:y=>x("newPassword",y.target.value),placeholder:"Unesite novu lozinku",className:De.passwordInput,autoComplete:"new-password"}),a.jsx("button",{type:"button",className:De.toggleButton,onClick:()=>P("new"),"aria-label":"Prikai/sakrij lozinku",children:s.new?"":""})]}),S&&a.jsx("div",{className:`${De.strengthIndicator} ${De[`strength${S.level.charAt(0).toUpperCase()+S.level.slice(1)}`]}`,children:S.text}),c.newPassword&&a.jsxs("div",{className:`${De.validationMessage} ${De.validationError}`,children:[" ",c.newPassword]})]}),a.jsxs("div",{className:De.inputGroup,children:[a.jsx("label",{className:De.inputLabel,htmlFor:"confirmPassword",children:"Potvrdite novu lozinku"}),a.jsxs("div",{className:De.inputWrapper,children:[a.jsx("input",{id:"confirmPassword",type:s.confirm?"text":"password",value:n.confirmPassword,onChange:y=>x("confirmPassword",y.target.value),placeholder:"Ponovite novu lozinku",className:De.passwordInput,autoComplete:"new-password"}),a.jsx("button",{type:"button",className:De.toggleButton,onClick:()=>P("confirm"),"aria-label":"Prikai/sakrij lozinku",children:s.confirm?"":""})]}),n.confirmPassword&&n.newPassword===n.confirmPassword&&a.jsx("div",{className:`${De.validationMessage} ${De.validationSuccess}`,children:" Lozinke se poklapaju"}),c.confirmPassword&&a.jsxs("div",{className:`${De.validationMessage} ${De.validationError}`,children:[" ",c.confirmPassword]})]}),a.jsxs("div",{className:De.securityTips,children:[a.jsx("h4",{children:" Saveti za sigurnu lozinku:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Najmanje 8 karaktera"}),a.jsx("li",{children:"Kombinacija velikih i malih slova"}),a.jsx("li",{children:"Brojevi i specijalni karakteri (!@#$%)"}),a.jsx("li",{children:"Izbegavajte line podatke"})]})]}),c.submit&&a.jsxs("div",{className:`${De.validationMessage} ${De.validationError}`,children:[" ",c.submit]}),a.jsxs("div",{className:De.modalActions,children:[a.jsx("button",{type:"button",className:De.cancelBtn,onClick:t,disabled:h,children:" Otkai"}),a.jsx("button",{type:"submit",className:De.submitBtn,disabled:!_||h,children:h?" Menjam...":" Promeni lozinku"})]})]})},A1=6048e5,s5=864e5,zv=Symbol.for("constructDateFrom");function Fr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&zv in t?t[zv](e):t instanceof Date?new t.constructor(e):new Date(e)}function Bn(t,e){return Fr(e||t,t)}function o5(t,e){const n=Bn(t,e==null?void 0:e.in).getDay();return n===0||n===6}let a5={};function Du(){return a5}function il(t,e){var d,h,f,m;const n=Du(),r=(e==null?void 0:e.weekStartsOn)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,s=Bn(t,e==null?void 0:e.in),o=s.getDay(),c=(o<r?7:0)+o-r;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function du(t,e){return il(t,{...e,weekStartsOn:1})}function D1(t,e){const n=Bn(t,e==null?void 0:e.in),r=n.getFullYear(),s=Fr(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const o=du(s),c=Fr(n,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const d=du(c);return n.getTime()>=o.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function Bv(t){const e=Bn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function z1(t,...e){const n=Fr.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function $v(t,e){const n=Bn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function l5(t,e,n){const[r,s]=z1(n==null?void 0:n.in,t,e),o=$v(r),c=$v(s),d=+o-Bv(o),h=+c-Bv(c);return Math.round((d-h)/s5)}function c5(t,e){const n=D1(t,e),r=Fr(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),du(r)}function u5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function d5(t){return!(!u5(t)&&typeof t!="number"||isNaN(+Bn(t)))}function h5(t,e){const[n,r]=z1(t,e.start,e.end);return{start:n,end:r}}function f5(t,e){const{start:n,end:r}=h5(e==null?void 0:e.in,t);let s=+n>+r;const o=s?+n:+r,c=s?r:n;c.setHours(0,0,0,0);let d=1;const h=[];for(;+c<=o;)h.push(Fr(n,c)),c.setDate(c.getDate()+d),c.setHours(0,0,0,0);return s?h.reverse():h}function p5(t,e){const n=Bn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const m5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},g5=(t,e,n)=>{let r;const s=m5[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function sh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const v5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},y5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},x5={date:sh({formats:v5,defaultWidth:"full"}),time:sh({formats:y5,defaultWidth:"full"}),dateTime:sh({formats:_5,defaultWidth:"full"})},w5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},b5=(t,e,n,r)=>w5[t];function ga(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,d=n!=null&&n.width?String(n.width):c;s=t.formattingValues[d]||t.formattingValues[c]}else{const c=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[d]||t.values[c]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const j5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},k5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},S5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},C5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},P5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},E5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},T5=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},L5={ordinalNumber:T5,era:ga({values:j5,defaultWidth:"wide"}),quarter:ga({values:k5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ga({values:S5,defaultWidth:"wide"}),day:ga({values:C5,defaultWidth:"wide"}),dayPeriod:ga({values:P5,defaultWidth:"wide",formattingValues:E5,defaultFormattingWidth:"wide"})};function va(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],d=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(d)?N5(d,g=>g.test(c)):O5(d,g=>g.test(c));let f;f=t.valueCallback?t.valueCallback(h):h,f=n.valueCallback?n.valueCallback(f):f;const m=e.slice(c.length);return{value:f,rest:m}}}function O5(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function N5(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function R5(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],o=e.match(t.parsePattern);if(!o)return null;let c=t.valueCallback?t.valueCallback(o[0]):o[0];c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(s.length);return{value:c,rest:d}}}const I5=/^(\d+)(th|st|nd|rd)?/i,M5=/\d+/i,A5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},D5={any:[/^b/i,/^(a|c)/i]},z5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},B5={any:[/1/i,/2/i,/3/i,/4/i]},$5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},F5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},U5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},W5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},H5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},V5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},q5={ordinalNumber:R5({matchPattern:I5,parsePattern:M5,valueCallback:t=>parseInt(t,10)}),era:va({matchPatterns:A5,defaultMatchWidth:"wide",parsePatterns:D5,defaultParseWidth:"any"}),quarter:va({matchPatterns:z5,defaultMatchWidth:"wide",parsePatterns:B5,defaultParseWidth:"any",valueCallback:t=>t+1}),month:va({matchPatterns:$5,defaultMatchWidth:"wide",parsePatterns:F5,defaultParseWidth:"any"}),day:va({matchPatterns:U5,defaultMatchWidth:"wide",parsePatterns:W5,defaultParseWidth:"any"}),dayPeriod:va({matchPatterns:H5,defaultMatchWidth:"any",parsePatterns:V5,defaultParseWidth:"any"})},G5={code:"en-US",formatDistance:g5,formatLong:x5,formatRelative:b5,localize:L5,match:q5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Z5(t,e){const n=Bn(t,e==null?void 0:e.in);return l5(n,p5(n))+1}function K5(t,e){const n=Bn(t,e==null?void 0:e.in),r=+du(n)-+c5(n);return Math.round(r/A1)+1}function B1(t,e){var m,g,x,P;const n=Bn(t,e==null?void 0:e.in),r=n.getFullYear(),s=Du(),o=(e==null?void 0:e.firstWeekContainsDate)??((g=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??s.firstWeekContainsDate??((P=(x=s.locale)==null?void 0:x.options)==null?void 0:P.firstWeekContainsDate)??1,c=Fr((e==null?void 0:e.in)||t,0);c.setFullYear(r+1,0,o),c.setHours(0,0,0,0);const d=il(c,e),h=Fr((e==null?void 0:e.in)||t,0);h.setFullYear(r,0,o),h.setHours(0,0,0,0);const f=il(h,e);return+n>=+d?r+1:+n>=+f?r:r-1}function Y5(t,e){var d,h,f,m;const n=Du(),r=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,s=B1(t,e),o=Fr((e==null?void 0:e.in)||t,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),il(o,e)}function J5(t,e){const n=Bn(t,e==null?void 0:e.in),r=+il(n,e)-+Y5(n,e);return Math.round(r/A1)+1}function Ze(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Yr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ze(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ze(n+1,2)},d(t,e){return Ze(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ze(t.getHours()%12||12,e.length)},H(t,e){return Ze(t.getHours(),e.length)},m(t,e){return Ze(t.getMinutes(),e.length)},s(t,e){return Ze(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ze(s,e.length)}},Hs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fv={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Yr.y(t,e)},Y:function(t,e,n,r){const s=B1(t,r),o=s>0?s:1-s;if(e==="YY"){const c=o%100;return Ze(c,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Ze(o,e.length)},R:function(t,e){const n=D1(t);return Ze(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ze(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ze(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ze(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Yr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ze(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=J5(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Ze(s,e.length)},I:function(t,e,n){const r=K5(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ze(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Yr.d(t,e)},D:function(t,e,n){const r=Z5(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ze(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Ze(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Ze(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Ze(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Hs.noon:r===0?s=Hs.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Hs.evening:r>=12?s=Hs.afternoon:r>=4?s=Hs.morning:s=Hs.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Yr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Yr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ze(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ze(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Yr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Yr.s(t,e)},S:function(t,e){return Yr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Wv(r);case"XXXX":case"XX":return Gi(r);case"XXXXX":case"XXX":default:return Gi(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Wv(r);case"xxxx":case"xx":return Gi(r);case"xxxxx":case"xxx":default:return Gi(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Uv(r,":");case"OOOO":default:return"GMT"+Gi(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Uv(r,":");case"zzzz":default:return"GMT"+Gi(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Ze(r,e.length)},T:function(t,e,n){return Ze(+t,e.length)}};function Uv(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+e+Ze(o,2)}function Wv(t,e){return t%60===0?(t>0?"-":"+")+Ze(Math.abs(t)/60,2):Gi(t,e)}function Gi(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Ze(Math.trunc(r/60),2),o=Ze(r%60,2);return n+s+e+o}const Hv=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},$1=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Q5=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Hv(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Hv(r,e)).replace("{{time}}",$1(s,e))},X5={p:$1,P:Q5},eE=/^D+$/,tE=/^Y+$/,nE=["D","DD","YY","YYYY"];function rE(t){return eE.test(t)}function iE(t){return tE.test(t)}function sE(t,e,n){const r=oE(t,e,n);if(console.warn(r),nE.includes(t))throw new RangeError(r)}function oE(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const aE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cE=/^'([^]*?)'?$/,uE=/''/g,dE=/[a-zA-Z]/;function ft(t,e,n){var m,g,x,P;const r=Du(),s=r.locale??G5,o=r.firstWeekContainsDate??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,c=r.weekStartsOn??((P=(x=r.locale)==null?void 0:x.options)==null?void 0:P.weekStartsOn)??0,d=Bn(t,n==null?void 0:n.in);if(!d5(d))throw new RangeError("Invalid time value");let h=e.match(lE).map(b=>{const _=b[0];if(_==="p"||_==="P"){const S=X5[_];return S(b,s.formatLong)}return b}).join("").match(aE).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const _=b[0];if(_==="'")return{isToken:!1,value:hE(b)};if(Fv[_])return{isToken:!0,value:b};if(_.match(dE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(h=s.localize.preprocessor(d,h));const f={firstWeekContainsDate:o,weekStartsOn:c,locale:s};return h.map(b=>{if(!b.isToken)return b.value;const _=b.value;(iE(_)||rE(_))&&sE(_,e,String(t));const S=Fv[_[0]];return S(d,_,s.localize,f)}).join("")}function hE(t){const e=t.match(cE);return e?e[1].replace(uE,"'"):t}function Si({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M7 4V2C7 1.44772 7.44772 1 8 1S9 1.44772 9 2V4H15V2C15 1.44772 15.4477 1 16 1S17 1.44772 17 2V4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4H7Z",fill:"url(#cal-gradient)"}),a.jsx("path",{d:"M3 10H21V8H3V10Z",fill:"#fff",fillOpacity:"0.3"}),a.jsx("circle",{cx:"8",cy:"13",r:"1",fill:"#fff"}),a.jsx("circle",{cx:"12",cy:"13",r:"1",fill:"#fff"}),a.jsx("circle",{cx:"16",cy:"13",r:"1",fill:"#fff"}),a.jsx("circle",{cx:"8",cy:"17",r:"1",fill:"#fff"}),a.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"#fff"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"cal-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#667eea"}),a.jsx("stop",{offset:"100%",stopColor:"#764ba2"})]})})]})}function Io({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"12",cy:"8",r:"4",fill:"url(#driver-gradient)"}),a.jsx("path",{d:"M5 18C5 15.7909 6.79086 14 9 14H15C17.2091 14 19 15.7909 19 18V20C19 21.1046 18.1046 22 17 22H7C5.89543 22 5 21.1046 5 20V18Z",fill:"url(#driver-gradient)"}),a.jsx("ellipse",{cx:"12",cy:"8",rx:"2",ry:"2.5",fill:"#fff",fillOpacity:"0.3"}),a.jsx("rect",{x:"10",y:"16",width:"4",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.4"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"driver-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),a.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]})})]})}function fE({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M4 10C4 8.89543 4.89543 8 6 8H18C19.1046 8 20 8.89543 20 10V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V10Z",fill:"url(#rest-gradient)"}),a.jsx("ellipse",{cx:"12",cy:"12",rx:"6",ry:"2",fill:"#fff",fillOpacity:"0.3"}),a.jsx("path",{d:"M8 14C8 13.4477 8.44772 13 9 13H15C15.5523 13 16 13.4477 16 14V16C16 16.5523 15.5523 17 15 17H9C8.44772 17 8 16.5523 8 16V14Z",fill:"#fff",fillOpacity:"0.6"}),a.jsx("circle",{cx:"10",cy:"15",r:"0.5",fill:"url(#rest-gradient)"}),a.jsx("circle",{cx:"12",cy:"15",r:"0.5",fill:"url(#rest-gradient)"}),a.jsx("circle",{cx:"14",cy:"15",r:"0.5",fill:"url(#rest-gradient)"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"rest-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),a.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}function Zp({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M5 14C5 13.4477 5.44772 13 6 13H8C8.55228 13 9 13.4477 9 14V20C9 20.5523 8.55228 21 8 21H6C5.44772 21 5 20.5523 5 20V14Z",fill:"url(#stats-gradient1)"}),a.jsx("path",{d:"M10.5 10C10.5 9.44772 10.9477 9 11.5 9H13.5C14.0523 9 14.5 9.44772 14.5 10V20C14.5 20.5523 14.0523 21 13.5 21H11.5C10.9477 21 10.5 20.5523 10.5 20V10Z",fill:"url(#stats-gradient2)"}),a.jsx("path",{d:"M16 6C16 5.44772 16.4477 5 17 5H19C19.5523 5 20 5.44772 20 6V20C20 20.5523 19.5523 21 19 21H17C16.4477 21 16 20.5523 16 20V6Z",fill:"url(#stats-gradient3)"}),a.jsx("circle",{cx:"7",cy:"16",r:"1",fill:"#fff",fillOpacity:"0.4"}),a.jsx("circle",{cx:"12.5",cy:"13",r:"1",fill:"#fff",fillOpacity:"0.4"}),a.jsx("circle",{cx:"18",cy:"10",r:"1",fill:"#fff",fillOpacity:"0.4"}),a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"stats-gradient1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),a.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]}),a.jsxs("linearGradient",{id:"stats-gradient2",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#2196F3"}),a.jsx("stop",{offset:"100%",stopColor:"#1565C0"})]}),a.jsxs("linearGradient",{id:"stats-gradient3",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),a.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})]})]})}function pE({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"url(#package-gradient)"}),a.jsx("path",{d:"M2 17L12 22L22 17",stroke:"url(#package-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M2 12L12 17L22 12",stroke:"url(#package-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M12 12V22",stroke:"#fff",strokeWidth:"1",strokeOpacity:"0.5"}),a.jsx("circle",{cx:"12",cy:"7",r:"1",fill:"#fff",fillOpacity:"0.8"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"package-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),a.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}function Vv({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M5 11L6.5 6.5C6.78 5.61 7.61 5 8.54 5H15.46C16.39 5 17.22 5.61 17.5 6.5L19 11",stroke:"url(#car-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M3 11H21C21.55 11 22 11.45 22 12V16C22 17.1 21.1 18 20 18H19",stroke:"url(#car-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M5 18H4C2.9 18 2 17.1 2 16V12C2 11.45 2.45 11 3 11",stroke:"url(#car-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"7",cy:"18",r:"2",fill:"url(#car-gradient)"}),a.jsx("circle",{cx:"17",cy:"18",r:"2",fill:"url(#car-gradient)"}),a.jsx("rect",{x:"8",y:"7",width:"8",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.6"}),a.jsx("circle",{cx:"7",cy:"18",r:"1",fill:"#fff",fillOpacity:"0.8"}),a.jsx("circle",{cx:"17",cy:"18",r:"1",fill:"#fff",fillOpacity:"0.8"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"car-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#9C27B0"}),a.jsx("stop",{offset:"100%",stopColor:"#673AB7"})]})})]})}function mE({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"12",cy:"7",r:"3",fill:"url(#user-gradient)"}),a.jsx("path",{d:"M6 21V19C6 16.7909 7.79086 15 10 15H14C16.2091 15 18 16.7909 18 19V21",stroke:"url(#user-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"12",cy:"7",r:"1.5",fill:"#fff",fillOpacity:"0.6"}),a.jsx("path",{d:"M10 17H14C15.1 17 16 17.9 16 19V20H8V19C8 17.9 8.9 17 10 17Z",fill:"#fff",fillOpacity:"0.3"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"user-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#2196F3"}),a.jsx("stop",{offset:"100%",stopColor:"#1976D2"})]})})]})}function qv({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M12 2C15.31 2 18 4.69 18 8C18 13.25 12 22 12 22S6 13.25 6 8C6 4.69 8.69 2 12 2Z",fill:"url(#location-gradient)"}),a.jsx("circle",{cx:"12",cy:"8",r:"2.5",fill:"#fff",fillOpacity:"0.9"}),a.jsx("circle",{cx:"12",cy:"8",r:"1",fill:"url(#location-gradient)"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"location-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#E91E63"}),a.jsx("stop",{offset:"100%",stopColor:"#C2185B"})]})})]})}function Gv({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",fill:"url(#number-gradient)"}),a.jsx("rect",{x:"5",y:"8",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),a.jsx("rect",{x:"9",y:"8",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),a.jsx("rect",{x:"13",y:"8",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),a.jsx("rect",{x:"17",y:"8",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),a.jsx("rect",{x:"5",y:"12",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),a.jsx("rect",{x:"9",y:"12",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),a.jsx("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),a.jsx("rect",{x:"17",y:"12",width:"2",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.9"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"number-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),a.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}function Zv({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M9 4C10.1046 4 11 4.89543 11 6C11 7.10457 10.1046 8 9 8C7.89543 8 7 7.10457 7 6C7 4.89543 7.89543 4 9 4Z",fill:"url(#route-gradient)"}),a.jsx("path",{d:"M15 16C16.1046 16 17 16.8954 17 18C17 19.1046 16.1046 20 15 20C13.8954 20 13 19.1046 13 18C13 16.8954 13.8954 16 15 16Z",fill:"url(#route-gradient)"}),a.jsx("path",{d:"M9 8L9 10C9 11.1046 9.89543 12 11 12L13 12C14.1046 12 15 12.8954 15 14L15 16",stroke:"url(#route-gradient)",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("circle",{cx:"9",cy:"6",r:"1.5",fill:"#fff",fillOpacity:"0.8"}),a.jsx("circle",{cx:"15",cy:"18",r:"1.5",fill:"#fff",fillOpacity:"0.8"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"route-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),a.jsx("stop",{offset:"100%",stopColor:"#388E3C"})]})})]})}function Kv({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"url(#money-gradient)"}),a.jsx("path",{d:"M12 6V8M12 16V18M16 12H18M6 12H8",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("path",{d:"M9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12Z",stroke:"#fff",strokeWidth:"1.5"}),a.jsx("text",{x:"12",y:"13",textAnchor:"middle",dy:"0.3em",fontSize:"6",fill:"#fff",fontWeight:"bold",children:""}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"money-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),a.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]})})]})}function oh({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"url(#pending-gradient)"}),a.jsx("path",{d:"M12 7V12L16 16",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#fff"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"pending-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),a.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}function Yv({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"url(#approved-gradient)"}),a.jsx("path",{d:"M9 12L11 14L15 10",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"12",cy:"12",r:"6",stroke:"#fff",strokeWidth:"0.5",opacity:"0.3"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"approved-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),a.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]})})]})}function gE({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",fill:"url(#total-gradient)"}),a.jsx("path",{d:"M7 8H17M7 12H17M7 16H13",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("circle",{cx:"18",cy:"6",r:"3",fill:"#4CAF50"}),a.jsx("text",{x:"18",y:"7",textAnchor:"middle",dy:"0.3em",fontSize:"8",fill:"#fff",fontWeight:"bold",children:""}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"total-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#9C27B0"}),a.jsx("stop",{offset:"100%",stopColor:"#673AB7"})]})})]})}function vE({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"3",y:"6",width:"18",height:"14",rx:"3",fill:"url(#today-gradient)"}),a.jsx("rect",{x:"7",y:"2",width:"2",height:"6",rx:"1",fill:"url(#today-gradient)"}),a.jsx("rect",{x:"15",y:"2",width:"2",height:"6",rx:"1",fill:"url(#today-gradient)"}),a.jsx("rect",{x:"3",y:"10",width:"18",height:"2",fill:"#fff",fillOpacity:"0.3"}),a.jsx("circle",{cx:"12",cy:"15",r:"3",fill:"#fff",fillOpacity:"0.9"}),a.jsx("path",{d:"M10.5 15L11.5 16L13.5 14",stroke:"url(#today-gradient)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"today-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#2196F3"}),a.jsx("stop",{offset:"100%",stopColor:"#1565C0"})]})})]})}function yE({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"3",y:"6",width:"18",height:"14",rx:"3",fill:"url(#month-gradient)"}),a.jsx("rect",{x:"7",y:"2",width:"2",height:"6",rx:"1",fill:"url(#month-gradient)"}),a.jsx("rect",{x:"15",y:"2",width:"2",height:"6",rx:"1",fill:"url(#month-gradient)"}),a.jsx("rect",{x:"3",y:"10",width:"18",height:"2",fill:"#fff",fillOpacity:"0.3"}),a.jsx("circle",{cx:"8",cy:"14",r:"1",fill:"#fff",fillOpacity:"0.7"}),a.jsx("circle",{cx:"12",cy:"14",r:"1",fill:"#fff",fillOpacity:"0.7"}),a.jsx("circle",{cx:"16",cy:"14",r:"1",fill:"#fff",fillOpacity:"0.7"}),a.jsx("circle",{cx:"8",cy:"17",r:"1",fill:"#fff",fillOpacity:"0.7"}),a.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"#fff",fillOpacity:"0.9"}),a.jsx("circle",{cx:"16",cy:"17",r:"1",fill:"#fff",fillOpacity:"0.7"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"month-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),a.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}function _E({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"3",y:"6",width:"18",height:"14",rx:"3",fill:"url(#year-gradient)"}),a.jsx("rect",{x:"7",y:"2",width:"2",height:"6",rx:"1",fill:"url(#year-gradient)"}),a.jsx("rect",{x:"15",y:"2",width:"2",height:"6",rx:"1",fill:"url(#year-gradient)"}),a.jsx("rect",{x:"3",y:"10",width:"18",height:"2",fill:"#fff",fillOpacity:"0.3"}),a.jsx("path",{d:"M12 12C13.1046 12 14 12.8954 14 14V16C14 17.1046 13.1046 18 12 18C10.8954 18 10 17.1046 10 16V14C10 12.8954 10.8954 12 12 12Z",fill:"#fff",fillOpacity:"0.9"}),a.jsx("path",{d:"M9 14H15",stroke:"#fff",strokeWidth:"1",strokeOpacity:"0.7"}),a.jsx("circle",{cx:"12",cy:"15",r:"1",fill:"url(#year-gradient)"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"year-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#9C27B0"}),a.jsx("stop",{offset:"100%",stopColor:"#6A1B9A"})]})})]})}function F1({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"2",y:"8",width:"14",height:"8",rx:"2",fill:"url(#truck-gradient)"}),a.jsx("path",{d:"M16 10H19L21 12V16H19",stroke:"url(#truck-gradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),a.jsx("circle",{cx:"7",cy:"18",r:"2",fill:"url(#truck-gradient)"}),a.jsx("circle",{cx:"17",cy:"18",r:"2",fill:"url(#truck-gradient)"}),a.jsx("rect",{x:"4",y:"10",width:"8",height:"4",rx:"1",fill:"#fff",fillOpacity:"0.3"}),a.jsx("rect",{x:"5",y:"11",width:"2",height:"2",rx:"0.5",fill:"#fff",fillOpacity:"0.7"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"truck-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),a.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]})})]})}function xE({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"url(#target-gradient)"}),a.jsx("circle",{cx:"12",cy:"12",r:"6",fill:"#fff",fillOpacity:"0.3"}),a.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#fff",fillOpacity:"0.6"}),a.jsx("circle",{cx:"12",cy:"12",r:"1",fill:"url(#target-gradient)"}),a.jsx("path",{d:"M12 3V6M12 18V21M3 12H6M18 12H21",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeOpacity:"0.7"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"target-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#FF5722"}),a.jsx("stop",{offset:"100%",stopColor:"#D32F2F"})]})})]})}function Lc({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",fill:"url(#settings-gradient)"}),a.jsx("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.2578 9.77251 19.9887C9.5799 19.7197 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z",fill:"url(#settings-gradient)"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"settings-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),a.jsx("stop",{offset:"100%",stopColor:"#4338CA"})]})})]})}const wE="_deliv_2r1xc_4",bE="_statLabel_2r1xc_4",jE="_monthYearPicker_2r1xc_11",kE="_statCard_2r1xc_16",SE="_monthSelect_2r1xc_22",CE="_yearSelect_2r1xc_23",PE="_deliveriesScreen_2r1xc_35",EE="_mainGrid_2r1xc_65",TE="_headerCard_2r1xc_76",LE="_heroSection_2r1xc_88",OE="_heroTitle_2r1xc_97",NE="_refreshButton_2r1xc_109",RE="_spin_2r1xc_1",IE="_statsGrid_2r1xc_142",ME="_statIcon_2r1xc_164",AE="_statValue_2r1xc_171",DE="_filtersRow_2r1xc_208",zE="_filterSelect_2r1xc_214",BE="_dataCard_2r1xc_232",$E="_mobileCards_2r1xc_243",FE="_dayCard_2r1xc_249",UE="_holiday_2r1xc_264",WE="_totalHigh_2r1xc_269",HE="_totalLow_2r1xc_274",VE="_dayCardHeader_2r1xc_279",qE="_dayCardBody_2r1xc_291",GE="_driverRow_2r1xc_297",ZE="_driverInfo_2r1xc_305",KE="_driverName_2r1xc_311",YE="_driverTura_2r1xc_316",JE="_driverValue_2r1xc_322",QE="_success_2r1xc_331",XE="_warning_2r1xc_337",eT="_empty_2r1xc_343",tT="_dayTotal_2r1xc_348",nT="_dayTotalTotalHigh_2r1xc_358",rT="_dayTotalTotalLow_2r1xc_366",iT="_tableWrapper_2r1xc_375",sT="_table_2r1xc_375",oT="_tableDriverHeader_2r1xc_405",aT="_tableDriverName_2r1xc_412",lT="_tableDriverTura_2r1xc_417",cT="_cellSuccess_2r1xc_430",uT="_cellWarning_2r1xc_436",dT="_cellEmpty_2r1xc_442",hT="_holidayRow_2r1xc_447",fT="_footerRow_2r1xc_452",pT="_footerCell_2r1xc_457",mT="_bilansSuccess_2r1xc_485",gT="_bilansWarning_2r1xc_490",vT="_loadingContainer_2r1xc_496",yT="_emptyState_2r1xc_504",_T="_dateCard_2r1xc_545",xT="_closeButton_2r1xc_649",wT="_strongPulse_2r1xc_1",bT="_strongBounce_2r1xc_1",he={deliv:wE,statLabel:bE,monthYearPicker:jE,statCard:kE,monthSelect:SE,yearSelect:CE,deliveriesScreen:PE,mainGrid:EE,headerCard:TE,heroSection:LE,heroTitle:OE,refreshButton:NE,spin:RE,statsGrid:IE,statIcon:ME,statValue:AE,filtersRow:DE,filterSelect:zE,dataCard:BE,mobileCards:$E,dayCard:FE,holiday:UE,totalHigh:WE,totalLow:HE,dayCardHeader:VE,dayCardBody:qE,driverRow:GE,driverInfo:ZE,driverName:KE,driverTura:YE,driverValue:JE,success:QE,warning:XE,empty:eT,dayTotal:tT,dayTotalTotalHigh:nT,dayTotalTotalLow:rT,tableWrapper:iT,table:sT,tableDriverHeader:oT,tableDriverName:aT,tableDriverTura:lT,cellSuccess:cT,cellWarning:uT,cellEmpty:dT,holidayRow:hT,footerRow:fT,footerCell:pT,bilansSuccess:mT,bilansWarning:gT,loadingContainer:vT,emptyState:yT,dateCard:_T,closeButton:xT,strongPulse:wT,strongBounce:bT};function U1(t,e,n=[]){return C.useMemo(()=>{const r=new Date(t,e,1),s=new Date(t,e+1,0);return f5({start:r,end:s}).filter(c=>!o5(c)&&!(n||[]).includes(ft(c,"yyyy-MM-dd")))},[t,e,n])}function W1({width:t=75,height:e=48}){return a.jsx("div",{style:{width:t,height:e,backgroundColor:"#e0e0e0",borderRadius:8,margin:"0 2px",animation:"skeletonPulse 1.6s infinite ease-in-out",opacity:.7}})}function H1({syncStatus:t}){const e=t.unsyncedCount===0,n=e?"100%":"30%",r=e?"#4caf50":"#f44336";return a.jsx("div",{style:{width:"100%",height:6,backgroundColor:"#e0e0e0",borderRadius:3,overflow:"hidden"},children:a.jsx("div",{style:{height:"100%",borderRadius:3,width:n,backgroundColor:r,transition:"width 1s, background-color 1s"}})})}function V1({visible:t,onClose:e,children:n,title:r,icon:s}){return t?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backdropFilter:"blur(8px)",background:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",padding:20},children:a.jsxs("div",{style:{width:"100%",maxWidth:400,borderRadius:20,background:"linear-gradient(180deg, #fff 0%, #f8f9fa 100%)",boxShadow:"0 4px 24px rgba(0,0,0,0.15)"},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:20},children:[s,a.jsx("span",{style:{fontSize:20,fontWeight:"bold",color:"#333",flex:1,textAlign:"center",margin:"0 10px"},children:r}),a.jsx("button",{onClick:e,style:{width:32,height:32,borderRadius:16,background:"#f5f5f5",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},"aria-label":"Zatvori modal",children:a.jsx("span",{style:{fontSize:24,color:"#999"},children:""})})]}),n]})}):null}const Kp=()=>null,jT="_monthYearPicker_1f7zg_3",kT="_inputWrapper_1f7zg_12",ST="_modalOverlay_1f7zg_28",CT="_pickerDropdown_1f7zg_58",PT="_modalHeader_1f7zg_89",ET="_modalTitle_1f7zg_99",TT="_closeButton_1f7zg_111",LT="_monthsSection_1f7zg_135",OT="_yearsSection_1f7zg_136",NT="_monthsGrid_1f7zg_146",RT="_monthButton_1f7zg_152",IT="_selected_1f7zg_190",MT="_positive_1f7zg_202",AT="_negative_1f7zg_214",DT="_neutral_1f7zg_226",zT="_current_1f7zg_233",BT="_yearsGrid_1f7zg_262",$T="_yearButton_1f7zg_268",FT="_loadingDot_1f7zg_415",bt={monthYearPicker:jT,inputWrapper:kT,modalOverlay:ST,pickerDropdown:CT,modalHeader:PT,modalTitle:ET,closeButton:TT,monthsSection:LT,yearsSection:OT,monthsGrid:NT,monthButton:RT,selected:IT,positive:MT,negative:AT,neutral:DT,current:zT,yearsGrid:BT,yearButton:$T,loadingDot:FT},UT=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],Yp=({month:t,year:e,onMonthChange:n,onYearChange:r,monthlyPerformance:s={},isLoadingPerformance:o=!1,className:c=""})=>{const[d,h]=C.useState(!1),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{const _=S=>{f.current&&!f.current.contains(S.target)&&m.current&&!m.current.contains(S.target)&&h(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const g=()=>{h(!d)},x=_=>{n(_),h(!1)},P=_=>{r(_),h(!1)},b=_=>{const S=new Date,y=S.getMonth(),j=S.getFullYear();if(_===y&&e===j)return bt.current;const k=s[_];return!k||k.change===void 0?"":k.change>0?bt.positive:k.change<0?bt.negative:bt.neutral};return a.jsxs("div",{className:`${bt.monthYearPicker} ${c}`,ref:m,children:[a.jsx("div",{className:bt.inputWrapper,onClick:g}),d&&Lu.createPortal(a.jsx("div",{className:bt.modalOverlay,onClick:()=>h(!1),children:a.jsxs("div",{className:bt.pickerDropdown,ref:f,onClick:_=>_.stopPropagation(),children:[a.jsxs("div",{className:bt.modalHeader,children:[a.jsx("h3",{className:bt.modalTitle,children:"Izaberi mesec i godinu"}),a.jsx("button",{className:bt.closeButton,onClick:()=>h(!1),type:"button",children:""})]}),a.jsx("div",{className:bt.monthsSection,children:a.jsx("div",{className:bt.monthsGrid,children:UT.map((_,S)=>{const y=b(S);return a.jsxs("button",{className:`${bt.monthButton} ${S===t?bt.selected:""} ${y}`,onClick:()=>x(S),type:"button",disabled:o,children:[_,o&&a.jsx("span",{className:bt.loadingDot,children:""})]},S)})})}),a.jsx("div",{className:bt.yearsSection,children:a.jsx("div",{className:bt.yearsGrid,children:[2023,2024,2025,2026,2027].map(_=>a.jsx("button",{className:`${bt.yearButton} ${_===e?bt.selected:""}`,onClick:()=>P(_),type:"button",children:_},_))})})]})}),document.body)]})};var bl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},WT={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ii,Wf,O0,HT=(O0=class{constructor(){je(this,ii,WT);je(this,Wf,!1)}setTimeoutProvider(t){le(this,ii,t)}setTimeout(t,e){return B(this,ii).setTimeout(t,e)}clearTimeout(t){B(this,ii).clearTimeout(t)}setInterval(t,e){return B(this,ii).setInterval(t,e)}clearInterval(t){B(this,ii).clearInterval(t)}},ii=new WeakMap,Wf=new WeakMap,O0),es=new HT;function VT(t){setTimeout(t,0)}var _s=typeof window>"u"||"Deno"in globalThis;function un(){}function qT(t,e){return typeof t=="function"?t(e):t}function wf(t){return typeof t=="number"&&t>=0&&t!==1/0}function q1(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ci(t,e){return typeof t=="function"?t(e):t}function Nn(t,e){return typeof t=="function"?t(e):t}function Jv(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:c,stale:d}=t;if(c){if(r){if(e.queryHash!==Jp(c,e.options))return!1}else if(!ol(e.queryKey,c))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||s&&s!==e.state.fetchStatus||o&&!o(e))}function Qv(t,e){const{exact:n,status:r,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(sl(e.options.mutationKey)!==sl(o))return!1}else if(!ol(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Jp(t,e){return((e==null?void 0:e.queryKeyHashFn)||sl)(t)}function sl(t){return JSON.stringify(t,(e,n)=>jf(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ol(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ol(t[n],e[n])):!1}var GT=Object.prototype.hasOwnProperty;function G1(t,e){if(t===e)return t;const n=Xv(t)&&Xv(e);if(!n&&!(jf(t)&&jf(e)))return e;const s=(n?t:Object.keys(t)).length,o=n?e:Object.keys(e),c=o.length,d=n?new Array(c):{};let h=0;for(let f=0;f<c;f++){const m=n?f:o[f],g=t[m],x=e[m];if(g===x){d[m]=g,(n?f<s:GT.call(t,m))&&h++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){d[m]=x;continue}const P=G1(g,x);d[m]=P,P===g&&h++}return s===c&&h===s?t:d}function bf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Xv(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function jf(t){if(!e0(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!e0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function e0(t){return Object.prototype.toString.call(t)==="[object Object]"}function ZT(t){return new Promise(e=>{es.setTimeout(e,t)})}function kf(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?G1(t,e):e}function KT(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function YT(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Qp=Symbol();function Z1(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Qp?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function JT(t,e){return typeof t=="function"?t(...e):!!t}var ns,si,po,N0,QT=(N0=class extends bl{constructor(){super();je(this,ns);je(this,si);je(this,po);le(this,po,e=>{if(!_s&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,si)||this.setEventListener(B(this,po))}onUnsubscribe(){var e;this.hasListeners()||((e=B(this,si))==null||e.call(this),le(this,si,void 0))}setEventListener(e){var n;le(this,po,e),(n=B(this,si))==null||n.call(this),le(this,si,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){B(this,ns)!==e&&(le(this,ns,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof B(this,ns)=="boolean"?B(this,ns):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ns=new WeakMap,si=new WeakMap,po=new WeakMap,N0),Xp=new QT;function Sf(){let t,e;const n=new Promise((s,o)=>{t=s,e=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var XT=VT;function e4(){let t=[],e=0,n=d=>{d()},r=d=>{d()},s=XT;const o=d=>{e?t.push(d):s(()=>{n(d)})},c=()=>{const d=t;t=[],d.length&&s(()=>{r(()=>{d.forEach(h=>{n(h)})})})};return{batch:d=>{let h;e++;try{h=d()}finally{e--,e||c()}return h},batchCalls:d=>(...h)=>{o(()=>{d(...h)})},schedule:o,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:d=>{s=d}}}var Bt=e4(),mo,oi,go,R0,t4=(R0=class extends bl{constructor(){super();je(this,mo,!0);je(this,oi);je(this,go);le(this,go,e=>{if(!_s&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){B(this,oi)||this.setEventListener(B(this,go))}onUnsubscribe(){var e;this.hasListeners()||((e=B(this,oi))==null||e.call(this),le(this,oi,void 0))}setEventListener(e){var n;le(this,go,e),(n=B(this,oi))==null||n.call(this),le(this,oi,e(this.setOnline.bind(this)))}setOnline(e){B(this,mo)!==e&&(le(this,mo,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return B(this,mo)}},mo=new WeakMap,oi=new WeakMap,go=new WeakMap,R0),hu=new t4;function n4(t){return Math.min(1e3*2**t,3e4)}function K1(t){return(t??"online")==="online"?hu.isOnline():!0}var Cf=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Y1(t){let e=!1,n=0,r;const s=Sf(),o=()=>s.status!=="pending",c=_=>{var S;if(!o()){const y=new Cf(_);x(y),(S=t.onCancel)==null||S.call(t,y)}},d=()=>{e=!0},h=()=>{e=!1},f=()=>Xp.isFocused()&&(t.networkMode==="always"||hu.isOnline())&&t.canRun(),m=()=>K1(t.networkMode)&&t.canRun(),g=_=>{o()||(r==null||r(),s.resolve(_))},x=_=>{o()||(r==null||r(),s.reject(_))},P=()=>new Promise(_=>{var S;r=y=>{(o()||f())&&_(y)},(S=t.onPause)==null||S.call(t)}).then(()=>{var _;r=void 0,o()||(_=t.onContinue)==null||_.call(t)}),b=()=>{if(o())return;let _;const S=n===0?t.initialPromise:void 0;try{_=S??t.fn()}catch(y){_=Promise.reject(y)}Promise.resolve(_).then(g).catch(y=>{var T;if(o())return;const j=t.retry??(_s?0:3),k=t.retryDelay??n4,O=typeof k=="function"?k(n,y):k,D=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,y);if(e||!D){x(y);return}n++,(T=t.onFail)==null||T.call(t,n,y),ZT(O).then(()=>f()?void 0:P()).then(()=>{e?x(y):b()})})};return{promise:s,status:()=>s.status,cancel:c,continue:()=>(r==null||r(),s),cancelRetry:d,continueRetry:h,canStart:m,start:()=>(m()?b():P().then(b),s)}}var rs,I0,J1=(I0=class{constructor(){je(this,rs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wf(this.gcTime)&&le(this,rs,es.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(_s?1/0:5*60*1e3))}clearGcTimeout(){B(this,rs)&&(es.clearTimeout(B(this,rs)),le(this,rs,void 0))}},rs=new WeakMap,I0),is,vo,On,ss,Nt,cl,os,Kn,Pr,M0,r4=(M0=class extends J1{constructor(e){super();je(this,Kn);je(this,is);je(this,vo);je(this,On);je(this,ss);je(this,Nt);je(this,cl);je(this,os);le(this,os,!1),le(this,cl,e.defaultOptions),this.setOptions(e.options),this.observers=[],le(this,ss,e.client),le(this,On,B(this,ss).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,le(this,is,t0(this.options)),this.state=e.state??B(this,is),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=B(this,Nt))==null?void 0:e.promise}setOptions(e){if(this.options={...B(this,cl),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=t0(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),le(this,is,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,On).remove(this)}setData(e,n){const r=kf(this.state.data,e,this.options);return Ae(this,Kn,Pr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ae(this,Kn,Pr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=B(this,Nt))==null?void 0:r.promise;return(s=B(this,Nt))==null||s.cancel(e),n?n.then(un).catch(un):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,is))}isActive(){return this.observers.some(e=>Nn(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ci(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!q1(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=B(this,Nt))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=B(this,Nt))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),B(this,On).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(B(this,Nt)&&(B(this,os)?B(this,Nt).cancel({revert:!0}):B(this,Nt).cancelRetry()),this.scheduleGc()),B(this,On).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ae(this,Kn,Pr).call(this,{type:"invalidate"})}async fetch(e,n){var h,f,m,g,x,P,b,_,S,y,j,k;if(this.state.fetchStatus!=="idle"&&((h=B(this,Nt))==null?void 0:h.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(B(this,Nt))return B(this,Nt).continueRetry(),B(this,Nt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const O=this.observers.find(D=>D.options.queryFn);O&&this.setOptions(O.options)}const r=new AbortController,s=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(le(this,os,!0),r.signal)})},o=()=>{const O=Z1(this.options,n),T=(()=>{const $={client:B(this,ss),queryKey:this.queryKey,meta:this.meta};return s($),$})();return le(this,os,!1),this.options.persister?this.options.persister(O,T,this):O(T)},d=(()=>{const O={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:B(this,ss),state:this.state,fetchFn:o};return s(O),O})();(f=this.options.behavior)==null||f.onFetch(d,this),le(this,vo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=d.fetchOptions)==null?void 0:m.meta))&&Ae(this,Kn,Pr).call(this,{type:"fetch",meta:(g=d.fetchOptions)==null?void 0:g.meta}),le(this,Nt,Y1({initialPromise:n==null?void 0:n.initialPromise,fn:d.fetchFn,onCancel:O=>{O instanceof Cf&&O.revert&&this.setState({...B(this,vo),fetchStatus:"idle"}),r.abort()},onFail:(O,D)=>{Ae(this,Kn,Pr).call(this,{type:"failed",failureCount:O,error:D})},onPause:()=>{Ae(this,Kn,Pr).call(this,{type:"pause"})},onContinue:()=>{Ae(this,Kn,Pr).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const O=await B(this,Nt).start();if(O===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(O),(P=(x=B(this,On).config).onSuccess)==null||P.call(x,O,this),(_=(b=B(this,On).config).onSettled)==null||_.call(b,O,this.state.error,this),O}catch(O){if(O instanceof Cf){if(O.silent)return B(this,Nt).promise;if(O.revert){if(this.state.data===void 0)throw O;return this.state.data}}throw Ae(this,Kn,Pr).call(this,{type:"error",error:O}),(y=(S=B(this,On).config).onError)==null||y.call(S,O,this),(k=(j=B(this,On).config).onSettled)==null||k.call(j,this.state.data,O,this),O}finally{this.scheduleGc()}}},is=new WeakMap,vo=new WeakMap,On=new WeakMap,ss=new WeakMap,Nt=new WeakMap,cl=new WeakMap,os=new WeakMap,Kn=new WeakSet,Pr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Q1(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return le(this,vo,e.manual?s:void 0),s;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Bt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),B(this,On).notify({query:this,type:"updated",action:e})})},M0);function Q1(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:K1(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function t0(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var cn,ze,ul,Xt,as,yo,Or,ai,dl,_o,xo,ls,cs,li,wo,Ge,ka,Pf,Ef,Tf,Lf,Of,Nf,Rf,X1,A0,i4=(A0=class extends bl{constructor(e,n){super();je(this,Ge);je(this,cn);je(this,ze);je(this,ul);je(this,Xt);je(this,as);je(this,yo);je(this,Or);je(this,ai);je(this,dl);je(this,_o);je(this,xo);je(this,ls);je(this,cs);je(this,li);je(this,wo,new Set);this.options=n,le(this,cn,e),le(this,ai,null),le(this,Or,Sf()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,ze).addObserver(this),n0(B(this,ze),this.options)?Ae(this,Ge,ka).call(this):this.updateResult(),Ae(this,Ge,Lf).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return If(B(this,ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return If(B(this,ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ae(this,Ge,Of).call(this),Ae(this,Ge,Nf).call(this),B(this,ze).removeObserver(this)}setOptions(e){const n=this.options,r=B(this,ze);if(this.options=B(this,cn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Nn(this.options.enabled,B(this,ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ae(this,Ge,Rf).call(this),B(this,ze).setOptions(this.options),n._defaulted&&!bf(this.options,n)&&B(this,cn).getQueryCache().notify({type:"observerOptionsUpdated",query:B(this,ze),observer:this});const s=this.hasListeners();s&&r0(B(this,ze),r,this.options,n)&&Ae(this,Ge,ka).call(this),this.updateResult(),s&&(B(this,ze)!==r||Nn(this.options.enabled,B(this,ze))!==Nn(n.enabled,B(this,ze))||Ci(this.options.staleTime,B(this,ze))!==Ci(n.staleTime,B(this,ze)))&&Ae(this,Ge,Pf).call(this);const o=Ae(this,Ge,Ef).call(this);s&&(B(this,ze)!==r||Nn(this.options.enabled,B(this,ze))!==Nn(n.enabled,B(this,ze))||o!==B(this,li))&&Ae(this,Ge,Tf).call(this,o)}getOptimisticResult(e){const n=B(this,cn).getQueryCache().build(B(this,cn),e),r=this.createResult(n,e);return o4(this,r)&&(le(this,Xt,r),le(this,yo,this.options),le(this,as,B(this,ze).state)),r}getCurrentResult(){return B(this,Xt)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&!this.options.experimental_prefetchInRender&&B(this,Or).status==="pending"&&B(this,Or).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(e){B(this,wo).add(e)}getCurrentQuery(){return B(this,ze)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=B(this,cn).defaultQueryOptions(e),r=B(this,cn).getQueryCache().build(B(this,cn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ae(this,Ge,ka).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,Xt)))}createResult(e,n){var I;const r=B(this,ze),s=this.options,o=B(this,Xt),c=B(this,as),d=B(this,yo),f=e!==r?e.state:B(this,ul),{state:m}=e;let g={...m},x=!1,P;if(n._optimisticResults){const R=this.hasListeners(),A=!R&&n0(e,n),G=R&&r0(e,r,n,s);(A||G)&&(g={...g,...Q1(m.data,e.options)}),n._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:b,errorUpdatedAt:_,status:S}=g;P=g.data;let y=!1;if(n.placeholderData!==void 0&&P===void 0&&S==="pending"){let R;o!=null&&o.isPlaceholderData&&n.placeholderData===(d==null?void 0:d.placeholderData)?(R=o.data,y=!0):R=typeof n.placeholderData=="function"?n.placeholderData((I=B(this,xo))==null?void 0:I.state.data,B(this,xo)):n.placeholderData,R!==void 0&&(S="success",P=kf(o==null?void 0:o.data,R,n),x=!0)}if(n.select&&P!==void 0&&!y)if(o&&P===(c==null?void 0:c.data)&&n.select===B(this,dl))P=B(this,_o);else try{le(this,dl,n.select),P=n.select(P),P=kf(o==null?void 0:o.data,P,n),le(this,_o,P),le(this,ai,null)}catch(R){le(this,ai,R)}B(this,ai)&&(b=B(this,ai),P=B(this,_o),_=Date.now(),S="error");const j=g.fetchStatus==="fetching",k=S==="pending",O=S==="error",D=k&&j,T=P!==void 0,N={status:S,fetchStatus:g.fetchStatus,isPending:k,isSuccess:S==="success",isError:O,isInitialLoading:D,isLoading:D,data:P,dataUpdatedAt:g.dataUpdatedAt,error:b,errorUpdatedAt:_,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:j,isRefetching:j&&!k,isLoadingError:O&&!T,isPaused:g.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:O&&T,isStale:em(e,n),refetch:this.refetch,promise:B(this,Or),isEnabled:Nn(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const R=F=>{N.status==="error"?F.reject(N.error):N.data!==void 0&&F.resolve(N.data)},A=()=>{const F=le(this,Or,N.promise=Sf());R(F)},G=B(this,Or);switch(G.status){case"pending":e.queryHash===r.queryHash&&R(G);break;case"fulfilled":(N.status==="error"||N.data!==G.value)&&A();break;case"rejected":(N.status!=="error"||N.error!==G.reason)&&A();break}}return N}updateResult(){const e=B(this,Xt),n=this.createResult(B(this,ze),this.options);if(le(this,as,B(this,ze).state),le(this,yo,this.options),B(this,as).data!==void 0&&le(this,xo,B(this,ze)),bf(n,e))return;le(this,Xt,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!B(this,wo).size)return!0;const c=new Set(o??B(this,wo));return this.options.throwOnError&&c.add("error"),Object.keys(B(this,Xt)).some(d=>{const h=d;return B(this,Xt)[h]!==e[h]&&c.has(h)})};Ae(this,Ge,X1).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ae(this,Ge,Lf).call(this)}},cn=new WeakMap,ze=new WeakMap,ul=new WeakMap,Xt=new WeakMap,as=new WeakMap,yo=new WeakMap,Or=new WeakMap,ai=new WeakMap,dl=new WeakMap,_o=new WeakMap,xo=new WeakMap,ls=new WeakMap,cs=new WeakMap,li=new WeakMap,wo=new WeakMap,Ge=new WeakSet,ka=function(e){Ae(this,Ge,Rf).call(this);let n=B(this,ze).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(un)),n},Pf=function(){Ae(this,Ge,Of).call(this);const e=Ci(this.options.staleTime,B(this,ze));if(_s||B(this,Xt).isStale||!wf(e))return;const r=q1(B(this,Xt).dataUpdatedAt,e)+1;le(this,ls,es.setTimeout(()=>{B(this,Xt).isStale||this.updateResult()},r))},Ef=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(B(this,ze)):this.options.refetchInterval)??!1},Tf=function(e){Ae(this,Ge,Nf).call(this),le(this,li,e),!(_s||Nn(this.options.enabled,B(this,ze))===!1||!wf(B(this,li))||B(this,li)===0)&&le(this,cs,es.setInterval(()=>{(this.options.refetchIntervalInBackground||Xp.isFocused())&&Ae(this,Ge,ka).call(this)},B(this,li)))},Lf=function(){Ae(this,Ge,Pf).call(this),Ae(this,Ge,Tf).call(this,Ae(this,Ge,Ef).call(this))},Of=function(){B(this,ls)&&(es.clearTimeout(B(this,ls)),le(this,ls,void 0))},Nf=function(){B(this,cs)&&(es.clearInterval(B(this,cs)),le(this,cs,void 0))},Rf=function(){const e=B(this,cn).getQueryCache().build(B(this,cn),this.options);if(e===B(this,ze))return;const n=B(this,ze);le(this,ze,e),le(this,ul,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},X1=function(e){Bt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(B(this,Xt))}),B(this,cn).getQueryCache().notify({query:B(this,ze),type:"observerResultsUpdated"})})},A0);function s4(t,e){return Nn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function n0(t,e){return s4(t,e)||t.state.data!==void 0&&If(t,e,e.refetchOnMount)}function If(t,e,n){if(Nn(e.enabled,t)!==!1&&Ci(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&em(t,e)}return!1}function r0(t,e,n,r){return(t!==e||Nn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&em(t,n)}function em(t,e){return Nn(e.enabled,t)!==!1&&t.isStaleByTime(Ci(e.staleTime,t))}function o4(t,e){return!bf(t.getCurrentResult(),e)}function i0(t){return{onFetch:(e,n)=>{var m,g,x,P,b;const r=e.options,s=(x=(g=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:g.fetchMore)==null?void 0:x.direction,o=((P=e.state.data)==null?void 0:P.pages)||[],c=((b=e.state.data)==null?void 0:b.pageParams)||[];let d={pages:[],pageParams:[]},h=0;const f=async()=>{let _=!1;const S=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},y=Z1(e.options,e.fetchOptions),j=async(k,O,D)=>{if(_)return Promise.reject();if(O==null&&k.pages.length)return Promise.resolve(k);const $=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:O,direction:D?"backward":"forward",meta:e.options.meta};return S(A),A})(),N=await y($),{maxPages:I}=e.options,R=D?YT:KT;return{pages:R(k.pages,N,I),pageParams:R(k.pageParams,O,I)}};if(s&&o.length){const k=s==="backward",O=k?a4:s0,D={pages:o,pageParams:c},T=O(r,D);d=await j(D,T,k)}else{const k=t??o.length;do{const O=h===0?c[0]??r.initialPageParam:s0(r,d);if(h>0&&O==null)break;d=await j(d,O),h++}while(h<k)}return d};e.options.persister?e.fetchFn=()=>{var _,S;return(S=(_=e.options).persister)==null?void 0:S.call(_,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function s0(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function a4(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var hl,mr,en,us,gr,Qr,D0,l4=(D0=class extends J1{constructor(e){super();je(this,gr);je(this,hl);je(this,mr);je(this,en);je(this,us);le(this,hl,e.client),this.mutationId=e.mutationId,le(this,en,e.mutationCache),le(this,mr,[]),this.state=e.state||c4(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){B(this,mr).includes(e)||(B(this,mr).push(e),this.clearGcTimeout(),B(this,en).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){le(this,mr,B(this,mr).filter(n=>n!==e)),this.scheduleGc(),B(this,en).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){B(this,mr).length||(this.state.status==="pending"?this.scheduleGc():B(this,en).remove(this))}continue(){var e;return((e=B(this,us))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var c,d,h,f,m,g,x,P,b,_,S,y,j,k,O,D,T,$,N,I;const n=()=>{Ae(this,gr,Qr).call(this,{type:"continue"})},r={client:B(this,hl),meta:this.options.meta,mutationKey:this.options.mutationKey};le(this,us,Y1({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(R,A)=>{Ae(this,gr,Qr).call(this,{type:"failed",failureCount:R,error:A})},onPause:()=>{Ae(this,gr,Qr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,en).canRun(this)}));const s=this.state.status==="pending",o=!B(this,us).canStart();try{if(s)n();else{Ae(this,gr,Qr).call(this,{type:"pending",variables:e,isPaused:o}),await((d=(c=B(this,en).config).onMutate)==null?void 0:d.call(c,e,this,r));const A=await((f=(h=this.options).onMutate)==null?void 0:f.call(h,e,r));A!==this.state.context&&Ae(this,gr,Qr).call(this,{type:"pending",context:A,variables:e,isPaused:o})}const R=await B(this,us).start();return await((g=(m=B(this,en).config).onSuccess)==null?void 0:g.call(m,R,e,this.state.context,this,r)),await((P=(x=this.options).onSuccess)==null?void 0:P.call(x,R,e,this.state.context,r)),await((_=(b=B(this,en).config).onSettled)==null?void 0:_.call(b,R,null,this.state.variables,this.state.context,this,r)),await((y=(S=this.options).onSettled)==null?void 0:y.call(S,R,null,e,this.state.context,r)),Ae(this,gr,Qr).call(this,{type:"success",data:R}),R}catch(R){try{throw await((k=(j=B(this,en).config).onError)==null?void 0:k.call(j,R,e,this.state.context,this,r)),await((D=(O=this.options).onError)==null?void 0:D.call(O,R,e,this.state.context,r)),await(($=(T=B(this,en).config).onSettled)==null?void 0:$.call(T,void 0,R,this.state.variables,this.state.context,this,r)),await((I=(N=this.options).onSettled)==null?void 0:I.call(N,void 0,R,e,this.state.context,r)),R}finally{Ae(this,gr,Qr).call(this,{type:"error",error:R})}}finally{B(this,en).runNext(this)}}},hl=new WeakMap,mr=new WeakMap,en=new WeakMap,us=new WeakMap,gr=new WeakSet,Qr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Bt.batch(()=>{B(this,mr).forEach(r=>{r.onMutationUpdate(e)}),B(this,en).notify({mutation:this,type:"updated",action:e})})},D0);function c4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Nr,Yn,fl,z0,u4=(z0=class extends bl{constructor(e={}){super();je(this,Nr);je(this,Yn);je(this,fl);this.config=e,le(this,Nr,new Set),le(this,Yn,new Map),le(this,fl,0)}build(e,n,r){const s=new l4({client:e,mutationCache:this,mutationId:++Zl(this,fl)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){B(this,Nr).add(e);const n=mc(e);if(typeof n=="string"){const r=B(this,Yn).get(n);r?r.push(e):B(this,Yn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(B(this,Nr).delete(e)){const n=mc(e);if(typeof n=="string"){const r=B(this,Yn).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&B(this,Yn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=mc(e);if(typeof n=="string"){const r=B(this,Yn).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=mc(e);if(typeof n=="string"){const s=(r=B(this,Yn).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Bt.batch(()=>{B(this,Nr).forEach(e=>{this.notify({type:"removed",mutation:e})}),B(this,Nr).clear(),B(this,Yn).clear()})}getAll(){return Array.from(B(this,Nr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Qv(n,r))}findAll(e={}){return this.getAll().filter(n=>Qv(e,n))}notify(e){Bt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Bt.batch(()=>Promise.all(e.map(n=>n.continue().catch(un))))}},Nr=new WeakMap,Yn=new WeakMap,fl=new WeakMap,z0);function mc(t){var e;return(e=t.options.scope)==null?void 0:e.id}var vr,B0,d4=(B0=class extends bl{constructor(e={}){super();je(this,vr);this.config=e,le(this,vr,new Map)}build(e,n,r){const s=n.queryKey,o=n.queryHash??Jp(s,n);let c=this.get(o);return c||(c=new r4({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){B(this,vr).has(e.queryHash)||(B(this,vr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=B(this,vr).get(e.queryHash);n&&(e.destroy(),n===e&&B(this,vr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return B(this,vr).get(e)}getAll(){return[...B(this,vr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Jv(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Jv(e,r)):n}notify(e){Bt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Bt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},vr=new WeakMap,B0),dt,ci,ui,bo,jo,di,ko,So,$0,h4=($0=class{constructor(t={}){je(this,dt);je(this,ci);je(this,ui);je(this,bo);je(this,jo);je(this,di);je(this,ko);je(this,So);le(this,dt,t.queryCache||new d4),le(this,ci,t.mutationCache||new u4),le(this,ui,t.defaultOptions||{}),le(this,bo,new Map),le(this,jo,new Map),le(this,di,0)}mount(){Zl(this,di)._++,B(this,di)===1&&(le(this,ko,Xp.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,dt).onFocus())})),le(this,So,hu.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,dt).onOnline())})))}unmount(){var t,e;Zl(this,di)._--,B(this,di)===0&&((t=B(this,ko))==null||t.call(this),le(this,ko,void 0),(e=B(this,So))==null||e.call(this),le(this,So,void 0))}isFetching(t){return B(this,dt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return B(this,ci).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=B(this,dt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=B(this,dt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ci(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return B(this,dt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=B(this,dt).get(r.queryHash),o=s==null?void 0:s.state.data,c=qT(e,o);if(c!==void 0)return B(this,dt).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return Bt.batch(()=>B(this,dt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=B(this,dt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=B(this,dt);Bt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=B(this,dt);return Bt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Bt.batch(()=>B(this,dt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(un).catch(un)}invalidateQueries(t,e={}){return Bt.batch(()=>(B(this,dt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Bt.batch(()=>B(this,dt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(un)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(un)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=B(this,dt).build(this,e);return n.isStaleByTime(Ci(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(un).catch(un)}fetchInfiniteQuery(t){return t.behavior=i0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(un).catch(un)}ensureInfiniteQueryData(t){return t.behavior=i0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return hu.isOnline()?B(this,ci).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,dt)}getMutationCache(){return B(this,ci)}getDefaultOptions(){return B(this,ui)}setDefaultOptions(t){le(this,ui,t)}setQueryDefaults(t,e){B(this,bo).set(sl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...B(this,bo).values()],n={};return e.forEach(r=>{ol(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){B(this,jo).set(sl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...B(this,jo).values()],n={};return e.forEach(r=>{ol(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...B(this,ui).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Jp(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Qp&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...B(this,ui).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){B(this,dt).clear(),B(this,ci).clear()}},dt=new WeakMap,ci=new WeakMap,ui=new WeakMap,bo=new WeakMap,jo=new WeakMap,di=new WeakMap,ko=new WeakMap,So=new WeakMap,$0),ex=C.createContext(void 0),f4=t=>{const e=C.useContext(ex);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},p4=({client:t,children:e})=>(C.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(ex.Provider,{value:t,children:e})),tx=C.createContext(!1),m4=()=>C.useContext(tx);tx.Provider;function g4(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var v4=C.createContext(g4()),y4=()=>C.useContext(v4),_4=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},x4=t=>{C.useEffect(()=>{t.clearReset()},[t])},w4=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||JT(n,[t.error,r])),b4=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},j4=(t,e)=>t.isLoading&&t.isFetching&&!e,k4=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,o0=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function S4(t,e,n){var g,x,P,b,_;const r=m4(),s=y4(),o=f4(),c=o.defaultQueryOptions(t);(x=(g=o.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||x.call(g,c),c._optimisticResults=r?"isRestoring":"optimistic",b4(c),_4(c,s),x4(s);const d=!o.getQueryCache().get(c.queryHash),[h]=C.useState(()=>new e(o,c)),f=h.getOptimisticResult(c),m=!r&&t.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(S=>{const y=m?h.subscribe(Bt.batchCalls(S)):un;return h.updateResult(),y},[h,m]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),C.useEffect(()=>{h.setOptions(c)},[c,h]),k4(c,f))throw o0(c,h,s);if(w4({result:f,errorResetBoundary:s,throwOnError:c.throwOnError,query:o.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;if((b=(P=o.getDefaultOptions().queries)==null?void 0:P._experimental_afterQuery)==null||b.call(P,c,f),c.experimental_prefetchInRender&&!_s&&j4(f,r)){const S=d?o0(c,h,s):(_=o.getQueryCache().get(c.queryHash))==null?void 0:_.promise;S==null||S.catch(un).finally(()=>{h.updateResult()})}return c.notifyOnChangeProps?f:h.trackResult(f)}function zu(t,e){return S4(t,i4)}const C4=new h4({defaultOptions:{queries:{staleTime:5*60*1e3,cacheTime:10*60*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!1,retry:2,retryDelay:t=>Math.min(1e3*2**t,3e4),suspense:!1,useErrorBoundary:!1,networkMode:"online"},mutations:{retry:1,networkMode:"online"}}}),Rr={drivers:{all:["drivers"]},deliveries:{all:["deliveries"],byMonth:(t,e)=>[...Rr.deliveries.all,"month",t,e],byYear:t=>[...Rr.deliveries.all,"year",t],byDriver:(t,e,n)=>[...Rr.deliveries.all,"driver",t,e,n],stats:(t,e)=>[...Rr.deliveries.all,"stats",t,e]},holidays:{all:["holidays"],byYear:t=>[...Rr.holidays.all,"year",t]}};function nx(t={}){return zu({queryKey:Rr.drivers.all,queryFn:async()=>{const{data:e,error:n}=await me.from("drivers").select("*").order("tura",{ascending:!0});if(n)throw n;return e||[]},staleTime:10*60*1e3,...t})}function P4(t,e,n={}){return zu({queryKey:Rr.deliveries.byMonth(t,e),queryFn:()=>fP(t,e),staleTime:3*60*1e3,enabled:t!==void 0&&e!==void 0,...n})}function E4(t,e,n,r={}){return zu({queryKey:Rr.deliveries.byDriver(t,e,n),queryFn:async()=>{const s=new Date(e,n,1),o=new Date(e,n+1,0),c=s.toISOString().split("T")[0],d=o.toISOString().split("T")[0],{data:h,error:f}=await me.from("deliveries").select("*").eq("driver",t).gte("date",c).lte("date",d).order("date",{ascending:!0});if(f)throw f;return h||[]},enabled:!!t&&e!==void 0&&n!==void 0,staleTime:3*60*1e3,...r})}function rx(t,e={}){return zu({queryKey:Rr.holidays.byYear(t),queryFn:()=>uP(t),staleTime:30*60*1e3,enabled:t!==void 0,...e})}const T4=new Date().getFullYear(),L4=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function O4(){const[t,e]=C.useState(T4),[n,r]=C.useState(new Date().getMonth()),[s,o]=C.useState(!1),[c,d]=C.useState({lastSync:null,unsyncedCount:0}),{data:h=[],isLoading:f}=nx(),{data:m=[],isLoading:g}=P4(t,n),{data:x=[]}=rx(t),P=g||f,b=C.useMemo(()=>{const T={};return m.forEach($=>{T[$.date]||(T[$.date]={}),T[$.date][$.driver]=$.produktivitaet_stops||0}),T},[m]),_=U1(t,n,x.map(T=>T.date)),S=C.useMemo(()=>{const T=_.length,$=new Set;return m.forEach(N=>{N.produktivitaet_stops>0&&$.add(N.date)}),{totalWorkdays:T,drivers:h.length,remainingDays:Math.max(0,T-$.size)}},[_,m,h]),[y,j]=C.useState(()=>{const T=localStorage.getItem("monthlyPerformance");return T?JSON.parse(T):{}}),[k,O]=C.useState(!1);C.useEffect(()=>{const T=()=>{if(k)return;O(!0);const N={0:{value:6322,change:22},1:{value:5874,change:-126},2:{value:6304,change:304},3:{value:6178,change:-122},4:{value:5876,change:-124},5:{value:5491,change:-209},6:{value:6372,change:-528},7:{value:5586,change:-414},8:{value:6214,change:-386},9:{value:831,change:-6069}},I=new Date().getMonth(),R={};Object.keys(N).forEach(A=>{const G=parseInt(A);G<=I&&(R[G]=N[G])}),localStorage.setItem("monthlyPerformance",JSON.stringify(R)),j(R),O(!1)};Object.keys(y).length===0&&!k&&T();const $=localStorage.getItem("monthlyPerformanceYear");$&&parseInt($)!==t?(localStorage.removeItem("monthlyPerformance"),localStorage.setItem("monthlyPerformanceYear",t.toString()),T()):$||localStorage.setItem("monthlyPerformanceYear",t.toString())},[t]);const D=async()=>{if(k)return;O(!0);const T={},$=new Date().getMonth(),N=n;for(let I=0;I<=$;I++)try{I!==n&&(r(I),await new Promise(A=>setTimeout(A,800)));const R=document.querySelector("tr._footerRow_j95of_829");if(R){const A=R.querySelectorAll("td");if(A[5]){const G=A[5].querySelector("strong"),F=A[5].querySelector('div[style*="font-size: 0.75rem"]');if(G&&F){const K=parseInt(G.textContent),H=F.textContent.match(/\(([+-]?\d+)\)/),Z=H?parseInt(H[1]):0;K>0&&(T[I]={value:K,change:Z})}}}}catch(R){console.error(`Error reading month ${I}:`,R)}r(N),localStorage.setItem("monthlyPerformance",JSON.stringify(T)),j(T),O(!1)};return a.jsx("div",{className:he.deliveriesScreen,children:a.jsxs("div",{className:he.mainGrid,children:[a.jsx(Kp,{className:he.closeButton}),a.jsxs("div",{className:he.headerCard,children:[a.jsx("div",{className:he.heroSection,children:a.jsxs("h1",{className:he.heroTitle,children:["Pregled rezultata po Mjesecu",a.jsx("button",{onClick:D,disabled:k,className:he.refreshButton,title:"itaj realne podatke iz tabele",children:k?"":""})]})}),a.jsxs("div",{className:he.statsGrid,children:[a.jsxs("div",{className:he.statCard,children:[a.jsx("div",{className:he.statIcon,children:a.jsx(Io,{size:22})}),a.jsx("div",{className:he.statValue,children:S.drivers}),a.jsx("div",{className:he.statLabel,children:"Vozaa"})]}),a.jsxs("div",{className:`${he.statCard} ${he.dateCard}`,children:[a.jsx("div",{className:he.statIcon,children:a.jsx(Si,{size:22})}),a.jsx("div",{className:he.statValue,children:L4[n]}),a.jsx("div",{className:he.statLabel,children:t}),a.jsx(Yp,{month:n,year:t,onMonthChange:r,onYearChange:e,monthlyPerformance:y,isLoadingPerformance:k,className:he.monthYearPicker})]}),a.jsxs("div",{className:he.statCard,children:[a.jsx("div",{className:he.statIcon,children:a.jsx(Si,{size:22})}),a.jsx("div",{className:he.statValue,children:S.totalWorkdays}),a.jsx("div",{className:he.statLabel,children:"Radnih dana"})]}),a.jsxs("div",{className:he.statCard,children:[a.jsx("div",{className:he.statIcon,children:a.jsx(fE,{size:22})}),a.jsx("div",{className:he.statValue,children:S.remainingDays}),a.jsx("div",{className:he.statLabel,children:"Preostalo"})]})]})]}),a.jsx(H1,{syncStatus:c}),P?a.jsx("div",{className:he.loadingContainer,children:[...Array(8)].map((T,$)=>a.jsx(W1,{width:80,height:32},$))}):_.length===0?a.jsx("div",{className:he.emptyState,children:"Nema radnih dana"}):a.jsxs("div",{className:he.dataCard,children:[a.jsx("div",{className:he.mobileCards,children:_.filter(T=>b[ft(T,"yyyy-MM-dd")]).map(T=>{const $=ft(T,"yyyy-MM-dd"),N=b[$]||{},I=h.filter(G=>G.aktivan).reduce((G,F)=>G+(N[F.tura]||0),0),R=x.some(G=>G.date===$),A=I>=300?"totalHigh":I>0?"totalLow":"";return a.jsxs("div",{className:`${he.dayCard} ${R?he.holiday:""} ${A?he[A]:""}`,children:[a.jsxs("div",{className:he.dayCardHeader,children:[a.jsx(Si,{size:20})," ",ft(T,"dd.MM.yyyy")]}),a.jsxs("div",{className:he.dayCardBody,children:[h.filter(G=>G.aktivan).map(G=>{const F=N[G.tura],K=F>=(G.target_per_day||0)?"success":F>0?"warning":"empty";return a.jsxs("div",{className:`${he.driverRow} ${he[K]}`,children:[a.jsxs("div",{className:he.driverInfo,children:[a.jsxs("div",{className:he.driverName,children:[" ",G.ime]}),a.jsx("div",{className:he.driverTura,children:G.tura})]}),a.jsx("span",{className:he.driverValue,children:F??""})]},G.tura)}),a.jsxs("div",{className:`${he.dayTotal} ${A?he[`dayTotal${A.charAt(0).toUpperCase()}${A.slice(1)}`]:""}`,children:["Ukupno: ",I||""]})]})]},$)})}),a.jsx("div",{className:he.tableWrapper,children:a.jsxs("table",{className:he.table,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Datum"}),h.filter(T=>T.aktivan).map(T=>a.jsx("th",{children:a.jsxs("div",{className:he.tableDriverHeader,children:[a.jsx("div",{className:he.tableDriverName,children:T.ime}),a.jsx("div",{className:he.tableDriverTura,children:T.tura})]})},T.tura)),a.jsx("th",{children:"Ukupno"})]})}),a.jsx("tbody",{children:Object.keys(b).sort((T,$)=>new Date(T)-new Date($)).map(T=>{const $=b[T]||{},N=h.filter(R=>R.aktivan).reduce((R,A)=>R+($[A.tura]||0),0),I=x.some(R=>R.date===T);return a.jsxs("tr",{className:I?he.holidayRow:"",children:[a.jsx("td",{children:ft(new Date(T),"dd.MM.")}),h.filter(R=>R.aktivan).map(R=>{const A=$[R.tura],G=A>=(R.target_per_day||0)?"cellSuccess":A>0?"cellWarning":"cellEmpty";return a.jsx("td",{className:he[G],children:A??""},R.tura)}),a.jsx("td",{className:he[N>=300?"cellSuccess":N>0?"cellWarning":"cellEmpty"],children:N||""})]},T)})}),a.jsx("tfoot",{children:a.jsxs("tr",{className:he.footerRow,children:[a.jsx("td",{className:he.footerCell,children:a.jsx("strong",{children:"Ukupno"})}),h.filter(T=>T.aktivan).map(T=>{const $=_.filter(G=>{const F=ft(G,"yyyy-MM-dd");return(b[F]||{})[T.tura]>0}),N=$.reduce((G,F)=>{const K=ft(F,"yyyy-MM-dd"),H=b[K]||{};return G+(H[T.tura]||0)},0),I=(T.target_per_day||0)*_.length,R=N-I,A=R>=0?he.bilansSuccess:he.bilansWarning;return a.jsxs("td",{className:he.footerCell,children:[a.jsx("div",{className:$.length>0&&N>=(T.target_per_day||0)*$.length?he.bilansSuccess:he.bilansWarning,children:a.jsx("strong",{children:N})}),a.jsxs("div",{style:{fontSize:"0.75rem",marginTop:"2px"},className:A,children:["(",R>0?`+${R}`:R,")"]})]},T.tura)}),a.jsx("td",{className:`${he.footerCell} ${(()=>{const T=_.reduce((R,A)=>{const G=ft(A,"yyyy-MM-dd"),F=b[G]||{};return R+h.filter(K=>K.aktivan).reduce((K,H)=>K+(F[H.tura]||0),0)},0),$=_.length,N=h.filter(R=>R.aktivan).reduce((R,A)=>R+(A.target_per_day||0)*$,0);return T-N>=0?he.cellSuccess:he.cellWarning})()}`,children:(()=>{const T=_.reduce((R,A)=>{const G=ft(A,"yyyy-MM-dd"),F=b[G]||{};return R+h.filter(K=>K.aktivan).reduce((K,H)=>K+(F[H.tura]||0),0)},0),$=_.length,N=h.filter(R=>R.aktivan).reduce((R,A)=>R+(A.target_per_day||0)*$,0),I=T-N;return a.jsxs("div",{children:[a.jsx("strong",{children:T}),a.jsxs("div",{style:{fontSize:"0.75rem",marginTop:"2px"},children:["(",I>0?`+${I}`:I,")"]})]})})()})]})})]})})]}),s&&a.jsx(V1,{onClose:()=>o(!1),children:a.jsxs("div",{className:"deliveries-modal-form",children:[a.jsx("h2",{children:"Nova dostava"}),a.jsx("button",{onClick:()=>o(!1),children:"Zatvori"})]})})]})})}const N4="_driversScreen_suf66_4",R4="_mainGrid_suf66_41",I4="_closeButton_suf66_52",M4="_headerCard_suf66_74",A4="_heroSection_suf66_86",D4="_heroTitle_suf66_95",z4="_statsGrid_suf66_103",B4="_statCard_suf66_109",$4="_statIcon_suf66_125",F4="_statValue_suf66_132",U4="_statLabel_suf66_139",W4="_monthYearPicker_suf66_146",H4="_monthSelect_suf66_157",V4="_yearSelect_suf66_158",q4="_driverSelect_suf66_159",G4="_dataCard_suf66_202",Z4="_mobileCards_suf66_213",K4="_dayCard_suf66_219",Y4="_holiday_suf66_227",J4="_excellent_suf66_233",Q4="_good_suf66_239",X4="_poor_suf66_245",eL="_complaints_suf66_251",tL="_empty_suf66_269",nL="_dayCardHeader_suf66_275",rL="_dayStats_suf66_287",iL="_dayStat_suf66_287",sL="_tableWrapper_suf66_313",oL="_table_suf66_313",aL="_cellSuccess_suf66_350",lL="_cellWarning_suf66_356",cL="_cellEmpty_suf66_362",uL="_holidayRow_suf66_367",dL="_tableFooter_suf66_372",hL="_footerRow_suf66_380",fL="_footerCell_suf66_385",pL="_loadingContainer_suf66_414",mL="_emptyState_suf66_424",gL="_driverCard_suf66_474",vL="_dateCard_suf66_475",yL="_driverPicker_suf66_547",_L="_strongPulse_suf66_1",xL="_strongBounce_suf66_1",ce={driversScreen:N4,mainGrid:R4,closeButton:I4,headerCard:M4,heroSection:A4,heroTitle:D4,statsGrid:z4,statCard:B4,statIcon:$4,statValue:F4,statLabel:U4,monthYearPicker:W4,monthSelect:H4,yearSelect:V4,driverSelect:q4,dataCard:G4,mobileCards:Z4,dayCard:K4,holiday:Y4,excellent:J4,good:Q4,poor:X4,complaints:eL,"complaint-pulse":"_complaint-pulse_suf66_1",empty:tL,dayCardHeader:nL,dayStats:rL,dayStat:iL,tableWrapper:sL,table:oL,cellSuccess:aL,cellWarning:lL,cellEmpty:cL,holidayRow:uL,tableFooter:dL,footerRow:hL,footerCell:fL,loadingContainer:pL,emptyState:mL,driverCard:gL,dateCard:vL,driverPicker:yL,strongPulse:_L,strongBounce:xL},wL="_modalOverlay_165af_4",bL="_modalContent_165af_33",jL="_header_165af_76",kL="_title_165af_96",SL="_closeButton_165af_107",CL="_driversGrid_165af_134",PL="_driverButton_165af_162",EL="_selected_165af_209",TL="_driverInfo_165af_222",LL="_driverName_165af_228",OL="_driverTura_165af_236",qn={modalOverlay:wL,modalContent:bL,header:jL,title:kL,closeButton:SL,driversGrid:CL,driverButton:PL,selected:EL,driverInfo:TL,driverName:LL,driverTura:OL},ix=({selectedDriver:t,onDriverChange:e,drivers:n=[],onClose:r,className:s=""})=>{const o=C.useRef(null),c=f=>{e(f),setTimeout(()=>{r&&typeof r=="function"&&r()},10)},d=n.filter(f=>f.aktivan||f.tura==="ALL"),h=a.jsx("div",{className:qn.modalOverlay,onClick:f=>{f.target===f.currentTarget&&(f.stopPropagation(),r&&typeof r=="function"&&r())},children:a.jsxs("div",{className:qn.modalContent,ref:o,children:[a.jsxs("div",{className:qn.header,children:[a.jsx("h3",{className:qn.title,children:"Izaberite vozaa"}),a.jsx("button",{className:qn.closeButton,onClick:f=>{f.stopPropagation(),r&&typeof r=="function"&&r()},children:""})]}),a.jsx("div",{className:qn.driversGrid,children:d.map(f=>a.jsx("button",{className:`${qn.driverButton} ${f.ime===t?qn.selected:""}`,onClick:()=>c(f.ime),type:"button",children:a.jsxs("div",{className:qn.driverInfo,children:[a.jsx("div",{className:qn.driverName,children:f.tura==="ALL"?"Svi vozai":f.ime}),a.jsx("div",{className:qn.driverTura,children:f.tura==="ALL"?"Prikai sve":`Tura ${f.tura}`})]})},f.tura))})]})});return Lu.createPortal(h,document.body)},NL=new Date().getFullYear(),RL=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function IL(){const[t,e]=C.useState(NL),[n,r]=C.useState(new Date().getMonth()),[s,o]=C.useState(""),[c,d]=C.useState(!1),[h,f]=C.useState({lastSync:null,unsyncedCount:0}),[m,g]=C.useState(!0);C.useEffect(()=>{const I=setInterval(()=>{g(R=>!R)},400);return()=>clearInterval(I)},[]);const{driverName:x}=Lk(),{data:P=[],isLoading:b}=nx(),{data:_=[]}=rx(t);C.useEffect(()=>{if(P.length>0&&!s){const I=x?P.find(R=>R.ime===x):P.find(R=>R.aktivan);I&&o(I.ime)}},[P,x,s]);const S=C.useMemo(()=>P.find(I=>I.ime===s),[P,s]),{data:y=[],isLoading:j}=E4(S==null?void 0:S.tura,t,n,{enabled:!!S}),k=j||b,O=U1(t,n,_.map(I=>I.date)),D=C.useMemo(()=>{if(!y.length)return[];const I=A=>{if(!A)return 0;const G=A.toString().replace("%","").replace(",",".").trim();return parseFloat(G)||0},R={};return y.forEach(A=>{const G=new Date(A.date),F=G.getMonth();if(G.getFullYear()!==t||F!==n)return;const H=A.date;R[H]||(R[H]={date:H,stops:0,packages:0,pickupPackages:0,complaints:0,totalTime:0,realPercentage:I(A.zustellung_proc),undelivered:parseInt(A.zustellung_nedostavljeno)||0,pickupPercentage:I(A.pickup_proc),pickupUndelivered:parseInt(A.pickup_nedostavljeno)||0,firstComplaints:parseInt(A.probleme_prva)||0,secondComplaints:parseInt(A.probleme_druga)||0,stopsPerHourRaw:A.produktivitaet_stops_pro_std||"0"}),R[H].stops+=A.produktivitaet_stops||0,R[H].packages+=A.zustellung_paketi||0,R[H].pickupPackages+=parseInt(A.pickup_paketi)||0,R[H].complaints+=parseInt(A.probleme_druga)||0;const Y=(A.produktivitaet_dauer||"0:00").split(":"),z=(parseInt(Y[0])||0)*60+(parseInt(Y[1])||0);R[H].totalTime+=z}),Object.values(R).map(A=>{const G=A.realPercentage>0?A.realPercentage:A.stops>0?A.packages/A.stops*100:0;return{...A,percentage:G,stopsPerHour:A.totalTime>0?A.stops/(A.totalTime/60):0,undelivered:A.undelivered,pickupPercentage:A.pickupPercentage,pickupUndelivered:A.pickupUndelivered,firstComplaints:A.firstComplaints,secondComplaints:A.secondComplaints,stopsPerHourRaw:A.stopsPerHourRaw}}).sort((A,G)=>new Date(A.date)-new Date(G.date))},[y,t,n]),T=C.useMemo(()=>{const I=O.length,R=D.filter(H=>H.stops>0).length,A=D.reduce((H,Z)=>H+Z.stops,0),G=D.reduce((H,Z)=>H+Z.packages,0),F=R>0?A/R:0,K=R>0?G/R:0;return{totalWorkdays:I,daysWithData:R,avgPackagesPerDay:Math.round(K),avgStopsPerDay:Math.round(F)}},[O,D]),[$,N]=C.useState(()=>{const I=localStorage.getItem("monthlyPerformance");return I?JSON.parse(I):{}});return C.useEffect(()=>{const I=()=>{const R=new Date().getMonth(),A={0:{value:6322,change:22},1:{value:5874,change:-126},2:{value:6304,change:304},3:{value:6178,change:-122},4:{value:5876,change:-124},5:{value:5491,change:-209},6:{value:6372,change:-528},7:{value:5586,change:-414},8:{value:6214,change:-386},9:{value:831,change:-6069}},G={};Object.keys(A).forEach(F=>{const K=parseInt(F);K<=R&&(G[K]=A[K])}),N(G),localStorage.setItem("monthlyPerformance",JSON.stringify(G))};if(Object.keys($).length===0){const R=setTimeout(I,500);return()=>clearTimeout(R)}},[t]),a.jsx("div",{className:ce.driversScreen,children:a.jsxs("div",{className:ce.mainGrid,children:[a.jsx(Kp,{className:ce.closeButton}),a.jsxs("div",{className:ce.headerCard,children:[a.jsx("div",{className:ce.heroSection,children:a.jsx("h1",{className:ce.heroTitle,children:"Pregled vozaa po Mjesecu"})}),a.jsxs("div",{className:ce.statsGrid,children:[a.jsxs("div",{className:`${ce.statCard} ${ce.driverCard}`,onClick:()=>{d(!0)},children:[a.jsx("div",{className:ce.statIcon,children:a.jsx(Io,{size:22})}),a.jsx("div",{className:ce.statValue,children:s||"Izaberite vozaa"}),a.jsx("div",{className:ce.statLabel,children:(()=>{const I=P.find(R=>R.ime===s);return I?I.tura:"Voza"})()}),c&&a.jsx(ix,{selectedDriver:s,onDriverChange:o,drivers:P,onClose:()=>{d(!1)}},"driver-picker")]}),a.jsxs("div",{className:`${ce.statCard} ${ce.dateCard}`,children:[a.jsx("div",{className:ce.statIcon,children:a.jsx(Si,{size:22})}),a.jsx("div",{className:ce.statValue,children:RL[n]}),a.jsx("div",{className:ce.statLabel,children:t}),a.jsx(Yp,{month:n,year:t,onMonthChange:r,onYearChange:e,monthlyPerformance:$,isLoadingPerformance:!1,className:ce.monthYearPicker})]}),a.jsxs("div",{className:ce.statCard,children:[a.jsx("div",{className:ce.statIcon,children:a.jsx(Zp,{size:22})}),a.jsx("div",{className:ce.statValue,children:T.avgStopsPerDay}),a.jsx("div",{className:ce.statLabel,children:"Prosjek stopova"})]}),a.jsxs("div",{className:ce.statCard,children:[a.jsx("div",{className:ce.statIcon,children:a.jsx(pE,{size:22})}),a.jsx("div",{className:ce.statValue,children:T.avgPackagesPerDay}),a.jsx("div",{className:ce.statLabel,children:"Prosjek paketa"})]})]})]}),a.jsx(H1,{syncStatus:h}),s?k?a.jsx("div",{className:ce.loadingContainer,children:[...Array(8)].map((I,R)=>a.jsx(W1,{width:80,height:32},R))}):O.length===0?a.jsx("div",{className:ce.emptyState,children:"Nema radnih dana"}):a.jsxs("div",{className:ce.dataCard,children:[a.jsx("div",{className:ce.mobileCards,children:D.map(I=>{const R=new Date(I.date),A=_.some(Z=>Z.date===I.date),G=P.find(Z=>Z.ime===s),F=(G==null?void 0:G.target_per_day)||50,H=(()=>{if(I.secondComplaints>0)return"complaints";if(!I.stops||I.stops===0)return"empty";const Y=I.stops/F*100;return Y>=100?"excellent":Y>=90?"good":"poor"})();return a.jsxs("div",{className:`${ce.dayCard} ${A?ce.holiday:""} ${ce[H]}`,style:H==="complaints"?{boxShadow:m?"0 0 20px rgba(244, 67, 54, 0.6), inset 0 0 20px rgba(244, 67, 54, 0.1)":"0 0 10px rgba(244, 67, 54, 0.3)",borderColor:"#f44336",borderWidth:"2px",borderStyle:"solid",transition:"all 0.3s ease"}:{},children:[a.jsxs("div",{className:ce.dayCardHeader,children:[a.jsx(Si,{size:20})," ",ft(R,"dd.MM.yyyy")]}),a.jsx("div",{className:ce.dayCardBody,children:a.jsxs("div",{className:ce.dayStats,children:[a.jsxs("div",{className:ce.dayStat,children:[a.jsx("span",{children:"Stopovi"}),a.jsx("span",{children:I.stops||""})]}),a.jsxs("div",{className:ce.dayStat,children:[a.jsx("span",{children:"Paketi"}),a.jsx("span",{children:I.packages||""})]}),a.jsxs("div",{className:ce.dayStat,children:[a.jsx("span",{children:"Pickup"}),a.jsx("span",{children:I.pickupPackages||""})]}),a.jsxs("div",{className:ce.dayStat,children:[a.jsx("span",{children:"Reklamacije"}),a.jsx("span",{style:I.secondComplaints>0?{color:"#f44336",fontWeight:"bold",backgroundColor:m?"rgba(244, 67, 54, 0.1)":"transparent",padding:"2px 6px",borderRadius:"4px",transition:"all 0.3s"}:{},children:I.secondComplaints||""})]}),a.jsxs("div",{className:ce.dayStat,children:[a.jsx("span",{children:"Vreme"}),a.jsx("span",{children:I.totalTime?`${(I.totalTime/60).toFixed(1)}h`:""})]}),a.jsxs("div",{className:ce.dayStat,children:[a.jsx("span",{children:"Efikasnost"}),a.jsx("span",{children:I.percentage?`${I.percentage.toFixed(1)}%`:""})]}),a.jsxs("div",{className:ce.dayStat,children:[a.jsx("span",{children:"Stop/h"}),a.jsx("span",{children:I.stopsPerHour?I.stopsPerHour.toFixed(1):""})]})]})})]},I.date)})}),a.jsx("div",{className:ce.tableWrapper,children:a.jsxs("table",{className:ce.table,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Datum"}),a.jsx("th",{children:"Stopovi"}),a.jsx("th",{children:"Paketi"}),a.jsx("th",{children:"Pickup"}),a.jsx("th",{children:"Reklamacije"}),a.jsx("th",{children:"Vreme (h)"}),a.jsx("th",{children:"Efikasnost"}),a.jsx("th",{children:"Stop/h"})]})}),a.jsx("tbody",{children:D.map(I=>{const R=new Date(I.date),A=_.some(G=>G.date===I.date);return a.jsxs("tr",{className:A?ce.holidayRow:"",children:[a.jsx("td",{children:ft(R,"dd.MM.")}),a.jsx("td",{children:I.stops||""}),a.jsx("td",{children:I.packages||""}),a.jsx("td",{children:I.pickupPackages||""}),a.jsx("td",{className:I.secondComplaints>0?"":ce.cellSuccess,style:I.secondComplaints>0?{backgroundColor:m?"#ffffff":"#f44336",color:m?"#f44336":"#ffffff",fontWeight:"900",fontSize:"1rem",textAlign:"center",transition:"all 0.3s",outline:m?"2px solid #f44336":"none",outlineOffset:"-2px"}:{},children:I.secondComplaints||""}),a.jsx("td",{children:I.totalTime?`${(I.totalTime/60).toFixed(1)}h`:""}),a.jsx("td",{className:I.percentage>=98?ce.cellSuccess:ce.cellWarning,children:I.percentage?`${I.percentage.toFixed(1)}%`:""}),a.jsx("td",{children:I.stopsPerHour?I.stopsPerHour.toFixed(1):""})]},I.date)})}),s&&D.length>0&&a.jsx("tfoot",{children:a.jsxs("tr",{className:ce.footerRow,children:[a.jsx("td",{className:ce.footerCell,children:a.jsx("strong",{children:"Ukupno"})}),a.jsx("td",{className:`${ce.footerCell} ${(()=>{const I=P.find(K=>K.ime===s),R=(I==null?void 0:I.target_per_day)||0,A=D.reduce((K,H)=>K+(H.stops||0),0),G=D.length;return A-G*R>=0?ce.cellSuccess:ce.cellWarning})()}`,children:a.jsx("strong",{children:(()=>{const I=P.find(K=>K.ime===s),R=(I==null?void 0:I.target_per_day)||0,A=D.reduce((K,H)=>K+(H.stops||0),0),G=D.length,F=A-G*R;return F>0?`+${F}`:F})()})}),a.jsx("td",{className:`${ce.footerCell} ${ce.cellSuccess}`,children:a.jsx("strong",{children:D.reduce((I,R)=>I+(R.packages||0),0)})}),a.jsx("td",{className:`${ce.footerCell} ${ce.cellSuccess}`,children:a.jsx("strong",{children:D.reduce((I,R)=>I+(R.pickupPackages||0),0)})}),a.jsx("td",{className:`${ce.footerCell} ${D.reduce((R,A)=>R+(A.secondComplaints||0),0)===0?ce.cellSuccess:""}`,style:D.reduce((R,A)=>R+(A.secondComplaints||0),0)>0?{backgroundColor:m?"#ffffff":"#f44336",color:m?"#f44336":"#ffffff",fontWeight:"900",fontSize:"0.9rem",textAlign:"center",transition:"all 0.3s",borderRadius:"8px",outline:m?"2px solid #f44336":"none",outlineOffset:"-2px"}:{},children:a.jsx("strong",{children:D.reduce((I,R)=>I+(R.secondComplaints||0),0)})}),a.jsx("td",{className:`${ce.footerCell} ${ce.cellSuccess}`,children:a.jsx("strong",{children:(()=>{const I=D.reduce((R,A)=>R+(A.totalTime||0),0);return I?`${(I/60).toFixed(1)}h`:""})()})}),a.jsx("td",{className:`${ce.footerCell} ${ce.cellSuccess}`,children:a.jsx("strong",{children:(()=>{const I=D.filter(A=>A.percentage&&A.percentage>0),R=I.length>0?I.reduce((A,G)=>A+G.percentage,0)/I.length:0;return R>0?`${R.toFixed(1)}%`:""})()})}),a.jsx("td",{className:`${ce.footerCell} ${ce.cellSuccess}`,children:a.jsx("strong",{children:(()=>{const I=D.filter(A=>A.stopsPerHour&&A.stopsPerHour>0),R=I.length>0?(I.reduce((A,G)=>A+G.stopsPerHour,0)/I.length).toFixed(1):"";return R!=="NaN"?R:""})()})})]})})]})})]}):a.jsxs("div",{className:ce.emptyState,children:[a.jsx(Io,{size:48}),a.jsx("h3",{children:"Izaberite vozaa da vidite statistiku"}),a.jsx("p",{children:"Odaberite vozaa iz dropdown liste da vidite detaljnu statistiku njihovih performansi."})]})]})})}const ML="_extraRidesScreen_16fvq_4",AL="_mainGrid_16fvq_41",DL="_headerCard_16fvq_52",zL="_heroSection_16fvq_64",BL="_heroTitle_16fvq_73",$L="_statsGrid_16fvq_115",FL="_statCard_16fvq_121",UL="_statIcon_16fvq_150",WL="_statValue_16fvq_157",HL="_statLabel_16fvq_164",VL="_controlsCard_16fvq_173",qL="_filtersContainer_16fvq_186",GL="_filtersRow_16fvq_216",ZL="_filterHeader_16fvq_223",KL="_filterTitle_16fvq_228",YL="_filterGroup_16fvq_244",JL="_filterLabel_16fvq_250",QL="_monthYearDisplay_16fvq_362",XL="_driverDisplay_16fvq_363",eO="_formRowTwo_16fvq_373",tO="_formInput_16fvq_377",nO="_monthYearPickerWrapper_16fvq_385",rO="_monthYearPicker_16fvq_385",iO="_driverPickerWrapper_16fvq_427",sO="_formContainer_16fvq_460",oO="_formRowSingle_16fvq_489",aO="_priceLabel_16fvq_546",lO="_priceAmount_16fvq_558",cO="_submitButton_16fvq_564",uO="_dataCard_16fvq_588",dO="_tableWrapper_16fvq_597",hO="_ridesGrid_16fvq_603",fO="_rideCard_16fvq_610",pO="_cardHeader_16fvq_645",mO="_cardDate_16fvq_652",gO="_statusBadgePending_16fvq_665",vO="_statusBadgeApproved_16fvq_678",yO="_statusBadgeRejected_16fvq_691",_O="_cardPrice_16fvq_704",xO="_cardInfo_16fvq_727",wO="_infoRowTop_16fvq_731",bO="_infoRowBottom_16fvq_732",jO="_infoItem_16fvq_742",kO="_statusPending_16fvq_836",SO="_statusApproved_16fvq_846",CO="_statusRejected_16fvq_856",PO="_loadingContainer_16fvq_1069",EO="_emptyState_16fvq_1082",ie={extraRidesScreen:ML,mainGrid:AL,headerCard:DL,heroSection:zL,heroTitle:BL,statsGrid:$L,statCard:FL,statIcon:UL,statValue:WL,statLabel:HL,controlsCard:VL,filtersContainer:qL,filtersRow:GL,filterHeader:ZL,filterTitle:KL,filterGroup:YL,filterLabel:JL,monthYearDisplay:QL,driverDisplay:XL,formRowTwo:eO,formInput:tO,monthYearPickerWrapper:nO,monthYearPicker:rO,driverPickerWrapper:iO,formContainer:sO,formRowSingle:oO,priceLabel:aO,priceAmount:lO,submitButton:cO,dataCard:uO,tableWrapper:dO,ridesGrid:hO,rideCard:fO,cardHeader:pO,cardDate:mO,statusBadgePending:gO,statusBadgeApproved:vO,statusBadgeRejected:yO,cardPrice:_O,cardInfo:xO,infoRowTop:wO,infoRowBottom:bO,infoItem:jO,statusPending:kO,statusApproved:SO,statusRejected:CO,loadingContainer:PO,emptyState:EO},ah={20:40,21:40,22:40,23:40,24:40,25:40,26:40,27:40,28:40,29:40,30:50,31:50,32:50,33:50,34:50,35:50,36:50,37:50,38:50,39:50,40:61,41:61,42:61,43:61,44:61,45:61,46:61,47:61,48:61,49:61,50:66,51:66,52:66,53:66,54:66,55:66,56:66,57:66,58:66,59:66,60:75,61:75,62:75,63:75,64:75,65:75,66:75,67:75,68:75,69:75,70:83,71:83,72:83,73:83,74:83,75:83,76:83,77:83,78:83,79:83,80:91,81:91,82:91,83:91,84:91,85:91,86:91,87:91,88:91,89:91,90:100,91:100,92:100,93:100,94:100,95:100,96:100,97:100,98:100,99:100,100:106,101:106,102:106,103:106,104:106,105:106,106:106,107:106,108:106,109:106,110:116,112:116,113:116,114:116,115:116,116:116,117:116,118:116,119:116,120:116},lh={9020:15,9061:15,9062:13,9063:16,9064:16,9065:16,9071:13,9072:11,9073:15,9074:13,9081:13,9082:11,9100:16,9102:16,9103:20,9104:20,9111:20,9112:20,9113:20,9121:16,9122:16,9123:20,9124:16,9125:20,9130:16,9131:16,9132:16,9133:20,9135:20,9141:20,9142:20,9143:20,9150:20,9155:20,9161:16,9162:13,9163:16,9170:16,9173:16,9181:13,9182:11,9183:11,9184:10,9201:15,9210:11,9212:11,9220:8,9231:10,9232:8,9241:8,9300:16,9311:16,9312:16,9313:16,9314:16,9321:16,9322:20,9323:20,9330:16,9333:16,9334:16,9335:20,9341:20,9342:16,9343:16,9344:15,9345:15,9346:15,9360:20,9361:20,9362:20,9363:20,9371:16,9372:16,9373:20,9374:20,9375:20,9376:20,9473:20,9500:8,9504:8,9520:8,9521:8,9523:8,9524:8,9530:8,9531:8,9535:10,9536:8,9541:8,9542:10,9543:10,9544:10,9545:15,9546:15,9551:8,9552:8,9555:16,9556:16,9560:11,9562:13,9563:16,9564:16,9565:16,9570:8,9571:16,9572:16,9580:8,9581:8,9582:8,9583:8,9584:8,9585:8,9586:8,9587:8,9601:8,9602:8,9611:8,9612:8,9613:8,9614:11,9615:11,9620:15,9622:16,9623:11,9624:13,9631:16,9632:16,9633:16,9634:16,9635:16,9640:20,9651:20,9652:20,9653:20,9654:20,9655:20,9701:8,9702:8,9710:8,9711:8,9712:8,9713:8,9714:8,9721:8,9722:8,9751:8,9752:8,9753:8,9754:15,9761:11,9762:16,9771:13,9772:15,9773:16,9781:16,9782:20,9800:8,9805:8,9811:10,9812:10,9813:10,9814:10,9815:10,9816:11,9821:13,9822:15,9831:15,9832:16,9833:16,9841:16,9842:16,9843:20,9844:20,9851:8,9852:8,9853:8,9854:8,9861:8,9862:11,9863:11,9871:8,9872:8,9873:8,9900:20,9903:20,9905:16,9906:16,9907:16,9908:16,9909:16,9911:20,9912:20,9913:20,9918:20,9919:20,9920:20,9931:20,9932:20,9941:20,9942:20,9943:20,9951:16,9952:16,9953:16,9954:16,9961:16,9962:20,9963:20,9971:20,9972:20,9974:20,9981:20,9990:16,9991:16,9992:16};function TO(){var ve;const{drivers:t}=Wo(),e=()=>{try{const J=typeof window<"u"?localStorage.getItem("bde_current_user"):null;if(J){const Se=JSON.parse(J);if(Se!=null&&Se.name)return Se.name}const fe=typeof window<"u"?localStorage.getItem("DRIVER_TURA"):null;if(fe&&t&&t.length){const Se=t.find(te=>te.tura===fe);if(Se)return Se.ime}}catch{}return""},[n,r]=C.useState(e),s=C.useRef(!1),[o,c]=C.useState(ft(new Date,"yyyy-MM-dd")),[d,h]=C.useState(""),[f,m]=C.useState(""),[g,x]=C.useState(""),[P,b]=C.useState(0),[_,S]=C.useState(!1),[y,j]=C.useState([]),[k,O]=C.useState(0),[D,T]=C.useState(0),[$,N]=C.useState(0),[I,R]=C.useState(!0),[A,G]=C.useState(null),[F,K]=C.useState(""),[H,Z]=C.useState(new Date().getFullYear()),[Y,z]=C.useState(new Date().getMonth()),[X,W]=C.useState(!1);C.useEffect(()=>{try{localStorage.removeItem("EXTRA_SELECTED_DRIVER")}catch{}if(!t||t.length===0)return;const fe=(()=>{try{return JSON.parse(localStorage.getItem("bde_current_user")||"null")}catch{return null}})();let Se="";if(fe!=null&&fe.name)Se=fe.name;else{const te=localStorage.getItem("DRIVER_TURA"),xe=te?t.find(we=>we.tura===te):null;xe&&(Se=xe.ime)}Se&&Se!==n&&r(Se),s.current=!0},[t]);const ne=C.useMemo(()=>{const J=t?[...t]:[],fe=(()=>{try{return JSON.parse(localStorage.getItem("bde_current_user")||"null")}catch{return null}})(),Se=fe!=null&&fe.username?J.find(Fe=>Fe.tura===fe.username):null,te=Se?[Se,...J]:J,xe=new Set,we=te.filter(Fe=>{const Ct=Fe.tura||Fe.id;return xe.has(Ct)?!1:(xe.add(Ct),!0)}),Pe=["8610","8620","8630","8640"];return we.sort((Fe,Ct)=>{const Ye=Pe.indexOf(String(Fe.tura)),Ut=Pe.indexOf(String(Ct.tura));if(Ye!==-1||Ut!==-1)return Ye===-1?1:Ut===-1?-1:Ye-Ut;const Kt=String(Fe.tura||""),ir=String(Ct.tura||""),Wr=Kt.localeCompare(ir,void 0,{numeric:!0});return Wr!==0?Wr:String(Fe.ime||"").localeCompare(String(Ct.ime||""),void 0,{sensitivity:"base"})}),[{ime:"",tura:"ALL"},...we]},[t]),oe=C.useCallback(async()=>{R(!0);try{const J=new Date(H,Y,1),fe=new Date(H,Y+1,0),Se=ft(J,"yyyy-MM-dd"),te=ft(fe,"yyyy-MM-dd"),{data:xe}=await me.from("extra_rides").select("*").gte("date",Se).lte("date",te).eq("status","approved"),{data:we}=await me.from("extra_rides_pending").select("*").gte("date",Se).lte("date",te).eq("status","pending");let Pe=xe||[],Fe=we||[];F&&(Pe=Pe.filter(Ye=>Ye.driver===F),Fe=Fe.filter(Ye=>Ye.driver===F));const Ct=[...Fe.map(Ye=>({...Ye,status:"pending"})),...Pe.map(Ye=>({...Ye,status:"approved"}))].sort((Ye,Ut)=>new Date(Ut.date)-new Date(Ye.date));j(Ct),O(Fe.length),T(Pe.length),N(Pe.reduce((Ye,Ut)=>Ye+(Ut.cijena||0),0))}catch(J){console.error(J)}finally{R(!1)}},[H,Y,F]);C.useEffect(()=>{oe()},[oe]),C.useEffect(()=>{const J=parseInt(g),fe=parseInt(f),Se=!isNaN(J)&&ah[J]?ah[J]:0,te=!isNaN(fe)&&lh[fe]?lh[fe]:0;b(Se+te)},[g,f]);const ge=async()=>{if(!n||!o||!d||!f||!g){alert("Unesite sve podatke!");return}S(!0);try{const J=(()=>{try{return JSON.parse(localStorage.getItem("bde_current_user")||"null")}catch{return null}})(),fe=parseInt(g),Se=parseInt(f),te=ah[fe]||0,xe=lh[Se]||0,we={driver:n,date:o,tura:d,plz:f,broj_adresa:fe,cijena:P,plz_price:xe,adresa_price:te,action:"create",created_by:(J==null?void 0:J.username)||d||null,status:"pending",created_at:new Date().toISOString()},{error:Pe}=await me.from("extra_rides_pending").insert([we]);if(Pe)throw Pe;c(ft(new Date,"yyyy-MM-dd")),h(""),m(""),x(""),b(0),de.current&&de.current.focus(),oe(),alert("Vonja dodana!")}catch(J){alert("Greka: "+J.message)}finally{S(!1)}},de=C.useRef(null);return a.jsxs("div",{className:ie.extraRidesScreen,children:[a.jsx("div",{className:ie.mainGrid,children:a.jsxs("div",{className:ie.headerCard,children:[a.jsx("div",{className:ie.heroSection,children:a.jsx("h1",{className:ie.heroTitle,children:"Posebne vonje"})}),a.jsxs("div",{className:ie.statsGrid,children:[a.jsxs("div",{className:ie.statCard,children:[a.jsx("div",{className:ie.statIcon,children:a.jsx(oh,{size:22})}),a.jsx("div",{className:ie.statValue,children:k}),a.jsx("div",{className:ie.statLabel,children:"Na ekanju"})]}),a.jsxs("div",{className:ie.statCard,children:[a.jsx("div",{className:ie.statIcon,children:a.jsx(Yv,{size:22})}),a.jsx("div",{className:ie.statValue,children:D}),a.jsx("div",{className:ie.statLabel,children:"Odobreno"})]}),a.jsxs("div",{className:ie.statCard,children:[a.jsx("div",{className:ie.statIcon,children:a.jsx(gE,{size:22})}),a.jsxs("div",{className:ie.statValue,children:[$.toFixed(0),""]}),a.jsx("div",{className:ie.statLabel,children:"Ukupan iznos"})]})]})]})}),a.jsx("div",{className:ie.controlsCard,children:a.jsxs("div",{className:ie.formContainer,children:[a.jsxs("div",{className:ie.formRowTwo,children:[a.jsxs("div",{className:ie.filterGroup,children:[a.jsxs("div",{className:ie.filterLabel,children:[a.jsx(Si,{size:16}),"Datum"]}),a.jsx("input",{type:"date",value:o,onChange:J=>c(J.target.value),className:ie.formInput})]}),a.jsxs("div",{className:ie.filterGroup,children:[a.jsxs("div",{className:ie.filterLabel,children:[a.jsx(Io,{size:16}),"Voza"]}),a.jsx("input",{type:"text",value:n||"",disabled:!0,placeholder:"Ulogovani voza",className:ie.formInput})]})]}),a.jsx("div",{className:ie.formRowSingle,children:a.jsxs("div",{className:ie.filterGroup,children:[a.jsxs("div",{className:ie.filterLabel,children:[a.jsx(Zv,{size:16}),"Tura"]}),a.jsx("input",{ref:de,type:"number",placeholder:"4 broja",min:"1000",max:"9999",value:d,onChange:J=>{const fe=J.target.value;fe.length<=4&&h(fe)},onInput:J=>{J.target.value=J.target.value.replace(/[^0-9]/g,"")},className:ie.formInput})]})}),a.jsx("div",{className:ie.formRowSingle,children:a.jsxs("div",{className:ie.filterGroup,children:[a.jsxs("div",{className:ie.filterLabel,children:[a.jsx(qv,{size:16}),"PLZ"]}),a.jsx("input",{type:"number",placeholder:"4 broja",min:"1000",max:"9999",value:f,onChange:J=>{const fe=J.target.value;fe.length<=4&&m(fe)},onInput:J=>{J.target.value=J.target.value.replace(/[^0-9]/g,"")},className:ie.formInput})]})}),a.jsx("div",{className:ie.formRowSingle,children:a.jsxs("div",{className:ie.filterGroup,children:[a.jsxs("div",{className:ie.filterLabel,children:[a.jsx(Gv,{size:16}),"Broj adresa"]}),a.jsx("input",{type:"number",placeholder:"20-120",min:"20",max:"120",value:g,onChange:J=>{const fe=J.target.value;fe.length<=3&&x(fe)},onInput:J=>{J.target.value=J.target.value.replace(/[^0-9]/g,"")},className:ie.formInput})]})}),a.jsx("div",{className:ie.formRowSingle,children:a.jsxs("div",{className:ie.filterGroup,children:[a.jsxs("div",{className:ie.priceLabel,children:[a.jsx(Kv,{size:18}),"Cena: ",a.jsxs("span",{className:ie.priceAmount,children:[P.toFixed(0),""]})]}),a.jsx("button",{onClick:ge,disabled:_,className:ie.submitButton,children:_?"Dodajem...":"Dodaj vonju"})]})})]})}),a.jsxs("div",{className:ie.dataCard,children:[a.jsxs("div",{className:ie.filtersContainer,children:[a.jsx("div",{className:ie.filterHeader,children:a.jsx("h3",{className:ie.filterTitle,children:" Filtriranje"})}),a.jsxs("div",{className:ie.filtersRow,children:[a.jsxs("div",{className:ie.filterGroup,children:[a.jsxs("div",{className:ie.filterLabel,children:[a.jsx(mE,{size:16}),"Voza"]}),a.jsxs("div",{className:ie.driverPickerWrapper,children:[a.jsx("div",{className:ie.driverDisplay,onClick:()=>W(!0),children:F?`${F} (${((ve=ne.find(J=>J.ime===F))==null?void 0:ve.tura)||""})`:"Svi vozai"}),X&&a.jsx(ix,{selectedDriver:F,onDriverChange:J=>{K(J),W(!1)},drivers:ne,onClose:()=>W(!1)})]})]}),a.jsxs("div",{className:ie.filterGroup,children:[a.jsxs("div",{className:ie.filterLabel,children:[a.jsx(Si,{size:16}),"Mesec"]}),a.jsxs("div",{className:ie.monthYearPickerWrapper,children:[a.jsx(Yp,{month:Y,year:H,onMonthChange:z,onYearChange:Z,className:ie.monthYearPicker}),a.jsxs("div",{className:ie.monthYearDisplay,children:[["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"][Y]," ",H]})]})]})]})]}),a.jsx("div",{className:ie.tableWrapper,children:I?a.jsxs("div",{className:ie.loadingContainer,children:[a.jsx(Zp,{size:24}),"Uitavanje..."]}):y.length===0?a.jsxs("div",{className:ie.emptyState,children:[a.jsx(Vv,{size:48}),a.jsx("h3",{children:"Nema vonji"}),a.jsx("p",{children:"Dodajte prvu posebnu vonju iznad."})]}):a.jsx("div",{className:ie.ridesGrid,children:y.map((J,fe)=>a.jsxs("div",{className:ie.rideCard,children:[a.jsxs("div",{className:ie.cardHeader,children:[a.jsxs("div",{className:ie.cardDate,children:[a.jsx(Si,{size:18}),a.jsx("span",{children:ft(new Date(J.date),"dd.MM.yyyy")})]}),a.jsx("div",{className:J.status==="approved"?ie.statusBadgeApproved:J.status==="rejected"?ie.statusBadgeRejected:ie.statusBadgePending,children:J.status==="approved"?a.jsxs(a.Fragment,{children:[a.jsx(Yv,{size:16}),a.jsx("span",{children:"Odobreno"})]}):J.status==="rejected"?a.jsxs(a.Fragment,{children:[a.jsx(oh,{size:16}),a.jsx("span",{children:"Odbaeno"})]}):a.jsxs(a.Fragment,{children:[a.jsx(oh,{size:16}),a.jsx("span",{children:"Na ekanju"})]})})]}),a.jsxs("div",{className:ie.cardPrice,children:[a.jsx(Kv,{size:24}),a.jsxs("span",{className:ie.priceAmount,children:[J.cijena,""]})]}),a.jsxs("div",{className:ie.cardInfo,children:[a.jsxs("div",{className:ie.infoRowTop,children:[a.jsxs("div",{className:ie.infoItem,children:[a.jsx(Io,{size:16}),a.jsx("span",{children:J.driver})]}),a.jsxs("div",{className:ie.infoItem,children:[a.jsx(Zv,{size:16}),a.jsx("span",{children:J.tura})]})]}),a.jsxs("div",{className:ie.infoRowBottom,children:[a.jsxs("div",{className:ie.infoItem,children:[a.jsx(qv,{size:16}),a.jsx("span",{children:J.plz})]}),a.jsxs("div",{className:ie.infoItem,children:[a.jsx(Gv,{size:16}),a.jsx("span",{children:J.broj_adresa})]})]})]})]},fe))})})]}),a.jsx(V1,{visible:!!A,onClose:()=>G(null),title:"Detalji vonje",icon:a.jsx(Vv,{size:24}),children:A&&a.jsxs("div",{style:{padding:20,display:"grid",gap:10},children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Datum:"})," ",ft(new Date(A.date),"dd.MM.yyyy")]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Voza:"})," ",A.driver]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Tura:"})," ",A.tura]}),a.jsxs("div",{children:[a.jsx("strong",{children:"PLZ:"})," ",A.plz]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Broj adresa:"})," ",A.broj_adresa]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Cena:"})," ",Number(A.cijena).toFixed(0)," "]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Status:"})," ",a.jsx("span",{className:A.status==="approved"?ie.statusApproved:A.status==="rejected"?ie.statusRejected:ie.statusPending,children:A.status==="approved"?" Odobreno":A.status==="rejected"?" Odbaeno":" Na ekanju"})]})]})})]})}const LO="_screenContainer_3ramy_3",OO="_header_3ramy_17",NO="_headerContent_3ramy_34",RO="_titleSection_3ramy_42",IO="_titleIcon_3ramy_48",MO="_title_3ramy_42",AO="_content_3ramy_63",DO="_tabsContainer_3ramy_72",zO="_tab_3ramy_72",BO="_activeTab_3ramy_122",$O="_tabIcon_3ramy_131",FO="_tabContent_3ramy_137",UO="_card_3ramy_142",WO="_dashboardContent_3ramy_189",Je={screenContainer:LO,header:OO,headerContent:NO,titleSection:RO,titleIcon:IO,title:MO,content:AO,tabsContainer:DO,tab:zO,activeTab:BO,tabIcon:$O,tabContent:FO,card:UO,dashboardContent:WO},bn=({loading:t,children:e,...n})=>a.jsx("button",{...n,disabled:t,style:{borderRadius:12,padding:"16px 18px",background:n.bgColor||"#1769aa",color:"#fff",fontWeight:"bold",fontSize:16,display:"flex",alignItems:"center",justifyContent:"center",opacity:t?.7:1,cursor:t?"not-allowed":"pointer"},children:t?a.jsx("span",{className:"spinner"}):e}),Mf=({status:t,children:e})=>a.jsx("span",{style:{background:t==="active"?"#4caf50":t==="pending"?"#ff9800":"#607d8b",borderRadius:6,padding:"4px 10px",color:"#fff",fontWeight:"bold"},children:e||t}),al=({icon:t,text:e,subtext:n})=>a.jsxs("div",{style:{alignItems:"center",marginTop:40},children:[a.jsx("span",{style:{fontSize:40,marginBottom:8},children:t}),a.jsx("div",{style:{fontSize:16,fontWeight:"bold"},children:e}),n&&a.jsx("div",{style:{fontSize:13,color:"#888",marginTop:4},children:n})]}),ll=({open:t,title:e,children:n,loading:r,onSubmit:s,onClose:o,submitLabel:c="Sauvaj",closeLabel:d="Otkai",showActions:h=!0})=>t?a.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,animation:"fadeIn 0.3s ease"},children:[a.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"32px",minWidth:"400px",maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.15)",color:"var(--text-on-dark, #f1f5f9)",animation:"scaleIn 0.3s ease"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",paddingBottom:"16px"},children:[a.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:e}),a.jsx("button",{onClick:o,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-on-dark, #f1f5f9)",fontSize:"18px",fontWeight:"bold",transition:"all 0.3s ease",backdropFilter:"blur(5px)"},onMouseEnter:f=>{f.target.style.background="rgba(255, 255, 255, 0.2)",f.target.style.transform="scale(1.1)"},onMouseLeave:f=>{f.target.style.background="rgba(255, 255, 255, 0.1)",f.target.style.transform="scale(1)"},children:""})]}),a.jsxs("form",{onSubmit:f=>{f.preventDefault(),s&&s()},children:[a.jsx("div",{style:{marginBottom:h?"24px":"0"},children:n}),h&&a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"16px"},children:[a.jsx("button",{type:"button",onClick:o,style:{background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",borderRadius:"12px",padding:"12px 24px",fontWeight:"bold",border:"1px solid rgba(255, 255, 255, 0.2)",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(5px)"},onMouseEnter:f=>{f.target.style.background="rgba(255, 255, 255, 0.2)",f.target.style.transform="translateY(-2px)"},onMouseLeave:f=>{f.target.style.background="rgba(255, 255, 255, 0.1)",f.target.style.transform="translateY(0)"},children:d}),s&&a.jsx("button",{type:"submit",disabled:r,style:{background:r?"rgba(68, 202, 223, 0.5)":"linear-gradient(145deg, #44cadf 0%, #22d3ee 100%)",color:"#fff",borderRadius:"12px",padding:"12px 24px",fontWeight:"bold",border:"none",cursor:r?"not-allowed":"pointer",transition:"all 0.3s ease",boxShadow:r?"none":"0 4px 15px rgba(68, 202, 223, 0.3)",opacity:r?.7:1},onMouseEnter:f=>{r||(f.target.style.transform="translateY(-2px)",f.target.style.boxShadow="0 6px 20px rgba(68, 202, 223, 0.4)")},onMouseLeave:f=>{r||(f.target.style.transform="translateY(0)",f.target.style.boxShadow="0 4px 15px rgba(68, 202, 223, 0.3)")},children:r?a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid #fff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"uvanje..."]}):c})]})]})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes scaleIn {
          from { 
            opacity: 0; 
            transform: scale(0.9) translateY(20px); 
          }
          to { 
            opacity: 1; 
            transform: scale(1) translateY(0); 
          }
        }
        
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]}):null,HO=()=>{const[t,e]=C.useState([]),[n,r]=C.useState([]),[s,o]=C.useState(!0),[c,d]=C.useState(null),[h,f]=C.useState(!1),[m,g]=C.useState(!1),[x,P]=C.useState(null),[b,_]=C.useState({driver:"",date:"",tura:"",plz:"",broj_adresa:"",cijena:"",notes:""}),[S,y]=C.useState(ft(new Date,"yyyy-MM")),j=window.innerWidth>700,k=C.useCallback(async()=>{o(!0);try{const[N,I]=S.split("-"),R=new Date(parseInt(N),parseInt(I)-1,1),A=new Date(parseInt(N),parseInt(I),0),G=ft(R,"yyyy-MM-dd"),F=ft(A,"yyyy-MM-dd");console.log(" [RidesTab] Date range:",G,"to",F);const{data:K,error:H}=await me.from("extra_rides").select("*").gte("date",G).lte("date",F).eq("status","approved").order("date",{ascending:!1}),{data:Z,error:Y}=await me.from("extra_rides_pending").select("*").gte("date",G).lte("date",F).eq("status","pending").order("date",{ascending:!1});H&&console.error("Error fetching approved rides:",H),Y&&console.error(" [RidesTab] Error fetching pending rides:",Y);const z=(Z||[]).map(W=>({id:W.id,vozac:W.driver,datum:ft(new Date(W.date),"dd.MM.yyyy"),tura:W.tura,plz:W.plz,brojAdresa:W.broj_adresa,cijena:`${W.cijena}`,status:W.status,napomena:W.notes||""})),X=(K||[]).map(W=>({id:W.id,vozac:W.driver,datum:ft(new Date(W.date),"dd.MM.yyyy"),tura:W.tura,plz:W.plz,brojAdresa:W.broj_adresa,cijena:`${W.cijena}`,status:"approved",napomena:W.notes||""}));e(z),r(X)}catch(N){console.error(" [RidesTab] Error fetching rides:",N),e([]),r([])}finally{o(!1)}},[S]);C.useEffect(()=>{k()},[k]);const O=async N=>{try{if(!t.find(K=>K.id===N))return;const{data:R,error:A}=await me.from("extra_rides_pending").select("*").eq("id",N).single();if(A)throw A;const{error:G}=await me.from("extra_rides").insert([{date:R.date,driver:R.driver,tura:R.tura,plz:R.plz,broj_adresa:R.broj_adresa,cijena:R.cijena,notes:R.notes,plz_price:R.plz_price,adresa_price:R.adresa_price,created_by:R.created_by,status:"approved",approved_by:"Admin",approved_at:new Date().toISOString(),original_id:R.original_id}]);if(G)throw G;const{error:F}=await me.from("extra_rides_pending").delete().eq("id",N);if(F)throw F;await k(),alert("Vonja je uspeno odobrena!")}catch(I){console.error(" [RidesTab] Error approving ride:",I),alert("Greka pri odobravanju vonje: "+I.message)}},D=async N=>{try{const{error:I}=await me.from("extra_rides_pending").update({status:"rejected"}).eq("id",N);if(I)throw I;await k(),alert("Vonja je odbijena!")}catch(I){console.error(" [RidesTab] Error rejecting ride:",I),alert("Greka pri odbijanju vonje: "+I.message)}},T=(N,I=!0)=>{console.log(" [RidesTab] Opening edit modal for ride:",N),P({...N,isPending:I}),_({driver:N.vozac,date:N.datum.split(".").reverse().join("-"),tura:N.tura,plz:N.plz,broj_adresa:N.brojAdresa,cijena:parseFloat(N.cijena.replace("","")),notes:N.napomena||""}),g(!0)},$=async()=>{if(x)try{console.log(" [RidesTab] Saving ride edit:",b);const N={driver:b.driver,date:b.date,tura:b.tura,plz:b.plz,broj_adresa:parseInt(b.broj_adresa),cijena:parseFloat(b.cijena),notes:b.notes,last_updated:new Date().toISOString()},I=x.isPending?"extra_rides_pending":"extra_rides",{error:R}=await me.from(I).update(N).eq("id",x.id);if(R)throw R;g(!1),P(null),await k(),alert("Vonja je uspeno izmenjena!")}catch(N){console.error(" [RidesTab] Error saving ride edit:",N),alert("Greka pri uvanju izmena: "+N.message)}};return a.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 50%, rgba(255, 255, 255, 0.04) 100%)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"16px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)",padding:"2rem",color:"var(--text-on-dark, #f1f5f9)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[a.jsx("h2",{style:{fontWeight:"bold",margin:0,color:"var(--text-on-dark, #f1f5f9)"},children:" Extra vonje - Odobravanje"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[a.jsx("label",{style:{fontSize:14,color:"var(--text-on-dark, #f1f5f9)",opacity:.8},children:"Mesec:"}),a.jsx("input",{type:"month",value:S,onChange:N=>y(N.target.value),style:{padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]})]}),a.jsxs("div",{style:{display:"flex",gap:8,marginBottom:20},children:[a.jsx("div",{style:{background:"rgba(255, 193, 7, 0.15)",borderRadius:16,padding:16,flex:1,border:"1px solid rgba(255, 193, 7, 0.3)",backdropFilter:"blur(5px)"},children:a.jsxs("span",{style:{color:"#ffc107",fontWeight:"bold"},children:[" Pending: ",t.length]})}),a.jsx("div",{style:{background:"rgba(40, 167, 69, 0.15)",borderRadius:16,padding:16,flex:1,border:"1px solid rgba(40, 167, 69, 0.3)",backdropFilter:"blur(5px)"},children:a.jsxs("span",{style:{color:"#28a745",fontWeight:"bold"},children:[" Odobreno: ",n.length]})})]}),a.jsx("h3",{style:{marginBottom:10,color:"var(--text-on-dark, #f1f5f9)"},children:" Vonje na ekanju"}),s?a.jsx("div",{style:{textAlign:"center",padding:"20px"},children:a.jsx("div",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Uitavanje..."})}):t.length===0?a.jsx(al,{icon:a.jsx("span",{children:""}),text:"Nema vonji na ekanju",subtext:"Sve vonje su obraene."}):a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:12,marginBottom:24},children:t.map(N=>a.jsxs("div",{style:{background:"rgba(255, 193, 7, 0.1)",borderRadius:12,padding:14,border:"1px solid rgba(255, 193, 7, 0.3)",backdropFilter:"blur(5px)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[a.jsxs("span",{style:{fontWeight:"bold",fontSize:16,color:"var(--text-on-dark, #f1f5f9)"},children:[" ",N.vozac]}),a.jsxs(Mf,{status:N.status,children:[" ",N.status]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:8,marginBottom:12},children:[a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Datum: ",a.jsx("strong",{children:N.datum})]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Tura: ",a.jsx("strong",{children:N.tura})]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" PLZ: ",a.jsx("strong",{children:N.plz})]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Adrese: ",a.jsx("strong",{children:N.brojAdresa})]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Cijena: ",a.jsx("strong",{children:N.cijena})]})]}),a.jsxs("div",{style:{display:"flex",marginTop:12,gap:8,flexWrap:"wrap"},children:[a.jsx(bn,{onClick:()=>O(N.id),bgColor:"#28a745",children:" Odobri"}),a.jsx(bn,{onClick:()=>D(N.id),bgColor:"#dc3545",children:" Odbij"}),a.jsx(bn,{onClick:()=>T(N,!0),bgColor:"#ffc107",children:" Uredi"}),a.jsx(bn,{onClick:()=>{d(N),f(!0)},bgColor:"#007bff",children:" Detalji"})]})]},N.id))}),a.jsx("h3",{style:{marginTop:24,marginBottom:10,color:"var(--text-on-dark, #f1f5f9)"},children:" Odobrene vonje"}),n.length===0?a.jsx(al,{icon:a.jsx("span",{children:""}),text:"Nema odobrenih vonji",subtext:"Za odabrani mesec."}):a.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${j?2:1}, 1fr)`,gap:12},children:n.map(N=>a.jsxs("div",{style:{background:"rgba(40, 167, 69, 0.1)",borderRadius:12,padding:14,border:"1px solid rgba(40, 167, 69, 0.3)",backdropFilter:"blur(5px)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[a.jsxs("span",{style:{fontWeight:"bold",fontSize:16,color:"var(--text-on-dark, #f1f5f9)"},children:[" ",N.vozac]}),a.jsx(Mf,{status:"approved",children:" Odobreno"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:6,marginBottom:12},children:[a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" ",N.datum]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" ",N.tura]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" ",N.plz]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" ",N.brojAdresa]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" ",N.cijena]})]}),a.jsxs("div",{style:{display:"flex",marginTop:10,gap:8},children:[a.jsx(bn,{onClick:()=>T(N,!1),bgColor:"#ffc107",children:" Uredi"}),a.jsx(bn,{onClick:()=>{d(N),f(!0)},bgColor:"#007bff",children:" Detalji"})]})]},N.id))}),a.jsx(ll,{open:h,title:" Detalji vonje",onClose:()=>f(!1),showActions:!1,children:c&&a.jsx("div",{style:{display:"grid",gap:16},children:a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"12px",alignItems:"center"},children:[a.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Voza:"}),a.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.vozac}),a.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Datum:"}),a.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.datum}),a.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Tura:"}),a.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.tura}),a.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" PLZ:"}),a.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.plz}),a.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Broj adresa:"}),a.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.brojAdresa}),a.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Cijena:"}),a.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.cijena}),a.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Status:"}),a.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.status}),c.napomena&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Napomena:"}),a.jsx("span",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:c.napomena})]})]})})}),a.jsx(ll,{open:m,title:` Uredi vonju ${x!=null&&x.isPending?"(Pending)":"(Odobreno)"}`,onClose:()=>g(!1),onSubmit:$,loading:s,submitLabel:" Sauvaj promjene",closeLabel:" Otkai",children:a.jsxs("div",{style:{display:"grid",gap:16},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Voza:"}),a.jsx("input",{type:"text",value:b.driver,onChange:N=>_({...b,driver:N.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Datum:"}),a.jsx("input",{type:"date",value:b.date,onChange:N=>_({...b,date:N.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Tura:"}),a.jsx("input",{type:"text",value:b.tura,onChange:N=>_({...b,tura:N.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" PLZ:"}),a.jsx("input",{type:"text",value:b.plz,onChange:N=>_({...b,plz:N.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Broj adresa:"}),a.jsx("input",{type:"number",min:"1",value:b.broj_adresa,onChange:N=>_({...b,broj_adresa:N.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Cijena ():"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:b.cijena,onChange:N=>_({...b,cijena:N.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Napomena:"}),a.jsx("textarea",{value:b.notes,onChange:N=>_({...b,notes:N.target.value}),rows:3,style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",resize:"vertical",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"},placeholder:"Dodajte napomenu..."})]})]})})]})},VO=()=>{const{drivers:t,loading:e,error:n,addDriver:r,updateDriver:s,deleteDriver:o,toggleDriverStatus:c}=Wo(),[d,h]=C.useState(null),[f,m]=C.useState(!1),[g,x]=C.useState(!1),[P,b]=C.useState(!1),[_,S]=C.useState({}),[y,j]=C.useState({ime:"",tura:"",aktivan:!0,target_per_day:0,password_hash:"",role:"driver"}),k=window.innerWidth>700,O=F=>{S(K=>({...K,[F]:!K[F]}))},D=F=>{try{return atob(F)}catch{return F}},T=F=>{try{return btoa(F)}catch{return F}},$=async()=>{b(!0);try{const F={...y,password_hash:y.password_hash?T(y.password_hash):""};await r(F),x(!1),j({ime:"",tura:"",aktivan:!0,target_per_day:0,password_hash:"",role:"driver"})}catch(F){console.error("Greka pri dodavanju vozaa:",F),alert("Greka pri dodavanju vozaa: "+F.message)}finally{b(!1)}},N=async()=>{if(d){b(!0);try{const F={...y,password_hash:y.password_hash?T(y.password_hash):d.password_hash};await s(d.id,F),m(!1),h(null)}catch(F){console.error("Greka pri auriranju vozaa:",F),alert("Greka pri auriranju vozaa: "+F.message)}finally{b(!1)}}},I=async F=>{if(window.confirm(`Da li ste sigurni da elite obrisati vozaa ${F.ime}?`))try{await o(F.id)}catch(K){console.error("Greka pri brisanju vozaa:",K),alert("Greka pri brisanju vozaa: "+K.message)}},R=async F=>{try{await c(F.id,F.aktivan)}catch(K){console.error("Greka pri mijenjanju statusa:",K),alert("Greka pri mijenjanju statusa: "+K.message)}},A=F=>{h(F),j({ime:F.ime,tura:F.tura,aktivan:F.aktivan,target_per_day:F.target_per_day||0,password_hash:F.password_hash?D(F.password_hash):"",role:F.role||"driver"}),m(!0)},G=()=>{j({ime:"",tura:"",aktivan:!0,target_per_day:0,password_hash:"",role:"driver"}),x(!0)};return a.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 50%, rgba(255, 255, 255, 0.04) 100%)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"16px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)",padding:"2rem",color:"var(--text-on-dark, #f1f5f9)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[a.jsx("h2",{style:{fontWeight:"bold",margin:0,color:"var(--text-on-dark, #f1f5f9)"},children:" Upravljanje korisnicima"}),a.jsx(bn,{onClick:G,bgColor:"#007bff",children:" Dodaj korisnika"})]}),a.jsxs("div",{style:{display:"flex",gap:8,marginBottom:20},children:[a.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",borderRadius:16,padding:16,flex:1,border:"1px solid rgba(76, 175, 80, 0.3)",backdropFilter:"blur(5px)"},children:a.jsxs("span",{style:{color:"#4caf50",fontWeight:"bold"},children:[" Aktivni: ",t.filter(F=>F.aktivan).length]})}),a.jsx("div",{style:{background:"rgba(255, 193, 7, 0.15)",borderRadius:16,padding:16,flex:1,border:"1px solid rgba(255, 193, 7, 0.3)",backdropFilter:"blur(5px)"},children:a.jsxs("span",{style:{color:"#ffc107",fontWeight:"bold"},children:[" Neaktivni: ",t.filter(F=>!F.aktivan).length]})}),a.jsx("div",{style:{background:"rgba(33, 150, 243, 0.15)",borderRadius:16,padding:16,flex:1,border:"1px solid rgba(33, 150, 243, 0.3)",backdropFilter:"blur(5px)"},children:a.jsxs("span",{style:{color:"#2196f3",fontWeight:"bold"},children:[" Ukupno: ",t.length]})})]}),n&&a.jsxs("div",{style:{background:"rgba(220, 53, 69, 0.15)",border:"1px solid rgba(220, 53, 69, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",color:"#dc3545"},children:[" Greka: ",n.message]}),e?a.jsx("div",{style:{textAlign:"center",padding:"20px"},children:a.jsx("div",{style:{color:"var(--text-on-dark, #f1f5f9)"},children:" Uitavanje korisnika..."})}):t.length===0?a.jsx(al,{icon:a.jsx("span",{children:""}),text:"Nema korisnika",subtext:"Nema registrovanih korisnika."}):a.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${k?2:1}, 1fr)`,gap:12},children:t.map(F=>a.jsxs("div",{style:{background:F.aktivan?"rgba(76, 175, 80, 0.1)":"rgba(255, 193, 7, 0.1)",border:F.aktivan?"1px solid rgba(76, 175, 80, 0.3)":"1px solid rgba(255, 193, 7, 0.3)",borderRadius:12,padding:14,backdropFilter:"blur(5px)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[a.jsxs("span",{style:{fontWeight:"bold",fontSize:16,color:"var(--text-on-dark, #f1f5f9)"},children:[" ",F.ime]}),a.jsx(Mf,{status:F.aktivan?"active":"blocked",children:F.aktivan?" Aktivan":" Blokiran"})]}),a.jsxs("div",{style:{display:"grid",gap:6,marginBottom:12},children:[a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Tura: ",a.jsx("strong",{children:F.tura})]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Target/dan: ",a.jsx("strong",{children:F.target_per_day||0})]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Password:",a.jsx("strong",{children:F.password_hash?_[F.id]?D(F.password_hash):"":"N/A"}),F.password_hash&&a.jsx("button",{onClick:()=>O(F.id),style:{marginLeft:"8px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",padding:"2px 6px",color:"var(--text-on-dark, #f1f5f9)",cursor:"pointer",fontSize:"11px",backdropFilter:"blur(5px)"},children:_[F.id]?"":""})]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Uloga: ",a.jsx("strong",{children:F.role==="admin"?" Admin":" Voza"})]}),F.last_login&&a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.8,fontSize:13},children:[" Zadnji login: ",a.jsx("strong",{children:new Date(F.last_login).toLocaleDateString("bs-BA")})]})]}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx(bn,{onClick:()=>A(F),bgColor:"#007bff",children:" Uredi"}),a.jsx(bn,{onClick:()=>R(F),bgColor:F.aktivan?"#ff9800":"#4caf50",children:F.aktivan?" Deaktiviraj":" Aktiviraj"}),a.jsx(bn,{onClick:()=>I(F),bgColor:"#dc3545",children:" Obrii"})]})]},F.id))}),a.jsx(ll,{open:g,title:" Dodaj novog korisnika",onClose:()=>x(!1),onSubmit:$,loading:P,submitLabel:" Dodaj korisnika",closeLabel:" Otkai",children:a.jsxs("div",{style:{display:"grid",gap:16},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Ime korisnika:"}),a.jsx("input",{type:"text",value:y.ime,onChange:F=>j({...y,ime:F.target.value}),placeholder:"Unesite ime korisnika",required:!0,style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Tura:"}),a.jsx("input",{type:"text",value:y.tura,onChange:F=>j({...y,tura:F.target.value}),placeholder:"npr. A1, B2, C3...",required:!0,style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Target po danu:"}),a.jsx("input",{type:"number",value:y.target_per_day,onChange:F=>j({...y,target_per_day:parseInt(F.target.value)||0}),placeholder:"0",min:"0",style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Uloga:"}),a.jsxs("select",{value:y.role,onChange:F=>j({...y,role:F.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"},children:[a.jsx("option",{value:"user",children:" Korisnik"}),a.jsx("option",{value:"admin",children:" Administrator"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Password:"}),a.jsx("input",{type:"password",value:y.password_hash,onChange:F=>j({...y,password_hash:F.target.value}),placeholder:"Unesite password",style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",id:"addActiveCheckbox",checked:y.aktivan,onChange:F=>j({...y,aktivan:F.target.checked}),style:{accentColor:"#4caf50"}}),a.jsx("label",{htmlFor:"addActiveCheckbox",style:{color:"var(--text-on-dark, #f1f5f9)",fontSize:"14px"},children:" Aktivan korisnik"})]})]})}),a.jsx(ll,{open:f,title:" Uredi korisnika",onClose:()=>m(!1),onSubmit:N,loading:P,submitLabel:" Sauvaj promjene",closeLabel:" Otkai",children:a.jsxs("div",{style:{display:"grid",gap:16},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Ime korisnika:"}),a.jsx("input",{type:"text",value:y.ime,onChange:F=>j({...y,ime:F.target.value}),placeholder:"Unesite ime korisnika",required:!0,style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Tura:"}),a.jsx("input",{type:"text",value:y.tura,onChange:F=>j({...y,tura:F.target.value}),placeholder:"npr. A1, B2, C3...",required:!0,style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Target po danu:"}),a.jsx("input",{type:"number",value:y.target_per_day,onChange:F=>j({...y,target_per_day:parseInt(F.target.value)||0}),placeholder:"0",min:"0",style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Uloga:"}),a.jsxs("select",{value:y.role,onChange:F=>j({...y,role:F.target.value}),style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"},children:[a.jsx("option",{value:"driver",children:" Voza"}),a.jsx("option",{value:"admin",children:" Administrator"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:" Password:"}),a.jsx("input",{type:"password",value:y.password_hash,onChange:F=>j({...y,password_hash:F.target.value}),placeholder:"Ostavite prazno da ne mijenjate",style:{width:"100%",padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",id:"editActiveCheckbox",checked:y.aktivan,onChange:F=>j({...y,aktivan:F.target.checked}),style:{accentColor:"#4caf50"}}),a.jsx("label",{htmlFor:"editActiveCheckbox",style:{color:"var(--text-on-dark, #f1f5f9)",fontSize:"14px"},children:" Aktivan korisnik"})]})]})})]})};function sx(t,e){return function(){return t.apply(e,arguments)}}const{toString:qO}=Object.prototype,{getPrototypeOf:tm}=Object,{iterator:Bu,toStringTag:ox}=Symbol,$u=(t=>e=>{const n=qO.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),rr=t=>(t=t.toLowerCase(),e=>$u(e)===t),Fu=t=>e=>typeof e===t,{isArray:Ho}=Array,Mo=Fu("undefined");function jl(t){return t!==null&&!Mo(t)&&t.constructor!==null&&!Mo(t.constructor)&&vn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ax=rr("ArrayBuffer");function GO(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ax(t.buffer),e}const ZO=Fu("string"),vn=Fu("function"),lx=Fu("number"),kl=t=>t!==null&&typeof t=="object",KO=t=>t===!0||t===!1,Oc=t=>{if($u(t)!=="object")return!1;const e=tm(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ox in t)&&!(Bu in t)},YO=t=>{if(!kl(t)||jl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},JO=rr("Date"),QO=rr("File"),XO=rr("Blob"),eN=rr("FileList"),tN=t=>kl(t)&&vn(t.pipe),nN=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||vn(t.append)&&((e=$u(t))==="formdata"||e==="object"&&vn(t.toString)&&t.toString()==="[object FormData]"))},rN=rr("URLSearchParams"),[iN,sN,oN,aN]=["ReadableStream","Request","Response","Headers"].map(rr),lN=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ho(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(jl(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),c=o.length;let d;for(r=0;r<c;r++)d=o[r],e.call(null,t[d],d,t)}}function cx(t,e){if(jl(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const ts=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ux=t=>!Mo(t)&&t!==ts;function Af(){const{caseless:t,skipUndefined:e}=ux(this)&&this||{},n={},r=(s,o)=>{const c=t&&cx(n,o)||o;Oc(n[c])&&Oc(s)?n[c]=Af(n[c],s):Oc(s)?n[c]=Af({},s):Ho(s)?n[c]=s.slice():(!e||!Mo(s))&&(n[c]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&Sl(arguments[s],r);return n}const cN=(t,e,n,{allOwnKeys:r}={})=>(Sl(e,(s,o)=>{n&&vn(s)?t[o]=sx(s,n):t[o]=s},{allOwnKeys:r}),t),uN=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),dN=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},hN=(t,e,n,r)=>{let s,o,c;const d={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)c=s[o],(!r||r(c,t,e))&&!d[c]&&(e[c]=t[c],d[c]=!0);t=n!==!1&&tm(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},fN=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},pN=t=>{if(!t)return null;if(Ho(t))return t;let e=t.length;if(!lx(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},mN=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&tm(Uint8Array)),gN=(t,e)=>{const r=(t&&t[Bu]).call(t);let s;for(;(s=r.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},vN=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},yN=rr("HTMLFormElement"),_N=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),a0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),xN=rr("RegExp"),dx=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Sl(n,(s,o)=>{let c;(c=e(s,o,t))!==!1&&(r[o]=c||s)}),Object.defineProperties(t,r)},wN=t=>{dx(t,(e,n)=>{if(vn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(vn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},bN=(t,e)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return Ho(t)?r(t):r(String(t).split(e)),n},jN=()=>{},kN=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function SN(t){return!!(t&&vn(t.append)&&t[ox]==="FormData"&&t[Bu])}const CN=t=>{const e=new Array(10),n=(r,s)=>{if(kl(r)){if(e.indexOf(r)>=0)return;if(jl(r))return r;if(!("toJSON"in r)){e[s]=r;const o=Ho(r)?[]:{};return Sl(r,(c,d)=>{const h=n(c,s+1);!Mo(h)&&(o[d]=h)}),e[s]=void 0,o}}return r};return n(t,0)},PN=rr("AsyncFunction"),EN=t=>t&&(kl(t)||vn(t))&&vn(t.then)&&vn(t.catch),hx=((t,e)=>t?setImmediate:e?((n,r)=>(ts.addEventListener("message",({source:s,data:o})=>{s===ts&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),ts.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",vn(ts.postMessage)),TN=typeof queueMicrotask<"u"?queueMicrotask.bind(ts):typeof process<"u"&&process.nextTick||hx,LN=t=>t!=null&&vn(t[Bu]),q={isArray:Ho,isArrayBuffer:ax,isBuffer:jl,isFormData:nN,isArrayBufferView:GO,isString:ZO,isNumber:lx,isBoolean:KO,isObject:kl,isPlainObject:Oc,isEmptyObject:YO,isReadableStream:iN,isRequest:sN,isResponse:oN,isHeaders:aN,isUndefined:Mo,isDate:JO,isFile:QO,isBlob:XO,isRegExp:xN,isFunction:vn,isStream:tN,isURLSearchParams:rN,isTypedArray:mN,isFileList:eN,forEach:Sl,merge:Af,extend:cN,trim:lN,stripBOM:uN,inherits:dN,toFlatObject:hN,kindOf:$u,kindOfTest:rr,endsWith:fN,toArray:pN,forEachEntry:gN,matchAll:vN,isHTMLForm:yN,hasOwnProperty:a0,hasOwnProp:a0,reduceDescriptors:dx,freezeMethods:wN,toObjectSet:bN,toCamelCase:_N,noop:jN,toFiniteNumber:kN,findKey:cx,global:ts,isContextDefined:ux,isSpecCompliantForm:SN,toJSONObject:CN,isAsyncFn:PN,isThenable:EN,setImmediate:hx,asap:TN,isIterable:LN};function Te(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}q.inherits(Te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const fx=Te.prototype,px={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{px[t]={value:t}});Object.defineProperties(Te,px);Object.defineProperty(fx,"isAxiosError",{value:!0});Te.from=(t,e,n,r,s,o)=>{const c=Object.create(fx);q.toFlatObject(t,c,function(m){return m!==Error.prototype},f=>f!=="isAxiosError");const d=t&&t.message?t.message:"Error",h=e==null&&t?t.code:e;return Te.call(c,d,h,n,r,s),t&&c.cause==null&&Object.defineProperty(c,"cause",{value:t,configurable:!0}),c.name=t&&t.name||"Error",o&&Object.assign(c,o),c};const ON=null;function Df(t){return q.isPlainObject(t)||q.isArray(t)}function mx(t){return q.endsWith(t,"[]")?t.slice(0,-2):t}function l0(t,e,n){return t?t.concat(e).map(function(s,o){return s=mx(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function NN(t){return q.isArray(t)&&!t.some(Df)}const RN=q.toFlatObject(q,{},null,function(e){return/^is[A-Z]/.test(e)});function Uu(t,e,n){if(!q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,S){return!q.isUndefined(S[_])});const r=n.metaTokens,s=n.visitor||m,o=n.dots,c=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(e);if(!q.isFunction(s))throw new TypeError("visitor must be a function");function f(b){if(b===null)return"";if(q.isDate(b))return b.toISOString();if(q.isBoolean(b))return b.toString();if(!h&&q.isBlob(b))throw new Te("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(b)||q.isTypedArray(b)?h&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function m(b,_,S){let y=b;if(b&&!S&&typeof b=="object"){if(q.endsWith(_,"{}"))_=r?_:_.slice(0,-2),b=JSON.stringify(b);else if(q.isArray(b)&&NN(b)||(q.isFileList(b)||q.endsWith(_,"[]"))&&(y=q.toArray(b)))return _=mx(_),y.forEach(function(k,O){!(q.isUndefined(k)||k===null)&&e.append(c===!0?l0([_],O,o):c===null?_:_+"[]",f(k))}),!1}return Df(b)?!0:(e.append(l0(S,_,o),f(b)),!1)}const g=[],x=Object.assign(RN,{defaultVisitor:m,convertValue:f,isVisitable:Df});function P(b,_){if(!q.isUndefined(b)){if(g.indexOf(b)!==-1)throw Error("Circular reference detected in "+_.join("."));g.push(b),q.forEach(b,function(y,j){(!(q.isUndefined(y)||y===null)&&s.call(e,y,q.isString(j)?j.trim():j,_,x))===!0&&P(y,_?_.concat(j):[j])}),g.pop()}}if(!q.isObject(t))throw new TypeError("data must be an object");return P(t),e}function c0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function nm(t,e){this._pairs=[],t&&Uu(t,this,e)}const gx=nm.prototype;gx.append=function(e,n){this._pairs.push([e,n])};gx.toString=function(e){const n=e?function(r){return e.call(this,r,c0)}:c0;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function IN(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function vx(t,e,n){if(!e)return t;const r=n&&n.encode||IN;q.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(e,n):o=q.isURLSearchParams(e)?e.toString():new nm(e,n).toString(r),o){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class u0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){q.forEach(this.handlers,function(r){r!==null&&e(r)})}}const yx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},MN=typeof URLSearchParams<"u"?URLSearchParams:nm,AN=typeof FormData<"u"?FormData:null,DN=typeof Blob<"u"?Blob:null,zN={isBrowser:!0,classes:{URLSearchParams:MN,FormData:AN,Blob:DN},protocols:["http","https","file","blob","url","data"]},rm=typeof window<"u"&&typeof document<"u",zf=typeof navigator=="object"&&navigator||void 0,BN=rm&&(!zf||["ReactNative","NativeScript","NS"].indexOf(zf.product)<0),$N=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",FN=rm&&window.location.href||"http://localhost",UN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rm,hasStandardBrowserEnv:BN,hasStandardBrowserWebWorkerEnv:$N,navigator:zf,origin:FN},Symbol.toStringTag,{value:"Module"})),Gt={...UN,...zN};function WN(t,e){return Uu(t,new Gt.classes.URLSearchParams,{visitor:function(n,r,s,o){return Gt.isNode&&q.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function HN(t){return q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function VN(t){const e={},n=Object.keys(t);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],e[o]=t[o];return e}function _x(t){function e(n,r,s,o){let c=n[o++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),h=o>=n.length;return c=!c&&q.isArray(s)?s.length:c,h?(q.hasOwnProp(s,c)?s[c]=[s[c],r]:s[c]=r,!d):((!s[c]||!q.isObject(s[c]))&&(s[c]=[]),e(n,r,s[c],o)&&q.isArray(s[c])&&(s[c]=VN(s[c])),!d)}if(q.isFormData(t)&&q.isFunction(t.entries)){const n={};return q.forEachEntry(t,(r,s)=>{e(HN(r),s,n,0)}),n}return null}function qN(t,e,n){if(q.isString(t))try{return(e||JSON.parse)(t),q.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Cl={transitional:yx,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=q.isObject(e);if(o&&q.isHTMLForm(e)&&(e=new FormData(e)),q.isFormData(e))return s?JSON.stringify(_x(e)):e;if(q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)||q.isReadableStream(e))return e;if(q.isArrayBufferView(e))return e.buffer;if(q.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return WN(e,this.formSerializer).toString();if((d=q.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Uu(d?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),qN(e)):e}],transformResponse:[function(e){const n=this.transitional||Cl.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(q.isResponse(e)||q.isReadableStream(e))return e;if(e&&q.isString(e)&&(r&&!this.responseType||s)){const c=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(d){if(c)throw d.name==="SyntaxError"?Te.from(d,Te.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],t=>{Cl.headers[t]={}});const GN=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ZN=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(c){s=c.indexOf(":"),n=c.substring(0,s).trim().toLowerCase(),r=c.substring(s+1).trim(),!(!n||e[n]&&GN[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},d0=Symbol("internals");function ya(t){return t&&String(t).trim().toLowerCase()}function Nc(t){return t===!1||t==null?t:q.isArray(t)?t.map(Nc):String(t)}function KN(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const YN=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ch(t,e,n,r,s){if(q.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!q.isString(e)){if(q.isString(r))return e.indexOf(r)!==-1;if(q.isRegExp(r))return r.test(e)}}function JN(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function QN(t,e){const n=q.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,o,c){return this[r].call(this,e,s,o,c)},configurable:!0})})}let yn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function o(d,h,f){const m=ya(h);if(!m)throw new Error("header name must be a non-empty string");const g=q.findKey(s,m);(!g||s[g]===void 0||f===!0||f===void 0&&s[g]!==!1)&&(s[g||h]=Nc(d))}const c=(d,h)=>q.forEach(d,(f,m)=>o(f,m,h));if(q.isPlainObject(e)||e instanceof this.constructor)c(e,n);else if(q.isString(e)&&(e=e.trim())&&!YN(e))c(ZN(e),n);else if(q.isObject(e)&&q.isIterable(e)){let d={},h,f;for(const m of e){if(!q.isArray(m))throw TypeError("Object iterator must return a key-value pair");d[f=m[0]]=(h=d[f])?q.isArray(h)?[...h,m[1]]:[h,m[1]]:m[1]}c(d,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=ya(e),e){const r=q.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return KN(s);if(q.isFunction(n))return n.call(this,s,r);if(q.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ya(e),e){const r=q.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||ch(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function o(c){if(c=ya(c),c){const d=q.findKey(r,c);d&&(!n||ch(r,r[d],d,n))&&(delete r[d],s=!0)}}return q.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!e||ch(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,r={};return q.forEach(this,(s,o)=>{const c=q.findKey(r,o);if(c){n[c]=Nc(s),delete n[o];return}const d=e?JN(o):String(o).trim();d!==o&&delete n[o],n[d]=Nc(s),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return q.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&q.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[d0]=this[d0]={accessors:{}}).accessors,s=this.prototype;function o(c){const d=ya(c);r[d]||(QN(s,c),r[d]=!0)}return q.isArray(e)?e.forEach(o):o(e),this}};yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(yn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});q.freezeMethods(yn);function uh(t,e){const n=this||Cl,r=e||n,s=yn.from(r.headers);let o=r.data;return q.forEach(t,function(d){o=d.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function xx(t){return!!(t&&t.__CANCEL__)}function Vo(t,e,n){Te.call(this,t??"canceled",Te.ERR_CANCELED,e,n),this.name="CanceledError"}q.inherits(Vo,Te,{__CANCEL__:!0});function wx(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Te("Request failed with status code "+n.status,[Te.ERR_BAD_REQUEST,Te.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function XN(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function e3(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,o=0,c;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),m=r[o];c||(c=f),n[s]=h,r[s]=f;let g=o,x=0;for(;g!==s;)x+=n[g++],g=g%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),f-c<e)return;const P=m&&f-m;return P?Math.round(x*1e3/P):void 0}}function t3(t,e){let n=0,r=1e3/e,s,o;const c=(f,m=Date.now())=>{n=m,s=null,o&&(clearTimeout(o),o=null),t(...f)};return[(...f)=>{const m=Date.now(),g=m-n;g>=r?c(f,m):(s=f,o||(o=setTimeout(()=>{o=null,c(s)},r-g)))},()=>s&&c(s)]}const fu=(t,e,n=3)=>{let r=0;const s=e3(50,250);return t3(o=>{const c=o.loaded,d=o.lengthComputable?o.total:void 0,h=c-r,f=s(h),m=c<=d;r=c;const g={loaded:c,total:d,progress:d?c/d:void 0,bytes:h,rate:f||void 0,estimated:f&&d&&m?(d-c)/f:void 0,event:o,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(g)},n)},h0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},f0=t=>(...e)=>q.asap(()=>t(...e)),n3=Gt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Gt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,r3=Gt.hasStandardBrowserEnv?{write(t,e,n,r,s,o){const c=[t+"="+encodeURIComponent(e)];q.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),q.isString(r)&&c.push("path="+r),q.isString(s)&&c.push("domain="+s),o===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function i3(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function s3(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function bx(t,e,n){let r=!i3(e);return t&&(r||n==!1)?s3(t,e):e}const p0=t=>t instanceof yn?{...t}:t;function xs(t,e){e=e||{};const n={};function r(f,m,g,x){return q.isPlainObject(f)&&q.isPlainObject(m)?q.merge.call({caseless:x},f,m):q.isPlainObject(m)?q.merge({},m):q.isArray(m)?m.slice():m}function s(f,m,g,x){if(q.isUndefined(m)){if(!q.isUndefined(f))return r(void 0,f,g,x)}else return r(f,m,g,x)}function o(f,m){if(!q.isUndefined(m))return r(void 0,m)}function c(f,m){if(q.isUndefined(m)){if(!q.isUndefined(f))return r(void 0,f)}else return r(void 0,m)}function d(f,m,g){if(g in e)return r(f,m);if(g in t)return r(void 0,f)}const h={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(f,m,g)=>s(p0(f),p0(m),g,!0)};return q.forEach(Object.keys({...t,...e}),function(m){const g=h[m]||s,x=g(t[m],e[m],m);q.isUndefined(x)&&g!==d||(n[m]=x)}),n}const jx=t=>{const e=xs({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:c,auth:d}=e;if(e.headers=c=yn.from(c),e.url=vx(bx(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),q.isFormData(n)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(q.isFunction(n.getHeaders)){const h=n.getHeaders(),f=["content-type","content-length"];Object.entries(h).forEach(([m,g])=>{f.includes(m.toLowerCase())&&c.set(m,g)})}}if(Gt.hasStandardBrowserEnv&&(r&&q.isFunction(r)&&(r=r(e)),r||r!==!1&&n3(e.url))){const h=s&&o&&r3.read(o);h&&c.set(s,h)}return e},o3=typeof XMLHttpRequest<"u",a3=o3&&function(t){return new Promise(function(n,r){const s=jx(t);let o=s.data;const c=yn.from(s.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:f}=s,m,g,x,P,b;function _(){P&&P(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let S=new XMLHttpRequest;S.open(s.method.toUpperCase(),s.url,!0),S.timeout=s.timeout;function y(){if(!S)return;const k=yn.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),D={data:!d||d==="text"||d==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:k,config:t,request:S};wx(function($){n($),_()},function($){r($),_()},D),S=null}"onloadend"in S?S.onloadend=y:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(y)},S.onabort=function(){S&&(r(new Te("Request aborted",Te.ECONNABORTED,t,S)),S=null)},S.onerror=function(O){const D=O&&O.message?O.message:"Network Error",T=new Te(D,Te.ERR_NETWORK,t,S);T.event=O||null,r(T),S=null},S.ontimeout=function(){let O=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const D=s.transitional||yx;s.timeoutErrorMessage&&(O=s.timeoutErrorMessage),r(new Te(O,D.clarifyTimeoutError?Te.ETIMEDOUT:Te.ECONNABORTED,t,S)),S=null},o===void 0&&c.setContentType(null),"setRequestHeader"in S&&q.forEach(c.toJSON(),function(O,D){S.setRequestHeader(D,O)}),q.isUndefined(s.withCredentials)||(S.withCredentials=!!s.withCredentials),d&&d!=="json"&&(S.responseType=s.responseType),f&&([x,b]=fu(f,!0),S.addEventListener("progress",x)),h&&S.upload&&([g,P]=fu(h),S.upload.addEventListener("progress",g),S.upload.addEventListener("loadend",P)),(s.cancelToken||s.signal)&&(m=k=>{S&&(r(!k||k.type?new Vo(null,t,S):k),S.abort(),S=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const j=XN(s.url);if(j&&Gt.protocols.indexOf(j)===-1){r(new Te("Unsupported protocol "+j+":",Te.ERR_BAD_REQUEST,t));return}S.send(o||null)})},l3=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const o=function(f){if(!s){s=!0,d();const m=f instanceof Error?f:this.reason;r.abort(m instanceof Te?m:new Vo(m instanceof Error?m.message:m))}};let c=e&&setTimeout(()=>{c=null,o(new Te(`timeout ${e} of ms exceeded`,Te.ETIMEDOUT))},e);const d=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),t=null)};t.forEach(f=>f.addEventListener("abort",o));const{signal:h}=r;return h.unsubscribe=()=>q.asap(d),h}},c3=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},u3=async function*(t,e){for await(const n of d3(t))yield*c3(n,e)},d3=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},m0=(t,e,n,r)=>{const s=u3(t,e);let o=0,c,d=h=>{c||(c=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:f,value:m}=await s.next();if(f){d(),h.close();return}let g=m.byteLength;if(n){let x=o+=g;n(x)}h.enqueue(new Uint8Array(m))}catch(f){throw d(f),f}},cancel(h){return d(h),s.return()}},{highWaterMark:2})},g0=64*1024,{isFunction:gc}=q,h3=(({Request:t,Response:e})=>({Request:t,Response:e}))(q.global),{ReadableStream:v0,TextEncoder:y0}=q.global,_0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},f3=t=>{t=q.merge.call({skipUndefined:!0},h3,t);const{fetch:e,Request:n,Response:r}=t,s=e?gc(e):typeof fetch=="function",o=gc(n),c=gc(r);if(!s)return!1;const d=s&&gc(v0),h=s&&(typeof y0=="function"?(b=>_=>b.encode(_))(new y0):async b=>new Uint8Array(await new n(b).arrayBuffer())),f=o&&d&&_0(()=>{let b=!1;const _=new n(Gt.origin,{body:new v0,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!_}),m=c&&d&&_0(()=>q.isReadableStream(new r("").body)),g={stream:m&&(b=>b.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!g[b]&&(g[b]=(_,S)=>{let y=_&&_[b];if(y)return y.call(_);throw new Te(`Response type '${b}' is not supported`,Te.ERR_NOT_SUPPORT,S)})});const x=async b=>{if(b==null)return 0;if(q.isBlob(b))return b.size;if(q.isSpecCompliantForm(b))return(await new n(Gt.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(q.isArrayBufferView(b)||q.isArrayBuffer(b))return b.byteLength;if(q.isURLSearchParams(b)&&(b=b+""),q.isString(b))return(await h(b)).byteLength},P=async(b,_)=>{const S=q.toFiniteNumber(b.getContentLength());return S??x(_)};return async b=>{let{url:_,method:S,data:y,signal:j,cancelToken:k,timeout:O,onDownloadProgress:D,onUploadProgress:T,responseType:$,headers:N,withCredentials:I="same-origin",fetchOptions:R}=jx(b),A=e||fetch;$=$?($+"").toLowerCase():"text";let G=l3([j,k&&k.toAbortSignal()],O),F=null;const K=G&&G.unsubscribe&&(()=>{G.unsubscribe()});let H;try{if(T&&f&&S!=="get"&&S!=="head"&&(H=await P(N,y))!==0){let ne=new n(_,{method:"POST",body:y,duplex:"half"}),oe;if(q.isFormData(y)&&(oe=ne.headers.get("content-type"))&&N.setContentType(oe),ne.body){const[ge,de]=h0(H,fu(f0(T)));y=m0(ne.body,g0,ge,de)}}q.isString(I)||(I=I?"include":"omit");const Z=o&&"credentials"in n.prototype,Y={...R,signal:G,method:S.toUpperCase(),headers:N.normalize().toJSON(),body:y,duplex:"half",credentials:Z?I:void 0};F=o&&new n(_,Y);let z=await(o?A(F,R):A(_,Y));const X=m&&($==="stream"||$==="response");if(m&&(D||X&&K)){const ne={};["status","statusText","headers"].forEach(ve=>{ne[ve]=z[ve]});const oe=q.toFiniteNumber(z.headers.get("content-length")),[ge,de]=D&&h0(oe,fu(f0(D),!0))||[];z=new r(m0(z.body,g0,ge,()=>{de&&de(),K&&K()}),ne)}$=$||"text";let W=await g[q.findKey(g,$)||"text"](z,b);return!X&&K&&K(),await new Promise((ne,oe)=>{wx(ne,oe,{data:W,headers:yn.from(z.headers),status:z.status,statusText:z.statusText,config:b,request:F})})}catch(Z){throw K&&K(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new Te("Network Error",Te.ERR_NETWORK,b,F),{cause:Z.cause||Z}):Te.from(Z,Z&&Z.code,b,F)}}},p3=new Map,kx=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:s}=e,o=[r,s,n];let c=o.length,d=c,h,f,m=p3;for(;d--;)h=o[d],f=m.get(h),f===void 0&&m.set(h,f=d?new Map:f3(e)),m=f;return f};kx();const Bf={http:ON,xhr:a3,fetch:{get:kx}};q.forEach(Bf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const x0=t=>`- ${t}`,m3=t=>q.isFunction(t)||t===null||t===!1,Sx={getAdapter:(t,e)=>{t=q.isArray(t)?t:[t];const{length:n}=t;let r,s;const o={};for(let c=0;c<n;c++){r=t[c];let d;if(s=r,!m3(r)&&(s=Bf[(d=String(r)).toLowerCase()],s===void 0))throw new Te(`Unknown adapter '${d}'`);if(s&&(q.isFunction(s)||(s=s.get(e))))break;o[d||"#"+c]=s}if(!s){const c=Object.entries(o).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let d=n?c.length>1?`since :
`+c.map(x0).join(`
`):" "+x0(c[0]):"as no adapter specified";throw new Te("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return s},adapters:Bf};function dh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Vo(null,t)}function w0(t){return dh(t),t.headers=yn.from(t.headers),t.data=uh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Sx.getAdapter(t.adapter||Cl.adapter,t)(t).then(function(r){return dh(t),r.data=uh.call(t,t.transformResponse,r),r.headers=yn.from(r.headers),r},function(r){return xx(r)||(dh(t),r&&r.response&&(r.response.data=uh.call(t,t.transformResponse,r.response),r.response.headers=yn.from(r.response.headers))),Promise.reject(r)})}const Cx="1.12.2",Wu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Wu[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const b0={};Wu.transitional=function(e,n,r){function s(o,c){return"[Axios v"+Cx+"] Transitional option '"+o+"'"+c+(r?". "+r:"")}return(o,c,d)=>{if(e===!1)throw new Te(s(c," has been removed"+(n?" in "+n:"")),Te.ERR_DEPRECATED);return n&&!b0[c]&&(b0[c]=!0,console.warn(s(c," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,c,d):!0}};Wu.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function g3(t,e,n){if(typeof t!="object")throw new Te("options must be an object",Te.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const o=r[s],c=e[o];if(c){const d=t[o],h=d===void 0||c(d,o,t);if(h!==!0)throw new Te("option "+o+" must be "+h,Te.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Te("Unknown option "+o,Te.ERR_BAD_OPTION)}}const Rc={assertOptions:g3,validators:Wu},hr=Rc.validators;let fs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new u0,response:new u0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=xs(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Rc.assertOptions(r,{silentJSONParsing:hr.transitional(hr.boolean),forcedJSONParsing:hr.transitional(hr.boolean),clarifyTimeoutError:hr.transitional(hr.boolean)},!1),s!=null&&(q.isFunction(s)?n.paramsSerializer={serialize:s}:Rc.assertOptions(s,{encode:hr.function,serialize:hr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Rc.assertOptions(n,{baseUrl:hr.spelling("baseURL"),withXsrfToken:hr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=o&&q.merge(o.common,o[n.method]);o&&q.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),n.headers=yn.concat(c,o);const d=[];let h=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(h=h&&_.synchronous,d.unshift(_.fulfilled,_.rejected))});const f=[];this.interceptors.response.forEach(function(_){f.push(_.fulfilled,_.rejected)});let m,g=0,x;if(!h){const b=[w0.bind(this),void 0];for(b.unshift(...d),b.push(...f),x=b.length,m=Promise.resolve(n);g<x;)m=m.then(b[g++],b[g++]);return m}x=d.length;let P=n;for(;g<x;){const b=d[g++],_=d[g++];try{P=b(P)}catch(S){_.call(this,S);break}}try{m=w0.call(this,P)}catch(b){return Promise.reject(b)}for(g=0,x=f.length;g<x;)m=m.then(f[g++],f[g++]);return m}getUri(e){e=xs(this.defaults,e);const n=bx(e.baseURL,e.url,e.allowAbsoluteUrls);return vx(n,e.params,e.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(e){fs.prototype[e]=function(n,r){return this.request(xs(r||{},{method:e,url:n,data:(r||{}).data}))}});q.forEach(["post","put","patch"],function(e){function n(r){return function(o,c,d){return this.request(xs(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}fs.prototype[e]=n(),fs.prototype[e+"Form"]=n(!0)});let v3=class Px{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const c=new Promise(d=>{r.subscribe(d),o=d}).then(s);return c.cancel=function(){r.unsubscribe(o)},c},e(function(o,c,d){r.reason||(r.reason=new Vo(o,c,d),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Px(function(s){e=s}),cancel:e}}};function y3(t){return function(n){return t.apply(null,n)}}function _3(t){return q.isObject(t)&&t.isAxiosError===!0}const $f={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($f).forEach(([t,e])=>{$f[e]=t});function Ex(t){const e=new fs(t),n=sx(fs.prototype.request,e);return q.extend(n,fs.prototype,e,{allOwnKeys:!0}),q.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Ex(xs(t,s))},n}const pt=Ex(Cl);pt.Axios=fs;pt.CanceledError=Vo;pt.CancelToken=v3;pt.isCancel=xx;pt.VERSION=Cx;pt.toFormData=Uu;pt.AxiosError=Te;pt.Cancel=pt.CanceledError;pt.all=function(e){return Promise.all(e)};pt.spread=y3;pt.isAxiosError=_3;pt.mergeConfig=xs;pt.AxiosHeaders=yn;pt.formToJSON=t=>_x(q.isHTMLForm(t)?new FormData(t):t);pt.getAdapter=Sx.getAdapter;pt.HttpStatusCode=$f;pt.default=pt;const{Axios:PI,AxiosError:EI,CanceledError:TI,isCancel:LI,CancelToken:OI,VERSION:NI,all:RI,Cancel:II,isAxiosError:MI,spread:AI,toFormData:DI,AxiosHeaders:zI,HttpStatusCode:BI,formToJSON:$I,getAdapter:FI,mergeConfig:UI}=pt;var Tx={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(rn,function(){var n=1e3,r=6e4,s=36e5,o="millisecond",c="second",d="minute",h="hour",f="day",m="week",g="month",x="quarter",P="year",b="date",_="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var H=["th","st","nd","rd"],Z=K%100;return"["+K+(H[(Z-20)%10]||H[Z]||H[0])+"]"}},k=function(K,H,Z){var Y=String(K);return!Y||Y.length>=H?K:""+Array(H+1-Y.length).join(Z)+K},O={s:k,z:function(K){var H=-K.utcOffset(),Z=Math.abs(H),Y=Math.floor(Z/60),z=Z%60;return(H<=0?"+":"-")+k(Y,2,"0")+":"+k(z,2,"0")},m:function K(H,Z){if(H.date()<Z.date())return-K(Z,H);var Y=12*(Z.year()-H.year())+(Z.month()-H.month()),z=H.clone().add(Y,g),X=Z-z<0,W=H.clone().add(Y+(X?-1:1),g);return+(-(Y+(Z-z)/(X?z-W:W-z))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:g,y:P,w:m,d:f,D:b,h,m:d,s:c,ms:o,Q:x}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},D="en",T={};T[D]=j;var $="$isDayjsObject",N=function(K){return K instanceof G||!(!K||!K[$])},I=function K(H,Z,Y){var z;if(!H)return D;if(typeof H=="string"){var X=H.toLowerCase();T[X]&&(z=X),Z&&(T[X]=Z,z=X);var W=H.split("-");if(!z&&W.length>1)return K(W[0])}else{var ne=H.name;T[ne]=H,z=ne}return!Y&&z&&(D=z),z||!Y&&D},R=function(K,H){if(N(K))return K.clone();var Z=typeof H=="object"?H:{};return Z.date=K,Z.args=arguments,new G(Z)},A=O;A.l=I,A.i=N,A.w=function(K,H){return R(K,{locale:H.$L,utc:H.$u,x:H.$x,$offset:H.$offset})};var G=function(){function K(Z){this.$L=I(Z.locale,null,!0),this.parse(Z),this.$x=this.$x||Z.x||{},this[$]=!0}var H=K.prototype;return H.parse=function(Z){this.$d=function(Y){var z=Y.date,X=Y.utc;if(z===null)return new Date(NaN);if(A.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var W=z.match(S);if(W){var ne=W[2]-1||0,oe=(W[7]||"0").substring(0,3);return X?new Date(Date.UTC(W[1],ne,W[3]||1,W[4]||0,W[5]||0,W[6]||0,oe)):new Date(W[1],ne,W[3]||1,W[4]||0,W[5]||0,W[6]||0,oe)}}return new Date(z)}(Z),this.init()},H.init=function(){var Z=this.$d;this.$y=Z.getFullYear(),this.$M=Z.getMonth(),this.$D=Z.getDate(),this.$W=Z.getDay(),this.$H=Z.getHours(),this.$m=Z.getMinutes(),this.$s=Z.getSeconds(),this.$ms=Z.getMilliseconds()},H.$utils=function(){return A},H.isValid=function(){return this.$d.toString()!==_},H.isSame=function(Z,Y){var z=R(Z);return this.startOf(Y)<=z&&z<=this.endOf(Y)},H.isAfter=function(Z,Y){return R(Z)<this.startOf(Y)},H.isBefore=function(Z,Y){return this.endOf(Y)<R(Z)},H.$g=function(Z,Y,z){return A.u(Z)?this[Y]:this.set(z,Z)},H.unix=function(){return Math.floor(this.valueOf()/1e3)},H.valueOf=function(){return this.$d.getTime()},H.startOf=function(Z,Y){var z=this,X=!!A.u(Y)||Y,W=A.p(Z),ne=function(te,xe){var we=A.w(z.$u?Date.UTC(z.$y,xe,te):new Date(z.$y,xe,te),z);return X?we:we.endOf(f)},oe=function(te,xe){return A.w(z.toDate()[te].apply(z.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(xe)),z)},ge=this.$W,de=this.$M,ve=this.$D,J="set"+(this.$u?"UTC":"");switch(W){case P:return X?ne(1,0):ne(31,11);case g:return X?ne(1,de):ne(0,de+1);case m:var fe=this.$locale().weekStart||0,Se=(ge<fe?ge+7:ge)-fe;return ne(X?ve-Se:ve+(6-Se),de);case f:case b:return oe(J+"Hours",0);case h:return oe(J+"Minutes",1);case d:return oe(J+"Seconds",2);case c:return oe(J+"Milliseconds",3);default:return this.clone()}},H.endOf=function(Z){return this.startOf(Z,!1)},H.$set=function(Z,Y){var z,X=A.p(Z),W="set"+(this.$u?"UTC":""),ne=(z={},z[f]=W+"Date",z[b]=W+"Date",z[g]=W+"Month",z[P]=W+"FullYear",z[h]=W+"Hours",z[d]=W+"Minutes",z[c]=W+"Seconds",z[o]=W+"Milliseconds",z)[X],oe=X===f?this.$D+(Y-this.$W):Y;if(X===g||X===P){var ge=this.clone().set(b,1);ge.$d[ne](oe),ge.init(),this.$d=ge.set(b,Math.min(this.$D,ge.daysInMonth())).$d}else ne&&this.$d[ne](oe);return this.init(),this},H.set=function(Z,Y){return this.clone().$set(Z,Y)},H.get=function(Z){return this[A.p(Z)]()},H.add=function(Z,Y){var z,X=this;Z=Number(Z);var W=A.p(Y),ne=function(de){var ve=R(X);return A.w(ve.date(ve.date()+Math.round(de*Z)),X)};if(W===g)return this.set(g,this.$M+Z);if(W===P)return this.set(P,this.$y+Z);if(W===f)return ne(1);if(W===m)return ne(7);var oe=(z={},z[d]=r,z[h]=s,z[c]=n,z)[W]||1,ge=this.$d.getTime()+Z*oe;return A.w(ge,this)},H.subtract=function(Z,Y){return this.add(-1*Z,Y)},H.format=function(Z){var Y=this,z=this.$locale();if(!this.isValid())return z.invalidDate||_;var X=Z||"YYYY-MM-DDTHH:mm:ssZ",W=A.z(this),ne=this.$H,oe=this.$m,ge=this.$M,de=z.weekdays,ve=z.months,J=z.meridiem,fe=function(xe,we,Pe,Fe){return xe&&(xe[we]||xe(Y,X))||Pe[we].slice(0,Fe)},Se=function(xe){return A.s(ne%12||12,xe,"0")},te=J||function(xe,we,Pe){var Fe=xe<12?"AM":"PM";return Pe?Fe.toLowerCase():Fe};return X.replace(y,function(xe,we){return we||function(Pe){switch(Pe){case"YY":return String(Y.$y).slice(-2);case"YYYY":return A.s(Y.$y,4,"0");case"M":return ge+1;case"MM":return A.s(ge+1,2,"0");case"MMM":return fe(z.monthsShort,ge,ve,3);case"MMMM":return fe(ve,ge);case"D":return Y.$D;case"DD":return A.s(Y.$D,2,"0");case"d":return String(Y.$W);case"dd":return fe(z.weekdaysMin,Y.$W,de,2);case"ddd":return fe(z.weekdaysShort,Y.$W,de,3);case"dddd":return de[Y.$W];case"H":return String(ne);case"HH":return A.s(ne,2,"0");case"h":return Se(1);case"hh":return Se(2);case"a":return te(ne,oe,!0);case"A":return te(ne,oe,!1);case"m":return String(oe);case"mm":return A.s(oe,2,"0");case"s":return String(Y.$s);case"ss":return A.s(Y.$s,2,"0");case"SSS":return A.s(Y.$ms,3,"0");case"Z":return W}return null}(xe)||W.replace(":","")})},H.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},H.diff=function(Z,Y,z){var X,W=this,ne=A.p(Y),oe=R(Z),ge=(oe.utcOffset()-this.utcOffset())*r,de=this-oe,ve=function(){return A.m(W,oe)};switch(ne){case P:X=ve()/12;break;case g:X=ve();break;case x:X=ve()/3;break;case m:X=(de-ge)/6048e5;break;case f:X=(de-ge)/864e5;break;case h:X=de/s;break;case d:X=de/r;break;case c:X=de/n;break;default:X=de}return z?X:A.a(X)},H.daysInMonth=function(){return this.endOf(g).$D},H.$locale=function(){return T[this.$L]},H.locale=function(Z,Y){if(!Z)return this.$L;var z=this.clone(),X=I(Z,Y,!0);return X&&(z.$L=X),z},H.clone=function(){return A.w(this.$d,this)},H.toDate=function(){return new Date(this.valueOf())},H.toJSON=function(){return this.isValid()?this.toISOString():null},H.toISOString=function(){return this.$d.toISOString()},H.toString=function(){return this.$d.toUTCString()},K}(),F=G.prototype;return R.prototype=F,[["$ms",o],["$s",c],["$m",d],["$H",h],["$W",f],["$M",g],["$y",P],["$D",b]].forEach(function(K){F[K[1]]=function(H){return this.$g(H,K[0],K[1])}}),R.extend=function(K,H){return K.$i||(K(H,G,R),K.$i=!0),R},R.locale=I,R.isDayjs=N,R.unix=function(K){return R(1e3*K)},R.en=T[D],R.Ls=T,R.p={},R})})(Tx);var x3=Tx.exports;const w3=Hf(x3);var Lx={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(rn,function(){return function(n,r,s){n=n||{};var o=r.prototype,c={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function d(f,m,g,x){return o.fromToBase(f,m,g,x)}s.en.relativeTime=c,o.fromToBase=function(f,m,g,x,P){for(var b,_,S,y=g.$locale().relativeTime||c,j=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],k=j.length,O=0;O<k;O+=1){var D=j[O];D.d&&(b=x?s(f).diff(g,D.d,!0):g.diff(f,D.d,!0));var T=(n.rounding||Math.round)(Math.abs(b));if(S=b>0,T<=D.r||!D.r){T<=1&&O>0&&(D=j[O-1]);var $=y[D.l];P&&(T=P(""+T)),_=typeof $=="string"?$.replace("%d",T):$(T,m,D.l,S);break}}if(m)return _;var N=S?y.future:y.past;return typeof N=="function"?N(_):N.replace("%s",_)},o.to=function(f,m){return d(f,m,this,!0)},o.from=function(f,m){return d(f,m,this)};var h=function(f){return f.$u?s.utc():s()};o.toNow=function(f){return this.to(h(this),f)},o.fromNow=function(f){return this.from(h(this),f)}}})})(Lx);var b3=Lx.exports;const j3=Hf(b3);w3.extend(j3);const k3="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",hh="eldin007b/gls-scraper",j0="scraper.yml",S3=()=>{const[t,e]=C.useState(!1),[n,r]=C.useState(null),[s,o]=C.useState(!1),[c,d]=C.useState([]),[h,f]=C.useState(k3),m=h&&h.length>10;C.useEffect(()=>{const k=()=>{try{const D=localStorage.getItem("github_scraper_history");d(D?JSON.parse(D):[])}catch(D){console.error("Greka prilikom uitavanja historije:",D)}},O=async()=>{o(!0);try{const D=await x();r(D)}catch(D){console.error("Greka prilikom uitavanja GitHub workflow statusa:",D)}finally{o(!1)}};k(),O()},[]);const g=async(k,O)=>{const D={status:k,mode:O,timestamp:new Date().toLocaleString("bs-BA")};try{const T=[D,...c];d(T),localStorage.setItem("github_scraper_history",JSON.stringify(T))}catch(T){console.error("Greka prilikom uvanja historije:",T)}},x=async()=>{if(!m)return console.warn("GitHub token nije dostupan"),null;try{const k=await pt.get(`https://api.github.com/repos/${hh}/actions/runs`,{headers:{Authorization:`token ${h}`,Accept:"application/vnd.github.v3+json","User-Agent":"Evidencija-App/1.0.0"},params:{per_page:1}});if(k.data.workflow_runs&&k.data.workflow_runs.length>0){const O=k.data.workflow_runs[0];return{name:O.name,status:O.status,conclusion:O.conclusion,started_at:O.run_started_at||O.created_at,duration:O.updated_at?Math.round((new Date(O.updated_at)-new Date(O.run_started_at||O.created_at))/6e4):null,mode:O.event==="schedule"?"Automatski":"Runo",html_url:O.html_url,id:O.id}}else return null}catch(k){return console.error("Greka prilikom dohvaanja statusa workflow-a:",k),null}},P=async()=>{if(!m){alert("GitHub token nije postavljen! Molimo unesite valjan token.");return}e(!0),o(!0),r(null);try{const k=await pt.post(`https://api.github.com/repos/${hh}/actions/workflows/${j0}/dispatches`,{ref:"main"},{headers:{Authorization:`token ${h}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json","User-Agent":"Evidencija-App/1.0.0"}});if(k.status===204)await g("success","manual"),alert("Uspjeh! GitHub Actions workflow je uspjeno pokrenut!"),setTimeout(async()=>{const O=await x();r(O),o(!1)},3e3);else throw new Error(`GitHub API vratilo status: ${k.status}`)}catch(k){await g("error","manual"),alert(`Greka: Neuspjeno pokretanje GitHub Actions: ${k.message}`),o(!1)}finally{e(!1)}},b=k=>{const O=new Date,D=new Date(k),T=Math.floor((O-D)/(1e3*60));if(T<60)return`${T} minuta ago`;if(T<1440){const $=Math.floor(T/60);return`${$===1?"an":$} hour${$===1?"":"s"} ago`}else{const $=Math.floor(T/1440);return`${$} day${$===1?"":"s"} ago`}},_=P,S=()=>{if(s)return a.jsx("span",{children:" Uitavanje statusa..."});if(n){const k=n.status==="completed"?n.conclusion==="success"?"#22c55e":"#ef4444":"#f59e0b";return a.jsxs("div",{style:{marginTop:10,padding:15,background:"rgba(255, 255, 255, 0.1)",borderRadius:12,border:`2px solid ${k}`,backdropFilter:"blur(10px)"},children:[a.jsxs("div",{style:{color:k,fontWeight:"bold",fontSize:"16px",marginBottom:"8px"},children:[" ",n.name||"GitHub Workflow"]}),a.jsxs("div",{style:{display:"grid",gap:"6px",fontSize:"14px",color:"var(--text-on-dark, #f1f5f9)"},children:[a.jsxs("div",{children:[" Status: ",a.jsx("strong",{children:n.status})]}),n.conclusion&&a.jsxs("div",{children:[" Zakljuak: ",a.jsx("strong",{children:n.conclusion})]}),a.jsxs("div",{children:[" Pokrenuto: ",a.jsx("strong",{children:b(n.started_at)})]}),n.duration&&a.jsxs("div",{children:[" Trajanje: ",a.jsxs("strong",{children:[n.duration," min"]})]}),a.jsxs("div",{children:[" Tip: ",a.jsx("strong",{children:n.mode})]}),n.html_url&&a.jsx("div",{children:a.jsx("a",{href:n.html_url,target:"_blank",rel:"noopener noreferrer",style:{color:k,textDecoration:"underline"},children:" Pogledaj na GitHub-u"})})]})]})}return a.jsx(al,{icon:a.jsx("span",{children:""}),text:"Nema dostupnih informacija o statusu."})},y=()=>{localStorage.setItem("github_token",h),alert("GitHub token je sauvan! Restart aplikacije da promjene stupaju na snagu.")},j=()=>{f(""),localStorage.removeItem("github_token"),alert("GitHub token je obrisan!")};return a.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 50%, rgba(255, 255, 255, 0.04) 100%)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"16px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)",padding:"2rem",color:"var(--text-on-dark, #f1f5f9)"},children:[a.jsx("h2",{style:{fontWeight:"bold",marginBottom:20,color:"var(--text-on-dark, #f1f5f9)"},children:" GitHub Actions Control Panel"}),a.jsxs("div",{style:{background:m?"rgba(34, 197, 94, 0.15)":"rgba(255, 193, 7, 0.15)",border:m?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{color:m?"#22c55e":"#ffc107",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:m?" GitHub API Konfigurisan":" GitHub Token potreban"}),a.jsxs("div",{style:{display:"grid",gap:"8px",fontSize:"14px"},children:[a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:[" Repository: ",a.jsx("strong",{children:hh})]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:[" Workflow: ",a.jsx("strong",{children:j0})]}),a.jsxs("div",{style:{color:"var(--text-on-dark, #f1f5f9)",opacity:.9},children:[" Token: ",a.jsx("strong",{children:m?`${h.substring(0,8)}...`:"Nije postavljen"})]})]}),!m&&a.jsxs("div",{style:{marginTop:"12px"},children:[a.jsxs("p",{style:{color:"var(--text-on-dark, #f1f5f9)",marginBottom:"12px",fontSize:"14px"},children:["Za pokretanje GitHub Actions potreban je Personal Access Token s dozvolama: ",a.jsx("code",{children:"repo"}),", ",a.jsx("code",{children:"workflow"})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"password",value:h,onChange:k=>f(k.target.value),placeholder:"Unesite GitHub Personal Access Token",style:{flex:1,padding:"8px 12px",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark, #f1f5f9)",backdropFilter:"blur(5px)"}}),a.jsx(bn,{onClick:y,bgColor:"#ffc107",children:" Sauvaj"})]})]}),m&&a.jsx("div",{style:{marginTop:"12px",display:"flex",gap:"8px"},children:a.jsx(bn,{onClick:j,bgColor:"#dc3545",children:" Obrii Token"})})]}),a.jsx(bn,{loading:t||s,onClick:_,style:{marginBottom:20},bgColor:m?"#238636":"#6c757d",disabled:!m,children:t?" Pokretanje...":m?" Pokreni Scraper Workflow":" Token potreban"}),S(),a.jsx("h3",{style:{fontWeight:"bold",marginTop:30,marginBottom:15,color:"var(--text-on-dark, #f1f5f9)"},children:" Historija Pokretanja"}),a.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:c.length===0?a.jsx(al,{icon:a.jsx("span",{children:""}),text:"Nema historije pokretanja"}):c.map((k,O)=>a.jsx("div",{style:{padding:12,marginBottom:8,background:k.status==="success"?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",border:k.status==="success"?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(239, 68, 68, 0.3)",borderRadius:8,backdropFilter:"blur(5px)"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"bold",color:"var(--text-on-dark, #f1f5f9)"},children:[k.status==="success"?"":""," ",k.status==="success"?"Uspjeno":"Greka"]}),a.jsxs("div",{style:{fontSize:"12px",opacity:.8,color:"var(--text-on-dark, #f1f5f9)"},children:[" Tip: ",k.mode==="manual"?"Runo pokretanje":"Automatsko pokretanje"]})]}),a.jsxs("div",{style:{fontSize:"12px",opacity:.7,color:"var(--text-on-dark, #f1f5f9)"},children:[" ",k.timestamp]})]})},O))})]})},C3=()=>{const[t,e]=C.useState({}),[n,r]=C.useState(!1),[s,o]=C.useState(""),[c,d]=C.useState({drivers:!0,deliveries:!0,extra_rides:!0,extra_rides_pending:!0,holidays:!0}),[h,f]=C.useState(!1),[m,g]=C.useState(null),[x,P]=C.useState([]),b=[{key:"drivers",name:"Vozai",icon:"",description:"Svi vozai i njihovi podaci"},{key:"deliveries",name:"Dostave",icon:"",description:"Svi podaci o dostavama"},{key:"extra_rides",name:"Extra vonje",icon:"",description:"Odobrene extra vonje"},{key:"extra_rides_pending",name:"Pending vonje",icon:"",description:"Vonje na ekanju"},{key:"holidays",name:"Praznici",icon:"",description:"Kalendar praznika"}];C.useEffect(()=>{_()},[]);const _=()=>{const N=JSON.parse(localStorage.getItem("backupHistory")||"[]");P(N.slice(-10))},S=N=>{const I=JSON.parse(localStorage.getItem("backupHistory")||"[]"),R={id:Date.now(),timestamp:new Date().toISOString(),tables:Object.keys(N),totalRecords:Object.values(N).reduce((A,G)=>A+G.length,0),...N};I.push(R),localStorage.setItem("backupHistory",JSON.stringify(I.slice(-20))),_()},y=async()=>{r(!0),o(" Kreiranje kompletnog backup-a...");try{const N={};let I=0;for(const R of b)if(c[R.key]){o(` Backup tabele: ${R.name}...`);const{data:A,error:G}=await me.from(R.key).select("*");if(G)throw G;N[R.key]=A,I+=A.length,await new Promise(F=>setTimeout(F,500))}N._metadata={created_at:new Date().toISOString(),version:"1.0",total_records:I,tables:Object.keys(N).filter(R=>R!=="_metadata")},e(N),S(N),o(` Backup kreiran! Ukupno ${I} zapisa`),j(N)}catch(N){console.error("Backup error:",N),o(` Greka: ${N.message}`)}finally{r(!1)}},j=(N=t)=>{const R=`supabase-backup-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,A=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),G=URL.createObjectURL(A),F=document.createElement("a");F.href=G,F.download=R,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(G)},k=N=>{const I=N.target.files[0];if(!I)return;const R=new FileReader;R.onload=async A=>{try{const G=JSON.parse(A.target.result);await O(G)}catch(G){o(` Neispravna backup datoteka: ${G.message}`)}},R.readAsText(I)},O=async N=>{r(!0),o(" Vraanje backup-a u bazu...");try{let I=0;for(const[R,A]of Object.entries(N)){if(R==="_metadata"||!c[R])continue;o(` Vraanje tabele: ${R} (${A.length} zapisa)...`);const G=100;for(let F=0;F<A.length;F+=G){const K=A.slice(F,F+G),{error:H}=await me.from(R).upsert(K);if(H)throw H;I+=K.length,await new Promise(Z=>setTimeout(Z,200))}}o(` Backup vraen! ${I} zapisa uspeno vraeno`)}catch(I){console.error("Restore error:",I),o(` Greka pri vraanju: ${I.message}`)}finally{r(!1)}},D=async N=>{r(!0),o(` Brisanje podataka iz tabele: ${N}...`);try{const{data:I,error:R}=await me.from(N).select("id");if(R)throw R;if(I.length===0){o(` Tabela ${N} je ve prazna`),r(!1);return}const A=100;let G=0;for(let F=0;F<I.length;F+=A){const H=I.slice(F,F+A).map(Y=>Y.id),{error:Z}=await me.from(N).delete().in("id",H);if(Z)throw Z;G+=H.length,o(` Obrisano ${G}/${I.length} zapisa iz ${N}...`),await new Promise(Y=>setTimeout(Y,200))}o(` Uspeno obrisano ${G} zapisa iz tabele ${N}`)}catch(I){console.error("Delete error:",I),o(` Greka pri brisanju: ${I.message}`)}finally{r(!1),f(!1),g(null)}},[T,$]=C.useState({});return C.useEffect(()=>{(async()=>{const I={};for(const R of b)try{const{count:A,error:G}=await me.from(R.key).select("*",{count:"exact",head:!0});G||(I[R.key]=A)}catch{I[R.key]=0}$(I)})()},[]),a.jsxs("div",{style:{padding:"1.5rem",color:"var(--text-on-dark)"},children:[a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsxs("h2",{style:{color:"#44cadf",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Lc,{size:24}),"Sistem & Backup Upravljanje"]}),a.jsx("p",{style:{opacity:.8,margin:0},children:"Kompletno backup/restore reenje za Supabase bazu podataka"})]}),s&&a.jsx("div",{style:{padding:"1rem",background:n?"rgba(255, 193, 7, 0.1)":"rgba(34, 197, 94, 0.1)",borderRadius:"8px",marginBottom:"1.5rem",border:`1px solid ${n?"rgba(255, 193, 7, 0.2)":"rgba(34, 197, 94, 0.2)"}`,fontFamily:"monospace"},children:s}),a.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[a.jsx("h3",{style:{marginBottom:"1rem",color:"#22c55e"},children:" Izbor tabela za backup/restore"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem"},children:b.map(N=>a.jsxs("div",{style:{padding:"1rem",background:c[N.key]?"rgba(68, 202, 223, 0.1)":"rgba(255, 255, 255, 0.02)",borderRadius:"8px",border:`1px solid ${c[N.key]?"rgba(68, 202, 223, 0.3)":"rgba(255, 255, 255, 0.1)"}`,cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>d(I=>({...I,[N.key]:!I[N.key]})),children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx("span",{style:{fontSize:"1.2rem"},children:N.icon}),a.jsx("strong",{children:N.name}),a.jsxs("span",{style:{marginLeft:"auto",padding:"0.2rem 0.5rem",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",fontSize:"0.8rem"},children:[T[N.key]||0," zapisa"]})]}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:N.description}),a.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",width:"16px",height:"16px",borderRadius:"50%",background:c[N.key]?"#22c55e":"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"white"},children:c[N.key]?"":""})]},N.key))})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsxs("div",{style:{background:"rgba(68, 202, 223, 0.1)",borderRadius:"12px",padding:"1.5rem",border:"1px solid rgba(68, 202, 223, 0.2)"},children:[a.jsx("h3",{style:{color:"#44cadf",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Kreiranje Backup-a"}),a.jsx("p",{style:{opacity:.8,marginBottom:"1rem",fontSize:"0.9rem"},children:"Kreiraj backup izabranih tabela i preuzmi kao JSON fajl"}),a.jsx("button",{onClick:y,disabled:n||Object.values(c).every(N=>!N),style:{width:"100%",padding:"0.75rem",background:"linear-gradient(145deg, #44cadf, #22d3ee)",color:"white",border:"none",borderRadius:"8px",cursor:n?"not-allowed":"pointer",fontWeight:"bold",opacity:n?.6:1},children:n?" Kreiram backup...":" Kreiraj i preuzmi backup"})]}),a.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",borderRadius:"12px",padding:"1.5rem",border:"1px solid rgba(34, 197, 94, 0.2)"},children:[a.jsx("h3",{style:{color:"#22c55e",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Restore Backup-a"}),a.jsx("p",{style:{opacity:.8,marginBottom:"1rem",fontSize:"0.9rem"},children:"Vrati podatke iz backup JSON fajla u bazu"}),a.jsx("input",{type:"file",accept:".json",onChange:k,disabled:n,style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",cursor:"pointer"}})]}),a.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1.5rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[a.jsx("h3",{style:{color:"#ef4444",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Brisanje Podataka"}),a.jsx("p",{style:{opacity:.8,marginBottom:"1rem",fontSize:"0.9rem"},children:"Obrii sve podatke iz izabranih tabela (OPREZ!)"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:b.map(N=>c[N.key]&&a.jsxs("button",{onClick:()=>{g(N),f(!0)},disabled:n,style:{padding:"0.5rem 1rem",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:[" ",N.name]},N.key))})]})]}),a.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[a.jsx("h3",{style:{color:"#a855f7",marginBottom:"1rem"},children:" Backup Istorija"}),x.length===0?a.jsx("p",{style:{opacity:.6,fontStyle:"italic"},children:"Nema prethodnih backup-ova"}):a.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:x.slice().reverse().map(N=>a.jsxs("div",{style:{padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:new Date(N.timestamp).toLocaleString()}),a.jsxs("div",{style:{fontSize:"0.8rem",opacity:.8},children:[N.tables.join(", "),"  ",N.totalRecords," zapisa"]})]}),a.jsx("button",{onClick:()=>j(N),style:{padding:"0.4rem 0.8rem",background:"rgba(168, 85, 247, 0.2)",color:"#a855f7",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:" Download"})]},N.id))})]}),h&&m&&a.jsx(ll,{onClose:()=>{f(!1),g(null)},children:a.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),a.jsx("h2",{style:{color:"#ef4444",marginBottom:"1rem"},children:"Potvrdi brisanje"}),a.jsxs("p",{style:{marginBottom:"1.5rem"},children:["Da li ste sigurni da elite da obriete ",a.jsx("strong",{children:"SVE PODATKE"})," iz tabele:"]}),a.jsxs("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[a.jsxs("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:[m.icon," ",m.name]}),a.jsxs("div",{style:{fontSize:"0.9rem",opacity:.8},children:[T[m.key]||0," zapisa e biti TRAJNO OBRISANO"]})]}),a.jsx("p",{style:{fontSize:"0.9rem",opacity:.8,marginBottom:"2rem"},children:"Ova akcija se NE MOE ponititi! Preporuujemo da prvo napravite backup."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>{f(!1),g(null)},style:{padding:"0.75rem 1.5rem",background:"rgba(255, 255, 255, 0.1)",color:"var(--text-on-dark)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",cursor:"pointer"},children:" Otkai"}),a.jsx("button",{onClick:()=>D(m.key),style:{padding:"0.75rem 1.5rem",background:"linear-gradient(145deg, #ef4444, #dc2626)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:" DA, OBRII SVE"})]})]})})]})};function P3(){const{drivers:t}=Wo(),[e,n]=C.useState(""),[r,s]=C.useState(new Date().getMonth()+1),[o,c]=C.useState(new Date().getFullYear()),[d,h]=C.useState(!1),[f,m]=C.useState([]),g=async()=>{if(!e)return alert("Izaberi vozaa");h(!0);const x=new Date(o,r,0).getDate(),P=[];for(let b=1;b<=x;b++){const _=`${o}-${String(r).padStart(2,"0")}-${String(b).padStart(2,"0")}`,S=new Date(_).getDay()===0||new Date(_).getDay()===6;P.push({day:b,status:S?"":"RAD",start:S?"-":"05:30",pause:S?"-":"11:3012:00",end:S?"-":"14:00",hours:S?"-":"8",ladezeit:S?"-":"3"})}m(P),h(!1)};return a.jsxs("div",{className:Je.card,children:[a.jsx("h2",{children:" Evidencija rada vozaa"}),a.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[a.jsxs("select",{value:e,onChange:x=>n(x.target.value),children:[a.jsx("option",{value:"",children:" Voza "}),t.map(x=>a.jsx("option",{value:x.id,children:x.ime},x.id))]}),a.jsx("input",{type:"number",value:r,min:"1",max:"12",onChange:x=>s(Number(x.target.value)),placeholder:"Mjesec"}),a.jsx("input",{type:"number",value:o,onChange:x=>c(Number(x.target.value)),placeholder:"Godina"}),a.jsx("button",{onClick:g,children:" Generii evidenciju"})]}),d&&a.jsx("div",{children:" Generiem..."}),!d&&f.length>0&&a.jsxs("table",{className:"modern-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Dan"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Poetak"}),a.jsx("th",{children:"Pauza"}),a.jsx("th",{children:"Kraj"}),a.jsx("th",{children:"Sati"}),a.jsx("th",{children:"Ladezeit"})]})}),a.jsx("tbody",{children:f.map(x=>a.jsxs("tr",{children:[a.jsx("td",{children:x.day}),a.jsx("td",{children:x.status}),a.jsx("td",{children:x.start}),a.jsx("td",{children:x.pause}),a.jsx("td",{children:x.end}),a.jsx("td",{children:x.hours}),a.jsx("td",{children:x.ladezeit})]},x.day))})]})]})}function E3(){const[t,e]=C.useState("dashboard"),[n,r]=C.useState({totalDeliveries:0,totalExtraRides:0,activeDrivers:0,totalDrivers:0,pendingRides:0,completedToday:0,lastWeekComparison:0}),[s,o]=C.useState(!0),{drivers:c}=Wo();return C.useEffect(()=>{const d=async()=>{var h,f;o(!0);try{const m=localStorage.getItem("monthlyPerformance"),g=m?JSON.parse(m):{},x=new Date().getMonth(),P=g[x]||{value:0},b=JSON.parse(localStorage.getItem("driverStatsCache")||"{}"),_=Object.values(b).find(O=>{var D,T,$;return($=(T=(D=O.stats)==null?void 0:D[0])==null?void 0:T.label)==null?void 0:$.includes("Danas")}),S=((f=(h=_==null?void 0:_.stats)==null?void 0:h[0])==null?void 0:f.value)||0,[y,j]=await Promise.all([me.from("extra_rides").select("id",{count:"exact"}),me.from("extra_rides_pending").select("id",{count:"exact"})]),k=c.filter(O=>O.aktivan).length;r({totalDeliveries:P.value||0,totalExtraRides:y.count||0,activeDrivers:k,totalDrivers:c.length,pendingRides:j.count||0,completedToday:S,lastWeekComparison:0})}catch(m){console.error(m)}finally{o(!1)}};c.length&&d()},[c]),a.jsxs("div",{className:Je.screenContainer,children:[a.jsx("div",{className:Je.header,children:a.jsxs("div",{className:Je.headerContent,children:[a.jsxs("div",{className:Je.titleSection,children:[a.jsx(Lc,{className:Je.titleIcon}),a.jsx("h1",{className:Je.title,children:"Admin Panel"})]}),a.jsx(Kp,{})]})}),a.jsxs("div",{className:Je.content,children:[a.jsxs("div",{className:Je.tabsContainer,children:[a.jsxs("button",{className:`${Je.tab} ${t==="dashboard"?Je.activeTab:""}`,onClick:()=>e("dashboard"),children:[a.jsx(Zp,{className:Je.tabIcon})," Dashboard"]}),a.jsxs("button",{className:`${Je.tab} ${t==="users"?Je.activeTab:""}`,onClick:()=>e("users"),children:[a.jsx(Io,{className:Je.tabIcon})," Korisnici"]}),a.jsxs("button",{className:`${Je.tab} ${t==="rides"?Je.activeTab:""}`,onClick:()=>e("rides"),children:[a.jsx(F1,{className:Je.tabIcon})," Vonje"]}),a.jsx("button",{className:`${Je.tab} ${t==="worktime"?Je.activeTab:""}`,onClick:()=>e("worktime"),children:" Evidencija rada"}),a.jsxs("button",{className:`${Je.tab} ${t==="settings"?Je.activeTab:""}`,onClick:()=>e("settings"),children:[a.jsx(Lc,{className:Je.tabIcon})," Sistem"]}),a.jsxs("button",{className:`${Je.tab} ${t==="github"?Je.activeTab:""}`,onClick:()=>e("github"),children:[a.jsx(Lc,{className:Je.tabIcon})," GitHub"]})]}),a.jsxs("div",{className:Je.tabContent,children:[t==="dashboard"&&a.jsx("div",{className:Je.dashboardContent,children:"/* OSTATAK DASHBOARDA OSTAO ISTI */"}),t==="users"&&a.jsx(VO,{}),t==="rides"&&a.jsx(HO,{}),t==="worktime"&&a.jsx(P3,{}),t==="github"&&a.jsx(S3,{}),t==="settings"&&a.jsx(C3,{})]})]})]})}const Ox=()=>a.jsxs("div",{className:"loading-spinner",children:[a.jsx("div",{className:"spinner"}),a.jsx("span",{children:"Uitavanje..."})]}),T3="_toastContainer_12kgv_1",L3="_toast_12kgv_1",O3="_visible_12kgv_24",fh={toastContainer:T3,toast:L3,visible:O3},Nx=({message:t,isOpen:e,duration:n=2500,onClose:r})=>(C.useEffect(()=>{if(!e)return;const s=setTimeout(()=>{r&&r()},n);return()=>clearTimeout(s)},[e,n,r]),a.jsx("div",{className:fh.toastContainer,"aria-live":"polite","aria-atomic":"true",children:a.jsx("div",{className:`${fh.toast} ${e?fh.visible:""}`,role:"status",children:t})}));function N3({pdfUrl:t,fileName:e,onClose:n,isVisible:r}){const[s,o]=C.useState(!0),[c,d]=C.useState(null),[h,f]=C.useState(null),[m,g]=C.useState(!1);C.useEffect(()=>{r&&t&&x()},[t,r]);const x=async()=>{try{if(o(!0),d(null),t.startsWith("blob:")){f(t),o(!1);return}let _=t;if(t.includes("drive.google.com"))if(t.includes("/preview"))_=t;else{const S=t.match(/id=([a-zA-Z0-9-_]+)/);S&&(_=`https://drive.google.com/file/d/${S[1]}/preview`)}else(t.startsWith("/")||t.startsWith("http"))&&(_=t);f(_),o(!1)}catch(_){console.error("Greka pri uitavanju PDF-a:",_),d("Greka pri uitavanju PDF fajla"),o(!1)}},P=async()=>{if(t&&!m)try{if(g(!0),t.includes("drive.google.com")){let S=null;if(t.includes("/preview")){const y=t.match(/\/file\/d\/([a-zA-Z0-9-_]+)\/preview/);y&&(S=y[1])}else{const y=t.match(/id=([a-zA-Z0-9-_]+)/);y&&(S=y[1])}if(S){const y=""}}const _=document.createElement("a");_.href=t,_.download=e||"dokument.pdf",_.target="_blank",document.body.appendChild(_),_.click(),document.body.removeChild(_),g(!1)}catch(_){console.error("Download error:",_),g(!1),window.open(t,"_blank")}},b=()=>{if(t){let _=t;if(t.includes("drive.google.com")){const S=t.match(/id=([a-zA-Z0-9-_]+)/);S&&(_=`https://drive.google.com/file/d/${S[1]}/view`)}window.open(_,"_blank")}};return r?a.jsx("div",{className:"pdf-viewer-overlay",children:a.jsxs("div",{className:"pdf-viewer-modal",children:[a.jsxs("div",{className:"pdf-viewer-header",children:[a.jsxs("div",{className:"pdf-file-info",children:[a.jsx("div",{className:"pdf-icon",children:""}),a.jsxs("div",{className:"pdf-title",children:[a.jsx("h3",{children:e||"PDF Dokument"}),a.jsx("p",{children:"PDF Viewer"})]})]}),a.jsxs("div",{className:"pdf-actions",children:[a.jsx("button",{className:"pdf-action-btn open-btn",onClick:b,title:"Otvori u novom tabu",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15,3 21,3 21,9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}),a.jsx("button",{className:`pdf-action-btn download-btn ${m?"downloading":""}`,onClick:P,disabled:m,title:"Preuzmi PDF",children:m?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"spinner-small"}),"Preuzimam..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7,10 12,15 17,10"}),a.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Preuzmi"]})}),a.jsx("button",{className:"pdf-action-btn close-btn",onClick:n,title:"Zatvori",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),a.jsxs("div",{className:"pdf-viewer-content",children:[s&&a.jsxs("div",{className:"pdf-loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Uitavam PDF..."})]}),c&&a.jsxs("div",{className:"pdf-error",children:[a.jsx("div",{className:"error-icon",children:""}),a.jsx("h3",{children:"Greka pri uitavanju"}),a.jsx("p",{children:c}),a.jsx("button",{className:"retry-btn",onClick:x,children:"Pokuaj ponovo"})]}),!s&&!c&&h&&a.jsx("div",{className:"pdf-container",children:a.jsx("iframe",{src:h,className:"pdf-iframe",title:e||"PDF Dokument",frameBorder:"0",onLoad:_=>{o(!1)},onError:_=>{if(t.includes("drive.google.com")&&!h.includes("/preview")){const S=t.match(/id=([a-zA-Z0-9-_]+)/);if(S){const j=`https://drive.google.com/uc?export=view&id=${S[1]}`;f(j);return}}d("PDF se nije mogao uitati. Molimo koristite Download dugme."),o(!1)},style:{display:"block"}})})]})]})}):null}function R3({user:t}){const e=ks(),[n,r]=C.useState([]),[s,o]=C.useState(!0),[c,d]=C.useState(null),[h,f]=C.useState({open:!1,message:"",type:"info"}),[m,g]=C.useState(null),[x,P]=C.useState({isOpen:!1,url:null,fileName:null});C.useEffect(()=>{if(!t){e("/");return}if(t.role==="admin"){g("Admini nemaju pristup platnim listama"),o(!1);return}b(t.username)},[t,e]);const b=async y=>{try{o(!0);const{data:j,error:k}=await me.from("payrolls").select("*").eq("driver_name",y.toLowerCase());if(k)throw k;const D=(j||[]).sort((T,$)=>new Date($.created_at)-new Date(T.created_at)).map(T=>({id:T.id,month:T.file_name.replace(".pdf","").replace(".PDF","").replace("_","/"),fileName:T.file_name,fileId:T.id,uploadDate:T.created_at,size:"PDF"}));r(D)}catch(j){console.error("Greka pri uitavanju:",j),g("Sistem nije mogao uitati vae platne liste.")}finally{o(!1)}},_=async y=>{try{d(y.id);const j=`${t.username.toLowerCase()}/${y.fileName}`,{data:k,error:O}=await me.storage.from("payroll-lists").download(j);if(O)throw O;const D=URL.createObjectURL(k),T=document.createElement("a");T.href=D,T.download=y.fileName,document.body.appendChild(T),T.click(),document.body.removeChild(T),f({open:!0,type:"success",message:"Platna lista preuzeta!"})}catch{f({open:!0,type:"error",message:"Greka pri preuzimanju fajla."})}finally{d(null)}},S=async y=>{try{const j=`${t.username.toLowerCase()}/${y.fileName}`,{data:k,error:O}=await me.storage.from("payroll-lists").createSignedUrl(j,60);if(O)throw O;P({isOpen:!0,url:k.signedUrl,fileName:y.fileName})}catch{f({open:!0,type:"error",message:"Nije mogue otvoriti PDF."})}};return s?a.jsx("div",{className:"payroll-screen",children:a.jsxs("div",{className:"payroll-loading",children:[a.jsx(Ox,{}),a.jsx("p",{children:"Uitavam platne liste..."})]})}):m?a.jsx("div",{className:"payroll-screen",children:a.jsxs("div",{className:"payroll-error",children:[a.jsx("h2",{children:"Greka"}),a.jsx("p",{children:m})]})}):a.jsxs("div",{className:"payroll-screen",children:[a.jsxs("div",{className:"payroll-header",children:[a.jsx("button",{className:"back-button",onClick:()=>e("/"),children:"Nazad"}),a.jsxs("div",{className:"header-info",children:[a.jsx("h1",{children:" Moje Platne Liste"}),a.jsxs("p",{children:["Korisnik: ",a.jsx("strong",{children:t==null?void 0:t.name})]})]})]}),a.jsx("div",{className:"payroll-content",children:n.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h3",{children:"Nema dostupnih platnih lista"}),a.jsx("p",{children:"Provjerite ponovo kasnije ili kontaktirajte admina."})]}):a.jsx("div",{className:"payroll-grid",children:n.map(y=>a.jsxs("div",{className:"payroll-card",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("div",{className:"month-badge",children:y.month}),a.jsx("div",{className:"file-size",children:y.size})]}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"file-icon",children:""}),a.jsxs("div",{className:"file-info",children:[a.jsx("h3",{children:y.fileName}),a.jsxs("p",{children:["Objavljeno: ",new Date(y.uploadDate).toLocaleDateString("bs-BA")]})]})]}),a.jsxs("div",{className:"card-actions",children:[a.jsx("button",{className:"view-button",onClick:()=>S(y),children:"Prikai"}),a.jsx("button",{className:`download-button ${c===y.id?"downloading":""}`,onClick:()=>_(y),disabled:c===y.id,children:c===y.id?"...":"Preuzmi"})]})]},y.id))})}),h.open&&a.jsx(Nx,{isOpen:h.open,message:h.message,type:h.type,onClose:()=>f({...h,open:!1})}),a.jsx(N3,{pdfUrl:x.url,fileName:x.fileName,isVisible:x.isOpen,onClose:()=>P({isOpen:!1,url:null,fileName:null})})]})}w;const I3=[{version:"4.0.0",date:"06.10.2025",details:"Kompletna modernizacija UI dizajna sa glassmorphism efektima, optimizacija performansi, dinamike statistike iz baze podataka"},{version:"3.5.0",date:"05.10.2025",details:"Dodana MapCard moderna sa poboljanim blur efektima, novi Sidebar dizajn, optimizacija mobile responsivnosti"},{version:"3.4.0",date:"04.10.2025",details:"Poboljanja u DeliveryScreen - centriran naslov, validacija input polja, ograniavanje numerikih vrednosti"},{version:"3.3.0",date:"03.10.2025",details:"ExtraRidesScreen refaktorisanje - optimizovane boje za bolju preglednost, uklanjanje emoji ikona iz input polja"},{version:"3.2.0",date:"02.10.2025",details:"Dodana validacija za PLZ i broj adresa, poboljana UX sa placeholder tekstovima umesto alert poruka"},{version:"3.1.0",date:"01.10.2025",details:"Pojaano upozorenje za reklamacije, poboljanja u input validaciji, optimizacija korisnikog interfejsa"},{version:"3.0.0",date:"30.09.2025",details:"Nova arhitektura aplikacije, PWA optimizacije, poboljana sinhronizacija sa cloud bazom podataka"}],M3=()=>{ks();const[t,e]=C.useState("4.0.0"),[n,r]=C.useState({users:0,years:0,deliveries:0});C.useEffect(()=>{(async()=>{try{const h=await(await fetch("/latest.json")).json();e(h.version||"4.0.0")}catch{e("4.0.0")}})(),(async()=>{try{const h=(await mP()).length,f=await pP();(()=>{const g={users:h,years:7,deliveries:f},x=2500,P=120;let b=0;const _=setInterval(()=>{b++;const S=b/P;r({users:Math.min(g.users,Math.round(g.users*S)),years:Math.min(g.years,Math.round(g.years*S)),deliveries:Math.min(g.deliveries,Math.round(g.deliveries*S))}),b>=P&&clearInterval(_)},x/P)})()}catch(d){console.error("Greka pri dohvatanju statistika:",d),(()=>{const f={users:4,years:7,deliveries:1247},m=2500,g=120;let x=0;const P=setInterval(()=>{x++;const b=x/g;r({users:Math.min(f.users,Math.round(f.users*b)),years:Math.min(f.years,Math.round(f.years*b)),deliveries:Math.min(f.deliveries,Math.round(f.deliveries*b))}),x>=g&&clearInterval(P)},m/g)})()}})()},[]);const s=(o,c)=>{o==="email"?window.location.href=`mailto:${c}`:o==="phone"&&(window.location.href=`tel:${c}`)};return a.jsx("div",{className:"aboutScreenModern",children:a.jsxs("div",{className:"aboutContainerModern",children:[a.jsxs("div",{className:"aboutHeaderModern",children:[a.jsx("div",{className:"aboutLogoModern",children:a.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:[a.jsx("path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"}),a.jsx("path",{d:"M15 18H9"}),a.jsx("path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"}),a.jsx("circle",{cx:"17",cy:"18",r:"2"}),a.jsx("circle",{cx:"7",cy:"18",r:"2"})]})}),a.jsx("h1",{className:"aboutTitleModern",children:"O Aplikaciji"}),a.jsx("p",{className:"aboutSubtitleModern",children:"B&D Evidencija - PWA verzija"})]}),a.jsxs("div",{className:"aboutGridModern",children:[a.jsx("div",{className:"glassCardModern fullWidthCard",children:a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf",marginBottom:"15px"},children:[a.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),a.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),a.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),a.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]}),a.jsxs("h3",{style:{margin:"10px 0",color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.5rem"},children:["Verzija ",t]}),a.jsx("p",{style:{color:"var(--text-on-dark, #f1f5f9)",margin:0,opacity:.9,fontSize:"1.1rem"},children:"Moderna glassmorphism PWA"})]})}),a.jsx("div",{className:"glassCardModern",children:a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf",marginBottom:"15px"},children:[a.jsx("path",{d:"M3 21h18"}),a.jsx("path",{d:"M5 21V7l8-4v18"}),a.jsx("path",{d:"M19 21V11l-6-4"}),a.jsx("path",{d:"M9 9v.01"}),a.jsx("path",{d:"M9 12v.01"}),a.jsx("path",{d:"M9 15v.01"}),a.jsx("path",{d:"M9 18v.01"})]}),a.jsx("h3",{style:{margin:"10px 0",color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.3rem"},children:"B&D Kleintransporte KG"}),a.jsx("p",{style:{color:"var(--text-on-dark, #f1f5f9)",margin:0,opacity:.9},children:"Profesionalne transportne usluge"})]})}),a.jsxs("div",{className:"glassCardModern",children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf",marginBottom:"15px"},children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("h3",{style:{margin:"10px 0",color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.3rem"},children:"Eldin Begi"}),a.jsx("p",{style:{color:"var(--text-on-dark, #f1f5f9)",margin:0,opacity:.9},children:"Developer & Support"})]}),a.jsxs("div",{className:"contactButtonsModern",children:[a.jsxs("button",{className:"contactButtonModern",onClick:()=>s("email","begic.prodaja@gmail.com"),children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:[a.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),a.jsx("polyline",{points:"22,6 12,13 2,6"})]}),a.jsx("span",{children:"Email"})]}),a.jsxs("button",{className:"contactButtonModern",onClick:()=>s("phone","06645875413"),children:[a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:a.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),a.jsx("span",{children:"Pozovi"})]})]})]})]}),a.jsxs("div",{className:"glassCardModern fullWidthCard",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"25px"},children:[a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:[a.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),a.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),a.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"16"})]}),a.jsx("h3",{style:{textAlign:"center",margin:0,color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.5rem"},children:"Statistike"})]}),a.jsxs("div",{className:"statsGridModern",children:[a.jsxs("div",{className:"statItemModern",children:[a.jsx("span",{className:"statNumberModern",children:n.users}),a.jsx("span",{className:"statLabelModern",children:"Korisnika"})]}),a.jsxs("div",{className:"statItemModern",children:[a.jsx("span",{className:"statNumberModern",children:n.years}),a.jsx("span",{className:"statLabelModern",children:"Godina rada"})]}),a.jsxs("div",{className:"statItemModern",children:[a.jsxs("span",{className:"statNumberModern",children:[n.deliveries,"+"]}),a.jsx("span",{className:"statLabelModern",children:"Dostava"})]})]})]}),a.jsxs("div",{className:"glassCardModern fullWidthCard",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"20px"},children:[a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:a.jsx("polygon",{points:"13,2 3,14 12,14 11,22 21,10 12,10"})}),a.jsx("h3",{style:{textAlign:"center",margin:0,color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.5rem"},children:"Tehnologije"})]}),a.jsxs("div",{className:"techStackModern",children:[a.jsxs("span",{className:"techTagModern",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}),a.jsx("path",{d:"M2 12h20"})]}),"React"]}),a.jsxs("span",{className:"techTagModern",children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})}),"Supabase"]}),a.jsxs("span",{className:"techTagModern",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}),a.jsx("path",{d:"M2 12h20"})]}),"PWA"]}),a.jsxs("span",{className:"techTagModern",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),a.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),a.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),"Responsive"]}),a.jsxs("span",{className:"techTagModern",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polygon",{points:"12,2 22,8.5 22,15.5 12,22 2,15.5 2,8.5"}),a.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"15.5"}),a.jsx("polyline",{points:"22,8.5 12,15.5 2,8.5"})]}),"CSS3"]}),a.jsxs("span",{className:"techTagModern",children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polygon",{points:"13,2 3,14 12,14 11,22 21,10 12,10"})}),"Vite"]})]})]}),a.jsxs("div",{className:"glassCardModern fullWidthCard",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"25px"},children:[a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#44cadf"},children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14,2 14,8 20,8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),a.jsx("polyline",{points:"10,9 9,9 8,9"})]}),a.jsx("h3",{style:{textAlign:"center",margin:0,color:"var(--text-on-dark, #f1f5f9)",fontSize:"1.5rem"},children:"Historija Verzija"})]}),a.jsx("div",{className:"changelogListModern",children:I3.map(o=>a.jsxs("div",{className:"changelogItemModern",children:[a.jsxs("div",{className:"changelogHeaderModern",children:[a.jsxs("span",{className:"changelogVersionModern",children:[o.highlight?" ":" ",o.version]}),a.jsx("span",{className:"changelogDateModern",children:o.date})]}),a.jsx("div",{className:"changelogDetailsModern",children:o.details})]},o.version))})]}),a.jsxs("div",{className:"aboutFooterModern",children:[a.jsx("div",{className:"footerTextModern",children:" 2025 B&D Kleintransporte KG"}),a.jsx("div",{className:"footerSubtextModern",children:"Sva prava zadrana"})]})]})})},A3="_sidebarModern_1puxn_61",D3="_driverCardFade_1puxn_89",z3="_driverCardModern_1puxn_96",B3="_switching_1puxn_151",$3="_driverHeader_1puxn_156",F3="_driverAvatar_1puxn_163",U3="_loadingSpinner_1puxn_207",W3="_driverInfo_1puxn_220",H3="_driverName_1puxn_225",V3="_driverTour_1puxn_236",q3="_driverTarget_1puxn_244",G3="_targetValue_1puxn_264",Z3="_targetLabel_1puxn_269",K3="_statsSectionModern_1puxn_277",Y3="_statsGridModern_1puxn_285",J3="_statCardModern_1puxn_315",Q3="_statHeader_1puxn_342",X3="_statIcon_1puxn_351",e6="_statPeriod_1puxn_363",t6="_statContent_1puxn_371",n6="_statRow_1puxn_377",r6="_statLabelContainer_1puxn_385",i6="_statLabel_1puxn_385",s6="_statValue_1puxn_398",o6="_statGood_1puxn_409",a6="_statBad_1puxn_418",l6="_neutral_1puxn_427",c6="_warningPulse_1puxn_468",Ie={sidebarModern:A3,driverCardFade:D3,driverCardModern:z3,switching:B3,driverHeader:$3,driverAvatar:F3,loadingSpinner:U3,driverInfo:W3,driverName:H3,driverTour:V3,driverTarget:q3,targetValue:G3,targetLabel:Z3,statsSectionModern:K3,statsGridModern:Y3,statCardModern:J3,statHeader:Q3,statIcon:X3,statPeriod:e6,statContent:t6,statRow:n6,statLabelContainer:r6,statLabel:i6,statValue:s6,statGood:o6,statBad:a6,neutral:l6,warningPulse:c6};function u6({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"url(#check-green)"}),a.jsx("path",{d:"M8 12.5L11 15.5L16 9.5",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"check-green",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#10B981"}),a.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]})}function d6({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"url(#x-red)"}),a.jsx("path",{d:"M8 8L16 16M16 8L8 16",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"x-red",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#EF4444"}),a.jsx("stop",{offset:"100%",stopColor:"#B91C1C"})]})})]})}function h6({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"url(#arrow-green)"}),a.jsx("path",{d:"M12 16V8M12 8L8 12M12 8L16 12",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"arrow-green",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#10B981"}),a.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]})}function f6({size:t=24}){return a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"url(#arrow-red)"}),a.jsx("path",{d:"M12 8V16M12 16L8 12M12 16L16 12",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"arrow-red",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#EF4444"}),a.jsx("stop",{offset:"100%",stopColor:"#B91C1C"})]})})]})}const k0=({stats:t,user:e,onSwitchDriver:n,isLoading:r=!1})=>{var b,_,S;const[s,o]=C.useState(!1),c=y=>{if(y==null)return NaN;if(typeof y=="number")return y;const j=String(y).replace(/,/g,".").replace(/[^0-9.\-]/g,"").trim();if(j==="")return NaN;const k=Number(j);return isNaN(k)?NaN:k},d=y=>{const j=c(y);return isNaN(j)?Ie.neutral:j>0?Ie.statGood:j<0?Ie.statBad:Ie.neutral},h=y=>{const j=c(y);return isNaN(j)?Ie.neutral:j===0?Ie.statGood:j>0?Ie.statBad:Ie.neutral},f=y=>{const j=c(y);return isNaN(j)?null:j>0?a.jsx(h6,{size:18}):j<0?a.jsx(f6,{size:18}):null},m=y=>{const j=c(y);return isNaN(j)?null:j===0?a.jsx(u6,{size:18}):j>0?a.jsx(d6,{size:18}):null},g=()=>{s||!n||(o(!0),n(),setTimeout(()=>o(!1),500))},x=Array.isArray(t)&&t.length===6?t:[{label:"Danas",value:"--",trend:"neutral"},{label:"Reklamacije",value:"--",trend:"neutral"},{label:"Ovaj mjesec",value:"--",trend:"neutral"},{label:"Reklamacije",value:"--",trend:"neutral"},{label:"Ova godina",value:"--",trend:"neutral"},{label:"Reklamacije",value:"--",trend:"neutral"}],P=[{title:"Danas",period:((b=x[0])==null?void 0:b.label)||"Danas",delivery:x[0],complaints:x[1],icon:a.jsx(vE,{size:20})},{title:"Ovaj mjesec",period:((_=x[2])==null?void 0:_.label)||"Ovaj mjesec",delivery:x[2],complaints:x[3],icon:a.jsx(yE,{size:20})},{title:"Ova godina",period:((S=x[4])==null?void 0:S.label)||"Ova godina",delivery:x[4],complaints:x[5],icon:a.jsx(_E,{size:20})}];return a.jsxs("aside",{className:Ie.sidebarModern,children:[a.jsx("div",{className:`${Ie.driverCardModern} ${s?Ie.switching+" "+Ie.driverCardFade:""}`,onClick:g,role:"button",tabIndex:0,"aria-label":`Promijeni vozaa. Trenutno: ${(e==null?void 0:e.ime)||"N/A"}`,children:a.jsxs("div",{className:Ie.driverHeader,children:[a.jsxs("div",{className:Ie.driverAvatar,children:[a.jsx(F1,{size:32}),s&&a.jsx("div",{className:Ie.loadingSpinner})]}),a.jsxs("div",{className:Ie.driverInfo,children:[a.jsx("h3",{className:Ie.driverName,children:(e==null?void 0:e.ime)||"Voza"}),a.jsxs("p",{className:Ie.driverTour,children:["Tura: ",(e==null?void 0:e.tura)||"--"]})]}),a.jsxs("div",{className:Ie.driverTarget,children:[a.jsx(xE,{size:18}),a.jsx("span",{className:Ie.targetValue,children:(e==null?void 0:e.target_per_day)||"--"}),a.jsx("span",{className:Ie.targetLabel,children:"/dan"})]})]})}),a.jsx("div",{className:Ie.statsSectionModern,children:a.jsx("div",{className:Ie.statsGridModern,children:P.map((y,j)=>{var k,O,D,T,$,N,I;return a.jsxs("div",{className:Ie.statCardModern,children:[a.jsxs("div",{className:Ie.statHeader,children:[a.jsx("span",{className:Ie.statIcon,children:y.icon}),a.jsx("span",{className:Ie.statPeriod,children:y.period})]}),a.jsxs("div",{className:Ie.statContent,children:[a.jsxs("div",{className:Ie.statRow,children:[a.jsx("div",{className:Ie.statLabelContainer,children:a.jsx("span",{className:Ie.statLabel,children:"Stopova"})}),a.jsxs("span",{className:`${Ie.statValue} ${d((k=y.delivery)==null?void 0:k.value)}`,children:[(O=y.delivery)==null?void 0:O.value," ",f((D=y.delivery)==null?void 0:D.value)]})]}),a.jsxs("div",{className:Ie.statRow,children:[a.jsx("div",{className:Ie.statLabelContainer,children:a.jsx("span",{className:Ie.statLabel,children:"Reklamacije"})}),a.jsxs("span",{className:`${Ie.statValue} ${h((T=y.complaints)==null?void 0:T.value)} ${c(($=y.complaints)==null?void 0:$.value)>0?Ie.warningPulse:""}`,children:[(N=y.complaints)==null?void 0:N.value," ",m((I=y.complaints)==null?void 0:I.value)]})]})]})]},j)})})})]})},p6="_mapCardModern_eomvl_2",m6="_addressBarIntegrated_eomvl_44",g6="_searchContainer_eomvl_101",v6="_searchInputWrapper_eomvl_112",y6="_searchIcon_eomvl_118",_6="_searchInput_eomvl_112",x6="_navigateBtn_eomvl_158",w6="_suggestionsDropdown_eomvl_197",b6="_suggestionItem_eomvl_215",j6="_suggestionAddress_eomvl_232",k6="_mapContent_eomvl_240",S6="_mapLoading_eomvl_252",C6="_mapFooter_eomvl_263",P6="_addressExpandable_eomvl_286",E6="_expanded_eomvl_293",T6="_addressInfo_eomvl_299",L6="_modernLocationIcon_eomvl_308",O6="_modernTargetIcon_eomvl_318",N6="_currentAddress_eomvl_328",R6="_selectedAddress_eomvl_328",I6="_distanceInfo_eomvl_359",M6="_distanceInfoInner_eomvl_365",A6="_distanceText_eomvl_371",D6="_routeSummary_eomvl_380",z6="_distanceSmall_eomvl_388",B6="_spinnerWrapper_eomvl_397",$6="_loadingSpinner_eomvl_402",F6="_loadingSpinnerSmall_eomvl_411",U6="_mapControlsFloating_eomvl_541",W6="_floatingControlBtn_eomvl_549",_e={mapCardModern:p6,addressBarIntegrated:m6,searchContainer:g6,searchInputWrapper:v6,searchIcon:y6,searchInput:_6,navigateBtn:x6,suggestionsDropdown:w6,suggestionItem:b6,suggestionAddress:j6,mapContent:k6,mapLoading:S6,mapFooter:C6,addressExpandable:P6,expanded:E6,addressInfo:T6,modernLocationIcon:L6,modernTargetIcon:O6,currentAddress:N6,selectedAddress:R6,distanceInfo:I6,distanceInfoInner:M6,distanceText:A6,routeSummary:D6,distanceSmall:z6,spinnerWrapper:B6,loadingSpinner:$6,loadingSpinnerSmall:F6,mapControlsFloating:U6,floatingControlBtn:W6},S0={VITE_GITHUB_REPO:"eldin007b/gls-scraper",VITE_GITHUB_TOKEN:"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",VITE_MAPQUEST_API_KEY:"",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzbHRwaXVwYmZvcHl2dWlxZmZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5Mjc3MzcsImV4cCI6MjA2NTUwMzczN30.suu_OSbTBSEkM3YMiPDFIAgDnX3bDavcD8BX4ZfYZxw",VITE_SUPABASE_URL:"https://dsltpiupbfopyvuiqffg.supabase.co",VITE_WORKFLOW_FILE:"scraper.yml"};var C0={};const gt=typeof import.meta<"u"&&S0?S0:{},_r=typeof process<"u"&&C0?C0:{},H6="https://dsltpiupbfopyvuiqffg.supabase.co",V6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzbHRwaXVwYmZvcHl2dWlxZmZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5Mjc3MzcsImV4cCI6MjA2NTUwMzczN30.suu_OSbTBSEkM3YMiPDFIAgDnX3bDavcD8BX4ZfYZxw",q6="https://dsltpiupbfopyvuiqffg.supabase.co/functions/v1",$n={SUPABASE_URL:gt.VITE_SUPABASE_URL||gt.REACT_APP_SUPABASE_URL||_r.REACT_APP_SUPABASE_URL||H6,SUPABASE_KEY:gt.VITE_SUPABASE_ANON_KEY||gt.VITE_SUPABASE_KEY||gt.REACT_APP_SUPABASE_KEY||_r.REACT_APP_SUPABASE_KEY||V6,API_BASE_URL:gt.VITE_API_BASE_URL||gt.REACT_APP_API_BASE_URL||_r.REACT_APP_API_BASE_URL||q6,GOOGLE_MAPS_API_KEY:gt.VITE_GOOGLE_MAPS_API_KEY||gt.REACT_APP_GOOGLE_MAPS_API_KEY||_r.REACT_APP_GOOGLE_MAPS_API_KEY||""};$n.MAPQUEST_API_KEY=gt.VITE_MAPQUEST_API_KEY||gt.REACT_APP_MAPQUEST_API_KEY||_r.REACT_APP_MAPQUEST_API_KEY||"HFcTXnwL6PW3Snh7rVohjnYopqvPhCL5";$n.GITHUB_TOKEN=gt.VITE_GITHUB_TOKEN||gt.REACT_APP_GITHUB_TOKEN||_r.REACT_APP_GITHUB_TOKEN||"";$n.GITHUB_REPO=gt.VITE_GITHUB_REPO||gt.REACT_APP_GITHUB_REPO||_r.REACT_APP_GITHUB_REPO||"eldin007b/gls-scraper";$n.WORKFLOW_FILE=gt.VITE_WORKFLOW_FILE||gt.REACT_APP_WORKFLOW_FILE||_r.REACT_APP_WORKFLOW_FILE||"scraper.yml";$n.ROUTE_STRATEGY=gt.VITE_ROUTE_STRATEGY||gt.REACT_APP_ROUTE_STRATEGY||_r.REACT_APP_ROUTE_STRATEGY||"";$n.VORANACHB_URL=gt.VITE_VORANACHB_URL||gt.REACT_APP_VORANACHB_URL||_r.REACT_APP_VORANACHB_URL||"";async function G6(t){var n,r,s,o;const e={id:"ibwmnqg8g2kj8iwg",ver:"1.59",lang:"deu",auth:{type:"AID",aid:"wf7mcf9bv3nv8g5f"},client:{id:"VAO",type:"WEB",name:"webapp",l:"vs_anachb",v:10010,pos:{x:14289510,y:46624050,acc:16.185}},formatted:!1,ext:"VAO.22",svcReqL:[{meth:"LocMatch",req:{input:{field:"S",loc:{type:"ALL",dist:1e3,name:t},maxLoc:7}},id:"1|43|"}]};try{const c=await fetch(`${$n.API_BASE_URL}/vor-proxy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(c.ok){const d=await c.json();return((o=(s=(r=(n=d==null?void 0:d.svcResL)==null?void 0:n[0])==null?void 0:r.res)==null?void 0:s.match)==null?void 0:o.locL)||[]}}catch(c){console.warn("VAO proxy failed, falling back to Nominatim",c)}try{const c=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(t)}&format=json&addressdetails=1&limit=8&accept-language=de`,d=await fetch(c,{headers:{"User-Agent":"bde-evidencija/1.0 (+https://eldin007b.github.io/bde-evidencija)"}});return d.ok?(await d.json()).map(f=>({name:f.display_name,nameFormatted:{text:f.display_name},crd:{x:Math.round(f.lon*1e6),y:Math.round(f.lat*1e6)}})):[]}catch(c){return console.warn("Nominatim fallback failed",c),[]}}function Rx(t){var s;if(t.info.statuscode!==0){const o={400:"Bad request",401:"Unauthorized - check API key",403:"Forbidden",500:"MapQuest server error"};throw new Error(`MapQuest API error ${t.info.statuscode}: ${o[t.info.statuscode]||((s=t.info.messages)==null?void 0:s.join(", "))||"Unknown error"}`)}const e=t.route;if(!e)throw new Error("No route data received from MapQuest");const n=Math.round(e.distance*1e3),r=Math.round(e.time);return{distanceMeters:n,distanceText:J6(n),durationSeconds:r,durationText:Q6(r),mapQuestData:{fuelUsed:e.fuelUsed,realTime:e.hasRealTime,sessionId:e.sessionId}}}async function Ix(t,e,n,r){return await Z6(t,e,n,r)}async function Z6(t,e,n,r){if(!$n.API_BASE_URL.includes("localhost"))try{return await K6(t,e,n,r)}catch{}try{return await Y6(t,e,n,r)}catch(s){throw new Error(`Both MapQuest methods failed. Proxy: ${(proxyError==null?void 0:proxyError.message)||"not available"}, Direct: ${s.message}`)}}async function K6(t,e,n,r){try{const s={locations:[{latLng:{lat:t,lng:e}},{latLng:{lat:n,lng:r}}],options:{routeType:"fastest",unit:"k",doReverseGeocode:!1,enhancesNarratives:!1,avoidTimedConditions:!1}},o=await fetch(`${$n.API_BASE_URL}/mapquest-proxy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`MapQuest proxy error: ${o.status} - ${o.statusText}`);const c=await o.json();return Rx(c)}catch(s){throw s}}async function Y6(t,e,n,r){const s=$n.MAPQUEST_API_KEY;if(!s||s==="your_mapquest_key_here")throw new Error("MapQuest API key not configured");try{const o=`https://www.mapquestapi.com/directions/v2/route?key=${encodeURIComponent(s)}`,d=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({locations:[{latLng:{lat:t,lng:e}},{latLng:{lat:n,lng:r}}],options:{routeType:"fastest",unit:"k",doReverseGeocode:!1,enhancesNarratives:!1,avoidTimedConditions:!1}})});if(!d.ok)throw new Error(`MapQuest API error: ${d.status} - ${d.statusText}`);const h=await d.json();return Rx(h)}catch(o){throw o}}function J6(t){if(t==null)return null;if(t>=1e3){const e=t/1e3;return new Intl.NumberFormat("de-DE",{maximumFractionDigits:1}).format(e)+" km"}return`${t} m`}function Q6(t){if(t==null)return null;const e=Math.round(t/60);if(e>=60){const n=Math.floor(e/60),r=e%60;return r>0?`${n}h ${r}min`:`${n}h`}return`${e} min`}function Ic(t){if(t==null)return null;if(t>=1e3){const e=t/1e3;return new Intl.NumberFormat("de-DE",{maximumFractionDigits:1}).format(e)+" km"}return`${t} m`}function Mc(t){if(t==null)return null;const e=Math.round(t/60);if(e>=60){const n=Math.floor(e/60),r=e%60;return r>0?`${n}h ${r}min`:`${n}h`}return`${e} min`}async function X6(t,e,n,r){try{const s=await Ix(t,e,n,r);return s?{...s,source:"mapquest"}:{distanceMeters:null,distanceText:null,durationSeconds:null,durationText:null,source:"none"}}catch(s){return console.warn("MapQuest routing failed:",(s==null?void 0:s.message)||s),{distanceMeters:null,distanceText:null,durationSeconds:null,durationText:null,source:"none",error:(s==null?void 0:s.message)||String(s)}}}function eR(t){return!t||typeof t!="string"?[]:t.split(";").map(e=>{const n=e.split(",").map(o=>o.trim());if(n.length<2)return null;const r=parseFloat(n[0]),s=parseFloat(n[1]);return isNaN(r)||isNaN(s)?null:{lat:r,lon:s}}).filter(Boolean)}function tR(t,e){if(!t||!e)return 0;const n=x=>x*Math.PI/180,r=6371e3,s=n(e.lat-t.lat),o=n(e.lon-t.lon),c=n(t.lat),d=n(e.lat),h=Math.sin(s/2),f=Math.sin(o/2),m=h*h+Math.cos(c)*Math.cos(d)*f*f,g=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));return r*g}function nR(t){if(!Array.isArray(t)||t.length<2)return 0;let e=0;for(let n=1;n<t.length;n++)e+=tR(t[n-1],t[n]);return Math.round(e)}function rR(t,e=80){if(!t||isNaN(t)||e<=0)return null;const n=t/1e3/e;return Math.round(n*3600)}function iR(t,e){const n=t?Ic(t):"--";return`${e?Mc(e):"--"}(${n})`}function sR(t,e=100){const n=eR(t),r=nR(n),s=rR(r,e),o=iR(r,s);return{points:n,distanceMeters:r,durationSeconds:s,compact:o}}const P0=({children:t,className:e="",style:n,title:r="Mapa dostave - Austrija",loading:s=!1,address:o="",city:c="",onNavigate:d,onSearchSelect:h,mapRef:f,onLocateMe:m,autoLocate:g=!0,selectedMarker:x=null,footerRef:P,isMobile:b=typeof window<"u"?window.innerWidth<768:!1,headerHeight:_=80,onMapClickCloseSidebar:S})=>{const y=(re,se)=>{if(!re&&!se)return"";let pe="",Le="";if(re&&(pe=re.split(",")[0].trim()),se){const Ve=String(se).match(/(\d{3,6})/);Le=Ve?Ve[0]:String(se).split(",")[0].trim()}return pe&&Le?`${pe}, ${Le}`:pe||Le},j=re=>{if(!re)return"";const se=String(re).replace(/<br\s*\/?[^>]*>/gi,",").trim();if(!se)return"";if(se.includes(",")){const pe=se.split(","),Le=pe[0].trim(),Ve=pe.slice(1).join(",").trim();return y(Le,Ve)}return se.length>40?se.slice(0,37)+"...":se},k=()=>{var re;(re=f==null?void 0:f.current)!=null&&re.zoomIn&&f.current.zoomIn()},O=()=>{var re;(re=f==null?void 0:f.current)!=null&&re.zoomOut&&f.current.zoomOut()},D=()=>{if(console.log(" Lociraj me kliknuto - traim GPS lokaciju"),!navigator.geolocation){alert("Geolokacija nije podrana u ovom pregledniku.");return}navigator.geolocation.getCurrentPosition(re=>{var pe;console.log(" GPS lokacija pronaena:",re.coords);const se=[re.coords.latitude,re.coords.longitude];Z({lat:re.coords.latitude,lon:re.coords.longitude});try{(pe=f==null?void 0:f.current)!=null&&pe.setView&&f.current.setView(se,17)}catch(Le){console.warn("Map setView not available",Le)}m&&m(se)},re=>{console.error(" GPS greka:",re),alert("Nije mogue dobiti lokaciju. Provjerite dozvole preglednika.")},{enableHighAccuracy:!0,maximumAge:5e3,timeout:15e3})},[T,$]=C.useState(""),[N,I]=C.useState([]),[R,A]=C.useState(!1),[G,F]=C.useState(!1),K=C.useRef(),[H,Z]=C.useState(null),[Y,z]=C.useState(null),[X,W]=C.useState(""),[ne,oe]=C.useState(!1),[ge,de]=C.useState(null),[ve,J]=C.useState(!0),[fe,Se]=C.useState(!1),[te,xe]=C.useState(null),we=C.useRef({ts:0,key:null}),Pe=C.useRef(null),Fe=C.useRef(null),Ct=C.useRef(!1);C.useEffect(()=>{let re=!1;if(!T.trim()){I([]),A(!1);return}return A(!0),G6(T).then(se=>{re||(I(se||[]),A(!1))}).catch(se=>{re||(console.error("Address search error:",se),I([]),A(!1))}),()=>{re=!0}},[T]),C.useEffect(()=>{$(o?c?`${o}, ${c}`:o:"")},[o,c]),C.useEffect(()=>{var re;if(x&&(typeof x.lat=="number"||typeof x.lon=="number")){const se={address:x.address||((re=x.data)==null?void 0:re.name)||o||"",city:x.city||"",lat:x.lat,lon:x.lon};if(z(se),x.polyline)try{const pe=sR(x.polyline,80);xe(pe)}catch(pe){console.warn("Polyline analysis failed",pe),xe(null)}else xe(null);if(x.hafasUrl||x.hafasHtml){const Le=`${$n.API_BASE_URL.replace(/\/$/,"")}/hafas/parse`;(async()=>{try{const Ve=x.hafasHtml?{html:x.hafasHtml}:{url:x.hafasUrl},Qe=await fetch(Le,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ve)});if(Qe.ok){const qe=await Qe.json();de({distanceMeters:qe.distanceMeters||null,durationSeconds:qe.durationSeconds||null,distanceText:qe.distanceText||null,durationText:qe.durationText||null,provider:"HAFAS"})}}catch(Ve){console.warn("HAFAS proxy error",Ve)}})()}}else o&&z(se=>({address:o||"",city:c||"",lat:se==null?void 0:se.lat,lon:se==null?void 0:se.lon}))},[x,o,c]);const Ye=re=>{var Le,Ve,Qe,qe;const se=(Le=re.crd)==null?void 0:Le.x,pe=(Ve=re.crd)==null?void 0:Ve.y;if(typeof se=="number"&&typeof pe=="number"&&((Qe=f==null?void 0:f.current)!=null&&Qe.setView)){const st=pe/1e6,Ue=se/1e6;f.current.setView([st,Ue],17);let We=((qe=re.nameFormatted)==null?void 0:qe.text)||re.name||"",Lt=We,_t="";const Ne=/<br\s*\/?.*?>/i;if(Ne.test(We)){const Wt=We.split(Ne);Lt=Wt[0].trim(),_t=Wt.slice(1).join(" ").trim()}else if(We.includes(",")){const Wt=We.split(",");Lt=Wt[0].trim(),_t=Wt.slice(1).join(",").trim()}$(Lt+(_t?`, ${_t}`:""));const nt={address:Lt,city:_t,lat:st,lon:Ue};z(nt),h&&h(nt),I([]),F(!1)}},Ut=()=>{if(d){if(Y&&typeof Y.lat=="number"&&typeof Y.lon=="number"){d({lat:Y.lat,lon:Y.lon,address:Y.address,city:Y.city});return}T&&T.trim()&&d(T.trim())}},Kt=re=>{var se;re.key==="Enter"?Ut():re.key==="Escape"&&(I([]),F(!1),(se=K.current)==null||se.blur())},ir=(re,se,pe,Le)=>{const Ve=Lt=>Lt*Math.PI/180,qe=Ve(pe-re),st=Ve(Le-se),Ue=Math.sin(qe/2)*Math.sin(qe/2)+Math.cos(Ve(re))*Math.cos(Ve(pe))*Math.sin(st/2)*Math.sin(st/2);return 6371*(2*Math.atan2(Math.sqrt(Ue),Math.sqrt(1-Ue)))},Wr=(re,se=40)=>{if(!re||isNaN(re))return null;const pe=re/1e3/se;return Math.round(pe*3600)},[Fn,Mi]=C.useState(null),Yt=re=>{b&&Mi(se=>se===re?null:re)},[sr,Cs]=C.useState(null);C.useEffect(()=>{if(typeof window>"u")return;const re=()=>{try{if(!b){Cs(null);return}const Le=window.innerHeight||document.documentElement.clientHeight||0,Ve=P&&P.current&&P.current.getBoundingClientRect().height||0,Qe=Number(_)||0;let qe=Math.max(0,Math.round(Le-Qe-Ve));qe<200&&(qe=Math.max(200,Math.round(Le-Qe))),Cs(qe)}catch{}};re();let se;if(P&&P.current&&typeof ResizeObserver<"u")try{se=new ResizeObserver(()=>re()),se.observe(P.current)}catch{se=null}window.addEventListener("resize",re);const pe=()=>setTimeout(re,120);return window.addEventListener("orientationchange",pe),()=>{window.removeEventListener("resize",re),window.removeEventListener("orientationchange",pe),se&&se.disconnect&&se.disconnect()}},[P,_,b]);const qo=b&&sr?{height:`${sr}px`}:void 0;C.useEffect(()=>{const re=()=>{if(b&&typeof S=="function")try{S()}catch{}},se=document.querySelector(".mapContainerModern");return se&&typeof se.addEventListener=="function"&&se.addEventListener("click",re),()=>{se&&typeof se.removeEventListener=="function"&&se.removeEventListener("click",re)}},[b,S]);const Ai=(re,se)=>({x:Math.round(se*1e6),y:Math.round(re*1e6)}),Hr=async(re,se)=>{try{const{x:pe,y:Le}=Ai(re,se),Ve="/vor-proxy",Qe={id:"ibwmnqg8g2kj8iwg",ver:"1.59",lang:"deu",auth:{type:"AID",aid:"wf7mcf9bv3nv8g5f"},client:{id:"VAO",type:"WEB",name:"webapp",l:"vs_anachb",v:10010,pos:{x:pe,y:Le,acc:20}},formatted:!1,ext:"VAO.22",svcReqL:[]},qe={...Qe,svcReqL:[{meth:"LocGeoPos",req:{ring:{cCrd:{x:pe,y:Le},minDist:0,maxDist:30},maxLoc:1,locFltrL:[{type:"PROD",mode:"INC",value:4087}],getPOIs:!0},id:"1|5|"}]};try{const We=await(await fetch(Ve,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(qe)})).json();if(We&&We.svcResL&&We.svcResL.length>0&&We.svcResL[0].res&&We.svcResL[0].res.locL&&We.svcResL[0].res.locL.length>0){const Lt=We.svcResL[0].res.locL[0];let _t=Lt.nameFormatted&&Lt.nameFormatted.text||Lt.name||Lt.txt||"";if(/^-?\d+\.\d+, ?-?\d+\.\d+$/.test(_t)&&(_t=""),!_t)return{address:"",city:""};let Ne=_t,nt="";if(_t.includes(",")){const Wt=_t.split(",");Ne=Wt[0].trim(),nt=Wt.slice(1).join(",").trim()}return{address:Ne,city:nt}}}catch(Ue){console.warn("reverseGeocode LocGeoPos error",Ue)}const st={...Qe,svcReqL:[{meth:"LocMatch",req:{input:{field:"S",loc:{type:"C",crd:{x:pe,y:Le}},maxLoc:1,locFltrL:[{type:"META",value:"in_austria_test"}]}},id:"1|24|"}]};try{const We=await(await fetch(Ve,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(st)})).json();if(We&&We.svcResL&&We.svcResL.length>0&&We.svcResL[0].res&&We.svcResL[0].res.match&&We.svcResL[0].res.match.locL&&We.svcResL[0].res.match.locL.length>0){const Lt=We.svcResL[0].res.match.locL.slice(),_t=Lt.filter(_n=>_n.state==="F");let Ne=null;if(_t.length>0?Ne=_t.find(_n=>_n.type==="A")||_t[0]:Ne=Lt.find(_n=>_n.type==="A")||Lt[0],!Ne)return{address:"",city:""};let nt=Ne.nameFormatted&&Ne.nameFormatted.text||Ne.name||Ne.txt||"";if(/^-?\d+\.\d+, ?-?\d+\.\d+$/.test(nt)&&(nt=""),!nt)return{address:"",city:""};let Wt=nt,Jt="";if(nt.includes(",")){const _n=nt.split(",");Wt=_n[0].trim(),Jt=_n.slice(1).join(",").trim()}return{address:Wt,city:Jt}}}catch(Ue){console.warn("reverseGeocode LocMatch error",Ue)}return{address:"",city:""}}catch(pe){return console.error("Reverse geocode error",pe),{address:"",city:""}}};return C.useEffect(()=>()=>{var re;Pe.current&&((re=navigator.geolocation)!=null&&re.clearWatch)&&navigator.geolocation.clearWatch(Pe.current)},[]),C.useEffect(()=>{g&&D()},[g]),C.useEffect(()=>{var re;if(H&&((re=f==null?void 0:f.current)!=null&&re.setView)&&!Ct.current)try{f.current.setView([H.lat,H.lon],17),Ct.current=!0}catch{}},[H,f]),C.useEffect(()=>{let re=!1;if(!H)return;const se=`${H.lat.toFixed(6)},${H.lon.toFixed(6)}`;if(Fe.current!==se)return Fe.current=se,oe(!0),(async()=>{try{const pe=await Hr(H.lat,H.lon);if(!re&&pe&&(pe.address||pe.city)){const Le=pe.address?pe.city?`${pe.address}, ${pe.city}`:pe.address:pe.city||"";W(Le)}else re||W(`Lokacija: ${H.lat.toFixed(6)}, ${H.lon.toFixed(6)}`)}catch{re||W(`Lokacija: ${H.lat.toFixed(6)}, ${H.lon.toFixed(6)}`)}finally{re||oe(!1)}})(),()=>{re=!0,oe(!1)}},[H]),C.useEffect(()=>{let re=!1;if(!ve){de(null);return}if(H&&Y&&typeof H.lat=="number"&&typeof H.lon=="number"&&typeof Y.lat=="number"&&typeof Y.lon=="number"){const se=`${H.lat},${H.lon}->${Y.lat},${Y.lon}`,pe=Date.now();if(we.current.key===se&&pe-we.current.ts<3e4&&ge)return;Se(!0),(async()=>{try{const Le=H.lat,Ve=H.lon,Qe=Y.lat,qe=Y.lon;let st=null;try{if(st=await Ix(Le,Ve,Qe,qe),st){de({distanceMeters:st.distanceMeters,distanceText:st.distanceText,durationSeconds:st.durationSeconds,durationText:st.durationText,provider:"MapQuest"}),we.current={ts:Date.now(),key:se};return}}catch(Ue){console.warn("MapQuest routing failed, falling back to Google:",Ue.message||Ue)}try{const Ue=await X6({lat:Le,lon:Ve},{lat:Qe,lon:qe});Ue?(de({distanceMeters:Ue.distanceMeters,distanceText:Ue.distanceText||Ic(Ue.distanceMeters),durationSeconds:Ue.durationSeconds,durationText:Ue.durationText||Mc(Ue.durationSeconds),provider:Ue.provider||"Google"}),we.current={ts:Date.now(),key:se}):de(null)}catch(Ue){console.warn("Google routing failed as fallback:",Ue),de(null)}}catch{re||de(null)}finally{re||Se(!1)}})()}else de(null);return()=>{re=!0,Se(!1)}},[H,Y]),a.jsxs("div",{className:`${_e.mapCardModern} ${e}`,style:n,children:[a.jsx("div",{className:_e.addressBarIntegrated,children:a.jsxs("div",{className:_e.searchContainer,children:[a.jsxs("div",{className:_e.searchInputWrapper,children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:_e.searchIcon,children:a.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),a.jsx("input",{ref:K,type:"text",className:_e.searchInput,value:T,onChange:re=>$(re.target.value),onFocus:()=>F(!0),onBlur:()=>setTimeout(()=>F(!1),150),onKeyDown:Kt,placeholder:"Unesi adresu (npr: hauprstrasse 60 9340)...",autoComplete:"off"})]}),a.jsx("button",{className:_e.navigateBtn,onClick:Ut,disabled:!T.trim(),title:"Otvori navigaciju","aria-label":"Navigiraj",children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"})})}),G&&T&&a.jsx("div",{className:_e.suggestionsDropdown,children:R?a.jsxs("div",{className:_e.suggestionItem,children:[a.jsx("div",{className:_e.loadingSpinnerSmall}),"Traim adrese..."]}):N.length===0?a.jsxs("div",{className:_e.suggestionItem,children:['Nema rezultata za "',T,'"']}):N.map((re,se)=>{var pe,Le;return a.jsx("div",{className:_e.suggestionItem,onClick:()=>Ye(re),onMouseDown:Ve=>Ve.preventDefault(),children:a.jsx("div",{className:_e.suggestionAddress,children:((Le=(pe=re.nameFormatted)==null?void 0:pe.text)==null?void 0:Le.replace(/<[^>]*>/g,""))||re.name||""})},se)})})]})}),a.jsx("div",{className:_e.mapContent,style:qo,children:s?a.jsxs("div",{className:_e.mapLoading,children:[a.jsx("div",{className:_e.loadingSpinner}),a.jsx("p",{children:"Uitavam mapu..."})]}):a.jsxs(a.Fragment,{children:[t,a.jsxs("div",{className:_e.mapControlsFloating,children:[a.jsxs("button",{className:_e.floatingControlBtn,onClick:k,title:"Poveaj zoom",children:[a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"})}),a.jsx("span",{className:"sr-only",children:"Poveaj zoom"})]}),a.jsxs("button",{className:_e.floatingControlBtn,onClick:O,title:"Smanji zoom",children:[a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19 11H5v2h14z"})}),a.jsx("span",{className:"sr-only",children:"Smanji zoom"})]}),a.jsxs("button",{className:_e.floatingControlBtn,onClick:D,title:"Lociraj na adresu",children:[a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"})}),a.jsx("span",{className:"sr-only",children:"Lociraj na adresu"})]})]})]})}),a.jsxs("div",{ref:P,className:`${_e.mapFooter} mapFooter`,children:[a.jsxs("div",{className:_e.addressInfo,children:[ne?a.jsxs("div",{className:`${_e.currentAddress} ${_e.addressExpandable}`,onClick:()=>Yt("current"),children:[a.jsxs("svg",{className:_e.modernLocationIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),a.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),a.jsx("div",{className:_e.loadingSpinnerSmall,style:{display:"inline-block",marginRight:"8px"}}),"Prepoznajem adresu..."]}):X?a.jsxs("div",{className:`${_e.currentAddress} ${_e.addressExpandable} ${Fn==="current"?_e.expanded:""}`,onClick:()=>Yt("current"),title:X,children:[a.jsxs("svg",{className:_e.modernLocationIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),a.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),Fn==="current"?X:b?j(X):X]}):H?a.jsxs("div",{className:`${_e.currentAddress} ${_e.addressExpandable}`,onClick:()=>Yt("current"),children:[a.jsxs("svg",{className:_e.modernLocationIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),a.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),H.lat.toFixed(6),", ",H.lon.toFixed(6)]}):a.jsxs("div",{className:`${_e.currentAddress} ${_e.addressExpandable}`,onClick:()=>Yt("current"),children:[a.jsxs("svg",{className:_e.modernLocationIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),a.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Lokacija nije dostupna"]}),Y?a.jsxs("div",{className:`${_e.selectedAddress} ${_e.addressExpandable} ${Fn==="selected"?_e.expanded:""}`,title:`${Y.address}${Y.city?`, ${Y.city}`:""}`,onClick:()=>Yt("selected"),children:[a.jsxs("svg",{className:_e.modernTargetIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),b?Fn==="selected"?`${Y.address}${Y.city?`, ${Y.city}`:""}`:y(Y.address,Y.city):`${Y.address}${Y.city?`, ${Y.city}`:""}`]}):T?a.jsxs("div",{className:`${_e.selectedAddress} ${_e.addressExpandable} ${Fn==="selected"?_e.expanded:""}`,title:T,onClick:()=>Yt("selected"),children:[a.jsx("span",{style:{marginRight:"8px"},children:""}),b?Fn==="selected"?T:y(T,""):T]}):null]}),a.jsx("div",{className:_e.distanceInfo,children:a.jsx("div",{className:_e.distanceInfoInner,children:te?a.jsxs("div",{className:_e.distanceText,children:[a.jsx("span",{children:te.compact}),a.jsx("small",{className:_e.distanceSmall,children:"Polyline"})]}):ge?a.jsxs("div",{className:_e.distanceText,children:[a.jsxs("span",{className:_e.routeSummary,children:[ge.durationText||Mc(ge.durationSeconds)||"--","  ",ge.distanceText||Ic(ge.distanceMeters)||"--"]}),fe&&a.jsx("span",{className:_e.spinnerWrapper,children:a.jsx("div",{className:_e.loadingSpinnerSmall,"aria-hidden":"true"})}),ge.provider&&ge.provider.toLowerCase()!=="mapquest"&&a.jsx("small",{className:_e.distanceSmall,children:ge.provider})]}):H&&Y?a.jsx("div",{className:_e.distanceText,children:a.jsx("span",{className:_e.routeSummary,children:(()=>{const re=ir(H.lat,H.lon,Y.lat,Y.lon),se=Math.round(re*1e3),pe=Wr(se,40);return pe?`${Mc(pe)}  ${Ic(se)}`:"--"})()})}):a.jsx("div",{className:_e.distanceText,children:a.jsx("span",{className:_e.routeSummary,children:"--"})})})})]})]})};function Mx(t,e){const n=C.useRef(e);C.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function oR(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const aR=1;function lR(t){return Object.freeze({__version:aR,map:t})}function Ax(t,e){return Object.freeze({...t,...e})}const Dx=C.createContext(null),zx=Dx.Provider;function Hu(){const t=C.useContext(Dx);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Bx(t){function e(n,r){const{instance:s,context:o}=t(n).current;return C.useImperativeHandle(r,()=>s),n.children==null?null:mi.createElement(zx,{value:o},n.children)}return C.forwardRef(e)}function cR(t){function e(n,r){const[s,o]=C.useState(!1),{instance:c}=t(n,o).current;C.useImperativeHandle(r,()=>c),C.useEffect(function(){s&&c.update()},[c,s,n.children]);const d=c._contentNode;return d?Lu.createPortal(n.children,d):null}return C.forwardRef(e)}function uR(t){function e(n,r){const{instance:s}=t(n).current;return C.useImperativeHandle(r,()=>s),null}return C.forwardRef(e)}function im(t,e){const n=C.useRef();C.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Vu(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function dR(t,e){return function(r,s){const o=Hu(),c=t(Vu(r,o),o);return Mx(o.map,r.attribution),im(c.current,r.eventHandlers),e(c.current,o,r,s),c}}var Ff={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(rn,function(n){var r="1.9.4";function s(i){var l,u,p,v;for(u=1,p=arguments.length;u<p;u++){v=arguments[u];for(l in v)i[l]=v[l]}return i}var o=Object.create||function(){function i(){}return function(l){return i.prototype=l,new i}}();function c(i,l){var u=Array.prototype.slice;if(i.bind)return i.bind.apply(i,u.call(arguments,1));var p=u.call(arguments,2);return function(){return i.apply(l,p.length?p.concat(u.call(arguments)):arguments)}}var d=0;function h(i){return"_leaflet_id"in i||(i._leaflet_id=++d),i._leaflet_id}function f(i,l,u){var p,v,E,M;return M=function(){p=!1,v&&(E.apply(u,v),v=!1)},E=function(){p?v=arguments:(i.apply(u,arguments),setTimeout(M,l),p=!0)},E}function m(i,l,u){var p=l[1],v=l[0],E=p-v;return i===p&&u?i:((i-v)%E+E)%E+v}function g(){return!1}function x(i,l){if(l===!1)return i;var u=Math.pow(10,l===void 0?6:l);return Math.round(i*u)/u}function P(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function b(i){return P(i).split(/\s+/)}function _(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?o(i.options):{});for(var u in l)i.options[u]=l[u];return i.options}function S(i,l,u){var p=[];for(var v in i)p.push(encodeURIComponent(u?v.toUpperCase():v)+"="+encodeURIComponent(i[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function j(i,l){return i.replace(y,function(u,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+u);return typeof v=="function"&&(v=v(l)),v})}var k=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function O(i,l){for(var u=0;u<i.length;u++)if(i[u]===l)return u;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function T(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var $=0;function N(i){var l=+new Date,u=Math.max(0,16-(l-$));return $=l+u,window.setTimeout(i,u)}var I=window.requestAnimationFrame||T("RequestAnimationFrame")||N,R=window.cancelAnimationFrame||T("CancelAnimationFrame")||T("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function A(i,l,u){if(u&&I===N)i.call(l);else return I.call(window,c(i,l))}function G(i){i&&R.call(window,i)}var F={__proto__:null,extend:s,create:o,bind:c,get lastId(){return d},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:x,trim:P,splitWords:b,setOptions:_,getParamString:S,template:j,isArray:k,indexOf:O,emptyImageUrl:D,requestFn:I,cancelFn:R,requestAnimFrame:A,cancelAnimFrame:G};function K(){}K.extend=function(i){var l=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=l.__super__=this.prototype,p=o(u);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return i.statics&&s(l,i.statics),i.includes&&(H(i.includes),s.apply(null,[p].concat(i.includes))),s(p,i),delete p.statics,delete p.includes,p.options&&(p.options=u.options?o(u.options):{},s(p.options,i.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,M=p._initHooks.length;E<M;E++)p._initHooks[E].call(this)}},l},K.include=function(i){var l=this.prototype.options;return s(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},K.mergeOptions=function(i){return s(this.prototype.options,i),this},K.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),u=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function H(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=k(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(i,l,u){if(typeof i=="object")for(var p in i)this._on(p,i[p],l);else{i=b(i);for(var v=0,E=i.length;v<E;v++)this._on(i[v],l,u)}return this},off:function(i,l,u){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var p in i)this._off(p,i[p],l);else{i=b(i);for(var v=arguments.length===1,E=0,M=i.length;E<M;E++)v?this._off(i[E]):this._off(i[E],l,u)}return this},_on:function(i,l,u,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,u)===!1){u===this&&(u=void 0);var v={fn:l,ctx:u};p&&(v.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(v)}},_off:function(i,l,u){var p,v,E;if(this._events&&(p=this._events[i],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,E=p.length;v<E;v++)p[v].fn=g;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var M=this._listens(i,l,u);if(M!==!1){var U=p[M];this._firingCount&&(U.fn=g,this._events[i]=p=p.slice()),p.splice(M,1)}}},fire:function(i,l,u){if(!this.listens(i,u))return this;var p=s({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[i];if(v){this._firingCount=this._firingCount+1||1;for(var E=0,M=v.length;E<M;E++){var U=v[E],V=U.fn;U.once&&this.off(i,V,U.ctx),V.call(U.ctx||this,p)}this._firingCount--}}return u&&this._propagateEvent(p),this},listens:function(i,l,u,p){typeof i!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,u=void 0);var E=this._events&&this._events[i];if(E&&E.length&&this._listens(i,v,u)!==!1)return!0;if(p){for(var M in this._eventParents)if(this._eventParents[M].listens(i,l,u,p))return!0}return!1},_listens:function(i,l,u){if(!this._events)return!1;var p=this._events[i]||[];if(!l)return!!p.length;u===this&&(u=void 0);for(var v=0,E=p.length;v<E;v++)if(p[v].fn===l&&p[v].ctx===u)return v;return!1},once:function(i,l,u){if(typeof i=="object")for(var p in i)this._on(p,i[p],l,!0);else{i=b(i);for(var v=0,E=i.length;v<E;v++)this._on(i[v],l,u,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[h(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[h(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var Y=K.extend(Z);function z(i,l,u){this.x=u?Math.round(i):i,this.y=u?Math.round(l):l}var X=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(i){return this.clone()._add(W(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(W(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new z(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new z(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=X(this.x),this.y=X(this.y),this},distanceTo:function(i){i=W(i);var l=i.x-this.x,u=i.y-this.y;return Math.sqrt(l*l+u*u)},equals:function(i){return i=W(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=W(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function W(i,l,u){return i instanceof z?i:k(i)?new z(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new z(i.x,i.y):new z(i,l,u)}function ne(i,l){if(i)for(var u=l?[i,l]:i,p=0,v=u.length;p<v;p++)this.extend(u[p])}ne.prototype={extend:function(i){var l,u;if(!i)return this;if(i instanceof z||typeof i[0]=="number"||"x"in i)l=u=W(i);else if(i=oe(i),l=i.min,u=i.max,!l||!u)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=u.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(i){return W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return W(this.min.x,this.max.y)},getTopRight:function(){return W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,u;return typeof i[0]=="number"||i instanceof z?i=W(i):i=oe(i),i instanceof ne?(l=i.min,u=i.max):l=u=i,l.x>=this.min.x&&u.x<=this.max.x&&l.y>=this.min.y&&u.y<=this.max.y},intersects:function(i){i=oe(i);var l=this.min,u=this.max,p=i.min,v=i.max,E=v.x>=l.x&&p.x<=u.x,M=v.y>=l.y&&p.y<=u.y;return E&&M},overlaps:function(i){i=oe(i);var l=this.min,u=this.max,p=i.min,v=i.max,E=v.x>l.x&&p.x<u.x,M=v.y>l.y&&p.y<u.y;return E&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,u=this.max,p=Math.abs(l.x-u.x)*i,v=Math.abs(l.y-u.y)*i;return oe(W(l.x-p,l.y-v),W(u.x+p,u.y+v))},equals:function(i){return i?(i=oe(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function oe(i,l){return!i||i instanceof ne?i:new ne(i,l)}function ge(i,l){if(i)for(var u=l?[i,l]:i,p=0,v=u.length;p<v;p++)this.extend(u[p])}ge.prototype={extend:function(i){var l=this._southWest,u=this._northEast,p,v;if(i instanceof ve)p=i,v=i;else if(i instanceof ge){if(p=i._southWest,v=i._northEast,!p||!v)return this}else return i?this.extend(J(i)||de(i)):this;return!l&&!u?(this._southWest=new ve(p.lat,p.lng),this._northEast=new ve(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),u.lat=Math.max(v.lat,u.lat),u.lng=Math.max(v.lng,u.lng)),this},pad:function(i){var l=this._southWest,u=this._northEast,p=Math.abs(l.lat-u.lat)*i,v=Math.abs(l.lng-u.lng)*i;return new ge(new ve(l.lat-p,l.lng-v),new ve(u.lat+p,u.lng+v))},getCenter:function(){return new ve((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ve(this.getNorth(),this.getWest())},getSouthEast:function(){return new ve(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof ve||"lat"in i?i=J(i):i=de(i);var l=this._southWest,u=this._northEast,p,v;return i instanceof ge?(p=i.getSouthWest(),v=i.getNorthEast()):p=v=i,p.lat>=l.lat&&v.lat<=u.lat&&p.lng>=l.lng&&v.lng<=u.lng},intersects:function(i){i=de(i);var l=this._southWest,u=this._northEast,p=i.getSouthWest(),v=i.getNorthEast(),E=v.lat>=l.lat&&p.lat<=u.lat,M=v.lng>=l.lng&&p.lng<=u.lng;return E&&M},overlaps:function(i){i=de(i);var l=this._southWest,u=this._northEast,p=i.getSouthWest(),v=i.getNorthEast(),E=v.lat>l.lat&&p.lat<u.lat,M=v.lng>l.lng&&p.lng<u.lng;return E&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=de(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function de(i,l){return i instanceof ge?i:new ge(i,l)}function ve(i,l,u){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,u!==void 0&&(this.alt=+u)}ve.prototype={equals:function(i,l){if(!i)return!1;i=J(i);var u=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return u<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+x(this.lat,i)+", "+x(this.lng,i)+")"},distanceTo:function(i){return Se.distance(this,J(i))},wrap:function(){return Se.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,u=l/Math.cos(Math.PI/180*this.lat);return de([this.lat-l,this.lng-u],[this.lat+l,this.lng+u])},clone:function(){return new ve(this.lat,this.lng,this.alt)}};function J(i,l,u){return i instanceof ve?i:k(i)&&typeof i[0]!="object"?i.length===3?new ve(i[0],i[1],i[2]):i.length===2?new ve(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new ve(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new ve(i,l,u)}var fe={latLngToPoint:function(i,l){var u=this.projection.project(i),p=this.scale(l);return this.transformation._transform(u,p)},pointToLatLng:function(i,l){var u=this.scale(l),p=this.transformation.untransform(i,u);return this.projection.unproject(p)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,u=this.scale(i),p=this.transformation.transform(l.min,u),v=this.transformation.transform(l.max,u);return new ne(p,v)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?m(i.lng,this.wrapLng,!0):i.lng,u=this.wrapLat?m(i.lat,this.wrapLat,!0):i.lat,p=i.alt;return new ve(u,l,p)},wrapLatLngBounds:function(i){var l=i.getCenter(),u=this.wrapLatLng(l),p=l.lat-u.lat,v=l.lng-u.lng;if(p===0&&v===0)return i;var E=i.getSouthWest(),M=i.getNorthEast(),U=new ve(E.lat-p,E.lng-v),V=new ve(M.lat-p,M.lng-v);return new ge(U,V)}},Se=s({},fe,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var u=Math.PI/180,p=i.lat*u,v=l.lat*u,E=Math.sin((l.lat-i.lat)*u/2),M=Math.sin((l.lng-i.lng)*u/2),U=E*E+Math.cos(p)*Math.cos(v)*M*M,V=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*V}}),te=6378137,xe={R:te,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,u=this.MAX_LATITUDE,p=Math.max(Math.min(u,i.lat),-u),v=Math.sin(p*l);return new z(this.R*i.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(i){var l=180/Math.PI;return new ve((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:function(){var i=te*Math.PI;return new ne([-i,-i],[i,i])}()};function we(i,l,u,p){if(k(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=u,this._d=p}we.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new z((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function Pe(i,l,u,p){return new we(i,l,u,p)}var Fe=s({},Se,{code:"EPSG:3857",projection:xe,transformation:function(){var i=.5/(Math.PI*xe.R);return Pe(i,.5,-i,.5)}()}),Ct=s({},Fe,{code:"EPSG:900913"});function Ye(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ut(i,l){var u="",p,v,E,M,U,V;for(p=0,E=i.length;p<E;p++){for(U=i[p],v=0,M=U.length;v<M;v++)V=U[v],u+=(v?"L":"M")+V.x+" "+V.y;u+=l?ye.svg?"z":"x":""}return u||"M0 0"}var Kt=document.documentElement.style,ir="ActiveXObject"in window,Wr=ir&&!document.addEventListener,Fn="msLaunchUri"in navigator&&!("documentMode"in document),Mi=or("webkit"),Yt=or("android"),sr=or("android 2")||or("android 3"),Cs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qo=Yt&&or("Google")&&Cs<537&&!("AudioNode"in window),Ai=!!window.opera,Hr=!Fn&&or("chrome"),re=or("gecko")&&!Mi&&!Ai&&!ir,se=!Hr&&or("safari"),pe=or("phantom"),Le="OTransition"in Kt,Ve=navigator.platform.indexOf("Win")===0,Qe=ir&&"transition"in Kt,qe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!sr,st="MozPerspective"in Kt,Ue=!window.L_DISABLE_3D&&(Qe||qe||st)&&!Le&&!pe,We=typeof orientation<"u"||or("mobile"),Lt=We&&Mi,_t=We&&qe,Ne=!window.PointerEvent&&window.MSPointerEvent,nt=!!(window.PointerEvent||Ne),Wt="ontouchstart"in window||!!window.TouchEvent,Jt=!window.L_NO_TOUCH&&(Wt||nt),_n=We&&Ai,Ps=We&&re,Vr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,El=function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return i}(),Tl=function(){return!!document.createElement("canvas").getContext}(),Zu=!!(document.createElementNS&&Ye("svg").createSVGRect),Vx=!!Zu&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),qx=!Zu&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Gx=navigator.platform.indexOf("Mac")===0,Zx=navigator.platform.indexOf("Linux")===0;function or(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ye={ie:ir,ielt9:Wr,edge:Fn,webkit:Mi,android:Yt,android23:sr,androidStock:qo,opera:Ai,chrome:Hr,gecko:re,safari:se,phantom:pe,opera12:Le,win:Ve,ie3d:Qe,webkit3d:qe,gecko3d:st,any3d:Ue,mobile:We,mobileWebkit:Lt,mobileWebkit3d:_t,msPointer:Ne,pointer:nt,touch:Jt,touchNative:Wt,mobileOpera:_n,mobileGecko:Ps,retina:Vr,passiveEvents:El,canvas:Tl,svg:Zu,vml:qx,inlineSvg:Vx,mac:Gx,linux:Zx},sm=ye.msPointer?"MSPointerDown":"pointerdown",om=ye.msPointer?"MSPointerMove":"pointermove",am=ye.msPointer?"MSPointerUp":"pointerup",lm=ye.msPointer?"MSPointerCancel":"pointercancel",Ku={touchstart:sm,touchmove:om,touchend:am,touchcancel:lm},cm={touchstart:ew,touchmove:Ll,touchend:Ll,touchcancel:Ll},Es={},um=!1;function Kx(i,l,u){return l==="touchstart"&&Xx(),cm[l]?(u=cm[l].bind(this,u),i.addEventListener(Ku[l],u,!1),u):(console.warn("wrong event specified:",l),g)}function Yx(i,l,u){if(!Ku[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Ku[l],u,!1)}function Jx(i){Es[i.pointerId]=i}function Qx(i){Es[i.pointerId]&&(Es[i.pointerId]=i)}function dm(i){delete Es[i.pointerId]}function Xx(){um||(document.addEventListener(sm,Jx,!0),document.addEventListener(om,Qx,!0),document.addEventListener(am,dm,!0),document.addEventListener(lm,dm,!0),um=!0)}function Ll(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var u in Es)l.touches.push(Es[u]);l.changedTouches=[l],i(l)}}function ew(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Mt(l),Ll(i,l)}function tw(i){var l={},u,p;for(p in i)u=i[p],l[p]=u&&u.bind?u.bind(i):u;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var nw=200;function rw(i,l){i.addEventListener("dblclick",l);var u=0,p;function v(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var M=gm(E);if(!(M.some(function(V){return V instanceof HTMLLabelElement&&V.attributes.for})&&!M.some(function(V){return V instanceof HTMLInputElement||V instanceof HTMLSelectElement}))){var U=Date.now();U-u<=nw?(p++,p===2&&l(tw(E))):p=1,u=U}}}return i.addEventListener("click",v),{dblclick:l,simDblclick:v}}function iw(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var Yu=Rl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Go=Rl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),hm=Go==="webkitTransition"||Go==="OTransition"?Go+"End":"transitionend";function fm(i){return typeof i=="string"?document.getElementById(i):i}function Zo(i,l){var u=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!u||u==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(i,null);u=p?p[l]:null}return u==="auto"?null:u}function He(i,l,u){var p=document.createElement(i);return p.className=l||"",u&&u.appendChild(p),p}function at(i){var l=i.parentNode;l&&l.removeChild(i)}function Ol(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ts(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function Ls(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Ju(i,l){if(i.classList!==void 0)return i.classList.contains(l);var u=Nl(i);return u.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(u)}function Oe(i,l){if(i.classList!==void 0)for(var u=b(l),p=0,v=u.length;p<v;p++)i.classList.add(u[p]);else if(!Ju(i,l)){var E=Nl(i);Qu(i,(E?E+" ":"")+l)}}function mt(i,l){i.classList!==void 0?i.classList.remove(l):Qu(i,P((" "+Nl(i)+" ").replace(" "+l+" "," ")))}function Qu(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function Nl(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function En(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&sw(i,l)}function sw(i,l){var u=!1,p="DXImageTransform.Microsoft.Alpha";try{u=i.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),u?(u.Enabled=l!==100,u.Opacity=l):i.style.filter+=" progid:"+p+"(opacity="+l+")"}function Rl(i){for(var l=document.documentElement.style,u=0;u<i.length;u++)if(i[u]in l)return i[u];return!1}function Di(i,l,u){var p=l||new z(0,0);i.style[Yu]=(ye.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(u?" scale("+u+")":"")}function xt(i,l){i._leaflet_pos=l,ye.any3d?Di(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function zi(i){return i._leaflet_pos||new z(0,0)}var Ko,Yo,Xu;if("onselectstart"in document)Ko=function(){Ee(window,"selectstart",Mt)},Yo=function(){Xe(window,"selectstart",Mt)};else{var Jo=Rl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ko=function(){if(Jo){var i=document.documentElement.style;Xu=i[Jo],i[Jo]="none"}},Yo=function(){Jo&&(document.documentElement.style[Jo]=Xu,Xu=void 0)}}function ed(){Ee(window,"dragstart",Mt)}function td(){Xe(window,"dragstart",Mt)}var Il,nd;function rd(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Ml(),Il=i,nd=i.style.outlineStyle,i.style.outlineStyle="none",Ee(window,"keydown",Ml))}function Ml(){Il&&(Il.style.outlineStyle=nd,Il=void 0,nd=void 0,Xe(window,"keydown",Ml))}function pm(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function id(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var ow={__proto__:null,TRANSFORM:Yu,TRANSITION:Go,TRANSITION_END:hm,get:fm,getStyle:Zo,create:He,remove:at,empty:Ol,toFront:Ts,toBack:Ls,hasClass:Ju,addClass:Oe,removeClass:mt,setClass:Qu,getClass:Nl,setOpacity:En,testProp:Rl,setTransform:Di,setPosition:xt,getPosition:zi,get disableTextSelection(){return Ko},get enableTextSelection(){return Yo},disableImageDrag:ed,enableImageDrag:td,preventOutline:rd,restoreOutline:Ml,getSizedParentNode:pm,getScale:id};function Ee(i,l,u,p){if(l&&typeof l=="object")for(var v in l)od(i,v,l[v],u);else{l=b(l);for(var E=0,M=l.length;E<M;E++)od(i,l[E],u,p)}return this}var ar="_leaflet_events";function Xe(i,l,u,p){if(arguments.length===1)mm(i),delete i[ar];else if(l&&typeof l=="object")for(var v in l)ad(i,v,l[v],u);else if(l=b(l),arguments.length===2)mm(i,function(U){return O(l,U)!==-1});else for(var E=0,M=l.length;E<M;E++)ad(i,l[E],u,p);return this}function mm(i,l){for(var u in i[ar]){var p=u.split(/\d/)[0];(!l||l(p))&&ad(i,p,null,null,u)}}var sd={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function od(i,l,u,p){var v=l+h(u)+(p?"_"+h(p):"");if(i[ar]&&i[ar][v])return this;var E=function(U){return u.call(p||i,U||window.event)},M=E;!ye.touchNative&&ye.pointer&&l.indexOf("touch")===0?E=Kx(i,l,E):ye.touch&&l==="dblclick"?E=rw(i,E):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(sd[l]||l,E,ye.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(U){U=U||window.event,cd(i,U)&&M(U)},i.addEventListener(sd[l],E,!1)):i.addEventListener(l,M,!1):i.attachEvent("on"+l,E),i[ar]=i[ar]||{},i[ar][v]=E}function ad(i,l,u,p,v){v=v||l+h(u)+(p?"_"+h(p):"");var E=i[ar]&&i[ar][v];if(!E)return this;!ye.touchNative&&ye.pointer&&l.indexOf("touch")===0?Yx(i,l,E):ye.touch&&l==="dblclick"?iw(i,E):"removeEventListener"in i?i.removeEventListener(sd[l]||l,E,!1):i.detachEvent("on"+l,E),i[ar][v]=null}function Bi(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function ld(i){return od(i,"wheel",Bi),this}function Qo(i){return Ee(i,"mousedown touchstart dblclick contextmenu",Bi),i._leaflet_disable_click=!0,this}function Mt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function $i(i){return Mt(i),Bi(i),this}function gm(i){if(i.composedPath)return i.composedPath();for(var l=[],u=i.target;u;)l.push(u),u=u.parentNode;return l}function vm(i,l){if(!l)return new z(i.clientX,i.clientY);var u=id(l),p=u.boundingClientRect;return new z((i.clientX-p.left)/u.x-l.clientLeft,(i.clientY-p.top)/u.y-l.clientTop)}var aw=ye.linux&&ye.chrome?window.devicePixelRatio:ye.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ym(i){return ye.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/aw:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function cd(i,l){var u=l.relatedTarget;if(!u)return!0;try{for(;u&&u!==i;)u=u.parentNode}catch{return!1}return u!==i}var lw={__proto__:null,on:Ee,off:Xe,stopPropagation:Bi,disableScrollPropagation:ld,disableClickPropagation:Qo,preventDefault:Mt,stop:$i,getPropagationPath:gm,getMousePosition:vm,getWheelDelta:ym,isExternalTarget:cd,addListener:Ee,removeListener:Xe},_m=Y.extend({run:function(i,l,u,p){this.stop(),this._el=i,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=zi(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=A(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,u=this._duration*1e3;l<u?this._runFrame(this._easeOut(l/u),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var u=this._startPos.add(this._offset.multiplyBy(i));l&&u._round(),xt(this._el,u),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Be=Y.extend({options:{crs:Fe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=_(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(J(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Go&&ye.any3d&&!ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,hm,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,u){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(J(i),l,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,u.zoom):this._tryAnimatedPan(i,u.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,u.pan&&u.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,u){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),E=i instanceof z?i:this.latLngToContainerPoint(i),M=E.subtract(v).multiplyBy(1-1/p),U=this.containerPointToLatLng(v.add(M));return this.setView(U,l,{zoom:u})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():de(i);var u=W(l.paddingTopLeft||l.padding||[0,0]),p=W(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(i,!1,u.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:i.getCenter(),zoom:v};var E=p.subtract(u).divideBy(2),M=this.project(i.getSouthWest(),v),U=this.project(i.getNorthEast(),v),V=this.unproject(M.add(U).divideBy(2).add(E),v);return{center:V,zoom:v}},fitBounds:function(i,l){if(i=de(i),!i.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(i,l);return this.setView(u.center,u.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=W(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _m,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Oe(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,u,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,u){if(u=u||{},u.animate===!1||!ye.any3d)return this.setView(i,l,u);this._stop();var p=this.project(this.getCenter()),v=this.project(i),E=this.getSize(),M=this._zoom;i=J(i),l=l===void 0?M:l;var U=Math.max(E.x,E.y),V=U*this.getZoomScale(M,l),Q=v.distanceTo(p)||1,ae=1.42,ke=ae*ae;function Re(wt){var Gl=wt?-1:1,Yw=wt?V:U,Jw=V*V-U*U+Gl*ke*ke*Q*Q,Qw=2*Yw*ke*Q,xd=Jw/Qw,Xm=Math.sqrt(xd*xd+1)-xd,Xw=Xm<1e-9?-18:Math.log(Xm);return Xw}function Qt(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function Ot(wt){return(Math.exp(wt)+Math.exp(-wt))/2}function Ln(wt){return Qt(wt)/Ot(wt)}var an=Re(0);function As(wt){return U*(Ot(an)/Ot(an+ae*wt))}function qw(wt){return U*(Ot(an)*Ln(an+ae*wt)-Qt(an))/ke}function Gw(wt){return 1-Math.pow(1-wt,1.5)}var Zw=Date.now(),Jm=(Re(1)-an)/ae,Kw=u.duration?1e3*u.duration:1e3*Jm*.8;function Qm(){var wt=(Date.now()-Zw)/Kw,Gl=Gw(wt)*Jm;wt<=1?(this._flyToFrame=A(Qm,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(qw(Gl)/Q)),M),this.getScaleZoom(U/As(Gl),M),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Qm.call(this),this},flyToBounds:function(i,l){var u=this._getBoundsCenterZoom(i,l);return this.flyTo(u.center,u.zoom,l)},setMaxBounds:function(i){return i=de(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var u=this.getCenter(),p=this._limitCenter(u,this._zoom,de(i));return u.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var u=W(l.paddingTopLeft||l.padding||[0,0]),p=W(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),E=this.project(i),M=this.getPixelBounds(),U=oe([M.min.add(u),M.max.subtract(p)]),V=U.getSize();if(!U.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(U.getCenter()),ae=U.extend(E).getSize().subtract(V);v.x+=Q.x<0?-ae.x:ae.x,v.y+=Q.y<0?-ae.y:ae.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),p=l.divideBy(2).round(),v=u.divideBy(2).round(),E=p.subtract(v);return!E.x&&!E.y?this:(i.animate&&i.pan?this.panBy(E):(i.pan&&this._rawPanBy(E),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=c(this._handleGeolocationResponse,this),u=c(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,u,i):navigator.geolocation.getCurrentPosition(l,u,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,u=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,u=i.coords.longitude,p=new ve(l,u),v=p.toBounds(i.coords.accuracy*2),E=this._locateOptions;if(E.setView){var M=this.getBoundsZoom(v);this.setView(p,E.maxZoom?Math.min(M,E.maxZoom):M)}var U={latlng:p,bounds:v,timestamp:i.timestamp};for(var V in i.coords)typeof i.coords[V]=="number"&&(U[V]=i.coords[V]);this.fire("locationfound",U)}},addHandler:function(i,l){if(!l)return this;var u=this[i]=new l(this);return this._handlers.push(u),this.options[i]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),at(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)at(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var u="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),p=He("div",u,l||this._mapPane);return i&&(this._panes[i]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),u=this.unproject(i.getTopRight());return new ge(l,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,u){i=de(i),u=W(u||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),E=this.getMaxZoom(),M=i.getNorthWest(),U=i.getSouthEast(),V=this.getSize().subtract(u),Q=oe(this.project(U,p),this.project(M,p)).getSize(),ae=ye.any3d?this.options.zoomSnap:1,ke=V.x/Q.x,Re=V.y/Q.y,Qt=l?Math.max(ke,Re):Math.min(ke,Re);return p=this.getScaleZoom(Qt,p),ae&&(p=Math.round(p/(ae/100))*(ae/100),p=l?Math.ceil(p/ae)*ae:Math.floor(p/ae)*ae),Math.max(v,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var u=this._getTopLeftPoint(i,l);return new ne(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var u=this.options.crs;return l=l===void 0?this._zoom:l,u.scale(i)/u.scale(l)},getScaleZoom:function(i,l){var u=this.options.crs;l=l===void 0?this._zoom:l;var p=u.zoom(i*u.scale(l));return isNaN(p)?1/0:p},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(J(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(W(i),l)},layerPointToLatLng:function(i){var l=W(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(J(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(J(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(de(i))},distance:function(i,l){return this.options.crs.distance(J(i),J(l))},containerPointToLayerPoint:function(i){return W(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return W(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(W(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(J(i)))},mouseEventToContainerPoint:function(i){return vm(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=fm(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ye.any3d,Oe(i,"leaflet-container"+(ye.touch?" leaflet-touch":"")+(ye.retina?" leaflet-retina":"")+(ye.ielt9?" leaflet-oldie":"")+(ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Zo(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),xt(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Oe(i.markerPane,"leaflet-zoom-hide"),Oe(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,u){xt(this._mapPane,new z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,u)._move(i,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,u,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),p?u&&u.pinch&&this.fire("zoom",u):((v||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){xt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[h(this._container)]=this;var l=i?Xe:Ee;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ye.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=A(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var u=[],p,v=l==="mouseout"||l==="mouseover",E=i.target||i.srcElement,M=!1;E;){if(p=this._targets[h(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){M=!0;break}if(p&&p.listens(l,!0)&&(v&&!cd(E,i)||(u.push(p),v))||E===this._container)break;E=E.parentNode}return!u.length&&!M&&!v&&this.listens(l,!0)&&(u=[this]),u},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var u=i.type;u==="mousedown"&&rd(l),this._fireDOMEvent(i,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,u){if(i.type==="click"){var p=s({},i);p.type="preclick",this._fireDOMEvent(p,p.type,u)}var v=this._findEventTargets(i,l);if(u){for(var E=[],M=0;M<u.length;M++)u[M].listens(l,!0)&&E.push(u[M]);v=E.concat(v)}if(v.length){l==="contextmenu"&&Mt(i);var U=v[0],V={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Q=U.getLatLng&&(!U._radius||U._radius<=10);V.containerPoint=Q?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(i),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=Q?U.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(M=0;M<v.length;M++)if(v[M].fire(l,V,!0),V.originalEvent._stopped||v[M].options.bubblingMouseEvents===!1&&O(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return zi(this._mapPane)||new z(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var u=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var u=this.getSize()._divideBy(2);return this.project(i,l)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,u){var p=this._getNewPixelOrigin(u,l);return this.project(i,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(i,l,u){var p=this._getNewPixelOrigin(u,l);return oe([this.project(i.getSouthWest(),l)._subtract(p),this.project(i.getNorthWest(),l)._subtract(p),this.project(i.getSouthEast(),l)._subtract(p),this.project(i.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,u){if(!u)return i;var p=this.project(i,l),v=this.getSize().divideBy(2),E=new ne(p.subtract(v),p.add(v)),M=this._getBoundsOffset(E,u,l);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?i:this.unproject(p.add(M),l)},_limitOffset:function(i,l){if(!l)return i;var u=this.getPixelBounds(),p=new ne(u.min.add(i),u.max.add(i));return i.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(i,l,u){var p=oe(this.project(l.getNorthEast(),u),this.project(l.getSouthWest(),u)),v=p.min.subtract(i.min),E=p.max.subtract(i.max),M=this._rebound(v.x,-E.x),U=this._rebound(v.y,-E.y);return new z(M,U)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),u=this.getMaxZoom(),p=ye.any3d?this.options.zoomSnap:1;return p&&(i=Math.round(i/p)*p),Math.max(l,Math.min(u,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var u=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,l),!0)},_createAnimProxy:function(){var i=this._proxy=He("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var u=Yu,p=this._proxy.style[u];Di(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){at(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();Di(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(i)._divideBy(1-1/p);return u.animate!==!0&&!this.getSize().contains(v)?!1:(A(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,u,p){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,Oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function cw(i,l){return new Be(i,l)}var Un=K.extend({options:{position:"topright"},initialize:function(i){_(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),u=this.getPosition(),p=i._controlCorners[u];return Oe(l,"leaflet-control"),u.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(at(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Xo=function(i){return new Un(i)};Be.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",u=this._controlContainer=He("div",l+"control-container",this._container);function p(v,E){var M=l+v+" "+l+E;i[v+E]=He("div",M,u)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)at(this._controlCorners[i]);at(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var xm=Un.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,u,p){return u<p?-1:p<u?1:0}},initialize:function(i,l,u){_(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in i)this._addLayer(i[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Un.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=He("div",i),u=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Qo(l),ld(l);var p=this._section=He("section",i+"-list");u&&(this._map.on("click",this.collapse,this),Ee(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=He("a",i+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ee(v,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Mt(E),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=He("div",i+"-base",p),this._separator=He("div",i+"-separator",p),this._overlaysList=He("div",i+"-overlays",p),l.appendChild(p)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,u){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:u}),this.options.sortLayers&&this._layers.sort(c(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ol(this._baseLayersList),Ol(this._overlaysList),this._layerControlInputs=[];var i,l,u,p,v=0;for(u=0;u<this._layers.length;u++)p=this._layers[u],this._addItem(p),l=l||p.overlay,i=i||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(i=i&&v>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(h(i.target)),u=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;u&&this._map.fire(u,l)},_createRadioElement:function(i,l){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=u,p.firstChild},_addItem:function(i){var l=document.createElement("label"),u=this._map.hasLayer(i.layer),p;i.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=u):p=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(p),p.layerId=h(i.layer),Ee(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+i.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(v);var M=i.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,u,p=[],v=[];this._handlingClick=!0;for(var E=i.length-1;E>=0;E--)l=i[E],u=this._getLayer(l.layerId).layer,l.checked?p.push(u):l.checked||v.push(u);for(E=0;E<v.length;E++)this._map.hasLayer(v[E])&&this._map.removeLayer(v[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,u,p=this._map.getZoom(),v=i.length-1;v>=0;v--)l=i[v],u=this._getLayer(l.layerId).layer,l.disabled=u.options.minZoom!==void 0&&p<u.options.minZoom||u.options.maxZoom!==void 0&&p>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Ee(i,"click",Mt),this.expand();var l=this;setTimeout(function(){Xe(i,"click",Mt),l._preventClick=!1})}}),uw=function(i,l,u){return new xm(i,l,u)},ud=Un.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",u=He("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",u,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,u,p,v){var E=He("a",u,p);return E.innerHTML=i,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Qo(E),Ee(E,"click",$i),Ee(E,"click",v,this),Ee(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";mt(this._zoomInButton,l),mt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Oe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Oe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Be.mergeOptions({zoomControl:!0}),Be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ud,this.addControl(this.zoomControl))});var dw=function(i){return new ud(i)},wm=Un.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",u=He("div",l),p=this.options;return this._addScales(p,l+"-line",u),i.on(p.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),u},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,u){i.metric&&(this._mScale=He("div",l,u)),i.imperial&&(this._iScale=He("div",l,u))},_update:function(){var i=this._map,l=i.getSize().y/2,u=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(u)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),u=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,u,l/i)},_updateImperial:function(i){var l=i*3.2808399,u,p,v;l>5280?(u=l/5280,p=this._getRoundNum(u),this._updateScale(this._iScale,p+" mi",p/u)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(i,l,u){i.style.width=Math.round(this.options.maxWidth*u)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),u=i/l;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,l*u}}),hw=function(i){return new wm(i)},fw='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',dd=Un.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ye.inlineSvg?fw+" ":"")+"Leaflet</a>"},initialize:function(i){_(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=He("div","leaflet-control-attribution"),Qo(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var u=[];this.options.prefix&&u.push(this.options.prefix),i.length&&u.push(i.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});Be.mergeOptions({attributionControl:!0}),Be.addInitHook(function(){this.options.attributionControl&&new dd().addTo(this)});var pw=function(i){return new dd(i)};Un.Layers=xm,Un.Zoom=ud,Un.Scale=wm,Un.Attribution=dd,Xo.layers=uw,Xo.zoom=dw,Xo.scale=hw,Xo.attribution=pw;var lr=K.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});lr.addTo=function(i,l){return i.addHandler(l,this),this};var mw={Events:Z},bm=ye.touch?"touchstart mousedown":"mousedown",qr=Y.extend({options:{clickTolerance:3},initialize:function(i,l,u,p){_(this,p),this._element=i,this._dragStartTarget=l||i,this._preventOutline=u},enable:function(){this._enabled||(Ee(this._dragStartTarget,bm,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qr._dragging===this&&this.finishDrag(!0),Xe(this._dragStartTarget,bm,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Ju(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){qr._dragging===this&&this.finishDrag();return}if(!(qr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(qr._dragging=this,this._preventOutline&&rd(this._element),ed(),Ko(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,u=pm(this._element);this._startPoint=new z(l.clientX,l.clientY),this._startPos=zi(this._element),this._parentScale=id(u);var p=i.type==="mousedown";Ee(document,p?"mousemove":"touchmove",this._onMove,this),Ee(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,u=new z(l.clientX,l.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Mt(i),this._moved||(this.fire("dragstart"),this._moved=!0,Oe(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),xt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xe(document,"mousemove touchmove",this._onMove,this),Xe(document,"mouseup touchend touchcancel",this._onUp,this),td(),Yo();var l=this._moved&&this._moving;this._moving=!1,qr._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function jm(i,l,u){var p,v=[1,4,2,8],E,M,U,V,Q,ae,ke,Re;for(E=0,ae=i.length;E<ae;E++)i[E]._code=Fi(i[E],l);for(U=0;U<4;U++){for(ke=v[U],p=[],E=0,ae=i.length,M=ae-1;E<ae;M=E++)V=i[E],Q=i[M],V._code&ke?Q._code&ke||(Re=Al(Q,V,ke,l,u),Re._code=Fi(Re,l),p.push(Re)):(Q._code&ke&&(Re=Al(Q,V,ke,l,u),Re._code=Fi(Re,l),p.push(Re)),p.push(V));i=p}return i}function km(i,l){var u,p,v,E,M,U,V,Q,ae;if(!i||i.length===0)throw new Error("latlngs not passed");Tn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ke=J([0,0]),Re=de(i),Qt=Re.getNorthWest().distanceTo(Re.getSouthWest())*Re.getNorthEast().distanceTo(Re.getNorthWest());Qt<1700&&(ke=hd(i));var Ot=i.length,Ln=[];for(u=0;u<Ot;u++){var an=J(i[u]);Ln.push(l.project(J([an.lat-ke.lat,an.lng-ke.lng])))}for(U=V=Q=0,u=0,p=Ot-1;u<Ot;p=u++)v=Ln[u],E=Ln[p],M=v.y*E.x-E.y*v.x,V+=(v.x+E.x)*M,Q+=(v.y+E.y)*M,U+=M*3;U===0?ae=Ln[0]:ae=[V/U,Q/U];var As=l.unproject(W(ae));return J([As.lat+ke.lat,As.lng+ke.lng])}function hd(i){for(var l=0,u=0,p=0,v=0;v<i.length;v++){var E=J(i[v]);l+=E.lat,u+=E.lng,p++}return J([l/p,u/p])}var gw={__proto__:null,clipPolygon:jm,polygonCenter:km,centroid:hd};function Sm(i,l){if(!l||!i.length)return i.slice();var u=l*l;return i=_w(i,u),i=yw(i,u),i}function Cm(i,l,u){return Math.sqrt(ea(i,l,u,!0))}function vw(i,l,u){return ea(i,l,u)}function yw(i,l){var u=i.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(u);v[0]=v[u-1]=1,fd(i,v,l,0,u-1);var E,M=[];for(E=0;E<u;E++)v[E]&&M.push(i[E]);return M}function fd(i,l,u,p,v){var E=0,M,U,V;for(U=p+1;U<=v-1;U++)V=ea(i[U],i[p],i[v],!0),V>E&&(M=U,E=V);E>u&&(l[M]=1,fd(i,l,u,p,M),fd(i,l,u,M,v))}function _w(i,l){for(var u=[i[0]],p=1,v=0,E=i.length;p<E;p++)xw(i[p],i[v])>l&&(u.push(i[p]),v=p);return v<E-1&&u.push(i[E-1]),u}var Pm;function Em(i,l,u,p,v){var E=p?Pm:Fi(i,u),M=Fi(l,u),U,V,Q;for(Pm=M;;){if(!(E|M))return[i,l];if(E&M)return!1;U=E||M,V=Al(i,l,U,u,v),Q=Fi(V,u),U===E?(i=V,E=Q):(l=V,M=Q)}}function Al(i,l,u,p,v){var E=l.x-i.x,M=l.y-i.y,U=p.min,V=p.max,Q,ae;return u&8?(Q=i.x+E*(V.y-i.y)/M,ae=V.y):u&4?(Q=i.x+E*(U.y-i.y)/M,ae=U.y):u&2?(Q=V.x,ae=i.y+M*(V.x-i.x)/E):u&1&&(Q=U.x,ae=i.y+M*(U.x-i.x)/E),new z(Q,ae,v)}function Fi(i,l){var u=0;return i.x<l.min.x?u|=1:i.x>l.max.x&&(u|=2),i.y<l.min.y?u|=4:i.y>l.max.y&&(u|=8),u}function xw(i,l){var u=l.x-i.x,p=l.y-i.y;return u*u+p*p}function ea(i,l,u,p){var v=l.x,E=l.y,M=u.x-v,U=u.y-E,V=M*M+U*U,Q;return V>0&&(Q=((i.x-v)*M+(i.y-E)*U)/V,Q>1?(v=u.x,E=u.y):Q>0&&(v+=M*Q,E+=U*Q)),M=i.x-v,U=i.y-E,p?M*M+U*U:new z(v,E)}function Tn(i){return!k(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Tm(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Tn(i)}function Lm(i,l){var u,p,v,E,M,U,V,Q;if(!i||i.length===0)throw new Error("latlngs not passed");Tn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ae=J([0,0]),ke=de(i),Re=ke.getNorthWest().distanceTo(ke.getSouthWest())*ke.getNorthEast().distanceTo(ke.getNorthWest());Re<1700&&(ae=hd(i));var Qt=i.length,Ot=[];for(u=0;u<Qt;u++){var Ln=J(i[u]);Ot.push(l.project(J([Ln.lat-ae.lat,Ln.lng-ae.lng])))}for(u=0,p=0;u<Qt-1;u++)p+=Ot[u].distanceTo(Ot[u+1])/2;if(p===0)Q=Ot[0];else for(u=0,E=0;u<Qt-1;u++)if(M=Ot[u],U=Ot[u+1],v=M.distanceTo(U),E+=v,E>p){V=(E-p)/v,Q=[U.x-V*(U.x-M.x),U.y-V*(U.y-M.y)];break}var an=l.unproject(W(Q));return J([an.lat+ae.lat,an.lng+ae.lng])}var ww={__proto__:null,simplify:Sm,pointToSegmentDistance:Cm,closestPointOnSegment:vw,clipSegment:Em,_getEdgeIntersection:Al,_getBitCode:Fi,_sqClosestPointOnSegment:ea,isFlat:Tn,_flat:Tm,polylineCenter:Lm},pd={project:function(i){return new z(i.lng,i.lat)},unproject:function(i){return new ve(i.y,i.x)},bounds:new ne([-180,-90],[180,90])},md={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ne([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,u=this.R,p=i.lat*l,v=this.R_MINOR/u,E=Math.sqrt(1-v*v),M=E*Math.sin(p),U=Math.tan(Math.PI/4-p/2)/Math.pow((1-M)/(1+M),E/2);return p=-u*Math.log(Math.max(U,1e-10)),new z(i.lng*l*u,p)},unproject:function(i){for(var l=180/Math.PI,u=this.R,p=this.R_MINOR/u,v=Math.sqrt(1-p*p),E=Math.exp(-i.y/u),M=Math.PI/2-2*Math.atan(E),U=0,V=.1,Q;U<15&&Math.abs(V)>1e-7;U++)Q=v*Math.sin(M),Q=Math.pow((1-Q)/(1+Q),v/2),V=Math.PI/2-2*Math.atan(E*Q)-M,M+=V;return new ve(M*l,i.x*l/u)}},bw={__proto__:null,LonLat:pd,Mercator:md,SphericalMercator:xe},jw=s({},Se,{code:"EPSG:3395",projection:md,transformation:function(){var i=.5/(Math.PI*md.R);return Pe(i,.5,-i,.5)}()}),Om=s({},Se,{code:"EPSG:4326",projection:pd,transformation:Pe(1/180,1,-1/180,.5)}),kw=s({},fe,{projection:pd,transformation:Pe(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var u=l.lng-i.lng,p=l.lat-i.lat;return Math.sqrt(u*u+p*p)},infinite:!0});fe.Earth=Se,fe.EPSG3395=jw,fe.EPSG3857=Fe,fe.EPSG900913=Ct,fe.EPSG4326=Om,fe.Simple=kw;var Wn=Y.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[h(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[h(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var u=this.getEvents();l.on(u,this),this.once("remove",function(){l.off(u,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Be.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=h(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return h(i)in this._layers},eachLayer:function(i,l){for(var u in this._layers)i.call(l,this._layers[u]);return this},_addLayers:function(i){i=i?k(i)?i:[i]:[];for(var l=0,u=i.length;l<u;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[h(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=h(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,u=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;i=v.minZoom===void 0?i:Math.min(i,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Os=Wn.extend({initialize:function(i,l){_(this,l),this._layers={};var u,p;if(i)for(u=0,p=i.length;u<p;u++)this.addLayer(i[u])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),u,p;for(u in this._layers)p=this._layers[u],p[i]&&p[i].apply(p,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var u in this._layers)i.call(l,this._layers[u]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return h(i)}}),Sw=function(i,l){return new Os(i,l)},br=Os.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Os.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Os.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new ge;for(var l in this._layers){var u=this._layers[l];i.extend(u.getBounds?u.getBounds():u.getLatLng())}return i}}),Cw=function(i,l){return new br(i,l)},Ns=K.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){_(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var u=this._getIconUrl(i);if(!u){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(u,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(i,l){var u=this.options,p=u[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=W(p),E=W(l==="shadow"&&u.shadowAnchor||u.iconAnchor||v&&v.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(u.className||""),E&&(i.style.marginLeft=-E.x+"px",i.style.marginTop=-E.y+"px"),v&&(i.style.width=v.x+"px",i.style.height=v.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return ye.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Pw(i){return new Ns(i)}var ta=Ns.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof ta.imagePath!="string"&&(ta.imagePath=this._detectIconPath()),(this.options.imagePath||ta.imagePath)+Ns.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(u,p,v){var E=p.exec(u);return E&&E[v]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=He("div","leaflet-default-icon-path",document.body),l=Zo(i,"background-image")||Zo(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Nm=lr.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new qr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Oe(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,u=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,E=zi(l._icon),M=u.getPixelBounds(),U=u.getPixelOrigin(),V=oe(M.min._subtract(U).add(v),M.max._subtract(U).subtract(v));if(!V.contains(E)){var Q=W((Math.max(V.max.x,E.x)-V.max.x)/(M.max.x-V.max.x)-(Math.min(V.min.x,E.x)-V.min.x)/(M.min.x-V.min.x),(Math.max(V.max.y,E.y)-V.max.y)/(M.max.y-V.max.y)-(Math.min(V.min.y,E.y)-V.min.y)/(M.min.y-V.min.y)).multiplyBy(p);u.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),xt(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=A(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=A(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,u=l._shadow,p=zi(l._icon),v=l._map.layerPointToLatLng(p);u&&xt(u,p),l._latlng=v,i.latlng=v,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Dl=Wn.extend({options:{icon:new ta,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){_(this,l),this._latlng=J(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=J(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=i.icon.createIcon(this._icon),p=!1;u!==this._icon&&(this._icon&&this._removeIcon(),p=!0,i.title&&(u.title=i.title),u.tagName==="IMG"&&(u.alt=i.alt||"")),Oe(u,l),i.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(u,"focus",this._panOnFocus,this);var v=i.icon.createShadow(this._shadow),E=!1;v!==this._shadow&&(this._removeShadow(),E=!0),v&&(Oe(v,l),v.alt=""),this._shadow=v,i.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&E&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(this._icon,"focus",this._panOnFocus,this),at(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&at(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&xt(this._icon,i),this._shadow&&xt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Nm)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Nm(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&En(this._icon,i),this._shadow&&En(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,u=l.iconSize?W(l.iconSize):W(0,0),p=l.iconAnchor?W(l.iconAnchor):W(0,0);i.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:u.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ew(i,l){return new Dl(i,l)}var Gr=Wn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return _(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),zl=Gr.extend({options:{fill:!0,radius:10},initialize:function(i,l){_(this,l),this._latlng=J(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=J(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return Gr.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,u=this._clickTolerance(),p=[i+u,l+u];this._pxBounds=new ne(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Tw(i,l){return new zl(i,l)}var gd=zl.extend({initialize:function(i,l,u){if(typeof l=="number"&&(l=s({},u,{radius:l})),_(this,l),this._latlng=J(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new ge(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Gr.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,u=this._map,p=u.options.crs;if(p.distance===Se.distance){var v=Math.PI/180,E=this._mRadius/Se.R/v,M=u.project([l+E,i]),U=u.project([l-E,i]),V=M.add(U).divideBy(2),Q=u.unproject(V).lat,ae=Math.acos((Math.cos(E*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(ae)||ae===0)&&(ae=E/Math.cos(Math.PI/180*l)),this._point=V.subtract(u.getPixelOrigin()),this._radius=isNaN(ae)?0:V.x-u.project([Q,i-ae]).x,this._radiusY=V.y-M.y}else{var ke=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(ke).x}this._updateBounds()}});function Lw(i,l,u){return new gd(i,l,u)}var jr=Gr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){_(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,u=null,p=ea,v,E,M=0,U=this._parts.length;M<U;M++)for(var V=this._parts[M],Q=1,ae=V.length;Q<ae;Q++){v=V[Q-1],E=V[Q];var ke=p(i,v,E,!0);ke<l&&(l=ke,u=p(i,v,E))}return u&&(u.distance=Math.sqrt(l)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lm(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=J(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new ge,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],u=Tn(i),p=0,v=i.length;p<v;p++)u?(l[p]=J(i[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(i[p]);return l},_project:function(){var i=new ne;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new z(i,i);this._rawPxBounds&&(this._pxBounds=new ne([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,u){var p=i[0]instanceof ve,v=i.length,E,M;if(p){for(M=[],E=0;E<v;E++)M[E]=this._map.latLngToLayerPoint(i[E]),u.extend(M[E]);l.push(M)}else for(E=0;E<v;E++)this._projectLatlngs(i[E],l,u)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,u,p,v,E,M,U,V;for(u=0,v=0,E=this._rings.length;u<E;u++)for(V=this._rings[u],p=0,M=V.length;p<M-1;p++)U=Em(V[p],V[p+1],i,p,!0),U&&(l[v]=l[v]||[],l[v].push(U[0]),(U[1]!==V[p+1]||p===M-2)&&(l[v].push(U[1]),v++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,u=0,p=i.length;u<p;u++)i[u]=Sm(i[u],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var u,p,v,E,M,U,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(u=0,E=this._parts.length;u<E;u++)for(U=this._parts[u],p=0,M=U.length,v=M-1;p<M;v=p++)if(!(!l&&p===0)&&Cm(i,U[v],U[p])<=V)return!0;return!1}});function Ow(i,l){return new jr(i,l)}jr._flat=Tm;var Rs=jr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return km(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=jr.prototype._convertLatLngs.call(this,i),u=l.length;return u>=2&&l[0]instanceof ve&&l[0].equals(l[u-1])&&l.pop(),l},_setLatLngs:function(i){jr.prototype._setLatLngs.call(this,i),Tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Tn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,u=new z(l,l);if(i=new ne(i.min.subtract(u),i.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,E;p<v;p++)E=jm(this._rings[p],i,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,u,p,v,E,M,U,V,Q;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(E=0,V=this._parts.length;E<V;E++)for(u=this._parts[E],M=0,Q=u.length,U=Q-1;M<Q;U=M++)p=u[M],v=u[U],p.y>i.y!=v.y>i.y&&i.x<(v.x-p.x)*(i.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||jr.prototype._containsPoint.call(this,i,!0)}});function Nw(i,l){return new Rs(i,l)}var kr=br.extend({initialize:function(i,l){_(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=k(i)?i:i.features,u,p,v;if(l){for(u=0,p=l.length;u<p;u++)v=l[u],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var E=this.options;if(E.filter&&!E.filter(i))return this;var M=Bl(i,E);return M?(M.feature=Ul(i),M.defaultOptions=M.options,this.resetStyle(M),E.onEachFeature&&E.onEachFeature(i,M),this.addLayer(M)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function Bl(i,l){var u=i.type==="Feature"?i.geometry:i,p=u?u.coordinates:null,v=[],E=l&&l.pointToLayer,M=l&&l.coordsToLatLng||vd,U,V,Q,ae;if(!p&&!u)return null;switch(u.type){case"Point":return U=M(p),Rm(E,i,U,l);case"MultiPoint":for(Q=0,ae=p.length;Q<ae;Q++)U=M(p[Q]),v.push(Rm(E,i,U,l));return new br(v);case"LineString":case"MultiLineString":return V=$l(p,u.type==="LineString"?0:1,M),new jr(V,l);case"Polygon":case"MultiPolygon":return V=$l(p,u.type==="Polygon"?1:2,M),new Rs(V,l);case"GeometryCollection":for(Q=0,ae=u.geometries.length;Q<ae;Q++){var ke=Bl({geometry:u.geometries[Q],type:"Feature",properties:i.properties},l);ke&&v.push(ke)}return new br(v);case"FeatureCollection":for(Q=0,ae=u.features.length;Q<ae;Q++){var Re=Bl(u.features[Q],l);Re&&v.push(Re)}return new br(v);default:throw new Error("Invalid GeoJSON object.")}}function Rm(i,l,u,p){return i?i(l,u):new Dl(u,p&&p.markersInheritOptions&&p)}function vd(i){return new ve(i[1],i[0],i[2])}function $l(i,l,u){for(var p=[],v=0,E=i.length,M;v<E;v++)M=l?$l(i[v],l-1,u):(u||vd)(i[v]),p.push(M);return p}function yd(i,l){return i=J(i),i.alt!==void 0?[x(i.lng,l),x(i.lat,l),x(i.alt,l)]:[x(i.lng,l),x(i.lat,l)]}function Fl(i,l,u,p){for(var v=[],E=0,M=i.length;E<M;E++)v.push(l?Fl(i[E],Tn(i[E])?0:l-1,u,p):yd(i[E],p));return!l&&u&&v.length>0&&v.push(v[0].slice()),v}function Is(i,l){return i.feature?s({},i.feature,{geometry:l}):Ul(l)}function Ul(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var _d={toGeoJSON:function(i){return Is(this,{type:"Point",coordinates:yd(this.getLatLng(),i)})}};Dl.include(_d),gd.include(_d),zl.include(_d),jr.include({toGeoJSON:function(i){var l=!Tn(this._latlngs),u=Fl(this._latlngs,l?1:0,!1,i);return Is(this,{type:(l?"Multi":"")+"LineString",coordinates:u})}}),Rs.include({toGeoJSON:function(i){var l=!Tn(this._latlngs),u=l&&!Tn(this._latlngs[0]),p=Fl(this._latlngs,u?2:l?1:0,!0,i);return l||(p=[p]),Is(this,{type:(u?"Multi":"")+"Polygon",coordinates:p})}}),Os.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(u){l.push(u.toGeoJSON(i).geometry.coordinates)}),Is(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var u=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var E=v.toGeoJSON(i);if(u)p.push(E.geometry);else{var M=Ul(E);M.type==="FeatureCollection"?p.push.apply(p,M.features):p.push(M)}}}),u?Is(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Im(i,l){return new kr(i,l)}var Rw=Im,Wl=Wn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,u){this._url=i,this._bounds=de(l),_(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){at(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ts(this._image),this},bringToBack:function(){return this._map&&Ls(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=de(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:He("img");if(Oe(l,"leaflet-image-layer"),this._zoomAnimated&&Oe(l,"leaflet-zoom-animated"),this.options.className&&Oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=c(this.fire,this,"load"),l.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Di(this._image,u,l)},_reset:function(){var i=this._image,l=new ne(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=l.getSize();xt(i,l.min),i.style.width=u.x+"px",i.style.height=u.y+"px"},_updateOpacity:function(){En(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Iw=function(i,l,u){return new Wl(i,l,u)},Mm=Wl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:He("video");if(Oe(l,"leaflet-image-layer"),this._zoomAnimated&&Oe(l,"leaflet-zoom-animated"),this.options.className&&Oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=c(this.fire,this,"load"),i){for(var u=l.getElementsByTagName("source"),p=[],v=0;v<u.length;v++)p.push(u[v].src);this._url=u.length>0?p:[l.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var M=He("source");M.src=this._url[E],l.appendChild(M)}}});function Mw(i,l,u){return new Mm(i,l,u)}var Am=Wl.extend({_initImage:function(){var i=this._image=this._url;Oe(i,"leaflet-image-layer"),this._zoomAnimated&&Oe(i,"leaflet-zoom-animated"),this.options.className&&Oe(i,this.options.className),i.onselectstart=g,i.onmousemove=g}});function Aw(i,l,u){return new Am(i,l,u)}var cr=Wn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof ve||k(i))?(this._latlng=J(i),_(this,l)):(_(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&En(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&En(this._container,1),this.bringToFront(),this.options.interactive&&(Oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(En(this._container,0),this._removeTimeout=setTimeout(c(at,void 0,this._container),200)):at(this._container),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=J(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ts(this._container),this},bringToBack:function(){return this._map&&Ls(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof br){l=null;var u=this._source._layers;for(var p in u)if(u[p]._map){l=u[p];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=W(this.options.offset),u=this._getAnchor();this._zoomAnimated?xt(this._container,i.add(u)):l=l.add(i).add(u);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Be.include({_initOverlay:function(i,l,u,p){var v=l;return v instanceof i||(v=new i(p).setContent(l)),u&&v.setLatLng(u),v}}),Wn.include({_initOverlay:function(i,l,u,p){var v=u;return v instanceof i?(_(v,p),v._source=this):(v=l&&!p?l:new i(p,this),v.setContent(u)),v}});var Hl=cr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,cr.prototype.openOn.call(this,i)},onAdd:function(i){cr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gr||this._source.on("preclick",Bi))},onRemove:function(i){cr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gr||this._source.off("preclick",Bi))},getEvents:function(){var i=cr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=He("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=He("div",i+"-content-wrapper",l);if(this._contentNode=He("div",i+"-content",u),Qo(l),ld(this._contentNode),Ee(l,"contextmenu",Bi),this._tipContainer=He("div",i+"-tip-container",l),this._tip=He("div",i+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=He("a",i+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(p,"click",function(v){Mt(v),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var u=i.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),l.width=u+1+"px",l.whiteSpace="",l.height="";var p=i.offsetHeight,v=this.options.maxHeight,E="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",Oe(i,E)):mt(i,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),u=this._getAnchor();xt(this._container,l.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(Zo(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+l,p=this._containerWidth,v=new z(this._containerLeft,-u-this._containerBottom);v._add(zi(this._container));var E=i.layerPointToContainerPoint(v),M=W(this.options.autoPanPadding),U=W(this.options.autoPanPaddingTopLeft||M),V=W(this.options.autoPanPaddingBottomRight||M),Q=i.getSize(),ae=0,ke=0;E.x+p+V.x>Q.x&&(ae=E.x+p-Q.x+V.x),E.x-ae-U.x<0&&(ae=E.x-U.x),E.y+u+V.y>Q.y&&(ke=E.y+u-Q.y+V.y),E.y-ke-U.y<0&&(ke=E.y-U.y),(ae||ke)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ae,ke]))}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Dw=function(i,l){return new Hl(i,l)};Be.mergeOptions({closePopupOnClick:!0}),Be.include({openPopup:function(i,l,u){return this._initOverlay(Hl,i,l,u).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Wn.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Hl,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof br||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){$i(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof Gr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Vl=cr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){cr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){cr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=cr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=He("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,u,p=this._map,v=this._container,E=p.latLngToContainerPoint(p.getCenter()),M=p.layerPointToContainerPoint(i),U=this.options.direction,V=v.offsetWidth,Q=v.offsetHeight,ae=W(this.options.offset),ke=this._getAnchor();U==="top"?(l=V/2,u=Q):U==="bottom"?(l=V/2,u=0):U==="center"?(l=V/2,u=Q/2):U==="right"?(l=0,u=Q/2):U==="left"?(l=V,u=Q/2):M.x<E.x?(U="right",l=0,u=Q/2):(U="left",l=V+(ae.x+ke.x)*2,u=Q/2),i=i.subtract(W(l,u,!0)).add(ae).add(ke),mt(v,"leaflet-tooltip-right"),mt(v,"leaflet-tooltip-left"),mt(v,"leaflet-tooltip-top"),mt(v,"leaflet-tooltip-bottom"),Oe(v,"leaflet-tooltip-"+U),xt(v,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&En(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),zw=function(i,l){return new Vl(i,l)};Be.include({openTooltip:function(i,l,u){return this._initOverlay(Vl,i,l,u).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Wn.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Vl,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[l](u),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof br||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(Ee(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Ee(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,u,p;this._tooltip.options.sticky&&i.originalEvent&&(u=this._map.mouseEventToContainerPoint(i.originalEvent),p=this._map.containerPointToLayerPoint(u),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Dm=Ns.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Ol(l),l.appendChild(u.html)):l.innerHTML=u.html!==!1?u.html:"",u.bgPos){var p=W(u.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Bw(i){return new Dm(i)}Ns.Default=ta;var na=Wn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){_(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),at(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ts(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ls(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof z?i:new z(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,u=-i(-1/0,1/0),p=0,v=l.length,E;p<v;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(u=i(u,+E));isFinite(u)&&(this.options.zIndex=u+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ye.ielt9){En(this._container,this.options.opacity);var i=+new Date,l=!1,u=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var E=Math.min(1,(i-v.loaded)/200);En(v.el,E),E<1?l=!0:(v.active?u=!0:this._onOpaqueTile(v),v.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),l&&(G(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=He("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===i?(this._levels[u].el.style.zIndex=l-Math.abs(i-u),this._onUpdateLevel(u)):(at(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var p=this._levels[i],v=this._map;return p||(p=this._levels[i]={},p.el=He("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),i).round(),p.zoom=i,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var i,l,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)at(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,u,p){var v=Math.floor(i/2),E=Math.floor(l/2),M=u-1,U=new z(+v,+E);U.z=+M;var V=this._tileCoordsToKey(U),Q=this._tiles[V];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),M>p?this._retainParent(v,E,M,p):!1)},_retainChildren:function(i,l,u,p){for(var v=2*i;v<2*i+2;v++)for(var E=2*l;E<2*l+2;E++){var M=new z(v,E);M.z=u+1;var U=this._tileCoordsToKey(M),V=this._tiles[U];if(V&&V.active){V.retain=!0;continue}else V&&V.loaded&&(V.retain=!0);u+1<p&&this._retainChildren(v,E,u+1,p)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,u,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var E=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||E)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(i),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var u in this._levels)this._setZoomTransform(this._levels[u],i,l)},_setZoomTransform:function(i,l,u){var p=this._map.getZoomScale(u,i.zoom),v=i.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,u)).round();ye.any3d?Di(i.el,v,p):xt(i.el,v)},_resetGrid:function(){var i=this._map,l=i.options.crs,u=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],p).x/u.x),Math.ceil(i.project([0,l.wrapLng[1]],p).x/u.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],p).y/u.x),Math.ceil(i.project([l.wrapLat[1],0],p).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,u=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(u,this._tileZoom),v=l.project(i,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new ne(v.subtract(E),v.add(E))},_update:function(i){var l=this._map;if(l){var u=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(i),v=this._pxBoundsToTileRange(p),E=v.getCenter(),M=[],U=this.options.keepBuffer,V=new ne(v.getBottomLeft().subtract([U,-U]),v.getTopRight().add([U,-U]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ae=this._tiles[Q].coords;(ae.z!==this._tileZoom||!V.contains(new z(ae.x,ae.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(i,u);return}for(var ke=v.min.y;ke<=v.max.y;ke++)for(var Re=v.min.x;Re<=v.max.x;Re++){var Qt=new z(Re,ke);if(Qt.z=this._tileZoom,!!this._isValidTile(Qt)){var Ot=this._tiles[this._tileCoordsToKey(Qt)];Ot?Ot.current=!0:M.push(Qt)}}if(M.sort(function(an,As){return an.distanceTo(E)-As.distanceTo(E)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ln=document.createDocumentFragment();for(Re=0;Re<M.length;Re++)this._addTile(M[Re],Ln);this._level.el.appendChild(Ln)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var u=this._globalTileRange;if(!l.wrapLng&&(i.x<u.min.x||i.x>u.max.x)||!l.wrapLat&&(i.y<u.min.y||i.y>u.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(i);return de(this.options.bounds).overlaps(p)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,u=this.getTileSize(),p=i.scaleBy(u),v=p.add(u),E=l.unproject(p,i.z),M=l.unproject(v,i.z);return[E,M]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),u=new ge(l[0],l[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),u=new z(+l[0],+l[1]);return u.z=+l[2],u},_removeTile:function(i){var l=this._tiles[i];l&&(at(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Oe(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=g,i.onmousemove=g,ye.ielt9&&this.options.opacity<1&&En(i,this.options.opacity)},_addTile:function(i,l){var u=this._getTilePos(i),p=this._tileCoordsToKey(i),v=this.createTile(this._wrapCoords(i),c(this._tileReady,this,i));this._initTile(v),this.createTile.length<2&&A(c(this._tileReady,this,i,null,v)),xt(v,u),this._tiles[p]={el:v,coords:i,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:i})},_tileReady:function(i,l,u){l&&this.fire("tileerror",{error:l,tile:u,coords:i});var p=this._tileCoordsToKey(i);u=this._tiles[p],u&&(u.loaded=+new Date,this._map._fadeAnimated?(En(u.el,0),G(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),l||(Oe(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ye.ielt9||!this._map._fadeAnimated?A(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new z(this._wrapX?m(i.x,this._wrapX):i.x,this._wrapY?m(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new ne(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function $w(i){return new na(i)}var Ms=na.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=_(this,l),l.detectRetina&&ye.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var u=document.createElement("img");return Ee(u,"load",c(this._tileOnLoad,this,l,u)),Ee(u,"error",c(this._tileOnError,this,l,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(i),u},getTileUrl:function(i){var l={r:ye.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=u),l["-y"]=u}return j(this._url,s(l,this.options))},_tileOnLoad:function(i,l){ye.ielt9?setTimeout(c(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,u){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),i(u,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,u=this.options.zoomReverse,p=this.options.zoomOffset;return u&&(i=l-i),i+p},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=g,l.onerror=g,!l.complete)){l.src=D;var u=this._tiles[i].coords;at(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:u})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",D),na.prototype._removeTile.call(this,i)},_tileReady:function(i,l,u){if(!(!this._map||u&&u.getAttribute("src")===D))return na.prototype._tileReady.call(this,i,l,u)}});function zm(i,l){return new Ms(i,l)}var Bm=Ms.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var u=s({},this.defaultWmsParams);for(var p in l)p in this.options||(u[p]=l[p]);l=_(this,l);var v=l.detectRetina&&ye.retina?2:1,E=this.getTileSize();u.width=E.x*v,u.height=E.y*v,this.wmsParams=u},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Ms.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),u=this._crs,p=oe(u.project(l[0]),u.project(l[1])),v=p.min,E=p.max,M=(this._wmsVersion>=1.3&&this._crs===Om?[v.y,v.x,E.y,E.x]:[v.x,v.y,E.x,E.y]).join(","),U=Ms.prototype.getTileUrl.call(this,i);return U+S(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(i,l){return s(this.wmsParams,i),l||this.redraw(),this}});function Fw(i,l){return new Bm(i,l)}Ms.WMS=Bm,zm.wms=Fw;var Sr=Wn.extend({options:{padding:.1},initialize:function(i){_(this,i),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var u=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),E=p.multiplyBy(-u).add(v).subtract(this._map._getNewPixelOrigin(i,l));ye.any3d?Di(this._container,E,u):xt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),u=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new ne(u,u.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$m=Sr.extend({options:{tolerance:0},getEvents:function(){var i=Sr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Sr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Ee(i,"mousemove",this._onMouseMove,this),Ee(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,at(this._container),Xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Sr.prototype._update.call(this);var i=this._bounds,l=this._container,u=i.getSize(),p=ye.retina?2:1;xt(l,i.min),l.width=p*u.x,l.height=p*u.y,l.style.width=u.x+"px",l.style.height=u.y+"px",ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Sr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[h(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,u=l.next,p=l.prev;u?u.prev=p:this._drawLast=p,p?p.next=u:this._drawFirst=u,delete i._order,delete this._layers[h(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),u=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;u.push(p)}i.options._dashArray=u}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||A(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ne,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var u=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)i=p.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var u,p,v,E,M=i._parts,U=M.length,V=this._ctx;if(U){for(V.beginPath(),u=0;u<U;u++){for(p=0,v=M[u].length;p<v;p++)E=M[u][p],V[p?"lineTo":"moveTo"](E.x,E.y);l&&V.closePath()}this._fillStroke(V,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,u=this._ctx,p=Math.max(Math.round(i._radius),1),v=(Math.max(Math.round(i._radiusY),1)||p)/p;v!==1&&(u.save(),u.scale(1,v)),u.beginPath(),u.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&u.restore(),this._fillStroke(u,i)}},_fillStroke:function(i,l){var u=l.options;u.fill&&(i.globalAlpha=u.fillOpacity,i.fillStyle=u.fillColor||u.color,i.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=u.opacity,i.lineWidth=u.weight,i.strokeStyle=u.color,i.lineCap=u.lineCap,i.lineJoin=u.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),u,p,v=this._drawFirst;v;v=v.next)u=v.layer,u.options.interactive&&u._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(u))&&(p=u);this._fireEvent(p?[p]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(mt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var u,p,v=this._drawFirst;v;v=v.next)u=v.layer,u.options.interactive&&u._containsPoint(l)&&(p=u);p!==this._hoveredLayer&&(this._handleMouseOut(i),p&&(Oe(this._container,"leaflet-interactive"),this._fireEvent([p],i,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,u){this._map._fireDOMEvent(l,u||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var u=l.next,p=l.prev;if(u)u.prev=p;else return;p?p.next=u:u&&(this._drawFirst=u),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var u=l.next,p=l.prev;if(p)p.next=u;else return;u?u.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function Fm(i){return ye.canvas?new $m(i):null}var ra=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Uw={_initContainer:function(){this._container=He("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Sr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=ra("shape");Oe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=ra("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[h(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;at(l),i.removeInteractiveTarget(l),delete this._layers[h(i)]},_updateStyle:function(i){var l=i._stroke,u=i._fill,p=i.options,v=i._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=i._stroke=ra("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=k(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),i._stroke=null),p.fill?(u||(u=i._fill=ra("fill")),v.appendChild(u),u.color=p.fillColor||p.color,u.opacity=p.fillOpacity):u&&(v.removeChild(u),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),u=Math.round(i._radius),p=Math.round(i._radiusY||u);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+u+","+p+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){Ts(i._container)},_bringToBack:function(i){Ls(i._container)}},ql=ye.vml?ra:Ye,ia=Sr.extend({_initContainer:function(){this._container=ql("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ql("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){at(this._container),Xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Sr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,u.setAttribute("width",l.x),u.setAttribute("height",l.y)),xt(u,i.min),u.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=ql("path");i.options.className&&Oe(l,i.options.className),i.options.interactive&&Oe(l,"leaflet-interactive"),this._updateStyle(i),this._layers[h(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){at(i._path),i.removeInteractiveTarget(i._path),delete this._layers[h(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,u=i.options;l&&(u.stroke?(l.setAttribute("stroke",u.color),l.setAttribute("stroke-opacity",u.opacity),l.setAttribute("stroke-width",u.weight),l.setAttribute("stroke-linecap",u.lineCap),l.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?l.setAttribute("stroke-dasharray",u.dashArray):l.removeAttribute("stroke-dasharray"),u.dashOffset?l.setAttribute("stroke-dashoffset",u.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),u.fill?(l.setAttribute("fill",u.fillColor||u.color),l.setAttribute("fill-opacity",u.fillOpacity),l.setAttribute("fill-rule",u.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Ut(i._parts,l))},_updateCircle:function(i){var l=i._point,u=Math.max(Math.round(i._radius),1),p=Math.max(Math.round(i._radiusY),1)||u,v="a"+u+","+p+" 0 1,0 ",E=i._empty()?"M0 0":"M"+(l.x-u)+","+l.y+v+u*2+",0 "+v+-u*2+",0 ";this._setPath(i,E)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){Ts(i._path)},_bringToBack:function(i){Ls(i._path)}});ye.vml&&ia.include(Uw);function Um(i){return ye.svg||ye.vml?new ia(i):null}Be.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&Fm(i)||Um(i)}});var Wm=Rs.extend({initialize:function(i,l){Rs.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=de(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Ww(i,l){return new Wm(i,l)}ia.create=ql,ia.pointsToPath=Ut,kr.geometryToLayer=Bl,kr.coordsToLatLng=vd,kr.coordsToLatLngs=$l,kr.latLngToCoords=yd,kr.latLngsToCoords=Fl,kr.getFeature=Is,kr.asFeature=Ul,Be.mergeOptions({boxZoom:!0});var Hm=lr.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){at(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ko(),ed(),this._startPoint=this._map.mouseEventToContainerPoint(i),Ee(document,{contextmenu:$i,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=He("div","leaflet-zoom-box",this._container),Oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new ne(this._point,this._startPoint),u=l.getSize();xt(this._box,l.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(at(this._box),mt(this._container,"leaflet-crosshair")),Yo(),td(),Xe(document,{contextmenu:$i,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var l=new ge(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Be.addInitHook("addHandler","boxZoom",Hm),Be.mergeOptions({doubleClickZoom:!0});var Vm=lr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,u=l.getZoom(),p=l.options.zoomDelta,v=i.originalEvent.shiftKey?u-p:u+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(i.containerPoint,v)}});Be.addInitHook("addHandler","doubleClickZoom",Vm),Be.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var qm=lr.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new qr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=de(this._map.options.maxBounds);this._offsetLimit=oe(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),u=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+u)%i+l-u,E=(p+l+u)%i-l-u,M=Math.abs(v+u)<Math.abs(E+u)?v:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(i){var l=this._map,u=l.options,p=!u.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,M=u.easeLinearity,U=v.multiplyBy(M/E),V=U.distanceTo([0,0]),Q=Math.min(u.inertiaMaxSpeed,V),ae=U.multiplyBy(Q/V),ke=Q/(u.inertiaDeceleration*M),Re=ae.multiplyBy(-ke/2).round();!Re.x&&!Re.y?l.fire("moveend"):(Re=l._limitOffset(Re,l.options.maxBounds),A(function(){l.panBy(Re,{duration:ke,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Be.addInitHook("addHandler","dragging",qm),Be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Gm=lr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Ee(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,u=i.scrollTop||l.scrollTop,p=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},u=this.keyCodes,p,v;for(p=0,v=u.left.length;p<v;p++)l[u.left[p]]=[-1*i,0];for(p=0,v=u.right.length;p<v;p++)l[u.right[p]]=[i,0];for(p=0,v=u.down.length;p<v;p++)l[u.down[p]]=[0,i];for(p=0,v=u.up.length;p<v;p++)l[u.up[p]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},u=this.keyCodes,p,v;for(p=0,v=u.zoomIn.length;p<v;p++)l[u.zoomIn[p]]=i;for(p=0,v=u.zoomOut.length;p<v;p++)l[u.zoomOut[p]]=-i},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,u=this._map,p;if(l in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(p=this._panKeys[l],i.shiftKey&&(p=W(p).multiplyBy(3)),u.options.maxBounds&&(p=u._limitOffset(W(p),u.options.maxBounds)),u.options.worldCopyJump){var v=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(p)));u.panTo(v)}else u.panBy(p)}else if(l in this._zoomKeys)u.setZoom(u.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;$i(i)}}});Be.addInitHook("addHandler","keyboard",Gm),Be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Zm=lr.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=ym(i),u=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var p=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),p),$i(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),u=this._map.options.zoomSnap||0;i._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=u?Math.ceil(v/u)*u:v,M=i._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,M&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+M):i.setZoomAround(this._lastMousePos,l+M))}});Be.addInitHook("addHandler","scrollWheelZoom",Zm);var Hw=600;Be.mergeOptions({tapHold:ye.touchNative&&ye.safari&&ye.mobile,tapTolerance:15});var Km=lr.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new z(l.clientX,l.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",Mt),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Hw),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Xe(document,"touchend",Mt),Xe(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var u=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});u._simulated=!0,l.target.dispatchEvent(u)}});Be.addInitHook("addHandler","tapHold",Km),Be.mergeOptions({touchZoom:ye.touch,bounceAtZoomLimits:!0});var Ym=lr.extend({addHooks:function(){Oe(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var u=l.mouseEventToContainerPoint(i.touches[0]),p=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(u.add(p)._divideBy(2))),this._startDist=u.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),Mt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,u=l.mouseEventToContainerPoint(i.touches[0]),p=l.mouseEventToContainerPoint(i.touches[1]),v=u.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var E=u._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var M=c(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=A(M,this,!0),Mt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Be.addInitHook("addHandler","touchZoom",Ym),Be.BoxZoom=Hm,Be.DoubleClickZoom=Vm,Be.Drag=qm,Be.Keyboard=Gm,Be.ScrollWheelZoom=Zm,Be.TapHold=Km,Be.TouchZoom=Ym,n.Bounds=ne,n.Browser=ye,n.CRS=fe,n.Canvas=$m,n.Circle=gd,n.CircleMarker=zl,n.Class=K,n.Control=Un,n.DivIcon=Dm,n.DivOverlay=cr,n.DomEvent=lw,n.DomUtil=ow,n.Draggable=qr,n.Evented=Y,n.FeatureGroup=br,n.GeoJSON=kr,n.GridLayer=na,n.Handler=lr,n.Icon=Ns,n.ImageOverlay=Wl,n.LatLng=ve,n.LatLngBounds=ge,n.Layer=Wn,n.LayerGroup=Os,n.LineUtil=ww,n.Map=Be,n.Marker=Dl,n.Mixin=mw,n.Path=Gr,n.Point=z,n.PolyUtil=gw,n.Polygon=Rs,n.Polyline=jr,n.Popup=Hl,n.PosAnimation=_m,n.Projection=bw,n.Rectangle=Wm,n.Renderer=Sr,n.SVG=ia,n.SVGOverlay=Am,n.TileLayer=Ms,n.Tooltip=Vl,n.Transformation=we,n.Util=F,n.VideoOverlay=Mm,n.bind=c,n.bounds=oe,n.canvas=Fm,n.circle=Lw,n.circleMarker=Tw,n.control=Xo,n.divIcon=Bw,n.extend=s,n.featureGroup=Cw,n.geoJSON=Im,n.geoJson=Rw,n.gridLayer=$w,n.icon=Pw,n.imageOverlay=Iw,n.latLng=J,n.latLngBounds=de,n.layerGroup=Sw,n.map=cw,n.marker=Ew,n.point=W,n.polygon=Nw,n.polyline=Ow,n.popup=Dw,n.rectangle=Ww,n.setOptions=_,n.stamp=h,n.svg=Um,n.svgOverlay=Aw,n.tileLayer=zm,n.tooltip=zw,n.transformation=Pe,n.version=r,n.videoOverlay=Mw;var Vw=window.L;n.noConflict=function(){return window.L=Vw,this},window.L=n})})(Ff,Ff.exports);var Pl=Ff.exports;function qu(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Gu(t,e){return e==null?function(r,s){const o=C.useRef();return o.current||(o.current=t(r,s)),o}:function(r,s){const o=C.useRef();o.current||(o.current=t(r,s));const c=C.useRef(r),{instance:d}=o.current;return C.useEffect(function(){c.current!==r&&(e(d,r,c.current),c.current=r)},[d,r,s]),o}}function $x(t,e){C.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Fx(t){return function(n){const r=Hu(),s=t(Vu(n,r),r);return Mx(r.map,n.attribution),im(s.current,n.eventHandlers),$x(s.current,r),s}}function hR(t,e){const n=C.useRef();C.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function fR(t){return function(n){const r=Hu(),s=t(Vu(n,r),r);return im(s.current,n.eventHandlers),$x(s.current,r),hR(s.current,n),s}}function pR(t,e){const n=Gu(t,e),r=Fx(n);return Bx(r)}function mR(t,e){const n=Gu(t),r=dR(n,e);return cR(r)}function gR(t,e){const n=Gu(t,e),r=fR(n);return Bx(r)}function vR(t,e){const n=Gu(t,e),r=Fx(n);return uR(r)}function yR(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Ux(){return Hu().map}function E0(t){const e=Ux();return C.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const Wx=gR(function({center:e,children:n,...r},s){const o=new Pl.CircleMarker(e,r);return qu(o,Ax(s,{overlayContainer:o}))},oR);function Uf(){return Uf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uf.apply(this,arguments)}function _R({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:o,placeholder:c,style:d,whenReady:h,zoom:f,...m},g){const[x]=C.useState({className:s,id:o,style:d}),[P,b]=C.useState(null);C.useImperativeHandle(g,()=>(P==null?void 0:P.map)??null,[P]);const _=C.useCallback(y=>{if(y!==null&&P===null){const j=new Pl.Map(y,m);n!=null&&f!=null?j.setView(n,f):t!=null&&j.fitBounds(t,e),h!=null&&j.whenReady(h),b(lR(j))}},[]);C.useEffect(()=>()=>{P==null||P.map.remove()},[P]);const S=P?mi.createElement(zx,{value:P},r):c??null;return mi.createElement("div",Uf({},x,{ref:_}),S)}const xR=C.forwardRef(_R),wR=pR(function({position:e,...n},r){const s=new Pl.Marker(e,n);return qu(s,Ax(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),bR=mR(function(e,n){const r=new Pl.Popup(e,n.overlayContainer);return qu(r,n)},function(e,n,{position:r},s){C.useEffect(function(){const{instance:c}=e;function d(f){f.popup===c&&(c.update(),s(!0))}function h(f){f.popup===c&&s(!1)}return n.map.on({popupopen:d,popupclose:h}),n.overlayContainer==null?(r!=null&&c.setLatLng(r),c.openOn(n.map)):n.overlayContainer.bindPopup(c),function(){var m;n.map.off({popupopen:d,popupclose:h}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(c)}},[e,n,s,r])}),jR=vR(function({url:e,...n},r){const s=new Pl.TileLayer(e,Vu(n,r));return qu(s,r)},function(e,n,r){yR(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)}),kR=()=>{const t=Ux();return C.useEffect(()=>{setTimeout(()=>{t.invalidateSize()},200)},[t]),null};function SR(t,e){const n=Math.round(e*1e6),r=Math.round(t*1e6);return{x:n,y:r}}const T0=`${$n.API_BASE_URL}/vor-proxy`,vc={id:"ibwmnqg8g2kj8iwg",ver:"1.59",lang:"deu",auth:{type:"AID",aid:"wf7mcf9bv3nv8g5f"},client:{id:"VAO",type:"WEB",name:"webapp",l:"vs_anachb",v:10010,pos:{x:14289513,y:46624058,acc:20}},formatted:!1,ext:"VAO.22",svcReqL:[]};function CR({onAddressSelect:t}){const[e,n]=C.useState(null),[r,s]=C.useState(""),[o,c]=C.useState(null);if(C.useRef(null),E0({click:f=>{n(f.latlng),s("Uitavanje adrese..."),c(null),h(!0);const{x:m,y:g}=SR(f.latlng.lat,f.latlng.lng);(async()=>{const x={...vc,client:{...vc.client,pos:{x:m,y:g,acc:20}},svcReqL:[{meth:"LocGeoPos",req:{ring:{cCrd:{x:m,y:g},minDist:0,maxDist:30},maxLoc:1,locFltrL:[{type:"PROD",mode:"INC",value:4087}],getPOIs:!0},id:"1|5|"}]};try{const b=await(await fetch(T0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).json();if(b&&b.svcResL&&b.svcResL.length>0&&b.svcResL[0].res&&b.svcResL[0].res.locL&&b.svcResL[0].res.locL.length>0){const j=b.svcResL[0].res.locL[0];let k=j.nameFormatted&&j.nameFormatted.text||j.name||j.txt||"";/^-?\d+\.\d+, ?-?\d+\.\d+$/.test(k)&&(k="Nema adrese za ovu lokaciju"),s(k||"Adresa pronaena"),c({geoData:b,x:m,y:g});let O=k,D="";if(k&&k.includes(",")){const T=k.split(",");O=T[0].trim(),D=T.slice(1).join(",").trim()}t&&t({address:O,city:D,lat:f.latlng.lat,lon:f.latlng.lng});return}const _={...vc,client:{...vc.client,pos:{x:m,y:g,acc:20}},svcReqL:[{meth:"LocMatch",req:{input:{field:"S",loc:{type:"C",crd:{x:m,y:g}},maxLoc:1,locFltrL:[{type:"META",value:"in_austria_test"}]}},id:"1|24|"}]},y=await(await fetch(T0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).json();if(c({matchData:y,x:m,y:g}),y&&y.svcResL&&y.svcResL.length>0&&y.svcResL[0].res&&y.svcResL[0].res.match&&y.svcResL[0].res.match.locL&&y.svcResL[0].res.match.locL.length>0){const j=y.svcResL[0].res.match.locL[0];let k=j.nameFormatted&&j.nameFormatted.text||j.name||j.txt||"";/^-?\d+\.\d+, ?-?\d+\.\d+$/.test(k)&&(k="Nema adrese za ovu lokaciju"),s(k||"Adresa pronaena");let O=k,D="";if(k&&k.includes(",")){const T=k.split(",");O=T[0].trim(),D=T.slice(1).join(",").trim()}t&&t({address:O,city:D,lat:f.latlng.lat,lon:f.latlng.lng});return}s("Adresa nije pronaena"),t&&t({address:"",city:"",lat:f.latlng.lat,lon:f.latlng.lng})}catch(P){s("Greka pri dohvaanju adrese: "+((P==null?void 0:P.message)||JSON.stringify(P))),c(P),t&&t({address:"",city:"",lat:f.latlng.lat,lon:f.latlng.lng})}})()},move:()=>{n(null),s(""),h(!1)}}),r&&r.includes(",")){const f=r.split(",");f[0].trim(),f.slice(1).join(",").trim()}e==null||e.lat,e==null||e.lng;const[d,h]=C.useState(!0);return E0({}),e?a.jsx(Wx,{center:e,radius:7,pathOptions:{color:"#0ea5e9",fillColor:"#0ea5e9",fillOpacity:.92,weight:1.5}}):null}const PR="_mapContainer_5ziih_6",ER="_leafletContainer_5ziih_14",TR="_searchOverlay_5ziih_28",LR="_searchForm_5ziih_48",OR="_searchInput_5ziih_52",NR="_suggestionsBox_5ziih_70",RR="_noResults_5ziih_83",IR="_suggestionItem_5ziih_89",MR="_suggestionActive_5ziih_110",AR="_suggestionMain_5ziih_116",DR="_suggestionMeta_5ziih_122",zR="_suggestionType_5ziih_130",BR="_suggestionDistance_5ziih_134",$R="_popupContent_5ziih_140",FR="_popupCloseBtn_5ziih_154",UR="_popupAddress_5ziih_173",WR="_popupNavBtn_5ziih_179",Dt={mapContainer:PR,leafletContainer:ER,searchOverlay:TR,searchForm:LR,searchInput:OR,suggestionsBox:NR,noResults:RR,suggestionItem:IR,suggestionActive:MR,suggestionMain:AR,suggestionMeta:DR,suggestionType:zR,suggestionDistance:BR,popupContent:$R,popupCloseBtn:FR,popupAddress:UR,popupNavBtn:WR};function HR(t,e=300){const[n,r]=C.useState(t);return C.useEffect(()=>{const s=setTimeout(()=>r(t),e);return()=>clearTimeout(s)},[t,e]),n}function VR({address:t,lat:e,lon:n,onClose:r}){let s=t,o="";if(t&&t.includes(",")){const d=t.split(",");s=d[0].trim(),o=d.slice(1).join(",").trim()}const c=e&&n?`https://www.google.com/maps/search/?api=1&query=${e},${n}`:"#";return a.jsxs("div",{className:Dt.popupContent,children:[a.jsx("button",{onClick:r,className:Dt.popupCloseBtn,"aria-label":"Zatvori popup",title:"Zatvori",children:""}),a.jsxs("div",{className:Dt.popupAddress,children:[s,o&&a.jsxs(a.Fragment,{children:[a.jsx("br",{}),o]})]}),a.jsx("button",{onClick:()=>window.open(c,"_blank"),className:Dt.popupNavBtn,children:"Navigiraj ovdje"})]})}function qR({position:t}){return!t||!Array.isArray(t)?null:a.jsx(Wx,{center:t,radius:9,pathOptions:{color:"#0ea5e9",fillColor:"#0ea5e9",fillOpacity:.95,weight:3}})}function GR({marker:t,onAddressSelect:e}){var r,s,o;if(!t||!t.lat||!t.lon)return null;const n=[t.lat,t.lon];return a.jsx(wR,{position:n,children:a.jsx(bR,{autoPan:!0,autoClose:!1,closeOnClick:!1,children:a.jsx(VR,{address:((s=(r=t.data)==null?void 0:r.nameFormatted)==null?void 0:s.text)||((o=t.data)==null?void 0:o.name)||t.label||"",lat:t.lat,lon:t.lon,onClose:()=>{e&&e(null)}})})})}function L0({onAddressSelect:t,mapRef:e,selectedMarker:n,userLocation:r}){const[s,o]=C.useState(!1),[c,d]=C.useState(""),[h,f]=C.useState([]),[m,g]=C.useState(!1),x=HR(c,350),P=C.useRef(),b=C.useRef(),_=C.useRef(null),[S,y]=C.useState(-1),j=e||P,k=C.useRef(null);C.useEffect(()=>{let T=!0;if(_.current){try{_.current.abort()}catch{}_.current=null}if(!x||x.trim()==="")return f([]),g(!1),y(-1),()=>{T=!1};g(!0),y(-1);const $=new AbortController;return _.current=$,(async()=>{try{const N=x.trim();if(k.current&&typeof k.current=="function"){const I=await k.current(N,{signal:$.signal});if(!T)return;f(I||[])}else{const I=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(N)}&format=json&limit=6`,A=await(await fetch(I,{signal:$.signal})).json();if(!T)return;const G=A.map(F=>({name:F.display_name,lat:parseFloat(F.lat),lon:parseFloat(F.lon),nameFormatted:{text:F.display_name}}));f(G)}}catch(N){N.name==="AbortError"||T&&f([])}finally{T&&g(!1)}})(),()=>{T=!1;try{$.abort()}catch{}_.current=null}},[x]);const O=C.useCallback(T=>{y($=>{const N=h.length;if(N===0)return-1;let I=$+T;return I<0&&(I=N-1),I>=N&&(I=0),I})},[h.length]),D=T=>{s&&(T.key==="ArrowDown"?(T.preventDefault(),O(1)):T.key==="ArrowUp"?(T.preventDefault(),O(-1)):T.key==="Escape"?o(!1):T.key==="Enter"&&S>=0&&h[S]&&(T.preventDefault(),handleSuggestionClick(h[S])))};return a.jsxs("div",{className:Dt.mapContainer,children:[s&&a.jsxs("div",{className:Dt.searchOverlay,children:[a.jsx("form",{onSubmit:handleSearchSubmit,className:Dt.searchForm,children:a.jsx("input",{ref:b,type:"text",maxLength:20,value:c,onChange:T=>d(T.target.value),onKeyDown:D,placeholder:"Unesi adresu...",className:Dt.searchInput,autoComplete:"off"})}),a.jsx("div",{className:Dt.suggestionsBox,role:"list","aria-label":"Rezultati pretrage",children:m?a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:12},children:a.jsx(Ox,{})}):h.length===0?a.jsx("div",{className:Dt.noResults,children:"Nema rezultata"}):h.map((T,$)=>{var I,R,A;let N=null;try{if(r&&T.lat&&T.lon){const G=z=>z*Math.PI/180,K=G(T.lat-r[0]),H=G(T.lon-r[1]),Z=Math.sin(K/2)*Math.sin(K/2)+Math.cos(G(r[0]))*Math.cos(G(T.lat))*Math.sin(H/2)*Math.sin(H/2);N=6371*(2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z)))}}catch{N=null}return a.jsxs("div",{role:"listitem",onClick:()=>handleSuggestionClick(T),className:`${Dt.suggestionItem} ${$===S?Dt.suggestionActive:""}`,tabIndex:0,onKeyDown:G=>{G.key==="Enter"&&handleSuggestionClick(T)},children:[a.jsx("span",{className:Dt.suggestionMain,children:((I=T.nameFormatted)==null?void 0:I.text)||T.name||"Adresa"}),a.jsxs("div",{className:Dt.suggestionMeta,children:[((R=T.nameFormatted)==null?void 0:R.text)&&((A=T.nameFormatted)==null?void 0:A.text)!==T.name&&a.jsx("span",{className:Dt.suggestionType,children:T.name}),N!==null&&a.jsxs("span",{className:Dt.suggestionDistance,children:[N.toFixed(1)," km"]})]})]},$)})})]}),a.jsxs(xR,{ref:j,whenCreated:T=>{try{e&&e.current!==T&&(e.current=T),P&&P.current!==T&&(P.current=T)}catch{}},center:r&&Array.isArray(r)?r:[48.2082,16.3738],zoom:r?17:13,className:Dt.leafletContainer,attributionControl:!1,zoomControl:!1,children:[a.jsx(jR,{url:"https://mapsneu.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png",attribution:' <a href="https://basemap.at">basemap.at</a>'}),a.jsx(qR,{position:r}),n&&n.lat&&n.lon&&a.jsx(GR,{marker:n,onAddressSelect:t}),a.jsx(CR,{onAddressSelect:t}),a.jsx(kR,{})]})]})}function Hx(){const[t,e]=C.useState(null),[n,r]=C.useState(!0),[s,o]=C.useState(null),c=C.useCallback(()=>{try{const _=localStorage.getItem("bde_current_user");if(_){const S=JSON.parse(_),y=localStorage.getItem("bde_login_time"),j=Date.now();if(y&&j-parseInt(y)<24*60*60*1e3)return S;localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}}catch(_){console.error("Error loading user from storage:",_),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}return null},[]),d=C.useCallback(_=>{try{localStorage.setItem("bde_current_user",JSON.stringify(_)),localStorage.setItem("bde_login_time",Date.now().toString())}catch(S){console.error("Error saving user to storage:",S)}},[]),h=C.useCallback(async(_,S)=>{r(!0),o(null);try{if(_==="19102420"&&S==="19102420"){const{data:O,error:D}=await me.from("app_users").select("*").eq("tura","8610").eq("active",!0).single();if(D)throw new Error("Eldin (8610) nije pronaen u bazi");const T={id:O.id,username:O.tura,name:O.ime,role:"admin",loginTime:Date.now(),isAdminLogin:!0,device_id:O.device_id};return e(T),d(T),await fo.syncUserToDriver(O.tura),T}const{data:y,error:j}=await me.from("app_users").select("*").eq("tura",_).eq("active",!0).single();if(j)throw new Error("Korisnik nije pronaen ili nije aktivan");if(y.password_hash!==S)throw new Error("Neispravna lozinka");const k={id:y.id,username:y.tura,name:y.ime,role:y.role,loginTime:Date.now(),device_id:y.device_id,last_login:y.last_login};return await me.from("app_users").update({last_login:new Date}).eq("id",y.id),e(k),d(k),await fo.syncUserToDriver(y.tura),k}catch(y){throw o(y.message),y}finally{r(!1)}},[d]),f=C.useCallback(async _=>{r(!0),o(null);try{const{data:S,error:y}=await me.from("app_users").select("*").eq("tura",_.toUpperCase()).eq("active",!0).single();if(y)throw new Error(`Voza sa turom ${_} nije pronaen ili nije aktivan`);const j={id:S.id,username:S.tura,name:S.ime,role:S.role||"driver",loginTime:Date.now(),device_id:S.device_id,target_per_day:0};return await me.from("app_users").update({last_login:new Date}).eq("id",S.id),e(j),d(j),await fo.syncUserToDriver(S.tura),j}catch(S){throw o(S.message),S}finally{r(!1)}},[d]),m=C.useCallback(()=>{e(null),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time"),localStorage.removeItem("bde_driver_session"),localStorage.removeItem("bde_driver_login_time")},[]),g=C.useCallback(()=>t!==null,[t]),x=C.useCallback(()=>t&&t.role==="admin",[t]),P=C.useCallback(()=>t&&(t.role==="driver"||t.role==="user"),[t]),b=C.useCallback(async()=>{if(t!=null&&t.username)try{const{data:_,error:S}=await me.from("app_users").select("*").eq("tura",t.username).eq("active",!0).single();if(S||!_){m();return}const y={...t,name:_.ime,role:_.role,device_id:_.device_id,last_login:_.last_login};e(y),d(y)}catch(_){console.error("Error refreshing user:",_)}},[t,m,d]);return C.useEffect(()=>{const _=c();e(_),r(!1)},[c]),{currentUser:t,loading:n,error:s,authenticate:h,loginDriver:f,logout:m,refreshUser:b,isAuthenticated:g,isAdmin:x,isDriver:P,getCurrentUser:()=>t}}const ZR=({isOpen:t,onClose:e,onLoginSuccess:n})=>{const[r,s]=C.useState({username:"",password:""}),[o,c]=C.useState(""),[d,h]=C.useState(!1),{authenticate:f}=Hx(),m=P=>{const{name:b,value:_}=P.target;s(S=>({...S,[b]:_})),c("")},g=async P=>{P.preventDefault(),h(!0),c("");try{const b=await f(r.username,r.password);b?(s({username:"",password:""}),n(b),e()):c("Neispravno korisniko ime ili lozinka")}catch(b){c("Greka prilikom prijave: "+b.message)}finally{h(!1)}},x=()=>{s({username:"",password:""}),c(""),e()};return t?a.jsx("div",{className:"login-modal-overlay",onClick:x,children:a.jsxs("div",{className:"login-modal",onClick:P=>P.stopPropagation(),children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/bde-evidencija/assets/logo.png",alt:"B&D Logo",className:"login-logo"}),a.jsx("h2",{children:"Admin Pristup"}),a.jsx("p",{children:"Unesite vae podatke za pristup admin panelu"})]}),a.jsxs("form",{onSubmit:g,className:"login-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"username",children:"Korisniko ime"}),a.jsx("input",{type:"text",id:"username",name:"username",value:r.username,onChange:m,placeholder:"Unesite korisniko ime",required:!0,autoComplete:"username"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Lozinka"}),a.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:m,placeholder:"Unesite lozinku",required:!0,autoComplete:"current-password"})]}),o&&a.jsxs("div",{className:"error-message",children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:a.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8S12.42 0 8 0zm4.95 6L10 8.95 12.95 12 12 12.95 9.05 10 6 12.95 5.05 12 8 9.05 5.05 6 6 5.05 9.05 8 12 5.05 12.95 6z"})}),o]}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{type:"button",onClick:x,className:"btn-cancel",children:"Odustani"}),a.jsx("button",{type:"submit",disabled:d||!r.username||!r.password,className:"btn-login",children:d?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"spinner"}),"Prijavljujem..."]}):"Prijavi se"})]})]})]})}):null};function KR({isOpen:t,onClose:e,onLogin:n}){const[r,s]=C.useState(""),[o,c]=C.useState(""),d=h=>{h.preventDefault(),n(r,o),s(""),c("")};return t?a.jsx("div",{className:"admin-modal-overlay",children:a.jsxs("div",{className:"admin-modal",children:[a.jsxs("div",{className:"admin-modal-header",children:[a.jsx("h3",{children:"Admin Pristup"}),a.jsx("button",{className:"admin-modal-close",onClick:e,children:""})]}),a.jsxs("form",{onSubmit:d,className:"admin-modal-form",children:[a.jsxs("div",{className:"admin-input-group",children:[a.jsx("label",{htmlFor:"username",children:"Korisniko ime:"}),a.jsx("input",{id:"username",type:"text",value:r,onChange:h=>s(h.target.value),required:!0})]}),a.jsxs("div",{className:"admin-input-group",children:[a.jsx("label",{htmlFor:"password",children:"Lozinka:"}),a.jsx("input",{id:"password",type:"password",value:o,onChange:h=>c(h.target.value),required:!0})]}),a.jsxs("div",{className:"admin-modal-buttons",children:[a.jsx("button",{type:"button",onClick:e,className:"admin-btn-cancel",children:"Otkai"}),a.jsx("button",{type:"submit",className:"admin-btn-login",children:"Prijavi se"})]})]})]})}):null}const YR="_homeScreenModern_fvp5h_4",JR="_mainGrid_fvp5h_35",QR="_sidebarColumn_fvp5h_51",XR="_mapColumn_fvp5h_65",eI="_mapContainer_fvp5h_84",tI="_homeScreenModernSidebarOpen_fvp5h_122",nI="_loading_fvp5h_174",rI="_loadingContent_fvp5h_185",iI="_loadingSpinner_fvp5h_190",sI="_emptyState_fvp5h_200",oI="_emptyStateIcon_fvp5h_210",At={homeScreenModern:YR,mainGrid:JR,sidebarColumn:QR,mapColumn:XR,mapContainer:eI,homeScreenModernSidebarOpen:tI,loading:nI,loadingContent:rI,loadingSpinner:iI,emptyState:sI,emptyStateIcon:oI},aI=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],lI=aI[new Date().getMonth()],cI=new Date().getFullYear(),uI=()=>{const t=ks(),e=C.useRef(),[n,r]=C.useState(!1),[s,o]=C.useState(null),[c,d]=C.useState({address:"",city:"",lat:null,lon:null}),[h,f]=C.useState(null),[m,g]=C.useState(0),[x,P]=C.useState([]),[b,_]=C.useState(""),[S,y]=C.useState(!1),[j,k]=C.useState(!1),[O,D]=C.useState(window.innerWidth<768),[T,$]=C.useState(null),N=20,[I,R]=C.useState(!1),[A,G]=C.useState(60),F=C.useRef({}),{logout:K,authenticate:H}=Hx(),{drivers:Z,loading:Y}=Wo(),[z,X]=C.useState({open:!1,message:"",type:"info"}),W=C.useMemo(()=>lI,[]),ne=C.useMemo(()=>cI,[]);C.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(te=>o([te.coords.latitude,te.coords.longitude]),()=>_("Lokacija nije dostupna"))},[]),C.useEffect(()=>{const te=()=>{const xe=window.innerWidth<768;D(xe),!xe&&n&&r(!1);try{const we=document.querySelector(".app-header"),Pe=we?Math.ceil(we.getBoundingClientRect().height):window.innerWidth<640?54:56;G(Pe)}catch{}};return window.addEventListener("resize",te),te(),()=>window.removeEventListener("resize",te)},[n]),C.useEffect(()=>{const te=()=>{window.innerWidth<768&&r(!0)},xe=()=>{window.innerWidth<768&&r(Pe=>!Pe)},we=()=>{window.innerWidth<768&&r(!1)};return window.addEventListener("homeSidebarOpen",te),window.addEventListener("homeSidebarToggle",xe),window.addEventListener("homeSidebarClose",we),()=>{window.removeEventListener("homeSidebarOpen",te),window.removeEventListener("homeSidebarToggle",xe),window.removeEventListener("homeSidebarClose",we)}},[]),C.useEffect(()=>{const te=()=>{const we=()=>{try{const Fe=document.querySelector(".app-header"),Ct=Fe?Fe.getBoundingClientRect():null;if(Ct){const Ye=Ct.bottom+N;$(Math.ceil(Ye))}else $(A+N)}catch{$(A+N)}};we();const Pe=()=>we();return window.addEventListener("resize",Pe),window.addEventListener("orientationchange",Pe),()=>{window.removeEventListener("resize",Pe),window.removeEventListener("orientationchange",Pe)}};let xe=null;return O&&n?xe=te():$(null),()=>{typeof xe=="function"&&xe()}},[O,n,A]),C.useEffect(()=>{const te="no-scroll-overlay";return O&&n?document.body.classList.add(te):document.body.classList.remove(te),()=>document.body.classList.remove(te)},[O,n]),C.useEffect(()=>{if((Z==null?void 0:Z.length)>0){const te=localStorage.getItem("DRIVER_TURA"),xe=Z.find(we=>we.tura===te)||Z[0];f(xe),g(Z.findIndex(we=>we.tura===xe.tura))}},[Z]);const oe=C.useCallback(()=>{if(!Z||Z.length<=1)return;const te=(m+1)%Z.length,xe=Z[te];localStorage.setItem("DRIVER_TURA",xe.tura),f(xe),g(te)},[Z,m]);C.useCallback(()=>{r(te=>!te)},[]);const ge=C.useCallback(()=>{K(),f(null),localStorage.removeItem("DRIVER_TURA"),t("/")},[K,t]),de=()=>y(!1),ve=C.useCallback(te=>te==="8610"?50:te==="8620"||te==="8630"?85:te==="8640"?80:50,[]),J=C.useCallback(async te=>{var Ut;if(!te||!te.tura)return;const xe=te.tura,we=new Date;new Date(we.getFullYear(),we.getMonth(),1).toISOString().slice(0,10),new Date(we.getFullYear(),we.getMonth()+1,0).toISOString().slice(0,10);const Pe=new Date().toISOString().slice(0,10),Fe=Pe.slice(0,7),Ct=Pe.slice(0,4),Ye=F.current[xe];if(Ye&&Ye.dayDate===Pe&&Ye.monthKey===Fe&&Ye.year===Ct){P(Ye.stats);return}R(!0);try{const Kt=new Date,ir=new Date(Kt.getFullYear(),Kt.getMonth(),1).toISOString().slice(0,10),Wr=new Date(Kt.getFullYear(),Kt.getMonth()+1,0).toISOString().slice(0,10),Fn=new Date(Kt.getFullYear(),0,1).toISOString().slice(0,10),Mi=new Date(Kt.getFullYear(),11,31).toISOString().slice(0,10),{data:Yt}=await me.from("deliveries").select("*").eq("driver",te.tura).eq("deleted",0).order("date",{ascending:!1}).limit(1),sr=(Ut=Yt==null?void 0:Yt[0])!=null&&Ut.date&&typeof Yt[0].date=="string"?Yt[0].date.slice(0,10):Pe,[Cs,qo,Ai]=await Promise.all([me.from("deliveries").select("*").eq("driver",te.tura).gte("date",`${sr}T00:00:00`).lte("date",`${sr}T23:59:59`).eq("deleted",0),me.from("deliveries").select("*").eq("driver",te.tura).gte("date",ir).lte("date",Wr).eq("deleted",0),me.from("deliveries").select("*").eq("driver",te.tura).gte("date",Fn).lte("date",Mi).eq("deleted",0)]),Hr=ve(te.tura),re=(Qe,qe)=>{if(qe==="month"&&console.log("RAW monthResult.data",Qe),!Qe||Qe.length===0)return{packages:0,diff:qe==="day"?-Hr:0,complaints:0,date:qe==="day"?sr:null};let st=Qe;if(qe==="month"){const Ne=new Date,nt=Ne.getFullYear(),Wt=Ne.getMonth();st=Qe.filter(Jt=>{if(!(Jt!=null&&Jt.date))return!1;const _n=typeof Jt.date=="string"?Jt.date.slice(0,10):Jt.date,Ps=new Date(_n),Vr=Jt.zustellung_paketi,El=Vr!=null&&Vr!==""&&!isNaN(Number(Vr))&&Number(Vr)>0,Tl=Ps.getFullYear()===nt&&Ps.getMonth()===Wt&&Jt.driver==te.tura&&Jt.deleted==0&&El;return console.log("FILTER month",{date:Jt.date,dateStr:_n,year:Ps.getFullYear(),month:Ps.getMonth(),paketi:Vr,validPaketi:El,pass:Tl}),Tl})}else qe==="year"?st=Qe.filter(Ne=>parseInt((Ne==null?void 0:Ne.produktivitaet_stops)||0,10)>0):qe==="day"&&(st=Qe.filter(Ne=>parseInt((Ne==null?void 0:Ne.produktivitaet_stops)||0,10)>0));const Ue=st.reduce((Ne,nt)=>Ne+(parseInt((nt==null?void 0:nt.produktivitaet_stops)||0,10)||0),0),We=st.reduce((Ne,nt)=>Ne+(parseInt((nt==null?void 0:nt.probleme_druga)||0,10)||0),0),_t=(new Set(st.map(Ne=>Ne!=null&&Ne.date?typeof Ne.date=="string"?Ne.date.slice(0,10):new Date(Ne.date).toISOString().slice(0,10):null).filter(Boolean)).size||0)*Hr;return qe==="day"?{packages:Ue,diff:Ue-Hr,complaints:We,date:sr}:{packages:Ue,diff:Ue-_t,complaints:We,date:null}},se=re(Cs.data,"day"),pe=re(qo.data,"month"),Le=re(Ai.data,"year"),Ve=[{label:`Dostava (${se.date||""})`,value:se.diff,complaints:se.complaints},{label:`Reklamacije (${se.date||""})`,value:se.complaints},{label:`Dostava za ${W}`,value:pe.diff,complaints:pe.complaints},{label:`Reklamacije za ${W}`,value:pe.complaints},{label:`Dostava za ${ne}`,value:Le.diff,complaints:Le.complaints},{label:`Reklamacije za ${ne}`,value:Le.complaints}];F.current[xe]={dayDate:Pe,monthKey:Fe,year:Ct,stats:Ve},P(Ve)}catch{P([])}finally{R(!1)}},[ve,W,ne]);C.useEffect(()=>{h&&J(h)},[h,J]);const fe=C.useCallback(()=>I?Array(6).fill({label:"Uitavanje...",value:"--",trend:"neutral"}):x!=null&&x.length?x.slice(0,6).map(te=>({label:te.label||"--",value:te.value!==void 0?te.value:"--",trend:typeof te.value=="number"?te.value>0?"positive":te.value<0?"negative":"neutral":"neutral"})):Array(6).fill({label:"--",value:"--",trend:"neutral"}),[x,I]);if(Y)return a.jsx("div",{className:At.homeScreenModern,children:a.jsx("div",{className:At.loading,children:a.jsxs("div",{className:At.loadingContent,children:[a.jsx("div",{className:At.loadingSpinner}),a.jsx("p",{children:"Uitavam podatke..."})]})})});if(!Y&&(!Z||Z.length===0))return a.jsx("div",{className:At.homeScreenModern,children:a.jsxs("div",{className:At.emptyState,children:[a.jsx("div",{className:At.emptyStateIcon,children:""}),a.jsx("h3",{children:"Nema dostupnih vozaa"}),a.jsx("p",{children:"Dodajte vozae u sistem da biste poeli koristiti aplikaciju"})]})});const Se=O;return a.jsxs("div",{className:`${At.homeScreenModern} ${Se?At.mobileClean:""} ${n?At.homeScreenModernSidebarOpen:""}`,children:[a.jsx("div",{className:At.mainGrid,children:O?n?a.jsx("aside",{className:At.sidebarColumn,children:a.jsx(k0,{stats:fe(),user:h,onSwitchDriver:oe,isLoading:I,onLogout:ge})}):a.jsx("main",{className:At.mapColumn,children:a.jsx("div",{className:At.mapContainer,children:a.jsx(P0,{title:"Mapa dostave - Austrija",mapRef:e,address:c.address,city:c.city,selectedMarker:c,headerHeight:A,onNavigate:te=>{if(te&&typeof te=="object"&&typeof te.lat=="number"&&typeof te.lon=="number"){window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${te.lat},${te.lon}`)}&travelmode=driving`,"_blank");return}te&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(te)}`,"_blank")},onSearchSelect:d,onLocateMe:o,children:a.jsx(L0,{onAddressSelect:d,mapRef:e,selectedMarker:c,userLocation:s})})})}):a.jsxs(mi.Fragment,{children:[a.jsx("aside",{className:At.sidebarColumn,children:a.jsx(k0,{stats:fe(),user:h,onSwitchDriver:oe,isLoading:I,onLogout:ge})}),a.jsx("main",{className:At.mapColumn,children:a.jsx("div",{className:At.mapContainer,children:a.jsx(P0,{title:"Mapa dostave - Austrija",mapRef:e,address:c.address,city:c.city,selectedMarker:c,headerHeight:A,onNavigate:te=>{if(te&&typeof te=="object"&&typeof te.lat=="number"&&typeof te.lon=="number"){window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${te.lat},${te.lon}`)}&travelmode=driving`,"_blank");return}te&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(te)}`,"_blank")},onSearchSelect:d,onLocateMe:o,children:a.jsx(L0,{onAddressSelect:d,mapRef:e,selectedMarker:c,userLocation:s})})})})]})}),a.jsx(ZR,{isOpen:S,onClose:()=>y(!1),onLoginSuccess:de}),a.jsx(KR,{isOpen:j,onClose:()=>k(!1),onLogin:async(te,xe)=>{try{const we=await H(te,xe);k(!1),we&&(we.role==="admin"||we.isAdminLogin)?t("/admin"):X({open:!0,message:"Uspjeno prijavljen, ali nemate administratorski pristup.",type:"warning"})}catch(we){X({open:!0,message:(we==null?void 0:we.message)||"Neuspjela prijava. Provjerite korisniko ime i lozinku.",type:"error"})}}}),a.jsx(Nx,{isOpen:z.open,message:z.message,type:z.type,onClose:()=>X({...z,open:!1})})]})};function dI({user:t,onChangePassword:e,onLogout:n}){var f;(f=document.querySelector('meta[name="build-timestamp"]'))!=null&&f.content;const[r,s]=mi.useState(!1),o=ks(),c=js(),d=()=>{if(c.pathname!=="/")o("/"),setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("homeSidebarToggle"))}catch{}},80);else try{window.dispatchEvent(new CustomEvent("homeSidebarToggle"))}catch{}},h=()=>s(!1);return mi.useEffect(()=>{s(!1)},[c.pathname]),mi.useEffect(()=>{const m="no-scroll-mobile-menu";return r?document.body.classList.add(m):document.body.classList.remove(m),()=>document.body.classList.remove(m)},[r]),a.jsxs("header",{className:"app-header",children:[a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"app-logo",children:[a.jsx("button",{className:"mobile-nav-trigger","aria-label":"Otvori meni",onClick:()=>s(m=>!m),children:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),a.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),a.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),a.jsx(fa,{to:"/",className:"logo-link",children:a.jsx("h1",{children:"B&D Evidencija"})})]}),a.jsxs("nav",{className:"header-nav",children:[a.jsxs(fa,{to:"/deliveries",children:[a.jsx("span",{className:"nav-icon","aria-hidden":"true",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 3h5v5"}),a.jsx("path",{d:"M8 3H3v5"}),a.jsx("path",{d:"M12 22v-8.3a4 4 0 0 0-4-4H3"}),a.jsx("path",{d:"M3 9a9 9 0 0 1 9 9"})]})}),a.jsx("span",{children:"Dostave"})]}),a.jsxs(fa,{to:"/drivers",children:[a.jsx("span",{className:"nav-icon","aria-hidden":"true",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a.jsx("span",{children:"Vozai"})]}),a.jsxs(fa,{to:"/extra-rides",children:[a.jsx("span",{className:"nav-icon","aria-hidden":"true",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),a.jsx("path",{d:"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),a.jsx("path",{d:"M5 17h-2v-4m-1 -8h11v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5"})]})}),a.jsx("span",{children:"Extra vonje"})]}),a.jsxs(fa,{to:"/about",children:[a.jsx("span",{className:"nav-icon","aria-hidden":"true",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a.jsx("path",{d:"M12 17h.01"})]})}),a.jsx("span",{children:"O aplikaciji"})]})]}),a.jsx("button",{className:"mobile-center-trigger","aria-label":"Prebaci Sidebar/Mapa",onClick:d,children:a.jsxs("svg",{width:"60",height:"24",viewBox:"0 0 60 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"2",y:"3",width:"24",height:"18",rx:"3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),a.jsx("line",{x1:"5",y1:"7",x2:"20",y2:"7",strokeWidth:"1.5"}),a.jsx("line",{x1:"5",y1:"10",x2:"16",y2:"10",strokeWidth:"1.5"}),a.jsx("line",{x1:"5",y1:"13",x2:"18",y2:"13",strokeWidth:"1.5"}),a.jsx("line",{x1:"5",y1:"16",x2:"14",y2:"16",strokeWidth:"1.5"}),a.jsx("rect",{x:"28",y:"8",width:"24",height:"8",rx:"4",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.6"}),a.jsx("circle",{cx:"33",cy:"12",r:"2.5",fill:"currentColor",opacity:"0.8",children:a.jsx("animate",{attributeName:"cx",values:"33;47;33",dur:"3s",repeatCount:"indefinite"})}),a.jsx("text",{x:"40",y:"6",fontSize:"4",fill:"currentColor",opacity:"0.7",textAnchor:"middle",children:"TOGGLE"}),a.jsx("rect",{x:"34",y:"3",width:"24",height:"18",rx:"3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),a.jsx("path",{d:"M38 8 L42 12 L46 8 L50 12 L54 8",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.7"}),a.jsx("circle",{cx:"45",cy:"10",r:"2",fill:"currentColor",opacity:"0.9"}),a.jsx("path",{d:"M41 16 L43 14 L45 16 L47 14 L49 16",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.6"}),a.jsx("circle",{cx:"50",cy:"15",r:"1",fill:"currentColor",opacity:"0.6"}),a.jsx("path",{d:"M26 6 L30 9 L26 12",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.5",children:a.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0.3",dur:"2s",repeatCount:"indefinite"})}),a.jsx("path",{d:"M54 6 L50 9 L54 12",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.5",children:a.jsx("animate",{attributeName:"opacity",values:"0.8;0.3;0.8",dur:"2s",repeatCount:"indefinite"})})]})}),a.jsx(DP,{user:t,onChangePassword:e,onLogout:n})]}),r&&a.jsxs("div",{className:"mobile-menu-dropdown",children:[a.jsxs("button",{className:"mobile-menu-item",onClick:()=>{o("/"),h()},children:[a.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9,22 9,12 15,12 15,22"})]})}),"Poetna"]}),a.jsxs("button",{className:"mobile-menu-item",onClick:()=>{o("/deliveries"),h()},children:[a.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 3h5v5"}),a.jsx("path",{d:"M8 3H3v5"}),a.jsx("path",{d:"M12 22v-8.3a4 4 0 0 0-4-4H3"}),a.jsx("path",{d:"M3 9a9 9 0 0 1 9 9"})]})}),"Dostave"]}),a.jsxs("button",{className:"mobile-menu-item",onClick:()=>{o("/drivers"),h()},children:[a.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),"Vozai"]}),a.jsxs("button",{className:"mobile-menu-item",onClick:()=>{o("/extra-rides"),h()},children:[a.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),a.jsx("path",{d:"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),a.jsx("path",{d:"M5 17h-2v-4m-1 -8h11v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5"})]})}),"Extra vonje"]}),t.role==="admin"&&a.jsxs("button",{className:"mobile-menu-item",onClick:()=>{o("/admin"),h()},children:[a.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),"Admin"]}),a.jsxs("button",{className:"mobile-menu-item",onClick:()=>{o("/about"),h()},children:[a.jsx("span",{className:"mmi-icon","aria-hidden":"true",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a.jsx("path",{d:"M12 17h.01"})]})}),"O aplikaciji"]})]})]})}function hI({onLogout:t}){const[e,n]=C.useState(!1),{currentUser:r,changePassword:s,logout:o}=Gp(),c=js(),d=c.pathname==="/"||c.pathname==="",h=()=>{n(!0)},f=async(g,x)=>{await s(g,x)},m=()=>{window.confirm("Da li ste sigurni da se elite odjaviti?")&&(o(),t&&t())};return r?a.jsxs("div",{className:"app-content",children:[a.jsx(dI,{user:r,onChangePassword:h,onLogout:m}),a.jsx("main",{className:`app-main${d?" home-fullbleed":""}`,children:a.jsxs(yk,{children:[a.jsx(Cr,{path:"/",element:a.jsx(uI,{})}),a.jsx(Cr,{path:"/deliveries",element:a.jsx(O4,{})}),a.jsx(Cr,{path:"/drivers",element:a.jsx(IL,{})}),a.jsx(Cr,{path:"/extra-rides",element:a.jsx(TO,{})}),a.jsx(Cr,{path:"/admin",element:(r==null?void 0:r.role)==="admin"?a.jsx(E3,{}):a.jsx(Kd,{to:"/"})}),a.jsx(Cr,{path:"/payroll",element:(r==null?void 0:r.role)!=="admin"?a.jsx(R3,{user:r}):a.jsx(Kd,{to:"/"})}),a.jsx(Cr,{path:"/about",element:a.jsx(M3,{})}),a.jsx(Cr,{path:"*",element:a.jsx(Kd,{to:"/"})})]})}),e&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:a.jsx(i5,{onClose:()=>n(!1),onSubmit:async g=>{await f(g.oldPassword,g.newPassword),n(!1)}})})]}):a.jsx("div",{children:"Loading..."})}function fI(){const{currentUser:t,isAuthenticated:e}=Gp(),[n,r]=C.useState(!1),[s,o]=C.useState(!1),c=h=>{r(!0),o(!1)},d=()=>{o(!0),r(!1)};return C.useEffect(()=>{!t&&!e&&r(!1),t&&e&&o(!1)},[t,e]),a.jsx(Sk,{basename:"/bde-evidencija",children:a.jsx(OP,{children:a.jsx(Tk,{children:a.jsx(yP,{children:a.jsx(kP,{children:a.jsx("div",{className:"app",children:(e||n)&&!s?a.jsx(hI,{onLogout:d}):a.jsx(AP,{onAuthSuccess:c})})})})})})})}console.log(" BDEVidencija v4.0.0 - ULTRA NUCLEAR FORCE UPDATE - 20251007");console.log(" PWA Cache Status: FORCED REFRESH");"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",function(){window.location.reload()});X_(document.getElementById("root")).render(a.jsx(p4,{client:C4,children:a.jsx(fI,{})}));

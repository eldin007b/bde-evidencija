import{j as e,m as Q,i as Ve,N as st}from"./chunk-v5-1760926629600-BUTTBQ9U.js";import{r as d,a as ot,R as J,u as rt}from"./chunk-v5-1760926629600-DzTHeiPn.js";import{u as at,a as Be,C as nt,M as lt,T as it,b as Ye,P as Ke,L as de}from"./chunk-v5-1760926629600-1zCRlxhu.js";const Fe={VITE_MAPQUEST_PROXY_URL:"https://dsltpiupbfopyvuiqffg.supabase.co/functions/v1/mapquest-proxy",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzbHRwaXVwYmZvcHl2dWlxZmZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5Mjc3MzcsImV4cCI6MjA2NTUwMzczN30.suu_OSbTBSEkM3YMiPDFIAgDnX3bDavcD8BX4ZfYZxw",VITE_SUPABASE_URL:"https://dsltpiupbfopyvuiqffg.supabase.co"};var De={};const _=typeof import.meta<"u"&&Fe?Fe:{},$=typeof process<"u"&&De?De:{},ct="https://dsltpiupbfopyvuiqffg.supabase.co",dt="",ut="https://dsltpiupbfopyvuiqffg.supabase.co/functions/v1",k={SUPABASE_URL:_.VITE_SUPABASE_URL||_.REACT_APP_SUPABASE_URL||$.REACT_APP_SUPABASE_URL||ct,SUPABASE_KEY:_.VITE_SUPABASE_ANON_KEY||_.VITE_SUPABASE_KEY||_.REACT_APP_SUPABASE_KEY||$.REACT_APP_SUPABASE_KEY||dt,API_BASE_URL:_.VITE_API_BASE_URL||_.REACT_APP_API_BASE_URL||$.REACT_APP_API_BASE_URL||ut,GOOGLE_MAPS_API_KEY:_.VITE_GOOGLE_MAPS_API_KEY||_.REACT_APP_GOOGLE_MAPS_API_KEY||$.REACT_APP_GOOGLE_MAPS_API_KEY||"",GOOGLE_DRIVE_API_KEY:_.VITE_GOOGLE_DRIVE_API_KEY||$.VITE_GOOGLE_DRIVE_API_KEY||"",GOOGLE_DRIVE_FOLDER_ID:_.VITE_GOOGLE_DRIVE_FOLDER_ID||$.VITE_GOOGLE_DRIVE_FOLDER_ID||""};k.MAPQUEST_API_KEY=_.VITE_MAPQUEST_API_KEY||_.REACT_APP_MAPQUEST_API_KEY||$.REACT_APP_MAPQUEST_API_KEY||"";k.MAPQUEST_PROXY_URL=_.VITE_MAPQUEST_PROXY_URL||_.REACT_APP_MAPQUEST_PROXY_URL||$.REACT_APP_MAPQUEST_PROXY_URL||`${k.API_BASE_URL}/mapquest-proxy`;k.GITHUB_TOKEN=_.VITE_GITHUB_TOKEN||_.REACT_APP_GITHUB_TOKEN||$.REACT_APP_GITHUB_TOKEN||"";k.GITHUB_REPO=_.VITE_GITHUB_REPO||_.REACT_APP_GITHUB_REPO||$.REACT_APP_GITHUB_REPO||"eldin007b/gls-scraper";k.WORKFLOW_FILE=_.VITE_WORKFLOW_FILE||_.REACT_APP_WORKFLOW_FILE||$.REACT_APP_WORKFLOW_FILE||"scraper.yml";k.ROUTE_STRATEGY=_.VITE_ROUTE_STRATEGY||_.REACT_APP_ROUTE_STRATEGY||$.REACT_APP_ROUTE_STRATEGY||"";k.VORANACHB_URL=_.VITE_VORANACHB_URL||_.REACT_APP_VORANACHB_URL||$.REACT_APP_VORANACHB_URL||"";async function ht(s){var h,c,n,v;const r={id:"ibwmnqg8g2kj8iwg",ver:"1.59",lang:"deu",auth:{type:"AID",aid:"wf7mcf9bv3nv8g5f"},client:{id:"VAO",type:"WEB",name:"webapp",l:"vs_anachb",v:10010,pos:{x:14289510,y:46624050,acc:16.185}},formatted:!1,ext:"VAO.22",svcReqL:[{meth:"LocMatch",req:{input:{field:"S",loc:{type:"ALL",dist:1e3,name:s},maxLoc:7}},id:"1|43|"}]};try{const x=await fetch(`${k.API_BASE_URL}/vor-proxy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});console.debug("[AddressSearchService] vor-proxy status:",x.status);try{const m=await x.text();console.debug("[AddressSearchService] vor-proxy response (preview):",m.slice(0,1e3));const A=m?JSON.parse(m):null;return((v=(n=(c=(h=A==null?void 0:A.svcResL)==null?void 0:h[0])==null?void 0:c.res)==null?void 0:n.match)==null?void 0:v.locL)||[]}catch(m){console.warn("[AddressSearchService] Failed to parse vor-proxy response as JSON",m)}}catch(x){console.warn("VAO proxy failed, falling back to Nominatim",x)}try{const x=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(s)}&format=json&addressdetails=1&limit=8&accept-language=de`,m=await fetch(x,{headers:{"User-Agent":"bde-evidencija/1.0 (+https://eldin007b.github.io/bde-evidencija)"}});return m.ok?(await m.json()).map(o=>({name:o.display_name,nameFormatted:{text:o.display_name},crd:{x:Math.round(o.lon*1e6),y:Math.round(o.lat*1e6)}})):[]}catch(x){return console.warn("Nominatim fallback failed",x),[]}}function qe(s){var n;if(s.info.statuscode!==0){const v={400:"Bad request",401:"Unauthorized - check API key",403:"Forbidden",500:"MapQuest server error"};throw new Error(`MapQuest API error ${s.info.statuscode}: ${v[s.info.statuscode]||((n=s.info.messages)==null?void 0:n.join(", "))||"Unknown error"}`)}const r=s.route;if(!r)throw new Error("No route data received from MapQuest");const h=Math.round(r.distance*1e3),c=Math.round(r.time);return{distanceMeters:h,distanceText:ft(h),durationSeconds:c,durationText:vt(c),mapQuestData:{fuelUsed:r.fuelUsed,realTime:r.hasRealTime,sessionId:r.sessionId}}}async function xt(s,r,h,c){return await mt(s,r,h,c)}async function mt(s,r,h,c){if(k.MAPQUEST_PROXY_URL)try{return await gt(s,r,h,c)}catch{}try{return await pt(s,r,h,c)}catch(n){throw new Error(`Both MapQuest methods failed. Proxy: ${(proxyError==null?void 0:proxyError.message)||"not available"}, Direct: ${n.message}`)}}async function gt(s,r,h,c){try{const n={locations:[{latLng:{lat:s,lng:r}},{latLng:{lat:h,lng:c}}],options:{routeType:"fastest",unit:"k",doReverseGeocode:!1,enhancesNarratives:!1,avoidTimedConditions:!1}},v=k.MAPQUEST_PROXY_URL||`${k.API_BASE_URL}/mapquest-proxy`,x=await fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!x.ok)throw new Error(`MapQuest proxy error: ${x.status} - ${x.statusText}`);const m=await x.json();return qe(m)}catch(n){throw n}}async function pt(s,r,h,c){const n=k.MAPQUEST_API_KEY;if(!n||n==="your_mapquest_key_here")throw new Error("MapQuest API key not configured");try{const v=`https://www.mapquestapi.com/directions/v2/route?key=${encodeURIComponent(n)}`,m=await fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({locations:[{latLng:{lat:s,lng:r}},{latLng:{lat:h,lng:c}}],options:{routeType:"fastest",unit:"k",doReverseGeocode:!1,enhancesNarratives:!1,avoidTimedConditions:!1}})});if(!m.ok)throw new Error(`MapQuest API error: ${m.status} - ${m.statusText}`);const A=await m.json();return qe(A)}catch(v){throw v}}function ft(s){if(s==null)return null;if(s>=1e3){const r=s/1e3;return new Intl.NumberFormat("de-DE",{maximumFractionDigits:1}).format(r)+" km"}return`${s} m`}function vt(s){if(s==null)return null;const r=Math.round(s/60);if(r>=60){const h=Math.floor(r/60),c=r%60;return c>0?`${h}h ${c}min`:`${h}h`}return`${r} min`}function oe(s){if(s==null)return null;if(s>=1e3){const r=s/1e3;return new Intl.NumberFormat("de-DE",{maximumFractionDigits:1}).format(r)+" km"}return`${s} m`}function re(s){if(s==null)return null;const r=Math.round(s/60);if(r>=60){const h=Math.floor(r/60),c=r%60;return c>0?`${h}h ${c}min`:`${h}h`}return`${r} min`}async function Ge(s,r,h,c){try{const n=await xt(s,r,h,c);return n?{...n,source:"mapquest"}:{distanceMeters:null,distanceText:null,durationSeconds:null,durationText:null,source:"none"}}catch(n){return console.warn("MapQuest routing failed:",(n==null?void 0:n.message)||n),{distanceMeters:null,distanceText:null,durationSeconds:null,durationText:null,source:"none",error:(n==null?void 0:n.message)||String(n)}}}const bt=({children:s,className:r="",style:h,title:c="Mapa dostave - Austrija",loading:n=!1,address:v="",city:x="",onNavigate:m,onSearchSelect:A,mapRef:o,onLocateMe:g,autoLocate:y=!0,selectedMarker:u=null,footerRef:T,isMobile:P=typeof window<"u"?window.innerWidth<768:!1,sidebarLayout:Z=!1,headerHeight:ae=80,onMapClickCloseSidebar:z,alwaysShowSearchInterface:I=!1,hideSearchAndInfo:w=!1})=>{const[i,O]=d.useState(null),[C,D]=d.useState(""),[R,ne]=d.useState(""),[W,X]=d.useState([]),[p,ue]=d.useState(null),[b,he]=d.useState(!1),[B,G]=d.useState(!1),[le,ye]=d.useState(!1),[H,Ne]=d.useState(null),[Ze,_e]=d.useState(!1),[xe,St]=d.useState(null),[We,Ae]=d.useState(!1),[U,me]=d.useState(0),[Y,Ee]=d.useState(0),[S,ge]=d.useState(!1),[ee,Pe]=d.useState(0),[ie,Se]=d.useState(!1),[pe,Qe]=d.useState({top:0,left:0,width:0});console.log("🎯 MapCardModern initialized with props:",{address:v,city:x,selectedMarker:u});const V=d.useRef(null),fe=d.useRef(null),ve=typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0),Me=typeof window<"u"&&window.innerWidth>=1024,be=()=>{if(V.current&&P){const t=V.current.getBoundingClientRect();Qe({top:t.bottom+window.scrollY+8,left:t.left+window.scrollX,width:t.width})}},Je=(t,a,l,j)=>{const f=(l-t)*Math.PI/180,E=(j-a)*Math.PI/180,M=Math.sin(f/2)*Math.sin(f/2)+Math.cos(t*Math.PI/180)*Math.cos(l*Math.PI/180)*Math.sin(E/2)*Math.sin(E/2);return 6371*(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)))},Xe=(t,a=50)=>{if(!t||t<=0)return null;const l=t/1e3/a;return Math.round(l*3600)},K=[{lat:47.0707,lon:15.4395,speed:0},{lat:47.071,lon:15.44,speed:20},{lat:47.0715,lon:15.441,speed:30},{lat:47.0725,lon:15.442,speed:50},{lat:47.0735,lon:15.4435,speed:60},{lat:47.0745,lon:15.445,speed:40},{lat:47.075,lon:15.446,speed:0},{lat:47.0755,lon:15.4465,speed:25},{lat:47.0765,lon:15.4475,speed:55},{lat:47.0775,lon:15.4485,speed:65},{lat:47.0785,lon:15.4495,speed:45},{lat:47.0795,lon:15.4505,speed:30},{lat:47.0805,lon:15.4515,speed:20},{lat:47.081,lon:15.452,speed:0}],ke=()=>{S?(ge(!1),me(0),console.log("🛑 Zaustavlja simulaciju vožnje")):(ge(!0),Pe(0),console.log("🚗 Pokretam simulaciju vožnje..."))},Ce=()=>{var t;(t=o==null?void 0:o.current)!=null&&t.zoomIn&&o.current.zoomIn()},Le=()=>{var t;(t=o==null?void 0:o.current)!=null&&t.zoomOut&&o.current.zoomOut()},Te=()=>{if(console.log("📍 Lociraj me kliknuto - tražim GPS lokaciju"),!navigator.geolocation){alert("Geolokacija nije podržana u ovom pregledniku.");return}navigator.geolocation.getCurrentPosition(t=>{var l;console.log("📍 GPS lokacija pronađena:",t.coords);const a=[t.coords.latitude,t.coords.longitude];O({lat:t.coords.latitude,lon:t.coords.longitude});try{(l=o==null?void 0:o.current)!=null&&l.setView&&o.current.setView(a,17)}catch(j){console.warn("Map setView not available",j)}g&&g(a)},t=>{console.error("📍 GPS greška:",t),alert("Nije moguće dobiti lokaciju. Provjerite dozvole preglednika.")},{enableHighAccuracy:!0,maximumAge:5e3,timeout:15e3})},et=async(t,a)=>{Ae(!0);try{console.log("🔄 Starting reverse geocoding for:",t,a);try{const l=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${a}&accept-language=de,en&addressdetails=1`);if(l.ok){const j=await l.json();if(console.log("🔄 Nominatim response:",j),j.display_name){let N=j.display_name;if(j.address){const f=j.address;let E="";f.house_number&&f.road?E=`${f.road} ${f.house_number}`:f.road&&(E=f.road),f.postcode&&f.city?E+=E?`, ${f.postcode} ${f.city}`:`${f.postcode} ${f.city}`:f.city&&(E+=E?`, ${f.city}`:f.city),E&&(N=E)}D(String(N)),console.log("📍 Address found via Nominatim:",N);return}}}catch(l){console.warn("🔄 Nominatim failed:",l)}try{const l={id:"ibwmnqg8g2kj8iwg",ver:"1.59",lang:"deu",auth:{type:"AID",aid:"wf7mcf9bv3nv8g5f"},client:{id:"VAO",type:"WEB",name:"webapp",l:"vs_anachb",v:10010,pos:{x:Math.round(a*1e6),y:Math.round(t*1e6),acc:16.185}},formatted:!1,ext:"VAO.22",svcReqL:[{meth:"LocMatch",req:{input:{field:"S",loc:{type:"ALL",crd:{x:Math.round(a*1e6),y:Math.round(t*1e6)},dist:500},maxLoc:3}},id:"1|43|"}]},j=await fetch(`${k.API_BASE_URL}/vor-proxy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});console.debug("[MapCardModern] vor-proxy status:",j.status);try{const N=await j.text();console.debug("[MapCardModern] vor-proxy response (preview):",N?N.slice(0,1e3):"");const f=N?JSON.parse(N):null;if(console.log("🔄 VAO response:",f),f&&Array.isArray(f.svcResL)&&f.svcResL[0]&&f.svcResL[0].res&&f.svcResL[0].res.match&&Array.isArray(f.svcResL[0].res.match.locL)){const E=f.svcResL[0].res.match.locL;if(E.length>0){const M=E[0];let L="";if(M.nameFormatted&&M.nameFormatted.text?L=M.nameFormatted.text.replace(/<[^>]*>/g,""):M.name&&(L=M.name),L){D(String(L)),console.log("📍 Address found via VAO:",L);return}}}}catch(N){console.warn("🔄 VAO fallback failed (parse/response):",N)}}catch(l){console.warn("🔄 VAO proxy request failed:",l)}console.log("📍 Using coordinates as final fallback"),D(`${t.toFixed(6)}, ${a.toFixed(6)}`)}catch(l){console.error("🔄 Reverse geocoding error:",l),D(`${t.toFixed(6)}, ${a.toFixed(6)}`)}finally{Ae(!1)}},Ie=()=>{if(b)document.exitFullscreen&&document.exitFullscreen().then(()=>{he(!1)});else{const t=fe.current;t!=null&&t.requestFullscreen&&t.requestFullscreen().then(()=>{he(!0),ve&&setTimeout(()=>{var a;(a=o==null?void 0:o.current)!=null&&a.setView&&i&&o.current.setView([i.lat,i.lon],17)},100)})}};d.useEffect(()=>{if(navigator.geolocation){const t=navigator.geolocation.watchPosition(a=>{var j,N;const l={lat:a.coords.latitude,lon:a.coords.longitude};if(O(l),me(a.coords.speed||0),Ee(a.coords.heading||0),b&&((j=o==null?void 0:o.current)!=null&&j.setView)){const f=(N=o==null?void 0:o.current)!=null&&N.getZoom?o.current.getZoom():void 0;o.current.setView([l.lat,l.lon],f)}},a=>console.error("GPS tracking error:",a),{enableHighAccuracy:!0,maximumAge:1e3,timeout:5e3});return()=>navigator.geolocation.clearWatch(t)}},[]),d.useEffect(()=>{let t;return S&&K.length>0&&(t=setInterval(()=>{var l,j;const a=K[ee];if(a){const N={lat:a.lat,lon:a.lon};O(N);const f=a.speed/3.6;me(f);const E=ee+1;if(E<K.length){const M=K[E],L=M.lat-a.lat,F=M.lon-a.lon,q=Math.atan2(F,L)*(180/Math.PI);Ee(q)}if(b&&((l=o==null?void 0:o.current)!=null&&l.setView)){const M=(j=o==null?void 0:o.current)!=null&&j.getZoom?o.current.getZoom():15;o.current.setView([N.lat,N.lon],M)}console.log(`🚗 Simulacija: ${a.speed} km/h na poziciji ${a.lat.toFixed(4)}, ${a.lon.toFixed(4)}`),console.log(`📍 State update: currentCoords=${JSON.stringify(N)}, speed=${f.toFixed(1)}, heading=${Y.toFixed(1)}`),Pe(M=>{const L=M+1;return L>=K.length?(console.log("🏁 Završena simulacija vožnje"),ge(!1),0):L})}},2e3)),()=>{t&&clearInterval(t)}},[S,ee,b]),d.useEffect(()=>{const t=()=>{he(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",t),()=>document.removeEventListener("fullscreenchange",t)},[]),d.useEffect(()=>{i&&i.lat&&i.lon&&(console.log("📍 Coordinates changed, starting reverse geocoding:",i),et(i.lat,i.lon))},[i]),d.useEffect(()=>{let t=!1;(async()=>{if(!(!i||!p||!p.lat||!p.lon))try{_e(!0),console.log("🗺️ Computing route from",i,"to",p);const l=await Ge(i.lat,i.lon,p.lat,p.lon);if(t)return;Ne(l||null)}catch(l){console.warn("🗺️ Route computation failed:",(l==null?void 0:l.message)||l),t||Ne(null)}finally{t||_e(!1)}})();try{window.__triggerRoute=async()=>{if(!i||!p){console.warn("window.__triggerRoute: missing currentCoords or selectedLocation",{currentCoords:i,selectedLocation:p});return}console.log("window.__triggerRoute: invoking getDrivingRouteInfo",{currentCoords:i,selectedLocation:p});try{const l=await Ge(i.lat,i.lon,p.lat,p.lon);return console.log("window.__triggerRoute result",l),l}catch(l){throw console.error("window.__triggerRoute error",l),l}}}catch{}return()=>{t=!0}},[i,p]),d.useEffect(()=>{y&&!i&&navigator.geolocation&&(console.log("🚀 Auto-locating on component mount"),navigator.geolocation.getCurrentPosition(t=>{var a;console.log("📍 Auto-locate GPS found:",t.coords),O({lat:t.coords.latitude,lon:t.coords.longitude});try{(a=o==null?void 0:o.current)!=null&&a.setView&&o.current.setView([t.coords.latitude,t.coords.longitude],15)}catch(l){console.warn("Map setView not available",l)}},t=>{console.warn("📍 Auto-locate failed:",t)},{enableHighAccuracy:!0,maximumAge:1e4,timeout:1e4}))},[y,i,o]),d.useEffect(()=>{if(console.log("📍 Props changed - address:",v,"city:",x,"selectedMarker:",u),v||x||u){console.log("📍 Setting location from props:",{address:v,city:x,selectedMarker:u});let t=null,a=null;u&&(u.lat!==void 0&&u.lon!==void 0?(t=u.lat,a=u.lon):u.lat!==void 0&&u.lng!==void 0&&(t=u.lat,a=u.lng));const l={address:v||"",city:x||"",lat:t,lon:a};if(l.address||l.city||l.lat&&l.lon){ue(l),console.log("🎯 Selected location set from external props:",l);const j=(v||"")+(x?`, ${x}`:"");j.trim()&&ne(j.trim())}}else console.log("📍 Clearing selected location - no data"),ue(null),ne("")},[v,x,u]),d.useEffect(()=>{const t=()=>{B&&P&&be()};return window.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[B,P]);const tt=async t=>{if(!t||t.length<3){X([]);return}ye(!0);try{const a=await ht(t);X(a||[])}catch(a){console.error("Greška pri pretraživanju:",a),X([])}finally{ye(!1)}},we=t=>{const a=t.target.value;if(ne(a),ie){Se(!1);return}a.length>=3?tt(a):X([])},Re=t=>{var j,N,f,E;console.log("🎯 Suggestion clicked:",t);const a=(j=t.crd)==null?void 0:j.x,l=(N=t.crd)==null?void 0:N.y;if(typeof a=="number"&&typeof l=="number"&&((f=o==null?void 0:o.current)!=null&&f.setView)){const M=l/1e6,L=a/1e6;o.current.setView([M,L],17);let F=((E=t.nameFormatted)==null?void 0:E.text)||t.name||"",q=F,te="";const Oe=/<br\s*\/?.*?>/i;if(Oe.test(F)){const se=F.split(Oe);q=se[0].trim(),te=se.slice(1).join(" ").trim()}else if(F.includes(",")){const se=F.split(",");q=se[0].trim(),te=se.slice(1).join(",").trim()}const Ue=q+(te?`, ${te}`:"");ne(Ue);const je={address:q,city:te,lat:M,lon:L,data:{nameFormatted:{text:F},name:q},label:Ue};ue(je),console.log("🎯 Selected location set:",je),A&&A(je),X([]),Se(!0),G(!1),V.current&&V.current.blur()}},$e=()=>{R.trim()&&m&&m(R.trim())},ze=b?{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:9999}:{};return e.jsxs("div",{className:`relative ${r} ${b?"fixed inset-0 z-[9999]":""}`,style:h,children:[Me&&!b?e.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-100 via-white to-blue-50",children:[e.jsx("div",{className:"w-1/2 bg-gradient-to-b from-white via-slate-50 to-blue-50 border-r border-slate-200/50 flex flex-col backdrop-blur-sm",children:e.jsxs("div",{className:"p-6 flex flex-col gap-6 h-full overflow-y-auto",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Navigacija"}),e.jsx("p",{className:"text-slate-600",children:"Pronađi rutu do odredišta"})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{ref:V,type:"text",value:R,onChange:we,onFocus:()=>G(!0),onBlur:()=>{setTimeout(()=>{ie||G(!1)},200)},className:"w-full px-4 py-3 rounded-2xl border border-slate-300 bg-white/80 backdrop-blur-sm shadow-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200 placeholder-slate-500",placeholder:"Unesi adresu za navigaciju...",autoComplete:"off"}),B&&(W.length>0||le)&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white/95 backdrop-blur-sm border border-slate-200 rounded-2xl shadow-2xl max-h-60 overflow-y-auto z-[3000]",children:le?e.jsxs("div",{className:"p-4 flex items-center gap-3 text-slate-600",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),"Tražim adrese..."]}):W.length===0?e.jsxs("div",{className:"p-4 text-slate-600",children:['Nema rezultata za "',R,'"']}):W.map((t,a)=>{var l,j;return e.jsx("div",{className:"p-4 hover:bg-blue-50/50 cursor-pointer border-b border-slate-100 last:border-b-0 transition-colors duration-150",onClick:()=>Re(t),onMouseDown:N=>N.preventDefault(),children:e.jsx("div",{className:"font-medium text-slate-800",children:((j=(l=t.nameFormatted)==null?void 0:l.text)==null?void 0:j.replace(/<[^>]*>/g,""))||t.name||""})},a)})})]}),e.jsx("button",{className:"px-6 py-3 rounded-2xl bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:from-blue-600 hover:to-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95",onClick:$e,disabled:!R.trim(),title:"Otvori navigaciju",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"})})})]})})}),e.jsx("div",{className:"space-y-4 flex-1",children:p?e.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-white/90 via-blue-50/30 to-purple-50/20 backdrop-blur-md border border-white/30 shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[C?e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-gradient-to-r from-emerald-50/80 to-green-50/60 backdrop-blur-sm border border-emerald-200/40",children:[e.jsxs("svg",{className:"w-4 h-4 text-emerald-600 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsx("span",{className:"text-sm font-medium text-slate-800 truncate",title:C,children:C})]}):i&&typeof i.lat=="number"&&typeof i.lon=="number"?e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-gradient-to-r from-emerald-50/80 to-green-50/60 backdrop-blur-sm border border-emerald-200/40",children:[e.jsxs("svg",{className:"w-4 h-4 text-emerald-600 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsxs("span",{className:"text-sm font-medium text-slate-800 truncate",title:`${i.lat.toFixed(6)}, ${i.lon.toFixed(6)}`,children:[i.lat.toFixed(6),", ",i.lon.toFixed(6)]})]}):e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-gradient-to-r from-gray-50/80 to-slate-50/60 backdrop-blur-sm border border-gray-200/40",children:[e.jsxs("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsx("span",{className:"text-sm font-medium text-slate-600 truncate",children:"Moja lokacija nije dostupna"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-gradient-to-r from-rose-50/80 to-red-50/60 backdrop-blur-sm border border-rose-200/40",children:[e.jsxs("svg",{className:"w-4 h-4 text-rose-600 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),e.jsx("span",{className:"text-sm font-medium text-slate-800 truncate",title:`${p.address}${p.city?`, ${p.city}`:""}`,children:`${String(p.address)}${p.city?`, ${String(p.city)}`:""}`})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"text-right bg-gradient-to-br from-blue-50/50 to-indigo-50/30 backdrop-blur-sm border border-blue-200/30 rounded-xl px-4 py-3",children:e.jsxs("div",{className:"text-base font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:[xe&&typeof xe.compact=="string"?xe.compact:H?e.jsxs(e.Fragment,{children:[H.durationText||re(H.durationSeconds)||"--"," • ",H.distanceText||oe(H.distanceMeters)||"--"]}):i&&p?(()=>{const t=Je(i.lat,i.lon,p.lat,p.lon),a=Math.round(t*1e3),l=Xe(a,40);return l?`${re(l)} • ${oe(a)}`:"--"})():"--",Ze&&e.jsx("span",{className:"ml-2",children:e.jsx("div",{className:"w-3 h-3 border border-blue-500 border-t-transparent rounded-full animate-spin inline-block"})})]})})})]})}):e.jsxs(e.Fragment,{children:[We?e.jsx("div",{className:"p-4 rounded-2xl bg-white/80 backdrop-blur-sm border border-slate-200/50 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"📍"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-slate-600 font-medium",children:"Prepoznajem adresu..."})]})]})}):C?e.jsx("div",{className:"p-4 rounded-2xl bg-white/80 backdrop-blur-sm border border-slate-200/50 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"�"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-slate-800 mb-1",children:"Moja lokacija"}),e.jsx("p",{className:"text-sm text-slate-600",children:C})]})]})}):i&&typeof i.lat=="number"&&typeof i.lon=="number"?e.jsx("div",{className:"p-4 rounded-2xl bg-white/70 backdrop-blur-sm border border-slate-200/50 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"�"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-slate-800 mb-1",children:"Moja lokacija"}),e.jsxs("p",{className:"text-sm text-slate-600",children:[i.lat.toFixed(6),", ",i.lon.toFixed(6)]})]})]})}):e.jsx("div",{className:"p-4 rounded-2xl bg-white/60 backdrop-blur-sm border border-slate-200/50 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl opacity-60",children:"📍"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-slate-700 mb-1",children:"Moja lokacija"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Lokacija nije dostupna"})]})]})}),p&&!C&&e.jsx("div",{className:"p-4 rounded-2xl bg-white/80 backdrop-blur-sm border border-slate-200/50 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"🎯"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-1",children:"Odabrana adresa"}),e.jsx("p",{className:"text-sm text-gray-600",children:`${String(p.address)}${p.city?`, ${String(p.city)}`:""}`})]})]})}),R&&!p&&e.jsx("div",{className:"p-3 rounded-lg bg-white border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"🔍"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-1",children:"Pretraživanje"}),e.jsx("p",{className:"text-sm text-gray-600",children:R})]})]})})]})})]})}),e.jsx("div",{className:"w-1/2 relative",children:e.jsx("div",{ref:fe,className:"w-full h-full bg-gradient-to-br from-gray-100 via-gray-200 to-gray-300 overflow-hidden",style:ze,children:n?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/90 backdrop-blur-sm z-20",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-6"}),e.jsx("p",{className:"text-slate-700 font-medium text-lg",children:"Učitavam mapu..."})]}):e.jsxs(e.Fragment,{children:[(console.log("🔍 Before React.Children.map:",{children:s,currentCoords:i,speed:U,heading:Y,isSimulating:S,loading:n}),J.Children.map(s,t=>{if(J.isValidElement(t)){const a=i?[i.lat,i.lon]:t.props.userLocation||null;return console.log("🔄 Prosleđujem u MapView:",{userLocation:a,speed:U,heading:Y,isSimulating:S}),J.cloneElement(t,{routeInfo:H||t.props.routeInfo||null,userLocation:a,selectedMarker:p||t.props.selectedMarker||null,speed:U||t.props.speed||0,heading:Y||t.props.heading||0,isFullscreen:b||t.props.isFullscreen||!1})}return t})),e.jsxs("div",{className:"absolute right-6 top-6 flex flex-col gap-3 z-30",children:[e.jsx("button",{className:"w-12 h-12 bg-white/90 backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center text-slate-700 hover:text-blue-600 hover:bg-white group",onClick:Ce,title:"Povećaj zoom",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:e.jsx("path",{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"})})}),e.jsx("button",{className:"w-12 h-12 bg-white/90 backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center text-slate-700 hover:text-blue-600 hover:bg-white group",onClick:Le,title:"Smanji zoom",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:e.jsx("path",{d:"M19 11H5v2h14z"})})}),e.jsx("button",{className:"w-12 h-12 bg-white/90 backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center text-slate-700 hover:text-emerald-600 hover:bg-white group",onClick:Te,title:"Lociraj me",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"})})}),e.jsx("button",{className:`w-12 h-12 backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center group ${S?"bg-red-500 text-white hover:bg-red-600":"bg-white/90 text-slate-700 hover:text-green-600 hover:bg-white"}`,onClick:ke,title:S?"Zaustavi simulaciju":"Pokreni simulaciju vožnje",children:S?e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:e.jsx("path",{d:"M6 6h12v12H6z"})}):e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),ve&&e.jsx("button",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 text-white border border-purple-400/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center hover:from-purple-600 hover:to-purple-700 group",onClick:Ie,title:b?"Izađi iz punog ekrana":"Puni ekran",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:b?e.jsx("path",{d:"M18 7h-3V4h-2v3H10V4H8v3H5v2h3v3H5v2h3v3h2v-3h3v3h2v-3h3v-2h-3V9h3V7z"}):e.jsx("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})})})]}),e.jsxs("div",{className:"absolute right-6 bottom-6 bg-white/95 backdrop-blur-sm border border-slate-300 rounded-2xl px-4 py-3 shadow-xl z-1000",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${S?"bg-green-500":"bg-blue-500"}`}),e.jsx("span",{className:"font-bold text-lg text-slate-800",children:U?(U*3.6).toFixed(1):"0"}),e.jsx("span",{className:"text-sm text-slate-700 font-medium",children:"km/h"})]}),S&&e.jsxs("div",{className:"text-xs text-green-600 font-medium mt-1",children:["🚗 SIMULACIJA (",ee+1,"/",K.length,")"]})]})]})})})]}):e.jsxs("div",{className:`relative ${b?"fixed inset-0":"min-h-[300px] h-full"} ${w&&P?"bg-white":"bg-gradient-to-br from-slate-100 via-white to-blue-50 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20"} overflow-hidden`,children:[(!w||!P)&&e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 via-purple-600 to-blue-700 text-white p-6 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsxs("div",{className:"relative z-10",children:[c&&e.jsx("h3",{className:"text-2xl font-bold mb-2 text-center",children:c}),!w&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{ref:V,type:"text",value:R,onChange:we,onFocus:()=>{G(!0),be()},onBlur:()=>{setTimeout(()=>{ie||G(!1)},200)},className:"w-full px-4 py-3 rounded-2xl border border-white/30 bg-white/90 backdrop-blur-sm shadow-lg focus:ring-2 focus:ring-white focus:border-white outline-none transition-all duration-200 text-slate-800 placeholder-slate-500",placeholder:"Unesi adresu za navigaciju...",autoComplete:"off"})}),e.jsx("button",{className:"px-6 py-3 rounded-2xl bg-white/20 backdrop-blur-sm border border-white/30 text-white hover:bg-white/30 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",onClick:$e,disabled:!R.trim(),title:"Otvori navigaciju",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"})})})]})]})]}),e.jsxs("div",{ref:fe,className:"flex-1 relative min-h-[500px] h-full bg-gradient-to-br from-gray-100 via-gray-200 to-gray-300 w-full box-border overflow-hidden",style:ze,children:[n?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/90 backdrop-blur-sm z-20",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-6"}),e.jsx("p",{className:"text-slate-700 font-medium text-lg",children:"Učitavam mapu..."})]}):e.jsxs(e.Fragment,{children:[(console.log("🔍 Mobile - Before React.Children.map:",{children:s,currentCoords:i,speed:U,heading:Y,isSimulating:S,loading:n}),J.Children.map(s,t=>{if(J.isValidElement(t)){const a=i?[i.lat,i.lon]:t.props.userLocation||null;return console.log("🔄 Mobile - Prosleđujem u MapView:",{userLocation:a,speed:U,heading:Y,isSimulating:S}),J.cloneElement(t,{routeInfo:H||t.props.routeInfo||null,userLocation:a,selectedMarker:p||t.props.selectedMarker||null,speed:U||t.props.speed||0,heading:Y||t.props.heading||0,isFullscreen:b||t.props.isFullscreen||!1})}return t})),b&&C&&e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 top-6 z-40",children:e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl px-4 py-3 max-w-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:"📍"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:C}),S&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Simulacija u toku"})]})]})]})})}),w&&P&&e.jsx("div",{className:"absolute left-6 top-6 flex flex-col gap-3 z-30",children:e.jsx("button",{className:"w-12 h-12 bg-white/90 backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center text-slate-700 hover:text-blue-600 hover:bg-white group",onClick:()=>{G(!B),B||(be(),setTimeout(()=>{V.current&&V.current.focus()},100))},title:"Pretraži lokaciju",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:"group-hover:scale-110 transition-transform",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]})})}),w&&P&&B&&e.jsx("div",{className:"absolute left-20 top-6 right-6 z-40",children:e.jsx("div",{className:"h-12 bg-white/95 backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl overflow-hidden",children:e.jsx("input",{ref:V,type:"text",value:R,onChange:we,onBlur:()=>{setTimeout(()=>{ie||G(!1)},200)},className:"w-full h-full px-4 text-sm border-0 bg-transparent focus:ring-0 focus:outline-none text-slate-800 placeholder-slate-500",placeholder:"Unesi adresu za navigaciju...",autoComplete:"off"})})}),e.jsxs("div",{className:"absolute right-6 top-6 flex flex-col gap-3 z-30",children:[e.jsx("button",{className:`${b?"w-14 h-14":"w-12 h-12"} bg-white/90 backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center text-slate-700 hover:text-blue-600 hover:bg-white group`,onClick:Ce,title:"Povećaj zoom",children:e.jsx("svg",{width:b?"26":"22",height:b?"26":"22",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:e.jsx("path",{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"})})}),e.jsx("button",{className:`${b?"w-14 h-14":"w-12 h-12"} bg-white/90 backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center text-slate-700 hover:text-blue-600 hover:bg-white group`,onClick:Le,title:"Smanji zoom",children:e.jsx("svg",{width:b?"26":"22",height:b?"26":"22",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:e.jsx("path",{d:"M19 11H5v2h14z"})})}),e.jsx("button",{className:`${b?"w-14 h-14":"w-12 h-12"} bg-white/90 backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center text-slate-700 hover:text-emerald-600 hover:bg-white group`,onClick:Te,title:"Lociraj me",children:e.jsx("svg",{width:b?"26":"22",height:b?"26":"22",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"})})}),e.jsx("button",{className:`${b?"w-14 h-14":"w-12 h-12"} backdrop-blur-sm border border-slate-200/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center group ${S?"bg-red-500 text-white hover:bg-red-600":"bg-white/90 text-slate-700 hover:text-green-600 hover:bg-white"}`,onClick:ke,title:S?"Zaustavi simulaciju":"Pokreni simulaciju vožnje",children:S?e.jsx("svg",{width:b?"26":"22",height:b?"26":"22",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:e.jsx("path",{d:"M6 6h12v12H6z"})}):e.jsx("svg",{width:b?"26":"22",height:b?"26":"22",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),ve&&e.jsx("button",{className:`${b?"w-14 h-14":"w-12 h-12"} bg-gradient-to-br from-purple-500 to-purple-600 text-white border border-purple-400/50 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 flex items-center justify-center hover:from-purple-600 hover:to-purple-700 group`,onClick:Ie,title:b?"Izađi iz punog ekrana":"Puni ekran",children:e.jsx("svg",{width:b?"24":"20",height:b?"24":"20",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:b?e.jsx("path",{d:"M18 7h-3V4h-2v3H10V4H8v3H5v2h3v3H5v2h3v3h2v-3h3v3h2v-3h3v-2h-3V9h3V7z"}):e.jsx("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})})})]}),e.jsxs("div",{className:"absolute right-6 bottom-6 bg-white/95 backdrop-blur-sm border border-slate-300 rounded-2xl px-4 py-3 shadow-xl z-1000",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${S?"bg-green-500":"bg-blue-500"}`}),e.jsx("span",{className:"font-bold text-lg text-slate-800",children:U?(U*3.6).toFixed(1):"0"}),e.jsx("span",{className:"text-sm text-slate-700 font-medium",children:"km/h"})]}),S&&e.jsxs("div",{className:"text-xs text-green-600 font-medium mt-1",children:["🚗 SIMULACIJA (",ee+1,"/",K.length,")"]})]})]}),!Me&&!w&&e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-white/95 via-white/90 to-transparent backdrop-blur-sm border-t border-white/20 p-4 space-y-2",children:[i?e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gradient-to-r from-blue-50/80 to-indigo-50/60 backdrop-blur-sm border border-blue-200/40",children:[e.jsxs("svg",{className:"w-4 h-4 text-blue-600 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsxs("span",{className:"text-xs font-medium text-slate-800 truncate",children:["Moja lokacija: ",i.lat.toFixed(4),", ",i.lon.toFixed(4)]})]}):e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gradient-to-r from-gray-50/80 to-slate-50/60 backdrop-blur-sm border border-gray-200/40",children:[e.jsxs("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsx("span",{className:"text-xs font-medium text-slate-600 truncate",children:"Moja lokacija nije dostupna"})]}),p&&e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gradient-to-r from-rose-50/80 to-red-50/60 backdrop-blur-sm border border-rose-200/40",children:[e.jsxs("svg",{className:"w-4 h-4 text-rose-600 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),e.jsx("span",{className:"text-xs font-medium text-slate-800 truncate",title:`${p.address}${p.city?`, ${p.city}`:""}`,children:`${p.address}${p.city?`, ${p.city}`:""}`})]}),R&&!p&&e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gradient-to-r from-amber-50/80 to-yellow-50/60 backdrop-blur-sm border border-amber-200/40",children:[e.jsxs("svg",{className:"w-4 h-4 text-amber-600 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsxs("span",{className:"text-xs font-medium text-slate-800 truncate",children:["Pretraživanje: ",R]})]})]})]}),Z&&e.jsx("div",{className:"w-80 bg-gradient-to-b from-white via-slate-50 to-blue-50 border-l border-slate-200/50 flex flex-col backdrop-blur-sm",children:e.jsxs("div",{ref:T,className:"p-6 flex flex-col gap-4 h-full",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Informacije"]}),e.jsx("div",{className:"flex flex-col gap-4 flex-1"})]})})]}),P&&(!w&&B||w&&B)&&(W.length>0||le)&&ot.createPortal(e.jsx("div",{className:"fixed bg-white/95 backdrop-blur-sm border border-slate-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-[99999]",style:{top:w?"calc(1.5rem + 48px + 8px)":pe.top,left:w?"5rem":pe.left,right:w?"1.5rem":"auto",width:w?"auto":pe.width},children:le?e.jsxs("div",{className:"p-3 flex items-center gap-2 text-slate-600",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm",children:"Tražim adrese..."})]}):W.length===0?e.jsxs("div",{className:"p-3 text-slate-600 text-sm",children:['Nema rezultata za "',R,'"']}):W.map((t,a)=>{var l,j;return e.jsxs("div",{className:"p-3 hover:bg-blue-50/50 cursor-pointer border-b border-slate-100 last:border-b-0 transition-colors duration-150",onClick:()=>Re(t),onMouseDown:N=>N.preventDefault(),children:[e.jsx("div",{className:"font-medium text-slate-800 text-sm",children:((j=(l=t.nameFormatted)==null?void 0:l.text)==null?void 0:j.replace(/<[^>]*>/g,""))||t.name||""}),e.jsx("div",{className:"text-xs text-slate-600 mt-1",children:t.district||t.region||t.country||""})]},a)})}),document.body)]})},wt=()=>{const s=at();return d.useEffect(()=>{setTimeout(()=>{s.invalidateSize()},200)},[s]),null};function jt(s,r){const h=Math.round(r*1e6),c=Math.round(s*1e6);return{x:h,y:c}}const He=`${k.API_BASE_URL}/vor-proxy`,ce={id:"ibwmnqg8g2kj8iwg",ver:"1.59",lang:"deu",auth:{type:"AID",aid:"wf7mcf9bv3nv8g5f"},client:{id:"VAO",type:"WEB",name:"webapp",l:"vs_anachb",v:10010,pos:{x:14289513,y:46624058,acc:20}},formatted:!1,ext:"VAO.22",svcReqL:[]};function yt({onAddressSelect:s}){const[r,h]=d.useState(null),[c,n]=d.useState(""),[v,x]=d.useState(null);if(d.useRef(null),Be({click:o=>{console.log("🗺️ Map clicked at:",o.latlng),h(o.latlng),n("Učitavanje adrese..."),x(null);const{x:g,y}=jt(o.latlng.lat,o.latlng.lng);console.log("📍 Projected coordinates:",{x:g,y}),(async()=>{const u={...ce,client:{...ce.client,pos:{x:g,y,acc:20}},svcReqL:[{meth:"LocGeoPos",req:{ring:{cCrd:{x:g,y},minDist:0,maxDist:30},maxLoc:1,locFltrL:[{type:"PROD",mode:"INC",value:4087}],getPOIs:!0},id:"1|5|"}]};try{const P=await(await fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).json();if(P&&P.svcResL&&P.svcResL.length>0&&P.svcResL[0].res&&P.svcResL[0].res.locL&&P.svcResL[0].res.locL.length>0){const I=P.svcResL[0].res.locL[0];let w=I.nameFormatted&&I.nameFormatted.text||I.name||I.txt||"";/^-?\d+\.\d+, ?-?\d+\.\d+$/.test(w)&&(w="Nema adrese za ovu lokaciju"),n(w||"Adresa pronađena"),x({geoData:P,x:g,y});let i=w,O="";if(w&&w.includes(",")){const D=w.split(",");i=D[0].trim(),O=D.slice(1).join(",").trim()}const C={address:i,city:O,lat:o.latlng.lat,lon:o.latlng.lng};console.log("🎯 ClickToVORAddress calling onAddressSelect:",C),s&&s(C);return}const Z={...ce,client:{...ce.client,pos:{x:g,y,acc:20}},svcReqL:[{meth:"LocMatch",req:{input:{field:"S",loc:{type:"C",crd:{x:g,y}},maxLoc:1,locFltrL:[{type:"META",value:"in_austria_test"}]}},id:"1|24|"}]},z=await(await fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)})).json();if(x({matchData:z,x:g,y}),z&&z.svcResL&&z.svcResL.length>0&&z.svcResL[0].res&&z.svcResL[0].res.match&&z.svcResL[0].res.match.locL&&z.svcResL[0].res.match.locL.length>0){const I=z.svcResL[0].res.match.locL[0];let w=I.nameFormatted&&I.nameFormatted.text||I.name||I.txt||"";/^-?\d+\.\d+, ?-?\d+\.\d+$/.test(w)&&(w="Nema adrese za ovu lokaciju"),n(w||"Adresa pronađena");let i=w,O="";if(w&&w.includes(",")){const C=w.split(",");i=C[0].trim(),O=C.slice(1).join(",").trim()}s&&s({address:i,city:O,lat:o.latlng.lat,lon:o.latlng.lng});return}n("Adresa nije pronađena"),s&&s({address:"",city:"",lat:o.latlng.lat,lon:o.latlng.lng})}catch(T){n("Greška pri dohvaćanju adrese: "+((T==null?void 0:T.message)||JSON.stringify(T))),x(T),s&&s({address:"",city:"",lat:o.latlng.lat,lon:o.latlng.lng})}})()},move:()=>{h(null),n(""),A(!1)}}),c&&c.includes(",")){const o=c.split(",");o[0].trim(),o.slice(1).join(",").trim()}r==null||r.lat,r==null||r.lng;const[m,A]=d.useState(!0);return Be({}),r?e.jsx(nt,{center:r,radius:7,pathOptions:{color:"#0ea5e9",fillColor:"#0ea5e9",fillOpacity:.92,weight:1.5}}):null}let Nt=de.divIcon({html:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z" fill="#ef4444" stroke="#dc2626" stroke-width="2"/>
    <circle cx="12" cy="10" r="3" fill="white"/>
  </svg>`,className:"custom-div-icon",iconSize:[24,24],iconAnchor:[12,24]});de.Marker.prototype.options.icon=Nt;function _t({address:s,lat:r,lon:h,onClose:c,routeInfo:n,userLocation:v}){let x=s,m="";if(s&&s.includes(",")){const g=s.split(",");x=g[0].trim(),m=g.slice(1).join(",").trim()}const A=r&&h?`https://www.google.com/maps/search/?api=1&query=${r},${h}`:"#";let o=null;if(n&&n.distanceMeters&&n.durationSeconds){const g=n.durationText||re(n.durationSeconds)||"--",y=n.distanceText||oe(n.distanceMeters)||"--";o=`${g} • ${y}`}else if(n&&n.distance&&n.duration){const g=re(n.duration)||"--",y=oe(n.distance)||"--";o=`${g} • ${y}`}else if(v&&r&&h){const y=(r-v[0])*Math.PI/180,u=(h-v[1])*Math.PI/180,T=Math.sin(y/2)*Math.sin(y/2)+Math.cos(v[0]*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2),Z=6371*(2*Math.atan2(Math.sqrt(T),Math.sqrt(1-T))),ae=Math.round(Z*1e3),I=ae>0?Math.round(Z/40*3600):null,w=I?re(I):"--",i=oe(ae);o=`${w} • ${i}`}return e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 min-w-[240px] max-w-[320px] border border-gray-100 relative z-50",onMouseDown:g=>g.stopPropagation(),onClick:g=>g.stopPropagation(),children:[e.jsx("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),c()},onMouseDown:g=>{g.preventDefault(),g.stopPropagation()},className:"absolute -top-2 -right-2 w-8 h-8 flex items-center justify-center bg-gray-800 text-white hover:bg-gray-900 rounded-full shadow-lg transition-all duration-200 hover:scale-105 z-50","aria-label":"Zatvori popup",title:"Zatvori",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-base font-semibold text-gray-900 leading-tight",children:x}),m&&e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:m})]})}),o&&e.jsx("div",{className:"flex items-center justify-center py-2 px-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-100",children:e.jsx("div",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:o})}),e.jsx("button",{onClick:()=>window.open(A,"_blank"),className:"w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:"Pokreni navigaciju"})]})]})}function At({position:s,address:r,speed:h=0,heading:c=0,isFullscreen:n=!1}){if(console.log("🎯 UserLocationMarker:",{position:s,speed:h,heading:c,isFullscreen:n}),!s)return console.log("❌ No position provided to UserLocationMarker"),null;const v=()=>h>1?de.divIcon({html:`
          <div style="transform: rotate(${c}deg); width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;">
            <div style="width: 32px; height: 32px; background: #3b82f6; border: 4px solid white; border-radius: 50%; box-shadow: 0 4px 8px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                <path d="M12 2l8 20-8-6-8 6 8-20z"/>
              </svg>
            </div>
          </div>
        `,className:"custom-location-marker",iconSize:[32,32],iconAnchor:[16,16]}):de.divIcon({html:`
          <div style="width: 16px; height: 16px; background: #3b82f6; border: 2px solid white; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.3); animation: pulse 2s infinite;">
          </div>
          <style>
            @keyframes pulse {
              0% { opacity: 1; }
              50% { opacity: 0.5; }
              100% { opacity: 1; }
            }
          </style>
        `,className:"custom-location-marker-static",iconSize:[16,16],iconAnchor:[8,8]});return e.jsx(Ye,{position:s,icon:v(),children:e.jsx(Ke,{children:typeof r<"u"&&r?String(r):"Moja lokacija"})})}function Et({marker:s,onAddressSelect:r,routeInfo:h,userLocation:c}){var x,m,A;const n=d.useRef();if(d.useEffect(()=>{n.current&&s&&s.lat&&s.lon&&setTimeout(()=>{n.current.openPopup()},100)},[s==null?void 0:s.lat,s==null?void 0:s.lon]),!s||!s.lat||!s.lon)return null;const v=[s.lat,s.lon];return e.jsx(Ye,{position:v,ref:n,children:e.jsx(Ke,{autoPan:!0,autoClose:!1,closeOnClick:!1,children:e.jsx(_t,{address:((m=(x=s.data)==null?void 0:x.nameFormatted)==null?void 0:m.text)||((A=s.data)==null?void 0:A.name)||s.label||`${String(s.address||"")}${s.city?`, ${String(s.city)}`:""}`,lat:s.lat,lon:s.lon,routeInfo:h,userLocation:c,onClose:()=>{r&&r(null)}})})})}function Pt({onAddressSelect:s,mapRef:r,selectedMarker:h,userLocation:c,routeInfo:n,currentAddress:v,speed:x,heading:m,isFullscreen:A}){const o=d.useRef(),g=r||o,y=d.useCallback(u=>{g&&(g.current=u)},[g]);return e.jsx("div",{className:"relative w-full h-full bg-gray-100",children:e.jsxs("div",{className:"w-full h-full",children:[e.jsxs(lt,{center:[47.0707,15.4395],zoom:8,className:"w-full h-full z-0",ref:y,maxZoom:18,minZoom:6,zoomControl:!1,attributionControl:!1,children:[e.jsx(it,{url:"https://maps.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png",attribution:'Datenquelle: <a href="https://www.basemap.at">basemap.at</a>',maxZoom:19}),e.jsx(wt,{}),c&&e.jsx(At,{position:c,address:v,speed:x,heading:m,isFullscreen:A}),h&&e.jsx(Et,{marker:h,onAddressSelect:s,routeInfo:n,userLocation:c}),e.jsx(yt,{onAddressSelect:s})]}),typeof x<"u"&&A&&e.jsx("div",{className:"absolute right-6 bottom-6 bg-white/95 backdrop-blur-sm border border-slate-300 rounded-2xl px-4 py-3 shadow-xl z-1000",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-lg text-slate-800",children:x?(x*3.6).toFixed(1):"0"}),e.jsx("span",{className:"text-sm text-slate-700 font-medium",children:"km/h"})]})})]})})}const Lt=()=>{const s=rt(),r=d.useRef(null),h=d.useRef(null),[c,n]=d.useState("night"),[v,x]=d.useState(null),[m,A]=d.useState({address:"",city:"",lat:null,lon:null}),o={night:{background:"from-slate-900 via-blue-900 to-indigo-900",accent:"from-blue-400 to-purple-400"}};d.useEffect(()=>{n("night")},[]);const g=c==="night",y=typeof window<"u"?window.innerWidth<768:!1;return d.useEffect(()=>{const u=()=>{r.current&&typeof r.current.invalidateSize=="function"&&(console.log("🗺️ Invalidating map size..."),r.current.invalidateSize())},T=setTimeout(u,500);return window.addEventListener("resize",u),()=>{clearTimeout(T),window.removeEventListener("resize",u)}},[]),d.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(u=>x([u.coords.latitude,u.coords.longitude]),u=>console.warn("Geolocation error:",u))},[]),e.jsxs("div",{className:`min-h-screen bg-gradient-to-br ${o[c].background} transition-all duration-1000`,children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx(Q.div,{animate:{scale:[1,1.2,1],rotate:[0,90,0]},transition:{duration:20,repeat:1/0,ease:"linear"},className:`absolute top-20 left-10 w-96 h-96 bg-gradient-to-r ${o[c].accent} rounded-full mix-blend-multiply filter blur-3xl opacity-20`}),e.jsx(Q.div,{animate:{scale:[1.2,1,1.2],rotate:[90,0,90]},transition:{duration:25,repeat:1/0,ease:"linear"},className:`absolute bottom-20 right-10 w-96 h-96 bg-gradient-to-r ${o[c].accent} rounded-full mix-blend-multiply filter blur-3xl opacity-20`})]}),e.jsx(Q.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative z-10",children:e.jsx("div",{className:"flex items-center justify-between p-4 md:p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Q.button,{onClick:()=>s(-1),whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-3 rounded-xl backdrop-blur-sm border transition-all duration-200 ${g?"bg-gray-800/90 border-gray-700 text-gray-100 hover:bg-gray-700/90":"bg-white/90 border-gray-200 text-gray-700 hover:bg-white/95"} shadow-lg hover:shadow-xl`,children:e.jsx(Ve,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${o[c].accent} shadow-lg`,children:e.jsx(st,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${g?"text-white":"text-gray-900"}`,children:"Navigacija"}),e.jsx("p",{className:`text-sm ${g?"text-gray-400":"text-gray-600"}`,children:"Mapa dostave - Austrija"})]})]})]})})}),e.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:`relative z-10 ${y?"h-screen":"px-2 md:px-6 pb-2 md:pb-6"}`,children:e.jsx("div",{className:`${y?"h-full":`rounded-lg md:rounded-2xl backdrop-blur-sm border overflow-hidden shadow-2xl h-[calc(100vh-120px)] md:h-[calc(100vh-160px)] ${g?"bg-gray-800/90 border-gray-700":"bg-white/90 border-gray-200"}`}`,children:e.jsx(bt,{title:"Navigacija - Mapa dostave",mapRef:r,footerRef:h,className:"h-full w-full",style:{height:"100%",width:"100%"},address:(m==null?void 0:m.address)||"",city:(m==null?void 0:m.city)||"",selectedMarker:m,headerHeight:y?120:160,sidebarLayout:!y,hideSearchAndInfo:y,onNavigate:u=>{if(u&&typeof u=="object"&&typeof u.lat=="number"&&typeof u.lon=="number"){window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${u.lat},${u.lon}`)}&travelmode=driving`,"_blank");return}u&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(u)}`,"_blank")},onSearchSelect:u=>{console.log("🎯 Address selected:",u),A(u)},onLocateMe:x,children:e.jsx(Pt,{onAddressSelect:u=>{console.log("🗺️ MapView address select:",u),A(u)},mapRef:r,selectedMarker:m,userLocation:v,routeInfo:null})})})}),y&&e.jsx(Q.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.2},onClick:()=>s(-1),className:"fixed top-4 left-4 z-50 p-3 rounded-2xl bg-white/90 backdrop-blur-sm border border-gray-200/50 shadow-xl hover:shadow-2xl hover:scale-105 active:scale-95 transition-all duration-200",children:e.jsx(Ve,{className:"w-6 h-6 text-gray-700"})})]})};export{Lt as default};

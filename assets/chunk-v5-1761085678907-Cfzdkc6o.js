import{j as e,m as j,i as je,k as ve,l as Ne,c as ee,w as te,a5 as re,f as we,s as De,P as ae,M as Se,u as Ee}from"./chunk-v5-1761085678907-BtqOCbET.js";import{u as Ce,r as n}from"./chunk-v5-1761085678907-DzTHeiPn.js";import{u as Re}from"./chunk-v5-1761085678907-7aCCqVrX.js";import{s as S}from"./chunk-v5-1761085678907-33BlJiVp.js";import{r as Oe}from"./app-v5-1761085678907-BuPUNXfi.js";import{f as N}from"./chunk-v5-1761085678907-67jeV4qK.js";import"./chunk-v5-1761085678907-Cig1ImSt.js";import"./chunk-v5-1761085678907-76oV6MwW.js";const U={20:40,21:40,22:40,23:40,24:40,25:40,26:40,27:40,28:40,29:40,30:50,31:50,32:50,33:50,34:50,35:50,36:50,37:50,38:50,39:50,40:61,41:61,42:61,43:61,44:61,45:61,46:61,47:61,48:61,49:61,50:66,51:66,52:66,53:66,54:66,55:66,56:66,57:66,58:66,59:66,60:75,61:75,62:75,63:75,64:75,65:75,66:75,67:75,68:75,69:75,70:83,71:83,72:83,73:83,74:83,75:83,76:83,77:83,78:83,79:83,80:91,81:91,82:91,83:91,84:91,85:91,86:91,87:91,88:91,89:91,90:100,91:100,92:100,93:100,94:100,95:100,96:100,97:100,98:100,99:100,100:106,101:106,102:106,103:106,104:106,105:106,106:106,107:106,108:106,109:106,110:116,112:116,113:116,114:116,115:116,116:116,117:116,118:116,119:116,120:116},M={9020:15,9061:15,9062:13,9063:16,9064:16,9065:16,9071:13,9072:11,9073:15,9074:13,9081:13,9082:11,9100:16,9102:16,9103:20,9104:20,9111:20,9112:20,9113:20,9121:16,9122:16,9123:20,9124:16,9125:20,9130:16,9131:16,9132:16,9133:20,9135:20,9141:20,9142:20,9143:20,9150:20,9155:20,9161:16,9162:13,9163:16,9170:16,9173:16,9181:13,9182:11,9183:11,9184:10,9201:15,9210:11,9212:11,9220:8,9231:10,9232:8,9241:8,9300:16,9311:16,9312:16,9313:16,9314:16,9321:16,9322:20,9323:20,9330:16,9333:16,9334:16,9335:20,9341:20,9342:16,9343:16,9344:15,9345:15,9346:15,9360:20,9361:20,9362:20,9363:20,9371:16,9372:16,9373:20,9374:20,9375:20,9376:20,9473:20,9500:8,9504:8,9520:8,9521:8,9523:8,9524:8,9530:8,9531:8,9535:10,9536:8,9541:8,9542:10,9543:10,9544:10,9545:15,9546:15,9551:8,9552:8,9555:16,9556:16,9560:11,9562:13,9563:16,9564:16,9565:16,9570:8,9571:16,9572:16,9580:8,9581:8,9582:8,9583:8,9584:8,9585:8,9586:8,9587:8,9601:8,9602:8,9611:8,9612:8,9613:8,9614:11,9615:11,9620:15,9622:16,9623:11,9624:13,9631:16,9632:16,9633:16,9634:16,9635:16,9640:20,9651:20,9652:20,9653:20,9654:20,9655:20,9701:8,9702:8,9710:8,9711:8,9712:8,9713:8,9714:8,9721:8,9722:8,9751:8,9752:8,9753:8,9754:15,9761:11,9762:16,9771:13,9772:15,9773:16,9781:16,9782:20,9800:8,9805:8,9811:10,9812:10,9813:10,9814:10,9815:10,9816:11,9821:13,9822:15,9831:15,9832:16,9833:16,9841:16,9842:16,9843:20,9844:20,9851:8,9852:8,9853:8,9854:8,9861:8,9862:11,9863:11,9871:8,9872:8,9873:8,9900:20,9903:20,9905:16,9906:16,9907:16,9908:16,9909:16,9911:20,9912:20,9913:20,9918:20,9919:20,9920:20,9931:20,9932:20,9941:20,9942:20,9943:20,9951:16,9952:16,9953:16,9954:16,9961:16,9962:20,9963:20,9971:20,9972:20,9974:20,9981:20,9990:16,9991:16,9992:16};function $e({visible:_,onClose:g,children:t,title:A,icon:E}){return _?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backdropFilter:"blur(8px)",background:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",padding:20},children:e.jsxs("div",{style:{width:"100%",maxWidth:400,borderRadius:20,background:"linear-gradient(180deg, #fff 0%, #f8f9fa 100%)",boxShadow:"0 4px 24px rgba(0,0,0,0.15)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:20},children:[E,e.jsx("span",{style:{fontSize:20,fontWeight:"bold",color:"#333",flex:1,textAlign:"center",margin:"0 10px"},children:A}),e.jsx("button",{onClick:g,style:{width:32,height:32,borderRadius:16,background:"#f5f5f5",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},"aria-label":"Zatvori modal",children:e.jsx("span",{style:{fontSize:24,color:"#999"},children:"×"})})]}),t]})}):null}new Date().getFullYear();const ke=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function Ve(){const _=Ce(),{drivers:g}=Re(),[t,A]=n.useState("night"),E={night:{background:"from-slate-900 via-blue-900 to-indigo-900"}};n.useEffect(()=>{A("night")},[]);const se=()=>{try{const r=typeof window<"u"?localStorage.getItem("bde_current_user"):null;if(r){const s=JSON.parse(r);if(s!=null&&s.name)return s.name}const a=typeof window<"u"?localStorage.getItem("DRIVER_TURA"):null;if(a&&g&&g.length){const s=g.find(d=>d.tura===a);if(s)return s.ime}}catch{}return""},[C,ne]=n.useState(se),oe=n.useRef(!1),[I,V]=n.useState(N(new Date,"yyyy-MM-dd")),[R,P]=n.useState(""),[v,H]=n.useState(""),[w,L]=n.useState(""),[B,K]=n.useState(0),[T,Z]=n.useState(!1),[Y,le]=n.useState([]),[ie,ce]=n.useState(0),[de,ge]=n.useState(0),[xe,ue]=n.useState(0),[me,q]=n.useState(!0),[x,G]=n.useState(null),[O,Je]=n.useState(""),[p,W]=n.useState(new Date().getFullYear()),[u,$]=n.useState(new Date().getMonth());n.useEffect(()=>{try{localStorage.removeItem("EXTRA_SELECTED_DRIVER")}catch{}if(!g||g.length===0)return;const a=(()=>{try{return JSON.parse(localStorage.getItem("bde_current_user")||"null")}catch{return null}})();let s="";if(a!=null&&a.name)s=a.name;else{const d=localStorage.getItem("DRIVER_TURA"),h=d?g.find(y=>y.tura===d):null;h&&(s=h.ime)}s&&s!==C&&ne(s),oe.current=!0},[g]),n.useMemo(()=>{const r=g?[...g]:[],a=(()=>{try{return JSON.parse(localStorage.getItem("bde_current_user")||"null")}catch{return null}})(),s=a!=null&&a.username?r.find(c=>c.tura===a.username):null,d=s?[s,...r]:r,h=new Set,y=d.filter(c=>{const l=c.tura||c.id;return h.has(l)?!1:(h.add(l),!0)}),f=["8610","8620","8630","8640"];return y.sort((c,l)=>{const b=f.indexOf(String(c.tura)),D=f.indexOf(String(l.tura));if(b!==-1||D!==-1)return b===-1?1:D===-1?-1:b-D;const o=String(c.tura||""),m=String(l.tura||""),i=o.localeCompare(m,void 0,{numeric:!0});return i!==0?i:String(c.ime||"").localeCompare(String(l.ime||""),void 0,{sensitivity:"base"})}),[{ime:"",tura:"ALL"},...y]},[g]);const z=n.useCallback(async()=>{q(!0);try{const r=new Date(p,u,1),a=new Date(p,u+1,0),s=N(r,"yyyy-MM-dd"),d=N(a,"yyyy-MM-dd");console.log("📊 [FETCH RIDES] Date range:",{from:s,to:d}),console.log("📊 [FETCH RIDES] Filter params:",{filterYear:p,filterMonth:u}),console.log("📊 [FETCH RIDES] Učitavam odobrene vožnje iz extra_rides tabele...");const{data:h,error:y}=await S.from("extra_rides").select("*").gte("created_at",`${p}-${(u+1).toString().padStart(2,"0")}-01`).lte("created_at",`${p}-${(u+1).toString().padStart(2,"0")}-31`);console.log("📊 [FETCH RIDES] Raw approved data:",h),console.log("📊 [FETCH RIDES] Approved error:",y),console.log("📊 [FETCH RIDES] Učitavam pending vožnje iz extra_rides_pending tabele...");const{data:f,error:c}=await S.from("extra_rides_pending").select("*").gte("date",s).lte("date",d).eq("status","pending");console.log("📊 [FETCH RIDES] Raw pending data:",f),console.log("📊 [FETCH RIDES] Pending error:",c);let l=(h||[]).map((o,m)=>{if(console.log(`🔄 [FETCH RIDES] Mapping approved ride ${m+1}:`,o),o.ride_details){const i=o.ride_details,J={id:o.id,driver:i.driver||i.vozac||o.driver_name,date:i.date||i.datum,tura:i.tura,plz:i.plz,broj_adresa:i.broj_adresa||i.brojAdresa,cijena:i.cijena||0,status:"approved",created_at:o.created_at};return console.log(`✅ [FETCH RIDES] Mapped approved ride ${m+1}:`,J),console.log(`📅 [FETCH RIDES] Date value for ride ${m+1}:`,J.date,typeof J.date),J}else{const i={...o,status:"approved"};return console.log(`📅 [FETCH RIDES] Direct mapped ride ${m+1}:`,i),console.log(`📅 [FETCH RIDES] Date value for direct ride ${m+1}:`,i.date,typeof i.date),i}}),b=f||[];console.log("🔄 [FETCH RIDES] Mapped approved rides:",l),console.log("🔄 [FETCH RIDES] Raw pending rides:",b),O&&(l=l.filter(o=>o.driver===O),b=b.filter(o=>o.driver===O));const D=[...b.map(o=>({...o,status:"pending"})),...l.map(o=>({...o,status:"approved"}))].sort((o,m)=>new Date(m.date)-new Date(o.date));le(D),ce(b.length),ge(l.length),ue(l.reduce((o,m)=>o+(m.cijena||0),0))}catch(r){console.error(r)}finally{q(!1)}},[p,u,O]);n.useEffect(()=>{z()},[z]),n.useEffect(()=>{const r=parseInt(w),a=parseInt(v),s=!isNaN(r)&&U[r]?U[r]:0,d=!isNaN(a)&&M[a]?M[a]:0;K(s+d)},[w,v]);const he=async()=>{var r;if(!C||!I||!R||!v||!w){alert("Unesite sve podatke!");return}console.log("🚀 [DODAJ VOŽNJU] Početak dodavanja vožnje..."),console.log("🔍 [DODAJ VOŽNJU] Supabase client status:",!!S),console.log("🔍 [DODAJ VOŽNJU] Supabase URL:",(r=S)==null?void 0:r.supabaseUrl),Z(!0);try{const a=(()=>{try{return JSON.parse(localStorage.getItem("bde_current_user")||"null")}catch{return null}})(),s=parseInt(w),d=parseInt(v),h=U[s]||0,y=M[d]||0,f={driver:C,date:I,tura:R,plz:v,broj_adresa:s,cijena:B,plz_price:y,adresa_price:h,action:"create",created_by:(a==null?void 0:a.username)||R||null,status:"pending",created_at:new Date().toISOString()};console.log("🔄 [DODAJ VOŽNJU] Podaci za slanje:",f),console.log('🔄 [DODAJ VOŽNJU] Pozivam supabase.from("extra_rides_pending").insert()...');const{error:c}=await S.from("extra_rides_pending").insert([f]);if(console.log("✅ [DODAJ VOŽNJU] Supabase odgovor - error:",c),c)throw c;console.log("✅ [DODAJ VOŽNJU] Vožnja uspešno dodana u bazu!"),console.log("🔄 [DODAJ VOŽNJU] Pozivam realtimeService.triggerDataChange()...");try{Oe.triggerDataChange("extraRides"),console.log("✅ [DODAJ VOŽNJU] RealtimeService triggerovan uspešno")}catch(l){console.error("❌ [DODAJ VOŽNJU] RealtimeService greška:",l)}V(N(new Date,"yyyy-MM-dd")),P(""),H(""),L(""),K(0),k.current&&k.current.focus(),console.log("🔄 [DODAJ VOŽNJU] Pozivam fetchRides() za refresh podataka...");try{await z(),console.log("✅ [DODAJ VOŽNJU] fetchRides() završen uspešno")}catch(l){console.error("❌ [DODAJ VOŽNJU] fetchRides() greška:",l)}alert("Vožnja dodana!")}catch(a){console.error("❌ [DODAJ VOŽNJU] GREŠKA:",a),console.error("❌ [DODAJ VOŽNJU] Error name:",a.name),console.error("❌ [DODAJ VOŽNJU] Error message:",a.message),console.error("❌ [DODAJ VOŽNJU] Error stack:",a.stack),alert("Greška: "+a.message)}finally{console.log("🏁 [DODAJ VOŽNJU] Završetak procesa dodavanja"),Z(!1)}},pe=n.useRef(null),k=n.useRef(null),X=n.useRef(null),Q=n.useRef(null),F=(r,a)=>{r.key==="Enter"&&(r.preventDefault(),a&&a.current&&a.current.focus())},be=()=>{u===0?($(11),W(p-1)):$(u-1)},ye=()=>{u===11?($(0),W(p+1)):$(u+1)},fe=()=>`bg-gradient-to-br ${(E[t]||E.default).background}`;return e.jsxs("div",{className:`min-h-screen ${fe()} ${t==="night"?"text-white":"text-gray-800"}`,children:[e.jsx(j.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`${t==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/50"} backdrop-blur-xl border-b sticky top-0 z-50`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>_("/"),className:`p-2 rounded-xl ${t==="night"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(je,{className:"w-6 h-6"})}),e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${t==="night"?"text-white":"text-gray-800"}`,children:"Posebne Vožnje"})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`mb-6 p-4 md:p-6 rounded-2xl ${t==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:be,className:`p-2 rounded-lg ${t==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(ve,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-center",children:e.jsxs("h2",{className:`text-2xl font-bold ${t==="night"?"text-white":"text-gray-800"}`,children:[ke[u]," ",p]})}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`p-2 rounded-lg ${t==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:`p-4 rounded-xl ${t==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ee,{className:`w-5 h-5 ${t==="night"?"text-yellow-400":"text-yellow-600"}`}),e.jsx("span",{className:`text-sm ${t==="night"?"text-gray-400":"text-gray-600"}`,children:"Na čekanju"})]}),e.jsx("p",{className:`text-2xl font-bold ${t==="night"?"text-white":"text-gray-800"}`,children:ie})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(te,{className:`w-5 h-5 ${t==="night"?"text-green-400":"text-green-600"}`}),e.jsx("span",{className:`text-sm ${t==="night"?"text-gray-400":"text-gray-600"}`,children:"Odobreno"})]}),e.jsx("p",{className:`text-2xl font-bold ${t==="night"?"text-white":"text-gray-800"}`,children:de})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{className:`w-5 h-5 ${t==="night"?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-sm ${t==="night"?"text-gray-400":"text-gray-600"}`,children:"Ukupno"})]}),e.jsxs("p",{className:`text-2xl font-bold ${t==="night"?"text-white":"text-gray-800"}`,children:[xe.toFixed(0),"€"]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsx("h3",{className:`text-lg font-bold mb-4 ${t==="night"?"text-white":"text-gray-800"}`,children:"Dodaj novu vožnju"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${t==="night"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(we,{className:"w-4 h-4 inline mr-1"})," Datum"]}),e.jsx("input",{ref:pe,type:"date",value:I,onChange:r=>V(r.target.value),onClick:r=>r.target.showPicker&&r.target.showPicker(),onKeyDown:r=>F(r,k),className:`w-full px-3 py-2 rounded-lg ${t==="night"?"bg-gray-800 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${t==="night"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(De,{className:"w-4 h-4 inline mr-1"})," Vozač"]}),e.jsx("input",{type:"text",value:C||"",disabled:!0,placeholder:"Ulogovani vozač",className:`w-full px-3 py-2 rounded-lg ${t==="night"?"bg-gray-800 text-gray-400 border-gray-600":"bg-gray-100 text-gray-600 border-gray-300"} border`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${t==="night"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(ae,{className:"w-4 h-4 inline mr-1"})," Tura"]}),e.jsx("input",{ref:k,type:"number",placeholder:"4 broja (1000-9999)",min:"1000",max:"9999",value:R,onChange:r=>{const a=r.target.value;(a===""||a.length<=4&&!isNaN(a))&&P(a)},onKeyDown:r=>F(r,X),className:`w-full px-3 py-2 rounded-lg ${t==="night"?"bg-gray-800 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-blue-500`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${t==="night"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(Se,{className:"w-4 h-4 inline mr-1"})," PLZ"]}),e.jsx("input",{ref:X,type:"number",placeholder:"PLZ",value:v,onChange:r=>H(r.target.value),onKeyDown:r=>F(r,Q),className:`w-full px-3 py-2 rounded-lg ${t==="night"?"bg-gray-800 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-blue-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="night"?"text-gray-300":"text-gray-700"}`,children:"Broj adresa"}),e.jsx("input",{ref:Q,type:"number",placeholder:"Broj adresa",value:w,onChange:r=>L(r.target.value),onKeyDown:r=>{if(r.key==="Enter"){r.preventDefault();const a=document.querySelector('button[type="button"]');a&&a.click()}},className:`w-full px-3 py-2 rounded-lg ${t==="night"?"bg-gray-800 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-blue-500`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${t==="night"?"text-gray-300":"text-gray-700"}`,children:[e.jsx(re,{className:"w-4 h-4 inline mr-1"})," Cijena"]}),e.jsx("input",{type:"text",value:`${B.toFixed(2)} €`,disabled:!0,className:`w-full px-3 py-2 rounded-lg ${t==="night"?"bg-gray-800 text-green-400 border-gray-600":"bg-gray-100 text-green-600 border-gray-300"} border font-bold`})]})]}),e.jsx(j.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:he,disabled:T,className:`mt-4 w-full px-6 py-3 rounded-xl font-medium transition-all ${T?"bg-gray-400 cursor-not-allowed":t==="night"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:T?"Dodavanje...":"Dodaj vožnju"})]})]}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`rounded-2xl ${t==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/70 border-gray-200/30"} border backdrop-blur-xl overflow-hidden`,children:me?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:t==="night"?"text-gray-400":"text-gray-600",children:"Učitavanje..."})]}):Y.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ae,{className:`w-16 h-16 mx-auto mb-4 ${t==="night"?"text-gray-600":"text-gray-400"}`}),e.jsx("p",{className:`text-lg font-medium mb-2 ${t==="night"?"text-white":"text-gray-900"}`,children:"Nema vožnji"}),e.jsx("p",{className:t==="night"?"text-gray-400":"text-gray-600",children:"Dodajte prvu posebnu vožnju gore"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${t==="night"?"bg-gray-700/50":"bg-gray-100/80"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold",style:{color:t==="night"?"#fff":"#1f2937"},children:"Datum"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold",style:{color:t==="night"?"#fff":"#1f2937"},children:"Vozač"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold",style:{color:t==="night"?"#fff":"#1f2937"},children:"Tura"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold",style:{color:t==="night"?"#fff":"#1f2937"},children:"PLZ"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold",style:{color:t==="night"?"#fff":"#1f2937"},children:"Adrese"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold",style:{color:t==="night"?"#fff":"#1f2937"},children:"Cijena"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold",style:{color:t==="night"?"#fff":"#1f2937"},children:"Status"})]})}),e.jsx("tbody",{children:Y.map((r,a)=>e.jsxs(j.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:a*.02},onClick:()=>G(r),className:`border-t ${t==="night"?"border-gray-700/50 hover:bg-gray-700/30":"border-gray-200/50 hover:bg-gray-50"} cursor-pointer transition-colors`,children:[e.jsx("td",{className:"px-4 py-3 text-sm",style:{color:t==="night"?"#e5e7eb":"#374151"},children:(()=>{try{if(!r.date)return"N/A";const s=new Date(r.date);return isNaN(s.getTime())?"Invalid Date":N(s,"dd.MM.yyyy")}catch(s){return console.error("❌ Date formatting error for ride:",r,s),"Error"}})()}),e.jsx("td",{className:"px-4 py-3 text-sm",style:{color:t==="night"?"#e5e7eb":"#374151"},children:r.driver}),e.jsx("td",{className:"px-4 py-3 text-center text-sm",style:{color:t==="night"?"#e5e7eb":"#374151"},children:r.tura}),e.jsx("td",{className:"px-4 py-3 text-center text-sm",style:{color:t==="night"?"#e5e7eb":"#374151"},children:r.plz}),e.jsx("td",{className:"px-4 py-3 text-center text-sm",style:{color:t==="night"?"#e5e7eb":"#374151"},children:r.broj_adresa}),e.jsxs("td",{className:"px-4 py-3 text-center text-sm font-bold",style:{color:t==="night"?"#4ade80":"#15803d"},children:[Number(r.cijena).toFixed(0),"€"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${r.status==="approved"?t==="night"?"bg-green-900/30 text-green-400":"bg-green-100 text-green-700":r.status==="rejected"?t==="night"?"bg-red-900/30 text-red-400":"bg-red-100 text-red-700":t==="night"?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-700"}`,children:[r.status==="approved"?e.jsx(te,{className:"w-3 h-3"}):r.status==="rejected"?e.jsx(Ee,{className:"w-3 h-3"}):e.jsx(ee,{className:"w-3 h-3"}),r.status==="approved"?"Odobreno":r.status==="rejected"?"Odbijeno":"Čekanje"]})})]},a))})]})})})]}),x&&e.jsx($e,{isOpen:!!x,onClose:()=>G(null),title:"Detalji vožnje",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Datum:"})," ",N(new Date(x.date),"dd.MM.yyyy")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Vozač:"})," ",x.driver]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Tura:"})," ",x.tura]}),e.jsxs("div",{children:[e.jsx("strong",{children:"PLZ:"})," ",x.plz]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Broj adresa:"})," ",x.broj_adresa]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Cijena:"})," ",Number(x.cijena).toFixed(0)," €"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:x.status==="approved"?"text-green-600 font-bold":x.status==="rejected"?"text-red-600 font-bold":"text-yellow-600 font-bold",children:x.status==="approved"?"✅ Odobreno":x.status==="rejected"?"❌ Odbijeno":"⏳ Na čekanju"})]})]})})]})}export{Ve as default};

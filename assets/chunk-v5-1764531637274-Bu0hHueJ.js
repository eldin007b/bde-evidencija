import{j as e,m as x,C as Le,T as Re,a as ua,A as it,b as ma,c as Mt,W as ga,K as zt,L as pa,X as xa,d as ha,e as Pt,f as We,g as lt,h as fa,N as ba,U as Ze,M as ya,I as va,i as Tt,k as et,l as tt,n as Et,P as at,o as rt,p as wa,q as ja,r as ka,s as yt,t as Na,u as Sa}from"./chunk-v5-1764531637274-J6dRkeHd.js";import{r as i,u as qe}from"./chunk-v5-1764531637274-DzTHeiPn.js";import{s as ie,g as _a,a as Ca}from"./chunk-v5-1764531637274-BlcOrNeD.js";import{e as $a,i as Ia,f as xe}from"./chunk-v5-1764531637274-67jeV4qK.js";import{Q as Da,u as Ye}from"./chunk-v5-1764531637274-CvEu-6dE.js";const ge={getItem:t=>window.localStorage.getItem(t),setItem:(t,a)=>window.localStorage.setItem(t,a),deleteItem:t=>window.localStorage.removeItem(t)},Rt=i.createContext();function Gs({children:t,forceShowInit:a}){const[r,s]=i.useState(!1),[o,u]=i.useState(""),[m,d]=i.useState(""),[n,j]=i.useState("user"),[T,R]=i.useState(""),[q,C]=i.useState("#1769aa"),f=i.useCallback(()=>{const p=ge.getItem("DRIVER_TURA"),Y=ge.getItem("DRIVER_NAME"),D=ge.getItem("DRIVER_ROLE"),L=ge.getItem("DEVICE_ID"),G=ge.getItem("IS_ADMIN");u(p||""),d(Y||""),j(D||"user"),R(L||""),s(G==="true"),G==="true"?C("#cc0000"):Y&&p&&C("#1769aa")},[]);i.useEffect(()=>{f(),typeof window<"u"&&(window.__USER_CONTEXT__={refreshStatus:f})},[f]);const F={isAdmin:r,driverTura:o,driverName:m,driverRole:n,deviceId:T,userColor:q,refreshStatus:f,resetLoginData:()=>(ge.deleteItem("DRIVER_TURA"),ge.deleteItem("DRIVER_NAME"),ge.deleteItem("DRIVER_ROLE"),ge.deleteItem("DEVICE_ID"),ge.deleteItem("IS_ADMIN"),ge.deleteItem("APP_LANG"),f(),typeof a=="function"&&a(),!0),validateDriverAccess:()=>!(!o||!T)};return e.jsx(Rt.Provider,{value:F,children:t})}function Ma(){const t=i.useContext(Rt);if(!t)throw new Error("useUserContext mora biti kori≈°ten unutar <UserProvider>");return t}function Ot(){const[t,a]=i.useState(null),[r,s]=i.useState(!0),[o,u]=i.useState(null),m=i.useCallback(()=>{try{const C=localStorage.getItem("bde_current_user"),f=localStorage.getItem("bde_login_time");if(C&&f){const y=JSON.parse(C);if(Date.now()-parseInt(f)<7*24*60*60*1e3)return y;localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}}catch(C){console.error("Error loading user from storage:",C),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}return null},[]),d=i.useCallback(C=>{try{localStorage.setItem("bde_current_user",JSON.stringify(C)),localStorage.setItem("bde_login_time",Date.now().toString())}catch(f){console.error("Error saving user to storage:",f)}},[]),n=i.useCallback(async C=>{console.log("üöÄ checkDriverExists called with tura:",C),s(!0),u(null);try{const{data:f,error:y}=await ie.from("drivers").select("id, ime, tura, aktivan, role, password_hash").eq("tura",C.toUpperCase()).eq("aktivan",!0).single();if(y)throw console.error("Database error checking driver:",y),new Error(`Vozaƒç sa turom ${C} nije pronaƒëen ili nije aktivan`);console.log("üîç Driver check result:",{id:f.id,ime:f.ime,tura:f.tura,hasPassword:!!f.password_hash,role:f.role});const N={id:f.id,ime:f.ime,tura:f.tura,role:f.role||"driver",hasPassword:!!f.password_hash};return console.log("üéØ Returning from checkDriverExists:",N),N}catch(f){throw u(f.message),f}finally{s(!1)}},[]),j=i.useCallback(async(C,f)=>{s(!0),u(null);try{const y=btoa(f),{error:N}=await ie.from("drivers").update({password_hash:y,last_login:new Date}).eq("id",C);if(N)throw new Error("Gre≈°ka pri postavljanju lozinke");return!0}catch(y){throw u(y.message),y}finally{s(!1)}},[]),T=i.useCallback(async(C,f)=>{s(!0),u(null);try{const{data:y,error:N}=await ie.from("drivers").select("*").eq("tura",C.toUpperCase()).eq("aktivan",!0).single();if(N)throw console.error("Database error during login:",N),new Error(`Vozaƒç sa turom ${C} nije pronaƒëen ili nije aktivan`);if(console.log("üîç Driver found for login:",{tura:y.tura,ime:y.ime,hasPassword:!!y.password_hash,role:y.role}),!y.password_hash)throw new Error("Vozaƒç nema postavljenu lozinku. Kontaktirajte administratora.");if(!(y.password_hash===f||y.password_hash===btoa(f)))throw new Error("Neispravna lozinka");await ie.from("drivers").update({last_login:new Date}).eq("id",y.id);const p={id:y.id,username:y.tura,name:y.ime,role:y.role||"driver",loginTime:Date.now()};return a(p),d(p),p}catch(y){throw u(y.message),y}finally{s(!1)}},[d]),R=i.useCallback(async(C,f)=>{if(!t)throw new Error("Morate biti ulogovani");s(!0),u(null);try{const{data:y,error:N}=await ie.from("drivers").select("password_hash").eq("id",t.id).single();if(N)throw new Error("Gre≈°ka pri provjeri korisnika");if(!(y.password_hash===C||y.password_hash===btoa(C)))throw new Error("Stara lozinka nije ispravna");const p=btoa(f),{error:Y}=await ie.from("drivers").update({password_hash:p}).eq("id",t.id);if(Y)throw new Error("Gre≈°ka pri a≈æuriranju lozinke");return!0}catch(y){throw u(y.message),y}finally{s(!1)}},[t]),q=i.useCallback(()=>{a(null),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time"),u(null),console.log("‚úÖ User logged out")},[]);return i.useEffect(()=>{const C=m();C&&a(C),s(!1)},[m]),{currentUser:t,loading:r,error:o,checkDriverExists:n,setInitialPassword:j,login:T,changePassword:R,logout:q,isAuthenticated:!!t}}const za=()=>({persistClient:t=>{try{const a={timestamp:Date.now(),clientState:JSON.stringify({queries:t.getQueryCache().getAll().filter(r=>{const s=r.queryKey[0];return["drivers","holidays"].includes(s)}).map(r=>({queryKey:r.queryKey,state:r.state}))})};localStorage.setItem("bde_query_cache",JSON.stringify(a))}catch(a){console.warn("Failed to persist query cache:",a)}},restoreClient:()=>{try{const t=localStorage.getItem("bde_query_cache");if(!t)return;const{timestamp:a,clientState:r}=JSON.parse(t),s=24*60*60*1e3;if(Date.now()-a>s){localStorage.removeItem("bde_query_cache");return}return JSON.parse(r)}catch(t){console.warn("Failed to restore query cache:",t),localStorage.removeItem("bde_query_cache")}},removeClient:()=>{localStorage.removeItem("bde_query_cache")}}),ct=za(),Pa=()=>{const t=new Date,a=t.getHours(),r=t.getDay();let s,o;return r>=1&&r<=5&&a>=2&&a<=9?(s=5*60*1e3,o="radni sat (dodaju se novi podaci)"):r>=1&&r<=5&&a>9?(s=2*60*60*1e3,o="radni dan posle 09h"):(s=6*60*60*1e3,o=r===0||r===6?"vikend":"noƒá"),console.log(`üß† Smart cache: ${s/6e4} min (${o})`),s},he=new Da({defaultOptions:{queries:{staleTime:Pa(),cacheTime:4*60*60*1e3,refetchOnWindowFocus:()=>{const t=new Date().getHours(),a=new Date().getDay();return a>=1&&a<=5&&t>=2&&t<=9},refetchOnReconnect:!0,refetchOnMount:!1,retry:2,retryDelay:t=>Math.min(1e3*2**t,3e4),suspense:!1,useErrorBoundary:!1,networkMode:"online"},mutations:{retry:1,networkMode:"online"}}}),le={drivers:{all:["drivers"]},deliveries:{all:["deliveries"],byMonth:(t,a)=>[...le.deliveries.all,"month",t,a],byYear:t=>[...le.deliveries.all,"year",t],byDriver:(t,a,r)=>[...le.deliveries.all,"driver",t,a,r],stats:(t,a)=>[...le.deliveries.all,"stats",t,a]},holidays:{all:["holidays"],byYear:t=>[...le.holidays.all,"year",t]},extraRides:{all:["extraRides"]},driverStats:{all:["driverStats"]}},Fs={drivers:()=>he.invalidateQueries({queryKey:le.drivers.all}),deliveries:()=>he.invalidateQueries({queryKey:le.deliveries.all}),holidays:()=>he.invalidateQueries({queryKey:le.holidays.all}),extraRides:()=>he.invalidateQueries({queryKey:le.extraRides.all}),driverStats:()=>he.invalidateQueries({queryKey:le.driverStats.all}),all:()=>he.invalidateQueries()};try{const t=ct.restoreClient();t!=null&&t.queries&&t.queries.forEach(({queryKey:a,state:r})=>{r.data&&he.setQueryData(a,r.data)})}catch(t){console.warn("Failed to restore query cache on init:",t)}let vt;he.getQueryCache().subscribe(()=>{clearTimeout(vt),vt=setTimeout(()=>{ct.persistClient(he)},1e3)});typeof window<"u"&&window.addEventListener("beforeunload",()=>{ct.persistClient(he)});function wt(t,a){if(typeof t=="function")return t(a);t!=null&&(t.current=a)}function Ta(...t){return a=>{let r=!1;const s=t.map(o=>{const u=wt(o,a);return!r&&typeof u=="function"&&(r=!0),u});if(r)return()=>{for(let o=0;o<s.length;o++){const u=s[o];typeof u=="function"?u():wt(t[o],null)}}}}function Ea(t){const a=Oa(t),r=i.forwardRef((s,o)=>{const{children:u,...m}=s,d=i.Children.toArray(u),n=d.find(Ha);if(n){const j=n.props.children,T=d.map(R=>R===n?i.Children.count(j)>1?i.Children.only(null):i.isValidElement(j)?j.props.children:null:R);return e.jsx(a,{...m,ref:o,children:i.isValidElement(j)?i.cloneElement(j,void 0,T):null})}return e.jsx(a,{...m,ref:o,children:u})});return r.displayName=`${t}.Slot`,r}var Ra=Ea("Slot");function Oa(t){const a=i.forwardRef((r,s)=>{const{children:o,...u}=r;if(i.isValidElement(o)){const m=Va(o),d=La(u,o.props);return o.type!==i.Fragment&&(d.ref=s?Ta(s,m):m),i.cloneElement(o,d)}return i.Children.count(o)>1?i.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var Aa=Symbol("radix.slottable");function Ha(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Aa}function La(t,a){const r={...a};for(const s in a){const o=t[s],u=a[s];/^on[A-Z]/.test(s)?o&&u?r[s]=(...d)=>{const n=u(...d);return o(...d),n}:o&&(r[s]=o):s==="style"?r[s]={...o,...u}:s==="className"&&(r[s]=[o,u].filter(Boolean).join(" "))}return{...t,...r}}function Va(t){var s,o;let a=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,r=a&&"isReactWarning"in a&&a.isReactWarning;return r?t.ref:(a=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function At(t){var a,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(a=0;a<o;a++)t[a]&&(r=At(t[a]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Ht(){for(var t,a,r=0,s="",o=arguments.length;r<o;r++)(t=arguments[r])&&(a=At(t))&&(s&&(s+=" "),s+=a);return s}const jt=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,kt=Ht,Ga=(t,a)=>r=>{var s;if((a==null?void 0:a.variants)==null)return kt(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:u}=a,m=Object.keys(o).map(j=>{const T=r==null?void 0:r[j],R=u==null?void 0:u[j];if(T===null)return null;const q=jt(T)||jt(R);return o[j][q]}),d=r&&Object.entries(r).reduce((j,T)=>{let[R,q]=T;return q===void 0||(j[R]=q),j},{}),n=a==null||(s=a.compoundVariants)===null||s===void 0?void 0:s.reduce((j,T)=>{let{class:R,className:q,...C}=T;return Object.entries(C).every(f=>{let[y,N]=f;return Array.isArray(N)?N.includes({...u,...d}[y]):{...u,...d}[y]===N})?[...j,R,q]:j},[]);return kt(t,m,n,r==null?void 0:r.class,r==null?void 0:r.className)},dt="-",Fa=t=>{const a=qa(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:m=>{const d=m.split(dt);return d[0]===""&&d.length!==1&&d.shift(),Lt(d,a)||Wa(m)},getConflictingClassGroupIds:(m,d)=>{const n=r[m]||[];return d&&s[m]?[...n,...s[m]]:n}}},Lt=(t,a)=>{var m;if(t.length===0)return a.classGroupId;const r=t[0],s=a.nextPart.get(r),o=s?Lt(t.slice(1),s):void 0;if(o)return o;if(a.validators.length===0)return;const u=t.join(dt);return(m=a.validators.find(({validator:d})=>d(u)))==null?void 0:m.classGroupId},Nt=/^\[(.+)\]$/,Wa=t=>{if(Nt.test(t)){const a=Nt.exec(t)[1],r=a==null?void 0:a.substring(0,a.indexOf(":"));if(r)return"arbitrary.."+r}},qa=t=>{const{theme:a,classGroups:r}=t,s={nextPart:new Map,validators:[]};for(const o in r)st(r[o],s,o,a);return s},st=(t,a,r,s)=>{t.forEach(o=>{if(typeof o=="string"){const u=o===""?a:St(a,o);u.classGroupId=r;return}if(typeof o=="function"){if(Ya(o)){st(o(s),a,r,s);return}a.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([u,m])=>{st(m,St(a,u),r,s)})})},St=(t,a)=>{let r=t;return a.split(dt).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},Ya=t=>t.isThemeGetter,Ua=t=>{if(t<1)return{get:()=>{},set:()=>{}};let a=0,r=new Map,s=new Map;const o=(u,m)=>{r.set(u,m),a++,a>t&&(a=0,s=r,r=new Map)};return{get(u){let m=r.get(u);if(m!==void 0)return m;if((m=s.get(u))!==void 0)return o(u,m),m},set(u,m){r.has(u)?r.set(u,m):o(u,m)}}},ot="!",nt=":",Ba=nt.length,Ja=t=>{const{prefix:a,experimentalParseClassName:r}=t;let s=o=>{const u=[];let m=0,d=0,n=0,j;for(let f=0;f<o.length;f++){let y=o[f];if(m===0&&d===0){if(y===nt){u.push(o.slice(n,f)),n=f+Ba;continue}if(y==="/"){j=f;continue}}y==="["?m++:y==="]"?m--:y==="("?d++:y===")"&&d--}const T=u.length===0?o:o.substring(n),R=Ka(T),q=R!==T,C=j&&j>n?j-n:void 0;return{modifiers:u,hasImportantModifier:q,baseClassName:R,maybePostfixModifierPosition:C}};if(a){const o=a+nt,u=s;s=m=>m.startsWith(o)?u(m.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:m,maybePostfixModifierPosition:void 0}}if(r){const o=s;s=u=>r({className:u,parseClassName:o})}return s},Ka=t=>t.endsWith(ot)?t.substring(0,t.length-1):t.startsWith(ot)?t.substring(1):t,Xa=t=>{const a=Object.fromEntries(t.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const o=[];let u=[];return s.forEach(m=>{m[0]==="["||a[m]?(o.push(...u.sort(),m),u=[]):u.push(m)}),o.push(...u.sort()),o}},Qa=t=>({cache:Ua(t.cacheSize),parseClassName:Ja(t),sortModifiers:Xa(t),...Fa(t)}),Za=/\s+/,er=(t,a)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:o,sortModifiers:u}=a,m=[],d=t.trim().split(Za);let n="";for(let j=d.length-1;j>=0;j-=1){const T=d[j],{isExternal:R,modifiers:q,hasImportantModifier:C,baseClassName:f,maybePostfixModifierPosition:y}=r(T);if(R){n=T+(n.length>0?" "+n:n);continue}let N=!!y,F=s(N?f.substring(0,y):f);if(!F){if(!N){n=T+(n.length>0?" "+n:n);continue}if(F=s(f),!F){n=T+(n.length>0?" "+n:n);continue}N=!1}const p=u(q).join(":"),Y=C?p+ot:p,D=Y+F;if(m.includes(D))continue;m.push(D);const L=o(F,N);for(let G=0;G<L.length;++G){const h=L[G];m.push(Y+h)}n=T+(n.length>0?" "+n:n)}return n};function tr(){let t=0,a,r,s="";for(;t<arguments.length;)(a=arguments[t++])&&(r=Vt(a))&&(s&&(s+=" "),s+=r);return s}const Vt=t=>{if(typeof t=="string")return t;let a,r="";for(let s=0;s<t.length;s++)t[s]&&(a=Vt(t[s]))&&(r&&(r+=" "),r+=a);return r};function ar(t,...a){let r,s,o,u=m;function m(n){const j=a.reduce((T,R)=>R(T),t());return r=Qa(j),s=r.cache.get,o=r.cache.set,u=d,d(n)}function d(n){const j=s(n);if(j)return j;const T=er(n,r);return o(n,T),T}return function(){return u(tr.apply(null,arguments))}}const ae=t=>{const a=r=>r[t]||[];return a.isThemeGetter=!0,a},Gt=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ft=/^\((?:(\w[\w-]*):)?(.+)\)$/i,rr=/^\d+\/\d+$/,sr=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,or=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ir=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lr=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ie=t=>rr.test(t),H=t=>!!t&&!Number.isNaN(Number(t)),we=t=>!!t&&Number.isInteger(Number(t)),Ke=t=>t.endsWith("%")&&H(t.slice(0,-1)),be=t=>sr.test(t),cr=()=>!0,dr=t=>or.test(t)&&!nr.test(t),Wt=()=>!1,ur=t=>ir.test(t),mr=t=>lr.test(t),gr=t=>!v(t)&&!w(t),pr=t=>De(t,Ut,Wt),v=t=>Gt.test(t),ke=t=>De(t,Bt,dr),Xe=t=>De(t,yr,H),_t=t=>De(t,qt,Wt),xr=t=>De(t,Yt,mr),Ve=t=>De(t,Jt,ur),w=t=>Ft.test(t),Te=t=>Me(t,Bt),hr=t=>Me(t,vr),Ct=t=>Me(t,qt),fr=t=>Me(t,Ut),br=t=>Me(t,Yt),Ge=t=>Me(t,Jt,!0),De=(t,a,r)=>{const s=Gt.exec(t);return s?s[1]?a(s[1]):r(s[2]):!1},Me=(t,a,r=!1)=>{const s=Ft.exec(t);return s?s[1]?a(s[1]):r:!1},qt=t=>t==="position"||t==="percentage",Yt=t=>t==="image"||t==="url",Ut=t=>t==="length"||t==="size"||t==="bg-size",Bt=t=>t==="length",yr=t=>t==="number",vr=t=>t==="family-name",Jt=t=>t==="shadow",wr=()=>{const t=ae("color"),a=ae("font"),r=ae("text"),s=ae("font-weight"),o=ae("tracking"),u=ae("leading"),m=ae("breakpoint"),d=ae("container"),n=ae("spacing"),j=ae("radius"),T=ae("shadow"),R=ae("inset-shadow"),q=ae("text-shadow"),C=ae("drop-shadow"),f=ae("blur"),y=ae("perspective"),N=ae("aspect"),F=ae("ease"),p=ae("animate"),Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...D(),w,v],G=()=>["auto","hidden","clip","visible","scroll"],h=()=>["auto","contain","none"],l=()=>[w,v,n],I=()=>[Ie,"full","auto",...l()],U=()=>[we,"none","subgrid",w,v],M=()=>["auto",{span:["full",we,w,v]},we,w,v],z=()=>[we,"auto",w,v],E=()=>["auto","min","max","fr",w,v],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],K=()=>["start","end","center","stretch","center-safe","end-safe"],Q=()=>["auto",...l()],te=()=>[Ie,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...l()],$=()=>[t,w,v],ce=()=>[...D(),Ct,_t,{position:[w,v]}],b=()=>["no-repeat",{repeat:["","x","y","space","round"]}],c=()=>["auto","cover","contain",fr,pr,{size:[w,v]}],g=()=>[Ke,Te,ke],S=()=>["","none","full",j,w,v],A=()=>["",H,Te,ke],X=()=>["solid","dashed","dotted","double"],_=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>[H,Ke,Ct,_t],W=()=>["","none",f,w,v],B=()=>["none",H,w,v],ee=()=>["none",H,w,v],ne=()=>[H,w,v],se=()=>[Ie,"full",...l()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[be],breakpoint:[be],color:[cr],container:[be],"drop-shadow":[be],ease:["in","out","in-out"],font:[gr],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[be],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[be],shadow:[be],spacing:["px",H],text:[be],"text-shadow":[be],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ie,v,w,N]}],container:["container"],columns:[{columns:[H,v,w,d]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:h()}],"overscroll-x":[{"overscroll-x":h()}],"overscroll-y":[{"overscroll-y":h()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[we,"auto",w,v]}],basis:[{basis:[Ie,"full","auto",d,...l()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[H,Ie,"auto","initial","none",v]}],grow:[{grow:["",H,w,v]}],shrink:[{shrink:["",H,w,v]}],order:[{order:[we,"first","last","none",w,v]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":E()}],"auto-rows":[{"auto-rows":E()}],gap:[{gap:l()}],"gap-x":[{"gap-x":l()}],"gap-y":[{"gap-y":l()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...K(),"normal"]}],"justify-self":[{"justify-self":["auto",...K()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...K(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...K(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...K(),"baseline"]}],"place-self":[{"place-self":["auto",...K()]}],p:[{p:l()}],px:[{px:l()}],py:[{py:l()}],ps:[{ps:l()}],pe:[{pe:l()}],pt:[{pt:l()}],pr:[{pr:l()}],pb:[{pb:l()}],pl:[{pl:l()}],m:[{m:Q()}],mx:[{mx:Q()}],my:[{my:Q()}],ms:[{ms:Q()}],me:[{me:Q()}],mt:[{mt:Q()}],mr:[{mr:Q()}],mb:[{mb:Q()}],ml:[{ml:Q()}],"space-x":[{"space-x":l()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":l()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[d,"screen",...te()]}],"min-w":[{"min-w":[d,"screen","none",...te()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[m]},...te()]}],h:[{h:["screen","lh",...te()]}],"min-h":[{"min-h":["screen","lh","none",...te()]}],"max-h":[{"max-h":["screen","lh",...te()]}],"font-size":[{text:["base",r,Te,ke]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,w,Xe]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ke,v]}],"font-family":[{font:[hr,v,a]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,w,v]}],"line-clamp":[{"line-clamp":[H,"none",w,Xe]}],leading:[{leading:[u,...l()]}],"list-image":[{"list-image":["none",w,v]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",w,v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[H,"from-font","auto",w,ke]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[H,"auto",w,v]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:l()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",w,v]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",w,v]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ce()}],"bg-repeat":[{bg:b()}],"bg-size":[{bg:c()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},we,w,v],radial:["",w,v],conic:[we,w,v]},br,xr]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:g()}],"gradient-via-pos":[{via:g()}],"gradient-to-pos":[{to:g()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:S()}],"rounded-s":[{"rounded-s":S()}],"rounded-e":[{"rounded-e":S()}],"rounded-t":[{"rounded-t":S()}],"rounded-r":[{"rounded-r":S()}],"rounded-b":[{"rounded-b":S()}],"rounded-l":[{"rounded-l":S()}],"rounded-ss":[{"rounded-ss":S()}],"rounded-se":[{"rounded-se":S()}],"rounded-ee":[{"rounded-ee":S()}],"rounded-es":[{"rounded-es":S()}],"rounded-tl":[{"rounded-tl":S()}],"rounded-tr":[{"rounded-tr":S()}],"rounded-br":[{"rounded-br":S()}],"rounded-bl":[{"rounded-bl":S()}],"border-w":[{border:A()}],"border-w-x":[{"border-x":A()}],"border-w-y":[{"border-y":A()}],"border-w-s":[{"border-s":A()}],"border-w-e":[{"border-e":A()}],"border-w-t":[{"border-t":A()}],"border-w-r":[{"border-r":A()}],"border-w-b":[{"border-b":A()}],"border-w-l":[{"border-l":A()}],"divide-x":[{"divide-x":A()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":A()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[H,w,v]}],"outline-w":[{outline:["",H,Te,ke]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",T,Ge,Ve]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",R,Ge,Ve]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[H,ke]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":A()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",q,Ge,Ve]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[H,w,v]}],"mix-blend":[{"mix-blend":[..._(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":_()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[H]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[w,v]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[H]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ce()}],"mask-repeat":[{mask:b()}],"mask-size":[{mask:c()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",w,v]}],filter:[{filter:["","none",w,v]}],blur:[{blur:W()}],brightness:[{brightness:[H,w,v]}],contrast:[{contrast:[H,w,v]}],"drop-shadow":[{"drop-shadow":["","none",C,Ge,Ve]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",H,w,v]}],"hue-rotate":[{"hue-rotate":[H,w,v]}],invert:[{invert:["",H,w,v]}],saturate:[{saturate:[H,w,v]}],sepia:[{sepia:["",H,w,v]}],"backdrop-filter":[{"backdrop-filter":["","none",w,v]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[H,w,v]}],"backdrop-contrast":[{"backdrop-contrast":[H,w,v]}],"backdrop-grayscale":[{"backdrop-grayscale":["",H,w,v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[H,w,v]}],"backdrop-invert":[{"backdrop-invert":["",H,w,v]}],"backdrop-opacity":[{"backdrop-opacity":[H,w,v]}],"backdrop-saturate":[{"backdrop-saturate":[H,w,v]}],"backdrop-sepia":[{"backdrop-sepia":["",H,w,v]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":l()}],"border-spacing-x":[{"border-spacing-x":l()}],"border-spacing-y":[{"border-spacing-y":l()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",w,v]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[H,"initial",w,v]}],ease:[{ease:["linear","initial",F,w,v]}],delay:[{delay:[H,w,v]}],animate:[{animate:["none",p,w,v]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,w,v]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:B()}],"rotate-x":[{"rotate-x":B()}],"rotate-y":[{"rotate-y":B()}],"rotate-z":[{"rotate-z":B()}],scale:[{scale:ee()}],"scale-x":[{"scale-x":ee()}],"scale-y":[{"scale-y":ee()}],"scale-z":[{"scale-z":ee()}],"scale-3d":["scale-3d"],skew:[{skew:ne()}],"skew-x":[{"skew-x":ne()}],"skew-y":[{"skew-y":ne()}],transform:[{transform:[w,v,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:se()}],"translate-x":[{"translate-x":se()}],"translate-y":[{"translate-y":se()}],"translate-z":[{"translate-z":se()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",w,v]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":l()}],"scroll-mx":[{"scroll-mx":l()}],"scroll-my":[{"scroll-my":l()}],"scroll-ms":[{"scroll-ms":l()}],"scroll-me":[{"scroll-me":l()}],"scroll-mt":[{"scroll-mt":l()}],"scroll-mr":[{"scroll-mr":l()}],"scroll-mb":[{"scroll-mb":l()}],"scroll-ml":[{"scroll-ml":l()}],"scroll-p":[{"scroll-p":l()}],"scroll-px":[{"scroll-px":l()}],"scroll-py":[{"scroll-py":l()}],"scroll-ps":[{"scroll-ps":l()}],"scroll-pe":[{"scroll-pe":l()}],"scroll-pt":[{"scroll-pt":l()}],"scroll-pr":[{"scroll-pr":l()}],"scroll-pb":[{"scroll-pb":l()}],"scroll-pl":[{"scroll-pl":l()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",w,v]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[H,Te,ke,Xe]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},jr=ar(wr);function Ne(...t){return jr(Ht(t))}const kr=Ga("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ee=i.forwardRef(({className:t,variant:a,size:r,asChild:s=!1,...o},u)=>{const m=s?Ra:"button";return e.jsx(m,{className:Ne(kr({variant:a,size:r,className:t})),ref:u,...o})});Ee.displayName="Button";function $t({user:t,onChangePassword:a,onLogout:r,scraperData:s,currentTheme:o="default",themes:u}){const[m,d]=i.useState(!1),n=i.useRef(null),j=i.useRef(null),T=i.useRef(null),R=qe(),C=u||{default:{accent:"from-blue-600 to-purple-600",gradient:"bg-gradient-to-r from-blue-500 to-purple-500"},sunrise:{accent:"from-orange-500 to-pink-500",gradient:"bg-gradient-to-r from-orange-400 to-pink-400"},afternoon:{accent:"from-blue-500 to-cyan-500",gradient:"bg-gradient-to-r from-blue-400 to-cyan-400"},evening:{accent:"from-purple-600 to-indigo-600",gradient:"bg-gradient-to-r from-purple-500 to-indigo-500"},night:{accent:"from-gray-600 to-blue-800",gradient:"bg-gradient-to-r from-gray-500 to-blue-700"}},f=()=>s?s.status==="completed"?{text:"Uspe≈°no",color:"text-emerald-500"}:s.status==="in_progress"?{text:"U toku",color:"text-amber-500"}:s.status==="failure"?{text:"Gre≈°ka",color:"text-rose-500"}:{text:"Nepoznato",color:"text-gray-500"}:{text:"Nepoznato",color:"text-gray-500"},y=()=>{var Y,D,L;if(!s)return"Nepoznato";const p=[s.formattedTimestamp,s.timestamp,(Y=s.raw)==null?void 0:Y.updated_at,(D=s.raw)==null?void 0:D.run_started_at,(L=s.raw)==null?void 0:L.created_at];for(const G of p)if(G){const h=new Date(G);if(!isNaN(h.getTime()))return`${String(h.getDate()).padStart(2,"0")}.${String(h.getMonth()+1).padStart(2,"0")} ${String(h.getHours()).padStart(2,"0")}:${String(h.getMinutes()).padStart(2,"0")}`}return"Nepoznato"};i.useEffect(()=>{const p=Y=>{const D=j.current&&!j.current.contains(Y.target),L=n.current&&!n.current.contains(Y.target),G=T.current&&!T.current.contains(Y.target);D&&L&&G&&d(!1)};if(m)return document.addEventListener("mousedown",p),document.addEventListener("touchstart",p),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("touchstart",p)}},[m]);const N=()=>d(!m),F=p=>{d(!1),setTimeout(()=>p==null?void 0:p(),100)};return e.jsxs("div",{className:"relative inline-block text-left",ref:n,style:{zIndex:m?999999:"auto",position:"relative"},children:[e.jsx(x.div,{ref:j,onClick:N,whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:e.jsxs(x.div,{className:`flex items-center gap-3 px-3 py-2 ${o==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-2xl rounded-full border ${o==="night"?"border-white/10":"border-gray-100/50"} cursor-pointer transition-all duration-300`,style:{boxShadow:o==="night"?"6px 6px 12px rgba(0,0,0,0.4), -6px -6px 12px rgba(255,255,255,0.02)":"6px 6px 12px rgba(0,0,0,0.08), -6px -6px 12px rgba(255,255,255,0.8)"},whileHover:{boxShadow:o==="night"?"8px 8px 16px rgba(0,0,0,0.6), -8px -8px 16px rgba(255,255,255,0.05)":"8px 8px 16px rgba(0,0,0,0.12), -8px -8px 16px rgba(255,255,255,0.9)"},children:[e.jsx(x.div,{className:`w-8 h-8 rounded-full bg-gradient-to-br ${C[o].accent} flex items-center justify-center text-white font-bold`,whileHover:{rotate:[0,5,-5,0],scale:1.1},transition:{duration:.5},children:(t==null?void 0:t.role)==="admin"?e.jsx(Le,{className:"w-6 h-6 text-amber-400"}):e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:`font-medium ${o==="night"?"text-gray-200":"text-gray-800"}`,children:(t==null?void 0:t.name)||"Korisnik"}),e.jsx(x.div,{animate:{rotate:m?180:0},transition:{duration:.3},children:e.jsx(ua,{className:`w-4 h-4 ${o==="night"?"text-gray-400":"text-gray-500"}`})})]})}),e.jsx(it,{children:m&&e.jsxs(x.div,{ref:T,initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.25},className:`absolute right-0 mt-2 w-72 ${o==="night"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-3xl border ${o==="night"?"border-white/30":"border-gray-300"} rounded-2xl p-4`,style:{zIndex:999999,position:"absolute",top:"100%",right:0,boxShadow:o==="night"?"0 25px 50px rgba(0,0,0,0.8), 0 10px 30px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.2)":"0 25px 50px rgba(0,0,0,0.15), 0 10px 30px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.1)",transform:"translateZ(0)",willChange:"transform, opacity"},onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(x.div,{className:`w-10 h-10 bg-gradient-to-br ${C[o].accent} rounded-full flex items-center justify-center text-white font-bold`,whileHover:{scale:1.1,rotate:5},transition:{duration:.3},style:{boxShadow:o==="night"?"3px 3px 6px rgba(0,0,0,0.6), -2px -2px 4px rgba(255,255,255,0.05)":"3px 3px 6px rgba(0,0,0,0.15), -2px -2px 4px rgba(255,255,255,0.8)"},children:(t==null?void 0:t.role)==="admin"?e.jsx(Le,{className:"w-6 h-6 text-amber-400"}):e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold text-sm ${o==="night"?"text-gray-100":"text-gray-900"}`,children:(t==null?void 0:t.name)||"Korisnik"}),e.jsx("p",{className:`text-xs ${o==="night"?"text-gray-400":"text-gray-500"}`,children:(t==null?void 0:t.username)||"korisnik"})]}),(t==null?void 0:t.role)==="admin"&&e.jsx(x.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(Le,{className:"w-4 h-4 text-amber-500"})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:(t==null?void 0:t.role)!=="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs(x.div,{className:`${o==="night"?"bg-gray-800/50 border-gray-600/50":"bg-blue-50/80 border-blue-200/60"} border rounded-xl p-2 transition-all hover:shadow-sm backdrop-blur-sm`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx("div",{className:`text-xs font-medium ${o==="night"?"text-blue-400":"text-blue-600"} mb-1`,children:"Zadnja plata"}),e.jsx("div",{className:`font-bold ${o==="night"?"text-blue-300":"text-blue-900"} text-sm`,children:(t==null?void 0:t.zadnjaPlata)||"-"})]}),e.jsxs(x.div,{className:`${o==="night"?"bg-gray-800/50 border-gray-600/50":"bg-emerald-50/80 border-emerald-200/60"} border rounded-xl p-2 transition-all hover:shadow-sm backdrop-blur-sm`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx("div",{className:`text-xs font-medium ${o==="night"?"text-emerald-400":"text-emerald-600"} mb-1`,children:"Ukupna zarada"}),e.jsx("div",{className:`font-bold ${o==="night"?"text-emerald-300":"text-emerald-900"} text-sm`,children:(t==null?void 0:t.ukupnaZarada)||"-"})]})]})}),(t==null?void 0:t.role)==="admin"&&s&&e.jsxs(x.div,{className:`${o==="night"?"bg-gray-800/50 border-gray-600/50":"bg-blue-50/80 border-blue-200/60"} border rounded-xl p-2 mb-3 backdrop-blur-sm`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:`${o==="night"?"text-gray-300":"text-gray-600"} flex items-center gap-1`,children:[e.jsx(ma,{className:`w-3 h-3 ${o==="night"?"text-blue-400":"text-blue-500"}`}),"Status:"]}),e.jsx("span",{className:`font-medium ${f().color}`,children:f().text})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs mt-1",children:[e.jsxs("span",{className:`${o==="night"?"text-gray-400":"text-gray-500"} flex items-center gap-1`,children:[e.jsx(Mt,{className:"w-3 h-3"}),"Vrijeme:"]}),e.jsx("span",{className:`${o==="night"?"text-gray-300":"text-gray-700"} font-mono`,children:y()})]})]}),e.jsxs("div",{className:"space-y-1",children:[(t==null?void 0:t.role)==="admin"?e.jsx(x.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Ee,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${o==="night"?"hover:bg-gray-700/50 text-blue-400":"hover:bg-blue-50 text-blue-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>F(()=>R("/admin")),children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Admin Panel"]})}):e.jsx(x.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Ee,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${o==="night"?"hover:bg-gray-700/50 text-emerald-400":"hover:bg-green-50 text-emerald-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>F(()=>R("/payroll-list")),children:[e.jsx(ga,{className:"w-4 h-4 mr-2"}),"Platne liste"]})}),e.jsx(x.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Ee,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${o==="night"?"hover:bg-gray-700/50 text-amber-400":"hover:bg-amber-50 text-amber-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>{typeof a=="function"&&a()},children:[e.jsx(zt,{className:"w-4 h-4 mr-2"}),"Promijeni ≈°ifru"]})}),e.jsx(x.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Ee,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${o==="night"?"hover:bg-gray-700/50 text-rose-400":"hover:bg-rose-50 text-rose-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>{d(!1),setTimeout(()=>{try{typeof r=="function"&&r();try{localStorage.removeItem("bde_current_user")}catch{}try{localStorage.removeItem("bde_login_time")}catch{}window.dispatchEvent(new CustomEvent("bde:logout",{detail:{source:"UserMenu"}})),R("/")}catch(p){console.error("Logout failed",p)}},120)},children:[e.jsx(pa,{className:"w-4 h-4 mr-2"}),"Odjava"]})})]})]})})]})}const Kt=i.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("rounded-xl border bg-card text-card-foreground shadow",t),...a}));Kt.displayName="Card";const Nr=i.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("flex flex-col space-y-1.5 p-6",t),...a}));Nr.displayName="CardHeader";const Sr=i.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("font-semibold leading-none tracking-tight",t),...a}));Sr.displayName="CardTitle";const _r=i.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("text-sm text-muted-foreground",t),...a}));_r.displayName="CardDescription";const Cr=i.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("p-6 pt-0",t),...a}));Cr.displayName="CardContent";const $r=i.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("flex items-center p-6 pt-0",t),...a}));$r.displayName="CardFooter";function Ir({isOpen:t,onClose:a,onChangePassword:r,loading:s}){const[o,u]=i.useState(""),[m,d]=i.useState(""),[n,j]=i.useState(""),[T,R]=i.useState(null),[q,C]=i.useState(!1),[f,y]=i.useState(!1),[N,F]=i.useState("default"),p={default:{background:"from-slate-50 via-blue-50 to-indigo-100",accent:"from-blue-500 to-purple-500",particles:["bg-blue-400/20","bg-purple-400/20","bg-indigo-400/20"]},sunrise:{background:"from-orange-50 via-pink-50 to-red-100",accent:"from-orange-500 to-pink-500",particles:["bg-orange-400/20","bg-pink-400/20","bg-red-400/20"]},afternoon:{background:"from-amber-50 via-yellow-50 to-orange-100",accent:"from-amber-500 to-orange-500",particles:["bg-amber-400/20","bg-yellow-400/20","bg-orange-400/20"]},evening:{background:"from-purple-50 via-indigo-50 to-blue-100",accent:"from-purple-500 to-indigo-500",particles:["bg-purple-400/20","bg-indigo-400/20","bg-blue-400/20"]},night:{background:"from-gray-800 via-gray-900 to-black",accent:"from-blue-400 to-purple-400",particles:["bg-blue-300/30","bg-purple-300/30","bg-indigo-300/30"]}};i.useEffect(()=>{const G=()=>{const l=new Date().getHours();l>=5&&l<8?F("sunrise"):l>=8&&l<12?F("default"):l>=12&&l<17?F("afternoon"):l>=17&&l<20?F("evening"):F("night")};G();const h=setInterval(G,6e4);return()=>clearInterval(h)},[]);const Y=async G=>{if(G.preventDefault(),!o.trim()){R("Molimo unesite staru lozinku");return}if(!m.trim()){R("Molimo unesite novu lozinku");return}if(m.length<4){R("Nova lozinka mora imati najmanje 4 karaktera");return}if(m!==n){R("Nove lozinke se ne poklapaju");return}try{R(null),y(!0),await r(o,m),C(!0),setTimeout(()=>{D()},2e3)}catch(h){R(h.message||"Gre≈°ka pri promjeni lozinke")}finally{y(!1)}},D=()=>{u(""),d(""),j(""),R(null),C(!1),a()};if(!t)return null;const L=N==="night";return e.jsx(it,{children:t&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:D,children:e.jsxs(x.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:`${L?"bg-gray-800":"bg-white"} rounded-2xl shadow-2xl max-w-md w-full overflow-hidden`,onClick:G=>G.stopPropagation(),children:[e.jsxs("div",{className:`bg-gradient-to-r ${p[N].accent} p-6 text-white relative`,children:[e.jsx("button",{onClick:D,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(xa,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(zt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Promjena lozinke"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Unesite staru i novu lozinku"})]})]})]}),e.jsx("div",{className:"p-6",children:q?e.jsxs(x.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(ha,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:`text-xl font-bold ${L?"text-white":"text-gray-800"} mb-2`,children:"Lozinka promijenjena!"}),e.jsx("p",{className:`${L?"text-gray-400":"text-gray-600"}`,children:"Va≈°a lozinka je uspje≈°no a≈æurirana."})]}):e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${L?"text-gray-300":"text-gray-700"} mb-2`,children:"Stara lozinka"}),e.jsx("input",{type:"password",value:o,onChange:G=>u(G.target.value),placeholder:"Unesite staru lozinku",disabled:f,autoFocus:!0,className:`w-full px-4 py-3 border ${L?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${L?"text-gray-300":"text-gray-700"} mb-2`,children:"Nova lozinka"}),e.jsx("input",{type:"password",value:m,onChange:G=>d(G.target.value),placeholder:"Unesite novu lozinku",disabled:f,className:`w-full px-4 py-3 border ${L?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${L?"text-gray-300":"text-gray-700"} mb-2`,children:"Potvrdite novu lozinku"}),e.jsx("input",{type:"password",value:n,onChange:G=>j(G.target.value),placeholder:"Ponovite novu lozinku",disabled:f,className:`w-full px-4 py-3 border ${L?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),T&&e.jsxs(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-start gap-2 p-4 ${L?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200"} border rounded-xl`,children:[e.jsx(Pt,{className:`w-5 h-5 ${L?"text-red-400":"text-red-600"} flex-shrink-0 mt-0.5`}),e.jsx("p",{className:`text-sm ${L?"text-red-300":"text-red-800"}`,children:T})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:D,disabled:f,className:`flex-1 px-4 py-3 border ${L?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-xl disabled:opacity-50 font-medium transition-all`,children:"Otka≈æi"}),e.jsx("button",{type:"submit",disabled:f||!o.trim()||!m.trim()||!n.trim(),className:`flex-1 px-4 py-3 bg-gradient-to-r ${p[N].accent} text-white rounded-xl hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-all shadow-lg`,children:f?"Mijenjam...":"Promijeni lozinku"})]})]})})]})})})}function Dr(){const[t,a]=i.useState(!1),[r,s]=i.useState(null),[o,u]=i.useState(new Date),[m,d]=i.useState([{id:1,message:"Novi podatci sinhronizovani",time:"5 min",read:!1},{id:2,message:"GitHub scraper zavr≈°en",time:"1h",read:!1},{id:3,message:"Payroll a≈æuriran",time:"2h",read:!0}]),[n,j]=i.useState(!1),[T,R]=i.useState("-"),[q,C]=i.useState("-"),[f,y]=i.useState([]),[N,F]=i.useState([]),[p,Y]=i.useState(0),[D,L]=i.useState("night"),[G,h]=i.useState({}),l=qe(),{currentUser:I,logout:U,changePassword:M}=Ot();I!=null&&I.name||I!=null&&I.ime;const z={default:{background:"from-slate-50 via-blue-50 to-indigo-100",accent:"from-blue-500 to-purple-500",particles:["bg-blue-400/20","bg-purple-400/20","bg-indigo-400/20"]},sunrise:{background:"from-orange-50 via-pink-50 to-red-100",accent:"from-orange-500 to-pink-500",particles:["bg-orange-400/20","bg-pink-400/20","bg-red-400/20"]},afternoon:{background:"from-amber-50 via-yellow-50 to-orange-100",accent:"from-amber-500 to-orange-500",particles:["bg-amber-400/20","bg-yellow-400/20","bg-orange-400/20"]},evening:{background:"from-purple-50 via-indigo-50 to-blue-100",accent:"from-purple-500 to-indigo-500",particles:["bg-purple-400/20","bg-indigo-400/20","bg-blue-400/20"]},night:{background:"from-slate-900 via-blue-900 to-indigo-900",accent:"from-blue-400 to-cyan-400",particles:["bg-blue-400/20","bg-cyan-400/20","bg-indigo-400/20"]}},E=()=>e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:N.map(c=>e.jsx(x.div,{className:`absolute rounded-full ${c.color}`,style:{left:`${c.x}%`,top:`${c.y}%`,width:`${c.size}px`,height:`${c.size}px`},animate:{y:[0,-100,0],x:[0,Math.sin(c.id*.5)*50,0],opacity:[.2,.8,.2],scale:[1,1.5,1]},transition:{duration:c.duration,delay:c.delay,repeat:1/0,ease:"easeInOut"}},c.id))}),V=(c,g)=>{Q(c,g)},K=c=>{te(c)},Q=(c,g)=>{const A=c.currentTarget.getBoundingClientRect(),X=c.clientX-A.left,_=c.clientY-A.top,O=A.width/2,W=A.height/2,B=(_-W)/10,ee=(O-X)/10;h(ne=>({...ne,[g]:{transform:`perspective(1000px) rotateX(${B}deg) rotateY(${ee}deg) scale3d(1.02, 1.02, 1.02)`,transition:"transform 0.1s ease-out"}}))},te=c=>{h(g=>({...g,[c]:{transform:"perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)",transition:"transform 0.3s ease-out"}}))},$=async()=>{if(I){try{const{data:c,error:g}=await ie.from("payroll_amounts").select("neto").eq("driver_name",I.name.toLowerCase());if(g)throw g;const S=c.reduce((A,X)=>A+(X.neto||0),0);R(`${S.toFixed(2)} ‚Ç¨`)}catch{R("Gre≈°ka")}try{const{data:c,error:g}=await ie.from("payroll_amounts").select("neto, file_name, created_at").eq("driver_name",I.name.toLowerCase()).order("file_name",{ascending:!1}).limit(1);if(g)throw g;c&&c.length>0&&typeof c[0].neto=="number"?C(`${Number(c[0].neto).toFixed(2)} ‚Ç¨`):C("-")}catch{C("Gre≈°ka")}}};i.useEffect(()=>{I&&$()},[I]),m.filter(c=>!c.read).length;const ce=async()=>{try{console.log("üêô Poku≈°avam da dohvatim podatke sa GitHub API...");const c="eldin007b/gls-scraper",g="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",[S,A]=c.split("/"),X=O=>{if(!O)return"Nepoznato";const W=new Date(O);if(isNaN(W.getTime()))return"Nepoznato";const B=W.getDate().toString().padStart(2,"0"),ee=(W.getMonth()+1).toString().padStart(2,"0"),ne=W.getHours().toString().padStart(2,"0"),se=W.getMinutes().toString().padStart(2,"0");return`${B}.${ee} ${ne}:${se}`};let _=await fetch(`https://api.github.com/repos/${S}/${A}/actions/runs?per_page=5`,{headers:{Accept:"application/vnd.github.v3+json",...g&&{Authorization:`token ${g}`}}});if(!_.ok&&_.status===401&&g&&(console.log("üîë Token nevaljan, poku≈°avam bez token-a..."),_=await fetch(`https://api.github.com/repos/${S}/${A}/actions/runs?per_page=5`,{headers:{Accept:"application/vnd.github.v3+json"}})),_.ok){const W=((await _.json()).workflow_runs||[]).filter(B=>{const ee=(B.name||"").toLowerCase();return ee.includes("gls scraper")||ee.includes("scraper")||ee.includes("gls")});if(W.length>0){const B=W[0];console.log("‚úÖ Na≈°ao GitHub workflow:",B);const ee=B.updated_at||B.run_started_at||B.created_at||new Date().toISOString(),ne=X(ee),se={status:B.conclusion==="success"||B.conclusion==="completed"?"completed":B.conclusion||"unknown",mode:"Automatski (GitHub)",timestamp:ee,formattedTimestamp:ne,name:B.name,repoUsed:`${S}/${A}`,raw:B};console.log("üîÑ GitHub API podaci formatovani:",se),s(se);try{localStorage.setItem("github_scraper_history",JSON.stringify([se]))}catch(de){console.warn("‚ö†Ô∏è Neuspjelo pisanje u localStorage:",de)}return!0}}else console.warn("‚ö†Ô∏è GitHub API vratio nenormalan odgovor:",_.status,_.statusText)}catch(c){console.error("üí• Gre≈°ka pri GitHub API pozivu:",c)}return!1};i.useEffect(()=>{const c=async()=>{try{if(console.log("üîç Poku≈°avam da uƒçitam podatke o sinhronizaciji..."),console.log("üóùÔ∏è Svi kljuƒçevi u localStorage:",Object.keys(localStorage)),await ce()){console.log("ÔøΩ GitHub fetch successful, reloading saved history...");const _=localStorage.getItem("github_scraper_history");if(_){const O=JSON.parse(_);if(O.length>0){s(O[0]);return}}}const X=localStorage.getItem("github_scraper_history");if(console.log("üì¶ Raw podatci iz localStorage:",X),X){const _=JSON.parse(X);if(console.log("üìã Parsovana historija:",_),console.log("üìè Broj elemenata u historiji:",_.length),_.length>0){const O=_[0];console.log("‚è∞ Poslednja sinhronizacija:",O),s(O)}else console.log("‚ö†Ô∏è Historija je prazna"),s(null)}else{console.log("‚ùå Nema podataka u localStorage za github_scraper_history");const _=localStorage.getItem("autoSyncState");if(_)try{const O=JSON.parse(_);console.log("üîÑ Koristim autoSyncState kao fallback:",O);const W={status:"completed",mode:"Automatski",timestamp:O.lastSync?new Date(O.lastSync).toLocaleString("bs-BA"):"Nepoznato"};console.log("üîÑ Fallback podaci iz autoSync:",W),s(W)}catch(O){console.error("üí• Gre≈°ka u parsiranju autoSyncState:",O),await ce()||s(null)}else console.log("‚ùå Nema ni autoSyncState podataka - poku≈°avam GitHub API"),await ce()||s(null)}}catch(A){console.error("üí• Gre≈°ka prilikom uƒçitavanja podataka o sinhronizaciji:",A),s(null)}};(async()=>{await c()})();const S=setInterval(()=>{c().catch(A=>{console.error("üí• Gre≈°ka u interval sync:",A)})},3e4);return()=>clearInterval(S)},[]),i.useEffect(()=>{const c=setInterval(()=>{u(new Date)},3e4);return()=>clearInterval(c)},[]),i.useEffect(()=>{(()=>{const g=z[D],S=Array.from({length:40},(A,X)=>({id:X,x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+1,color:g.particles[Math.floor(Math.random()*g.particles.length)],duration:Math.random()*25+15,delay:Math.random()*8}));F(S)})()},[D]),i.useEffect(()=>{L("night")},[]),i.useEffect(()=>{const c=()=>{Y(window.scrollY)};return window.addEventListener("scroll",c,{passive:!0}),()=>window.removeEventListener("scroll",c)},[]),i.useEffect(()=>{const c=g=>{n&&!g.target.closest(".notification-container")&&j(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[n]),i.useEffect(()=>{const c=g=>{var S,A,X;try{const _=g.detail;if(console.log("üîî Primljen githubSync:updated event:",_),_){const O={..._,timestamp:_.timestamp&&typeof _.timestamp=="string"&&_.timestamp.indexOf("T")!==-1?_.timestamp:((S=_.raw)==null?void 0:S.updated_at)||((A=_.raw)==null?void 0:A.run_started_at)||((X=_.raw)==null?void 0:X.created_at)||_.timestamp,formattedTimestamp:_.formattedTimestamp||(_.timestamp?(()=>{try{const W=new Date(_.timestamp);if(!isNaN(W.getTime())){const B=W.getDate().toString().padStart(2,"0"),ee=(W.getMonth()+1).toString().padStart(2,"0"),ne=W.getHours().toString().padStart(2,"0"),se=W.getMinutes().toString().padStart(2,"0");return`${B}.${ee} ${ne}:${se}`}}catch{}return _.timestamp})():_.timestamp)};s(O)}}catch(_){console.error("Gre≈°ka u event handleru:",_)}};return window.addEventListener("githubSync:updated",c),()=>window.removeEventListener("githubSync:updated",c)},[]);const b=[{title:"Statistika",desc:"Grafovi i izvje≈°taji",icon:e.jsx(fa,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/statistika",gradient:"from-purple-500 to-pink-500",hoverGradient:"from-purple-600 to-pink-600",bgColor:"bg-purple-50",iconColor:"text-purple-600"},{title:"Navigacija",desc:"Mapa i praƒáenje ruta",icon:e.jsx(ba,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/navigacija",gradient:"from-indigo-500 to-blue-500",hoverGradient:"from-indigo-600 to-blue-600",bgColor:"bg-indigo-50",iconColor:"text-indigo-600"},{title:"Dostava",desc:"Pregled po mjesecu",icon:e.jsx(Re,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/deliveries",gradient:"from-blue-500 to-cyan-500",hoverGradient:"from-blue-600 to-cyan-600",bgColor:"bg-blue-50",iconColor:"text-blue-600"},{title:"Vozaƒçi",desc:"Detaljna statistika po vozaƒçu",icon:e.jsx(Ze,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/drivers",gradient:"from-emerald-500 to-teal-500",hoverGradient:"from-emerald-600 to-teal-600",bgColor:"bg-emerald-50",iconColor:"text-emerald-600"},{title:"Extra vo≈ænje",desc:"Posebne ture (Sonderfahrt)",icon:e.jsx(ya,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/extra-rides",gradient:"from-orange-500 to-red-500",hoverGradient:"from-orange-600 to-red-600",bgColor:"bg-orange-50",iconColor:"text-orange-600"},{title:"O aplikaciji",desc:"Informacije i pomoƒá",icon:e.jsx(va,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/about",gradient:"from-gray-500 to-slate-500",hoverGradient:"from-gray-600 to-slate-600",bgColor:"bg-gray-50",iconColor:"text-gray-600"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`min-h-screen bg-gradient-to-br ${z[D].background} relative transition-all duration-1000`,children:[e.jsx(E,{}),e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx(x.div,{style:{transform:`translateY(${p*.2}px) translateX(${p*.1}px)`},className:`absolute top-20 left-10 w-96 h-96 bg-gradient-to-r ${z[D].accent} rounded-full mix-blend-multiply filter blur-3xl`,animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(x.div,{style:{transform:`translateY(${p*-.15}px) translateX(${p*-.05}px)`},className:"absolute top-40 right-10 w-80 h-80 bg-gradient-to-r from-yellow-400/40 to-pink-400/40 rounded-full mix-blend-multiply filter blur-2xl",animate:{scale:[1.1,1,1.1],opacity:[.4,.6,.4]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2}}),e.jsx(x.div,{style:{transform:`translateY(${p*.25}px) translateX(${p*-.08}px)`},className:"absolute -bottom-8 left-20 w-72 h-72 bg-gradient-to-r from-emerald-400/30 to-blue-400/30 rounded-full mix-blend-multiply filter blur-xl",animate:{scale:[1,1.2,1],opacity:[.25,.45,.25]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:4}})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-start py-8 px-4",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[e.jsx(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8 relative z-[1000]",style:{transform:`translateY(${p*.1}px)`},children:e.jsxs("div",{className:`${D==="night"?"bg-gray-800/20":"bg-white/20"} backdrop-blur-3xl border ${D==="night"?"border-white/10":"border-white/30"} rounded-3xl p-4 md:p-6 shadow-2xl relative`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${z[D].accent.replace("from-","from-").replace("to-","to-")}/10 rounded-3xl`}),e.jsx(x.div,{className:`absolute inset-0 rounded-3xl bg-gradient-to-r ${z[D].accent} p-[1px]`,animate:{opacity:[0,.3,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:`w-full h-full rounded-3xl ${D==="night"?"bg-gray-800/20":"bg-white/20"} backdrop-blur-3xl`})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col lg:hidden gap-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-white/20 backdrop-blur-sm rounded-xl border border-white/30",style:{transform:"scale(1.1)",filter:"drop-shadow(0 8px 32px rgba(0,0,0,0.3))"}}),e.jsx("h1",{className:"relative text-2xl sm:text-3xl md:text-4xl font-black tracking-wider leading-tight text-slate-800 px-4 py-2 md:px-6 md:py-3",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8), 0 0 4px rgba(255,255,255,0.6)",fontWeight:"900",letterSpacing:"0.05em"},children:"B&D Evidencija"})]})})}),e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-sm rounded-full border border-white/30",style:{filter:"drop-shadow(0 4px 16px rgba(0,0,0,0.2))"}}),e.jsxs("div",{className:"relative flex items-center gap-2 px-3 py-1.5",children:[e.jsx(We,{className:"w-3 h-3 text-slate-700"}),e.jsx("span",{className:"text-xs font-semibold text-slate-800",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8)"},children:(()=>{const c=o.getDate().toString().padStart(2,"0"),g=(o.getMonth()+1).toString().padStart(2,"0"),S=o.getFullYear(),A=o.getHours().toString().padStart(2,"0"),X=o.getMinutes().toString().padStart(2,"0");return`${c}.${g}.${S} ${A}:${X}`})()})]})]}),e.jsx($t,{user:{...I,ukupnaZarada:T,zadnjaPlata:q},onChangePassword:()=>a(!0),onLogout:U,currentTheme:D,themes:z})]})]}),e.jsxs("div",{className:"hidden lg:flex lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-md rounded-2xl border border-white/40",style:{transform:"scale(1.1)",filter:"drop-shadow(0 12px 40px rgba(0,0,0,0.3))"}}),e.jsx("h1",{className:"relative text-3xl md:text-4xl font-black tracking-wide text-slate-800 px-6 py-3",style:{textShadow:"2px 2px 4px rgba(255,255,255,0.8), 0 0 6px rgba(255,255,255,0.6)",fontWeight:"900",letterSpacing:"0.05em"},children:"B&D Evidencija"})]})})}),e.jsx("div",{className:"flex justify-center flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-md rounded-full border border-white/30",style:{filter:"drop-shadow(0 6px 20px rgba(0,0,0,0.25))"}}),e.jsxs("div",{className:"relative flex items-center gap-2 px-4 py-2",children:[e.jsx(We,{className:"w-4 h-4 text-slate-700"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8)"},children:(()=>{const c=o.getDate().toString().padStart(2,"0"),g=(o.getMonth()+1).toString().padStart(2,"0"),S=o.getFullYear(),A=o.getHours().toString().padStart(2,"0"),X=o.getMinutes().toString().padStart(2,"0");return`${c}.${g}.${S} ${A}:${X}`})()})]})]})}),e.jsx(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.6},className:"flex items-center gap-3 justify-end flex-shrink-0",children:e.jsx($t,{user:{...I,ukupnaZarada:T,zadnjaPlata:q},onChangePassword:()=>a(!0),onLogout:U,currentTheme:D,themes:z})})]})]})]})}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:b.map((c,g)=>e.jsx(x.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,delay:.6+g*.1,type:"spring",stiffness:100},whileHover:{y:-12,scale:1.05,rotateX:5,rotateY:5,transition:{duration:.3}},whileTap:{scale:.95},className:"group perspective-1000",style:{transformStyle:"preserve-3d",...G[`card-${g}`]},onMouseEnter:S=>V(S,`card-${g}`),onMouseLeave:()=>K(`card-${g}`),onMouseMove:S=>Q(S,`card-${g}`),children:e.jsxs(Kt,{className:`cursor-pointer relative overflow-hidden ${D==="night"?"bg-gray-800/30 shadow-inner shadow-gray-900/20":"bg-white/40 shadow-inner shadow-gray-300/20"} backdrop-blur-2xl border-0 transition-all duration-500 rounded-3xl p-4 md:p-8 min-h-[180px] md:h-auto flex flex-col justify-between group-hover:shadow-2xl group-hover:backdrop-blur-3xl`,style:{boxShadow:D==="night"?"12px 12px 24px rgba(0,0,0,0.5), -12px -12px 24px rgba(255,255,255,0.02), inset 2px 2px 6px rgba(255,255,255,0.1)":"12px 12px 24px rgba(0,0,0,0.1), -12px -12px 24px rgba(255,255,255,0.8), inset 2px 2px 6px rgba(255,255,255,0.5)",transformStyle:"preserve-3d"},onClick:()=>l(c.path),children:[e.jsx(x.div,{className:`absolute inset-0 bg-gradient-to-br ${c.gradient} rounded-3xl`,initial:{opacity:0},whileHover:{opacity:.15,scale:1.1},transition:{duration:.4}}),e.jsxs(x.div,{className:"absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-500",initial:{opacity:0},whileHover:{opacity:.3},children:[e.jsx("div",{className:"absolute top-2 left-2 w-1 h-1 bg-white rounded-full animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"absolute top-4 right-3 w-0.5 h-0.5 bg-white rounded-full animate-pulse",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"absolute bottom-3 left-4 w-1.5 h-1.5 bg-white rounded-full animate-pulse",style:{animationDelay:"400ms"}}),e.jsx("div",{className:"absolute bottom-2 right-2 w-0.5 h-0.5 bg-white rounded-full animate-pulse",style:{animationDelay:"600ms"}})]}),e.jsxs(x.div,{className:`w-12 h-12 md:w-16 md:h-16 ${c.bgColor} rounded-2xl flex items-center justify-center mb-2 md:mb-6 relative z-10`,style:{boxShadow:D==="night"?"6px 6px 12px rgba(0,0,0,0.6), -6px -6px 12px rgba(255,255,255,0.05), inset 2px 2px 4px rgba(255,255,255,0.1)":"6px 6px 12px rgba(0,0,0,0.15), -6px -6px 12px rgba(255,255,255,0.9), inset 2px 2px 4px rgba(255,255,255,0.7)"},whileHover:{scale:1.15,rotateY:15,rotateX:15,transition:{duration:.3}},initial:{rotateY:0,rotateX:0},children:[e.jsx(x.div,{className:c.iconColor,whileHover:{rotate:[0,5,-5,0],scale:1.1},transition:{rotate:{duration:.5,ease:"easeInOut"},scale:{duration:.2}},children:c.icon}),e.jsx(x.div,{className:"absolute inset-0 rounded-2xl bg-gradient-to-tr from-white/20 to-transparent opacity-0",whileHover:{opacity:1,backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:.6}})]}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[e.jsx(x.h3,{className:`text-sm md:text-xl font-bold mb-1 md:mb-2 ${D==="night"?"text-gray-200 group-hover:text-white":"text-gray-800 group-hover:text-gray-900"} transition-colors leading-tight`,whileHover:{scale:1.05,x:2},transition:{duration:.2},children:c.title}),e.jsx(x.p,{className:`text-xs md:text-base ${D==="night"?"text-gray-400 group-hover:text-gray-300":"text-gray-600 group-hover:text-gray-700"} transition-colors leading-relaxed mt-2`,initial:{opacity:.8},whileHover:{opacity:1,y:-1},transition:{duration:.2},children:c.desc})]}),e.jsx(x.div,{className:"absolute top-4 md:top-6 right-4 md:right-6 z-20",initial:{opacity:0,x:-10,rotate:-45},whileHover:{opacity:1,x:0,rotate:0,scale:1.2,transition:{duration:.3}},children:e.jsx(x.div,{animate:{y:[0,-2,0],rotate:[0,5,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(lt,{className:`w-4 h-4 md:w-5 md:h-5 ${D==="night"?"text-gray-300":"text-gray-500"}`})})}),e.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${c.gradient} transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left`})]})},g))}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.2},className:"mt-16 text-center relative z-10",children:e.jsxs(x.div,{className:`${D==="night"?"bg-gray-800/30":"bg-white/30"} backdrop-blur-xl rounded-2xl p-6 border ${D==="night"?"border-white/10":"border-gray-200/30"} relative overflow-hidden`,style:{boxShadow:D==="night"?"8px 8px 16px rgba(0,0,0,0.4), -8px -8px 16px rgba(255,255,255,0.02)":"8px 8px 16px rgba(0,0,0,0.08), -8px -8px 16px rgba(255,255,255,0.8)"},whileHover:{scale:1.02,transition:{duration:.3}},children:[e.jsx(x.div,{className:`absolute inset-0 bg-gradient-to-r ${z[D].accent} opacity-5`,animate:{backgroundPosition:["0% 0%","100% 100%","0% 0%"]},transition:{duration:8,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}}),e.jsxs(x.p,{className:`text-sm ${D==="night"?"text-gray-300":"text-gray-600"} relative z-10`,initial:{opacity:.8},whileHover:{opacity:1},children:["¬© ",new Date().getFullYear()," B&D Evidencija. Sva prava zadr≈æana.",e.jsx(x.span,{className:"inline-block ml-2",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"‚ú®"})]})]})})]})})]}),e.jsx(Ir,{isOpen:t,onClose:()=>a(!1),onChangePassword:M,loading:!1})]})}const Ws=Object.freeze(Object.defineProperty({__proto__:null,default:Dr},Symbol.toStringTag,{value:"Module"}));function Qe({size:t=24}){return e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M7 4V2C7 1.44772 7.44772 1 8 1S9 1.44772 9 2V4H15V2C15 1.44772 15.4477 1 16 1S17 1.44772 17 2V4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4H7Z",fill:"url(#cal-gradient)"}),e.jsx("path",{d:"M3 10H21V8H3V10Z",fill:"#fff",fillOpacity:"0.3"}),e.jsx("circle",{cx:"8",cy:"13",r:"1",fill:"#fff"}),e.jsx("circle",{cx:"12",cy:"13",r:"1",fill:"#fff"}),e.jsx("circle",{cx:"16",cy:"13",r:"1",fill:"#fff"}),e.jsx("circle",{cx:"8",cy:"17",r:"1",fill:"#fff"}),e.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"#fff"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"cal-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#667eea"}),e.jsx("stop",{offset:"100%",stopColor:"#764ba2"})]})})]})}function Mr({size:t=24}){return e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"8",r:"4",fill:"url(#driver-gradient)"}),e.jsx("path",{d:"M5 18C5 15.7909 6.79086 14 9 14H15C17.2091 14 19 15.7909 19 18V20C19 21.1046 18.1046 22 17 22H7C5.89543 22 5 21.1046 5 20V18Z",fill:"url(#driver-gradient)"}),e.jsx("ellipse",{cx:"12",cy:"8",rx:"2",ry:"2.5",fill:"#fff",fillOpacity:"0.3"}),e.jsx("rect",{x:"10",y:"16",width:"4",height:"2",rx:"1",fill:"#fff",fillOpacity:"0.4"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"driver-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4CAF50"}),e.jsx("stop",{offset:"100%",stopColor:"#2E7D32"})]})})]})}function zr({size:t=24}){return e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M4 10C4 8.89543 4.89543 8 6 8H18C19.1046 8 20 8.89543 20 10V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V10Z",fill:"url(#rest-gradient)"}),e.jsx("ellipse",{cx:"12",cy:"12",rx:"6",ry:"2",fill:"#fff",fillOpacity:"0.3"}),e.jsx("path",{d:"M8 14C8 13.4477 8.44772 13 9 13H15C15.5523 13 16 13.4477 16 14V16C16 16.5523 15.5523 17 15 17H9C8.44772 17 8 16.5523 8 16V14Z",fill:"#fff",fillOpacity:"0.6"}),e.jsx("circle",{cx:"10",cy:"15",r:"0.5",fill:"url(#rest-gradient)"}),e.jsx("circle",{cx:"12",cy:"15",r:"0.5",fill:"url(#rest-gradient)"}),e.jsx("circle",{cx:"14",cy:"15",r:"0.5",fill:"url(#rest-gradient)"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"rest-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),e.jsx("stop",{offset:"100%",stopColor:"#F57C00"})]})})]})}const Pr="_deliveriesScreen_l89vi_2",Tr="_mainGrid_l89vi_8",Er="_headerCard_l89vi_14",Rr="_heroSection_l89vi_21",Or="_heroTitle_l89vi_25",Ar="_statsGrid_l89vi_34",Hr="_statCard_l89vi_40",Lr="_statIcon_l89vi_47",Vr="_statValue_l89vi_53",Gr="_statLabel_l89vi_59",Fr="_tableWrapper_l89vi_65",Wr="_table_l89vi_65",qr="_mobileCards_l89vi_84",Yr="_dayCard_l89vi_98",Ur="_dayCardHeader_l89vi_106",Br="_driverRow_l89vi_114",Jr="_driverInfo_l89vi_121",Kr="_driverName_l89vi_126",Xr="_driverTura_l89vi_130",Qr="_driverValue_l89vi_135",Zr="_dayTotal_l89vi_139",es="_success_l89vi_149",ts="_warning_l89vi_153",as="_empty_l89vi_157",rs="_cellSuccess_l89vi_162",ss="_cellWarning_l89vi_167",os="_cellEmpty_l89vi_172",ns="_footerRow_l89vi_178",is="_footerCell_l89vi_183",ls="_bilansSuccess_l89vi_189",cs="_bilansWarning_l89vi_193",ds="_dayTotalHigh_l89vi_198",us="_dayTotalLow_l89vi_203",ms="_holidayRow_l89vi_209",gs="_holiday_l89vi_209",ps="_loadingContainer_l89vi_218",xs="_emptyState_l89vi_226",hs="_refreshButton_l89vi_234",fs="_monthYearPicker_l89vi_251",bs="_tableDriverHeader_l89vi_266",ys="_tableDriverName_l89vi_273",vs="_tableDriverTura_l89vi_278",ws="_closeButton_l89vi_288",js="_statContent_l89vi_358",k={deliveriesScreen:Pr,mainGrid:Tr,headerCard:Er,heroSection:Rr,heroTitle:Or,statsGrid:Ar,statCard:Hr,statIcon:Lr,statValue:Vr,statLabel:Gr,tableWrapper:Fr,table:Wr,mobileCards:qr,dayCard:Yr,dayCardHeader:Ur,driverRow:Br,driverInfo:Jr,driverName:Kr,driverTura:Xr,driverValue:Qr,dayTotal:Zr,success:es,warning:ts,empty:as,cellSuccess:rs,cellWarning:ss,cellEmpty:os,footerRow:ns,footerCell:is,bilansSuccess:ls,bilansWarning:cs,dayTotalHigh:ds,dayTotalLow:us,holidayRow:ms,holiday:gs,loadingContainer:ps,emptyState:xs,refreshButton:hs,monthYearPicker:fs,tableDriverHeader:bs,tableDriverName:ys,tableDriverTura:vs,closeButton:ws,"deliveries-modal-form":"_deliveries-modal-form_l89vi_307",statContent:js};function Xt(t,a,r=[]){return i.useMemo(()=>{const s=new Date(t,a,1),o=new Date(t,a+1,0);return $a({start:s,end:o}).filter(m=>!Ia(m)&&!(r||[]).includes(xe(m,"yyyy-MM-dd")))},[t,a,r])}function ks({width:t=75,height:a=48}){return e.jsx("div",{style:{width:t,height:a,backgroundColor:"#e0e0e0",borderRadius:8,margin:"0 2px",animation:"skeletonPulse 1.6s infinite ease-in-out",opacity:.7}})}function Qt({syncStatus:t}){const a=(t==null?void 0:t.unsyncedCount)===0;if(!t)return null;const r=a?"100%":"30%",s=a?"#4caf50":"#f44336";return e.jsx("div",{style:{width:"100%",height:6,backgroundColor:"#e0e0e0",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:3,width:r,backgroundColor:s,transition:"width 1s, background-color 1s"}})})}function Ns({visible:t,onClose:a,children:r,title:s,icon:o}){return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backdropFilter:"blur(8px)",background:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",padding:20},children:e.jsxs("div",{style:{width:"100%",maxWidth:400,borderRadius:20,background:"linear-gradient(180deg, #fff 0%, #f8f9fa 100%)",boxShadow:"0 4px 24px rgba(0,0,0,0.15)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:20},children:[o,e.jsx("span",{style:{fontSize:20,fontWeight:"bold",color:"#333",flex:1,textAlign:"center",margin:"0 10px"},children:s}),e.jsx("button",{onClick:a,style:{width:32,height:32,borderRadius:16,background:"#f5f5f5",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},"aria-label":"Zatvori modal",children:e.jsx("span",{style:{fontSize:24,color:"#999"},children:"√ó"})})]}),r]})}):null}const Ss=()=>null,_s=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],Cs=({month:t,year:a,onMonthChange:r,onYearChange:s,monthlyPerformance:o={},isLoadingPerformance:u=!1,className:m=""})=>{const[d,n]=i.useState(!1),[j,T]=i.useState(t??new Date().getMonth()),[R,q]=i.useState(a??new Date().getFullYear()),C=_s,f=[2023,2024,2025,2026,2027],y=()=>{r&&r(j),s&&s(R),n(!1)},N=()=>n(!0),F=()=>n(!1);return e.jsxs("div",{className:`relative w-full max-w-xs ${m}`,children:[e.jsxs("div",{className:"cursor-pointer px-4 py-2 bg-white rounded-lg shadow border border-gray-300 flex items-center justify-between",onClick:N,children:[e.jsxs("span",{className:"font-semibold",children:[C[j]," ",R]}),e.jsx("svg",{className:"w-4 h-4 ml-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",onClick:F,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-xs p-4 relative",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Odaberi mjesec i godinu"}),e.jsx("button",{className:"text-2xl font-bold text-gray-400 hover:text-gray-600 transition",onClick:F,children:"√ó"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{className:"border rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-blue-400",value:j,onChange:p=>T(Number(p.target.value)),children:C.map((p,Y)=>e.jsx("option",{value:Y,children:p},p))}),e.jsx("select",{className:"border rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-blue-400",value:R,onChange:p=>q(Number(p.target.value)),children:f.map(p=>e.jsx("option",{value:p,children:p},p))})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition",onClick:y,children:"Potvrdi"})})]})})]})};function Zt(t={}){return Ye({queryKey:le.drivers.all,queryFn:async()=>{console.log("üöó Fetching drivers from Supabase...");const{data:a,error:r}=await ie.from("drivers").select("*").order("tura",{ascending:!0});if(r)throw r;return console.log("‚úÖ Drivers loaded from Supabase:",(a==null?void 0:a.length)||0),a||[]},staleTime:30*60*1e3,...t})}function $s(t,a,r={}){return Ye({queryKey:le.deliveries.byMonth(t,a),queryFn:()=>_a(t,a),staleTime:3*60*1e3,enabled:t!==void 0&&a!==void 0,...r})}function Is(t,a,r,s={}){return Ye({queryKey:le.deliveries.byDriver(t,a,r),queryFn:async()=>{const o=new Date(a,r,1),u=new Date(a,r+1,0),m=o.toISOString().split("T")[0],d=u.toISOString().split("T")[0],{data:n,error:j}=await ie.from("deliveries").select("*").eq("driver",t).gte("date",m).lte("date",d).order("date",{ascending:!0});if(j)throw j;return n||[]},enabled:!!t&&a!==void 0&&r!==void 0,staleTime:3*60*1e3,...s})}function ea(t,a={}){return Ye({queryKey:le.holidays.byYear(t),queryFn:()=>Ca(t),staleTime:30*60*1e3,enabled:t!==void 0,...a})}const Ds=new Date().getFullYear(),Ms=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function zs(){const[t,a]=i.useState(Ds),[r,s]=i.useState(new Date().getMonth()),[o,u]=i.useState(!1),[m,d]=i.useState({lastSync:null,unsyncedCount:0}),{data:n=[],isLoading:j}=Zt(),{data:T=[],isLoading:R}=$s(t,r),{data:q=[]}=ea(t),C=R||j,f=i.useMemo(()=>{const h={};return T.forEach(l=>{h[l.date]||(h[l.date]={}),h[l.date][l.driver]=l.produktivitaet_stops||0}),Object.keys(h).forEach(l=>{if((l==="2025-11-17"||l==="2025-11-25")&&h[l][8640]){const I=h[l][8640];h[l][8610]?h[l][8610]+=I:h[l][8610]=I,delete h[l][8640]}}),h},[T]),y=i.useMemo(()=>({"2025-11-07-8620":!0,"2025-11-10-8620":!0,"2025-11-17-8640":!0,"2025-11-25-8640":!0}),[]),N=Xt(t,r,q.map(h=>h.date)),F=i.useMemo(()=>{const h=N.length,l=new Set;return T.forEach(I=>{I.produktivitaet_stops>0&&l.add(I.date)}),{totalWorkdays:h,drivers:n.length,remainingDays:Math.max(0,h-l.size)}},[N,T,n]),[p,Y]=i.useState(()=>{const h=localStorage.getItem("monthlyPerformance");return h?JSON.parse(h):{}}),[D,L]=i.useState(!1);i.useEffect(()=>{const h=()=>{if(D)return;L(!0);const I={0:{value:6322,change:22},1:{value:5874,change:-126},2:{value:6304,change:304},3:{value:6178,change:-122},4:{value:5876,change:-124},5:{value:5491,change:-209},6:{value:6372,change:-528},7:{value:5586,change:-414},8:{value:6214,change:-386},9:{value:831,change:-6069}},U=new Date().getMonth(),M={};Object.keys(I).forEach(z=>{const E=parseInt(z);E<=U&&(M[E]=I[E])}),localStorage.setItem("monthlyPerformance",JSON.stringify(M)),Y(M),L(!1)};Object.keys(p).length===0&&!D&&h();const l=localStorage.getItem("monthlyPerformanceYear");l&&parseInt(l)!==t?(localStorage.removeItem("monthlyPerformance"),localStorage.setItem("monthlyPerformanceYear",t.toString()),h()):l||localStorage.setItem("monthlyPerformanceYear",t.toString())},[t]);const G=async()=>{if(D)return;L(!0);const h={},l=new Date().getMonth(),I=r;for(let U=0;U<=l;U++)try{U!==r&&(s(U),await new Promise(z=>setTimeout(z,800)));const M=document.querySelector("tr._footerRow_j95of_829");if(M){const z=M.querySelectorAll("td");if(z[5]){const E=z[5].querySelector("strong"),V=z[5].querySelector('div[style*="font-size: 0.75rem"]');if(E&&V){const K=parseInt(E.textContent),Q=V.textContent.match(/\(([+-]?\d+)\)/),te=Q?parseInt(Q[1]):0;K>0&&(h[U]={value:K,change:te})}}}}catch(M){console.error(`Error reading month ${U}:`,M)}s(I),localStorage.setItem("monthlyPerformance",JSON.stringify(h)),Y(h),L(!1)};return e.jsx("div",{className:k.deliveriesScreen,children:e.jsxs("div",{className:k.mainGrid,children:[e.jsx(Ss,{className:k.closeButton}),e.jsxs("div",{className:k.headerCard,children:[e.jsx("div",{className:k.heroSection,children:e.jsxs("h1",{className:k.heroTitle,children:["Pregled rezultata po Mjesecu",e.jsx("button",{onClick:G,disabled:D,className:k.refreshButton,title:"ƒåitaj realne podatke iz tabele",children:D?"‚ü≥":"üîÑ"})]})}),e.jsxs("div",{className:k.statsGrid,children:[e.jsxs("div",{className:k.statCard,children:[e.jsx("div",{className:k.statIcon,children:e.jsx(Mr,{size:22})}),e.jsx("div",{className:k.statValue,children:F.drivers}),e.jsx("div",{className:k.statLabel,children:"Vozaƒça"})]}),e.jsxs("div",{className:`${k.statCard} ${k.dateCard}`,children:[e.jsx("div",{className:k.statIcon,children:e.jsx(Qe,{size:22})}),e.jsx("div",{className:k.statValue,children:Ms[r]}),e.jsx("div",{className:k.statLabel,children:t}),e.jsx(Cs,{month:r,year:t,onMonthChange:s,onYearChange:a,monthlyPerformance:p,isLoadingPerformance:D,className:k.monthYearPicker})]}),e.jsxs("div",{className:k.statCard,children:[e.jsx("div",{className:k.statIcon,children:e.jsx(Qe,{size:22})}),e.jsx("div",{className:k.statValue,children:F.totalWorkdays}),e.jsx("div",{className:k.statLabel,children:"Radnih dana"})]}),e.jsxs("div",{className:k.statCard,children:[e.jsx("div",{className:k.statIcon,children:e.jsx(zr,{size:22})}),e.jsx("div",{className:k.statValue,children:F.remainingDays}),e.jsx("div",{className:k.statLabel,children:"Preostalo"})]})]})]}),e.jsx(Qt,{syncStatus:m}),C?e.jsx("div",{className:k.loadingContainer,children:[...Array(8)].map((h,l)=>e.jsx(ks,{width:80,height:32},l))}):N.length===0?e.jsx("div",{className:k.emptyState,children:"Nema radnih dana"}):e.jsxs("div",{className:k.dataCard,children:[e.jsx("div",{className:k.mobileCards,children:N.filter(h=>f[xe(h,"yyyy-MM-dd")]).map(h=>{const l=xe(h,"yyyy-MM-dd"),I=f[l]||{},U=n.filter(E=>E.aktivan).reduce((E,V)=>E+(I[V.tura]||0),0),M=q.some(E=>E.date===l),z=U>=300?"totalHigh":U>0?"totalLow":"";return e.jsxs("div",{className:`${k.dayCard} ${M?k.holiday:""} ${z?k[z]:""}`,children:[e.jsxs("div",{className:k.dayCardHeader,children:[e.jsx(Qe,{size:20})," ",xe(h,"dd.MM.yyyy")]}),e.jsxs("div",{className:k.dayCardBody,children:[n.filter(E=>E.aktivan).map(E=>{const V=I[E.tura],K=V>=(E.target_per_day||0)?"success":V>0?"warning":"empty";return e.jsxs("div",{className:`${k.driverRow} ${k[K]}`,children:[e.jsxs("div",{className:k.driverInfo,children:[e.jsxs("div",{className:k.driverName,children:["üöö ",E.ime]}),e.jsx("div",{className:k.driverTura,children:E.tura})]}),e.jsx("span",{className:k.driverValue,children:V??"‚Äì"})]},E.tura)}),e.jsxs("div",{className:`${k.dayTotal} ${z?k[`dayTotal${z.charAt(0).toUpperCase()}${z.slice(1)}`]:""}`,children:["Ukupno: ",U||"‚Äì"]})]})]},l)})}),e.jsx("div",{className:k.tableWrapper,children:e.jsxs("table",{className:k.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Datum"}),n.filter(h=>h.aktivan).map(h=>e.jsx("th",{children:e.jsxs("div",{className:k.tableDriverHeader,children:[e.jsx("div",{className:k.tableDriverName,children:h.ime}),e.jsx("div",{className:k.tableDriverTura,children:h.tura})]})},h.tura)),e.jsx("th",{children:"Ukupno"})]})}),e.jsx("tbody",{children:Object.keys(f).sort((h,l)=>new Date(h)-new Date(l)).map(h=>{const l=f[h]||{},I=n.filter(M=>M.aktivan).reduce((M,z)=>M+(l[z.tura]||0),0),U=q.some(M=>M.date===h);return e.jsxs("tr",{className:U?k.holidayRow:"",children:[e.jsx("td",{children:xe(new Date(h),"dd.MM.")}),n.filter(M=>M.aktivan).map(M=>{const z=l[M.tura];return z>=(M.target_per_day||0)||z>0,e.jsx("td",{className:"px-1 py-1.5 text-center text-xs font-extrabold",style:{color:y[`${h}-${M.tura}`]?"#f59e0b":z?z>=(M.target_per_day||0)?"#34c759":"#f59e0b":"#9ca3af",fontWeight:"900",textShadow:z||y[`${h}-${M.tura}`]?"0 0 2px rgba(0,0,0,0.5)":"none"},children:y[`${h}-${M.tura}`]?"Urlaub":z||"‚Äì"},M.tura)}),e.jsx("td",{className:k[I>=300?"cellSuccess":I>0?"cellWarning":"cellEmpty"],children:I||"‚Äì"})]},h)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:k.footerRow,children:[e.jsx("td",{className:k.footerCell,children:e.jsx("strong",{children:"Ukupno"})}),n.filter(h=>h.aktivan).map(h=>{const l=N.filter(E=>{const V=xe(E,"yyyy-MM-dd");return(f[V]||{})[h.tura]>0}),I=l.reduce((E,V)=>{const K=xe(V,"yyyy-MM-dd"),Q=f[K]||{};return E+(Q[h.tura]||0)},0),U=(h.target_per_day||0)*N.length,M=I-U,z=M>=0?k.bilansSuccess:k.bilansWarning;return e.jsxs("td",{className:k.footerCell,children:[e.jsx("div",{className:l.length>0&&I>=(h.target_per_day||0)*l.length?k.bilansSuccess:k.bilansWarning,children:e.jsx("strong",{children:I})}),e.jsxs("div",{style:{fontSize:"0.75rem",marginTop:"2px"},className:z,children:["(",M>0?`+${M}`:M,")"]})]},h.tura)}),e.jsx("td",{className:`${k.footerCell} ${(()=>{const h=N.reduce((M,z)=>{const E=xe(z,"yyyy-MM-dd"),V=f[E]||{};return M+n.filter(K=>K.aktivan).reduce((K,Q)=>K+(V[Q.tura]||0),0)},0),l=N.length,I=n.filter(M=>M.aktivan).reduce((M,z)=>M+(z.target_per_day||0)*l,0);return h-I>=0?k.cellSuccess:k.cellWarning})()}`,children:(()=>{const h=N.reduce((M,z)=>{const E=xe(z,"yyyy-MM-dd"),V=f[E]||{};return M+n.filter(K=>K.aktivan).reduce((K,Q)=>K+(V[Q.tura]||0),0)},0),l=N.length,I=n.filter(M=>M.aktivan).reduce((M,z)=>M+(z.target_per_day||0)*l,0),U=h-I;return e.jsxs("div",{children:[e.jsx("strong",{children:h}),e.jsxs("div",{style:{fontSize:"0.75rem",marginTop:"2px"},children:["(",U>0?`+${U}`:U,")"]})]})})()})]})})]})})]}),o&&e.jsx(Ns,{onClose:()=>u(!1),children:e.jsxs("div",{className:"deliveries-modal-form",children:[e.jsx("h2",{children:"Nova dostava"}),e.jsx("button",{onClick:()=>u(!1),children:"Zatvori"})]})})]})})}const qs=Object.freeze(Object.defineProperty({__proto__:null,default:zs},Symbol.toStringTag,{value:"Module"})),Ps=new Date().getFullYear(),It=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function Ts(){var ce;const t=qe(),[a,r]=i.useState(Ps),[s,o]=i.useState(new Date().getMonth()),[u,m]=i.useState(0),[d,n]=i.useState("night"),[j,T]=i.useState(new Date),R={default:{background:"from-blue-50 via-white to-purple-50"},sunrise:{background:"from-orange-100 via-pink-100 to-yellow-100"},afternoon:{background:"from-blue-100 via-cyan-100 to-sky-100"},evening:{background:"from-purple-100 via-pink-100 to-indigo-100"},night:{background:"from-slate-900 via-blue-900 to-indigo-900"}},q=()=>`bg-gradient-to-br ${(R[d]||R.night).background}`;i.useEffect(()=>{n("night")},[]),i.useEffect(()=>{const b=setInterval(()=>T(new Date),6e4);return()=>clearInterval(b)},[]);const[C,f]=i.useState(!0);i.useEffect(()=>{const b=setInterval(()=>{f(c=>!c)},400);return()=>clearInterval(b)},[]);const{driverName:y}=Ma(),{data:N=[],isLoading:F}=Zt(),{data:p=[]}=ea(a),Y=()=>{s===0?(o(11),r(a-1)):o(s-1)},D=()=>{s===11?(o(0),r(a+1)):o(s+1)},L=()=>{m(b=>b===0?N.length-1:b-1)},G=()=>{m(b=>b===N.length-1?0:b+1)};i.useEffect(()=>{if(N.length>0){const b=y?N.findIndex(c=>c.ime===y):N.findIndex(c=>c.aktivan);b>=0&&m(b)}},[N,y]);const h=((ce=N[u])==null?void 0:ce.ime)||"",l=N[u],{data:I=[],isLoading:U}=Is(l==null?void 0:l.tura,a,s,{enabled:!!l}),M=U||F,z=Xt(a,s,p.map(b=>b.date)),E=i.useMemo(()=>{if(!I.length)return[];const b=g=>{if(!g)return 0;const S=g.toString().replace("%","").replace(",",".").trim();return parseFloat(S)||0},c={};return I.forEach(g=>{const S=new Date(g.date),A=S.getMonth();if(S.getFullYear()!==a||A!==s)return;const _=g.date;c[_]||(c[_]={date:_,stops:0,packages:0,pickupPackages:0,complaints:0,totalTime:0,realPercentage:b(g.zustellung_proc),undelivered:parseInt(g.zustellung_nedostavljeno)||0,pickupPercentage:b(g.pickup_proc),pickupUndelivered:parseInt(g.pickup_nedostavljeno)||0,firstComplaints:parseInt(g.probleme_prva)||0,secondComplaints:parseInt(g.probleme_druga)||0,stopsPerHourRaw:g.produktivitaet_stops_pro_std||"0"}),c[_].stops+=g.produktivitaet_stops||0,c[_].packages+=g.zustellung_paketi||0,c[_].pickupPackages+=parseInt(g.pickup_paketi)||0,c[_].complaints+=parseInt(g.probleme_druga)||0;const W=(g.produktivitaet_dauer||"0:00").split(":"),B=(parseInt(W[0])||0)*60+(parseInt(W[1])||0);c[_].totalTime+=B}),Object.values(c).map(g=>{const S=g.realPercentage>0?g.realPercentage:g.stops>0?g.packages/g.stops*100:0;return{...g,percentage:S,stopsPerHour:g.totalTime>0?g.stops/(g.totalTime/60):0}}).sort((g,S)=>new Date(g.date)-new Date(S.date))},[I,a,s]),V=i.useMemo(()=>{const b=z.length,c=E.filter(de=>de.stops>0).length,g=E.reduce((de,ye)=>de+ye.stops,0),S=E.reduce((de,ye)=>de+ye.packages,0),A=c>0?g/c:0,X=c>0?S/c:0,_=new Date,O=_.getFullYear(),W=_.getMonth();let B=0;if(a===O&&s===W){const de=_.getDate();B=z.filter(ye=>new Date(ye).getDate()<=de).length}else a<O||a===O&&s<W?B=b:B=0;const ne=((l==null?void 0:l.target_per_day)||0)*b,se=g-ne;return{totalWorkdays:b,passedWorkdays:B,daysWithData:c,avgPackagesPerDay:Math.round(X),avgStopsPerDay:Math.round(A),totalStops:g,totalPackages:S,difference:se}},[z,E,l,a,s]),K=b=>b.toLocaleTimeString("bs-BA",{hour:"2-digit",minute:"2-digit",hour12:!1}),Q=b=>b.toLocaleDateString("bs-BA",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),te=d==="night"?"#4ade80":"#15803d",$=d==="night"?"#fb7185":"#dc2626";return e.jsxs("div",{className:`min-h-screen ${q()} ${d==="night"?"text-white":"text-gray-800"}`,children:[e.jsx(Qt,{}),e.jsx(x.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`${d==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/50"} backdrop-blur-xl border-b sticky top-0 z-50`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:`p-2 rounded-xl ${d==="night"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(Tt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:`w-8 h-8 ${d==="night"?"text-blue-400":"text-blue-600"}`}),e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${d==="night"?"text-white":"text-gray-800"}`,children:"Vozaƒçi Statistike"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`mb-6 p-4 md:p-6 rounded-2xl ${d==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Y,className:`p-2 rounded-lg ${d==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(et,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:`text-2xl font-bold ${d==="night"?"text-white":"text-gray-800"}`,children:[It[s]," ",a]}),e.jsxs("p",{className:`text-sm ${d==="night"?"text-gray-400":"text-gray-600"} mt-1`,children:[K(j)," ‚Ä¢ ",Q(j)]})]}),e.jsx(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:D,className:`p-2 rounded-lg ${d==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(tt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6 mb-6",children:[e.jsx(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:L,className:`p-2 rounded-lg ${d==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(et,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:`text-xl font-bold ${d==="night"?"text-white":"text-gray-800"}`,children:h||"Nema vozaƒça"}),e.jsx("p",{className:`text-sm ${d==="night"?"text-gray-400":"text-gray-600"} mt-1`,children:N.length>0?`${u+1} / ${N.length}`:"0 / 0"})]}),e.jsx(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:G,className:`p-2 rounded-lg ${d==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(tt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:`p-4 rounded-xl ${d==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(We,{className:`w-6 h-6 ${d==="night"?"text-blue-400":"text-blue-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:`text-2xl font-bold ${d==="night"?"text-white":"text-gray-800"}`,children:[V.passedWorkdays,"/",V.totalWorkdays]}),e.jsx("div",{className:`text-sm ${d==="night"?"text-gray-400":"text-gray-600"}`,children:"Radni dani"})]})]}),e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:`p-4 rounded-xl ${d==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Ze,{className:`w-6 h-6 ${d==="night"?"text-green-400":"text-green-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${d==="night"?"text-white":"text-gray-800"}`,children:h||"‚Äî"}),e.jsx("div",{className:`text-sm ${d==="night"?"text-gray-400":"text-gray-600"}`,children:"Vozaƒç"})]})]}),e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:`p-4 rounded-xl ${d==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Et,{className:`w-6 h-6 ${d==="night"?"text-purple-400":"text-purple-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${d==="night"?"text-white":"text-gray-800"}`,children:V.totalStops}),e.jsx("div",{className:`text-sm ${d==="night"?"text-gray-400":"text-gray-600"}`,children:"Ukupno stopova"})]})]}),e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:`p-4 rounded-xl ${d==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(lt,{className:`w-6 h-6 ${V.difference>=0?d==="night"?"text-green-400":"text-green-600":d==="night"?"text-red-400":"text-red-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",style:{color:V.difference>=0?te:$},children:[V.difference>0?"+":"",V.difference]}),e.jsx("div",{className:`text-sm ${d==="night"?"text-gray-400":"text-gray-600"}`,children:"Bilans"})]})]})]})]}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:`rounded-2xl overflow-hidden ${d==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:M?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:`w-8 h-8 border-2 rounded-full animate-spin ${d==="night"?"border-gray-600 border-t-white":"border-gray-300 border-t-blue-600"}`}),e.jsx("p",{className:`text-sm mt-4 ${d==="night"?"text-gray-400":"text-gray-600"}`,children:"Uƒçitavanje..."})]}):E.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(at,{className:`w-12 h-12 mb-4 ${d==="night"?"text-gray-600":"text-gray-400"}`}),e.jsxs("p",{className:`text-lg font-medium mb-2 ${d==="night"?"text-white":"text-gray-900"}`,children:["Nema podataka za ",It[s]," ",a]}),e.jsx("p",{className:`text-sm ${d==="night"?"text-gray-400":"text-gray-600"}`,children:"Odaberite vozaƒça iz liste da vidite statistiku"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-full",children:[e.jsx("thead",{className:`${d==="night"?"bg-gray-700/50 text-gray-300":"bg-gray-50 text-gray-700"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Datum"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stopovi"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Paketi"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Pickup"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Reklamacije"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Vreme (h)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Efikasnost"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stop/h"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[E.map((b,c)=>{const g=new Date(b.date),S=(l==null?void 0:l.target_per_day)||0,A=b.stops>=S;return e.jsxs(x.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+c*.05},className:`transition-colors ${d==="night"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap font-medium",children:xe(g,"dd.MM.")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:A?te:$,fontWeight:"700"},children:b.stops||"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:b.packages||"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:b.pickupPackages||"‚Äì"}),e.jsxs("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:b.secondComplaints>0?{backgroundColor:C?"#ffffff":"#f44336",color:C?"#f44336":"#ffffff",fontWeight:"900",textAlign:"center",transition:"all 0.3s",outline:C?"2px solid #f44336":"none",outlineOffset:"-2px",borderRadius:"4px"}:{},children:[b.secondComplaints>0&&e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(rt,{className:"w-4 h-4"}),b.secondComplaints]}),b.secondComplaints===0&&"‚Äì"]}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:b.totalTime?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mt,{className:"w-4 h-4"}),`${(b.totalTime/60).toFixed(1)}h`]}):"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:b.percentage>=98?te:$,fontWeight:"600"},children:b.percentage?`${b.percentage.toFixed(1)}%`:"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:b.stopsPerHour?b.stopsPerHour.toFixed(1):"‚Äì"})]},c)}),e.jsxs(x.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},className:`${d==="night"?"bg-gray-700/70 font-bold":"bg-gray-50 font-bold"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:"Ukupno"})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:V.difference>=0?te:$,fontWeight:"900"},children:e.jsxs("strong",{children:[V.totalStops," (",V.difference>0?"+":"",V.difference,")"]})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:V.totalPackages})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:E.reduce((b,c)=>b+(c.pickupPackages||0),0)})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:E.reduce((c,g)=>c+(g.secondComplaints||0),0)>0?{backgroundColor:C?"#ffffff":"#f44336",color:C?"#f44336":"#ffffff",fontWeight:"900",transition:"all 0.3s",borderRadius:"4px",outline:C?"2px solid #f44336":"none",textAlign:"center"}:{color:te,fontWeight:"700"},children:e.jsx("strong",{children:(()=>{const b=E.reduce((c,g)=>c+(g.secondComplaints||0),0);return b>0?e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(rt,{className:"w-4 h-4"}),b]}):b})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const b=E.reduce((c,g)=>c+(g.totalTime||0),0);return b?`${(b/60).toFixed(1)}h`:"‚Äì"})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const b=E.filter(g=>g.percentage&&g.percentage>0),c=b.length>0?b.reduce((g,S)=>g+S.percentage,0)/b.length:0;return c>0?`${c.toFixed(1)}%`:"‚Äì"})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const b=E.filter(g=>g.stopsPerHour&&g.stopsPerHour>0),c=b.length>0?(b.reduce((g,S)=>g+S.stopsPerHour,0)/b.length).toFixed(1):"‚Äì";return c!=="NaN"?c:"‚Äì"})()})})]})]})]})})})]})]})}const Ys=Object.freeze(Object.defineProperty({__proto__:null,default:Ts},Symbol.toStringTag,{value:"Module"})),Dt=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],Fe=t=>{if(!t)return"";const a=new Date(t),r=a.getDate().toString().padStart(2,"0"),s=(a.getMonth()+1).toString().padStart(2,"0"),o=a.getFullYear();return`${r}.${s}.${o}`},Es=()=>{var U,M,z,E,V,K,Q,te,$,ce,b,c,g,S,A,X,_,O,W,B,ee,ne,se,de,ye,Ue,ut,mt,gt,pt,xt,ht;const t=qe(),{currentUser:a}=Ot(),[r,s]=i.useState("night"),[o,u]=i.useState(null),[m,d]=i.useState([]),[n,j]=i.useState([]),[T,R]=i.useState(!0),[q,C]=i.useState(!1),[f,y]=i.useState(null),N=i.useMemo(()=>Dt[new Date().getMonth()],[]),F=i.useMemo(()=>new Date().getFullYear(),[]);i.useEffect(()=>{s("night")},[]);const p=r==="night",Y=i.useCallback(P=>P==="8610"?50:P==="8620"||P==="8630"?85:P==="8640"?80:50,[]);i.useEffect(()=>{(async()=>{try{const{data:Z,error:re}=await ie.from("drivers").select("*").eq("aktivan",!0).order("ime",{ascending:!0});if(re)throw re;if(d(Z||[]),console.log("üöó StatistikaScreen - Loaded drivers:",(Z==null?void 0:Z.length)||0),console.log("üë§ Current user:",a),a&&(a.name||a.ime)&&Z&&Z.length>0){const je=a.name||a.ime;console.log("üîç Looking for driver with name:",je);const ue=Z.find(oe=>oe.ime===je);if(ue)console.log("‚úÖ Found driver by name:",ue.ime),u(ue);else{console.log("üîç Driver not found by name, trying by tura:",a.username||a.tura);const oe=Z.find(Be=>Be.tura===(a.username||a.tura));oe?(console.log("‚úÖ Found driver by tura:",oe.ime),u(oe)):(console.log("‚ùå Driver not found, selecting first driver"),u(Z[0]))}}else Z&&Z.length>0&&(console.log("‚ùå No current user, selecting first driver"),u(Z[0]))}catch(Z){console.error("Gre≈°ka pri uƒçitavanju vozaƒça:",Z),y(Z.message)}finally{R(!1)}})()},[a]);const D=i.useCallback(async P=>{var Z;if(!(!P||!P.tura)){C(!0);try{const re=new Date,je=new Date().toISOString().slice(0,10),ue=new Date(re.getFullYear(),re.getMonth(),1).toISOString().slice(0,10),oe=new Date(re.getFullYear(),re.getMonth()+1,0).toISOString().slice(0,10),Be=new Date(re.getFullYear(),0,1).toISOString().slice(0,10),ta=new Date(re.getFullYear(),11,31).toISOString().slice(0,10),{data:ze}=await ie.from("deliveries").select("*").eq("driver",P.tura).eq("deleted",0).order("date",{ascending:!1}).limit(1),Oe=(Z=ze==null?void 0:ze[0])!=null&&Z.date&&typeof ze[0].date=="string"?ze[0].date.slice(0,10):je,[aa,ra,sa]=await Promise.all([ie.from("deliveries").select("*").eq("driver",P.tura).gte("date",`${Oe}T00:00:00`).lte("date",`${Oe}T23:59:59`).eq("deleted",0),ie.from("deliveries").select("*").eq("driver",P.tura).gte("date",ue).lte("date",oe).eq("deleted",0),ie.from("deliveries").select("*").eq("driver",P.tura).gte("date",Be).lte("date",ta).eq("deleted",0)]),Ae=Y(P.tura),Je=(Ce,$e)=>{if(!Ce||Ce.length===0)return{packages:0,diff:$e==="day"?-Ae:0,complaints:0,date:$e==="day"?Oe:null};let ve=Ce;if($e==="month"){const J=new Date,me=J.getFullYear(),la=J.getMonth();ve=Ce.filter(fe=>{if(!(fe!=null&&fe.date))return!1;const ca=typeof fe.date=="string"?fe.date.slice(0,10):fe.date,bt=new Date(ca),Pe=fe.zustellung_paketi,da=Pe!=null&&Pe!==""&&!isNaN(Number(Pe))&&Number(Pe)>0;return bt.getFullYear()===me&&bt.getMonth()===la&&fe.driver==P.tura&&fe.deleted==0&&da})}else $e==="year"?ve=Ce.filter(J=>parseInt((J==null?void 0:J.produktivitaet_stops)||0,10)>0):$e==="day"&&(ve=Ce.filter(J=>parseInt((J==null?void 0:J.produktivitaet_stops)||0,10)>0));const He=ve.reduce((J,me)=>J+(parseInt((me==null?void 0:me.produktivitaet_stops)||0,10)||0),0),ft=ve.reduce((J,me)=>J+(parseInt((me==null?void 0:me.probleme_druga)||0,10)||0),0),na=(new Set(ve.map(J=>J!=null&&J.date?typeof J.date=="string"?J.date.slice(0,10):new Date(J.date).toISOString().slice(0,10):null).filter(Boolean)).size||0)*Ae,ia=ve.length>0?ve.map(J=>J!=null&&J.date?typeof J.date=="string"?J.date.slice(0,10):new Date(J.date).toISOString().slice(0,10):null).filter(Boolean).sort((J,me)=>new Date(me)-new Date(J))[0]:null;return $e==="day"?{packages:He,diff:He-Ae,complaints:ft,date:Oe}:{packages:He,diff:He-na,complaints:ft,date:ia}},pe=Je(aa.data,"day"),Se=Je(ra.data,"month"),_e=Je(sa.data,"year"),oa=[{label:`Dostava (${pe.date||""})`,value:pe.diff,packages:pe.packages,complaints:pe.complaints,target:Ae,date:pe.date,dataDate:pe.date},{label:`Reklamacije (${pe.date||""})`,value:pe.complaints,date:pe.date,dataDate:pe.date},{label:`Dostava za ${N}`,value:Se.diff,packages:Se.packages,complaints:Se.complaints,dataDate:Se.date},{label:`Reklamacije za ${N}`,value:Se.complaints,dataDate:Se.date},{label:`Dostava za ${F}`,value:_e.diff,packages:_e.packages,complaints:_e.complaints,dataDate:_e.date},{label:`Reklamacije za ${F}`,value:_e.complaints,dataDate:_e.date}];j(oa)}catch(re){console.error("Gre≈°ka pri uƒçitavanju statistika:",re),y(re.message),j([])}finally{C(!1)}}},[Y,N,F]);i.useEffect(()=>{o&&D(o)},[o,D]);const L=[{title:(U=n[0])!=null&&U.date?Fe(n[0].date):"Danas",period:(M=n[0])!=null&&M.dataDate?`Podaci: ${Fe(n[0].dataDate)}`:((z=n[0])==null?void 0:z.label)||"Danas",delivery:{value:((E=n[0])==null?void 0:E.packages)||0,diff:((V=n[0])==null?void 0:V.value)||0,target:((K=n[0])==null?void 0:K.target)||0,trend:(((Q=n[0])==null?void 0:Q.value)||0)>0?"up":(((te=n[0])==null?void 0:te.value)||0)<0?"down":"neutral"},complaints:{value:(($=n[1])==null?void 0:$.value)||0,trend:(((ce=n[1])==null?void 0:ce.value)||0)===0?"good":"bad"},icon:We},{title:(b=n[2])!=null&&b.dataDate?Dt[new Date(n[2].dataDate).getMonth()]:"Ovaj mjesec",period:(c=n[2])!=null&&c.dataDate?`Podaci do: ${Fe(n[2].dataDate)}`:((g=n[2])==null?void 0:g.label)||"Ovaj mjesec",delivery:{value:((S=n[2])==null?void 0:S.packages)||0,diff:((A=n[2])==null?void 0:A.value)||0,target:(((X=n[2])==null?void 0:X.packages)||0)-(((_=n[2])==null?void 0:_.value)||0),trend:(((O=n[2])==null?void 0:O.value)||0)>0?"up":(((W=n[2])==null?void 0:W.value)||0)<0?"down":"neutral"},complaints:{value:((B=n[3])==null?void 0:B.value)||0,trend:(((ee=n[3])==null?void 0:ee.value)||0)===0?"good":"bad"},icon:wa},{title:(ne=n[4])!=null&&ne.dataDate?new Date(n[4].dataDate).getFullYear():"Ova godina",period:(se=n[4])!=null&&se.dataDate?`Podaci do: ${Fe(n[4].dataDate)}`:((de=n[4])==null?void 0:de.label)||"Ova godina",delivery:{value:((ye=n[4])==null?void 0:ye.packages)||0,diff:((Ue=n[4])==null?void 0:Ue.value)||0,target:(((ut=n[4])==null?void 0:ut.packages)||0)-(((mt=n[4])==null?void 0:mt.value)||0),trend:(((gt=n[4])==null?void 0:gt.value)||0)>0?"up":(((pt=n[4])==null?void 0:pt.value)||0)<0?"down":"neutral"},complaints:{value:((xt=n[5])==null?void 0:xt.value)||0,trend:(((ht=n[5])==null?void 0:ht.value)||0)===0?"good":"bad"},icon:ja}],G=P=>P==="up"?lt:P==="down"?Na:P==="good"?yt:P==="bad"?Sa:at,h=(P,Z=!1)=>{if(Z){if(P==="good")return p?"text-green-400":"text-green-600";if(P==="bad")return p?"text-red-400":"text-red-600"}else{if(P==="up")return p?"text-green-400":"text-green-600";if(P==="down")return p?"text-red-400":"text-red-600"}return p?"text-gray-400":"text-gray-600"},l=()=>{if(!o||m.length===0)return;const P=m.findIndex(re=>re.id===o.id),Z=P===0?m.length-1:P-1;u(m[Z])},I=()=>{if(!o||m.length===0)return;const P=m.findIndex(re=>re.id===o.id),Z=P===m.length-1?0:P+1;u(m[Z])};return e.jsx("div",{className:`min-h-screen p-4 sm:p-6 lg:p-8 ${p?"bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900":"bg-gradient-to-br from-blue-50 via-white to-indigo-50"}`,children:e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:`mb-6 sm:mb-8 p-4 sm:p-6 rounded-2xl ${p?"bg-gray-800/50":"bg-white/80"} backdrop-blur-xl border ${p?"border-gray-700":"border-white/20"} shadow-xl`,children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x.button,{onClick:()=>t("/"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-xl ${p?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(Tt,{className:"w-6 h-6"})}),e.jsx(x.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"p-3 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600",children:e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl sm:text-3xl font-bold ${p?"text-white":"text-gray-800"}`,children:"Statistika"}),e.jsx("p",{className:`text-sm ${p?"text-gray-400":"text-gray-600"}`,children:"Pregled performansi vozaƒça"})]})]})}),o&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 pt-4 border-t ${p?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"w-full flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x.button,{onClick:l,whileHover:{scale:1.1,x:-3,backgroundColor:p?"#374151":"#e5e7eb"},whileTap:{scale:.9,x:-5},animate:{x:[0,-2,0]},transition:{x:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2},backgroundColor:{duration:.3}},className:`p-3 rounded-lg ${p?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 shadow-lg shadow-blue-500/20":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 shadow-lg shadow-blue-500/10"} transition-all duration-200 border-2 border-transparent hover:border-blue-400/30`,children:e.jsx(et,{className:"w-5 h-5"})}),e.jsxs(x.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},transition:{type:"spring",stiffness:300,damping:20,duration:.4},className:"flex flex-wrap gap-4 items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ka,{className:`w-5 h-5 ${p?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-lg font-bold ${p?"text-white":"text-gray-900"}`,children:o.ime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:`w-4 h-4 ${p?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${p?"text-gray-400":"text-gray-600"}`,children:["Tura ",o.tura]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:`w-4 h-4 ${p?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${p?"text-gray-400":"text-gray-600"}`,children:["Cilj: ",Y(o.tura)," stopova/dan"]})]})]},o==null?void 0:o.id),e.jsx(x.button,{onClick:I,whileHover:{scale:1.1,x:3,backgroundColor:p?"#374151":"#e5e7eb"},whileTap:{scale:.9,x:5},animate:{x:[0,2,0]},transition:{x:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2},backgroundColor:{duration:.3}},className:`p-3 rounded-lg ${p?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 shadow-lg shadow-blue-500/20":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 shadow-lg shadow-blue-500/10"} transition-all duration-200 border-2 border-transparent hover:border-blue-400/30`,children:e.jsx(tt,{className:"w-5 h-5"})})]})})})]}),f&&e.jsx(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`mb-6 p-4 rounded-xl ${p?"bg-red-900/30 border-red-700/50":"bg-red-50 border-red-200/50"} border`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pt,{className:`w-5 h-5 ${p?"text-red-400":"text-red-600"}`}),e.jsxs("p",{className:`text-sm font-medium ${p?"text-red-400":"text-red-600"}`,children:["Gre≈°ka pri uƒçitavanju podataka: ",f]})]})}),T||q?e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 mb-4 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx(at,{className:"w-8 h-8 text-white"})}),e.jsx("span",{className:`text-lg ${p?"text-gray-300":"text-gray-600"}`,children:e.jsxs(x.div,{className:"flex items-center gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:`w-6 h-6 rounded-full border-2 border-t-transparent ${p?"border-blue-400":"border-blue-600"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(x.span,{animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:"Uƒçitavanje statistike..."}),e.jsx(x.div,{className:`h-2 mt-2 bg-gradient-to-r ${p?"from-blue-600 via-blue-400 to-blue-600":"from-blue-500 via-blue-300 to-blue-500"} rounded-full`,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:2,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}})]})]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:e.jsx(it,{children:L.map((P,Z)=>{const re=P.icon,je=G(P.delivery.trend);G(P.complaints.trend);const ue=P.complaints.value>0,oe=P.delivery.target>0?P.delivery.value/P.delivery.target*100:0;return e.jsxs(x.div,{initial:{opacity:0,y:30,scale:.8,rotateX:-15},animate:{opacity:1,y:0,scale:1,rotateX:0},exit:{opacity:0,y:-30,scale:.8,rotateX:15},transition:{delay:Z*.15,type:"spring",stiffness:300,damping:25,duration:.6},whileHover:{scale:1.03,y:-8,rotateY:2,transition:{duration:.3}},className:"relative group cursor-pointer",style:{perspective:"1000px"},children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-white via-gray-50 to-gray-100 border-2 border-gray-200/60 shadow-2xl transform group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-1 rounded-3xl bg-gradient-to-br from-white/80 to-transparent pointer-events-none"}),e.jsx(x.div,{className:"absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500",animate:{background:["radial-gradient(circle at 0% 0%, rgba(59, 130, 246, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 100%, rgba(147, 51, 234, 0.3) 0%, transparent 50%)","radial-gradient(circle at 0% 100%, rgba(236, 72, 153, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 0%, rgba(59, 130, 246, 0.3) 0%, transparent 50%)"]},transition:{duration:4,repeat:1/0,ease:"linear"}}),ue&&e.jsx(x.div,{className:"absolute inset-0 rounded-3xl bg-red-500/10 border border-red-400/30",animate:{opacity:[.3,.6,.3],scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:"relative p-8 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(x.div,{className:"relative",whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:400},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-purple-600 rounded-2xl blur-md opacity-70"}),e.jsx("div",{className:"relative p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:e.jsx(re,{className:"w-6 h-6 text-white drop-shadow-lg"})}),e.jsx(x.div,{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",animate:{scale:[1,1.3,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:P.title}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:P.period})]})]}),e.jsxs("div",{className:"space-y-6 flex-grow",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Dostavljeno"}),e.jsx(x.div,{animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"},children:e.jsx(je,{className:`w-5 h-5 ${h(P.delivery.trend)} drop-shadow-sm`})})]}),e.jsxs("div",{className:"flex items-baseline justify-between mb-4",children:[e.jsx(x.span,{className:"text-4xl font-black text-gray-900",animate:{textShadow:["2px 2px 4px rgba(0,0,0,0.1)","3px 3px 6px rgba(59,130,246,0.3)","2px 2px 4px rgba(0,0,0,0.1)"]},transition:{duration:3,repeat:1/0},children:P.delivery.value}),e.jsx("span",{className:"text-lg font-bold text-gray-600",children:"stopova"}),P.delivery.diff!==void 0&&P.delivery.diff!==0&&e.jsxs(x.span,{className:`px-2 py-1 rounded-full text-sm font-bold ${P.delivery.diff>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:[P.delivery.diff>0?"+":"",P.delivery.diff]})]}),P.delivery.target>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold",children:[e.jsxs("span",{className:"text-gray-800",children:["Cilj: ",P.delivery.target]}),e.jsxs(x.span,{className:`font-black ${oe>=100?"text-green-700":oe>=98?"text-blue-700":"text-red-700"}`,animate:oe>=100?{scale:[1,1.15,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(34,197,94,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]}:oe>=98?{scale:[1,1.08,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(59,130,246,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]}:{scale:[1,1.1,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(220,38,38,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]},transition:{duration:1.5,repeat:1/0},children:[Math.round(oe),"%"]})]}),e.jsxs("div",{className:"relative h-3 bg-gray-200 rounded-full overflow-hidden border border-gray-300",children:[e.jsx(x.div,{className:`h-full rounded-full relative ${oe>=100?"bg-gradient-to-r from-green-400 via-green-500 to-emerald-600":oe>=98?"bg-gradient-to-r from-blue-400 via-blue-500 to-indigo-600":"bg-gradient-to-r from-red-400 via-red-500 to-red-600"}`,initial:{width:0},animate:{width:`${Math.min(oe,100)}%`},transition:{duration:1.5,delay:.5,ease:"easeOut"},children:e.jsx(x.div,{className:"absolute inset-0 bg-white/30",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})}),oe>=100&&e.jsx(x.div,{className:"absolute right-2 top-1/2 transform -translate-y-1/2",animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:e.jsx("span",{className:"text-xs font-bold text-white drop-shadow",children:"üéØ"})})]})]})]}),e.jsxs("div",{className:`relative p-4 rounded-2xl transition-all duration-500 border-2 ${ue?"bg-red-50 border-red-200 shadow-lg shadow-red-100":"bg-green-50 border-green-200 shadow-lg shadow-green-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Reklamacije"}),ue?e.jsx(x.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:e.jsx(rt,{className:"w-5 h-5 text-red-600 drop-shadow-sm"})}):e.jsx(x.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(yt,{className:"w-5 h-5 text-green-600 drop-shadow-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x.span,{className:`text-3xl font-black ${ue?"text-red-700":"text-green-700"}`,animate:ue?{scale:[1,1.1,1],textShadow:["1px 1px 2px rgba(0,0,0,0.1)","2px 2px 4px rgba(220, 38, 38, 0.3)","1px 1px 2px rgba(0,0,0,0.1)"]}:{textShadow:["1px 1px 2px rgba(0,0,0,0.1)","2px 2px 4px rgba(34, 197, 94, 0.3)","1px 1px 2px rgba(0,0,0,0.1)"]},transition:{duration:2,repeat:1/0},children:P.complaints.value}),ue?e.jsxs(x.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200},className:"px-3 py-1 bg-red-600 text-white text-xs font-bold rounded-full shadow-lg flex items-center gap-1",children:[e.jsx("span",{children:"‚âà"}),e.jsxs("span",{children:[(P.complaints.value*80).toLocaleString(),"‚Ç¨"]})]}):e.jsx(x.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200},className:"px-3 py-1 bg-green-600 text-white text-xs font-bold rounded-full shadow-lg",children:"SAVR≈†ENO!"})]})]})]}),e.jsx(x.div,{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full shadow-lg"})})]})]},P.title)})})})]})})},Us=Object.freeze(Object.defineProperty({__proto__:null,default:Es},Symbol.toStringTag,{value:"Module"}));export{Ir as C,qs as D,Ws as H,Ns as M,Us as S,$t as U,Gs as a,Ma as b,Ys as c,Fs as i,he as q,Ot as u};

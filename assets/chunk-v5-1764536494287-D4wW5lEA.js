import{s as ie,g as da,a as ua}from"./chunk-v5-1764536494287-e5EidM2J.js";import{j as e,m as u,C as Ge,T as Re,a as ga,A as it,b as ma,c as zt,W as pa,K as Pt,L as xa,X as ha,d as fa,e as lt,f as Oe,g as Je,h as ba,N as ya,U as We,M as va,I as wa,i as ct,k as Ye,l as Be,P as Ke,n as Et,o as Tt,p as rt,q as ja,r as ka,s as Na,t as vt,u as Sa}from"./chunk-v5-1764536494287-CkPbRY4K.js";import{r as i,u as Ae}from"./chunk-v5-1764536494287-DzTHeiPn.js";import{e as $a,i as Da,f as be}from"./chunk-v5-1764536494287-67jeV4qK.js";import{Q as Ca,u as Xe}from"./chunk-v5-1764536494287-7I1WSilq.js";const me={getItem:t=>window.localStorage.getItem(t),setItem:(t,a)=>window.localStorage.setItem(t,a),deleteItem:t=>window.localStorage.removeItem(t)},Rt=i.createContext();function qr({children:t,forceShowInit:a}){const[s,r]=i.useState(!1),[o,p]=i.useState(""),[m,n]=i.useState(""),[c,C]=i.useState("user"),[D,T]=i.useState(""),[V,_]=i.useState("#1769aa"),k=i.useCallback(()=>{const h=me.getItem("DRIVER_TURA"),G=me.getItem("DRIVER_NAME"),z=me.getItem("DRIVER_ROLE"),U=me.getItem("DEVICE_ID"),F=me.getItem("IS_ADMIN");p(h||""),n(G||""),C(z||"user"),T(U||""),r(F==="true"),F==="true"?_("#cc0000"):G&&h&&_("#1769aa")},[]);i.useEffect(()=>{k(),typeof window<"u"&&(window.__USER_CONTEXT__={refreshStatus:k})},[k]);const K={isAdmin:s,driverTura:o,driverName:m,driverRole:c,deviceId:D,userColor:V,refreshStatus:k,resetLoginData:()=>(me.deleteItem("DRIVER_TURA"),me.deleteItem("DRIVER_NAME"),me.deleteItem("DRIVER_ROLE"),me.deleteItem("DEVICE_ID"),me.deleteItem("IS_ADMIN"),me.deleteItem("APP_LANG"),k(),typeof a=="function"&&a(),!0),validateDriverAccess:()=>!(!o||!D)};return e.jsx(Rt.Provider,{value:K,children:t})}function Ia(){const t=i.useContext(Rt);if(!t)throw new Error("useUserContext mora biti kori≈°ten unutar <UserProvider>");return t}function Ot(){const[t,a]=i.useState(null),[s,r]=i.useState(!0),[o,p]=i.useState(null),m=i.useCallback(()=>{try{const _=localStorage.getItem("bde_current_user"),k=localStorage.getItem("bde_login_time");if(_&&k){const $=JSON.parse(_);if(Date.now()-parseInt(k)<7*24*60*60*1e3)return $;localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}}catch(_){console.error("Error loading user from storage:",_),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}return null},[]),n=i.useCallback(_=>{try{localStorage.setItem("bde_current_user",JSON.stringify(_)),localStorage.setItem("bde_login_time",Date.now().toString())}catch(k){console.error("Error saving user to storage:",k)}},[]),c=i.useCallback(async _=>{console.log("üöÄ checkDriverExists called with tura:",_),r(!0),p(null);try{const{data:k,error:$}=await ie.from("drivers").select("id, ime, tura, aktivan, role, password_hash").eq("tura",_.toUpperCase()).eq("aktivan",!0).single();if($)throw console.error("Database error checking driver:",$),new Error(`Vozaƒç sa turom ${_} nije pronaƒëen ili nije aktivan`);console.log("üîç Driver check result:",{id:k.id,ime:k.ime,tura:k.tura,hasPassword:!!k.password_hash,role:k.role});const I={id:k.id,ime:k.ime,tura:k.tura,role:k.role||"driver",hasPassword:!!k.password_hash};return console.log("üéØ Returning from checkDriverExists:",I),I}catch(k){throw p(k.message),k}finally{r(!1)}},[]),C=i.useCallback(async(_,k)=>{r(!0),p(null);try{const $=btoa(k),{error:I}=await ie.from("drivers").update({password_hash:$,last_login:new Date}).eq("id",_);if(I)throw new Error("Gre≈°ka pri postavljanju lozinke");return!0}catch($){throw p($.message),$}finally{r(!1)}},[]),D=i.useCallback(async(_,k)=>{r(!0),p(null);try{const{data:$,error:I}=await ie.from("drivers").select("*").eq("tura",_.toUpperCase()).eq("aktivan",!0).single();if(I)throw console.error("Database error during login:",I),new Error(`Vozaƒç sa turom ${_} nije pronaƒëen ili nije aktivan`);if(console.log("üîç Driver found for login:",{tura:$.tura,ime:$.ime,hasPassword:!!$.password_hash,role:$.role}),!$.password_hash)throw new Error("Vozaƒç nema postavljenu lozinku. Kontaktirajte administratora.");if(!($.password_hash===k||$.password_hash===btoa(k)))throw new Error("Neispravna lozinka");await ie.from("drivers").update({last_login:new Date}).eq("id",$.id);const h={id:$.id,username:$.tura,name:$.ime,role:$.role||"driver",loginTime:Date.now()};return a(h),n(h),h}catch($){throw p($.message),$}finally{r(!1)}},[n]),T=i.useCallback(async(_,k)=>{if(!t)throw new Error("Morate biti ulogovani");r(!0),p(null);try{const{data:$,error:I}=await ie.from("drivers").select("password_hash").eq("id",t.id).single();if(I)throw new Error("Gre≈°ka pri provjeri korisnika");if(!($.password_hash===_||$.password_hash===btoa(_)))throw new Error("Stara lozinka nije ispravna");const h=btoa(k),{error:G}=await ie.from("drivers").update({password_hash:h}).eq("id",t.id);if(G)throw new Error("Gre≈°ka pri a≈æuriranju lozinke");return!0}catch($){throw p($.message),$}finally{r(!1)}},[t]),V=i.useCallback(()=>{a(null),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time"),p(null),console.log("‚úÖ User logged out")},[]);return i.useEffect(()=>{const _=m();_&&a(_),r(!1)},[m]),{currentUser:t,loading:s,error:o,checkDriverExists:c,setInitialPassword:C,login:D,changePassword:T,logout:V,isAuthenticated:!!t}}function At(t,a,s=[]){return i.useMemo(()=>{const r=new Date(t,a,1),o=new Date(t,a+1,0);return $a({start:r,end:o}).filter(m=>!Da(m)&&!(s||[]).includes(be(m,"yyyy-MM-dd")))},[t,a,s])}function _a({syncStatus:t}){const a=(t==null?void 0:t.unsyncedCount)===0;if(!t)return null;const s=a?"100%":"30%",r=a?"#4caf50":"#f44336";return e.jsx("div",{style:{width:"100%",height:6,backgroundColor:"#e0e0e0",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:3,width:s,backgroundColor:r,transition:"width 1s, background-color 1s"}})})}const Ma=()=>({persistClient:t=>{try{const a={timestamp:Date.now(),clientState:JSON.stringify({queries:t.getQueryCache().getAll().filter(s=>{const r=s.queryKey[0];return["drivers","holidays"].includes(r)}).map(s=>({queryKey:s.queryKey,state:s.state}))})};localStorage.setItem("bde_query_cache",JSON.stringify(a))}catch(a){console.warn("Failed to persist query cache:",a)}},restoreClient:()=>{try{const t=localStorage.getItem("bde_query_cache");if(!t)return;const{timestamp:a,clientState:s}=JSON.parse(t),r=24*60*60*1e3;if(Date.now()-a>r){localStorage.removeItem("bde_query_cache");return}return JSON.parse(s)}catch(t){console.warn("Failed to restore query cache:",t),localStorage.removeItem("bde_query_cache")}},removeClient:()=>{localStorage.removeItem("bde_query_cache")}}),dt=Ma(),za=()=>{const t=new Date,a=t.getHours(),s=t.getDay();let r,o;return s>=1&&s<=5&&a>=2&&a<=9?(r=5*60*1e3,o="radni sat (dodaju se novi podaci)"):s>=1&&s<=5&&a>9?(r=2*60*60*1e3,o="radni dan posle 09h"):(r=6*60*60*1e3,o=s===0||s===6?"vikend":"noƒá"),console.log(`üß† Smart cache: ${r/6e4} min (${o})`),r},xe=new Ca({defaultOptions:{queries:{staleTime:za(),cacheTime:4*60*60*1e3,refetchOnWindowFocus:()=>{const t=new Date().getHours(),a=new Date().getDay();return a>=1&&a<=5&&t>=2&&t<=9},refetchOnReconnect:!0,refetchOnMount:!1,retry:2,retryDelay:t=>Math.min(1e3*2**t,3e4),suspense:!1,useErrorBoundary:!1,networkMode:"online"},mutations:{retry:1,networkMode:"online"}}}),le={drivers:{all:["drivers"]},deliveries:{all:["deliveries"],byMonth:(t,a)=>[...le.deliveries.all,"month",t,a],byYear:t=>[...le.deliveries.all,"year",t],byDriver:(t,a,s)=>[...le.deliveries.all,"driver",t,a,s],stats:(t,a)=>[...le.deliveries.all,"stats",t,a]},holidays:{all:["holidays"],byYear:t=>[...le.holidays.all,"year",t]},extraRides:{all:["extraRides"]},driverStats:{all:["driverStats"]}},Vr={drivers:()=>xe.invalidateQueries({queryKey:le.drivers.all}),deliveries:()=>xe.invalidateQueries({queryKey:le.deliveries.all}),holidays:()=>xe.invalidateQueries({queryKey:le.holidays.all}),extraRides:()=>xe.invalidateQueries({queryKey:le.extraRides.all}),driverStats:()=>xe.invalidateQueries({queryKey:le.driverStats.all}),all:()=>xe.invalidateQueries()};try{const t=dt.restoreClient();t!=null&&t.queries&&t.queries.forEach(({queryKey:a,state:s})=>{s.data&&xe.setQueryData(a,s.data)})}catch(t){console.warn("Failed to restore query cache on init:",t)}let wt;xe.getQueryCache().subscribe(()=>{clearTimeout(wt),wt=setTimeout(()=>{dt.persistClient(xe)},1e3)});typeof window<"u"&&window.addEventListener("beforeunload",()=>{dt.persistClient(xe)});function Ht(t={}){return Xe({queryKey:le.drivers.all,queryFn:async()=>{console.log("üöó Fetching drivers from Supabase...");const{data:a,error:s}=await ie.from("drivers").select("*").order("tura",{ascending:!0});if(s)throw s;return console.log("‚úÖ Drivers loaded from Supabase:",(a==null?void 0:a.length)||0),a||[]},staleTime:30*60*1e3,...t})}function Pa(t,a,s={}){return Xe({queryKey:le.deliveries.byMonth(t,a),queryFn:()=>da(t,a),staleTime:3*60*1e3,enabled:t!==void 0&&a!==void 0,...s})}function Ea(t,a,s,r={}){return Xe({queryKey:le.deliveries.byDriver(t,a,s),queryFn:async()=>{const o=new Date(a,s,1),p=new Date(a,s+1,0),m=o.toISOString().split("T")[0],n=p.toISOString().split("T")[0],{data:c,error:C}=await ie.from("deliveries").select("*").eq("driver",t).gte("date",m).lte("date",n).order("date",{ascending:!0});if(C)throw C;return c||[]},enabled:!!t&&a!==void 0&&s!==void 0,staleTime:3*60*1e3,...r})}function Ft(t,a={}){return Xe({queryKey:le.holidays.byYear(t),queryFn:()=>ua(t),staleTime:30*60*1e3,enabled:t!==void 0,...a})}function jt(t,a){if(typeof t=="function")return t(a);t!=null&&(t.current=a)}function Ta(...t){return a=>{let s=!1;const r=t.map(o=>{const p=jt(o,a);return!s&&typeof p=="function"&&(s=!0),p});if(s)return()=>{for(let o=0;o<r.length;o++){const p=r[o];typeof p=="function"?p():jt(t[o],null)}}}}function Ra(t){const a=Aa(t),s=i.forwardRef((r,o)=>{const{children:p,...m}=r,n=i.Children.toArray(p),c=n.find(Fa);if(c){const C=c.props.children,D=n.map(T=>T===c?i.Children.count(C)>1?i.Children.only(null):i.isValidElement(C)?C.props.children:null:T);return e.jsx(a,{...m,ref:o,children:i.isValidElement(C)?i.cloneElement(C,void 0,D):null})}return e.jsx(a,{...m,ref:o,children:p})});return s.displayName=`${t}.Slot`,s}var Oa=Ra("Slot");function Aa(t){const a=i.forwardRef((s,r)=>{const{children:o,...p}=s;if(i.isValidElement(o)){const m=Ga(o),n=La(p,o.props);return o.type!==i.Fragment&&(n.ref=r?Ta(r,m):m),i.cloneElement(o,n)}return i.Children.count(o)>1?i.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var Ha=Symbol("radix.slottable");function Fa(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ha}function La(t,a){const s={...a};for(const r in a){const o=t[r],p=a[r];/^on[A-Z]/.test(r)?o&&p?s[r]=(...n)=>{const c=p(...n);return o(...n),c}:o&&(s[r]=o):r==="style"?s[r]={...o,...p}:r==="className"&&(s[r]=[o,p].filter(Boolean).join(" "))}return{...t,...s}}function Ga(t){var r,o;let a=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=a&&"isReactWarning"in a&&a.isReactWarning;return s?t.ref:(a=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,s=a&&"isReactWarning"in a&&a.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function Lt(t){var a,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(a=0;a<o;a++)t[a]&&(s=Lt(t[a]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function Gt(){for(var t,a,s=0,r="",o=arguments.length;s<o;s++)(t=arguments[s])&&(a=Lt(t))&&(r&&(r+=" "),r+=a);return r}const kt=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Nt=Gt,Ua=(t,a)=>s=>{var r;if((a==null?void 0:a.variants)==null)return Nt(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:o,defaultVariants:p}=a,m=Object.keys(o).map(C=>{const D=s==null?void 0:s[C],T=p==null?void 0:p[C];if(D===null)return null;const V=kt(D)||kt(T);return o[C][V]}),n=s&&Object.entries(s).reduce((C,D)=>{let[T,V]=D;return V===void 0||(C[T]=V),C},{}),c=a==null||(r=a.compoundVariants)===null||r===void 0?void 0:r.reduce((C,D)=>{let{class:T,className:V,..._}=D;return Object.entries(_).every(k=>{let[$,I]=k;return Array.isArray(I)?I.includes({...p,...n}[$]):{...p,...n}[$]===I})?[...C,T,V]:C},[]);return Nt(t,m,c,s==null?void 0:s.class,s==null?void 0:s.className)},ut="-",qa=t=>{const a=Wa(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:m=>{const n=m.split(ut);return n[0]===""&&n.length!==1&&n.shift(),Ut(n,a)||Va(m)},getConflictingClassGroupIds:(m,n)=>{const c=s[m]||[];return n&&r[m]?[...c,...r[m]]:c}}},Ut=(t,a)=>{var m;if(t.length===0)return a.classGroupId;const s=t[0],r=a.nextPart.get(s),o=r?Ut(t.slice(1),r):void 0;if(o)return o;if(a.validators.length===0)return;const p=t.join(ut);return(m=a.validators.find(({validator:n})=>n(p)))==null?void 0:m.classGroupId},St=/^\[(.+)\]$/,Va=t=>{if(St.test(t)){const a=St.exec(t)[1],s=a==null?void 0:a.substring(0,a.indexOf(":"));if(s)return"arbitrary.."+s}},Wa=t=>{const{theme:a,classGroups:s}=t,r={nextPart:new Map,validators:[]};for(const o in s)st(s[o],r,o,a);return r},st=(t,a,s,r)=>{t.forEach(o=>{if(typeof o=="string"){const p=o===""?a:$t(a,o);p.classGroupId=s;return}if(typeof o=="function"){if(Ya(o)){st(o(r),a,s,r);return}a.validators.push({validator:o,classGroupId:s});return}Object.entries(o).forEach(([p,m])=>{st(m,$t(a,p),s,r)})})},$t=(t,a)=>{let s=t;return a.split(ut).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},Ya=t=>t.isThemeGetter,Ba=t=>{if(t<1)return{get:()=>{},set:()=>{}};let a=0,s=new Map,r=new Map;const o=(p,m)=>{s.set(p,m),a++,a>t&&(a=0,r=s,s=new Map)};return{get(p){let m=s.get(p);if(m!==void 0)return m;if((m=r.get(p))!==void 0)return o(p,m),m},set(p,m){s.has(p)?s.set(p,m):o(p,m)}}},ot="!",nt=":",Ka=nt.length,Ja=t=>{const{prefix:a,experimentalParseClassName:s}=t;let r=o=>{const p=[];let m=0,n=0,c=0,C;for(let k=0;k<o.length;k++){let $=o[k];if(m===0&&n===0){if($===nt){p.push(o.slice(c,k)),c=k+Ka;continue}if($==="/"){C=k;continue}}$==="["?m++:$==="]"?m--:$==="("?n++:$===")"&&n--}const D=p.length===0?o:o.substring(c),T=Xa(D),V=T!==D,_=C&&C>c?C-c:void 0;return{modifiers:p,hasImportantModifier:V,baseClassName:T,maybePostfixModifierPosition:_}};if(a){const o=a+nt,p=r;r=m=>m.startsWith(o)?p(m.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:m,maybePostfixModifierPosition:void 0}}if(s){const o=r;r=p=>s({className:p,parseClassName:o})}return r},Xa=t=>t.endsWith(ot)?t.substring(0,t.length-1):t.startsWith(ot)?t.substring(1):t,Qa=t=>{const a=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let p=[];return r.forEach(m=>{m[0]==="["||a[m]?(o.push(...p.sort(),m),p=[]):p.push(m)}),o.push(...p.sort()),o}},Za=t=>({cache:Ba(t.cacheSize),parseClassName:Ja(t),sortModifiers:Qa(t),...qa(t)}),er=/\s+/,tr=(t,a)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:p}=a,m=[],n=t.trim().split(er);let c="";for(let C=n.length-1;C>=0;C-=1){const D=n[C],{isExternal:T,modifiers:V,hasImportantModifier:_,baseClassName:k,maybePostfixModifierPosition:$}=s(D);if(T){c=D+(c.length>0?" "+c:c);continue}let I=!!$,K=r(I?k.substring(0,$):k);if(!K){if(!I){c=D+(c.length>0?" "+c:c);continue}if(K=r(k),!K){c=D+(c.length>0?" "+c:c);continue}I=!1}const h=p(V).join(":"),G=_?h+ot:h,z=G+K;if(m.includes(z))continue;m.push(z);const U=o(K,I);for(let F=0;F<U.length;++F){const v=U[F];m.push(G+v)}c=D+(c.length>0?" "+c:c)}return c};function ar(){let t=0,a,s,r="";for(;t<arguments.length;)(a=arguments[t++])&&(s=qt(a))&&(r&&(r+=" "),r+=s);return r}const qt=t=>{if(typeof t=="string")return t;let a,s="";for(let r=0;r<t.length;r++)t[r]&&(a=qt(t[r]))&&(s&&(s+=" "),s+=a);return s};function rr(t,...a){let s,r,o,p=m;function m(c){const C=a.reduce((D,T)=>T(D),t());return s=Za(C),r=s.cache.get,o=s.cache.set,p=n,n(c)}function n(c){const C=r(c);if(C)return C;const D=tr(c,s);return o(c,D),D}return function(){return p(ar.apply(null,arguments))}}const se=t=>{const a=s=>s[t]||[];return a.isThemeGetter=!0,a},Vt=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Wt=/^\((?:(\w[\w-]*):)?(.+)\)$/i,sr=/^\d+\/\d+$/,or=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nr=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ir=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,lr=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cr=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ce=t=>sr.test(t),A=t=>!!t&&!Number.isNaN(Number(t)),ve=t=>!!t&&Number.isInteger(Number(t)),et=t=>t.endsWith("%")&&A(t.slice(0,-1)),fe=t=>or.test(t),dr=()=>!0,ur=t=>nr.test(t)&&!ir.test(t),Yt=()=>!1,gr=t=>lr.test(t),mr=t=>cr.test(t),pr=t=>!N(t)&&!S(t),xr=t=>Ie(t,Jt,Yt),N=t=>Vt.test(t),je=t=>Ie(t,Xt,ur),tt=t=>Ie(t,vr,A),Dt=t=>Ie(t,Bt,Yt),hr=t=>Ie(t,Kt,mr),Ue=t=>Ie(t,Qt,gr),S=t=>Wt.test(t),Ee=t=>_e(t,Xt),fr=t=>_e(t,wr),Ct=t=>_e(t,Bt),br=t=>_e(t,Jt),yr=t=>_e(t,Kt),qe=t=>_e(t,Qt,!0),Ie=(t,a,s)=>{const r=Vt.exec(t);return r?r[1]?a(r[1]):s(r[2]):!1},_e=(t,a,s=!1)=>{const r=Wt.exec(t);return r?r[1]?a(r[1]):s:!1},Bt=t=>t==="position"||t==="percentage",Kt=t=>t==="image"||t==="url",Jt=t=>t==="length"||t==="size"||t==="bg-size",Xt=t=>t==="length",vr=t=>t==="number",wr=t=>t==="family-name",Qt=t=>t==="shadow",jr=()=>{const t=se("color"),a=se("font"),s=se("text"),r=se("font-weight"),o=se("tracking"),p=se("leading"),m=se("breakpoint"),n=se("container"),c=se("spacing"),C=se("radius"),D=se("shadow"),T=se("inset-shadow"),V=se("text-shadow"),_=se("drop-shadow"),k=se("blur"),$=se("perspective"),I=se("aspect"),K=se("ease"),h=se("animate"),G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],U=()=>[...z(),S,N],F=()=>["auto","hidden","clip","visible","scroll"],v=()=>["auto","contain","none"],g=()=>[S,N,c],P=()=>[Ce,"full","auto",...g()],Z=()=>[ve,"none","subgrid",S,N],ae=()=>["auto",{span:["full",ve,S,N]},ve,S,N],R=()=>[ve,"auto",S,N],O=()=>["auto","min","max","fr",S,N],B=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ee=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...g()],W=()=>[Ce,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...g()],w=()=>[t,S,N],te=()=>[...z(),Ct,Dt,{position:[S,N]}],x=()=>["no-repeat",{repeat:["","x","y","space","round"]}],l=()=>["auto","cover","contain",br,xr,{size:[S,N]}],b=()=>[et,Ee,je],f=()=>["","none","full",C,S,N],j=()=>["",A,Ee,je],q=()=>["solid","dashed","dotted","double"],d=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],y=()=>[A,et,Ct,Dt],E=()=>["","none",k,S,N],H=()=>["none",A,S,N],Y=()=>["none",A,S,N],X=()=>[A,S,N],re=()=>[Ce,"full",...g()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fe],breakpoint:[fe],color:[dr],container:[fe],"drop-shadow":[fe],ease:["in","out","in-out"],font:[pr],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fe],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fe],shadow:[fe],spacing:["px",A],text:[fe],"text-shadow":[fe],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ce,N,S,I]}],container:["container"],columns:[{columns:[A,N,S,n]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:U()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:v()}],"overscroll-x":[{"overscroll-x":v()}],"overscroll-y":[{"overscroll-y":v()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[ve,"auto",S,N]}],basis:[{basis:[Ce,"full","auto",n,...g()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[A,Ce,"auto","initial","none",N]}],grow:[{grow:["",A,S,N]}],shrink:[{shrink:["",A,S,N]}],order:[{order:[ve,"first","last","none",S,N]}],"grid-cols":[{"grid-cols":Z()}],"col-start-end":[{col:ae()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":Z()}],"row-start-end":[{row:ae()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":O()}],"auto-rows":[{"auto-rows":O()}],gap:[{gap:g()}],"gap-x":[{"gap-x":g()}],"gap-y":[{"gap-y":g()}],"justify-content":[{justify:[...B(),"normal"]}],"justify-items":[{"justify-items":[...ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...ee()]}],"align-content":[{content:["normal",...B()]}],"align-items":[{items:[...ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":B()}],"place-items":[{"place-items":[...ee(),"baseline"]}],"place-self":[{"place-self":["auto",...ee()]}],p:[{p:g()}],px:[{px:g()}],py:[{py:g()}],ps:[{ps:g()}],pe:[{pe:g()}],pt:[{pt:g()}],pr:[{pr:g()}],pb:[{pb:g()}],pl:[{pl:g()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":g()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":g()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[n,"screen",...W()]}],"min-w":[{"min-w":[n,"screen","none",...W()]}],"max-w":[{"max-w":[n,"screen","none","prose",{screen:[m]},...W()]}],h:[{h:["screen","lh",...W()]}],"min-h":[{"min-h":["screen","lh","none",...W()]}],"max-h":[{"max-h":["screen","lh",...W()]}],"font-size":[{text:["base",s,Ee,je]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,S,tt]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",et,N]}],"font-family":[{font:[fr,N,a]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,S,N]}],"line-clamp":[{"line-clamp":[A,"none",S,tt]}],leading:[{leading:[p,...g()]}],"list-image":[{"list-image":["none",S,N]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",S,N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:w()}],"text-color":[{text:w()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:[A,"from-font","auto",S,je]}],"text-decoration-color":[{decoration:w()}],"underline-offset":[{"underline-offset":[A,"auto",S,N]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:g()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",S,N]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",S,N]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:x()}],"bg-size":[{bg:l()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ve,S,N],radial:["",S,N],conic:[ve,S,N]},yr,hr]}],"bg-color":[{bg:w()}],"gradient-from-pos":[{from:b()}],"gradient-via-pos":[{via:b()}],"gradient-to-pos":[{to:b()}],"gradient-from":[{from:w()}],"gradient-via":[{via:w()}],"gradient-to":[{to:w()}],rounded:[{rounded:f()}],"rounded-s":[{"rounded-s":f()}],"rounded-e":[{"rounded-e":f()}],"rounded-t":[{"rounded-t":f()}],"rounded-r":[{"rounded-r":f()}],"rounded-b":[{"rounded-b":f()}],"rounded-l":[{"rounded-l":f()}],"rounded-ss":[{"rounded-ss":f()}],"rounded-se":[{"rounded-se":f()}],"rounded-ee":[{"rounded-ee":f()}],"rounded-es":[{"rounded-es":f()}],"rounded-tl":[{"rounded-tl":f()}],"rounded-tr":[{"rounded-tr":f()}],"rounded-br":[{"rounded-br":f()}],"rounded-bl":[{"rounded-bl":f()}],"border-w":[{border:j()}],"border-w-x":[{"border-x":j()}],"border-w-y":[{"border-y":j()}],"border-w-s":[{"border-s":j()}],"border-w-e":[{"border-e":j()}],"border-w-t":[{"border-t":j()}],"border-w-r":[{"border-r":j()}],"border-w-b":[{"border-b":j()}],"border-w-l":[{"border-l":j()}],"divide-x":[{"divide-x":j()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":j()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...q(),"hidden","none"]}],"divide-style":[{divide:[...q(),"hidden","none"]}],"border-color":[{border:w()}],"border-color-x":[{"border-x":w()}],"border-color-y":[{"border-y":w()}],"border-color-s":[{"border-s":w()}],"border-color-e":[{"border-e":w()}],"border-color-t":[{"border-t":w()}],"border-color-r":[{"border-r":w()}],"border-color-b":[{"border-b":w()}],"border-color-l":[{"border-l":w()}],"divide-color":[{divide:w()}],"outline-style":[{outline:[...q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[A,S,N]}],"outline-w":[{outline:["",A,Ee,je]}],"outline-color":[{outline:w()}],shadow:[{shadow:["","none",D,qe,Ue]}],"shadow-color":[{shadow:w()}],"inset-shadow":[{"inset-shadow":["none",T,qe,Ue]}],"inset-shadow-color":[{"inset-shadow":w()}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:w()}],"ring-offset-w":[{"ring-offset":[A,je]}],"ring-offset-color":[{"ring-offset":w()}],"inset-ring-w":[{"inset-ring":j()}],"inset-ring-color":[{"inset-ring":w()}],"text-shadow":[{"text-shadow":["none",V,qe,Ue]}],"text-shadow-color":[{"text-shadow":w()}],opacity:[{opacity:[A,S,N]}],"mix-blend":[{"mix-blend":[...d(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":d()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[A]}],"mask-image-linear-from-pos":[{"mask-linear-from":y()}],"mask-image-linear-to-pos":[{"mask-linear-to":y()}],"mask-image-linear-from-color":[{"mask-linear-from":w()}],"mask-image-linear-to-color":[{"mask-linear-to":w()}],"mask-image-t-from-pos":[{"mask-t-from":y()}],"mask-image-t-to-pos":[{"mask-t-to":y()}],"mask-image-t-from-color":[{"mask-t-from":w()}],"mask-image-t-to-color":[{"mask-t-to":w()}],"mask-image-r-from-pos":[{"mask-r-from":y()}],"mask-image-r-to-pos":[{"mask-r-to":y()}],"mask-image-r-from-color":[{"mask-r-from":w()}],"mask-image-r-to-color":[{"mask-r-to":w()}],"mask-image-b-from-pos":[{"mask-b-from":y()}],"mask-image-b-to-pos":[{"mask-b-to":y()}],"mask-image-b-from-color":[{"mask-b-from":w()}],"mask-image-b-to-color":[{"mask-b-to":w()}],"mask-image-l-from-pos":[{"mask-l-from":y()}],"mask-image-l-to-pos":[{"mask-l-to":y()}],"mask-image-l-from-color":[{"mask-l-from":w()}],"mask-image-l-to-color":[{"mask-l-to":w()}],"mask-image-x-from-pos":[{"mask-x-from":y()}],"mask-image-x-to-pos":[{"mask-x-to":y()}],"mask-image-x-from-color":[{"mask-x-from":w()}],"mask-image-x-to-color":[{"mask-x-to":w()}],"mask-image-y-from-pos":[{"mask-y-from":y()}],"mask-image-y-to-pos":[{"mask-y-to":y()}],"mask-image-y-from-color":[{"mask-y-from":w()}],"mask-image-y-to-color":[{"mask-y-to":w()}],"mask-image-radial":[{"mask-radial":[S,N]}],"mask-image-radial-from-pos":[{"mask-radial-from":y()}],"mask-image-radial-to-pos":[{"mask-radial-to":y()}],"mask-image-radial-from-color":[{"mask-radial-from":w()}],"mask-image-radial-to-color":[{"mask-radial-to":w()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":z()}],"mask-image-conic-pos":[{"mask-conic":[A]}],"mask-image-conic-from-pos":[{"mask-conic-from":y()}],"mask-image-conic-to-pos":[{"mask-conic-to":y()}],"mask-image-conic-from-color":[{"mask-conic-from":w()}],"mask-image-conic-to-color":[{"mask-conic-to":w()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:x()}],"mask-size":[{mask:l()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",S,N]}],filter:[{filter:["","none",S,N]}],blur:[{blur:E()}],brightness:[{brightness:[A,S,N]}],contrast:[{contrast:[A,S,N]}],"drop-shadow":[{"drop-shadow":["","none",_,qe,Ue]}],"drop-shadow-color":[{"drop-shadow":w()}],grayscale:[{grayscale:["",A,S,N]}],"hue-rotate":[{"hue-rotate":[A,S,N]}],invert:[{invert:["",A,S,N]}],saturate:[{saturate:[A,S,N]}],sepia:[{sepia:["",A,S,N]}],"backdrop-filter":[{"backdrop-filter":["","none",S,N]}],"backdrop-blur":[{"backdrop-blur":E()}],"backdrop-brightness":[{"backdrop-brightness":[A,S,N]}],"backdrop-contrast":[{"backdrop-contrast":[A,S,N]}],"backdrop-grayscale":[{"backdrop-grayscale":["",A,S,N]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[A,S,N]}],"backdrop-invert":[{"backdrop-invert":["",A,S,N]}],"backdrop-opacity":[{"backdrop-opacity":[A,S,N]}],"backdrop-saturate":[{"backdrop-saturate":[A,S,N]}],"backdrop-sepia":[{"backdrop-sepia":["",A,S,N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":g()}],"border-spacing-x":[{"border-spacing-x":g()}],"border-spacing-y":[{"border-spacing-y":g()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",S,N]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[A,"initial",S,N]}],ease:[{ease:["linear","initial",K,S,N]}],delay:[{delay:[A,S,N]}],animate:[{animate:["none",h,S,N]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[$,S,N]}],"perspective-origin":[{"perspective-origin":U()}],rotate:[{rotate:H()}],"rotate-x":[{"rotate-x":H()}],"rotate-y":[{"rotate-y":H()}],"rotate-z":[{"rotate-z":H()}],scale:[{scale:Y()}],"scale-x":[{"scale-x":Y()}],"scale-y":[{"scale-y":Y()}],"scale-z":[{"scale-z":Y()}],"scale-3d":["scale-3d"],skew:[{skew:X()}],"skew-x":[{"skew-x":X()}],"skew-y":[{"skew-y":X()}],transform:[{transform:[S,N,"","none","gpu","cpu"]}],"transform-origin":[{origin:U()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:re()}],"translate-x":[{"translate-x":re()}],"translate-y":[{"translate-y":re()}],"translate-z":[{"translate-z":re()}],"translate-none":["translate-none"],accent:[{accent:w()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:w()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",S,N]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":g()}],"scroll-mx":[{"scroll-mx":g()}],"scroll-my":[{"scroll-my":g()}],"scroll-ms":[{"scroll-ms":g()}],"scroll-me":[{"scroll-me":g()}],"scroll-mt":[{"scroll-mt":g()}],"scroll-mr":[{"scroll-mr":g()}],"scroll-mb":[{"scroll-mb":g()}],"scroll-ml":[{"scroll-ml":g()}],"scroll-p":[{"scroll-p":g()}],"scroll-px":[{"scroll-px":g()}],"scroll-py":[{"scroll-py":g()}],"scroll-ps":[{"scroll-ps":g()}],"scroll-pe":[{"scroll-pe":g()}],"scroll-pt":[{"scroll-pt":g()}],"scroll-pr":[{"scroll-pr":g()}],"scroll-pb":[{"scroll-pb":g()}],"scroll-pl":[{"scroll-pl":g()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",S,N]}],fill:[{fill:["none",...w()]}],"stroke-w":[{stroke:[A,Ee,je,tt]}],stroke:[{stroke:["none",...w()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},kr=rr(jr);function ke(...t){return kr(Gt(t))}const Nr=Ua("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Te=i.forwardRef(({className:t,variant:a,size:s,asChild:r=!1,...o},p)=>{const m=r?Oa:"button";return e.jsx(m,{className:ke(Nr({variant:a,size:s,className:t})),ref:p,...o})});Te.displayName="Button";function It({user:t,onChangePassword:a,onLogout:s,scraperData:r,currentTheme:o="default",themes:p}){const[m,n]=i.useState(!1),c=i.useRef(null),C=i.useRef(null),D=i.useRef(null),T=Ae(),_=p||{default:{accent:"from-blue-600 to-purple-600",gradient:"bg-gradient-to-r from-blue-500 to-purple-500"},sunrise:{accent:"from-orange-500 to-pink-500",gradient:"bg-gradient-to-r from-orange-400 to-pink-400"},afternoon:{accent:"from-blue-500 to-cyan-500",gradient:"bg-gradient-to-r from-blue-400 to-cyan-400"},evening:{accent:"from-purple-600 to-indigo-600",gradient:"bg-gradient-to-r from-purple-500 to-indigo-500"},night:{accent:"from-gray-600 to-blue-800",gradient:"bg-gradient-to-r from-gray-500 to-blue-700"}},k=()=>r?r.status==="completed"?{text:"Uspe≈°no",color:"text-emerald-500"}:r.status==="in_progress"?{text:"U toku",color:"text-amber-500"}:r.status==="failure"?{text:"Gre≈°ka",color:"text-rose-500"}:{text:"Nepoznato",color:"text-gray-500"}:{text:"Nepoznato",color:"text-gray-500"},$=()=>{var G,z,U;if(!r)return"Nepoznato";const h=[r.formattedTimestamp,r.timestamp,(G=r.raw)==null?void 0:G.updated_at,(z=r.raw)==null?void 0:z.run_started_at,(U=r.raw)==null?void 0:U.created_at];for(const F of h)if(F){const v=new Date(F);if(!isNaN(v.getTime()))return`${String(v.getDate()).padStart(2,"0")}.${String(v.getMonth()+1).padStart(2,"0")} ${String(v.getHours()).padStart(2,"0")}:${String(v.getMinutes()).padStart(2,"0")}`}return"Nepoznato"};i.useEffect(()=>{const h=G=>{const z=C.current&&!C.current.contains(G.target),U=c.current&&!c.current.contains(G.target),F=D.current&&!D.current.contains(G.target);z&&U&&F&&n(!1)};if(m)return document.addEventListener("mousedown",h),document.addEventListener("touchstart",h),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("touchstart",h)}},[m]);const I=()=>n(!m),K=h=>{n(!1),setTimeout(()=>h==null?void 0:h(),100)};return e.jsxs("div",{className:"relative inline-block text-left",ref:c,style:{zIndex:m?999999:"auto",position:"relative"},children:[e.jsx(u.div,{ref:C,onClick:I,whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:e.jsxs(u.div,{className:`flex items-center gap-3 px-3 py-2 ${o==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-2xl rounded-full border ${o==="night"?"border-white/10":"border-gray-100/50"} cursor-pointer transition-all duration-300`,style:{boxShadow:o==="night"?"6px 6px 12px rgba(0,0,0,0.4), -6px -6px 12px rgba(255,255,255,0.02)":"6px 6px 12px rgba(0,0,0,0.08), -6px -6px 12px rgba(255,255,255,0.8)"},whileHover:{boxShadow:o==="night"?"8px 8px 16px rgba(0,0,0,0.6), -8px -8px 16px rgba(255,255,255,0.05)":"8px 8px 16px rgba(0,0,0,0.12), -8px -8px 16px rgba(255,255,255,0.9)"},children:[e.jsx(u.div,{className:`w-8 h-8 rounded-full bg-gradient-to-br ${_[o].accent} flex items-center justify-center text-white font-bold`,whileHover:{rotate:[0,5,-5,0],scale:1.1},transition:{duration:.5},children:(t==null?void 0:t.role)==="admin"?e.jsx(Ge,{className:"w-6 h-6 text-amber-400"}):e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:`font-medium ${o==="night"?"text-gray-200":"text-gray-800"}`,children:(t==null?void 0:t.name)||"Korisnik"}),e.jsx(u.div,{animate:{rotate:m?180:0},transition:{duration:.3},children:e.jsx(ga,{className:`w-4 h-4 ${o==="night"?"text-gray-400":"text-gray-500"}`})})]})}),e.jsx(it,{children:m&&e.jsxs(u.div,{ref:D,initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.25},className:`absolute right-0 mt-2 w-72 ${o==="night"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-3xl border ${o==="night"?"border-white/30":"border-gray-300"} rounded-2xl p-4`,style:{zIndex:999999,position:"absolute",top:"100%",right:0,boxShadow:o==="night"?"0 25px 50px rgba(0,0,0,0.8), 0 10px 30px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.2)":"0 25px 50px rgba(0,0,0,0.15), 0 10px 30px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.1)",transform:"translateZ(0)",willChange:"transform, opacity"},onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(u.div,{className:`w-10 h-10 bg-gradient-to-br ${_[o].accent} rounded-full flex items-center justify-center text-white font-bold`,whileHover:{scale:1.1,rotate:5},transition:{duration:.3},style:{boxShadow:o==="night"?"3px 3px 6px rgba(0,0,0,0.6), -2px -2px 4px rgba(255,255,255,0.05)":"3px 3px 6px rgba(0,0,0,0.15), -2px -2px 4px rgba(255,255,255,0.8)"},children:(t==null?void 0:t.role)==="admin"?e.jsx(Ge,{className:"w-6 h-6 text-amber-400"}):e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold text-sm ${o==="night"?"text-gray-100":"text-gray-900"}`,children:(t==null?void 0:t.name)||"Korisnik"}),e.jsx("p",{className:`text-xs ${o==="night"?"text-gray-400":"text-gray-500"}`,children:(t==null?void 0:t.username)||"korisnik"})]}),(t==null?void 0:t.role)==="admin"&&e.jsx(u.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(Ge,{className:"w-4 h-4 text-amber-500"})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:(t==null?void 0:t.role)!=="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs(u.div,{className:`${o==="night"?"bg-gray-800/50 border-gray-600/50":"bg-blue-50/80 border-blue-200/60"} border rounded-xl p-2 transition-all hover:shadow-sm backdrop-blur-sm`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx("div",{className:`text-xs font-medium ${o==="night"?"text-blue-400":"text-blue-600"} mb-1`,children:"Zadnja plata"}),e.jsx("div",{className:`font-bold ${o==="night"?"text-blue-300":"text-blue-900"} text-sm`,children:(t==null?void 0:t.zadnjaPlata)||"-"})]}),e.jsxs(u.div,{className:`${o==="night"?"bg-gray-800/50 border-gray-600/50":"bg-emerald-50/80 border-emerald-200/60"} border rounded-xl p-2 transition-all hover:shadow-sm backdrop-blur-sm`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx("div",{className:`text-xs font-medium ${o==="night"?"text-emerald-400":"text-emerald-600"} mb-1`,children:"Ukupna zarada"}),e.jsx("div",{className:`font-bold ${o==="night"?"text-emerald-300":"text-emerald-900"} text-sm`,children:(t==null?void 0:t.ukupnaZarada)||"-"})]})]})}),(t==null?void 0:t.role)==="admin"&&r&&e.jsxs(u.div,{className:`${o==="night"?"bg-gray-800/50 border-gray-600/50":"bg-blue-50/80 border-blue-200/60"} border rounded-xl p-2 mb-3 backdrop-blur-sm`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:`${o==="night"?"text-gray-300":"text-gray-600"} flex items-center gap-1`,children:[e.jsx(ma,{className:`w-3 h-3 ${o==="night"?"text-blue-400":"text-blue-500"}`}),"Status:"]}),e.jsx("span",{className:`font-medium ${k().color}`,children:k().text})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs mt-1",children:[e.jsxs("span",{className:`${o==="night"?"text-gray-400":"text-gray-500"} flex items-center gap-1`,children:[e.jsx(zt,{className:"w-3 h-3"}),"Vrijeme:"]}),e.jsx("span",{className:`${o==="night"?"text-gray-300":"text-gray-700"} font-mono`,children:$()})]})]}),e.jsxs("div",{className:"space-y-1",children:[(t==null?void 0:t.role)==="admin"?e.jsx(u.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Te,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${o==="night"?"hover:bg-gray-700/50 text-blue-400":"hover:bg-blue-50 text-blue-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>K(()=>T("/admin")),children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Admin Panel"]})}):e.jsx(u.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Te,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${o==="night"?"hover:bg-gray-700/50 text-emerald-400":"hover:bg-green-50 text-emerald-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>K(()=>T("/payroll-list")),children:[e.jsx(pa,{className:"w-4 h-4 mr-2"}),"Platne liste"]})}),e.jsx(u.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Te,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${o==="night"?"hover:bg-gray-700/50 text-amber-400":"hover:bg-amber-50 text-amber-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>{typeof a=="function"&&a()},children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Promijeni ≈°ifru"]})}),e.jsx(u.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Te,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${o==="night"?"hover:bg-gray-700/50 text-rose-400":"hover:bg-rose-50 text-rose-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>{n(!1),setTimeout(()=>{try{typeof s=="function"&&s();try{localStorage.removeItem("bde_current_user")}catch{}try{localStorage.removeItem("bde_login_time")}catch{}window.dispatchEvent(new CustomEvent("bde:logout",{detail:{source:"UserMenu"}})),T("/")}catch(h){console.error("Logout failed",h)}},120)},children:[e.jsx(xa,{className:"w-4 h-4 mr-2"}),"Odjava"]})})]})]})})]})}const Zt=i.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:ke("rounded-xl border bg-card text-card-foreground shadow",t),...a}));Zt.displayName="Card";const Sr=i.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:ke("flex flex-col space-y-1.5 p-6",t),...a}));Sr.displayName="CardHeader";const $r=i.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:ke("font-semibold leading-none tracking-tight",t),...a}));$r.displayName="CardTitle";const Dr=i.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:ke("text-sm text-muted-foreground",t),...a}));Dr.displayName="CardDescription";const Cr=i.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:ke("p-6 pt-0",t),...a}));Cr.displayName="CardContent";const Ir=i.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:ke("flex items-center p-6 pt-0",t),...a}));Ir.displayName="CardFooter";function _r({isOpen:t,onClose:a,onChangePassword:s,loading:r}){const[o,p]=i.useState(""),[m,n]=i.useState(""),[c,C]=i.useState(""),[D,T]=i.useState(null),[V,_]=i.useState(!1),[k,$]=i.useState(!1),[I,K]=i.useState("default"),h={default:{background:"from-slate-50 via-blue-50 to-indigo-100",accent:"from-blue-500 to-purple-500",particles:["bg-blue-400/20","bg-purple-400/20","bg-indigo-400/20"]},sunrise:{background:"from-orange-50 via-pink-50 to-red-100",accent:"from-orange-500 to-pink-500",particles:["bg-orange-400/20","bg-pink-400/20","bg-red-400/20"]},afternoon:{background:"from-amber-50 via-yellow-50 to-orange-100",accent:"from-amber-500 to-orange-500",particles:["bg-amber-400/20","bg-yellow-400/20","bg-orange-400/20"]},evening:{background:"from-purple-50 via-indigo-50 to-blue-100",accent:"from-purple-500 to-indigo-500",particles:["bg-purple-400/20","bg-indigo-400/20","bg-blue-400/20"]},night:{background:"from-gray-800 via-gray-900 to-black",accent:"from-blue-400 to-purple-400",particles:["bg-blue-300/30","bg-purple-300/30","bg-indigo-300/30"]}};i.useEffect(()=>{const F=()=>{const g=new Date().getHours();g>=5&&g<8?K("sunrise"):g>=8&&g<12?K("default"):g>=12&&g<17?K("afternoon"):g>=17&&g<20?K("evening"):K("night")};F();const v=setInterval(F,6e4);return()=>clearInterval(v)},[]);const G=async F=>{if(F.preventDefault(),!o.trim()){T("Molimo unesite staru lozinku");return}if(!m.trim()){T("Molimo unesite novu lozinku");return}if(m.length<4){T("Nova lozinka mora imati najmanje 4 karaktera");return}if(m!==c){T("Nove lozinke se ne poklapaju");return}try{T(null),$(!0),await s(o,m),_(!0),setTimeout(()=>{z()},2e3)}catch(v){T(v.message||"Gre≈°ka pri promjeni lozinke")}finally{$(!1)}},z=()=>{p(""),n(""),C(""),T(null),_(!1),a()};if(!t)return null;const U=I==="night";return e.jsx(it,{children:t&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:z,children:e.jsxs(u.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:`${U?"bg-gray-800":"bg-white"} rounded-2xl shadow-2xl max-w-md w-full overflow-hidden`,onClick:F=>F.stopPropagation(),children:[e.jsxs("div",{className:`bg-gradient-to-r ${h[I].accent} p-6 text-white relative`,children:[e.jsx("button",{onClick:z,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(ha,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(Pt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Promjena lozinke"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Unesite staru i novu lozinku"})]})]})]}),e.jsx("div",{className:"p-6",children:V?e.jsxs(u.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(fa,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:`text-xl font-bold ${U?"text-white":"text-gray-800"} mb-2`,children:"Lozinka promijenjena!"}),e.jsx("p",{className:`${U?"text-gray-400":"text-gray-600"}`,children:"Va≈°a lozinka je uspje≈°no a≈æurirana."})]}):e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${U?"text-gray-300":"text-gray-700"} mb-2`,children:"Stara lozinka"}),e.jsx("input",{type:"password",value:o,onChange:F=>p(F.target.value),placeholder:"Unesite staru lozinku",disabled:k,autoFocus:!0,className:`w-full px-4 py-3 border ${U?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${U?"text-gray-300":"text-gray-700"} mb-2`,children:"Nova lozinka"}),e.jsx("input",{type:"password",value:m,onChange:F=>n(F.target.value),placeholder:"Unesite novu lozinku",disabled:k,className:`w-full px-4 py-3 border ${U?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${U?"text-gray-300":"text-gray-700"} mb-2`,children:"Potvrdite novu lozinku"}),e.jsx("input",{type:"password",value:c,onChange:F=>C(F.target.value),placeholder:"Ponovite novu lozinku",disabled:k,className:`w-full px-4 py-3 border ${U?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),D&&e.jsxs(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-start gap-2 p-4 ${U?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200"} border rounded-xl`,children:[e.jsx(lt,{className:`w-5 h-5 ${U?"text-red-400":"text-red-600"} flex-shrink-0 mt-0.5`}),e.jsx("p",{className:`text-sm ${U?"text-red-300":"text-red-800"}`,children:D})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:z,disabled:k,className:`flex-1 px-4 py-3 border ${U?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-xl disabled:opacity-50 font-medium transition-all`,children:"Otka≈æi"}),e.jsx("button",{type:"submit",disabled:k||!o.trim()||!m.trim()||!c.trim(),className:`flex-1 px-4 py-3 bg-gradient-to-r ${h[I].accent} text-white rounded-xl hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-all shadow-lg`,children:k?"Mijenjam...":"Promijeni lozinku"})]})]})})]})})})}function Mr(){const[t,a]=i.useState(!1),[s,r]=i.useState(null),[o,p]=i.useState(new Date),[m,n]=i.useState([{id:1,message:"Novi podatci sinhronizovani",time:"5 min",read:!1},{id:2,message:"GitHub scraper zavr≈°en",time:"1h",read:!1},{id:3,message:"Payroll a≈æuriran",time:"2h",read:!0}]),[c,C]=i.useState(!1),[D,T]=i.useState("-"),[V,_]=i.useState("-"),[k,$]=i.useState([]),[I,K]=i.useState([]),[h,G]=i.useState(0),[z,U]=i.useState("night"),[F,v]=i.useState({}),g=Ae(),{currentUser:P,logout:Z,changePassword:ae}=Ot();P!=null&&P.name||P!=null&&P.ime;const R={default:{background:"from-slate-50 via-blue-50 to-indigo-100",accent:"from-blue-500 to-purple-500",particles:["bg-blue-400/20","bg-purple-400/20","bg-indigo-400/20"]},sunrise:{background:"from-orange-50 via-pink-50 to-red-100",accent:"from-orange-500 to-pink-500",particles:["bg-orange-400/20","bg-pink-400/20","bg-red-400/20"]},afternoon:{background:"from-amber-50 via-yellow-50 to-orange-100",accent:"from-amber-500 to-orange-500",particles:["bg-amber-400/20","bg-yellow-400/20","bg-orange-400/20"]},evening:{background:"from-purple-50 via-indigo-50 to-blue-100",accent:"from-purple-500 to-indigo-500",particles:["bg-purple-400/20","bg-indigo-400/20","bg-blue-400/20"]},night:{background:"from-slate-900 via-blue-900 to-indigo-900",accent:"from-blue-400 to-cyan-400",particles:["bg-blue-400/20","bg-cyan-400/20","bg-indigo-400/20"]}},O=()=>e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:I.map(l=>e.jsx(u.div,{className:`absolute rounded-full ${l.color}`,style:{left:`${l.x}%`,top:`${l.y}%`,width:`${l.size}px`,height:`${l.size}px`},animate:{y:[0,-100,0],x:[0,Math.sin(l.id*.5)*50,0],opacity:[.2,.8,.2],scale:[1,1.5,1]},transition:{duration:l.duration,delay:l.delay,repeat:1/0,ease:"easeInOut"}},l.id))}),B=(l,b)=>{L(l,b)},ee=l=>{W(l)},L=(l,b)=>{const j=l.currentTarget.getBoundingClientRect(),q=l.clientX-j.left,d=l.clientY-j.top,y=j.width/2,E=j.height/2,H=(d-E)/10,Y=(y-q)/10;v(X=>({...X,[b]:{transform:`perspective(1000px) rotateX(${H}deg) rotateY(${Y}deg) scale3d(1.02, 1.02, 1.02)`,transition:"transform 0.1s ease-out"}}))},W=l=>{v(b=>({...b,[l]:{transform:"perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)",transition:"transform 0.3s ease-out"}}))},w=async()=>{if(P){try{const{data:l,error:b}=await ie.from("payroll_amounts").select("neto").eq("driver_name",P.name.toLowerCase());if(b)throw b;const f=l.reduce((j,q)=>j+(q.neto||0),0);T(`${f.toFixed(2)} ‚Ç¨`)}catch{T("Gre≈°ka")}try{const{data:l,error:b}=await ie.from("payroll_amounts").select("neto, file_name, created_at").eq("driver_name",P.name.toLowerCase()).order("file_name",{ascending:!1}).limit(1);if(b)throw b;l&&l.length>0&&typeof l[0].neto=="number"?_(`${Number(l[0].neto).toFixed(2)} ‚Ç¨`):_("-")}catch{_("Gre≈°ka")}}};i.useEffect(()=>{P&&w()},[P]),m.filter(l=>!l.read).length;const te=async()=>{try{console.log("üêô Poku≈°avam da dohvatim podatke sa GitHub API...");const l="eldin007b/gls-scraper",b="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",[f,j]=l.split("/"),q=y=>{if(!y)return"Nepoznato";const E=new Date(y);if(isNaN(E.getTime()))return"Nepoznato";const H=E.getDate().toString().padStart(2,"0"),Y=(E.getMonth()+1).toString().padStart(2,"0"),X=E.getHours().toString().padStart(2,"0"),re=E.getMinutes().toString().padStart(2,"0");return`${H}.${Y} ${X}:${re}`};let d=await fetch(`https://api.github.com/repos/${f}/${j}/actions/runs?per_page=5`,{headers:{Accept:"application/vnd.github.v3+json",...b&&{Authorization:`token ${b}`}}});if(!d.ok&&d.status===401&&b&&(console.log("üîë Token nevaljan, poku≈°avam bez token-a..."),d=await fetch(`https://api.github.com/repos/${f}/${j}/actions/runs?per_page=5`,{headers:{Accept:"application/vnd.github.v3+json"}})),d.ok){const E=((await d.json()).workflow_runs||[]).filter(H=>{const Y=(H.name||"").toLowerCase();return Y.includes("gls scraper")||Y.includes("scraper")||Y.includes("gls")});if(E.length>0){const H=E[0];console.log("‚úÖ Na≈°ao GitHub workflow:",H);const Y=H.updated_at||H.run_started_at||H.created_at||new Date().toISOString(),X=q(Y),re={status:H.conclusion==="success"||H.conclusion==="completed"?"completed":H.conclusion||"unknown",mode:"Automatski (GitHub)",timestamp:Y,formattedTimestamp:X,name:H.name,repoUsed:`${f}/${j}`,raw:H};console.log("üîÑ GitHub API podaci formatovani:",re),r(re);try{localStorage.setItem("github_scraper_history",JSON.stringify([re]))}catch(ce){console.warn("‚ö†Ô∏è Neuspjelo pisanje u localStorage:",ce)}return!0}}else console.warn("‚ö†Ô∏è GitHub API vratio nenormalan odgovor:",d.status,d.statusText)}catch(l){console.error("üí• Gre≈°ka pri GitHub API pozivu:",l)}return!1};i.useEffect(()=>{const l=async()=>{try{if(console.log("üîç Poku≈°avam da uƒçitam podatke o sinhronizaciji..."),console.log("üóùÔ∏è Svi kljuƒçevi u localStorage:",Object.keys(localStorage)),await te()){console.log("ÔøΩ GitHub fetch successful, reloading saved history...");const d=localStorage.getItem("github_scraper_history");if(d){const y=JSON.parse(d);if(y.length>0){r(y[0]);return}}}const q=localStorage.getItem("github_scraper_history");if(console.log("üì¶ Raw podatci iz localStorage:",q),q){const d=JSON.parse(q);if(console.log("üìã Parsovana historija:",d),console.log("üìè Broj elemenata u historiji:",d.length),d.length>0){const y=d[0];console.log("‚è∞ Poslednja sinhronizacija:",y),r(y)}else console.log("‚ö†Ô∏è Historija je prazna"),r(null)}else{console.log("‚ùå Nema podataka u localStorage za github_scraper_history");const d=localStorage.getItem("autoSyncState");if(d)try{const y=JSON.parse(d);console.log("üîÑ Koristim autoSyncState kao fallback:",y);const E={status:"completed",mode:"Automatski",timestamp:y.lastSync?new Date(y.lastSync).toLocaleString("bs-BA"):"Nepoznato"};console.log("üîÑ Fallback podaci iz autoSync:",E),r(E)}catch(y){console.error("üí• Gre≈°ka u parsiranju autoSyncState:",y),await te()||r(null)}else console.log("‚ùå Nema ni autoSyncState podataka - poku≈°avam GitHub API"),await te()||r(null)}}catch(j){console.error("üí• Gre≈°ka prilikom uƒçitavanja podataka o sinhronizaciji:",j),r(null)}};(async()=>{await l()})();const f=setInterval(()=>{l().catch(j=>{console.error("üí• Gre≈°ka u interval sync:",j)})},3e4);return()=>clearInterval(f)},[]),i.useEffect(()=>{const l=setInterval(()=>{p(new Date)},3e4);return()=>clearInterval(l)},[]),i.useEffect(()=>{(()=>{const b=R[z],f=Array.from({length:40},(j,q)=>({id:q,x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+1,color:b.particles[Math.floor(Math.random()*b.particles.length)],duration:Math.random()*25+15,delay:Math.random()*8}));K(f)})()},[z]),i.useEffect(()=>{U("night")},[]),i.useEffect(()=>{const l=()=>{G(window.scrollY)};return window.addEventListener("scroll",l,{passive:!0}),()=>window.removeEventListener("scroll",l)},[]),i.useEffect(()=>{const l=b=>{c&&!b.target.closest(".notification-container")&&C(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[c]),i.useEffect(()=>{const l=b=>{var f,j,q;try{const d=b.detail;if(console.log("üîî Primljen githubSync:updated event:",d),d){const y={...d,timestamp:d.timestamp&&typeof d.timestamp=="string"&&d.timestamp.indexOf("T")!==-1?d.timestamp:((f=d.raw)==null?void 0:f.updated_at)||((j=d.raw)==null?void 0:j.run_started_at)||((q=d.raw)==null?void 0:q.created_at)||d.timestamp,formattedTimestamp:d.formattedTimestamp||(d.timestamp?(()=>{try{const E=new Date(d.timestamp);if(!isNaN(E.getTime())){const H=E.getDate().toString().padStart(2,"0"),Y=(E.getMonth()+1).toString().padStart(2,"0"),X=E.getHours().toString().padStart(2,"0"),re=E.getMinutes().toString().padStart(2,"0");return`${H}.${Y} ${X}:${re}`}}catch{}return d.timestamp})():d.timestamp)};r(y)}}catch(d){console.error("Gre≈°ka u event handleru:",d)}};return window.addEventListener("githubSync:updated",l),()=>window.removeEventListener("githubSync:updated",l)},[]);const x=[{title:"Statistika",desc:"Grafovi i izvje≈°taji",icon:e.jsx(ba,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/statistika",gradient:"from-purple-500 to-pink-500",hoverGradient:"from-purple-600 to-pink-600",bgColor:"bg-purple-50",iconColor:"text-purple-600"},{title:"Navigacija",desc:"Mapa i praƒáenje ruta",icon:e.jsx(ya,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/navigacija",gradient:"from-indigo-500 to-blue-500",hoverGradient:"from-indigo-600 to-blue-600",bgColor:"bg-indigo-50",iconColor:"text-indigo-600"},{title:"Dostava",desc:"Pregled po mjesecu",icon:e.jsx(Re,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/deliveries",gradient:"from-blue-500 to-cyan-500",hoverGradient:"from-blue-600 to-cyan-600",bgColor:"bg-blue-50",iconColor:"text-blue-600"},{title:"Vozaƒçi",desc:"Detaljna statistika po vozaƒçu",icon:e.jsx(We,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/drivers",gradient:"from-emerald-500 to-teal-500",hoverGradient:"from-emerald-600 to-teal-600",bgColor:"bg-emerald-50",iconColor:"text-emerald-600"},{title:"Extra vo≈ænje",desc:"Posebne ture (Sonderfahrt)",icon:e.jsx(va,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/extra-rides",gradient:"from-orange-500 to-red-500",hoverGradient:"from-orange-600 to-red-600",bgColor:"bg-orange-50",iconColor:"text-orange-600"},{title:"O aplikaciji",desc:"Informacije i pomoƒá",icon:e.jsx(wa,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/about",gradient:"from-gray-500 to-slate-500",hoverGradient:"from-gray-600 to-slate-600",bgColor:"bg-gray-50",iconColor:"text-gray-600"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`min-h-screen bg-gradient-to-br ${R[z].background} relative transition-all duration-1000`,children:[e.jsx(O,{}),e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx(u.div,{style:{transform:`translateY(${h*.2}px) translateX(${h*.1}px)`},className:`absolute top-20 left-10 w-96 h-96 bg-gradient-to-r ${R[z].accent} rounded-full mix-blend-multiply filter blur-3xl`,animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(u.div,{style:{transform:`translateY(${h*-.15}px) translateX(${h*-.05}px)`},className:"absolute top-40 right-10 w-80 h-80 bg-gradient-to-r from-yellow-400/40 to-pink-400/40 rounded-full mix-blend-multiply filter blur-2xl",animate:{scale:[1.1,1,1.1],opacity:[.4,.6,.4]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2}}),e.jsx(u.div,{style:{transform:`translateY(${h*.25}px) translateX(${h*-.08}px)`},className:"absolute -bottom-8 left-20 w-72 h-72 bg-gradient-to-r from-emerald-400/30 to-blue-400/30 rounded-full mix-blend-multiply filter blur-xl",animate:{scale:[1,1.2,1],opacity:[.25,.45,.25]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:4}})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-start py-8 px-4",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[e.jsx(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8 relative z-[1000]",style:{transform:`translateY(${h*.1}px)`},children:e.jsxs("div",{className:`${z==="night"?"bg-gray-800/20":"bg-white/20"} backdrop-blur-3xl border ${z==="night"?"border-white/10":"border-white/30"} rounded-3xl p-4 md:p-6 shadow-2xl relative`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${R[z].accent.replace("from-","from-").replace("to-","to-")}/10 rounded-3xl`}),e.jsx(u.div,{className:`absolute inset-0 rounded-3xl bg-gradient-to-r ${R[z].accent} p-[1px]`,animate:{opacity:[0,.3,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:`w-full h-full rounded-3xl ${z==="night"?"bg-gray-800/20":"bg-white/20"} backdrop-blur-3xl`})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col lg:hidden gap-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-white/20 backdrop-blur-sm rounded-xl border border-white/30",style:{transform:"scale(1.1)",filter:"drop-shadow(0 8px 32px rgba(0,0,0,0.3))"}}),e.jsx("h1",{className:"relative text-2xl sm:text-3xl md:text-4xl font-black tracking-wider leading-tight text-slate-800 px-4 py-2 md:px-6 md:py-3",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8), 0 0 4px rgba(255,255,255,0.6)",fontWeight:"900",letterSpacing:"0.05em"},children:"B&D Evidencija"})]})})}),e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-sm rounded-full border border-white/30",style:{filter:"drop-shadow(0 4px 16px rgba(0,0,0,0.2))"}}),e.jsxs("div",{className:"relative flex items-center gap-2 px-3 py-1.5",children:[e.jsx(Oe,{className:"w-3 h-3 text-slate-700"}),e.jsx("span",{className:"text-xs font-semibold text-slate-800",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8)"},children:(()=>{const l=o.getDate().toString().padStart(2,"0"),b=(o.getMonth()+1).toString().padStart(2,"0"),f=o.getFullYear(),j=o.getHours().toString().padStart(2,"0"),q=o.getMinutes().toString().padStart(2,"0");return`${l}.${b}.${f} ${j}:${q}`})()})]})]}),e.jsx(It,{user:{...P,ukupnaZarada:D,zadnjaPlata:V},onChangePassword:()=>a(!0),onLogout:Z,currentTheme:z,themes:R})]})]}),e.jsxs("div",{className:"hidden lg:flex lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-md rounded-2xl border border-white/40",style:{transform:"scale(1.1)",filter:"drop-shadow(0 12px 40px rgba(0,0,0,0.3))"}}),e.jsx("h1",{className:"relative text-3xl md:text-4xl font-black tracking-wide text-slate-800 px-6 py-3",style:{textShadow:"2px 2px 4px rgba(255,255,255,0.8), 0 0 6px rgba(255,255,255,0.6)",fontWeight:"900",letterSpacing:"0.05em"},children:"B&D Evidencija"})]})})}),e.jsx("div",{className:"flex justify-center flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-md rounded-full border border-white/30",style:{filter:"drop-shadow(0 6px 20px rgba(0,0,0,0.25))"}}),e.jsxs("div",{className:"relative flex items-center gap-2 px-4 py-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-slate-700"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8)"},children:(()=>{const l=o.getDate().toString().padStart(2,"0"),b=(o.getMonth()+1).toString().padStart(2,"0"),f=o.getFullYear(),j=o.getHours().toString().padStart(2,"0"),q=o.getMinutes().toString().padStart(2,"0");return`${l}.${b}.${f} ${j}:${q}`})()})]})]})}),e.jsx(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.6},className:"flex items-center gap-3 justify-end flex-shrink-0",children:e.jsx(It,{user:{...P,ukupnaZarada:D,zadnjaPlata:V},onChangePassword:()=>a(!0),onLogout:Z,currentTheme:z,themes:R})})]})]})]})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:x.map((l,b)=>e.jsx(u.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,delay:.6+b*.1,type:"spring",stiffness:100},whileHover:{y:-12,scale:1.05,rotateX:5,rotateY:5,transition:{duration:.3}},whileTap:{scale:.95},className:"group perspective-1000",style:{transformStyle:"preserve-3d",...F[`card-${b}`]},onMouseEnter:f=>B(f,`card-${b}`),onMouseLeave:()=>ee(`card-${b}`),onMouseMove:f=>L(f,`card-${b}`),children:e.jsxs(Zt,{className:`cursor-pointer relative overflow-hidden ${z==="night"?"bg-gray-800/30 shadow-inner shadow-gray-900/20":"bg-white/40 shadow-inner shadow-gray-300/20"} backdrop-blur-2xl border-0 transition-all duration-500 rounded-3xl p-4 md:p-8 min-h-[180px] md:h-auto flex flex-col justify-between group-hover:shadow-2xl group-hover:backdrop-blur-3xl`,style:{boxShadow:z==="night"?"12px 12px 24px rgba(0,0,0,0.5), -12px -12px 24px rgba(255,255,255,0.02), inset 2px 2px 6px rgba(255,255,255,0.1)":"12px 12px 24px rgba(0,0,0,0.1), -12px -12px 24px rgba(255,255,255,0.8), inset 2px 2px 6px rgba(255,255,255,0.5)",transformStyle:"preserve-3d"},onClick:()=>g(l.path),children:[e.jsx(u.div,{className:`absolute inset-0 bg-gradient-to-br ${l.gradient} rounded-3xl`,initial:{opacity:0},whileHover:{opacity:.15,scale:1.1},transition:{duration:.4}}),e.jsxs(u.div,{className:"absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-500",initial:{opacity:0},whileHover:{opacity:.3},children:[e.jsx("div",{className:"absolute top-2 left-2 w-1 h-1 bg-white rounded-full animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"absolute top-4 right-3 w-0.5 h-0.5 bg-white rounded-full animate-pulse",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"absolute bottom-3 left-4 w-1.5 h-1.5 bg-white rounded-full animate-pulse",style:{animationDelay:"400ms"}}),e.jsx("div",{className:"absolute bottom-2 right-2 w-0.5 h-0.5 bg-white rounded-full animate-pulse",style:{animationDelay:"600ms"}})]}),e.jsxs(u.div,{className:`w-12 h-12 md:w-16 md:h-16 ${l.bgColor} rounded-2xl flex items-center justify-center mb-2 md:mb-6 relative z-10`,style:{boxShadow:z==="night"?"6px 6px 12px rgba(0,0,0,0.6), -6px -6px 12px rgba(255,255,255,0.05), inset 2px 2px 4px rgba(255,255,255,0.1)":"6px 6px 12px rgba(0,0,0,0.15), -6px -6px 12px rgba(255,255,255,0.9), inset 2px 2px 4px rgba(255,255,255,0.7)"},whileHover:{scale:1.15,rotateY:15,rotateX:15,transition:{duration:.3}},initial:{rotateY:0,rotateX:0},children:[e.jsx(u.div,{className:l.iconColor,whileHover:{rotate:[0,5,-5,0],scale:1.1},transition:{rotate:{duration:.5,ease:"easeInOut"},scale:{duration:.2}},children:l.icon}),e.jsx(u.div,{className:"absolute inset-0 rounded-2xl bg-gradient-to-tr from-white/20 to-transparent opacity-0",whileHover:{opacity:1,backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:.6}})]}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[e.jsx(u.h3,{className:`text-sm md:text-xl font-bold mb-1 md:mb-2 ${z==="night"?"text-gray-200 group-hover:text-white":"text-gray-800 group-hover:text-gray-900"} transition-colors leading-tight`,whileHover:{scale:1.05,x:2},transition:{duration:.2},children:l.title}),e.jsx(u.p,{className:`text-xs md:text-base ${z==="night"?"text-gray-400 group-hover:text-gray-300":"text-gray-600 group-hover:text-gray-700"} transition-colors leading-relaxed mt-2`,initial:{opacity:.8},whileHover:{opacity:1,y:-1},transition:{duration:.2},children:l.desc})]}),e.jsx(u.div,{className:"absolute top-4 md:top-6 right-4 md:right-6 z-20",initial:{opacity:0,x:-10,rotate:-45},whileHover:{opacity:1,x:0,rotate:0,scale:1.2,transition:{duration:.3}},children:e.jsx(u.div,{animate:{y:[0,-2,0],rotate:[0,5,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(Je,{className:`w-4 h-4 md:w-5 md:h-5 ${z==="night"?"text-gray-300":"text-gray-500"}`})})}),e.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${l.gradient} transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left`})]})},b))}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.2},className:"mt-16 text-center relative z-10",children:e.jsxs(u.div,{className:`${z==="night"?"bg-gray-800/30":"bg-white/30"} backdrop-blur-xl rounded-2xl p-6 border ${z==="night"?"border-white/10":"border-gray-200/30"} relative overflow-hidden`,style:{boxShadow:z==="night"?"8px 8px 16px rgba(0,0,0,0.4), -8px -8px 16px rgba(255,255,255,0.02)":"8px 8px 16px rgba(0,0,0,0.08), -8px -8px 16px rgba(255,255,255,0.8)"},whileHover:{scale:1.02,transition:{duration:.3}},children:[e.jsx(u.div,{className:`absolute inset-0 bg-gradient-to-r ${R[z].accent} opacity-5`,animate:{backgroundPosition:["0% 0%","100% 100%","0% 0%"]},transition:{duration:8,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}}),e.jsxs(u.p,{className:`text-sm ${z==="night"?"text-gray-300":"text-gray-600"} relative z-10`,initial:{opacity:.8},whileHover:{opacity:1},children:["¬© ",new Date().getFullYear()," B&D Evidencija. Sva prava zadr≈æana.",e.jsx(u.span,{className:"inline-block ml-2",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"‚ú®"})]})]})})]})})]}),e.jsx(_r,{isOpen:t,onClose:()=>a(!1),onChangePassword:ae,loading:!1})]})}const Wr=Object.freeze(Object.defineProperty({__proto__:null,default:Mr},Symbol.toStringTag,{value:"Module"})),zr=new Date().getFullYear(),Pr=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function Er(){const t=Ae(),[a,s]=i.useState(zr),[r,o]=i.useState(new Date().getMonth()),[p,m]=i.useState(new Date),[n,c]=i.useState("night"),C={default:{background:"from-blue-50 via-white to-purple-50"},sunrise:{background:"from-orange-100 via-pink-100 to-yellow-100"},afternoon:{background:"from-blue-100 via-cyan-100 to-sky-100"},evening:{background:"from-purple-100 via-pink-100 to-indigo-100"},night:{background:"from-slate-900 via-blue-900 to-indigo-900"}};i.useEffect(()=>{c("night")},[]),i.useEffect(()=>{const v=setInterval(()=>m(new Date),6e4);return()=>clearInterval(v)},[]);const{data:D=[],isLoading:T}=Ht(),{data:V=[],isLoading:_}=Pa(a,r),{data:k=[]}=Ft(a),$=_||T,I=i.useMemo(()=>{const v={};return V.forEach(g=>{v[g.date]||(v[g.date]={}),v[g.date][g.driver]=g.produktivitaet_stops||0}),Object.keys(v).forEach(g=>{if((g==="2025-11-17"||g==="2025-11-25")&&v[g][8640]){const P=v[g][8640];v[g][8610]?v[g][8610]+=P:v[g][8610]=P,delete v[g][8640]}}),v},[V]),K=i.useMemo(()=>({"2025-11-07-8620":!0,"2025-11-10-8620":!0,"2025-11-17-8640":!0,"2025-11-25-8640":!0}),[]),h=At(a,r,k.map(v=>v.date)),G=i.useMemo(()=>{const v=h.length,g=new Set;V.forEach(f=>{f.produktivitaet_stops>0&&g.add(f.date)});const P=g.size,Z=new Date,ae=Z.getFullYear(),R=Z.getMonth();let O=0;if(a===ae&&r===R){const f=Z.getDate();O=h.filter(j=>new Date(j).getDate()<=f).length}else a<ae||a===ae&&r<R?O=v:O=0;const B=V.reduce((f,j)=>f+(j.produktivitaet_stops||0),0),ee=D.filter(f=>f.aktivan).reduce((f,j)=>f+(j.target_per_day||0)*v,0),L=D.filter(f=>f.aktivan).reduce((f,j)=>f+(j.target_per_day||0)*P,0),W=B-ee,w=h.filter(f=>{const j=be(f,"yyyy-MM-dd"),q=I[j]||{};return D.filter(y=>y.aktivan).reduce((y,E)=>y+(q[E.tura]||0),0)>0}),te=w.reduce((f,j)=>{const q=be(j,"yyyy-MM-dd"),d=I[q]||{};return f+D.filter(y=>y.aktivan).reduce((y,E)=>y+(d[E.tura]||0),0)},0),x=D.filter(f=>f.aktivan).reduce((f,j)=>f+(j.target_per_day||0)*w.length,0),l=D.filter(f=>f.aktivan).reduce((f,j)=>f+(j.target_per_day||0)*v,0),b=te-l;return{totalWorkdays:v,passedWorkdays:O,drivers:D.filter(f=>f.aktivan).length,remainingDays:Math.max(0,v-P),totalStops:B,monthlyTarget:ee,targetForWorkedDays:L,difference:W,totalAllWorked:te,targetForWorkedDaysBD:x,bilansBD:b}},[h,V,D,a,r,I]),z=()=>`bg-gradient-to-br ${C[n].background}`,U=()=>{r===0?(o(11),s(a-1)):o(r-1)},F=()=>{r===11?(o(0),s(a+1)):o(r+1)};return e.jsxs("div",{className:`min-h-screen ${z()} ${n==="night"?"text-white":"text-gray-800"}`,children:[e.jsx(u.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/50"} backdrop-blur-xl border-b sticky top-0 z-50`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:`p-2 rounded-xl ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(ct,{className:"w-6 h-6"})}),e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:"Pregled Dostava"})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`mb-6 p-4 md:p-6 rounded-2xl ${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:U,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Ye,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-center",children:e.jsxs("h2",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:[Pr[r]," ",a]})}),e.jsx(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:F,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Be,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Oe,{className:`w-5 h-5 ${n==="night"?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Radnih dana"})]}),e.jsxs("p",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:[G.passedWorkdays,"/",G.totalWorkdays]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(We,{className:`w-5 h-5 ${n==="night"?"text-green-400":"text-green-600"}`}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Vozaƒça"})]}),e.jsx("p",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:G.drivers})]}),e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ke,{className:`w-5 h-5 ${n==="night"?"text-purple-400":"text-purple-600"}`}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Ukupno"})]}),e.jsx("p",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:G.totalAllWorked})]}),e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[G.bilansBD>=0?e.jsx(Je,{className:"w-5 h-5",style:{color:n==="night"?"#4ade80":"#15803d"}}):e.jsx(Et,{className:"w-5 h-5",style:{color:n==="night"?"#fb7185":"#dc2626"}}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Bilans"})]}),e.jsxs("p",{className:"text-2xl font-black",style:{color:G.bilansBD>=0?n==="night"?"#4ade80":"#15803d":n==="night"?"#fb7185":"#dc2626",textShadow:n==="night"?"0 0 3px rgba(0,0,0,0.3)":"none"},children:[G.bilansBD>0?"+":"",G.bilansBD]})]})]})]}),$?e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:`p-8 rounded-2xl ${n==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-xl text-center`,children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:n==="night"?"text-gray-400":"text-gray-600",children:"Uƒçitavanje..."})]}):h.length===0?e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:`p-8 rounded-2xl ${n==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-xl text-center`,children:[e.jsx(lt,{className:`w-16 h-16 mx-auto mb-4 ${n==="night"?"text-gray-600":"text-gray-400"}`}),e.jsx("p",{className:n==="night"?"text-gray-400":"text-gray-600",children:"Nema radnih dana"})]}):e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`rounded-2xl ${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/70 border-gray-200/30"} border backdrop-blur-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",style:{fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${n==="night"?"bg-gray-700/50":"bg-gray-100/80"}`,children:[e.jsx("th",{className:"px-1 py-2 text-left text-xs font-bold w-16",style:{color:n==="night"?"#fff":"#1f2937"},children:"Datum"}),D.filter(v=>v.aktivan).map(v=>e.jsxs("th",{className:"px-1 py-2 text-center text-xs font-bold",style:{color:n==="night"?"#fff":"#1f2937"},children:[e.jsx("div",{className:"font-semibold",children:v.ime}),e.jsx("div",{className:"text-[10px] opacity-70",children:v.tura})]},v.tura)),e.jsxs("th",{className:"px-1 py-2 text-center text-xs font-bold w-16",style:{color:n==="night"?"#fff":"#1f2937"},children:[e.jsx("div",{className:"font-semibold",children:"Ukupno"}),e.jsx("div",{className:"text-[10px] opacity-70",children:"B&D"})]})]})}),e.jsx("tbody",{children:Object.keys(I).sort((v,g)=>new Date(v)-new Date(g)).map((v,g)=>{const P=I[v]||{},Z=D.filter(R=>R.aktivan).reduce((R,O)=>R+(P[O.tura]||0),0),ae=k.some(R=>R.date===v);return e.jsxs(u.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.02},className:`border-t ${n==="night"?"border-gray-700/50":"border-gray-200/50"} ${ae?n==="night"?"bg-red-900/20":"bg-red-50/70":""}`,children:[e.jsx("td",{className:"px-1 py-1.5 text-xs font-bold",style:{color:n==="night"?"#e5e7eb":"#374151"},children:be(new Date(v),"dd.MM.")}),D.filter(R=>R.aktivan).map(R=>{const O=P[R.tura],B=R.target_per_day||0,ee=O>=B,L=K[`${v}-${R.tura}`],W=n==="night"?"#4ade80":"#15803d",w=n==="night"?"#fb7185":"#dc2626";return e.jsx("td",{className:"px-1 py-1.5 text-center text-xs font-extrabold",style:{color:L?n==="night"?"#f59e0b":"#d97706":O?ee?W:w:"#9ca3af",fontWeight:"900",textShadow:(O||L)&&n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:L?"Urlaub":O||"‚Äì"},R.tura)}),e.jsx("td",{className:"px-1 py-1.5 text-center text-xs font-extrabold",style:{color:Z>=300?n==="night"?"#4ade80":"#15803d":Z>0?n==="night"?"#fb7185":"#dc2626":"#9ca3af",fontWeight:"900",textShadow:Z>0&&n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:Z||"‚Äì"})]},v)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:`border-t-2 ${n==="night"?"border-gray-600 bg-gray-700/70":"border-gray-400 bg-gray-200/80"}`,children:[e.jsx("td",{className:"px-1 py-2 text-xs font-extrabold",style:{color:n==="night"?"#fff":"#1f2937"},children:"Ukupno"}),D.filter(v=>v.aktivan).map(v=>{const g=h.filter(w=>{const te=be(w,"yyyy-MM-dd");return(I[te]||{})[v.tura]>0}),P=g.reduce((w,te)=>{const x=be(te,"yyyy-MM-dd"),l=I[x]||{};return w+(l[v.tura]||0)},0),Z=g.length,ae=(v.target_per_day||0)*Z,R=(v.target_per_day||0)*h.length,O=P-R,B=n==="night"?"#4ade80":"#15803d",ee=n==="night"?"#fb7185":"#dc2626",L=P>=ae?B:ee,W=O>=0?B:ee;return e.jsxs("td",{className:"px-1 py-2 text-center",children:[e.jsx("div",{className:"text-xs font-extrabold",style:{color:L,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:P}),e.jsxs("div",{className:"text-[10px] font-black",style:{color:W,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:["(",O>0?"+":"",O,")"]})]},v.tura)}),e.jsx("td",{className:"px-1 py-2 text-center",children:(()=>{const v=h.filter(L=>{const W=be(L,"yyyy-MM-dd"),w=I[W]||{};return D.filter(x=>x.aktivan).reduce((x,l)=>x+(w[l.tura]||0),0)>0}),g=v.reduce((L,W)=>{const w=be(W,"yyyy-MM-dd"),te=I[w]||{};return L+D.filter(x=>x.aktivan).reduce((x,l)=>x+(te[l.tura]||0),0)},0),P=D.filter(L=>L.aktivan).reduce((L,W)=>L+(W.target_per_day||0)*v.length,0),Z=D.filter(L=>L.aktivan).reduce((L,W)=>L+(W.target_per_day||0)*h.length,0),ae=g-Z,R=n==="night"?"#4ade80":"#15803d",O=n==="night"?"#fb7185":"#dc2626",B=g>=P?R:O,ee=ae>=0?R:O;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs font-extrabold",style:{color:B,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:g}),e.jsxs("div",{className:"text-[10px] font-black",style:{color:ee,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:["(",ae>0?"+":"",ae,")"]})]})})()})]})})]})})})]})]})}const Yr=Object.freeze(Object.defineProperty({__proto__:null,default:Er},Symbol.toStringTag,{value:"Module"})),Tr=new Date().getFullYear(),_t=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],at={"2025-11-07-8620":!0,"2025-11-10-8620":!0,"2025-11-17-8640":!0,"2025-11-25-8640":!0};function Rr(){var te;const t=Ae(),[a,s]=i.useState(Tr),[r,o]=i.useState(new Date().getMonth()),[p,m]=i.useState(0),[n,c]=i.useState("night"),[C,D]=i.useState(new Date),T={default:{background:"from-blue-50 via-white to-purple-50"},sunrise:{background:"from-orange-100 via-pink-100 to-yellow-100"},afternoon:{background:"from-blue-100 via-cyan-100 to-sky-100"},evening:{background:"from-purple-100 via-pink-100 to-indigo-100"},night:{background:"from-slate-900 via-blue-900 to-indigo-900"}},V=()=>`bg-gradient-to-br ${(T[n]||T.night).background}`;i.useEffect(()=>{c("night")},[]),i.useEffect(()=>{const x=setInterval(()=>D(new Date),6e4);return()=>clearInterval(x)},[]);const[_,k]=i.useState(!0);i.useEffect(()=>{const x=setInterval(()=>{k(l=>!l)},400);return()=>clearInterval(x)},[]);const{driverName:$}=Ia(),{data:I=[],isLoading:K}=Ht(),{data:h=[]}=Ft(a),G=()=>{r===0?(o(11),s(a-1)):o(r-1)},z=()=>{r===11?(o(0),s(a+1)):o(r+1)},U=()=>{m(x=>x===0?I.length-1:x-1)},F=()=>{m(x=>x===I.length-1?0:x+1)};i.useEffect(()=>{if(I.length>0){const x=$?I.findIndex(l=>l.ime===$):I.findIndex(l=>l.aktivan);x>=0&&m(x)}},[I,$]);const v=((te=I[p])==null?void 0:te.ime)||"",g=I[p],{data:P=[],isLoading:Z}=Ea(g==null?void 0:g.tura,a,r,{enabled:!!g}),ae=Z||K,R=At(a,r,h.map(x=>x.date)),O=i.useMemo(()=>{if(!P.length)return[];const x=d=>{if(!d)return 0;const y=d.toString().replace("%","").replace(",",".").trim();return parseFloat(y)||0},l=[...P],b={};l.forEach(d=>{const y=`${d.date}-${d.tura}`;b[y]||(b[y]=0),b[y]+=d.produktivitaet_stops||0}),Object.keys(at).forEach(d=>{if(!at[d])return;const[y,E]=d.split("-"),H=`${y}-${E}`,Y=b[H]||0;if(Y<=0)return;const X=`${y}-8610`;b[X]||(b[X]=0),b[X]+=Y});const f=l.map(d=>{const y=`${d.date}-${d.tura}`,E=at[y],H=E?d.produktivitaet_stops:b[y]??d.produktivitaet_stops;return{...d,produktivitaet_stops:H,isUrlaub:E||!1}}),j={};return f.forEach(d=>{const y=new Date(d.date),E=y.getMonth();if(y.getFullYear()!==a||E!==r)return;const Y=d.date,X=d.tura,re=`${Y}-${X}`;j[re]||(j[re]={date:Y,tura:X,stops:0,packages:0,pickupPackages:0,complaints:0,totalTime:0,realPercentage:x(d.zustellung_proc),undelivered:parseInt(d.zustellung_nedostavljeno)||0,pickupPercentage:x(d.pickup_proc),pickupUndelivered:parseInt(d.pickup_nedostavljeno)||0,firstComplaints:parseInt(d.probleme_prva)||0,secondComplaints:parseInt(d.probleme_druga)||0,stopsPerHourRaw:d.produktivitaet_stops_pro_std||"0",isUrlaub:d.isUrlaub||!1,driverName:X==="8610"?"Eldin":X==="8620"?"Denis":X==="8640"?"Arnes":`Vozaƒç ${X}`}),j[Y].stops+=d.produktivitaet_stops||0,j[Y].packages+=d.zustellung_paketi||0,j[Y].pickupPackages+=parseInt(d.pickup_paketi)||0,j[Y].complaints+=parseInt(d.probleme_druga)||0;const ue=(d.produktivitaet_dauer||"0:00").split(":"),Me=(parseInt(ue[0])||0)*60+(parseInt(ue[1])||0);j[Y].totalTime+=Me}),Object.values(j).map(d=>{const y=d.realPercentage>0?d.realPercentage:d.stops>0?d.packages/d.stops*100:0;return{...d,percentage:y,stopsPerHour:d.totalTime>0?d.stops/(d.totalTime/60):0}}).sort((d,y)=>{const E=new Date(d.date).getTime()-new Date(y.date).getTime();if(E!==0)return E;const H={8610:1,8620:2,8640:3};return(H[d.tura]||99)-(H[y.tura]||99)})},[P,a,r]),B=i.useMemo(()=>{const x=R.length,l=O.filter(ce=>ce.stops>0).length,b=O.reduce((ce,ue)=>ce+ue.stops,0),f=O.reduce((ce,ue)=>ce+ue.packages,0),j=l>0?b/l:0,q=l>0?f/l:0,d=new Date,y=d.getFullYear(),E=d.getMonth();let H=0;if(a===y&&r===E){const ce=d.getDate();H=R.filter(ue=>new Date(ue).getDate()<=ce).length}else a<y||a===y&&r<E?H=x:H=0;const X=((g==null?void 0:g.target_per_day)||0)*x,re=b-X;return{totalWorkdays:x,passedWorkdays:H,daysWithData:l,avgPackagesPerDay:Math.round(q),avgStopsPerDay:Math.round(j),totalStops:b,totalPackages:f,difference:re}},[R,O,g,a,r]),ee=x=>x.toLocaleTimeString("bs-BA",{hour:"2-digit",minute:"2-digit",hour12:!1}),L=x=>x.toLocaleDateString("bs-BA",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),W=n==="night"?"#4ade80":"#15803d",w=n==="night"?"#fb7185":"#dc2626";return e.jsxs("div",{className:`min-h-screen ${V()} ${n==="night"?"text-white":"text-gray-800"}`,children:[e.jsx(_a,{}),e.jsx(u.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/50"} backdrop-blur-xl border-b sticky top-0 z-50`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:`p-2 rounded-xl ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(ct,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:`w-8 h-8 ${n==="night"?"text-blue-400":"text-blue-600"}`}),e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:"Vozaƒçi Statistike"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`mb-6 p-4 md:p-6 rounded-2xl ${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:G,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Ye,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:[_t[r]," ",a]}),e.jsxs("p",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"} mt-1`,children:[ee(C)," ‚Ä¢ ",L(C)]})]}),e.jsx(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:z,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Be,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6 mb-6",children:[e.jsx(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:U,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Ye,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:`text-xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:v||"Nema vozaƒça"}),e.jsx("p",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"} mt-1`,children:I.length>0?`${p+1} / ${I.length}`:"0 / 0"})]}),e.jsx(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:F,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Be,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Oe,{className:`w-6 h-6 ${n==="night"?"text-blue-400":"text-blue-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:[B.passedWorkdays,"/",B.totalWorkdays]}),e.jsx("div",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Radni dani"})]})]}),e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(We,{className:`w-6 h-6 ${n==="night"?"text-green-400":"text-green-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:v||"‚Äî"}),e.jsx("div",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Vozaƒç"})]})]}),e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Tt,{className:`w-6 h-6 ${n==="night"?"text-purple-400":"text-purple-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:B.totalStops}),e.jsx("div",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Ukupno stopova"})]})]}),e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Je,{className:`w-6 h-6 ${B.difference>=0?n==="night"?"text-green-400":"text-green-600":n==="night"?"text-red-400":"text-red-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",style:{color:B.difference>=0?W:w},children:[B.difference>0?"+":"",B.difference]}),e.jsx("div",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Bilans"})]})]})]})]}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:`rounded-2xl overflow-hidden ${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:ae?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:`w-8 h-8 border-2 rounded-full animate-spin ${n==="night"?"border-gray-600 border-t-white":"border-gray-300 border-t-blue-600"}`}),e.jsx("p",{className:`text-sm mt-4 ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Uƒçitavanje..."})]}):O.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ke,{className:`w-12 h-12 mb-4 ${n==="night"?"text-gray-600":"text-gray-400"}`}),e.jsxs("p",{className:`text-lg font-medium mb-2 ${n==="night"?"text-white":"text-gray-900"}`,children:["Nema podataka za ",_t[r]," ",a]}),e.jsx("p",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Odaberite vozaƒça iz liste da vidite statistiku"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-full",children:[e.jsx("thead",{className:`${n==="night"?"bg-gray-700/50 text-gray-300":"bg-gray-50 text-gray-700"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Datum"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stopovi"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Paketi"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Pickup"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Reklamacije"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Vreme (h)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Efikasnost"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stop/h"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[O.map((x,l)=>{const b=new Date(x.date),f=(g==null?void 0:g.target_per_day)||0,j=x.stops>=f;return e.jsxs(u.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+l*.05},className:`transition-colors ${x.isUrlaub?"bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/70":n==="night"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap font-medium",children:be(b,"dd.MM.")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:j?W:w,fontWeight:"700"},children:x.stops||"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:x.packages||"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:x.pickupPackages||"‚Äì"}),e.jsxs("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:x.secondComplaints>0?{backgroundColor:_?"#ffffff":"#f44336",color:_?"#f44336":"#ffffff",fontWeight:"900",textAlign:"center",transition:"all 0.3s",outline:_?"2px solid #f44336":"none",outlineOffset:"-2px",borderRadius:"4px"}:{},children:[x.secondComplaints>0&&e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(rt,{className:"w-4 h-4"}),x.secondComplaints]}),x.secondComplaints===0&&"‚Äì"]}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:x.totalTime?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(zt,{className:"w-4 h-4"}),`${(x.totalTime/60).toFixed(1)}h`]}):"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:x.percentage>=98?W:w,fontWeight:"600"},children:x.percentage?`${x.percentage.toFixed(1)}%`:"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:x.stopsPerHour?x.stopsPerHour.toFixed(1):"‚Äì"})]},l)}),e.jsxs(u.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},className:`${n==="night"?"bg-gray-700/70 font-bold":"bg-gray-50 font-bold"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:"Ukupno"})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:B.difference>=0?W:w,fontWeight:"900"},children:e.jsxs("strong",{children:[B.totalStops," (",B.difference>0?"+":"",B.difference,")"]})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:B.totalPackages})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:O.reduce((x,l)=>x+(l.pickupPackages||0),0)})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:O.reduce((l,b)=>l+(b.secondComplaints||0),0)>0?{backgroundColor:_?"#ffffff":"#f44336",color:_?"#f44336":"#ffffff",fontWeight:"900",transition:"all 0.3s",borderRadius:"4px",outline:_?"2px solid #f44336":"none",textAlign:"center"}:{color:W,fontWeight:"700"},children:e.jsx("strong",{children:(()=>{const x=O.reduce((l,b)=>l+(b.secondComplaints||0),0);return x>0?e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(rt,{className:"w-4 h-4"}),x]}):x})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const x=O.reduce((l,b)=>l+(b.totalTime||0),0);return x?`${(x/60).toFixed(1)}h`:"‚Äì"})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const x=O.filter(b=>b.percentage&&b.percentage>0),l=x.length>0?x.reduce((b,f)=>b+f.percentage,0)/x.length:0;return l>0?`${l.toFixed(1)}%`:"‚Äì"})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const x=O.filter(b=>b.stopsPerHour&&b.stopsPerHour>0),l=x.length>0?(x.reduce((b,f)=>b+f.stopsPerHour,0)/x.length).toFixed(1):"‚Äì";return l!=="NaN"?l:"‚Äì"})()})})]})]})]})})})]})]})}const Br=Object.freeze(Object.defineProperty({__proto__:null,default:Rr},Symbol.toStringTag,{value:"Module"})),Mt=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],Ve=t=>{if(!t)return"";const a=new Date(t),s=a.getDate().toString().padStart(2,"0"),r=(a.getMonth()+1).toString().padStart(2,"0"),o=a.getFullYear();return`${s}.${r}.${o}`},Or=()=>{var Z,ae,R,O,B,ee,L,W,w,te,x,l,b,f,j,q,d,y,E,H,Y,X,re,ce,ue,Me,gt,mt,pt,xt,ht,ft;const t=Ae(),{currentUser:a}=Ot(),[s,r]=i.useState("night"),[o,p]=i.useState(null),[m,n]=i.useState([]),[c,C]=i.useState([]),[D,T]=i.useState(!0),[V,_]=i.useState(!1),[k,$]=i.useState(null),I=i.useMemo(()=>Mt[new Date().getMonth()],[]),K=i.useMemo(()=>new Date().getFullYear(),[]);i.useEffect(()=>{r("night")},[]);const h=s==="night",G=i.useCallback(M=>M==="8610"?50:M==="8620"||M==="8630"?85:M==="8640"?80:50,[]);i.useEffect(()=>{(async()=>{try{const{data:Q,error:oe}=await ie.from("drivers").select("*").eq("aktivan",!0).order("ime",{ascending:!0});if(oe)throw oe;if(n(Q||[]),console.log("üöó StatistikaScreen - Loaded drivers:",(Q==null?void 0:Q.length)||0),console.log("üë§ Current user:",a),a&&(a.name||a.ime)&&Q&&Q.length>0){const we=a.name||a.ime;console.log("üîç Looking for driver with name:",we);const de=Q.find(ne=>ne.ime===we);if(de)console.log("‚úÖ Found driver by name:",de.ime),p(de);else{console.log("üîç Driver not found by name, trying by tura:",a.username||a.tura);const ne=Q.find(Qe=>Qe.tura===(a.username||a.tura));ne?(console.log("‚úÖ Found driver by tura:",ne.ime),p(ne)):(console.log("‚ùå Driver not found, selecting first driver"),p(Q[0]))}}else Q&&Q.length>0&&(console.log("‚ùå No current user, selecting first driver"),p(Q[0]))}catch(Q){console.error("Gre≈°ka pri uƒçitavanju vozaƒça:",Q),$(Q.message)}finally{T(!1)}})()},[a]);const z=i.useCallback(async M=>{var Q;if(!(!M||!M.tura)){_(!0);try{const oe=new Date,we=new Date().toISOString().slice(0,10),de=new Date(oe.getFullYear(),oe.getMonth(),1).toISOString().slice(0,10),ne=new Date(oe.getFullYear(),oe.getMonth()+1,0).toISOString().slice(0,10),Qe=new Date(oe.getFullYear(),0,1).toISOString().slice(0,10),ea=new Date(oe.getFullYear(),11,31).toISOString().slice(0,10),{data:ze}=await ie.from("deliveries").select("*").eq("driver",M.tura).eq("deleted",0).order("date",{ascending:!1}).limit(1),He=(Q=ze==null?void 0:ze[0])!=null&&Q.date&&typeof ze[0].date=="string"?ze[0].date.slice(0,10):we,[ta,aa,ra]=await Promise.all([ie.from("deliveries").select("*").eq("driver",M.tura).gte("date",`${He}T00:00:00`).lte("date",`${He}T23:59:59`).eq("deleted",0),ie.from("deliveries").select("*").eq("driver",M.tura).gte("date",de).lte("date",ne).eq("deleted",0),ie.from("deliveries").select("*").eq("driver",M.tura).gte("date",Qe).lte("date",ea).eq("deleted",0)]),Fe=G(M.tura),Ze=($e,De)=>{if(!$e||$e.length===0)return{packages:0,diff:De==="day"?-Fe:0,complaints:0,date:De==="day"?He:null};let ye=$e;if(De==="month"){const J=new Date,ge=J.getFullYear(),ia=J.getMonth();ye=$e.filter(he=>{if(!(he!=null&&he.date))return!1;const la=typeof he.date=="string"?he.date.slice(0,10):he.date,yt=new Date(la),Pe=he.zustellung_paketi,ca=Pe!=null&&Pe!==""&&!isNaN(Number(Pe))&&Number(Pe)>0;return yt.getFullYear()===ge&&yt.getMonth()===ia&&he.driver==M.tura&&he.deleted==0&&ca})}else De==="year"?ye=$e.filter(J=>parseInt((J==null?void 0:J.produktivitaet_stops)||0,10)>0):De==="day"&&(ye=$e.filter(J=>parseInt((J==null?void 0:J.produktivitaet_stops)||0,10)>0));const Le=ye.reduce((J,ge)=>J+(parseInt((ge==null?void 0:ge.produktivitaet_stops)||0,10)||0),0),bt=ye.reduce((J,ge)=>J+(parseInt((ge==null?void 0:ge.probleme_druga)||0,10)||0),0),oa=(new Set(ye.map(J=>J!=null&&J.date?typeof J.date=="string"?J.date.slice(0,10):new Date(J.date).toISOString().slice(0,10):null).filter(Boolean)).size||0)*Fe,na=ye.length>0?ye.map(J=>J!=null&&J.date?typeof J.date=="string"?J.date.slice(0,10):new Date(J.date).toISOString().slice(0,10):null).filter(Boolean).sort((J,ge)=>new Date(ge)-new Date(J))[0]:null;return De==="day"?{packages:Le,diff:Le-Fe,complaints:bt,date:He}:{packages:Le,diff:Le-oa,complaints:bt,date:na}},pe=Ze(ta.data,"day"),Ne=Ze(aa.data,"month"),Se=Ze(ra.data,"year"),sa=[{label:`Dostava (${pe.date||""})`,value:pe.diff,packages:pe.packages,complaints:pe.complaints,target:Fe,date:pe.date,dataDate:pe.date},{label:`Reklamacije (${pe.date||""})`,value:pe.complaints,date:pe.date,dataDate:pe.date},{label:`Dostava za ${I}`,value:Ne.diff,packages:Ne.packages,complaints:Ne.complaints,dataDate:Ne.date},{label:`Reklamacije za ${I}`,value:Ne.complaints,dataDate:Ne.date},{label:`Dostava za ${K}`,value:Se.diff,packages:Se.packages,complaints:Se.complaints,dataDate:Se.date},{label:`Reklamacije za ${K}`,value:Se.complaints,dataDate:Se.date}];C(sa)}catch(oe){console.error("Gre≈°ka pri uƒçitavanju statistika:",oe),$(oe.message),C([])}finally{_(!1)}}},[G,I,K]);i.useEffect(()=>{o&&z(o)},[o,z]);const U=[{title:(Z=c[0])!=null&&Z.date?Ve(c[0].date):"Danas",period:(ae=c[0])!=null&&ae.dataDate?`Podaci: ${Ve(c[0].dataDate)}`:((R=c[0])==null?void 0:R.label)||"Danas",delivery:{value:((O=c[0])==null?void 0:O.packages)||0,diff:((B=c[0])==null?void 0:B.value)||0,target:((ee=c[0])==null?void 0:ee.target)||0,trend:(((L=c[0])==null?void 0:L.value)||0)>0?"up":(((W=c[0])==null?void 0:W.value)||0)<0?"down":"neutral"},complaints:{value:((w=c[1])==null?void 0:w.value)||0,trend:(((te=c[1])==null?void 0:te.value)||0)===0?"good":"bad"},icon:Oe},{title:(x=c[2])!=null&&x.dataDate?Mt[new Date(c[2].dataDate).getMonth()]:"Ovaj mjesec",period:(l=c[2])!=null&&l.dataDate?`Podaci do: ${Ve(c[2].dataDate)}`:((b=c[2])==null?void 0:b.label)||"Ovaj mjesec",delivery:{value:((f=c[2])==null?void 0:f.packages)||0,diff:((j=c[2])==null?void 0:j.value)||0,target:(((q=c[2])==null?void 0:q.packages)||0)-(((d=c[2])==null?void 0:d.value)||0),trend:(((y=c[2])==null?void 0:y.value)||0)>0?"up":(((E=c[2])==null?void 0:E.value)||0)<0?"down":"neutral"},complaints:{value:((H=c[3])==null?void 0:H.value)||0,trend:(((Y=c[3])==null?void 0:Y.value)||0)===0?"good":"bad"},icon:ja},{title:(X=c[4])!=null&&X.dataDate?new Date(c[4].dataDate).getFullYear():"Ova godina",period:(re=c[4])!=null&&re.dataDate?`Podaci do: ${Ve(c[4].dataDate)}`:((ce=c[4])==null?void 0:ce.label)||"Ova godina",delivery:{value:((ue=c[4])==null?void 0:ue.packages)||0,diff:((Me=c[4])==null?void 0:Me.value)||0,target:(((gt=c[4])==null?void 0:gt.packages)||0)-(((mt=c[4])==null?void 0:mt.value)||0),trend:(((pt=c[4])==null?void 0:pt.value)||0)>0?"up":(((xt=c[4])==null?void 0:xt.value)||0)<0?"down":"neutral"},complaints:{value:((ht=c[5])==null?void 0:ht.value)||0,trend:(((ft=c[5])==null?void 0:ft.value)||0)===0?"good":"bad"},icon:ka}],F=M=>M==="up"?Je:M==="down"?Et:M==="good"?vt:M==="bad"?Sa:Ke,v=(M,Q=!1)=>{if(Q){if(M==="good")return h?"text-green-400":"text-green-600";if(M==="bad")return h?"text-red-400":"text-red-600"}else{if(M==="up")return h?"text-green-400":"text-green-600";if(M==="down")return h?"text-red-400":"text-red-600"}return h?"text-gray-400":"text-gray-600"},g=()=>{if(!o||m.length===0)return;const M=m.findIndex(oe=>oe.id===o.id),Q=M===0?m.length-1:M-1;p(m[Q])},P=()=>{if(!o||m.length===0)return;const M=m.findIndex(oe=>oe.id===o.id),Q=M===m.length-1?0:M+1;p(m[Q])};return e.jsx("div",{className:`min-h-screen p-4 sm:p-6 lg:p-8 ${h?"bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900":"bg-gradient-to-br from-blue-50 via-white to-indigo-50"}`,children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:`mb-6 sm:mb-8 p-4 sm:p-6 rounded-2xl ${h?"bg-gray-800/50":"bg-white/80"} backdrop-blur-xl border ${h?"border-gray-700":"border-white/20"} shadow-xl`,children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u.button,{onClick:()=>t("/"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-xl ${h?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(ct,{className:"w-6 h-6"})}),e.jsx(u.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"p-3 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600",children:e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl sm:text-3xl font-bold ${h?"text-white":"text-gray-800"}`,children:"Statistika"}),e.jsx("p",{className:`text-sm ${h?"text-gray-400":"text-gray-600"}`,children:"Pregled performansi vozaƒça"})]})]})}),o&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 pt-4 border-t ${h?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"w-full flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u.button,{onClick:g,whileHover:{scale:1.1,x:-3,backgroundColor:h?"#374151":"#e5e7eb"},whileTap:{scale:.9,x:-5},animate:{x:[0,-2,0]},transition:{x:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2},backgroundColor:{duration:.3}},className:`p-3 rounded-lg ${h?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 shadow-lg shadow-blue-500/20":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 shadow-lg shadow-blue-500/10"} transition-all duration-200 border-2 border-transparent hover:border-blue-400/30`,children:e.jsx(Ye,{className:"w-5 h-5"})}),e.jsxs(u.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},transition:{type:"spring",stiffness:300,damping:20,duration:.4},className:"flex flex-wrap gap-4 items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:`w-5 h-5 ${h?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-lg font-bold ${h?"text-white":"text-gray-900"}`,children:o.ime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:`w-4 h-4 ${h?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${h?"text-gray-400":"text-gray-600"}`,children:["Tura ",o.tura]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:`w-4 h-4 ${h?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${h?"text-gray-400":"text-gray-600"}`,children:["Cilj: ",G(o.tura)," stopova/dan"]})]})]},o==null?void 0:o.id),e.jsx(u.button,{onClick:P,whileHover:{scale:1.1,x:3,backgroundColor:h?"#374151":"#e5e7eb"},whileTap:{scale:.9,x:5},animate:{x:[0,2,0]},transition:{x:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2},backgroundColor:{duration:.3}},className:`p-3 rounded-lg ${h?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 shadow-lg shadow-blue-500/20":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 shadow-lg shadow-blue-500/10"} transition-all duration-200 border-2 border-transparent hover:border-blue-400/30`,children:e.jsx(Be,{className:"w-5 h-5"})})]})})})]}),k&&e.jsx(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`mb-6 p-4 rounded-xl ${h?"bg-red-900/30 border-red-700/50":"bg-red-50 border-red-200/50"} border`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lt,{className:`w-5 h-5 ${h?"text-red-400":"text-red-600"}`}),e.jsxs("p",{className:`text-sm font-medium ${h?"text-red-400":"text-red-600"}`,children:["Gre≈°ka pri uƒçitavanju podataka: ",k]})]})}),D||V?e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[e.jsx(u.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 mb-4 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx(Ke,{className:"w-8 h-8 text-white"})}),e.jsx("span",{className:`text-lg ${h?"text-gray-300":"text-gray-600"}`,children:e.jsxs(u.div,{className:"flex items-center gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx(u.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:`w-6 h-6 rounded-full border-2 border-t-transparent ${h?"border-blue-400":"border-blue-600"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(u.span,{animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:"Uƒçitavanje statistike..."}),e.jsx(u.div,{className:`h-2 mt-2 bg-gradient-to-r ${h?"from-blue-600 via-blue-400 to-blue-600":"from-blue-500 via-blue-300 to-blue-500"} rounded-full`,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:2,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}})]})]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:e.jsx(it,{children:U.map((M,Q)=>{const oe=M.icon,we=F(M.delivery.trend);F(M.complaints.trend);const de=M.complaints.value>0,ne=M.delivery.target>0?M.delivery.value/M.delivery.target*100:0;return e.jsxs(u.div,{initial:{opacity:0,y:30,scale:.8,rotateX:-15},animate:{opacity:1,y:0,scale:1,rotateX:0},exit:{opacity:0,y:-30,scale:.8,rotateX:15},transition:{delay:Q*.15,type:"spring",stiffness:300,damping:25,duration:.6},whileHover:{scale:1.03,y:-8,rotateY:2,transition:{duration:.3}},className:"relative group cursor-pointer",style:{perspective:"1000px"},children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-white via-gray-50 to-gray-100 border-2 border-gray-200/60 shadow-2xl transform group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-1 rounded-3xl bg-gradient-to-br from-white/80 to-transparent pointer-events-none"}),e.jsx(u.div,{className:"absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500",animate:{background:["radial-gradient(circle at 0% 0%, rgba(59, 130, 246, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 100%, rgba(147, 51, 234, 0.3) 0%, transparent 50%)","radial-gradient(circle at 0% 100%, rgba(236, 72, 153, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 0%, rgba(59, 130, 246, 0.3) 0%, transparent 50%)"]},transition:{duration:4,repeat:1/0,ease:"linear"}}),de&&e.jsx(u.div,{className:"absolute inset-0 rounded-3xl bg-red-500/10 border border-red-400/30",animate:{opacity:[.3,.6,.3],scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:"relative p-8 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(u.div,{className:"relative",whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:400},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-purple-600 rounded-2xl blur-md opacity-70"}),e.jsx("div",{className:"relative p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:e.jsx(oe,{className:"w-6 h-6 text-white drop-shadow-lg"})}),e.jsx(u.div,{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",animate:{scale:[1,1.3,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:M.title}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:M.period})]})]}),e.jsxs("div",{className:"space-y-6 flex-grow",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Dostavljeno"}),e.jsx(u.div,{animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"},children:e.jsx(we,{className:`w-5 h-5 ${v(M.delivery.trend)} drop-shadow-sm`})})]}),e.jsxs("div",{className:"flex items-baseline justify-between mb-4",children:[e.jsx(u.span,{className:"text-4xl font-black text-gray-900",animate:{textShadow:["2px 2px 4px rgba(0,0,0,0.1)","3px 3px 6px rgba(59,130,246,0.3)","2px 2px 4px rgba(0,0,0,0.1)"]},transition:{duration:3,repeat:1/0},children:M.delivery.value}),e.jsx("span",{className:"text-lg font-bold text-gray-600",children:"stopova"}),M.delivery.diff!==void 0&&M.delivery.diff!==0&&e.jsxs(u.span,{className:`px-2 py-1 rounded-full text-sm font-bold ${M.delivery.diff>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:[M.delivery.diff>0?"+":"",M.delivery.diff]})]}),M.delivery.target>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold",children:[e.jsxs("span",{className:"text-gray-800",children:["Cilj: ",M.delivery.target]}),e.jsxs(u.span,{className:`font-black ${ne>=100?"text-green-700":ne>=98?"text-blue-700":"text-red-700"}`,animate:ne>=100?{scale:[1,1.15,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(34,197,94,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]}:ne>=98?{scale:[1,1.08,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(59,130,246,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]}:{scale:[1,1.1,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(220,38,38,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]},transition:{duration:1.5,repeat:1/0},children:[Math.round(ne),"%"]})]}),e.jsxs("div",{className:"relative h-3 bg-gray-200 rounded-full overflow-hidden border border-gray-300",children:[e.jsx(u.div,{className:`h-full rounded-full relative ${ne>=100?"bg-gradient-to-r from-green-400 via-green-500 to-emerald-600":ne>=98?"bg-gradient-to-r from-blue-400 via-blue-500 to-indigo-600":"bg-gradient-to-r from-red-400 via-red-500 to-red-600"}`,initial:{width:0},animate:{width:`${Math.min(ne,100)}%`},transition:{duration:1.5,delay:.5,ease:"easeOut"},children:e.jsx(u.div,{className:"absolute inset-0 bg-white/30",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})}),ne>=100&&e.jsx(u.div,{className:"absolute right-2 top-1/2 transform -translate-y-1/2",animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:e.jsx("span",{className:"text-xs font-bold text-white drop-shadow",children:"üéØ"})})]})]})]}),e.jsxs("div",{className:`relative p-4 rounded-2xl transition-all duration-500 border-2 ${de?"bg-red-50 border-red-200 shadow-lg shadow-red-100":"bg-green-50 border-green-200 shadow-lg shadow-green-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Reklamacije"}),de?e.jsx(u.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:e.jsx(rt,{className:"w-5 h-5 text-red-600 drop-shadow-sm"})}):e.jsx(u.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(vt,{className:"w-5 h-5 text-green-600 drop-shadow-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u.span,{className:`text-3xl font-black ${de?"text-red-700":"text-green-700"}`,animate:de?{scale:[1,1.1,1],textShadow:["1px 1px 2px rgba(0,0,0,0.1)","2px 2px 4px rgba(220, 38, 38, 0.3)","1px 1px 2px rgba(0,0,0,0.1)"]}:{textShadow:["1px 1px 2px rgba(0,0,0,0.1)","2px 2px 4px rgba(34, 197, 94, 0.3)","1px 1px 2px rgba(0,0,0,0.1)"]},transition:{duration:2,repeat:1/0},children:M.complaints.value}),de?e.jsxs(u.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200},className:"px-3 py-1 bg-red-600 text-white text-xs font-bold rounded-full shadow-lg flex items-center gap-1",children:[e.jsx("span",{children:"‚âà"}),e.jsxs("span",{children:[(M.complaints.value*80).toLocaleString(),"‚Ç¨"]})]}):e.jsx(u.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200},className:"px-3 py-1 bg-green-600 text-white text-xs font-bold rounded-full shadow-lg",children:"SAVR≈†ENO!"})]})]})]}),e.jsx(u.div,{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full shadow-lg"})})]})]},M.title)})})})]})})},Kr=Object.freeze(Object.defineProperty({__proto__:null,default:Or},Symbol.toStringTag,{value:"Module"}));export{_r as C,Yr as D,Wr as H,_a as S,It as U,Ia as a,Ht as b,Ft as c,Ea as d,At as e,qr as f,Br as g,Kr as h,Vr as i,xe as q,Ot as u};

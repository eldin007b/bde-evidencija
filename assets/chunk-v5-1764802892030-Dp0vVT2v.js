import{s as ie,g as ga,a as ma}from"./chunk-v5-1764802892030-jbLQRSDA.js";import{j as e,m,C as qe,T as Oe,a as pa,A as dt,b as xa,c as Pt,W as ha,K as Et,L as fa,X as ba,d as ya,e as ut,f as Ae,g as Qe,h as va,N as wa,U as Be,M as ja,I as ka,i as gt,k as Ke,l as Je,P as Xe,n as Tt,o as Rt,p as nt,q as Na,r as Sa,s as $a,t as vt,u as Da}from"./chunk-v5-1764802892030-BG1SDadW.js";import{r as l,u as He}from"./chunk-v5-1764802892030-DzTHeiPn.js";import{e as Ca,i as Ia,f as fe}from"./chunk-v5-1764802892030-67jeV4qK.js";import{Q as _a,u as Ze}from"./chunk-v5-1764802892030-B9ZkT-FW.js";const ue={getItem:t=>window.localStorage.getItem(t),setItem:(t,a)=>window.localStorage.setItem(t,a),deleteItem:t=>window.localStorage.removeItem(t)},Ot=l.createContext();function qr({children:t,forceShowInit:a}){const[r,o]=l.useState(!1),[s,g]=l.useState(""),[p,u]=l.useState(""),[n,I]=l.useState("user"),[E,D]=l.useState(""),[Y,$]=l.useState("#1769aa"),w=l.useCallback(()=>{const f=ue.getItem("DRIVER_TURA"),H=ue.getItem("DRIVER_NAME"),_=ue.getItem("DRIVER_ROLE"),L=ue.getItem("DEVICE_ID"),F=ue.getItem("IS_ADMIN");g(f||""),u(H||""),I(_||"user"),D(L||""),o(F==="true"),F==="true"?$("#cc0000"):H&&f&&$("#1769aa")},[]);l.useEffect(()=>{w(),typeof window<"u"&&(window.__USER_CONTEXT__={refreshStatus:w})},[w]);const O={isAdmin:r,driverTura:s,driverName:p,driverRole:n,deviceId:E,userColor:Y,refreshStatus:w,resetLoginData:()=>(ue.deleteItem("DRIVER_TURA"),ue.deleteItem("DRIVER_NAME"),ue.deleteItem("DRIVER_ROLE"),ue.deleteItem("DEVICE_ID"),ue.deleteItem("IS_ADMIN"),ue.deleteItem("APP_LANG"),w(),typeof a=="function"&&a(),!0),validateDriverAccess:()=>!(!s||!E)};return e.jsx(Ot.Provider,{value:O,children:t})}function At(){const t=l.useContext(Ot);if(!t)throw new Error("useUserContext mora biti kori≈°ten unutar <UserProvider>");return t}function Ht(){const[t,a]=l.useState(null),[r,o]=l.useState(!0),[s,g]=l.useState(null),p=l.useCallback(()=>{try{const $=localStorage.getItem("bde_current_user"),w=localStorage.getItem("bde_login_time");if($&&w){const N=JSON.parse($);if(Date.now()-parseInt(w)<7*24*60*60*1e3)return N;localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}}catch($){console.error("Error loading user from storage:",$),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}return null},[]),u=l.useCallback($=>{try{localStorage.setItem("bde_current_user",JSON.stringify($)),localStorage.setItem("bde_login_time",Date.now().toString())}catch(w){console.error("Error saving user to storage:",w)}},[]),n=l.useCallback(async $=>{console.log("üöÄ checkDriverExists called with tura:",$),o(!0),g(null);try{const{data:w,error:N}=await ie.from("drivers").select("id, ime, tura, aktivan, role, password_hash").eq("tura",$.toUpperCase()).eq("aktivan",!0).single();if(N)throw console.error("Database error checking driver:",N),new Error(`Vozaƒç sa turom ${$} nije pronaƒëen ili nije aktivan`);console.log("üîç Driver check result:",{id:w.id,ime:w.ime,tura:w.tura,hasPassword:!!w.password_hash,role:w.role});const P={id:w.id,ime:w.ime,tura:w.tura,role:w.role||"driver",hasPassword:!!w.password_hash};return console.log("üéØ Returning from checkDriverExists:",P),P}catch(w){throw g(w.message),w}finally{o(!1)}},[]),I=l.useCallback(async($,w)=>{o(!0),g(null);try{const N=btoa(w),{error:P}=await ie.from("drivers").update({password_hash:N,last_login:new Date}).eq("id",$);if(P)throw new Error("Gre≈°ka pri postavljanju lozinke");return!0}catch(N){throw g(N.message),N}finally{o(!1)}},[]),E=l.useCallback(async($,w)=>{o(!0),g(null);try{const{data:N,error:P}=await ie.from("drivers").select("*").eq("tura",$.toUpperCase()).eq("aktivan",!0).single();if(P)throw console.error("Database error during login:",P),new Error(`Vozaƒç sa turom ${$} nije pronaƒëen ili nije aktivan`);if(console.log("üîç Driver found for login:",{tura:N.tura,ime:N.ime,hasPassword:!!N.password_hash,role:N.role}),!N.password_hash)throw new Error("Vozaƒç nema postavljenu lozinku. Kontaktirajte administratora.");if(!(N.password_hash===w||N.password_hash===btoa(w)))throw new Error("Neispravna lozinka");await ie.from("drivers").update({last_login:new Date}).eq("id",N.id);const f={id:N.id,username:N.tura,name:N.ime,role:N.role||"driver",loginTime:Date.now()};return a(f),u(f),f}catch(N){throw g(N.message),N}finally{o(!1)}},[u]),D=l.useCallback(async($,w)=>{if(!t)throw new Error("Morate biti ulogovani");o(!0),g(null);try{const{data:N,error:P}=await ie.from("drivers").select("password_hash").eq("id",t.id).single();if(P)throw new Error("Gre≈°ka pri provjeri korisnika");if(!(N.password_hash===$||N.password_hash===btoa($)))throw new Error("Stara lozinka nije ispravna");const f=btoa(w),{error:H}=await ie.from("drivers").update({password_hash:f}).eq("id",t.id);if(H)throw new Error("Gre≈°ka pri a≈æuriranju lozinke");return!0}catch(N){throw g(N.message),N}finally{o(!1)}},[t]),Y=l.useCallback(()=>{a(null),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time"),g(null),console.log("‚úÖ User logged out")},[]);return l.useEffect(()=>{const $=p();$&&a($),o(!1)},[p]),{currentUser:t,loading:r,error:s,checkDriverExists:n,setInitialPassword:I,login:E,changePassword:D,logout:Y,isAuthenticated:!!t}}function Ft(t,a,r=[]){return l.useMemo(()=>{const o=new Date(t,a,1),s=new Date(t,a+1,0);return Ca({start:o,end:s}).filter(p=>!Ia(p)&&!(r||[]).includes(fe(p,"yyyy-MM-dd")))},[t,a,r])}function Ma({syncStatus:t}){const a=(t==null?void 0:t.unsyncedCount)===0;if(!t)return null;const r=a?"100%":"30%",o=a?"#4caf50":"#f44336";return e.jsx("div",{style:{width:"100%",height:6,backgroundColor:"#e0e0e0",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:3,width:r,backgroundColor:o,transition:"width 1s, background-color 1s"}})})}const za=()=>({persistClient:t=>{try{const a={timestamp:Date.now(),clientState:JSON.stringify({queries:t.getQueryCache().getAll().filter(r=>{const o=r.queryKey[0];return["drivers","holidays"].includes(o)}).map(r=>({queryKey:r.queryKey,state:r.state}))})};localStorage.setItem("bde_query_cache",JSON.stringify(a))}catch(a){console.warn("Failed to persist query cache:",a)}},restoreClient:()=>{try{const t=localStorage.getItem("bde_query_cache");if(!t)return;const{timestamp:a,clientState:r}=JSON.parse(t),o=24*60*60*1e3;if(Date.now()-a>o){localStorage.removeItem("bde_query_cache");return}return JSON.parse(r)}catch(t){console.warn("Failed to restore query cache:",t),localStorage.removeItem("bde_query_cache")}},removeClient:()=>{localStorage.removeItem("bde_query_cache")}}),mt=za(),Pa=()=>{const t=new Date,a=t.getHours(),r=t.getDay();let o,s;return r>=1&&r<=5&&a>=2&&a<=9?(o=5*60*1e3,s="radni sat (dodaju se novi podaci)"):r>=1&&r<=5&&a>9?(o=2*60*60*1e3,s="radni dan posle 09h"):(o=6*60*60*1e3,s=r===0||r===6?"vikend":"noƒá"),console.log(`üß† Smart cache: ${o/6e4} min (${s})`),o},pe=new _a({defaultOptions:{queries:{staleTime:Pa(),cacheTime:4*60*60*1e3,refetchOnWindowFocus:()=>{const t=new Date().getHours(),a=new Date().getDay();return a>=1&&a<=5&&t>=2&&t<=9},refetchOnReconnect:!0,refetchOnMount:!1,retry:2,retryDelay:t=>Math.min(1e3*2**t,3e4),suspense:!1,useErrorBoundary:!1,networkMode:"online"},mutations:{retry:1,networkMode:"online"}}}),le={drivers:{all:["drivers"]},deliveries:{all:["deliveries"],byMonth:(t,a)=>[...le.deliveries.all,"month",t,a],byYear:t=>[...le.deliveries.all,"year",t],byDriver:(t,a,r)=>[...le.deliveries.all,"driver",t,a,r],stats:(t,a)=>[...le.deliveries.all,"stats",t,a]},holidays:{all:["holidays"],byYear:t=>[...le.holidays.all,"year",t]},extraRides:{all:["extraRides"]},driverStats:{all:["driverStats"]}},Vr={drivers:()=>pe.invalidateQueries({queryKey:le.drivers.all}),deliveries:()=>pe.invalidateQueries({queryKey:le.deliveries.all}),holidays:()=>pe.invalidateQueries({queryKey:le.holidays.all}),extraRides:()=>pe.invalidateQueries({queryKey:le.extraRides.all}),driverStats:()=>pe.invalidateQueries({queryKey:le.driverStats.all}),all:()=>pe.invalidateQueries()};try{const t=mt.restoreClient();t!=null&&t.queries&&t.queries.forEach(({queryKey:a,state:r})=>{r.data&&pe.setQueryData(a,r.data)})}catch(t){console.warn("Failed to restore query cache on init:",t)}let wt;pe.getQueryCache().subscribe(()=>{clearTimeout(wt),wt=setTimeout(()=>{mt.persistClient(pe)},1e3)});typeof window<"u"&&window.addEventListener("beforeunload",()=>{mt.persistClient(pe)});function Lt(t={}){return Ze({queryKey:le.drivers.all,queryFn:async()=>{console.log("üöó Fetching drivers from Supabase...");const{data:a,error:r}=await ie.from("drivers").select("*").order("tura",{ascending:!0});if(r)throw r;return console.log("‚úÖ Drivers loaded from Supabase:",(a==null?void 0:a.length)||0),a||[]},staleTime:30*60*1e3,...t})}function Ea(t,a,r={}){return Ze({queryKey:le.deliveries.byMonth(t,a),queryFn:()=>ga(t,a),staleTime:3*60*1e3,enabled:t!==void 0&&a!==void 0,...r})}function Ta(t,a,r,o={}){return Ze({queryKey:le.deliveries.byDriver(t,a,r),queryFn:async()=>{const s=new Date(a,r,1),g=new Date(a,r+1,0),p=s.toISOString().split("T")[0],u=g.toISOString().split("T")[0],{data:n,error:I}=await ie.from("deliveries").select("*").eq("driver",t).gte("date",p).lte("date",u).order("date",{ascending:!0});if(I)throw I;return n||[]},enabled:!!t&&a!==void 0&&r!==void 0,staleTime:3*60*1e3,...o})}function Gt(t,a={}){return Ze({queryKey:le.holidays.byYear(t),queryFn:()=>ma(t),staleTime:30*60*1e3,enabled:t!==void 0,...a})}function jt(t,a){if(typeof t=="function")return t(a);t!=null&&(t.current=a)}function Ra(...t){return a=>{let r=!1;const o=t.map(s=>{const g=jt(s,a);return!r&&typeof g=="function"&&(r=!0),g});if(r)return()=>{for(let s=0;s<o.length;s++){const g=o[s];typeof g=="function"?g():jt(t[s],null)}}}}function Oa(t){const a=Ha(t),r=l.forwardRef((o,s)=>{const{children:g,...p}=o,u=l.Children.toArray(g),n=u.find(La);if(n){const I=n.props.children,E=u.map(D=>D===n?l.Children.count(I)>1?l.Children.only(null):l.isValidElement(I)?I.props.children:null:D);return e.jsx(a,{...p,ref:s,children:l.isValidElement(I)?l.cloneElement(I,void 0,E):null})}return e.jsx(a,{...p,ref:s,children:g})});return r.displayName=`${t}.Slot`,r}var Aa=Oa("Slot");function Ha(t){const a=l.forwardRef((r,o)=>{const{children:s,...g}=r;if(l.isValidElement(s)){const p=Ua(s),u=Ga(g,s.props);return s.type!==l.Fragment&&(u.ref=o?Ra(o,p):p),l.cloneElement(s,u)}return l.Children.count(s)>1?l.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var Fa=Symbol("radix.slottable");function La(t){return l.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Fa}function Ga(t,a){const r={...a};for(const o in a){const s=t[o],g=a[o];/^on[A-Z]/.test(o)?s&&g?r[o]=(...u)=>{const n=g(...u);return s(...u),n}:s&&(r[o]=s):o==="style"?r[o]={...s,...g}:o==="className"&&(r[o]=[s,g].filter(Boolean).join(" "))}return{...t,...r}}function Ua(t){var o,s;let a=(o=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:o.get,r=a&&"isReactWarning"in a&&a.isReactWarning;return r?t.ref:(a=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Ut(t){var a,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(a=0;a<s;a++)t[a]&&(r=Ut(t[a]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function qt(){for(var t,a,r=0,o="",s=arguments.length;r<s;r++)(t=arguments[r])&&(a=Ut(t))&&(o&&(o+=" "),o+=a);return o}const kt=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Nt=qt,qa=(t,a)=>r=>{var o;if((a==null?void 0:a.variants)==null)return Nt(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:g}=a,p=Object.keys(s).map(I=>{const E=r==null?void 0:r[I],D=g==null?void 0:g[I];if(E===null)return null;const Y=kt(E)||kt(D);return s[I][Y]}),u=r&&Object.entries(r).reduce((I,E)=>{let[D,Y]=E;return Y===void 0||(I[D]=Y),I},{}),n=a==null||(o=a.compoundVariants)===null||o===void 0?void 0:o.reduce((I,E)=>{let{class:D,className:Y,...$}=E;return Object.entries($).every(w=>{let[N,P]=w;return Array.isArray(P)?P.includes({...g,...u}[N]):{...g,...u}[N]===P})?[...I,D,Y]:I},[]);return Nt(t,p,n,r==null?void 0:r.class,r==null?void 0:r.className)},pt="-",Va=t=>{const a=Ya(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=t;return{getClassGroupId:p=>{const u=p.split(pt);return u[0]===""&&u.length!==1&&u.shift(),Vt(u,a)||Wa(p)},getConflictingClassGroupIds:(p,u)=>{const n=r[p]||[];return u&&o[p]?[...n,...o[p]]:n}}},Vt=(t,a)=>{var p;if(t.length===0)return a.classGroupId;const r=t[0],o=a.nextPart.get(r),s=o?Vt(t.slice(1),o):void 0;if(s)return s;if(a.validators.length===0)return;const g=t.join(pt);return(p=a.validators.find(({validator:u})=>u(g)))==null?void 0:p.classGroupId},St=/^\[(.+)\]$/,Wa=t=>{if(St.test(t)){const a=St.exec(t)[1],r=a==null?void 0:a.substring(0,a.indexOf(":"));if(r)return"arbitrary.."+r}},Ya=t=>{const{theme:a,classGroups:r}=t,o={nextPart:new Map,validators:[]};for(const s in r)it(r[s],o,s,a);return o},it=(t,a,r,o)=>{t.forEach(s=>{if(typeof s=="string"){const g=s===""?a:$t(a,s);g.classGroupId=r;return}if(typeof s=="function"){if(Ba(s)){it(s(o),a,r,o);return}a.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([g,p])=>{it(p,$t(a,g),r,o)})})},$t=(t,a)=>{let r=t;return a.split(pt).forEach(o=>{r.nextPart.has(o)||r.nextPart.set(o,{nextPart:new Map,validators:[]}),r=r.nextPart.get(o)}),r},Ba=t=>t.isThemeGetter,Ka=t=>{if(t<1)return{get:()=>{},set:()=>{}};let a=0,r=new Map,o=new Map;const s=(g,p)=>{r.set(g,p),a++,a>t&&(a=0,o=r,r=new Map)};return{get(g){let p=r.get(g);if(p!==void 0)return p;if((p=o.get(g))!==void 0)return s(g,p),p},set(g,p){r.has(g)?r.set(g,p):s(g,p)}}},lt="!",ct=":",Ja=ct.length,Xa=t=>{const{prefix:a,experimentalParseClassName:r}=t;let o=s=>{const g=[];let p=0,u=0,n=0,I;for(let w=0;w<s.length;w++){let N=s[w];if(p===0&&u===0){if(N===ct){g.push(s.slice(n,w)),n=w+Ja;continue}if(N==="/"){I=w;continue}}N==="["?p++:N==="]"?p--:N==="("?u++:N===")"&&u--}const E=g.length===0?s:s.substring(n),D=Qa(E),Y=D!==E,$=I&&I>n?I-n:void 0;return{modifiers:g,hasImportantModifier:Y,baseClassName:D,maybePostfixModifierPosition:$}};if(a){const s=a+ct,g=o;o=p=>p.startsWith(s)?g(p.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:p,maybePostfixModifierPosition:void 0}}if(r){const s=o;o=g=>r({className:g,parseClassName:s})}return o},Qa=t=>t.endsWith(lt)?t.substring(0,t.length-1):t.startsWith(lt)?t.substring(1):t,Za=t=>{const a=Object.fromEntries(t.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const s=[];let g=[];return o.forEach(p=>{p[0]==="["||a[p]?(s.push(...g.sort(),p),g=[]):g.push(p)}),s.push(...g.sort()),s}},er=t=>({cache:Ka(t.cacheSize),parseClassName:Xa(t),sortModifiers:Za(t),...Va(t)}),tr=/\s+/,ar=(t,a)=>{const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:s,sortModifiers:g}=a,p=[],u=t.trim().split(tr);let n="";for(let I=u.length-1;I>=0;I-=1){const E=u[I],{isExternal:D,modifiers:Y,hasImportantModifier:$,baseClassName:w,maybePostfixModifierPosition:N}=r(E);if(D){n=E+(n.length>0?" "+n:n);continue}let P=!!N,O=o(P?w.substring(0,N):w);if(!O){if(!P){n=E+(n.length>0?" "+n:n);continue}if(O=o(w),!O){n=E+(n.length>0?" "+n:n);continue}P=!1}const f=g(Y).join(":"),H=$?f+lt:f,_=H+O;if(p.includes(_))continue;p.push(_);const L=s(O,P);for(let F=0;F<L.length;++F){const K=L[F];p.push(H+K)}n=E+(n.length>0?" "+n:n)}return n};function rr(){let t=0,a,r,o="";for(;t<arguments.length;)(a=arguments[t++])&&(r=Wt(a))&&(o&&(o+=" "),o+=r);return o}const Wt=t=>{if(typeof t=="string")return t;let a,r="";for(let o=0;o<t.length;o++)t[o]&&(a=Wt(t[o]))&&(r&&(r+=" "),r+=a);return r};function sr(t,...a){let r,o,s,g=p;function p(n){const I=a.reduce((E,D)=>D(E),t());return r=er(I),o=r.cache.get,s=r.cache.set,g=u,u(n)}function u(n){const I=o(n);if(I)return I;const E=ar(n,r);return s(n,E),E}return function(){return g(rr.apply(null,arguments))}}const se=t=>{const a=r=>r[t]||[];return a.isThemeGetter=!0,a},Yt=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Bt=/^\((?:(\w[\w-]*):)?(.+)\)$/i,or=/^\d+\/\d+$/,nr=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ir=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cr=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dr=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_e=t=>or.test(t),R=t=>!!t&&!Number.isNaN(Number(t)),we=t=>!!t&&Number.isInteger(Number(t)),rt=t=>t.endsWith("%")&&R(t.slice(0,-1)),he=t=>nr.test(t),ur=()=>!0,gr=t=>ir.test(t)&&!lr.test(t),Kt=()=>!1,mr=t=>cr.test(t),pr=t=>dr.test(t),xr=t=>!j(t)&&!k(t),hr=t=>Me(t,Qt,Kt),j=t=>Yt.test(t),ke=t=>Me(t,Zt,gr),st=t=>Me(t,wr,R),Dt=t=>Me(t,Jt,Kt),fr=t=>Me(t,Xt,pr),Ve=t=>Me(t,ea,mr),k=t=>Bt.test(t),Te=t=>ze(t,Zt),br=t=>ze(t,jr),Ct=t=>ze(t,Jt),yr=t=>ze(t,Qt),vr=t=>ze(t,Xt),We=t=>ze(t,ea,!0),Me=(t,a,r)=>{const o=Yt.exec(t);return o?o[1]?a(o[1]):r(o[2]):!1},ze=(t,a,r=!1)=>{const o=Bt.exec(t);return o?o[1]?a(o[1]):r:!1},Jt=t=>t==="position"||t==="percentage",Xt=t=>t==="image"||t==="url",Qt=t=>t==="length"||t==="size"||t==="bg-size",Zt=t=>t==="length",wr=t=>t==="number",jr=t=>t==="family-name",ea=t=>t==="shadow",kr=()=>{const t=se("color"),a=se("font"),r=se("text"),o=se("font-weight"),s=se("tracking"),g=se("leading"),p=se("breakpoint"),u=se("container"),n=se("spacing"),I=se("radius"),E=se("shadow"),D=se("inset-shadow"),Y=se("text-shadow"),$=se("drop-shadow"),w=se("blur"),N=se("perspective"),P=se("aspect"),O=se("ease"),f=se("animate"),H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[..._(),k,j],F=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto","contain","none"],c=()=>[k,j,n],y=()=>[_e,"full","auto",...c()],J=()=>[we,"none","subgrid",k,j],te=()=>["auto",{span:["full",we,k,j]},we,k,j],V=()=>[we,"auto",k,j],q=()=>["auto","min","max","fr",k,j],T=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],G=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...c()],U=()=>[_e,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...c()],b=()=>[t,k,j],Q=()=>[..._(),Ct,Dt,{position:[k,j]}],re=()=>["no-repeat",{repeat:["","x","y","space","round"]}],h=()=>["auto","cover","contain",yr,hr,{size:[k,j]}],M=()=>[rt,Te,ke],d=()=>["","none","full",I,k,j],i=()=>["",R,Te,ke],v=()=>["solid","dashed","dotted","double"],S=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],x=()=>[R,rt,Ct,Dt],C=()=>["","none",w,k,j],A=()=>["none",R,k,j],B=()=>["none",R,k,j],Z=()=>[R,k,j],ae=()=>[_e,"full",...c()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[he],breakpoint:[he],color:[ur],container:[he],"drop-shadow":[he],ease:["in","out","in-out"],font:[xr],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[he],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[he],shadow:[he],spacing:["px",R],text:[he],"text-shadow":[he],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",_e,j,k,P]}],container:["container"],columns:[{columns:[R,j,k,u]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:K()}],"overscroll-x":[{"overscroll-x":K()}],"overscroll-y":[{"overscroll-y":K()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:y()}],"inset-x":[{"inset-x":y()}],"inset-y":[{"inset-y":y()}],start:[{start:y()}],end:[{end:y()}],top:[{top:y()}],right:[{right:y()}],bottom:[{bottom:y()}],left:[{left:y()}],visibility:["visible","invisible","collapse"],z:[{z:[we,"auto",k,j]}],basis:[{basis:[_e,"full","auto",u,...c()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[R,_e,"auto","initial","none",j]}],grow:[{grow:["",R,k,j]}],shrink:[{shrink:["",R,k,j]}],order:[{order:[we,"first","last","none",k,j]}],"grid-cols":[{"grid-cols":J()}],"col-start-end":[{col:te()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":J()}],"row-start-end":[{row:te()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":q()}],"auto-rows":[{"auto-rows":q()}],gap:[{gap:c()}],"gap-x":[{"gap-x":c()}],"gap-y":[{"gap-y":c()}],"justify-content":[{justify:[...T(),"normal"]}],"justify-items":[{"justify-items":[...G(),"normal"]}],"justify-self":[{"justify-self":["auto",...G()]}],"align-content":[{content:["normal",...T()]}],"align-items":[{items:[...G(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...G(),{baseline:["","last"]}]}],"place-content":[{"place-content":T()}],"place-items":[{"place-items":[...G(),"baseline"]}],"place-self":[{"place-self":["auto",...G()]}],p:[{p:c()}],px:[{px:c()}],py:[{py:c()}],ps:[{ps:c()}],pe:[{pe:c()}],pt:[{pt:c()}],pr:[{pr:c()}],pb:[{pb:c()}],pl:[{pl:c()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":c()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":c()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[u,"screen",...U()]}],"min-w":[{"min-w":[u,"screen","none",...U()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[p]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",r,Te,ke]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,k,st]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",rt,j]}],"font-family":[{font:[br,j,a]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,k,j]}],"line-clamp":[{"line-clamp":[R,"none",k,st]}],leading:[{leading:[g,...c()]}],"list-image":[{"list-image":["none",k,j]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",k,j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:b()}],"text-color":[{text:b()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...v(),"wavy"]}],"text-decoration-thickness":[{decoration:[R,"from-font","auto",k,ke]}],"text-decoration-color":[{decoration:b()}],"underline-offset":[{"underline-offset":[R,"auto",k,j]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:c()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",k,j]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",k,j]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Q()}],"bg-repeat":[{bg:re()}],"bg-size":[{bg:h()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},we,k,j],radial:["",k,j],conic:[we,k,j]},vr,fr]}],"bg-color":[{bg:b()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:b()}],"gradient-via":[{via:b()}],"gradient-to":[{to:b()}],rounded:[{rounded:d()}],"rounded-s":[{"rounded-s":d()}],"rounded-e":[{"rounded-e":d()}],"rounded-t":[{"rounded-t":d()}],"rounded-r":[{"rounded-r":d()}],"rounded-b":[{"rounded-b":d()}],"rounded-l":[{"rounded-l":d()}],"rounded-ss":[{"rounded-ss":d()}],"rounded-se":[{"rounded-se":d()}],"rounded-ee":[{"rounded-ee":d()}],"rounded-es":[{"rounded-es":d()}],"rounded-tl":[{"rounded-tl":d()}],"rounded-tr":[{"rounded-tr":d()}],"rounded-br":[{"rounded-br":d()}],"rounded-bl":[{"rounded-bl":d()}],"border-w":[{border:i()}],"border-w-x":[{"border-x":i()}],"border-w-y":[{"border-y":i()}],"border-w-s":[{"border-s":i()}],"border-w-e":[{"border-e":i()}],"border-w-t":[{"border-t":i()}],"border-w-r":[{"border-r":i()}],"border-w-b":[{"border-b":i()}],"border-w-l":[{"border-l":i()}],"divide-x":[{"divide-x":i()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":i()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...v(),"hidden","none"]}],"divide-style":[{divide:[...v(),"hidden","none"]}],"border-color":[{border:b()}],"border-color-x":[{"border-x":b()}],"border-color-y":[{"border-y":b()}],"border-color-s":[{"border-s":b()}],"border-color-e":[{"border-e":b()}],"border-color-t":[{"border-t":b()}],"border-color-r":[{"border-r":b()}],"border-color-b":[{"border-b":b()}],"border-color-l":[{"border-l":b()}],"divide-color":[{divide:b()}],"outline-style":[{outline:[...v(),"none","hidden"]}],"outline-offset":[{"outline-offset":[R,k,j]}],"outline-w":[{outline:["",R,Te,ke]}],"outline-color":[{outline:b()}],shadow:[{shadow:["","none",E,We,Ve]}],"shadow-color":[{shadow:b()}],"inset-shadow":[{"inset-shadow":["none",D,We,Ve]}],"inset-shadow-color":[{"inset-shadow":b()}],"ring-w":[{ring:i()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:b()}],"ring-offset-w":[{"ring-offset":[R,ke]}],"ring-offset-color":[{"ring-offset":b()}],"inset-ring-w":[{"inset-ring":i()}],"inset-ring-color":[{"inset-ring":b()}],"text-shadow":[{"text-shadow":["none",Y,We,Ve]}],"text-shadow-color":[{"text-shadow":b()}],opacity:[{opacity:[R,k,j]}],"mix-blend":[{"mix-blend":[...S(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":S()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[R]}],"mask-image-linear-from-pos":[{"mask-linear-from":x()}],"mask-image-linear-to-pos":[{"mask-linear-to":x()}],"mask-image-linear-from-color":[{"mask-linear-from":b()}],"mask-image-linear-to-color":[{"mask-linear-to":b()}],"mask-image-t-from-pos":[{"mask-t-from":x()}],"mask-image-t-to-pos":[{"mask-t-to":x()}],"mask-image-t-from-color":[{"mask-t-from":b()}],"mask-image-t-to-color":[{"mask-t-to":b()}],"mask-image-r-from-pos":[{"mask-r-from":x()}],"mask-image-r-to-pos":[{"mask-r-to":x()}],"mask-image-r-from-color":[{"mask-r-from":b()}],"mask-image-r-to-color":[{"mask-r-to":b()}],"mask-image-b-from-pos":[{"mask-b-from":x()}],"mask-image-b-to-pos":[{"mask-b-to":x()}],"mask-image-b-from-color":[{"mask-b-from":b()}],"mask-image-b-to-color":[{"mask-b-to":b()}],"mask-image-l-from-pos":[{"mask-l-from":x()}],"mask-image-l-to-pos":[{"mask-l-to":x()}],"mask-image-l-from-color":[{"mask-l-from":b()}],"mask-image-l-to-color":[{"mask-l-to":b()}],"mask-image-x-from-pos":[{"mask-x-from":x()}],"mask-image-x-to-pos":[{"mask-x-to":x()}],"mask-image-x-from-color":[{"mask-x-from":b()}],"mask-image-x-to-color":[{"mask-x-to":b()}],"mask-image-y-from-pos":[{"mask-y-from":x()}],"mask-image-y-to-pos":[{"mask-y-to":x()}],"mask-image-y-from-color":[{"mask-y-from":b()}],"mask-image-y-to-color":[{"mask-y-to":b()}],"mask-image-radial":[{"mask-radial":[k,j]}],"mask-image-radial-from-pos":[{"mask-radial-from":x()}],"mask-image-radial-to-pos":[{"mask-radial-to":x()}],"mask-image-radial-from-color":[{"mask-radial-from":b()}],"mask-image-radial-to-color":[{"mask-radial-to":b()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[R]}],"mask-image-conic-from-pos":[{"mask-conic-from":x()}],"mask-image-conic-to-pos":[{"mask-conic-to":x()}],"mask-image-conic-from-color":[{"mask-conic-from":b()}],"mask-image-conic-to-color":[{"mask-conic-to":b()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Q()}],"mask-repeat":[{mask:re()}],"mask-size":[{mask:h()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",k,j]}],filter:[{filter:["","none",k,j]}],blur:[{blur:C()}],brightness:[{brightness:[R,k,j]}],contrast:[{contrast:[R,k,j]}],"drop-shadow":[{"drop-shadow":["","none",$,We,Ve]}],"drop-shadow-color":[{"drop-shadow":b()}],grayscale:[{grayscale:["",R,k,j]}],"hue-rotate":[{"hue-rotate":[R,k,j]}],invert:[{invert:["",R,k,j]}],saturate:[{saturate:[R,k,j]}],sepia:[{sepia:["",R,k,j]}],"backdrop-filter":[{"backdrop-filter":["","none",k,j]}],"backdrop-blur":[{"backdrop-blur":C()}],"backdrop-brightness":[{"backdrop-brightness":[R,k,j]}],"backdrop-contrast":[{"backdrop-contrast":[R,k,j]}],"backdrop-grayscale":[{"backdrop-grayscale":["",R,k,j]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[R,k,j]}],"backdrop-invert":[{"backdrop-invert":["",R,k,j]}],"backdrop-opacity":[{"backdrop-opacity":[R,k,j]}],"backdrop-saturate":[{"backdrop-saturate":[R,k,j]}],"backdrop-sepia":[{"backdrop-sepia":["",R,k,j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":c()}],"border-spacing-x":[{"border-spacing-x":c()}],"border-spacing-y":[{"border-spacing-y":c()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",k,j]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[R,"initial",k,j]}],ease:[{ease:["linear","initial",O,k,j]}],delay:[{delay:[R,k,j]}],animate:[{animate:["none",f,k,j]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,k,j]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:A()}],"rotate-x":[{"rotate-x":A()}],"rotate-y":[{"rotate-y":A()}],"rotate-z":[{"rotate-z":A()}],scale:[{scale:B()}],"scale-x":[{"scale-x":B()}],"scale-y":[{"scale-y":B()}],"scale-z":[{"scale-z":B()}],"scale-3d":["scale-3d"],skew:[{skew:Z()}],"skew-x":[{"skew-x":Z()}],"skew-y":[{"skew-y":Z()}],transform:[{transform:[k,j,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ae()}],"translate-x":[{"translate-x":ae()}],"translate-y":[{"translate-y":ae()}],"translate-z":[{"translate-z":ae()}],"translate-none":["translate-none"],accent:[{accent:b()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:b()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",k,j]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":c()}],"scroll-mx":[{"scroll-mx":c()}],"scroll-my":[{"scroll-my":c()}],"scroll-ms":[{"scroll-ms":c()}],"scroll-me":[{"scroll-me":c()}],"scroll-mt":[{"scroll-mt":c()}],"scroll-mr":[{"scroll-mr":c()}],"scroll-mb":[{"scroll-mb":c()}],"scroll-ml":[{"scroll-ml":c()}],"scroll-p":[{"scroll-p":c()}],"scroll-px":[{"scroll-px":c()}],"scroll-py":[{"scroll-py":c()}],"scroll-ps":[{"scroll-ps":c()}],"scroll-pe":[{"scroll-pe":c()}],"scroll-pt":[{"scroll-pt":c()}],"scroll-pr":[{"scroll-pr":c()}],"scroll-pb":[{"scroll-pb":c()}],"scroll-pl":[{"scroll-pl":c()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",k,j]}],fill:[{fill:["none",...b()]}],"stroke-w":[{stroke:[R,Te,ke,st]}],stroke:[{stroke:["none",...b()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Nr=sr(kr);function Ne(...t){return Nr(qt(t))}const Sr=qa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Re=l.forwardRef(({className:t,variant:a,size:r,asChild:o=!1,...s},g)=>{const p=o?Aa:"button";return e.jsx(p,{className:Ne(Sr({variant:a,size:r,className:t})),ref:g,...s})});Re.displayName="Button";function It({user:t,onChangePassword:a,onLogout:r,scraperData:o,currentTheme:s="default",themes:g}){const[p,u]=l.useState(!1),n=l.useRef(null),I=l.useRef(null),E=l.useRef(null),D=He(),$=g||{default:{accent:"from-blue-600 to-purple-600",gradient:"bg-gradient-to-r from-blue-500 to-purple-500"},sunrise:{accent:"from-orange-500 to-pink-500",gradient:"bg-gradient-to-r from-orange-400 to-pink-400"},afternoon:{accent:"from-blue-500 to-cyan-500",gradient:"bg-gradient-to-r from-blue-400 to-cyan-400"},evening:{accent:"from-purple-600 to-indigo-600",gradient:"bg-gradient-to-r from-purple-500 to-indigo-500"},night:{accent:"from-gray-600 to-blue-800",gradient:"bg-gradient-to-r from-gray-500 to-blue-700"}},w=()=>o?o.status==="completed"?{text:"Uspe≈°no",color:"text-emerald-500"}:o.status==="in_progress"?{text:"U toku",color:"text-amber-500"}:o.status==="failure"?{text:"Gre≈°ka",color:"text-rose-500"}:{text:"Nepoznato",color:"text-gray-500"}:{text:"Nepoznato",color:"text-gray-500"},N=()=>{var H,_,L;if(!o)return"Nepoznato";const f=[o.formattedTimestamp,o.timestamp,(H=o.raw)==null?void 0:H.updated_at,(_=o.raw)==null?void 0:_.run_started_at,(L=o.raw)==null?void 0:L.created_at];for(const F of f)if(F){const K=new Date(F);if(!isNaN(K.getTime()))return`${String(K.getDate()).padStart(2,"0")}.${String(K.getMonth()+1).padStart(2,"0")} ${String(K.getHours()).padStart(2,"0")}:${String(K.getMinutes()).padStart(2,"0")}`}return"Nepoznato"};l.useEffect(()=>{const f=H=>{const _=I.current&&!I.current.contains(H.target),L=n.current&&!n.current.contains(H.target),F=E.current&&!E.current.contains(H.target);_&&L&&F&&u(!1)};if(p)return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[p]);const P=()=>u(!p),O=f=>{u(!1),setTimeout(()=>f==null?void 0:f(),100)};return e.jsxs("div",{className:"relative inline-block text-left",ref:n,style:{zIndex:p?999999:"auto",position:"relative"},children:[e.jsx(m.div,{ref:I,onClick:P,whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:e.jsxs(m.div,{className:`flex items-center gap-3 px-3 py-2 ${s==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-2xl rounded-full border ${s==="night"?"border-white/10":"border-gray-100/50"} cursor-pointer transition-all duration-300`,style:{boxShadow:s==="night"?"6px 6px 12px rgba(0,0,0,0.4), -6px -6px 12px rgba(255,255,255,0.02)":"6px 6px 12px rgba(0,0,0,0.08), -6px -6px 12px rgba(255,255,255,0.8)"},whileHover:{boxShadow:s==="night"?"8px 8px 16px rgba(0,0,0,0.6), -8px -8px 16px rgba(255,255,255,0.05)":"8px 8px 16px rgba(0,0,0,0.12), -8px -8px 16px rgba(255,255,255,0.9)"},children:[e.jsx(m.div,{className:`w-8 h-8 rounded-full bg-gradient-to-br ${$[s].accent} flex items-center justify-center text-white font-bold`,whileHover:{rotate:[0,5,-5,0],scale:1.1},transition:{duration:.5},children:(t==null?void 0:t.role)==="admin"?e.jsx(qe,{className:"w-6 h-6 text-amber-400"}):e.jsx(Oe,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:`font-medium ${s==="night"?"text-gray-200":"text-gray-800"}`,children:(t==null?void 0:t.name)||"Korisnik"}),e.jsx(m.div,{animate:{rotate:p?180:0},transition:{duration:.3},children:e.jsx(pa,{className:`w-4 h-4 ${s==="night"?"text-gray-400":"text-gray-500"}`})})]})}),e.jsx(dt,{children:p&&e.jsxs(m.div,{ref:E,initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.25},className:`absolute right-0 mt-2 w-72 ${s==="night"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-3xl border ${s==="night"?"border-white/30":"border-gray-300"} rounded-2xl p-4`,style:{zIndex:999999,position:"absolute",top:"100%",right:0,boxShadow:s==="night"?"0 25px 50px rgba(0,0,0,0.8), 0 10px 30px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.2)":"0 25px 50px rgba(0,0,0,0.15), 0 10px 30px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.1)",transform:"translateZ(0)",willChange:"transform, opacity"},onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(m.div,{className:`w-10 h-10 bg-gradient-to-br ${$[s].accent} rounded-full flex items-center justify-center text-white font-bold`,whileHover:{scale:1.1,rotate:5},transition:{duration:.3},style:{boxShadow:s==="night"?"3px 3px 6px rgba(0,0,0,0.6), -2px -2px 4px rgba(255,255,255,0.05)":"3px 3px 6px rgba(0,0,0,0.15), -2px -2px 4px rgba(255,255,255,0.8)"},children:(t==null?void 0:t.role)==="admin"?e.jsx(qe,{className:"w-6 h-6 text-amber-400"}):e.jsx(Oe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold text-sm ${s==="night"?"text-gray-100":"text-gray-900"}`,children:(t==null?void 0:t.name)||"Korisnik"}),e.jsx("p",{className:`text-xs ${s==="night"?"text-gray-400":"text-gray-500"}`,children:(t==null?void 0:t.username)||"korisnik"})]}),(t==null?void 0:t.role)==="admin"&&e.jsx(m.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(qe,{className:"w-4 h-4 text-amber-500"})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:(t==null?void 0:t.role)!=="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs(m.div,{className:`${s==="night"?"bg-gray-800/50 border-gray-600/50":"bg-blue-50/80 border-blue-200/60"} border rounded-xl p-2 transition-all hover:shadow-sm backdrop-blur-sm`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx("div",{className:`text-xs font-medium ${s==="night"?"text-blue-400":"text-blue-600"} mb-1`,children:"Zadnja plata"}),e.jsx("div",{className:`font-bold ${s==="night"?"text-blue-300":"text-blue-900"} text-sm`,children:(t==null?void 0:t.zadnjaPlata)||"-"})]}),e.jsxs(m.div,{className:`${s==="night"?"bg-gray-800/50 border-gray-600/50":"bg-emerald-50/80 border-emerald-200/60"} border rounded-xl p-2 transition-all hover:shadow-sm backdrop-blur-sm`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx("div",{className:`text-xs font-medium ${s==="night"?"text-emerald-400":"text-emerald-600"} mb-1`,children:"Ukupna zarada"}),e.jsx("div",{className:`font-bold ${s==="night"?"text-emerald-300":"text-emerald-900"} text-sm`,children:(t==null?void 0:t.ukupnaZarada)||"-"})]})]})}),(t==null?void 0:t.role)==="admin"&&o&&e.jsxs(m.div,{className:`${s==="night"?"bg-gray-800/50 border-gray-600/50":"bg-blue-50/80 border-blue-200/60"} border rounded-xl p-2 mb-3 backdrop-blur-sm`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:`${s==="night"?"text-gray-300":"text-gray-600"} flex items-center gap-1`,children:[e.jsx(xa,{className:`w-3 h-3 ${s==="night"?"text-blue-400":"text-blue-500"}`}),"Status:"]}),e.jsx("span",{className:`font-medium ${w().color}`,children:w().text})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs mt-1",children:[e.jsxs("span",{className:`${s==="night"?"text-gray-400":"text-gray-500"} flex items-center gap-1`,children:[e.jsx(Pt,{className:"w-3 h-3"}),"Vrijeme:"]}),e.jsx("span",{className:`${s==="night"?"text-gray-300":"text-gray-700"} font-mono`,children:N()})]})]}),e.jsxs("div",{className:"space-y-1",children:[(t==null?void 0:t.role)==="admin"?e.jsx(m.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Re,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${s==="night"?"hover:bg-gray-700/50 text-blue-400":"hover:bg-blue-50 text-blue-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>O(()=>D("/admin")),children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Admin Panel"]})}):e.jsx(m.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Re,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${s==="night"?"hover:bg-gray-700/50 text-emerald-400":"hover:bg-green-50 text-emerald-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>O(()=>D("/payroll-list")),children:[e.jsx(ha,{className:"w-4 h-4 mr-2"}),"Platne liste"]})}),e.jsx(m.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Re,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${s==="night"?"hover:bg-gray-700/50 text-amber-400":"hover:bg-amber-50 text-amber-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>{typeof a=="function"&&a()},children:[e.jsx(Et,{className:"w-4 h-4 mr-2"}),"Promijeni ≈°ifru"]})}),e.jsx(m.div,{whileHover:{x:2},whileTap:{scale:.98},children:e.jsxs(Re,{variant:"ghost",size:"sm",className:`w-full justify-start text-left ${s==="night"?"hover:bg-gray-700/50 text-rose-400":"hover:bg-rose-50 text-rose-600"} rounded-xl transition-all duration-300 py-2 text-sm`,onClick:()=>{u(!1),setTimeout(()=>{try{typeof r=="function"&&r();try{localStorage.removeItem("bde_current_user")}catch{}try{localStorage.removeItem("bde_login_time")}catch{}window.dispatchEvent(new CustomEvent("bde:logout",{detail:{source:"UserMenu"}})),D("/")}catch(f){console.error("Logout failed",f)}},120)},children:[e.jsx(fa,{className:"w-4 h-4 mr-2"}),"Odjava"]})})]})]})})]})}const ta=l.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("rounded-xl border bg-card text-card-foreground shadow",t),...a}));ta.displayName="Card";const $r=l.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("flex flex-col space-y-1.5 p-6",t),...a}));$r.displayName="CardHeader";const Dr=l.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("font-semibold leading-none tracking-tight",t),...a}));Dr.displayName="CardTitle";const Cr=l.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("text-sm text-muted-foreground",t),...a}));Cr.displayName="CardDescription";const Ir=l.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("p-6 pt-0",t),...a}));Ir.displayName="CardContent";const _r=l.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:Ne("flex items-center p-6 pt-0",t),...a}));_r.displayName="CardFooter";function Mr({isOpen:t,onClose:a,onChangePassword:r,loading:o}){const[s,g]=l.useState(""),[p,u]=l.useState(""),[n,I]=l.useState(""),[E,D]=l.useState(null),[Y,$]=l.useState(!1),[w,N]=l.useState(!1),[P,O]=l.useState("default"),f={default:{background:"from-slate-50 via-blue-50 to-indigo-100",accent:"from-blue-500 to-purple-500",particles:["bg-blue-400/20","bg-purple-400/20","bg-indigo-400/20"]},sunrise:{background:"from-orange-50 via-pink-50 to-red-100",accent:"from-orange-500 to-pink-500",particles:["bg-orange-400/20","bg-pink-400/20","bg-red-400/20"]},afternoon:{background:"from-amber-50 via-yellow-50 to-orange-100",accent:"from-amber-500 to-orange-500",particles:["bg-amber-400/20","bg-yellow-400/20","bg-orange-400/20"]},evening:{background:"from-purple-50 via-indigo-50 to-blue-100",accent:"from-purple-500 to-indigo-500",particles:["bg-purple-400/20","bg-indigo-400/20","bg-blue-400/20"]},night:{background:"from-gray-800 via-gray-900 to-black",accent:"from-blue-400 to-purple-400",particles:["bg-blue-300/30","bg-purple-300/30","bg-indigo-300/30"]}};l.useEffect(()=>{const F=()=>{const c=new Date().getHours();c>=5&&c<8?O("sunrise"):c>=8&&c<12?O("default"):c>=12&&c<17?O("afternoon"):c>=17&&c<20?O("evening"):O("night")};F();const K=setInterval(F,6e4);return()=>clearInterval(K)},[]);const H=async F=>{if(F.preventDefault(),!s.trim()){D("Molimo unesite staru lozinku");return}if(!p.trim()){D("Molimo unesite novu lozinku");return}if(p.length<4){D("Nova lozinka mora imati najmanje 4 karaktera");return}if(p!==n){D("Nove lozinke se ne poklapaju");return}try{D(null),N(!0),await r(s,p),$(!0),setTimeout(()=>{_()},2e3)}catch(K){D(K.message||"Gre≈°ka pri promjeni lozinke")}finally{N(!1)}},_=()=>{g(""),u(""),I(""),D(null),$(!1),a()};if(!t)return null;const L=P==="night";return e.jsx(dt,{children:t&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:_,children:e.jsxs(m.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:`${L?"bg-gray-800":"bg-white"} rounded-2xl shadow-2xl max-w-md w-full overflow-hidden`,onClick:F=>F.stopPropagation(),children:[e.jsxs("div",{className:`bg-gradient-to-r ${f[P].accent} p-6 text-white relative`,children:[e.jsx("button",{onClick:_,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(ba,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(Et,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Promjena lozinke"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Unesite staru i novu lozinku"})]})]})]}),e.jsx("div",{className:"p-6",children:Y?e.jsxs(m.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(ya,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:`text-xl font-bold ${L?"text-white":"text-gray-800"} mb-2`,children:"Lozinka promijenjena!"}),e.jsx("p",{className:`${L?"text-gray-400":"text-gray-600"}`,children:"Va≈°a lozinka je uspje≈°no a≈æurirana."})]}):e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${L?"text-gray-300":"text-gray-700"} mb-2`,children:"Stara lozinka"}),e.jsx("input",{type:"password",value:s,onChange:F=>g(F.target.value),placeholder:"Unesite staru lozinku",disabled:w,autoFocus:!0,className:`w-full px-4 py-3 border ${L?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${L?"text-gray-300":"text-gray-700"} mb-2`,children:"Nova lozinka"}),e.jsx("input",{type:"password",value:p,onChange:F=>u(F.target.value),placeholder:"Unesite novu lozinku",disabled:w,className:`w-full px-4 py-3 border ${L?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${L?"text-gray-300":"text-gray-700"} mb-2`,children:"Potvrdite novu lozinku"}),e.jsx("input",{type:"password",value:n,onChange:F=>I(F.target.value),placeholder:"Ponovite novu lozinku",disabled:w,className:`w-full px-4 py-3 border ${L?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),E&&e.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-start gap-2 p-4 ${L?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200"} border rounded-xl`,children:[e.jsx(ut,{className:`w-5 h-5 ${L?"text-red-400":"text-red-600"} flex-shrink-0 mt-0.5`}),e.jsx("p",{className:`text-sm ${L?"text-red-300":"text-red-800"}`,children:E})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:_,disabled:w,className:`flex-1 px-4 py-3 border ${L?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-xl disabled:opacity-50 font-medium transition-all`,children:"Otka≈æi"}),e.jsx("button",{type:"submit",disabled:w||!s.trim()||!p.trim()||!n.trim(),className:`flex-1 px-4 py-3 bg-gradient-to-r ${f[P].accent} text-white rounded-xl hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-all shadow-lg`,children:w?"Mijenjam...":"Promijeni lozinku"})]})]})})]})})})}function zr(){const[t,a]=l.useState(!1),[r,o]=l.useState(null),[s,g]=l.useState(new Date),[p,u]=l.useState([{id:1,message:"Novi podatci sinhronizovani",time:"5 min",read:!1},{id:2,message:"GitHub scraper zavr≈°en",time:"1h",read:!1},{id:3,message:"Payroll a≈æuriran",time:"2h",read:!0}]),[n,I]=l.useState(!1),[E,D]=l.useState("-"),[Y,$]=l.useState("-"),[w,N]=l.useState([]),[P,O]=l.useState([]),[f,H]=l.useState(0),[_,L]=l.useState("night"),[F,K]=l.useState({}),c=He(),{currentUser:y,logout:J,changePassword:te}=Ht();y!=null&&y.name||y!=null&&y.ime;const V={default:{background:"from-slate-50 via-blue-50 to-indigo-100",accent:"from-blue-500 to-purple-500",particles:["bg-blue-400/20","bg-purple-400/20","bg-indigo-400/20"]},sunrise:{background:"from-orange-50 via-pink-50 to-red-100",accent:"from-orange-500 to-pink-500",particles:["bg-orange-400/20","bg-pink-400/20","bg-red-400/20"]},afternoon:{background:"from-amber-50 via-yellow-50 to-orange-100",accent:"from-amber-500 to-orange-500",particles:["bg-amber-400/20","bg-yellow-400/20","bg-orange-400/20"]},evening:{background:"from-purple-50 via-indigo-50 to-blue-100",accent:"from-purple-500 to-indigo-500",particles:["bg-purple-400/20","bg-indigo-400/20","bg-blue-400/20"]},night:{background:"from-slate-900 via-blue-900 to-indigo-900",accent:"from-blue-400 to-cyan-400",particles:["bg-blue-400/20","bg-cyan-400/20","bg-indigo-400/20"]}},q=()=>e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:P.map(h=>e.jsx(m.div,{className:`absolute rounded-full ${h.color}`,style:{left:`${h.x}%`,top:`${h.y}%`,width:`${h.size}px`,height:`${h.size}px`},animate:{y:[0,-100,0],x:[0,Math.sin(h.id*.5)*50,0],opacity:[.2,.8,.2],scale:[1,1.5,1]},transition:{duration:h.duration,delay:h.delay,repeat:1/0,ease:"easeInOut"}},h.id))}),T=(h,M)=>{X(h,M)},G=h=>{U(h)},X=(h,M)=>{const i=h.currentTarget.getBoundingClientRect(),v=h.clientX-i.left,S=h.clientY-i.top,x=i.width/2,C=i.height/2,A=(S-C)/10,B=(x-v)/10;K(Z=>({...Z,[M]:{transform:`perspective(1000px) rotateX(${A}deg) rotateY(${B}deg) scale3d(1.02, 1.02, 1.02)`,transition:"transform 0.1s ease-out"}}))},U=h=>{K(M=>({...M,[h]:{transform:"perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)",transition:"transform 0.3s ease-out"}}))},b=async()=>{if(y){try{const{data:h,error:M}=await ie.from("payroll_amounts").select("neto").eq("driver_name",y.name.toLowerCase());if(M)throw M;const d=h.reduce((i,v)=>i+(v.neto||0),0);D(`${d.toFixed(2)} ‚Ç¨`)}catch{D("Gre≈°ka")}try{const{data:h,error:M}=await ie.from("payroll_amounts").select("neto, file_name, created_at").eq("driver_name",y.name.toLowerCase()).order("file_name",{ascending:!1}).limit(1);if(M)throw M;h&&h.length>0&&typeof h[0].neto=="number"?$(`${Number(h[0].neto).toFixed(2)} ‚Ç¨`):$("-")}catch{$("Gre≈°ka")}}};l.useEffect(()=>{y&&b()},[y]),p.filter(h=>!h.read).length;const Q=async()=>{try{console.log("üêô Poku≈°avam da dohvatim podatke sa GitHub API...");const h="eldin007b/gls-scraper",M="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",[d,i]=h.split("/"),v=x=>{if(!x)return"Nepoznato";const C=new Date(x);if(isNaN(C.getTime()))return"Nepoznato";const A=C.getDate().toString().padStart(2,"0"),B=(C.getMonth()+1).toString().padStart(2,"0"),Z=C.getHours().toString().padStart(2,"0"),ae=C.getMinutes().toString().padStart(2,"0");return`${A}.${B} ${Z}:${ae}`};let S=await fetch(`https://api.github.com/repos/${d}/${i}/actions/runs?per_page=5`,{headers:{Accept:"application/vnd.github.v3+json",...M&&{Authorization:`token ${M}`}}});if(!S.ok&&S.status===401&&M&&(console.log("üîë Token nevaljan, poku≈°avam bez token-a..."),S=await fetch(`https://api.github.com/repos/${d}/${i}/actions/runs?per_page=5`,{headers:{Accept:"application/vnd.github.v3+json"}})),S.ok){const C=((await S.json()).workflow_runs||[]).filter(A=>{const B=(A.name||"").toLowerCase();return B.includes("gls scraper")||B.includes("scraper")||B.includes("gls")});if(C.length>0){const A=C[0];console.log("‚úÖ Na≈°ao GitHub workflow:",A);const B=A.updated_at||A.run_started_at||A.created_at||new Date().toISOString(),Z=v(B),ae={status:A.conclusion==="success"||A.conclusion==="completed"?"completed":A.conclusion||"unknown",mode:"Automatski (GitHub)",timestamp:B,formattedTimestamp:Z,name:A.name,repoUsed:`${d}/${i}`,raw:A};console.log("üîÑ GitHub API podaci formatovani:",ae),o(ae);try{localStorage.setItem("github_scraper_history",JSON.stringify([ae]))}catch(be){console.warn("‚ö†Ô∏è Neuspjelo pisanje u localStorage:",be)}return!0}}else console.warn("‚ö†Ô∏è GitHub API vratio nenormalan odgovor:",S.status,S.statusText)}catch(h){console.error("üí• Gre≈°ka pri GitHub API pozivu:",h)}return!1};l.useEffect(()=>{const h=async()=>{try{if(console.log("üîç Poku≈°avam da uƒçitam podatke o sinhronizaciji..."),console.log("üóùÔ∏è Svi kljuƒçevi u localStorage:",Object.keys(localStorage)),await Q()){console.log("ÔøΩ GitHub fetch successful, reloading saved history...");const S=localStorage.getItem("github_scraper_history");if(S){const x=JSON.parse(S);if(x.length>0){o(x[0]);return}}}const v=localStorage.getItem("github_scraper_history");if(console.log("üì¶ Raw podatci iz localStorage:",v),v){const S=JSON.parse(v);if(console.log("üìã Parsovana historija:",S),console.log("üìè Broj elemenata u historiji:",S.length),S.length>0){const x=S[0];console.log("‚è∞ Poslednja sinhronizacija:",x),o(x)}else console.log("‚ö†Ô∏è Historija je prazna"),o(null)}else{console.log("‚ùå Nema podataka u localStorage za github_scraper_history");const S=localStorage.getItem("autoSyncState");if(S)try{const x=JSON.parse(S);console.log("üîÑ Koristim autoSyncState kao fallback:",x);const C={status:"completed",mode:"Automatski",timestamp:x.lastSync?new Date(x.lastSync).toLocaleString("bs-BA"):"Nepoznato"};console.log("üîÑ Fallback podaci iz autoSync:",C),o(C)}catch(x){console.error("üí• Gre≈°ka u parsiranju autoSyncState:",x),await Q()||o(null)}else console.log("‚ùå Nema ni autoSyncState podataka - poku≈°avam GitHub API"),await Q()||o(null)}}catch(i){console.error("üí• Gre≈°ka prilikom uƒçitavanja podataka o sinhronizaciji:",i),o(null)}};(async()=>{await h()})();const d=setInterval(()=>{h().catch(i=>{console.error("üí• Gre≈°ka u interval sync:",i)})},3e4);return()=>clearInterval(d)},[]),l.useEffect(()=>{const h=setInterval(()=>{g(new Date)},3e4);return()=>clearInterval(h)},[]),l.useEffect(()=>{(()=>{const M=V[_],d=Array.from({length:40},(i,v)=>({id:v,x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+1,color:M.particles[Math.floor(Math.random()*M.particles.length)],duration:Math.random()*25+15,delay:Math.random()*8}));O(d)})()},[_]),l.useEffect(()=>{L("night")},[]),l.useEffect(()=>{const h=()=>{H(window.scrollY)};return window.addEventListener("scroll",h,{passive:!0}),()=>window.removeEventListener("scroll",h)},[]),l.useEffect(()=>{const h=M=>{n&&!M.target.closest(".notification-container")&&I(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[n]),l.useEffect(()=>{const h=M=>{var d,i,v;try{const S=M.detail;if(console.log("üîî Primljen githubSync:updated event:",S),S){const x={...S,timestamp:S.timestamp&&typeof S.timestamp=="string"&&S.timestamp.indexOf("T")!==-1?S.timestamp:((d=S.raw)==null?void 0:d.updated_at)||((i=S.raw)==null?void 0:i.run_started_at)||((v=S.raw)==null?void 0:v.created_at)||S.timestamp,formattedTimestamp:S.formattedTimestamp||(S.timestamp?(()=>{try{const C=new Date(S.timestamp);if(!isNaN(C.getTime())){const A=C.getDate().toString().padStart(2,"0"),B=(C.getMonth()+1).toString().padStart(2,"0"),Z=C.getHours().toString().padStart(2,"0"),ae=C.getMinutes().toString().padStart(2,"0");return`${A}.${B} ${Z}:${ae}`}}catch{}return S.timestamp})():S.timestamp)};o(x)}}catch(S){console.error("Gre≈°ka u event handleru:",S)}};return window.addEventListener("githubSync:updated",h),()=>window.removeEventListener("githubSync:updated",h)},[]);const re=[{title:"Statistika",desc:"Grafovi i izvje≈°taji",icon:e.jsx(va,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/statistika",gradient:"from-purple-500 to-pink-500",hoverGradient:"from-purple-600 to-pink-600",bgColor:"bg-purple-50",iconColor:"text-purple-600"},{title:"Navigacija",desc:"Mapa i praƒáenje ruta",icon:e.jsx(wa,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/navigacija",gradient:"from-indigo-500 to-blue-500",hoverGradient:"from-indigo-600 to-blue-600",bgColor:"bg-indigo-50",iconColor:"text-indigo-600"},{title:"Dostava",desc:"Pregled po mjesecu",icon:e.jsx(Oe,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/deliveries",gradient:"from-blue-500 to-cyan-500",hoverGradient:"from-blue-600 to-cyan-600",bgColor:"bg-blue-50",iconColor:"text-blue-600"},{title:"Vozaƒçi",desc:"Detaljna statistika po vozaƒçu",icon:e.jsx(Be,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/drivers",gradient:"from-emerald-500 to-teal-500",hoverGradient:"from-emerald-600 to-teal-600",bgColor:"bg-emerald-50",iconColor:"text-emerald-600"},{title:"Extra vo≈ænje",desc:"Posebne ture (Sonderfahrt)",icon:e.jsx(ja,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/extra-rides",gradient:"from-orange-500 to-red-500",hoverGradient:"from-orange-600 to-red-600",bgColor:"bg-orange-50",iconColor:"text-orange-600"},{title:"O aplikaciji",desc:"Informacije i pomoƒá",icon:e.jsx(ka,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/about",gradient:"from-gray-500 to-slate-500",hoverGradient:"from-gray-600 to-slate-600",bgColor:"bg-gray-50",iconColor:"text-gray-600"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`min-h-screen bg-gradient-to-br ${V[_].background} relative transition-all duration-1000`,children:[e.jsx(q,{}),e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx(m.div,{style:{transform:`translateY(${f*.2}px) translateX(${f*.1}px)`},className:`absolute top-20 left-10 w-96 h-96 bg-gradient-to-r ${V[_].accent} rounded-full mix-blend-multiply filter blur-3xl`,animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(m.div,{style:{transform:`translateY(${f*-.15}px) translateX(${f*-.05}px)`},className:"absolute top-40 right-10 w-80 h-80 bg-gradient-to-r from-yellow-400/40 to-pink-400/40 rounded-full mix-blend-multiply filter blur-2xl",animate:{scale:[1.1,1,1.1],opacity:[.4,.6,.4]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2}}),e.jsx(m.div,{style:{transform:`translateY(${f*.25}px) translateX(${f*-.08}px)`},className:"absolute -bottom-8 left-20 w-72 h-72 bg-gradient-to-r from-emerald-400/30 to-blue-400/30 rounded-full mix-blend-multiply filter blur-xl",animate:{scale:[1,1.2,1],opacity:[.25,.45,.25]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:4}})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-start py-8 px-4",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[e.jsx(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8 relative z-[1000]",style:{transform:`translateY(${f*.1}px)`},children:e.jsxs("div",{className:`${_==="night"?"bg-gray-800/20":"bg-white/20"} backdrop-blur-3xl border ${_==="night"?"border-white/10":"border-white/30"} rounded-3xl p-4 md:p-6 shadow-2xl relative`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${V[_].accent.replace("from-","from-").replace("to-","to-")}/10 rounded-3xl`}),e.jsx(m.div,{className:`absolute inset-0 rounded-3xl bg-gradient-to-r ${V[_].accent} p-[1px]`,animate:{opacity:[0,.3,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:`w-full h-full rounded-3xl ${_==="night"?"bg-gray-800/20":"bg-white/20"} backdrop-blur-3xl`})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col lg:hidden gap-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-white/20 backdrop-blur-sm rounded-xl border border-white/30",style:{transform:"scale(1.1)",filter:"drop-shadow(0 8px 32px rgba(0,0,0,0.3))"}}),e.jsx("h1",{className:"relative text-2xl sm:text-3xl md:text-4xl font-black tracking-wider leading-tight text-slate-800 px-4 py-2 md:px-6 md:py-3",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8), 0 0 4px rgba(255,255,255,0.6)",fontWeight:"900",letterSpacing:"0.05em"},children:"B&D Evidencija"})]})})}),e.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-sm rounded-full border border-white/30",style:{filter:"drop-shadow(0 4px 16px rgba(0,0,0,0.2))"}}),e.jsxs("div",{className:"relative flex items-center gap-2 px-3 py-1.5",children:[e.jsx(Ae,{className:"w-3 h-3 text-slate-700"}),e.jsx("span",{className:"text-xs font-semibold text-slate-800",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8)"},children:(()=>{const h=s.getDate().toString().padStart(2,"0"),M=(s.getMonth()+1).toString().padStart(2,"0"),d=s.getFullYear(),i=s.getHours().toString().padStart(2,"0"),v=s.getMinutes().toString().padStart(2,"0");return`${h}.${M}.${d} ${i}:${v}`})()})]})]}),e.jsx(It,{user:{...y,ukupnaZarada:E,zadnjaPlata:Y},onChangePassword:()=>a(!0),onLogout:J,currentTheme:_,themes:V})]})]}),e.jsxs("div",{className:"hidden lg:flex lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-md rounded-2xl border border-white/40",style:{transform:"scale(1.1)",filter:"drop-shadow(0 12px 40px rgba(0,0,0,0.3))"}}),e.jsx("h1",{className:"relative text-3xl md:text-4xl font-black tracking-wide text-slate-800 px-6 py-3",style:{textShadow:"2px 2px 4px rgba(255,255,255,0.8), 0 0 6px rgba(255,255,255,0.6)",fontWeight:"900",letterSpacing:"0.05em"},children:"B&D Evidencija"})]})})}),e.jsx("div",{className:"flex justify-center flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-md rounded-full border border-white/30",style:{filter:"drop-shadow(0 6px 20px rgba(0,0,0,0.25))"}}),e.jsxs("div",{className:"relative flex items-center gap-2 px-4 py-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-slate-700"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8)"},children:(()=>{const h=s.getDate().toString().padStart(2,"0"),M=(s.getMonth()+1).toString().padStart(2,"0"),d=s.getFullYear(),i=s.getHours().toString().padStart(2,"0"),v=s.getMinutes().toString().padStart(2,"0");return`${h}.${M}.${d} ${i}:${v}`})()})]})]})}),e.jsx(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.6},className:"flex items-center gap-3 justify-end flex-shrink-0",children:e.jsx(It,{user:{...y,ukupnaZarada:E,zadnjaPlata:Y},onChangePassword:()=>a(!0),onLogout:J,currentTheme:_,themes:V})})]})]})]})}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:re.map((h,M)=>e.jsx(m.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,delay:.6+M*.1,type:"spring",stiffness:100},whileHover:{y:-12,scale:1.05,rotateX:5,rotateY:5,transition:{duration:.3}},whileTap:{scale:.95},className:"group perspective-1000",style:{transformStyle:"preserve-3d",...F[`card-${M}`]},onMouseEnter:d=>T(d,`card-${M}`),onMouseLeave:()=>G(`card-${M}`),onMouseMove:d=>X(d,`card-${M}`),children:e.jsxs(ta,{className:`cursor-pointer relative overflow-hidden ${_==="night"?"bg-gray-800/30 shadow-inner shadow-gray-900/20":"bg-white/40 shadow-inner shadow-gray-300/20"} backdrop-blur-2xl border-0 transition-all duration-500 rounded-3xl p-4 md:p-8 min-h-[180px] md:h-auto flex flex-col justify-between group-hover:shadow-2xl group-hover:backdrop-blur-3xl`,style:{boxShadow:_==="night"?"12px 12px 24px rgba(0,0,0,0.5), -12px -12px 24px rgba(255,255,255,0.02), inset 2px 2px 6px rgba(255,255,255,0.1)":"12px 12px 24px rgba(0,0,0,0.1), -12px -12px 24px rgba(255,255,255,0.8), inset 2px 2px 6px rgba(255,255,255,0.5)",transformStyle:"preserve-3d"},onClick:()=>c(h.path),children:[e.jsx(m.div,{className:`absolute inset-0 bg-gradient-to-br ${h.gradient} rounded-3xl`,initial:{opacity:0},whileHover:{opacity:.15,scale:1.1},transition:{duration:.4}}),e.jsxs(m.div,{className:"absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-500",initial:{opacity:0},whileHover:{opacity:.3},children:[e.jsx("div",{className:"absolute top-2 left-2 w-1 h-1 bg-white rounded-full animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"absolute top-4 right-3 w-0.5 h-0.5 bg-white rounded-full animate-pulse",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"absolute bottom-3 left-4 w-1.5 h-1.5 bg-white rounded-full animate-pulse",style:{animationDelay:"400ms"}}),e.jsx("div",{className:"absolute bottom-2 right-2 w-0.5 h-0.5 bg-white rounded-full animate-pulse",style:{animationDelay:"600ms"}})]}),e.jsxs(m.div,{className:`w-12 h-12 md:w-16 md:h-16 ${h.bgColor} rounded-2xl flex items-center justify-center mb-2 md:mb-6 relative z-10`,style:{boxShadow:_==="night"?"6px 6px 12px rgba(0,0,0,0.6), -6px -6px 12px rgba(255,255,255,0.05), inset 2px 2px 4px rgba(255,255,255,0.1)":"6px 6px 12px rgba(0,0,0,0.15), -6px -6px 12px rgba(255,255,255,0.9), inset 2px 2px 4px rgba(255,255,255,0.7)"},whileHover:{scale:1.15,rotateY:15,rotateX:15,transition:{duration:.3}},initial:{rotateY:0,rotateX:0},children:[e.jsx(m.div,{className:h.iconColor,whileHover:{rotate:[0,5,-5,0],scale:1.1},transition:{rotate:{duration:.5,ease:"easeInOut"},scale:{duration:.2}},children:h.icon}),e.jsx(m.div,{className:"absolute inset-0 rounded-2xl bg-gradient-to-tr from-white/20 to-transparent opacity-0",whileHover:{opacity:1,backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:.6}})]}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[e.jsx(m.h3,{className:`text-sm md:text-xl font-bold mb-1 md:mb-2 ${_==="night"?"text-gray-200 group-hover:text-white":"text-gray-800 group-hover:text-gray-900"} transition-colors leading-tight`,whileHover:{scale:1.05,x:2},transition:{duration:.2},children:h.title}),e.jsx(m.p,{className:`text-xs md:text-base ${_==="night"?"text-gray-400 group-hover:text-gray-300":"text-gray-600 group-hover:text-gray-700"} transition-colors leading-relaxed mt-2`,initial:{opacity:.8},whileHover:{opacity:1,y:-1},transition:{duration:.2},children:h.desc})]}),e.jsx(m.div,{className:"absolute top-4 md:top-6 right-4 md:right-6 z-20",initial:{opacity:0,x:-10,rotate:-45},whileHover:{opacity:1,x:0,rotate:0,scale:1.2,transition:{duration:.3}},children:e.jsx(m.div,{animate:{y:[0,-2,0],rotate:[0,5,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(Qe,{className:`w-4 h-4 md:w-5 md:h-5 ${_==="night"?"text-gray-300":"text-gray-500"}`})})}),e.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${h.gradient} transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left`})]})},M))}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.2},className:"mt-16 text-center relative z-10",children:e.jsxs(m.div,{className:`${_==="night"?"bg-gray-800/30":"bg-white/30"} backdrop-blur-xl rounded-2xl p-6 border ${_==="night"?"border-white/10":"border-gray-200/30"} relative overflow-hidden`,style:{boxShadow:_==="night"?"8px 8px 16px rgba(0,0,0,0.4), -8px -8px 16px rgba(255,255,255,0.02)":"8px 8px 16px rgba(0,0,0,0.08), -8px -8px 16px rgba(255,255,255,0.8)"},whileHover:{scale:1.02,transition:{duration:.3}},children:[e.jsx(m.div,{className:`absolute inset-0 bg-gradient-to-r ${V[_].accent} opacity-5`,animate:{backgroundPosition:["0% 0%","100% 100%","0% 0%"]},transition:{duration:8,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}}),e.jsxs(m.p,{className:`text-sm ${_==="night"?"text-gray-300":"text-gray-600"} relative z-10`,initial:{opacity:.8},whileHover:{opacity:1},children:["¬© ",new Date().getFullYear()," B&D Evidencija. Sva prava zadr≈æana.",e.jsx(m.span,{className:"inline-block ml-2",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"‚ú®"})]})]})})]})})]}),e.jsx(Mr,{isOpen:t,onClose:()=>a(!1),onChangePassword:te,loading:!1})]})}const Wr=Object.freeze(Object.defineProperty({__proto__:null,default:zr},Symbol.toStringTag,{value:"Module"})),Pr=new Date().getFullYear(),_t=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function Er(){const t=He(),{isAdmin:a}=At(),[r,o]=l.useState(Pr),[s,g]=l.useState(new Date().getMonth()),[p,u]=l.useState(new Date),[n,I]=l.useState("night"),E={default:{background:"from-blue-50 via-white to-purple-50"},sunrise:{background:"from-orange-100 via-pink-100 to-yellow-100"},afternoon:{background:"from-blue-100 via-cyan-100 to-sky-100"},evening:{background:"from-purple-100 via-pink-100 to-indigo-100"},night:{background:"from-slate-900 via-blue-900 to-indigo-900"}};l.useEffect(()=>{I("night")},[]),l.useEffect(()=>{const c=setInterval(()=>u(new Date),6e4);return()=>clearInterval(c)},[]);const{data:D=[],isLoading:Y}=Lt(),{data:$=[],isLoading:w}=Ea(r,s),{data:N=[]}=Gt(r),P=w||Y,O=l.useMemo(()=>{const c={};return $.forEach(y=>{c[y.date]||(c[y.date]={}),c[y.date][y.driver]=y.produktivitaet_stops||0}),Object.keys(c).forEach(y=>{if((y==="2025-11-17"||y==="2025-11-25")&&c[y][8640]){const J=c[y][8640];c[y][8610]?c[y][8610]+=J:c[y][8610]=J,delete c[y][8640]}}),c},[$]),f=l.useMemo(()=>({"2025-11-07-8620":!0,"2025-11-10-8620":!0,"2025-11-17-8640":!0,"2025-11-25-8640":!0,"2025-12-10-8620":!0,"2025-12-11-8620":!0,"2025-12-12-8620":!0}),[]),H=Ft(r,s,N.map(c=>c.date)),_=l.useMemo(()=>{const c=H.length,y=new Set;$.forEach(i=>{i.produktivitaet_stops>0&&y.add(i.date)});const J=y.size,te=new Date,V=te.getFullYear(),q=te.getMonth();let T=0;if(r===V&&s===q){const i=te.getDate();T=H.filter(v=>new Date(v).getDate()<=i).length}else r<V||r===V&&s<q?T=c:T=0;const G=$.reduce((i,v)=>i+(v.produktivitaet_stops||0),0),X=D.filter(i=>i.aktivan).reduce((i,v)=>i+(v.target_per_day||0)*c,0),U=D.filter(i=>i.aktivan).reduce((i,v)=>i+(v.target_per_day||0)*J,0),b=G-X,Q=H.filter(i=>{const v=fe(i,"yyyy-MM-dd"),S=O[v]||{};return D.filter(C=>C.aktivan).reduce((C,A)=>C+(S[A.tura]||0),0)>0}),re=Q.reduce((i,v)=>{const S=fe(v,"yyyy-MM-dd"),x=O[S]||{};return i+D.filter(C=>C.aktivan).reduce((C,A)=>C+(x[A.tura]||0),0)},0),h=D.filter(i=>i.aktivan).reduce((i,v)=>i+(v.target_per_day||0)*Q.length,0),M=D.filter(i=>i.aktivan).reduce((i,v)=>i+(v.target_per_day||0)*c,0),d=re-M;return{totalWorkdays:c,passedWorkdays:T,drivers:D.filter(i=>i.aktivan).length,remainingDays:Math.max(0,c-J),totalStops:G,monthlyTarget:X,targetForWorkedDays:U,difference:b,totalAllWorked:re,targetForWorkedDaysBD:h,bilansBD:d}},[H,$,D,r,s,O]),L=()=>`bg-gradient-to-br ${E[n].background}`,F=()=>{s===0?(g(11),o(r-1)):g(s-1)},K=()=>{s===11?(g(0),o(r+1)):g(s+1)};return e.jsxs("div",{className:`min-h-screen ${L()} ${n==="night"?"text-white":"text-gray-800"}`,children:[e.jsx(m.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/50"} backdrop-blur-xl border-b sticky top-0 z-50`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:`p-2 rounded-xl ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(gt,{className:"w-6 h-6"})}),e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:"Pregled Dostava"})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`mb-6 p-4 md:p-6 rounded-2xl ${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:F,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Ke,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-center",children:e.jsxs("h2",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:[_t[s]," ",r]})}),e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:K,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ae,{className:`w-5 h-5 ${n==="night"?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Radnih dana"})]}),e.jsxs("p",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:[_.passedWorkdays,"/",_.totalWorkdays]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Be,{className:`w-5 h-5 ${n==="night"?"text-green-400":"text-green-600"}`}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Vozaƒça"})]}),e.jsx("p",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:_.drivers})]}),e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xe,{className:`w-5 h-5 ${n==="night"?"text-purple-400":"text-purple-600"}`}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Ukupno"})]}),e.jsx("p",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:_.totalAllWorked})]}),e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.bilansBD>=0?e.jsx(Qe,{className:"w-5 h-5",style:{color:n==="night"?"#4ade80":"#15803d"}}):e.jsx(Tt,{className:"w-5 h-5",style:{color:n==="night"?"#fb7185":"#dc2626"}}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Bilans"})]}),e.jsxs("p",{className:"text-2xl font-black",style:{color:_.bilansBD>=0?n==="night"?"#4ade80":"#15803d":n==="night"?"#fb7185":"#dc2626",textShadow:n==="night"?"0 0 3px rgba(0,0,0,0.3)":"none"},children:[_.bilansBD>0?"+":"",_.bilansBD]})]})]}),a&&e.jsx("div",{className:"mt-4 text-xs opacity-70",children:e.jsxs("div",{children:["Debug: godina=",r,", monthIndex=",s,", mjesec=",_t[s],", deliveries=",$.length]})})]}),P?e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:`p-8 rounded-2xl ${n==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-xl text-center`,children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:n==="night"?"text-gray-400":"text-gray-600",children:"Uƒçitavanje..."})]}):H.length===0?e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:`p-8 rounded-2xl ${n==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-xl text-center`,children:[e.jsx(ut,{className:`w-16 h-16 mx-auto mb-4 ${n==="night"?"text-gray-600":"text-gray-400"}`}),e.jsx("p",{className:n==="night"?"text-gray-400":"text-gray-600",children:"Nema radnih dana"})]}):e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`rounded-2xl ${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/70 border-gray-200/30"} border backdrop-blur-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",style:{fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${n==="night"?"bg-gray-700/50":"bg-gray-100/80"}`,children:[e.jsx("th",{className:"px-1 py-2 text-left text-xs font-bold w-16",style:{color:n==="night"?"#fff":"#1f2937"},children:"Datum"}),D.filter(c=>c.aktivan).map(c=>e.jsxs("th",{className:"px-1 py-2 text-center text-xs font-bold",style:{color:n==="night"?"#fff":"#1f2937"},children:[e.jsx("div",{className:"font-semibold",children:c.ime}),e.jsx("div",{className:"text-[10px] opacity-70",children:c.tura})]},c.tura)),e.jsxs("th",{className:"px-1 py-2 text-center text-xs font-bold w-16",style:{color:n==="night"?"#fff":"#1f2937"},children:[e.jsx("div",{className:"font-semibold",children:"Ukupno"}),e.jsx("div",{className:"text-[10px] opacity-70",children:"B&D"})]})]})}),e.jsx("tbody",{children:Object.keys(O).sort((c,y)=>new Date(c)-new Date(y)).map((c,y)=>{const J=O[c]||{},te=D.filter(q=>q.aktivan).reduce((q,T)=>q+(J[T.tura]||0),0),V=N.some(q=>q.date===c);return e.jsxs(m.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:y*.02},className:`border-t ${n==="night"?"border-gray-700/50":"border-gray-200/50"} ${V?n==="night"?"bg-red-900/20":"bg-red-50/70":""}`,children:[e.jsx("td",{className:"px-1 py-1.5 text-xs font-bold",style:{color:n==="night"?"#e5e7eb":"#374151"},children:fe(new Date(c),"dd.MM.")}),D.filter(q=>q.aktivan).map(q=>{const T=J[q.tura],G=q.target_per_day||0,X=T>=G,U=f[`${c}-${q.tura}`],b=n==="night"?"#4ade80":"#15803d",Q=n==="night"?"#fb7185":"#dc2626";return e.jsx("td",{className:"px-1 py-1.5 text-center text-xs font-extrabold",style:{color:U?n==="night"?"#f59e0b":"#d97706":T?X?b:Q:"#9ca3af",fontWeight:"900",textShadow:(T||U)&&n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:U?"Urlaub":T||"‚Äì"},q.tura)}),e.jsx("td",{className:"px-1 py-1.5 text-center text-xs font-extrabold",style:{color:te>=300?n==="night"?"#4ade80":"#15803d":te>0?n==="night"?"#fb7185":"#dc2626":"#9ca3af",fontWeight:"900",textShadow:te>0&&n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:te||"‚Äì"})]},c)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:`border-t-2 ${n==="night"?"border-gray-600 bg-gray-700/70":"border-gray-400 bg-gray-200/80"}`,children:[e.jsx("td",{className:"px-1 py-2 text-xs font-extrabold",style:{color:n==="night"?"#fff":"#1f2937"},children:"Ukupno"}),D.filter(c=>c.aktivan).map(c=>{const y=H.filter(Q=>{const re=fe(Q,"yyyy-MM-dd");return(O[re]||{})[c.tura]>0}),J=y.reduce((Q,re)=>{const h=fe(re,"yyyy-MM-dd"),M=O[h]||{};return Q+(M[c.tura]||0)},0),te=y.length,V=(c.target_per_day||0)*te,q=(c.target_per_day||0)*H.length,T=J-q,G=n==="night"?"#4ade80":"#15803d",X=n==="night"?"#fb7185":"#dc2626",U=J>=V?G:X,b=T>=0?G:X;return e.jsxs("td",{className:"px-1 py-2 text-center",children:[e.jsx("div",{className:"text-xs font-extrabold",style:{color:U,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:J}),e.jsxs("div",{className:"text-[10px] font-black",style:{color:b,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:["(",T>0?"+":"",T,")"]})]},c.tura)}),e.jsx("td",{className:"px-1 py-2 text-center",children:(()=>{const c=H.filter(U=>{const b=fe(U,"yyyy-MM-dd"),Q=O[b]||{};return D.filter(h=>h.aktivan).reduce((h,M)=>h+(Q[M.tura]||0),0)>0}),y=c.reduce((U,b)=>{const Q=fe(b,"yyyy-MM-dd"),re=O[Q]||{};return U+D.filter(h=>h.aktivan).reduce((h,M)=>h+(re[M.tura]||0),0)},0),J=D.filter(U=>U.aktivan).reduce((U,b)=>U+(b.target_per_day||0)*c.length,0),te=D.filter(U=>U.aktivan).reduce((U,b)=>U+(b.target_per_day||0)*H.length,0),V=y-te,q=n==="night"?"#4ade80":"#15803d",T=n==="night"?"#fb7185":"#dc2626",G=y>=J?q:T,X=V>=0?q:T;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs font-extrabold",style:{color:G,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:y}),e.jsxs("div",{className:"text-[10px] font-black",style:{color:X,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:["(",V>0?"+":"",V,")"]})]})})()})]})})]})})})]})]})}const Yr=Object.freeze(Object.defineProperty({__proto__:null,default:Er},Symbol.toStringTag,{value:"Module"})),Tr=new Date().getFullYear(),Mt=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],ot={"2025-11-07-8620":!0,"2025-11-10-8620":!0,"2025-11-17-8640":!0,"2025-11-25-8640":!0};function Rr(){var h,M;const t=He(),[a,r]=l.useState(Tr),[o,s]=l.useState(new Date().getMonth()),[g,p]=l.useState(0),[u,n]=l.useState("night"),[I,E]=l.useState(new Date),D={default:{background:"from-blue-50 via-white to-purple-50"},sunrise:{background:"from-orange-100 via-pink-100 to-yellow-100"},afternoon:{background:"from-blue-100 via-cyan-100 to-sky-100"},evening:{background:"from-purple-100 via-pink-100 to-indigo-100"},night:{background:"from-slate-900 via-blue-900 to-indigo-900"}},Y=()=>`bg-gradient-to-br ${(D[u]||D.night).background}`;l.useEffect(()=>{n("night")},[]),l.useEffect(()=>{const d=setInterval(()=>E(new Date),6e4);return()=>clearInterval(d)},[]);const[$,w]=l.useState(!0);l.useEffect(()=>{const d=setInterval(()=>{w(i=>!i)},400);return()=>clearInterval(d)},[]);const{driverName:N}=At(),{data:P=[],isLoading:O}=Lt(),{data:f=[]}=Gt(a),H=()=>{o===0?(s(11),r(a-1)):s(o-1)},_=()=>{o===11?(s(0),r(a+1)):s(o+1)},L=()=>{p(d=>d===0?P.length-1:d-1)},F=()=>{p(d=>d===P.length-1?0:d+1)};l.useEffect(()=>{if(P.length>0){const d=N?P.findIndex(i=>i.ime===N):P.findIndex(i=>i.aktivan);d>=0&&p(d)}},[P,N]);const K=((h=P[g])==null?void 0:h.ime)||"",c=((M=P[g])==null?void 0:M.tura)||"",y=P[g],{data:J=[],isLoading:te}=Ta(y==null?void 0:y.tura,a,o,{enabled:!!y}),V=te||O,q=Ft(a,o,f.map(d=>d.date)),T=l.useMemo(()=>{var S;if(!J.length||!y)return[];const d=x=>{if(!x)return 0;const C=x.toString().replace("%","").replace(",",".").trim();return parseFloat(C)||0},i={};J.forEach(x=>{const C=new Date(x.date),A=C.getMonth();if(C.getFullYear()!==a||A!==o)return;const Z=x.date;i[Z]||(i[Z]={date:Z,stops:0,packages:0,pickupPackages:0,complaints:0,totalTime:0,realPercentage:d(x.zustellung_proc),undelivered:parseInt(x.zustellung_nedostavljeno)||0,pickupPercentage:d(x.pickup_proc),pickupUndelivered:parseInt(x.pickup_nedostavljeno)||0,firstComplaints:parseInt(x.probleme_prva)||0,secondComplaints:parseInt(x.probleme_druga)||0,stopsPerHourRaw:x.produktivitaet_stops_pro_std||"0",isUrlaubDay:!1}),i[Z].stops+=x.produktivitaet_stops||0,i[Z].packages+=x.zustellung_paketi||0,i[Z].pickupPackages+=parseInt(x.pickup_paketi)||0,i[Z].complaints+=parseInt(x.probleme_druga)||0;const be=(x.produktivitaet_dauer||"0:00").split(":"),Se=(parseInt(be[0])||0)*60+(parseInt(be[1])||0);i[Z].totalTime+=Se});const v=(S=y.tura)==null?void 0:S.toString();return v==="8610"&&Object.keys(ot).forEach(x=>{if(!ot[x])return;const[C,A]=x.split("-"),B=i[C];B&&(A==="8620"||A==="8640")&&(B.isUrlaubDay=!0)}),(v==="8620"||v==="8640")&&Object.keys(i).forEach(x=>{const C=`${x}-${v}`;ot[C]&&(i[x].isUrlaubDay=!0,i[x].stops=0,i[x].packages=0,i[x].pickupPackages=0,i[x].complaints=0,i[x].totalTime=0)}),Object.values(i).map(x=>{const C=x.realPercentage>0?x.realPercentage:x.stops>0?x.packages/x.stops*100:0;return{...x,percentage:C,stopsPerHour:x.totalTime>0?x.stops/(x.totalTime/60):0}}).sort((x,C)=>new Date(x.date)-new Date(C.date))},[J,a,o,y]),G=l.useMemo(()=>{const d=q.length,i=T.filter(ge=>ge.stops>0).length,v=T.reduce((ge,ye)=>ge+ye.stops,0),S=T.reduce((ge,ye)=>ge+ye.packages,0),x=i>0?v/i:0,C=i>0?S/i:0,A=new Date,B=A.getFullYear(),Z=A.getMonth();let ae=0;if(a===B&&o===Z){const ge=A.getDate();ae=q.filter(ye=>new Date(ye).getDate()<=ge).length}else a<B||a===B&&o<Z?ae=d:ae=0;const Se=((y==null?void 0:y.target_per_day)||0)*d,Fe=v-Se;return{totalWorkdays:d,passedWorkdays:ae,daysWithData:i,avgPackagesPerDay:Math.round(C),avgStopsPerDay:Math.round(x),totalStops:v,totalPackages:S,difference:Fe}},[q,T,y,a,o]),X=d=>d.toLocaleTimeString("bs-BA",{hour:"2-digit",minute:"2-digit",hour12:!1}),U=d=>d.toLocaleDateString("bs-BA",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),b=u==="night"?"#4ade80":"#15803d",Q=u==="night"?"#fb7185":"#dc2626",re="#9ca3af";return e.jsxs("div",{className:`min-h-screen ${Y()} ${u==="night"?"text-white":"text-gray-800"}`,children:[e.jsx(Ma,{}),e.jsx(m.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`${u==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/50"} backdrop-blur-xl border-b sticky top-0 z-50`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:`p-2 rounded-xl ${u==="night"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(gt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:`w-8 h-8 ${u==="night"?"text-blue-400":"text-blue-600"}`}),e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${u==="night"?"text-white":"text-gray-800"}`,children:"Vozaƒçi Statistike"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`mb-6 p-4 md:p-6 rounded-2xl ${u==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:H,className:`p-2 rounded-lg ${u==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:`text-2xl font-bold ${u==="night"?"text-white":"text-gray-800"}`,children:[Mt[o]," ",a]}),e.jsxs("p",{className:`text-sm ${u==="night"?"text-gray-400":"text-gray-600"} mt-1`,children:[X(I)," ‚Ä¢ ",U(I)]})]}),e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:_,className:`p-2 rounded-lg ${u==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6 mb-6",children:[e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:L,className:`p-2 rounded-lg ${u==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:`text-xl font-bold ${u==="night"?"text-white":"text-gray-800"}`,children:K?`${K} (${c})`:"Nema vozaƒça"}),e.jsx("p",{className:`text-sm ${u==="night"?"text-gray-400":"text-gray-600"} mt-1`,children:P.length>0?`${g+1} / ${P.length}`:"0 / 0"})]}),e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:F,className:`p-2 rounded-lg ${u==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:`p-4 rounded-xl ${u==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Ae,{className:`w-6 h-6 ${u==="night"?"text-blue-400":"text-blue-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:`text-2xl font-bold ${u==="night"?"text-white":"text-gray-800"}`,children:[G.passedWorkdays,"/",G.totalWorkdays]}),e.jsx("div",{className:`text-sm ${u==="night"?"text-gray-400":"text-gray-600"}`,children:"Radni dani"})]})]}),e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:`p-4 rounded-xl ${u==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Be,{className:`w-6 h-6 ${u==="night"?"text-green-400":"text-green-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${u==="night"?"text-white":"text-gray-800"}`,children:K?`${K} (${c})`:"‚Äî"}),e.jsx("div",{className:`text-sm ${u==="night"?"text-gray-400":"text-gray-600"}`,children:"Vozaƒç"})]})]}),e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:`p-4 rounded-xl ${u==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Rt,{className:`w-6 h-6 ${u==="night"?"text-purple-400":"text-purple-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${u==="night"?"text-white":"text-gray-800"}`,children:G.totalStops}),e.jsx("div",{className:`text-sm ${u==="night"?"text-gray-400":"text-gray-600"}`,children:"Ukupno stopova"})]})]}),e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:`p-4 rounded-xl ${u==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Qe,{className:`w-6 h-6 ${G.difference>=0?u==="night"?"text-green-400":"text-green-600":u==="night"?"text-red-400":"text-red-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",style:{color:G.difference>=0?b:Q},children:[G.difference>0?"+":"",G.difference]}),e.jsx("div",{className:`text-sm ${u==="night"?"text-gray-400":"text-gray-600"}`,children:"Bilans"})]})]})]})]}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:`rounded-2xl overflow-hidden ${u==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:V?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:`w-8 h-8 border-2 rounded-full animate-spin ${u==="night"?"border-gray-600 border-t-white":"border-gray-300 border-t-blue-600"}`}),e.jsx("p",{className:`text-sm mt-4 ${u==="night"?"text-gray-400":"text-gray-600"}`,children:"Uƒçitavanje..."})]}):T.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Xe,{className:`w-12 h-12 mb-4 ${u==="night"?"text-gray-600":"text-gray-400"}`}),e.jsxs("p",{className:`text-lg font-medium mb-2 ${u==="night"?"text-white":"text-gray-900"}`,children:["Nema podataka za ",Mt[o]," ",a]}),e.jsx("p",{className:`text-sm ${u==="night"?"text-gray-400":"text-gray-600"}`,children:"Odaberite vozaƒça iz liste da vidite statistiku"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-full",children:[e.jsx("thead",{className:`${u==="night"?"bg-gray-700/50 text-gray-300":"bg-gray-50 text-gray-700"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Datum"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stopovi"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Paketi"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Pickup"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Reklamacije"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Vreme (h)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Efikasnost"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stop/h"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[T.map((d,i)=>{const v=new Date(d.date),S=(y==null?void 0:y.target_per_day)||0,x=d.stops>=S,C=d.isUrlaubDay;return e.jsxs(m.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+i*.05},className:`transition-colors ${u==="night"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap font-medium",children:fe(v,"dd.MM.")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap font-semibold",style:{color:C?"#f59e0b":re},children:C?"Urlaub":"Radni dan"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:C?re:x?b:Q,fontWeight:"700"},children:d.stops||(C?"0":"‚Äì")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:d.packages||(C?"0":"‚Äì")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:d.pickupPackages||(C?"0":"‚Äì")}),e.jsxs("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:d.secondComplaints>0?{backgroundColor:$?"#ffffff":"#f44336",color:$?"#f44336":"#ffffff",fontWeight:"900",textAlign:"center",transition:"all 0.3s",outline:$?"2px solid #f44336":"none",outlineOffset:"-2px",borderRadius:"4px"}:{},children:[d.secondComplaints>0&&e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(nt,{className:"w-4 h-4"}),d.secondComplaints]}),d.secondComplaints===0&&"‚Äì"]}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:d.totalTime?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pt,{className:"w-4 h-4"}),`${(d.totalTime/60).toFixed(1)}h`]}):"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:d.percentage>=98?b:Q,fontWeight:"600"},children:d.percentage?`${d.percentage.toFixed(1)}%`:"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:d.stopsPerHour?d.stopsPerHour.toFixed(1):"‚Äì"})]},i)}),e.jsxs(m.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},className:`${u==="night"?"bg-gray-700/70 font-bold":"bg-gray-50 font-bold"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:"Ukupno"})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:"‚Äî"})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:G.difference>=0?b:Q,fontWeight:"900"},children:e.jsxs("strong",{children:[G.totalStops," (",G.difference>0?"+":"",G.difference,")"]})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:G.totalPackages})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:T.reduce((d,i)=>d+(i.pickupPackages||0),0)})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:T.reduce((i,v)=>i+(v.secondComplaints||0),0)>0?{backgroundColor:$?"#ffffff":"#f44336",color:$?"#f44336":"#ffffff",fontWeight:"900",transition:"all 0.3s",borderRadius:"4px",outline:$?"2px solid #f44336":"none",textAlign:"center"}:{color:b,fontWeight:"700"},children:e.jsx("strong",{children:(()=>{const d=T.reduce((i,v)=>i+(v.secondComplaints||0),0);return d>0?e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(nt,{className:"w-4 h-4"}),d]}):d})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const d=T.reduce((i,v)=>i+(v.totalTime||0),0);return d?`${(d/60).toFixed(1)}h`:"‚Äì"})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const d=T.filter(v=>v.percentage&&v.percentage>0),i=d.length>0?d.reduce((v,S)=>v+S.percentage,0)/d.length:0;return i>0?`${i.toFixed(1)}%`:"‚Äì"})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const d=T.filter(v=>v.stopsPerHour&&v.stopsPerHour>0),i=d.length>0?(d.reduce((v,S)=>v+S.stopsPerHour,0)/d.length).toFixed(1):"‚Äì";return i!=="NaN"?i:"‚Äì"})()})})]})]})]})})})]})]})}const Br=Object.freeze(Object.defineProperty({__proto__:null,default:Rr},Symbol.toStringTag,{value:"Module"})),zt=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],Ye=t=>{if(!t)return"";const a=new Date(t),r=a.getDate().toString().padStart(2,"0"),o=(a.getMonth()+1).toString().padStart(2,"0"),s=a.getFullYear();return`${r}.${o}.${s}`},Or=()=>{var J,te,V,q,T,G,X,U,b,Q,re,h,M,d,i,v,S,x,C,A,B,Z,ae,be,Se,Fe,ge,ye,et,xt,ht,ft;const t=He(),{currentUser:a}=Ht(),[r,o]=l.useState("night"),[s,g]=l.useState(null),[p,u]=l.useState([]),[n,I]=l.useState([]),[E,D]=l.useState(!0),[Y,$]=l.useState(!1),[w,N]=l.useState(null),P=l.useMemo(()=>zt[new Date().getMonth()],[]),O=l.useMemo(()=>new Date().getFullYear(),[]);l.useEffect(()=>{o("night")},[]);const f=r==="night",H=l.useCallback(z=>z==="8610"?50:z==="8620"||z==="8630"?85:z==="8640"?80:50,[]);l.useEffect(()=>{(async()=>{try{const{data:ee,error:oe}=await ie.from("drivers").select("*").eq("aktivan",!0).order("ime",{ascending:!0});if(oe)throw oe;if(u(ee||[]),console.log("üöó StatistikaScreen - Loaded drivers:",(ee==null?void 0:ee.length)||0),console.log("üë§ Current user:",a),a&&(a.name||a.ime)&&ee&&ee.length>0){const je=a.name||a.ime;console.log("üîç Looking for driver with name:",je);const ce=ee.find(ne=>ne.ime===je);if(ce)console.log("‚úÖ Found driver by name:",ce.ime),g(ce);else{console.log("üîç Driver not found by name, trying by tura:",a.username||a.tura);const ne=ee.find(tt=>tt.tura===(a.username||a.tura));ne?(console.log("‚úÖ Found driver by tura:",ne.ime),g(ne)):(console.log("‚ùå Driver not found, selecting first driver"),g(ee[0]))}}else ee&&ee.length>0&&(console.log("‚ùå No current user, selecting first driver"),g(ee[0]))}catch(ee){console.error("Gre≈°ka pri uƒçitavanju vozaƒça:",ee),N(ee.message)}finally{D(!1)}})()},[a]);const _=l.useCallback(async z=>{var ee;if(!(!z||!z.tura)){$(!0);try{const oe=new Date,je=new Date().toISOString().slice(0,10),ce=new Date(oe.getFullYear(),oe.getMonth(),1).toISOString().slice(0,10),ne=new Date(oe.getFullYear(),oe.getMonth()+1,0).toISOString().slice(0,10),tt=new Date(oe.getFullYear(),0,1).toISOString().slice(0,10),aa=new Date(oe.getFullYear(),11,31).toISOString().slice(0,10),{data:Pe}=await ie.from("deliveries").select("*").eq("driver",z.tura).eq("deleted",0).order("date",{ascending:!1}).limit(1),Le=(ee=Pe==null?void 0:Pe[0])!=null&&ee.date&&typeof Pe[0].date=="string"?Pe[0].date.slice(0,10):je,[ra,sa,oa]=await Promise.all([ie.from("deliveries").select("*").eq("driver",z.tura).gte("date",`${Le}T00:00:00`).lte("date",`${Le}T23:59:59`).eq("deleted",0),ie.from("deliveries").select("*").eq("driver",z.tura).gte("date",ce).lte("date",ne).eq("deleted",0),ie.from("deliveries").select("*").eq("driver",z.tura).gte("date",tt).lte("date",aa).eq("deleted",0)]),Ge=H(z.tura),at=(Ce,Ie)=>{if(!Ce||Ce.length===0)return{packages:0,diff:Ie==="day"?-Ge:0,complaints:0,date:Ie==="day"?Le:null};let ve=Ce;if(Ie==="month"){const W=new Date,de=W.getFullYear(),ca=W.getMonth();ve=Ce.filter(xe=>{if(!(xe!=null&&xe.date))return!1;const da=typeof xe.date=="string"?xe.date.slice(0,10):xe.date,yt=new Date(da),Ee=xe.zustellung_paketi,ua=Ee!=null&&Ee!==""&&!isNaN(Number(Ee))&&Number(Ee)>0;return yt.getFullYear()===de&&yt.getMonth()===ca&&xe.driver==z.tura&&xe.deleted==0&&ua})}else Ie==="year"?ve=Ce.filter(W=>parseInt((W==null?void 0:W.produktivitaet_stops)||0,10)>0):Ie==="day"&&(ve=Ce.filter(W=>parseInt((W==null?void 0:W.produktivitaet_stops)||0,10)>0));const Ue=ve.reduce((W,de)=>W+(parseInt((de==null?void 0:de.produktivitaet_stops)||0,10)||0),0),bt=ve.reduce((W,de)=>W+(parseInt((de==null?void 0:de.probleme_druga)||0,10)||0),0),ia=(new Set(ve.map(W=>W!=null&&W.date?typeof W.date=="string"?W.date.slice(0,10):new Date(W.date).toISOString().slice(0,10):null).filter(Boolean)).size||0)*Ge,la=ve.length>0?ve.map(W=>W!=null&&W.date?typeof W.date=="string"?W.date.slice(0,10):new Date(W.date).toISOString().slice(0,10):null).filter(Boolean).sort((W,de)=>new Date(de)-new Date(W))[0]:null;return Ie==="day"?{packages:Ue,diff:Ue-Ge,complaints:bt,date:Le}:{packages:Ue,diff:Ue-ia,complaints:bt,date:la}},me=at(ra.data,"day"),$e=at(sa.data,"month"),De=at(oa.data,"year"),na=[{label:`Dostava (${me.date||""})`,value:me.diff,packages:me.packages,complaints:me.complaints,target:Ge,date:me.date,dataDate:me.date},{label:`Reklamacije (${me.date||""})`,value:me.complaints,date:me.date,dataDate:me.date},{label:`Dostava za ${P}`,value:$e.diff,packages:$e.packages,complaints:$e.complaints,dataDate:$e.date},{label:`Reklamacije za ${P}`,value:$e.complaints,dataDate:$e.date},{label:`Dostava za ${O}`,value:De.diff,packages:De.packages,complaints:De.complaints,dataDate:De.date},{label:`Reklamacije za ${O}`,value:De.complaints,dataDate:De.date}];I(na)}catch(oe){console.error("Gre≈°ka pri uƒçitavanju statistika:",oe),N(oe.message),I([])}finally{$(!1)}}},[H,P,O]);l.useEffect(()=>{s&&_(s)},[s,_]);const L=[{title:(J=n[0])!=null&&J.date?Ye(n[0].date):"Danas",period:(te=n[0])!=null&&te.dataDate?`Podaci: ${Ye(n[0].dataDate)}`:((V=n[0])==null?void 0:V.label)||"Danas",delivery:{value:((q=n[0])==null?void 0:q.packages)||0,diff:((T=n[0])==null?void 0:T.value)||0,target:((G=n[0])==null?void 0:G.target)||0,trend:(((X=n[0])==null?void 0:X.value)||0)>0?"up":(((U=n[0])==null?void 0:U.value)||0)<0?"down":"neutral"},complaints:{value:((b=n[1])==null?void 0:b.value)||0,trend:(((Q=n[1])==null?void 0:Q.value)||0)===0?"good":"bad"},icon:Ae},{title:(re=n[2])!=null&&re.dataDate?zt[new Date(n[2].dataDate).getMonth()]:"Ovaj mjesec",period:(h=n[2])!=null&&h.dataDate?`Podaci do: ${Ye(n[2].dataDate)}`:((M=n[2])==null?void 0:M.label)||"Ovaj mjesec",delivery:{value:((d=n[2])==null?void 0:d.packages)||0,diff:((i=n[2])==null?void 0:i.value)||0,target:(((v=n[2])==null?void 0:v.packages)||0)-(((S=n[2])==null?void 0:S.value)||0),trend:(((x=n[2])==null?void 0:x.value)||0)>0?"up":(((C=n[2])==null?void 0:C.value)||0)<0?"down":"neutral"},complaints:{value:((A=n[3])==null?void 0:A.value)||0,trend:(((B=n[3])==null?void 0:B.value)||0)===0?"good":"bad"},icon:Na},{title:(Z=n[4])!=null&&Z.dataDate?new Date(n[4].dataDate).getFullYear():"Ova godina",period:(ae=n[4])!=null&&ae.dataDate?`Podaci do: ${Ye(n[4].dataDate)}`:((be=n[4])==null?void 0:be.label)||"Ova godina",delivery:{value:((Se=n[4])==null?void 0:Se.packages)||0,diff:((Fe=n[4])==null?void 0:Fe.value)||0,target:(((ge=n[4])==null?void 0:ge.packages)||0)-(((ye=n[4])==null?void 0:ye.value)||0),trend:(((et=n[4])==null?void 0:et.value)||0)>0?"up":(((xt=n[4])==null?void 0:xt.value)||0)<0?"down":"neutral"},complaints:{value:((ht=n[5])==null?void 0:ht.value)||0,trend:(((ft=n[5])==null?void 0:ft.value)||0)===0?"good":"bad"},icon:Sa}],F=z=>z==="up"?Qe:z==="down"?Tt:z==="good"?vt:z==="bad"?Da:Xe,K=(z,ee=!1)=>{if(ee){if(z==="good")return f?"text-green-400":"text-green-600";if(z==="bad")return f?"text-red-400":"text-red-600"}else{if(z==="up")return f?"text-green-400":"text-green-600";if(z==="down")return f?"text-red-400":"text-red-600"}return f?"text-gray-400":"text-gray-600"},c=()=>{if(!s||p.length===0)return;const z=p.findIndex(oe=>oe.id===s.id),ee=z===0?p.length-1:z-1;g(p[ee])},y=()=>{if(!s||p.length===0)return;const z=p.findIndex(oe=>oe.id===s.id),ee=z===p.length-1?0:z+1;g(p[ee])};return e.jsx("div",{className:`min-h-screen p-4 sm:p-6 lg:p-8 ${f?"bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900":"bg-gradient-to-br from-blue-50 via-white to-indigo-50"}`,children:e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:`mb-6 sm:mb-8 p-4 sm:p-6 rounded-2xl ${f?"bg-gray-800/50":"bg-white/80"} backdrop-blur-xl border ${f?"border-gray-700":"border-white/20"} shadow-xl`,children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m.button,{onClick:()=>t("/"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-xl ${f?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(gt,{className:"w-6 h-6"})}),e.jsx(m.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"p-3 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600",children:e.jsx(Oe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl sm:text-3xl font-bold ${f?"text-white":"text-gray-800"}`,children:"Statistika"}),e.jsx("p",{className:`text-sm ${f?"text-gray-400":"text-gray-600"}`,children:"Pregled performansi vozaƒça"})]})]})}),s&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 pt-4 border-t ${f?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"w-full flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m.button,{onClick:c,whileHover:{scale:1.1,x:-3,backgroundColor:f?"#374151":"#e5e7eb"},whileTap:{scale:.9,x:-5},animate:{x:[0,-2,0]},transition:{x:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2},backgroundColor:{duration:.3}},className:`p-3 rounded-lg ${f?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 shadow-lg shadow-blue-500/20":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 shadow-lg shadow-blue-500/10"} transition-all duration-200 border-2 border-transparent hover:border-blue-400/30`,children:e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs(m.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},transition:{type:"spring",stiffness:300,damping:20,duration:.4},className:"flex flex-wrap gap-4 items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($a,{className:`w-5 h-5 ${f?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-lg font-bold ${f?"text-white":"text-gray-900"}`,children:s.ime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:`w-4 h-4 ${f?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${f?"text-gray-400":"text-gray-600"}`,children:["Tura ",s.tura]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:`w-4 h-4 ${f?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${f?"text-gray-400":"text-gray-600"}`,children:["Cilj: ",H(s.tura)," stopova/dan"]})]})]},s==null?void 0:s.id),e.jsx(m.button,{onClick:y,whileHover:{scale:1.1,x:3,backgroundColor:f?"#374151":"#e5e7eb"},whileTap:{scale:.9,x:5},animate:{x:[0,2,0]},transition:{x:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2},backgroundColor:{duration:.3}},className:`p-3 rounded-lg ${f?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 shadow-lg shadow-blue-500/20":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 shadow-lg shadow-blue-500/10"} transition-all duration-200 border-2 border-transparent hover:border-blue-400/30`,children:e.jsx(Je,{className:"w-5 h-5"})})]})})})]}),w&&e.jsx(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`mb-6 p-4 rounded-xl ${f?"bg-red-900/30 border-red-700/50":"bg-red-50 border-red-200/50"} border`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ut,{className:`w-5 h-5 ${f?"text-red-400":"text-red-600"}`}),e.jsxs("p",{className:`text-sm font-medium ${f?"text-red-400":"text-red-600"}`,children:["Gre≈°ka pri uƒçitavanju podataka: ",w]})]})}),E||Y?e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[e.jsx(m.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 mb-4 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx(Xe,{className:"w-8 h-8 text-white"})}),e.jsx("span",{className:`text-lg ${f?"text-gray-300":"text-gray-600"}`,children:e.jsxs(m.div,{className:"flex items-center gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:`w-6 h-6 rounded-full border-2 border-t-transparent ${f?"border-blue-400":"border-blue-600"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(m.span,{animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:"Uƒçitavanje statistike..."}),e.jsx(m.div,{className:`h-2 mt-2 bg-gradient-to-r ${f?"from-blue-600 via-blue-400 to-blue-600":"from-blue-500 via-blue-300 to-blue-500"} rounded-full`,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:2,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}})]})]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:e.jsx(dt,{children:L.map((z,ee)=>{const oe=z.icon,je=F(z.delivery.trend);F(z.complaints.trend);const ce=z.complaints.value>0,ne=z.delivery.target>0?z.delivery.value/z.delivery.target*100:0;return e.jsxs(m.div,{initial:{opacity:0,y:30,scale:.8,rotateX:-15},animate:{opacity:1,y:0,scale:1,rotateX:0},exit:{opacity:0,y:-30,scale:.8,rotateX:15},transition:{delay:ee*.15,type:"spring",stiffness:300,damping:25,duration:.6},whileHover:{scale:1.03,y:-8,rotateY:2,transition:{duration:.3}},className:"relative group cursor-pointer",style:{perspective:"1000px"},children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-white via-gray-50 to-gray-100 border-2 border-gray-200/60 shadow-2xl transform group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-1 rounded-3xl bg-gradient-to-br from-white/80 to-transparent pointer-events-none"}),e.jsx(m.div,{className:"absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500",animate:{background:["radial-gradient(circle at 0% 0%, rgba(59, 130, 246, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 100%, rgba(147, 51, 234, 0.3) 0%, transparent 50%)","radial-gradient(circle at 0% 100%, rgba(236, 72, 153, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 0%, rgba(59, 130, 246, 0.3) 0%, transparent 50%)"]},transition:{duration:4,repeat:1/0,ease:"linear"}}),ce&&e.jsx(m.div,{className:"absolute inset-0 rounded-3xl bg-red-500/10 border border-red-400/30",animate:{opacity:[.3,.6,.3],scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:"relative p-8 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(m.div,{className:"relative",whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:400},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-purple-600 rounded-2xl blur-md opacity-70"}),e.jsx("div",{className:"relative p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:e.jsx(oe,{className:"w-6 h-6 text-white drop-shadow-lg"})}),e.jsx(m.div,{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",animate:{scale:[1,1.3,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:z.title}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:z.period})]})]}),e.jsxs("div",{className:"space-y-6 flex-grow",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Dostavljeno"}),e.jsx(m.div,{animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"},children:e.jsx(je,{className:`w-5 h-5 ${K(z.delivery.trend)} drop-shadow-sm`})})]}),e.jsxs("div",{className:"flex items-baseline justify-between mb-4",children:[e.jsx(m.span,{className:"text-4xl font-black text-gray-900",animate:{textShadow:["2px 2px 4px rgba(0,0,0,0.1)","3px 3px 6px rgba(59,130,246,0.3)","2px 2px 4px rgba(0,0,0,0.1)"]},transition:{duration:3,repeat:1/0},children:z.delivery.value}),e.jsx("span",{className:"text-lg font-bold text-gray-600",children:"stopova"}),z.delivery.diff!==void 0&&z.delivery.diff!==0&&e.jsxs(m.span,{className:`px-2 py-1 rounded-full text-sm font-bold ${z.delivery.diff>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:[z.delivery.diff>0?"+":"",z.delivery.diff]})]}),z.delivery.target>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold",children:[e.jsxs("span",{className:"text-gray-800",children:["Cilj: ",z.delivery.target]}),e.jsxs(m.span,{className:`font-black ${ne>=100?"text-green-700":ne>=98?"text-blue-700":"text-red-700"}`,animate:ne>=100?{scale:[1,1.15,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(34,197,94,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]}:ne>=98?{scale:[1,1.08,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(59,130,246,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]}:{scale:[1,1.1,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(220,38,38,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]},transition:{duration:1.5,repeat:1/0},children:[Math.round(ne),"%"]})]}),e.jsxs("div",{className:"relative h-3 bg-gray-200 rounded-full overflow-hidden border border-gray-300",children:[e.jsx(m.div,{className:`h-full rounded-full relative ${ne>=100?"bg-gradient-to-r from-green-400 via-green-500 to-emerald-600":ne>=98?"bg-gradient-to-r from-blue-400 via-blue-500 to-indigo-600":"bg-gradient-to-r from-red-400 via-red-500 to-red-600"}`,initial:{width:0},animate:{width:`${Math.min(ne,100)}%`},transition:{duration:1.5,delay:.5,ease:"easeOut"},children:e.jsx(m.div,{className:"absolute inset-0 bg-white/30",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})}),ne>=100&&e.jsx(m.div,{className:"absolute right-2 top-1/2 transform -translate-y-1/2",animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:e.jsx("span",{className:"text-xs font-bold text-white drop-shadow",children:"üéØ"})})]})]})]}),e.jsxs("div",{className:`relative p-4 rounded-2xl transition-all duration-500 border-2 ${ce?"bg-red-50 border-red-200 shadow-lg shadow-red-100":"bg-green-50 border-green-200 shadow-lg shadow-green-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Reklamacije"}),ce?e.jsx(m.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:e.jsx(nt,{className:"w-5 h-5 text-red-600 drop-shadow-sm"})}):e.jsx(m.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(vt,{className:"w-5 h-5 text-green-600 drop-shadow-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m.span,{className:`text-3xl font-black ${ce?"text-red-700":"text-green-700"}`,animate:ce?{scale:[1,1.1,1],textShadow:["1px 1px 2px rgba(0,0,0,0.1)","2px 2px 4px rgba(220, 38, 38, 0.3)","1px 1px 2px rgba(0,0,0,0.1)"]}:{textShadow:["1px 1px 2px rgba(0,0,0,0.1)","2px 2px 4px rgba(34, 197, 94, 0.3)","1px 1px 2px rgba(0,0,0,0.1)"]},transition:{duration:2,repeat:1/0},children:z.complaints.value}),ce?e.jsxs(m.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200},className:"px-3 py-1 bg-red-600 text-white text-xs font-bold rounded-full shadow-lg flex items-center gap-1",children:[e.jsx("span",{children:"‚âà"}),e.jsxs("span",{children:[(z.complaints.value*80).toLocaleString(),"‚Ç¨"]})]}):e.jsx(m.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200},className:"px-3 py-1 bg-green-600 text-white text-xs font-bold rounded-full shadow-lg",children:"SAVR≈†ENO!"})]})]})]}),e.jsx(m.div,{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full shadow-lg"})})]})]},z.title)})})})]})})},Kr=Object.freeze(Object.defineProperty({__proto__:null,default:Or},Symbol.toStringTag,{value:"Module"}));export{Mr as C,Yr as D,Wr as H,Ma as S,It as U,At as a,Lt as b,Gt as c,Ta as d,Ft as e,qr as f,Br as g,Kr as h,Vr as i,pe as q,Ht as u};

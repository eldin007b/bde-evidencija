import{s as m}from"./chunk-v5-1764986808414-CFCyjhGw.js";import"./chunk-v5-1764986808414-DzTHeiPn.js";import"./chunk-v5-1764986808414-B03Bn2Gj.js";import"./chunk-v5-1764986808414-RJMw9VKr.js";async function b(s){const{data:n,error:o}=await m.from("payroll_amounts").select("driver_name, file_name, ukupni_trosak");if(o||!n)return{drivers:[],total:0};const l=Number(s)||new Date().getFullYear(),f=n.filter(e=>{if(!(e!=null&&e.file_name))return!1;const t=e.file_name.match(/_(\d{4})\.pdf$/);return t?Number(t[1])===l:!1}),r={};let i=0;for(const e of f){const t=e.driver_name,a=Number(e.ukupni_trosak||0);r[t]||(r[t]=0),r[t]+=a,i+=a}return{drivers:Object.entries(r).map(([e,t])=>({name:e,cost:t})),total:i}}export{b as getPayrollAnalytics};

import{j as e,m as f,C as He,T as $e,a as Rt,A as Be,W as At,K as ut,L as Ut,X as Ht,b as Ft,c as Pe,d as Ce,e as Ae,f as Lt,N as Gt,U as Te,M as Wt,I as qt,g as Ye,h as Ee,i as Oe,P as Re,k as gt,l as mt,n as Ge,o as Vt,p as Bt,q as Yt,r as Kt,s as Ze,t as Jt}from"./chunk-v5-4P3DX6qJ.js";import{a as l,u as Ie}from"./chunk-v5-BnSIf2SQ.js";import{s as ae,g as Xt,a as Qt}from"./chunk-v5-D-tK2_gu.js";import{e as Zt,i as ea,f as pe}from"./chunk-v5-CpHZO0Zi.js";import{Q as ta,u as Ue}from"./chunk-v5-nyoeD1-R.js";const de={getItem:t=>window.localStorage.getItem(t),setItem:(t,a)=>window.localStorage.setItem(t,a),deleteItem:t=>window.localStorage.removeItem(t)},pt=l.createContext();function fr({children:t,forceShowInit:a}){const[s,r]=l.useState(!1),[n,m]=l.useState(""),[p,o]=l.useState(""),[u,M]=l.useState("user"),[H,F]=l.useState(""),[A,P]=l.useState("#1769aa"),C=l.useCallback(()=>{const V=de.getItem("DRIVER_TURA"),L=de.getItem("DRIVER_NAME"),T=de.getItem("DRIVER_ROLE"),E=de.getItem("DEVICE_ID"),y=de.getItem("IS_ADMIN");m(V||""),o(L||""),M(T||"user"),F(E||""),r(y==="true"),y==="true"?P("#cc0000"):L&&V&&P("#1769aa")},[]);l.useEffect(()=>{C(),typeof window<"u"&&(window.__USER_CONTEXT__={refreshStatus:C})},[C]);const K={isAdmin:s,driverTura:n,driverName:p,driverRole:u,deviceId:H,userColor:A,refreshStatus:C,resetLoginData:()=>(de.deleteItem("DRIVER_TURA"),de.deleteItem("DRIVER_NAME"),de.deleteItem("DRIVER_ROLE"),de.deleteItem("DEVICE_ID"),de.deleteItem("IS_ADMIN"),de.deleteItem("APP_LANG"),C(),typeof a=="function"&&a(),!0),validateDriverAccess:()=>!(!n||!H)};return e.jsx(pt.Provider,{value:K,children:t})}function aa(){const t=l.useContext(pt);if(!t)throw new Error("useUserContext mora biti kori≈°ten unutar <UserProvider>");return t}const ra=()=>({persistClient:t=>{try{const a={timestamp:Date.now(),clientState:JSON.stringify({queries:t.getQueryCache().getAll().filter(s=>{const r=s.queryKey[0];return["drivers","holidays"].includes(r)}).map(s=>({queryKey:s.queryKey,state:s.state}))})};localStorage.setItem("bde_query_cache",JSON.stringify(a))}catch(a){console.warn("Failed to persist query cache:",a)}},restoreClient:()=>{try{const t=localStorage.getItem("bde_query_cache");if(!t)return;const{timestamp:a,clientState:s}=JSON.parse(t),r=1440*60*1e3;if(Date.now()-a>r){localStorage.removeItem("bde_query_cache");return}return JSON.parse(s)}catch(t){console.warn("Failed to restore query cache:",t),localStorage.removeItem("bde_query_cache")}},removeClient:()=>{localStorage.removeItem("bde_query_cache")}}),Ke=ra(),sa=()=>{const t=new Date,a=t.getHours(),s=t.getDay();let r,n;return s>=1&&s<=5&&a>=2&&a<=9?(r=300*1e3,n="radni sat (dodaju se novi podaci)"):s>=1&&s<=5&&a>9?(r=7200*1e3,n="radni dan posle 09h"):(r=360*60*1e3,n=s===0||s===6?"vikend":"noƒá"),console.log(`üß† Smart cache: ${r/6e4} min (${n})`),r},ue=new ta({defaultOptions:{queries:{staleTime:sa(),cacheTime:14400*1e3,refetchOnWindowFocus:()=>{const t=new Date().getHours(),a=new Date().getDay();return a>=1&&a<=5&&t>=2&&t<=9},refetchOnReconnect:!0,refetchOnMount:!1,retry:2,retryDelay:t=>Math.min(1e3*2**t,3e4),suspense:!1,useErrorBoundary:!1,networkMode:"online"},mutations:{retry:1,networkMode:"online"}}}),ne={drivers:{all:["drivers"]},deliveries:{all:["deliveries"],byMonth:(t,a)=>[...ne.deliveries.all,"month",t,a],byYear:t=>[...ne.deliveries.all,"year",t],byDriver:(t,a,s)=>[...ne.deliveries.all,"driver",t,a,s],stats:(t,a)=>[...ne.deliveries.all,"stats",t,a]},holidays:{all:["holidays"],byYear:t=>[...ne.holidays.all,"year",t]},extraRides:{all:["extraRides"]},driverStats:{all:["driverStats"]}},br={drivers:()=>ue.invalidateQueries({queryKey:ne.drivers.all}),deliveries:()=>ue.invalidateQueries({queryKey:ne.deliveries.all}),holidays:()=>ue.invalidateQueries({queryKey:ne.holidays.all}),extraRides:()=>ue.invalidateQueries({queryKey:ne.extraRides.all}),driverStats:()=>ue.invalidateQueries({queryKey:ne.driverStats.all}),all:()=>ue.invalidateQueries()};try{const t=Ke.restoreClient();t?.queries&&t.queries.forEach(({queryKey:a,state:s})=>{s.data&&ue.setQueryData(a,s.data)})}catch(t){console.warn("Failed to restore query cache on init:",t)}let et;ue.getQueryCache().subscribe(()=>{clearTimeout(et),et=setTimeout(()=>{Ke.persistClient(ue)},1e3)});typeof window<"u"&&window.addEventListener("beforeunload",()=>{Ke.persistClient(ue)});function xt(){const[t,a]=l.useState(null),[s,r]=l.useState(!0),[n,m]=l.useState(null),p=l.useCallback(()=>{try{const P=localStorage.getItem("bde_current_user"),C=localStorage.getItem("bde_login_time");if(P&&C){const w=JSON.parse(P);if(Date.now()-parseInt(C)<10080*60*1e3)return w;localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}}catch(P){console.error("Error loading user from storage:",P),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}return null},[]),o=l.useCallback(P=>{try{localStorage.setItem("bde_current_user",JSON.stringify(P)),localStorage.setItem("bde_login_time",Date.now().toString())}catch(C){console.error("Error saving user to storage:",C)}},[]),u=l.useCallback(async P=>{console.log("üöÄ checkDriverExists called with tura:",P),r(!0),m(null);try{const{data:C,error:w}=await ae.from("drivers").select("id, ime, tura, aktivan, role, password_hash").eq("tura",P.toUpperCase()).eq("aktivan",!0).single();if(w)throw console.error("Database error checking driver:",w),new Error(`Vozaƒç sa turom ${P} nije pronaƒëen ili nije aktivan`);console.log("üîç Driver check result:",{id:C.id,ime:C.ime,tura:C.tura,hasPassword:!!C.password_hash,role:C.role});const R={id:C.id,ime:C.ime,tura:C.tura,role:C.role||"driver",hasPassword:!!C.password_hash};return console.log("üéØ Returning from checkDriverExists:",R),R}catch(C){throw m(C.message),C}finally{r(!1)}},[]),M=l.useCallback(async(P,C)=>{r(!0),m(null);try{const w=btoa(C),{error:R}=await ae.from("drivers").update({password_hash:w,last_login:new Date}).eq("id",P);if(R)throw new Error("Gre≈°ka pri postavljanju lozinke");return!0}catch(w){throw m(w.message),w}finally{r(!1)}},[]),H=l.useCallback(async(P,C)=>{r(!0),m(null);try{const{data:w,error:R}=await ae.from("drivers").select("*").eq("tura",P.toUpperCase()).eq("aktivan",!0).single();if(R)throw console.error("Database error during login:",R),new Error(`Vozaƒç sa turom ${P} nije pronaƒëen ili nije aktivan`);if(console.log("üîç Driver found for login:",{tura:w.tura,ime:w.ime,hasPassword:!!w.password_hash,role:w.role}),!w.password_hash)throw new Error("Vozaƒç nema postavljenu lozinku. Kontaktirajte administratora.");if(!(w.password_hash===C||w.password_hash===btoa(C)))throw new Error("Neispravna lozinka");await ae.from("drivers").update({last_login:new Date}).eq("id",w.id);const V={id:w.id,username:w.tura,name:w.ime,role:w.role||"driver",loginTime:Date.now()};return a(V),o(V),V}catch(w){throw m(w.message),w}finally{r(!1)}},[o]),F=l.useCallback(async(P,C)=>{if(!t)throw new Error("Morate biti ulogovani");r(!0),m(null);try{const{data:w,error:R}=await ae.from("drivers").select("password_hash").eq("id",t.id).single();if(R)throw new Error("Gre≈°ka pri provjeri korisnika");if(!(w.password_hash===P||w.password_hash===btoa(P)))throw new Error("Stara lozinka nije ispravna");const V=btoa(C),{error:L}=await ae.from("drivers").update({password_hash:V}).eq("id",t.id);if(L)throw new Error("Gre≈°ka pri a≈æuriranju lozinke");return!0}catch(w){throw m(w.message),w}finally{r(!1)}},[t]),A=l.useCallback(()=>{a(null),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time"),m(null),console.log("‚úÖ User logged out")},[]);return l.useEffect(()=>{const P=p();P&&a(P),r(!1)},[p]),{currentUser:t,loading:s,error:n,checkDriverExists:u,setInitialPassword:M,login:H,changePassword:F,logout:A,isAuthenticated:!!t}}function tt(t,a){if(typeof t=="function")return t(a);t!=null&&(t.current=a)}function oa(...t){return a=>{let s=!1;const r=t.map(n=>{const m=tt(n,a);return!s&&typeof m=="function"&&(s=!0),m});if(s)return()=>{for(let n=0;n<r.length;n++){const m=r[n];typeof m=="function"?m():tt(t[n],null)}}}}function na(t){const a=la(t),s=l.forwardRef((r,n)=>{const{children:m,...p}=r,o=l.Children.toArray(m),u=o.find(da);if(u){const M=u.props.children,H=o.map(F=>F===u?l.Children.count(M)>1?l.Children.only(null):l.isValidElement(M)?M.props.children:null:F);return e.jsx(a,{...p,ref:n,children:l.isValidElement(M)?l.cloneElement(M,void 0,H):null})}return e.jsx(a,{...p,ref:n,children:m})});return s.displayName=`${t}.Slot`,s}var ia=na("Slot");function la(t){const a=l.forwardRef((s,r)=>{const{children:n,...m}=s;if(l.isValidElement(n)){const p=ga(n),o=ua(m,n.props);return n.type!==l.Fragment&&(o.ref=r?oa(r,p):p),l.cloneElement(n,o)}return l.Children.count(n)>1?l.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var ca=Symbol("radix.slottable");function da(t){return l.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ca}function ua(t,a){const s={...a};for(const r in a){const n=t[r],m=a[r];/^on[A-Z]/.test(r)?n&&m?s[r]=(...o)=>{const u=m(...o);return n(...o),u}:n&&(s[r]=n):r==="style"?s[r]={...n,...m}:r==="className"&&(s[r]=[n,m].filter(Boolean).join(" "))}return{...t,...s}}function ga(t){let a=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=a&&"isReactWarning"in a&&a.isReactWarning;return s?t.ref:(a=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=a&&"isReactWarning"in a&&a.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function ht(t){var a,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(a=0;a<n;a++)t[a]&&(s=ht(t[a]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function ft(){for(var t,a,s=0,r="",n=arguments.length;s<n;s++)(t=arguments[s])&&(a=ht(t))&&(r&&(r+=" "),r+=a);return r}const at=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,rt=ft,ma=(t,a)=>s=>{var r;if(a?.variants==null)return rt(t,s?.class,s?.className);const{variants:n,defaultVariants:m}=a,p=Object.keys(n).map(M=>{const H=s?.[M],F=m?.[M];if(H===null)return null;const A=at(H)||at(F);return n[M][A]}),o=s&&Object.entries(s).reduce((M,H)=>{let[F,A]=H;return A===void 0||(M[F]=A),M},{}),u=a==null||(r=a.compoundVariants)===null||r===void 0?void 0:r.reduce((M,H)=>{let{class:F,className:A,...P}=H;return Object.entries(P).every(C=>{let[w,R]=C;return Array.isArray(R)?R.includes({...m,...o}[w]):{...m,...o}[w]===R})?[...M,F,A]:M},[]);return rt(t,p,u,s?.class,s?.className)},Je="-",pa=t=>{const a=ha(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:p=>{const o=p.split(Je);return o[0]===""&&o.length!==1&&o.shift(),bt(o,a)||xa(p)},getConflictingClassGroupIds:(p,o)=>{const u=s[p]||[];return o&&r[p]?[...u,...r[p]]:u}}},bt=(t,a)=>{if(t.length===0)return a.classGroupId;const s=t[0],r=a.nextPart.get(s),n=r?bt(t.slice(1),r):void 0;if(n)return n;if(a.validators.length===0)return;const m=t.join(Je);return a.validators.find(({validator:p})=>p(m))?.classGroupId},st=/^\[(.+)\]$/,xa=t=>{if(st.test(t)){const a=st.exec(t)[1],s=a?.substring(0,a.indexOf(":"));if(s)return"arbitrary.."+s}},ha=t=>{const{theme:a,classGroups:s}=t,r={nextPart:new Map,validators:[]};for(const n in s)We(s[n],r,n,a);return r},We=(t,a,s,r)=>{t.forEach(n=>{if(typeof n=="string"){const m=n===""?a:ot(a,n);m.classGroupId=s;return}if(typeof n=="function"){if(fa(n)){We(n(r),a,s,r);return}a.validators.push({validator:n,classGroupId:s});return}Object.entries(n).forEach(([m,p])=>{We(p,ot(a,m),s,r)})})},ot=(t,a)=>{let s=t;return a.split(Je).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},fa=t=>t.isThemeGetter,ba=t=>{if(t<1)return{get:()=>{},set:()=>{}};let a=0,s=new Map,r=new Map;const n=(m,p)=>{s.set(m,p),a++,a>t&&(a=0,r=s,s=new Map)};return{get(m){let p=s.get(m);if(p!==void 0)return p;if((p=r.get(m))!==void 0)return n(m,p),p},set(m,p){s.has(m)?s.set(m,p):n(m,p)}}},qe="!",Ve=":",ya=Ve.length,va=t=>{const{prefix:a,experimentalParseClassName:s}=t;let r=n=>{const m=[];let p=0,o=0,u=0,M;for(let C=0;C<n.length;C++){let w=n[C];if(p===0&&o===0){if(w===Ve){m.push(n.slice(u,C)),u=C+ya;continue}if(w==="/"){M=C;continue}}w==="["?p++:w==="]"?p--:w==="("?o++:w===")"&&o--}const H=m.length===0?n:n.substring(u),F=wa(H),A=F!==H,P=M&&M>u?M-u:void 0;return{modifiers:m,hasImportantModifier:A,baseClassName:F,maybePostfixModifierPosition:P}};if(a){const n=a+Ve,m=r;r=p=>p.startsWith(n)?m(p.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:p,maybePostfixModifierPosition:void 0}}if(s){const n=r;r=m=>s({className:m,parseClassName:n})}return r},wa=t=>t.endsWith(qe)?t.substring(0,t.length-1):t.startsWith(qe)?t.substring(1):t,ka=t=>{const a=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const n=[];let m=[];return r.forEach(p=>{p[0]==="["||a[p]?(n.push(...m.sort(),p),m=[]):m.push(p)}),n.push(...m.sort()),n}},ja=t=>({cache:ba(t.cacheSize),parseClassName:va(t),sortModifiers:ka(t),...pa(t)}),Na=/\s+/,Sa=(t,a)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:n,sortModifiers:m}=a,p=[],o=t.trim().split(Na);let u="";for(let M=o.length-1;M>=0;M-=1){const H=o[M],{isExternal:F,modifiers:A,hasImportantModifier:P,baseClassName:C,maybePostfixModifierPosition:w}=s(H);if(F){u=H+(u.length>0?" "+u:u);continue}let R=!!w,K=r(R?C.substring(0,w):C);if(!K){if(!R){u=H+(u.length>0?" "+u:u);continue}if(K=r(C),!K){u=H+(u.length>0?" "+u:u);continue}R=!1}const V=m(A).join(":"),L=P?V+qe:V,T=L+K;if(p.includes(T))continue;p.push(T);const E=n(K,R);for(let y=0;y<E.length;++y){const Z=E[y];p.push(L+Z)}u=H+(u.length>0?" "+u:u)}return u};function Da(){let t=0,a,s,r="";for(;t<arguments.length;)(a=arguments[t++])&&(s=yt(a))&&(r&&(r+=" "),r+=s);return r}const yt=t=>{if(typeof t=="string")return t;let a,s="";for(let r=0;r<t.length;r++)t[r]&&(a=yt(t[r]))&&(s&&(s+=" "),s+=a);return s};function $a(t,...a){let s,r,n,m=p;function p(u){const M=a.reduce((H,F)=>F(H),t());return s=ja(M),r=s.cache.get,n=s.cache.set,m=o,o(u)}function o(u){const M=r(u);if(M)return M;const H=Sa(u,s);return n(u,H),H}return function(){return m(Da.apply(null,arguments))}}const te=t=>{const a=s=>s[t]||[];return a.isThemeGetter=!0,a},vt=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,wt=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ca=/^\d+\/\d+$/,Ia=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_a=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ma=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,za=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Pa=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ve=t=>Ca.test(t),q=t=>!!t&&!Number.isNaN(Number(t)),xe=t=>!!t&&Number.isInteger(Number(t)),Fe=t=>t.endsWith("%")&&q(t.slice(0,-1)),me=t=>Ia.test(t),Ta=()=>!0,Ea=t=>_a.test(t)&&!Ma.test(t),kt=()=>!1,Oa=t=>za.test(t),Ra=t=>Pa.test(t),Aa=t=>!D(t)&&!$(t),Ua=t=>we(t,St,kt),D=t=>vt.test(t),fe=t=>we(t,Dt,Ea),Le=t=>we(t,Wa,q),nt=t=>we(t,jt,kt),Ha=t=>we(t,Nt,Ra),_e=t=>we(t,$t,Oa),$=t=>wt.test(t),Se=t=>ke(t,Dt),Fa=t=>ke(t,qa),it=t=>ke(t,jt),La=t=>ke(t,St),Ga=t=>ke(t,Nt),Me=t=>ke(t,$t,!0),we=(t,a,s)=>{const r=vt.exec(t);return r?r[1]?a(r[1]):s(r[2]):!1},ke=(t,a,s=!1)=>{const r=wt.exec(t);return r?r[1]?a(r[1]):s:!1},jt=t=>t==="position"||t==="percentage",Nt=t=>t==="image"||t==="url",St=t=>t==="length"||t==="size"||t==="bg-size",Dt=t=>t==="length",Wa=t=>t==="number",qa=t=>t==="family-name",$t=t=>t==="shadow",Va=()=>{const t=te("color"),a=te("font"),s=te("text"),r=te("font-weight"),n=te("tracking"),m=te("leading"),p=te("breakpoint"),o=te("container"),u=te("spacing"),M=te("radius"),H=te("shadow"),F=te("inset-shadow"),A=te("text-shadow"),P=te("drop-shadow"),C=te("blur"),w=te("perspective"),R=te("aspect"),K=te("ease"),V=te("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...T(),$,D],y=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto","contain","none"],j=()=>[$,D,u],J=()=>[ve,"full","auto",...j()],ie=()=>[xe,"none","subgrid",$,D],se=()=>["auto",{span:["full",xe,$,D]},xe,$,D],v=()=>[xe,"auto",$,D],U=()=>["auto","min","max","fr",$,D],x=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],S=()=>["start","end","center","stretch","center-safe","end-safe"],h=()=>["auto",...j()],N=()=>[ve,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],b=()=>[t,$,D],B=()=>[...T(),it,nt,{position:[$,D]}],W=()=>["no-repeat",{repeat:["","x","y","space","round"]}],g=()=>["auto","cover","contain",La,Ua,{size:[$,D]}],I=()=>[Fe,Se,fe],i=()=>["","none","full",M,$,D],c=()=>["",q,Se,fe],k=()=>["solid","dashed","dotted","double"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>[q,Fe,it,nt],d=()=>["","none",C,$,D],_=()=>["none",q,$,D],Y=()=>["none",q,$,D],ee=()=>[q,$,D],G=()=>[ve,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[me],breakpoint:[me],color:[Ta],container:[me],"drop-shadow":[me],ease:["in","out","in-out"],font:[Aa],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[me],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[me],shadow:[me],spacing:["px",q],text:[me],"text-shadow":[me],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ve,D,$,R]}],container:["container"],columns:[{columns:[q,D,$,o]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:y()}],"overflow-x":[{"overflow-x":y()}],"overflow-y":[{"overflow-y":y()}],overscroll:[{overscroll:Z()}],"overscroll-x":[{"overscroll-x":Z()}],"overscroll-y":[{"overscroll-y":Z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:J()}],"inset-x":[{"inset-x":J()}],"inset-y":[{"inset-y":J()}],start:[{start:J()}],end:[{end:J()}],top:[{top:J()}],right:[{right:J()}],bottom:[{bottom:J()}],left:[{left:J()}],visibility:["visible","invisible","collapse"],z:[{z:[xe,"auto",$,D]}],basis:[{basis:[ve,"full","auto",o,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[q,ve,"auto","initial","none",D]}],grow:[{grow:["",q,$,D]}],shrink:[{shrink:["",q,$,D]}],order:[{order:[xe,"first","last","none",$,D]}],"grid-cols":[{"grid-cols":ie()}],"col-start-end":[{col:se()}],"col-start":[{"col-start":v()}],"col-end":[{"col-end":v()}],"grid-rows":[{"grid-rows":ie()}],"row-start-end":[{row:se()}],"row-start":[{"row-start":v()}],"row-end":[{"row-end":v()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":U()}],"auto-rows":[{"auto-rows":U()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...x(),"normal"]}],"justify-items":[{"justify-items":[...S(),"normal"]}],"justify-self":[{"justify-self":["auto",...S()]}],"align-content":[{content:["normal",...x()]}],"align-items":[{items:[...S(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...S(),{baseline:["","last"]}]}],"place-content":[{"place-content":x()}],"place-items":[{"place-items":[...S(),"baseline"]}],"place-self":[{"place-self":["auto",...S()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:h()}],mx:[{mx:h()}],my:[{my:h()}],ms:[{ms:h()}],me:[{me:h()}],mt:[{mt:h()}],mr:[{mr:h()}],mb:[{mb:h()}],ml:[{ml:h()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:N()}],w:[{w:[o,"screen",...N()]}],"min-w":[{"min-w":[o,"screen","none",...N()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[p]},...N()]}],h:[{h:["screen","lh",...N()]}],"min-h":[{"min-h":["screen","lh","none",...N()]}],"max-h":[{"max-h":["screen","lh",...N()]}],"font-size":[{text:["base",s,Se,fe]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,$,Le]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fe,D]}],"font-family":[{font:[Fa,D,a]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,$,D]}],"line-clamp":[{"line-clamp":[q,"none",$,Le]}],leading:[{leading:[m,...j()]}],"list-image":[{"list-image":["none",$,D]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",$,D]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:b()}],"text-color":[{text:b()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...k(),"wavy"]}],"text-decoration-thickness":[{decoration:[q,"from-font","auto",$,fe]}],"text-decoration-color":[{decoration:b()}],"underline-offset":[{"underline-offset":[q,"auto",$,D]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$,D]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$,D]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:B()}],"bg-repeat":[{bg:W()}],"bg-size":[{bg:g()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},xe,$,D],radial:["",$,D],conic:[xe,$,D]},Ga,Ha]}],"bg-color":[{bg:b()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:b()}],"gradient-via":[{via:b()}],"gradient-to":[{to:b()}],rounded:[{rounded:i()}],"rounded-s":[{"rounded-s":i()}],"rounded-e":[{"rounded-e":i()}],"rounded-t":[{"rounded-t":i()}],"rounded-r":[{"rounded-r":i()}],"rounded-b":[{"rounded-b":i()}],"rounded-l":[{"rounded-l":i()}],"rounded-ss":[{"rounded-ss":i()}],"rounded-se":[{"rounded-se":i()}],"rounded-ee":[{"rounded-ee":i()}],"rounded-es":[{"rounded-es":i()}],"rounded-tl":[{"rounded-tl":i()}],"rounded-tr":[{"rounded-tr":i()}],"rounded-br":[{"rounded-br":i()}],"rounded-bl":[{"rounded-bl":i()}],"border-w":[{border:c()}],"border-w-x":[{"border-x":c()}],"border-w-y":[{"border-y":c()}],"border-w-s":[{"border-s":c()}],"border-w-e":[{"border-e":c()}],"border-w-t":[{"border-t":c()}],"border-w-r":[{"border-r":c()}],"border-w-b":[{"border-b":c()}],"border-w-l":[{"border-l":c()}],"divide-x":[{"divide-x":c()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":c()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...k(),"hidden","none"]}],"divide-style":[{divide:[...k(),"hidden","none"]}],"border-color":[{border:b()}],"border-color-x":[{"border-x":b()}],"border-color-y":[{"border-y":b()}],"border-color-s":[{"border-s":b()}],"border-color-e":[{"border-e":b()}],"border-color-t":[{"border-t":b()}],"border-color-r":[{"border-r":b()}],"border-color-b":[{"border-b":b()}],"border-color-l":[{"border-l":b()}],"divide-color":[{divide:b()}],"outline-style":[{outline:[...k(),"none","hidden"]}],"outline-offset":[{"outline-offset":[q,$,D]}],"outline-w":[{outline:["",q,Se,fe]}],"outline-color":[{outline:b()}],shadow:[{shadow:["","none",H,Me,_e]}],"shadow-color":[{shadow:b()}],"inset-shadow":[{"inset-shadow":["none",F,Me,_e]}],"inset-shadow-color":[{"inset-shadow":b()}],"ring-w":[{ring:c()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:b()}],"ring-offset-w":[{"ring-offset":[q,fe]}],"ring-offset-color":[{"ring-offset":b()}],"inset-ring-w":[{"inset-ring":c()}],"inset-ring-color":[{"inset-ring":b()}],"text-shadow":[{"text-shadow":["none",A,Me,_e]}],"text-shadow-color":[{"text-shadow":b()}],opacity:[{opacity:[q,$,D]}],"mix-blend":[{"mix-blend":[...O(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":O()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[q]}],"mask-image-linear-from-pos":[{"mask-linear-from":z()}],"mask-image-linear-to-pos":[{"mask-linear-to":z()}],"mask-image-linear-from-color":[{"mask-linear-from":b()}],"mask-image-linear-to-color":[{"mask-linear-to":b()}],"mask-image-t-from-pos":[{"mask-t-from":z()}],"mask-image-t-to-pos":[{"mask-t-to":z()}],"mask-image-t-from-color":[{"mask-t-from":b()}],"mask-image-t-to-color":[{"mask-t-to":b()}],"mask-image-r-from-pos":[{"mask-r-from":z()}],"mask-image-r-to-pos":[{"mask-r-to":z()}],"mask-image-r-from-color":[{"mask-r-from":b()}],"mask-image-r-to-color":[{"mask-r-to":b()}],"mask-image-b-from-pos":[{"mask-b-from":z()}],"mask-image-b-to-pos":[{"mask-b-to":z()}],"mask-image-b-from-color":[{"mask-b-from":b()}],"mask-image-b-to-color":[{"mask-b-to":b()}],"mask-image-l-from-pos":[{"mask-l-from":z()}],"mask-image-l-to-pos":[{"mask-l-to":z()}],"mask-image-l-from-color":[{"mask-l-from":b()}],"mask-image-l-to-color":[{"mask-l-to":b()}],"mask-image-x-from-pos":[{"mask-x-from":z()}],"mask-image-x-to-pos":[{"mask-x-to":z()}],"mask-image-x-from-color":[{"mask-x-from":b()}],"mask-image-x-to-color":[{"mask-x-to":b()}],"mask-image-y-from-pos":[{"mask-y-from":z()}],"mask-image-y-to-pos":[{"mask-y-to":z()}],"mask-image-y-from-color":[{"mask-y-from":b()}],"mask-image-y-to-color":[{"mask-y-to":b()}],"mask-image-radial":[{"mask-radial":[$,D]}],"mask-image-radial-from-pos":[{"mask-radial-from":z()}],"mask-image-radial-to-pos":[{"mask-radial-to":z()}],"mask-image-radial-from-color":[{"mask-radial-from":b()}],"mask-image-radial-to-color":[{"mask-radial-to":b()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[q]}],"mask-image-conic-from-pos":[{"mask-conic-from":z()}],"mask-image-conic-to-pos":[{"mask-conic-to":z()}],"mask-image-conic-from-color":[{"mask-conic-from":b()}],"mask-image-conic-to-color":[{"mask-conic-to":b()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:B()}],"mask-repeat":[{mask:W()}],"mask-size":[{mask:g()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",$,D]}],filter:[{filter:["","none",$,D]}],blur:[{blur:d()}],brightness:[{brightness:[q,$,D]}],contrast:[{contrast:[q,$,D]}],"drop-shadow":[{"drop-shadow":["","none",P,Me,_e]}],"drop-shadow-color":[{"drop-shadow":b()}],grayscale:[{grayscale:["",q,$,D]}],"hue-rotate":[{"hue-rotate":[q,$,D]}],invert:[{invert:["",q,$,D]}],saturate:[{saturate:[q,$,D]}],sepia:[{sepia:["",q,$,D]}],"backdrop-filter":[{"backdrop-filter":["","none",$,D]}],"backdrop-blur":[{"backdrop-blur":d()}],"backdrop-brightness":[{"backdrop-brightness":[q,$,D]}],"backdrop-contrast":[{"backdrop-contrast":[q,$,D]}],"backdrop-grayscale":[{"backdrop-grayscale":["",q,$,D]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[q,$,D]}],"backdrop-invert":[{"backdrop-invert":["",q,$,D]}],"backdrop-opacity":[{"backdrop-opacity":[q,$,D]}],"backdrop-saturate":[{"backdrop-saturate":[q,$,D]}],"backdrop-sepia":[{"backdrop-sepia":["",q,$,D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",$,D]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[q,"initial",$,D]}],ease:[{ease:["linear","initial",K,$,D]}],delay:[{delay:[q,$,D]}],animate:[{animate:["none",V,$,D]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,$,D]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:_()}],"rotate-x":[{"rotate-x":_()}],"rotate-y":[{"rotate-y":_()}],"rotate-z":[{"rotate-z":_()}],scale:[{scale:Y()}],"scale-x":[{"scale-x":Y()}],"scale-y":[{"scale-y":Y()}],"scale-z":[{"scale-z":Y()}],"scale-3d":["scale-3d"],skew:[{skew:ee()}],"skew-x":[{"skew-x":ee()}],"skew-y":[{"skew-y":ee()}],transform:[{transform:[$,D,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:G()}],"translate-x":[{"translate-x":G()}],"translate-y":[{"translate-y":G()}],"translate-z":[{"translate-z":G()}],"translate-none":["translate-none"],accent:[{accent:b()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:b()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$,D]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$,D]}],fill:[{fill:["none",...b()]}],"stroke-w":[{stroke:[q,Se,fe,Le]}],stroke:[{stroke:["none",...b()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Ba=$a(Va);function be(...t){return Ba(ft(t))}const Ya=ma("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),De=l.forwardRef(({className:t,variant:a,size:s,asChild:r=!1,...n},m)=>{const p=r?ia:"button";return e.jsx(p,{className:be(Ya({variant:a,size:s,className:t})),ref:m,...n})});De.displayName="Button";function lt({user:t,onChangePassword:a,onLogout:s,scraperData:r,currentTheme:n="default",themes:m}){const[p,o]=l.useState(!1),[u,M]=l.useState(null),H=l.useRef(null),F=l.useRef(null),A=l.useRef(null),P=Ie();l.useEffect(()=>{(async()=>{if(!(!t||t.role==="admin"))try{const{data:E,error:y}=await ae.from("payrolls").select("file_name").eq("driver_name",(t.username||t.driverName||"").toLowerCase()).order("created_at",{ascending:!1}).limit(1);if(!y&&E&&E.length>0){const Z=E[0].file_name.replace(".pdf","").replace(".PDF","").replace("_","/");M(Z)}}catch(E){console.error("Gre≈°ka pri dohvatu zadnje plate za meni:",E)}})()},[t]);const w=m||{default:{accent:"from-blue-600 to-purple-600",gradient:"bg-gradient-to-r from-blue-500 to-purple-500"},sunrise:{accent:"from-orange-500 to-pink-500",gradient:"bg-gradient-to-r from-orange-400 to-pink-400"},afternoon:{accent:"from-blue-500 to-cyan-500",gradient:"bg-gradient-to-r from-blue-400 to-cyan-400"},evening:{accent:"from-purple-600 to-indigo-600",gradient:"bg-gradient-to-r from-purple-500 to-indigo-500"},night:{accent:"from-gray-600 to-blue-800",gradient:"bg-gradient-to-r from-gray-500 to-blue-700"}},R=()=>r?r.status==="completed"?{text:"Uspe≈°no",color:"text-emerald-500"}:r.status==="in_progress"?{text:"U toku",color:"text-amber-500"}:r.status==="failure"?{text:"Gre≈°ka",color:"text-rose-500"}:{text:"Nepoznato",color:"text-gray-500"}:{text:"Nepoznato",color:"text-gray-500"},K=()=>{if(!r)return"Nepoznato";const T=[r.formattedTimestamp,r.timestamp,r.raw?.updated_at,r.raw?.run_started_at,r.raw?.created_at];for(const E of T)if(E){const y=new Date(E);if(!isNaN(y.getTime()))return`${String(y.getDate()).padStart(2,"0")}.${String(y.getMonth()+1).padStart(2,"0")} ${String(y.getHours()).padStart(2,"0")}:${String(y.getMinutes()).padStart(2,"0")}`}return"Nepoznato"};l.useEffect(()=>{const T=E=>{const y=F.current&&!F.current.contains(E.target),Z=H.current&&!H.current.contains(E.target),j=A.current&&!A.current.contains(E.target);y&&Z&&j&&o(!1)};if(p)return document.addEventListener("mousedown",T),document.addEventListener("touchstart",T),()=>{document.removeEventListener("mousedown",T),document.removeEventListener("touchstart",T)}},[p]);const V=()=>o(!p),L=T=>{o(!1),setTimeout(()=>T?.(),100)};return e.jsxs("div",{className:"relative inline-block text-left",ref:H,style:{zIndex:p?999999:"auto",position:"relative"},children:[e.jsx(f.div,{ref:F,onClick:V,whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:e.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 ${n==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-2xl rounded-full border ${n==="night"?"border-white/10":"border-gray-100/50"} cursor-pointer shadow-sm`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br ${w[n].accent} flex items-center justify-center text-white font-bold`,children:t?.role==="admin"?e.jsx(He,{size:18}):e.jsx($e,{size:18})}),e.jsx("span",{className:`font-medium ${n==="night"?"text-gray-200":"text-gray-800"}`,children:t?.name||"Korisnik"}),e.jsx(Rt,{className:"w-4 h-4"})]})}),e.jsx(Be,{children:p&&e.jsxs(f.div,{ref:A,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`absolute right-0 mt-2 w-72 ${n==="night"?"bg-gray-900":"bg-white"} border rounded-2xl p-4 shadow-2xl`,style:{zIndex:999999},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${w[n].accent} rounded-full flex items-center justify-center text-white`,children:t?.role==="admin"?e.jsx(He,{size:20}):e.jsx($e,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm",children:t?.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t?.username})]})]}),t?.role!=="admin"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[e.jsxs("div",{className:`p-2 rounded-xl border ${n==="night"?"bg-gray-800 border-gray-700":"bg-blue-50 border-blue-100"}`,children:[e.jsx("p",{className:"text-[10px] font-bold text-blue-500 uppercase",children:"Zadnja plata"}),e.jsx("p",{className:"text-sm font-black",children:u||t?.zadnjaPlata||"-"})]}),e.jsxs("div",{className:`p-2 rounded-xl border ${n==="night"?"bg-gray-800 border-gray-700":"bg-emerald-50 border-emerald-100"}`,children:[e.jsx("p",{className:"text-[10px] font-bold text-emerald-500 uppercase",children:"Ukupna zarada"}),e.jsx("p",{className:"text-sm font-black",children:t?.ukupnaZarada||"-"})]})]}),t?.role==="admin"&&r&&e.jsxs("div",{className:"mb-4 p-2 bg-gray-50 rounded-lg text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:R().color,children:R().text})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"A≈æurirano:"}),e.jsx("span",{children:K()})]})]}),e.jsxs("div",{className:"space-y-1",children:[t?.role==="admin"?e.jsxs(De,{variant:"ghost",className:"w-full justify-start text-blue-600",onClick:()=>L(()=>P("/admin")),children:[e.jsx(He,{className:"w-4 h-4 mr-2"})," Admin Panel"]}):e.jsxs(De,{variant:"ghost",className:"w-full justify-start text-emerald-600",onClick:()=>L(()=>P("/payroll-list")),children:[e.jsx(At,{className:"w-4 h-4 mr-2"})," Platne liste"]}),e.jsxs(De,{variant:"ghost",className:"w-full justify-start",onClick:()=>L(a),children:[e.jsx(ut,{className:"w-4 h-4 mr-2"})," ≈†ifra"]}),e.jsxs(De,{variant:"ghost",className:"w-full justify-start text-red-500",onClick:s,children:[e.jsx(Ut,{className:"w-4 h-4 mr-2"})," Odjava"]})]})]})})]})}const Ct=l.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:be("rounded-xl border bg-card text-card-foreground shadow",t),...a}));Ct.displayName="Card";const Ka=l.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:be("flex flex-col space-y-1.5 p-6",t),...a}));Ka.displayName="CardHeader";const Ja=l.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:be("font-semibold leading-none tracking-tight",t),...a}));Ja.displayName="CardTitle";const Xa=l.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:be("text-sm text-muted-foreground",t),...a}));Xa.displayName="CardDescription";const Qa=l.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:be("p-6 pt-0",t),...a}));Qa.displayName="CardContent";const Za=l.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:be("flex items-center p-6 pt-0",t),...a}));Za.displayName="CardFooter";function er({isOpen:t,onClose:a,onChangePassword:s,loading:r}){const[n,m]=l.useState(""),[p,o]=l.useState(""),[u,M]=l.useState(""),[H,F]=l.useState(null),[A,P]=l.useState(!1),[C,w]=l.useState(!1),[R,K]=l.useState("default"),V={default:{background:"from-slate-50 via-blue-50 to-indigo-100",accent:"from-blue-500 to-purple-500",particles:["bg-blue-400/20","bg-purple-400/20","bg-indigo-400/20"]},sunrise:{background:"from-orange-50 via-pink-50 to-red-100",accent:"from-orange-500 to-pink-500",particles:["bg-orange-400/20","bg-pink-400/20","bg-red-400/20"]},afternoon:{background:"from-amber-50 via-yellow-50 to-orange-100",accent:"from-amber-500 to-orange-500",particles:["bg-amber-400/20","bg-yellow-400/20","bg-orange-400/20"]},evening:{background:"from-purple-50 via-indigo-50 to-blue-100",accent:"from-purple-500 to-indigo-500",particles:["bg-purple-400/20","bg-indigo-400/20","bg-blue-400/20"]},night:{background:"from-gray-800 via-gray-900 to-black",accent:"from-blue-400 to-purple-400",particles:["bg-blue-300/30","bg-purple-300/30","bg-indigo-300/30"]}};l.useEffect(()=>{const y=()=>{const j=new Date().getHours();j>=5&&j<8?K("sunrise"):j>=8&&j<12?K("default"):j>=12&&j<17?K("afternoon"):j>=17&&j<20?K("evening"):K("night")};y();const Z=setInterval(y,6e4);return()=>clearInterval(Z)},[]);const L=async y=>{if(y.preventDefault(),!n.trim()){F("Molimo unesite staru lozinku");return}if(!p.trim()){F("Molimo unesite novu lozinku");return}if(p.length<4){F("Nova lozinka mora imati najmanje 4 karaktera");return}if(p!==u){F("Nove lozinke se ne poklapaju");return}try{F(null),w(!0),await s(n,p),P(!0),setTimeout(()=>{T()},2e3)}catch(Z){F(Z.message||"Gre≈°ka pri promjeni lozinke")}finally{w(!1)}},T=()=>{m(""),o(""),M(""),F(null),P(!1),a()};if(!t)return null;const E=R==="night";return e.jsx(Be,{children:t&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:T,children:e.jsxs(f.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:`${E?"bg-gray-800":"bg-white"} rounded-2xl shadow-2xl max-w-md w-full overflow-hidden`,onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:`bg-gradient-to-r ${V[R].accent} p-6 text-white relative`,children:[e.jsx("button",{onClick:T,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Ht,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(ut,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Promjena lozinke"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Unesite staru i novu lozinku"})]})]})]}),e.jsx("div",{className:"p-6",children:A?e.jsxs(f.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(Ft,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:`text-xl font-bold ${E?"text-white":"text-gray-800"} mb-2`,children:"Lozinka promijenjena!"}),e.jsx("p",{className:`${E?"text-gray-400":"text-gray-600"}`,children:"Va≈°a lozinka je uspje≈°no a≈æurirana."})]}):e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${E?"text-gray-300":"text-gray-700"} mb-2`,children:"Stara lozinka"}),e.jsx("input",{type:"password",value:n,onChange:y=>m(y.target.value),placeholder:"Unesite staru lozinku",disabled:C,autoFocus:!0,className:`w-full px-4 py-3 border ${E?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${E?"text-gray-300":"text-gray-700"} mb-2`,children:"Nova lozinka"}),e.jsx("input",{type:"password",value:p,onChange:y=>o(y.target.value),placeholder:"Unesite novu lozinku",disabled:C,className:`w-full px-4 py-3 border ${E?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${E?"text-gray-300":"text-gray-700"} mb-2`,children:"Potvrdite novu lozinku"}),e.jsx("input",{type:"password",value:u,onChange:y=>M(y.target.value),placeholder:"Ponovite novu lozinku",disabled:C,className:`w-full px-4 py-3 border ${E?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),H&&e.jsxs(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-start gap-2 p-4 ${E?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200"} border rounded-xl`,children:[e.jsx(Pe,{className:`w-5 h-5 ${E?"text-red-400":"text-red-600"} flex-shrink-0 mt-0.5`}),e.jsx("p",{className:`text-sm ${E?"text-red-300":"text-red-800"}`,children:H})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:T,disabled:C,className:`flex-1 px-4 py-3 border ${E?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-xl disabled:opacity-50 font-medium transition-all`,children:"Otka≈æi"}),e.jsx("button",{type:"submit",disabled:C||!n.trim()||!p.trim()||!u.trim(),className:`flex-1 px-4 py-3 bg-gradient-to-r ${V[R].accent} text-white rounded-xl hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-all shadow-lg`,children:C?"Mijenjam...":"Promijeni lozinku"})]})]})})]})})})}function tr(){const[t,a]=l.useState(!1),[s,r]=l.useState(null),[n,m]=l.useState(new Date),[p,o]=l.useState([{id:1,message:"Novi podatci sinhronizovani",time:"5 min",read:!1},{id:2,message:"GitHub scraper zavr≈°en",time:"1h",read:!1},{id:3,message:"Payroll a≈æuriran",time:"2h",read:!0}]),[u,M]=l.useState(!1),[H,F]=l.useState("-"),[A,P]=l.useState("-"),[C,w]=l.useState([]),[R,K]=l.useState([]),[V,L]=l.useState(0),[T,E]=l.useState("night"),[y,Z]=l.useState({}),j=Ie(),{currentUser:J,logout:ie,changePassword:se}=xt();J?.name||J?.ime;const v={default:{background:"from-slate-50 via-blue-50 to-indigo-100",accent:"from-blue-500 to-purple-500",particles:["bg-blue-400/20","bg-purple-400/20","bg-indigo-400/20"]},sunrise:{background:"from-orange-50 via-pink-50 to-red-100",accent:"from-orange-500 to-pink-500",particles:["bg-orange-400/20","bg-pink-400/20","bg-red-400/20"]},afternoon:{background:"from-amber-50 via-yellow-50 to-orange-100",accent:"from-amber-500 to-orange-500",particles:["bg-amber-400/20","bg-yellow-400/20","bg-orange-400/20"]},evening:{background:"from-purple-50 via-indigo-50 to-blue-100",accent:"from-purple-500 to-indigo-500",particles:["bg-purple-400/20","bg-indigo-400/20","bg-blue-400/20"]},night:{background:"from-slate-900 via-blue-900 to-indigo-900",accent:"from-blue-400 to-cyan-400",particles:["bg-blue-400/20","bg-cyan-400/20","bg-indigo-400/20"]}},U=()=>e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:R.map(g=>e.jsx(f.div,{className:`absolute rounded-full ${g.color}`,style:{left:`${g.x}%`,top:`${g.y}%`,width:`${g.size}px`,height:`${g.size}px`},animate:{y:[0,-100,0],x:[0,Math.sin(g.id*.5)*50,0],opacity:[.2,.8,.2],scale:[1,1.5,1]},transition:{duration:g.duration,delay:g.delay,repeat:1/0,ease:"easeInOut"}},g.id))}),x=(g,I)=>{h(g,I)},S=g=>{N(g)},h=(g,I)=>{const c=g.currentTarget.getBoundingClientRect(),k=g.clientX-c.left,O=g.clientY-c.top,z=c.width/2,d=c.height/2,_=(O-d)/10,Y=(z-k)/10;Z(ee=>({...ee,[I]:{transform:`perspective(1000px) rotateX(${_}deg) rotateY(${Y}deg) scale3d(1.02, 1.02, 1.02)`,transition:"transform 0.1s ease-out"}}))},N=g=>{Z(I=>({...I,[g]:{transform:"perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)",transition:"transform 0.3s ease-out"}}))},b=async()=>{if(J){try{const{data:g,error:I}=await ae.from("payroll_amounts").select("neto").eq("driver_name",J.name.toLowerCase());if(I)throw I;const i=g.reduce((c,k)=>c+(k.neto||0),0);F(`${i.toFixed(2)} ‚Ç¨`)}catch{F("Gre≈°ka")}try{const{data:g,error:I}=await ae.from("payroll_amounts").select("neto, file_name, created_at").eq("driver_name",J.name.toLowerCase()).order("file_name",{ascending:!1}).limit(1);if(I)throw I;g&&g.length>0&&typeof g[0].neto=="number"?P(`${Number(g[0].neto).toFixed(2)} ‚Ç¨`):P("-")}catch{P("Gre≈°ka")}}};l.useEffect(()=>{J&&b()},[J]),p.filter(g=>!g.read).length;const B=async()=>{try{console.log("üêô Poku≈°avam da dohvatim podatke sa GitHub API...");const g="eldin007b/gls-scraper",I="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",[i,c]=g.split("/"),k=z=>{if(!z)return"Nepoznato";const d=new Date(z);if(isNaN(d.getTime()))return"Nepoznato";const _=d.getDate().toString().padStart(2,"0"),Y=(d.getMonth()+1).toString().padStart(2,"0"),ee=d.getHours().toString().padStart(2,"0"),G=d.getMinutes().toString().padStart(2,"0");return`${_}.${Y} ${ee}:${G}`};let O=await fetch(`https://api.github.com/repos/${i}/${c}/actions/runs?per_page=5`,{headers:{Accept:"application/vnd.github.v3+json",...I&&{Authorization:`token ${I}`}}});if(!O.ok&&O.status===401&&I&&(console.log("üîë Token nevaljan, poku≈°avam bez token-a..."),O=await fetch(`https://api.github.com/repos/${i}/${c}/actions/runs?per_page=5`,{headers:{Accept:"application/vnd.github.v3+json"}})),O.ok){const d=((await O.json()).workflow_runs||[]).filter(_=>{const Y=(_.name||"").toLowerCase();return Y.includes("gls scraper")||Y.includes("scraper")||Y.includes("gls")});if(d.length>0){const _=d[0];console.log("‚úÖ Na≈°ao GitHub workflow:",_);const Y=_.updated_at||_.run_started_at||_.created_at||new Date().toISOString(),ee=k(Y),G={status:_.conclusion==="success"||_.conclusion==="completed"?"completed":_.conclusion||"unknown",mode:"Automatski (GitHub)",timestamp:Y,formattedTimestamp:ee,name:_.name,repoUsed:`${i}/${c}`,raw:_};console.log("üîÑ GitHub API podaci formatovani:",G),r(G);try{localStorage.setItem("github_scraper_history",JSON.stringify([G]))}catch(oe){console.warn("‚ö†Ô∏è Neuspjelo pisanje u localStorage:",oe)}return!0}}else console.warn("‚ö†Ô∏è GitHub API vratio nenormalan odgovor:",O.status,O.statusText)}catch(g){console.error("üí• Gre≈°ka pri GitHub API pozivu:",g)}return!1};l.useEffect(()=>{const g=async()=>{try{if(console.log("üîç Poku≈°avam da uƒçitam podatke o sinhronizaciji..."),console.log("üóùÔ∏è Svi kljuƒçevi u localStorage:",Object.keys(localStorage)),await B()){console.log("ÔøΩ GitHub fetch successful, reloading saved history...");const O=localStorage.getItem("github_scraper_history");if(O){const z=JSON.parse(O);if(z.length>0){r(z[0]);return}}}const k=localStorage.getItem("github_scraper_history");if(console.log("üì¶ Raw podatci iz localStorage:",k),k){const O=JSON.parse(k);if(console.log("üìã Parsovana historija:",O),console.log("üìè Broj elemenata u historiji:",O.length),O.length>0){const z=O[0];console.log("‚è∞ Poslednja sinhronizacija:",z),r(z)}else console.log("‚ö†Ô∏è Historija je prazna"),r(null)}else{console.log("‚ùå Nema podataka u localStorage za github_scraper_history");const O=localStorage.getItem("autoSyncState");if(O)try{const z=JSON.parse(O);console.log("üîÑ Koristim autoSyncState kao fallback:",z);const d={status:"completed",mode:"Automatski",timestamp:z.lastSync?new Date(z.lastSync).toLocaleString("bs-BA"):"Nepoznato"};console.log("üîÑ Fallback podaci iz autoSync:",d),r(d)}catch(z){console.error("üí• Gre≈°ka u parsiranju autoSyncState:",z),await B()||r(null)}else console.log("‚ùå Nema ni autoSyncState podataka - poku≈°avam GitHub API"),await B()||r(null)}}catch(c){console.error("üí• Gre≈°ka prilikom uƒçitavanja podataka o sinhronizaciji:",c),r(null)}};(async()=>{await g()})();const i=setInterval(()=>{g().catch(c=>{console.error("üí• Gre≈°ka u interval sync:",c)})},3e4);return()=>clearInterval(i)},[]),l.useEffect(()=>{const g=setInterval(()=>{m(new Date)},3e4);return()=>clearInterval(g)},[]),l.useEffect(()=>{(()=>{const I=v[T],i=Array.from({length:40},(c,k)=>({id:k,x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+1,color:I.particles[Math.floor(Math.random()*I.particles.length)],duration:Math.random()*25+15,delay:Math.random()*8}));K(i)})()},[T]),l.useEffect(()=>{E("night")},[]),l.useEffect(()=>{const g=()=>{L(window.scrollY)};return window.addEventListener("scroll",g,{passive:!0}),()=>window.removeEventListener("scroll",g)},[]),l.useEffect(()=>{const g=I=>{u&&!I.target.closest(".notification-container")&&M(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[u]),l.useEffect(()=>{const g=I=>{try{const i=I.detail;if(console.log("üîî Primljen githubSync:updated event:",i),i){const c={...i,timestamp:i.timestamp&&typeof i.timestamp=="string"&&i.timestamp.indexOf("T")!==-1?i.timestamp:i.raw?.updated_at||i.raw?.run_started_at||i.raw?.created_at||i.timestamp,formattedTimestamp:i.formattedTimestamp||(i.timestamp?(()=>{try{const k=new Date(i.timestamp);if(!isNaN(k.getTime())){const O=k.getDate().toString().padStart(2,"0"),z=(k.getMonth()+1).toString().padStart(2,"0"),d=k.getHours().toString().padStart(2,"0"),_=k.getMinutes().toString().padStart(2,"0");return`${O}.${z} ${d}:${_}`}}catch{}return i.timestamp})():i.timestamp)};r(c)}}catch(i){console.error("Gre≈°ka u event handleru:",i)}};return window.addEventListener("githubSync:updated",g),()=>window.removeEventListener("githubSync:updated",g)},[]);const W=[{title:"Statistika",desc:"Grafovi i izvje≈°taji",icon:e.jsx(Lt,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/statistika",gradient:"from-purple-500 to-pink-500",hoverGradient:"from-purple-600 to-pink-600",bgColor:"bg-purple-50",iconColor:"text-purple-600"},{title:"Navigacija",desc:"Mapa i praƒáenje ruta",icon:e.jsx(Gt,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/navigacija",gradient:"from-indigo-500 to-blue-500",hoverGradient:"from-indigo-600 to-blue-600",bgColor:"bg-indigo-50",iconColor:"text-indigo-600"},{title:"Dostava",desc:"Pregled po mjesecu",icon:e.jsx($e,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/deliveries",gradient:"from-blue-500 to-cyan-500",hoverGradient:"from-blue-600 to-cyan-600",bgColor:"bg-blue-50",iconColor:"text-blue-600"},{title:"Vozaƒçi",desc:"Detaljna statistika po vozaƒçu",icon:e.jsx(Te,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/drivers",gradient:"from-emerald-500 to-teal-500",hoverGradient:"from-emerald-600 to-teal-600",bgColor:"bg-emerald-50",iconColor:"text-emerald-600"},{title:"Extra vo≈ænje",desc:"Posebne ture (Sonderfahrt)",icon:e.jsx(Wt,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/extra-rides",gradient:"from-orange-500 to-red-500",hoverGradient:"from-orange-600 to-red-600",bgColor:"bg-orange-50",iconColor:"text-orange-600"},{title:"O aplikaciji",desc:"Informacije i pomoƒá",icon:e.jsx(qt,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/about",gradient:"from-gray-500 to-slate-500",hoverGradient:"from-gray-600 to-slate-600",bgColor:"bg-gray-50",iconColor:"text-gray-600"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`min-h-screen bg-gradient-to-br ${v[T].background} relative transition-all duration-1000`,children:[e.jsx(U,{}),e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx(f.div,{style:{transform:`translateY(${V*.2}px) translateX(${V*.1}px)`},className:`absolute top-20 left-10 w-96 h-96 bg-gradient-to-r ${v[T].accent} rounded-full mix-blend-multiply filter blur-3xl`,animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(f.div,{style:{transform:`translateY(${V*-.15}px) translateX(${V*-.05}px)`},className:"absolute top-40 right-10 w-80 h-80 bg-gradient-to-r from-yellow-400/40 to-pink-400/40 rounded-full mix-blend-multiply filter blur-2xl",animate:{scale:[1.1,1,1.1],opacity:[.4,.6,.4]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2}}),e.jsx(f.div,{style:{transform:`translateY(${V*.25}px) translateX(${V*-.08}px)`},className:"absolute -bottom-8 left-20 w-72 h-72 bg-gradient-to-r from-emerald-400/30 to-blue-400/30 rounded-full mix-blend-multiply filter blur-xl",animate:{scale:[1,1.2,1],opacity:[.25,.45,.25]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:4}})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-start py-8 px-4",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[e.jsx(f.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8 relative z-[1000]",style:{transform:`translateY(${V*.1}px)`},children:e.jsxs("div",{className:`${T==="night"?"bg-gray-800/20":"bg-white/20"} backdrop-blur-3xl border ${T==="night"?"border-white/10":"border-white/30"} rounded-3xl p-4 md:p-6 shadow-2xl relative`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${v[T].accent.replace("from-","from-").replace("to-","to-")}/10 rounded-3xl`}),e.jsx(f.div,{className:`absolute inset-0 rounded-3xl bg-gradient-to-r ${v[T].accent} p-[1px]`,animate:{opacity:[0,.3,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:`w-full h-full rounded-3xl ${T==="night"?"bg-gray-800/20":"bg-white/20"} backdrop-blur-3xl`})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col lg:hidden gap-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-white/20 backdrop-blur-sm rounded-xl border border-white/30",style:{transform:"scale(1.1)",filter:"drop-shadow(0 8px 32px rgba(0,0,0,0.3))"}}),e.jsx("h1",{className:"relative text-2xl sm:text-3xl md:text-4xl font-black tracking-wider leading-tight text-slate-800 px-4 py-2 md:px-6 md:py-3",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8), 0 0 4px rgba(255,255,255,0.6)",fontWeight:"900",letterSpacing:"0.05em"},children:"B&D Evidencija"})]})})}),e.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-sm rounded-full border border-white/30",style:{filter:"drop-shadow(0 4px 16px rgba(0,0,0,0.2))"}}),e.jsxs("div",{className:"relative flex items-center gap-2 px-3 py-1.5",children:[e.jsx(Ce,{className:"w-3 h-3 text-slate-700"}),e.jsx("span",{className:"text-xs font-semibold text-slate-800",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8)"},children:(()=>{const g=n.getDate().toString().padStart(2,"0"),I=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getFullYear(),c=n.getHours().toString().padStart(2,"0"),k=n.getMinutes().toString().padStart(2,"0");return`${g}.${I}.${i} ${c}:${k}`})()})]})]}),e.jsx(lt,{user:{...J,ukupnaZarada:H,zadnjaPlata:A},onChangePassword:()=>a(!0),onLogout:ie,currentTheme:T,themes:v})]})]}),e.jsxs("div",{className:"hidden lg:flex lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-md rounded-2xl border border-white/40",style:{transform:"scale(1.1)",filter:"drop-shadow(0 12px 40px rgba(0,0,0,0.3))"}}),e.jsx("h1",{className:"relative text-3xl md:text-4xl font-black tracking-wide text-slate-800 px-6 py-3",style:{textShadow:"2px 2px 4px rgba(255,255,255,0.8), 0 0 6px rgba(255,255,255,0.6)",fontWeight:"900",letterSpacing:"0.05em"},children:"B&D Evidencija"})]})})}),e.jsx("div",{className:"flex justify-center flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-md rounded-full border border-white/30",style:{filter:"drop-shadow(0 6px 20px rgba(0,0,0,0.25))"}}),e.jsxs("div",{className:"relative flex items-center gap-2 px-4 py-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-slate-700"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8)"},children:(()=>{const g=n.getDate().toString().padStart(2,"0"),I=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getFullYear(),c=n.getHours().toString().padStart(2,"0"),k=n.getMinutes().toString().padStart(2,"0");return`${g}.${I}.${i} ${c}:${k}`})()})]})]})}),e.jsx(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.6},className:"flex items-center gap-3 justify-end flex-shrink-0",children:e.jsx(lt,{user:{...J,ukupnaZarada:H,zadnjaPlata:A},onChangePassword:()=>a(!0),onLogout:ie,currentTheme:T,themes:v})})]})]})]})}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:W.map((g,I)=>e.jsx(f.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,delay:.6+I*.1,type:"spring",stiffness:100},whileHover:{y:-12,scale:1.05,rotateX:5,rotateY:5,transition:{duration:.3}},whileTap:{scale:.95},className:"group perspective-1000",style:{transformStyle:"preserve-3d",...y[`card-${I}`]},onMouseEnter:i=>x(i,`card-${I}`),onMouseLeave:()=>S(`card-${I}`),onMouseMove:i=>h(i,`card-${I}`),children:e.jsxs(Ct,{className:`cursor-pointer relative overflow-hidden ${T==="night"?"bg-gray-800/30 shadow-inner shadow-gray-900/20":"bg-white/40 shadow-inner shadow-gray-300/20"} backdrop-blur-2xl border-0 transition-all duration-500 rounded-3xl p-4 md:p-8 min-h-[180px] md:h-auto flex flex-col justify-between group-hover:shadow-2xl group-hover:backdrop-blur-3xl`,style:{boxShadow:T==="night"?"12px 12px 24px rgba(0,0,0,0.5), -12px -12px 24px rgba(255,255,255,0.02), inset 2px 2px 6px rgba(255,255,255,0.1)":"12px 12px 24px rgba(0,0,0,0.1), -12px -12px 24px rgba(255,255,255,0.8), inset 2px 2px 6px rgba(255,255,255,0.5)",transformStyle:"preserve-3d"},onClick:()=>j(g.path),children:[e.jsx(f.div,{className:`absolute inset-0 bg-gradient-to-br ${g.gradient} rounded-3xl`,initial:{opacity:0},whileHover:{opacity:.15,scale:1.1},transition:{duration:.4}}),e.jsxs(f.div,{className:"absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-500",initial:{opacity:0},whileHover:{opacity:.3},children:[e.jsx("div",{className:"absolute top-2 left-2 w-1 h-1 bg-white rounded-full animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"absolute top-4 right-3 w-0.5 h-0.5 bg-white rounded-full animate-pulse",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"absolute bottom-3 left-4 w-1.5 h-1.5 bg-white rounded-full animate-pulse",style:{animationDelay:"400ms"}}),e.jsx("div",{className:"absolute bottom-2 right-2 w-0.5 h-0.5 bg-white rounded-full animate-pulse",style:{animationDelay:"600ms"}})]}),e.jsxs(f.div,{className:`w-12 h-12 md:w-16 md:h-16 ${g.bgColor} rounded-2xl flex items-center justify-center mb-2 md:mb-6 relative z-10`,style:{boxShadow:T==="night"?"6px 6px 12px rgba(0,0,0,0.6), -6px -6px 12px rgba(255,255,255,0.05), inset 2px 2px 4px rgba(255,255,255,0.1)":"6px 6px 12px rgba(0,0,0,0.15), -6px -6px 12px rgba(255,255,255,0.9), inset 2px 2px 4px rgba(255,255,255,0.7)"},whileHover:{scale:1.15,rotateY:15,rotateX:15,transition:{duration:.3}},initial:{rotateY:0,rotateX:0},children:[e.jsx(f.div,{className:g.iconColor,whileHover:{rotate:[0,5,-5,0],scale:1.1},transition:{rotate:{duration:.5,ease:"easeInOut"},scale:{duration:.2}},children:g.icon}),e.jsx(f.div,{className:"absolute inset-0 rounded-2xl bg-gradient-to-tr from-white/20 to-transparent opacity-0",whileHover:{opacity:1,backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:.6}})]}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[e.jsx(f.h3,{className:`text-sm md:text-xl font-bold mb-1 md:mb-2 ${T==="night"?"text-gray-200 group-hover:text-white":"text-gray-800 group-hover:text-gray-900"} transition-colors leading-tight`,whileHover:{scale:1.05,x:2},transition:{duration:.2},children:g.title}),e.jsx(f.p,{className:`text-xs md:text-base ${T==="night"?"text-gray-400 group-hover:text-gray-300":"text-gray-600 group-hover:text-gray-700"} transition-colors leading-relaxed mt-2`,initial:{opacity:.8},whileHover:{opacity:1,y:-1},transition:{duration:.2},children:g.desc})]}),e.jsx(f.div,{className:"absolute top-4 md:top-6 right-4 md:right-6 z-20",initial:{opacity:0,x:-10,rotate:-45},whileHover:{opacity:1,x:0,rotate:0,scale:1.2,transition:{duration:.3}},children:e.jsx(f.div,{animate:{y:[0,-2,0],rotate:[0,5,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(Ae,{className:`w-4 h-4 md:w-5 md:h-5 ${T==="night"?"text-gray-300":"text-gray-500"}`})})}),e.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${g.gradient} transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left`})]})},I))}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.2},className:"mt-16 text-center relative z-10",children:e.jsxs(f.div,{className:`${T==="night"?"bg-gray-800/30":"bg-white/30"} backdrop-blur-xl rounded-2xl p-6 border ${T==="night"?"border-white/10":"border-gray-200/30"} relative overflow-hidden`,style:{boxShadow:T==="night"?"8px 8px 16px rgba(0,0,0,0.4), -8px -8px 16px rgba(255,255,255,0.02)":"8px 8px 16px rgba(0,0,0,0.08), -8px -8px 16px rgba(255,255,255,0.8)"},whileHover:{scale:1.02,transition:{duration:.3}},children:[e.jsx(f.div,{className:`absolute inset-0 bg-gradient-to-r ${v[T].accent} opacity-5`,animate:{backgroundPosition:["0% 0%","100% 100%","0% 0%"]},transition:{duration:8,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}}),e.jsxs(f.p,{className:`text-sm ${T==="night"?"text-gray-300":"text-gray-600"} relative z-10`,initial:{opacity:.8},whileHover:{opacity:1},children:["¬© ",new Date().getFullYear()," B&D Evidencija. Sva prava zadr≈æana.",e.jsx(f.span,{className:"inline-block ml-2",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"‚ú®"})]})]})})]})})]}),e.jsx(er,{isOpen:t,onClose:()=>a(!1),onChangePassword:se,loading:!1})]})}const yr=Object.freeze(Object.defineProperty({__proto__:null,default:tr},Symbol.toStringTag,{value:"Module"}));function It(t,a,s=[]){return l.useMemo(()=>{const r=new Date(t,a,1),n=new Date(t,a+1,0);return Zt({start:r,end:n}).filter(p=>!ea(p)&&!(s||[]).includes(pe(p,"yyyy-MM-dd")))},[t,a,s])}function _t(t={}){return Ue({queryKey:ne.drivers.all,queryFn:async()=>{console.log("üöó Fetching drivers from Supabase...");const{data:a,error:s}=await ae.from("drivers").select("*").order("tura",{ascending:!0});if(s)throw s;return console.log("‚úÖ Drivers loaded from Supabase:",a?.length||0),a||[]},staleTime:1800*1e3,...t})}function ar(t,a,s={}){return Ue({queryKey:ne.deliveries.byMonth(t,a),queryFn:()=>Xt(t,a),staleTime:180*1e3,enabled:t!==void 0&&a!==void 0,...s})}function rr(t,a,s,r={}){return Ue({queryKey:ne.deliveries.byDriver(t,a,s),queryFn:async()=>{const n=new Date(a,s,1),m=new Date(a,s+1,0),p=n.toISOString().split("T")[0],o=m.toISOString().split("T")[0],{data:u,error:M}=await ae.from("deliveries").select("*").eq("driver",t).gte("date",p).lte("date",o).order("date",{ascending:!0});if(M)throw M;return u||[]},enabled:!!t&&a!==void 0&&s!==void 0,staleTime:180*1e3,...r})}function Mt(t,a={}){return Ue({queryKey:ne.holidays.byYear(t),queryFn:()=>Qt(t),staleTime:1800*1e3,enabled:t!==void 0,...a})}const sr=new Date().getFullYear(),or=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function nr(){const t=Ie(),[a,s]=l.useState(sr),[r,n]=l.useState(new Date().getMonth()),[m,p]=l.useState(new Date),[o,u]=l.useState("night"),[M,H]=l.useState({}),F={default:{background:"from-blue-50 via-white to-purple-50"},sunrise:{background:"from-orange-100 via-pink-100 to-yellow-100"},afternoon:{background:"from-blue-100 via-cyan-100 to-sky-100"},evening:{background:"from-purple-100 via-pink-100 to-indigo-100"},night:{background:"from-slate-900 via-blue-900 to-indigo-900"}},{data:A=[],isLoading:P,error:C}=_t(),{data:w=[],isLoading:R,error:K}=ar(a,r),{data:V=[]}=Mt(a),L=It(a,r,V.map(v=>v.date));console.log("üöö Deliveries query:",{deliveries:w,deliveriesLoading:R,deliveriesError:K,year:a,month:r,drivers:A.length,workdays:L.length});const T=P||R;l.useEffect(()=>{u("night")},[]),l.useEffect(()=>{const v=setInterval(()=>p(new Date),6e4);return()=>clearInterval(v)},[]);const E=l.useRef(!1);l.useEffect(()=>{if(E.current)return;(async()=>{try{const{data:U,error:x}=await ae.from("urlaub_marks").select("date, driver").eq("is_active",!0);if(console.log("üìÖ Supabase urlaub_marks response:",{data:U,error:x}),x){console.error("‚ùå Supabase error:",x);return}const S={};U?.forEach(h=>{const N=typeof h.date=="string"?h.date.slice(0,10):h.date;S[`${N}-${h.driver}`]=!0}),console.log("‚úÖ urlaubMarks loaded:",S),H(S),E.current=!0}catch(U){console.error("‚ùå Urlaub fetch error:",U)}})()},[]);const y=l.useMemo(()=>{if(console.log("üì¶ Creating groupedData, deliveries count:",w?.length),!w||!Array.isArray(w))return console.log("üì¶ No valid deliveries data"),{};const v={};return w.forEach(U=>{v[U.date]||(v[U.date]={}),v[U.date][U.driver]=U.produktivitaet_stops||0}),Object.keys(v).forEach(U=>{if((U==="2025-11-17"||U==="2025-11-25")&&v[U][8640]){const x=v[U][8640];v[U][8610]?v[U][8610]+=x:v[U][8610]=x,delete v[U][8640]}}),console.log("üì¶ groupedData created with dates:",Object.keys(v).join(", ")),v},[w]),Z=l.useMemo(()=>{if(console.log("üéØ Creating groupedDataWithUrlaub",{workdays:L?.length,drivers:A?.length,groupedDataKeys:Object.keys(y).length,urlaubMarksKeys:Object.keys(M).length}),!L||!A||!y)return console.log("üéØ Missing required data for groupedDataWithUrlaub"),{};const v={...y},U=new Date;U.setHours(0,0,0,0);const x=new Date(a,r+1,0).getDate();for(let h=1;h<=x;h++){const N=String(r+1).padStart(2,"0"),b=String(h).padStart(2,"0"),B=`${a}-${N}-${b}`;if(new Date(a,r,h)>U)continue;Object.keys(M).some(I=>I.startsWith(B))&&!v[B]&&(v[B]={})}const S=Object.keys(v).reduce((h,N)=>{const b=v[N],B=Array.isArray(A)&&A.some(g=>g&&g.tura!==void 0&&b[g.tura]>0),W=Object.keys(M).some(g=>g.startsWith(N));return(B||W)&&(h[N]=b),h},{});return console.log("üéØ groupedDataWithUrlaub result - dates with data:",Object.keys(S).join(", ")),S},[y,M,a,r,L,A]),j=l.useMemo(()=>{if(!Array.isArray(L))return{totalWorkdays:0,passedWorkdays:0,drivers:0,remainingDays:0,totalStops:0,monthlyTarget:0,targetForWorkedDays:0,difference:0,totalAllWorked:0,targetForWorkedDaysBD:0,targetAllDaysBD:0,bilansBD:0};console.log("üìÖ Workdays data:",L);const v=L.length,U=new Set;w.forEach(d=>{d.produktivitaet_stops>0&&U.add(d.date)});const x=U.size,S=new Date,h=S.getFullYear(),N=S.getMonth();let b=0;if(a===h&&r===N){const d=S.getDate();b=L.filter(_=>new Date(_).getDate()<=d).length}else(a<h||a===h&&r<N)&&(b=v);const B=w.reduce((d,_)=>d+(_.produktivitaet_stops||0),0),W=A.filter(d=>d.aktivan),g=W.reduce((d,_)=>d+(_.target_per_day||0)*v,0),I=W.reduce((d,_)=>d+(_.target_per_day||0)*x,0),i=B-g,c=L.filter(d=>{const _=pe(d,"yyyy-MM-dd"),Y=y[_]||{};return W.reduce((G,oe)=>G+(Y[oe.tura]||0),0)>0}),k=c.reduce((d,_)=>{const Y=pe(_,"yyyy-MM-dd"),ee=y[Y]||{};return d+W.reduce((G,oe)=>G+(ee[oe.tura]||0),0)},0),O=W.reduce((d,_)=>d+(_.target_per_day||0)*v,0),z=k-O;return{totalWorkdays:v,passedWorkdays:b,drivers:W.length,remainingDays:Math.max(0,v-x),totalStops:B,monthlyTarget:g,targetForWorkedDays:I,difference:i,totalAllWorked:k,targetForWorkedDaysBD:W.reduce((d,_)=>d+(_.target_per_day||0)*c.length,0),bilansBD:z}},[L,w,A,a,r,y]),J=()=>{r===0?(n(11),s(a-1)):n(r-1)},ie=()=>{r===11?(n(0),s(a+1)):n(r+1)},se=()=>`bg-gradient-to-br ${F[o].background}`;if(C||K){const v=C||K;return console.error("Gre≈°ka u DeliveriesScreen:",v),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx(Pe,{className:"w-16 h-16 mx-auto mb-4 text-red-500"}),e.jsx("p",{children:"Gre≈°ka pri uƒçitavanju podataka"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:v?.message})]})})}return e.jsxs("div",{className:`min-h-screen ${se()} ${o==="night"?"text-white":"text-gray-800"}`,children:[e.jsx(f.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`${o==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/50"} backdrop-blur-xl border-b sticky top-0 z-50`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:`p-2 rounded-xl ${o==="night"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(Ye,{className:"w-6 h-6"})}),e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:"Pregled Dostava"})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`mb-6 p-4 md:p-6 rounded-2xl ${o==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:J,className:`p-2 rounded-lg ${o==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Ee,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-center",children:e.jsxs("h2",{className:`text-2xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:[or[r]," ",a]})}),e.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ie,className:`p-2 rounded-lg ${o==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl ${o==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ce,{className:`w-5 h-5 ${o==="night"?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"}`,children:"Radnih dana"})]}),e.jsxs("p",{className:`text-2xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:[j.passedWorkdays,"/",j.totalWorkdays]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${o==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Te,{className:`w-5 h-5 ${o==="night"?"text-green-400":"text-green-600"}`}),e.jsx("span",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"}`,children:"Vozaƒça"})]}),e.jsx("p",{className:`text-2xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:j.drivers})]}),e.jsxs("div",{className:`p-4 rounded-xl ${o==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Re,{className:`w-5 h-5 ${o==="night"?"text-purple-400":"text-purple-600"}`}),e.jsx("span",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"}`,children:"Ukupno"})]}),e.jsx("p",{className:`text-2xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:j.totalAllWorked})]}),e.jsxs("div",{className:`p-4 rounded-xl ${o==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[j.bilansBD>=0?e.jsx(Ae,{className:"w-5 h-5",style:{color:o==="night"?"#4ade80":"#15803d"}}):e.jsx(gt,{className:"w-5 h-5",style:{color:o==="night"?"#fb7185":"#dc2626"}}),e.jsx("span",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"}`,children:"Bilans"})]}),e.jsxs("p",{className:"text-2xl font-black",style:{color:j.bilansBD>=0?o==="night"?"#4ade80":"#15803d":o==="night"?"#fb7185":"#dc2626",textShadow:o==="night"?"0 0 3px rgba(0,0,0,0.3)":"none"},children:[j.bilansBD>0?"+":"",j.bilansBD]})]})]})]}),T?e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:`p-8 rounded-2xl ${o==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-xl text-center`,children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:o==="night"?"text-gray-400":"text-gray-600",children:"Uƒçitavanje..."})]}):L.length===0?e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:`p-8 rounded-2xl ${o==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-xl text-center`,children:[e.jsx(Pe,{className:`w-16 h-16 mx-auto mb-4 ${o==="night"?"text-gray-600":"text-gray-400"}`}),e.jsx("p",{className:o==="night"?"text-gray-400":"text-gray-600",children:"Nema radnih dana"})]}):e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`rounded-2xl ${o==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/70 border-gray-200/30"} border backdrop-blur-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",style:{fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:o==="night"?"bg-gray-700/50":"bg-gray-100/80",children:[e.jsx("th",{className:"px-1 py-2 text-left text-xs font-bold w-16",style:{color:o==="night"?"#fff":"#1f2937"},children:"Datum"}),A.filter(v=>v.aktivan).map(v=>e.jsxs("th",{className:"px-1 py-2 text-center text-xs font-bold",style:{color:o==="night"?"#fff":"#1f2937"},children:[e.jsx("div",{className:"font-semibold",children:v.ime}),e.jsx("div",{className:"text-[10px] opacity-70",children:v.tura})]},v.tura)),e.jsxs("th",{className:"px-1 py-2 text-center text-xs font-bold w-16",style:{color:o==="night"?"#fff":"#1f2937"},children:[e.jsx("div",{className:"font-semibold",children:"Ukupno"}),e.jsx("div",{className:"text-[10px] opacity-70",children:"B&D"})]})]})}),e.jsx("tbody",{children:Object.keys(Z).sort((v,U)=>v<U?-1:v>U?1:0).map((v,U)=>{const x=Z[v]||{},S=A.filter(N=>N.aktivan).reduce((N,b)=>N+(x[b.tura]||0),0),h=V.some(N=>N.date===v);return e.jsxs(f.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:U*.02},className:`border-t ${o==="night"?"border-gray-700/50":"border-gray-200/50"} ${h?o==="night"?"bg-red-900/20":"bg-red-50/70":""}`,children:[e.jsx("td",{className:"px-1 py-1.5 text-xs font-bold",style:{color:o==="night"?"#e5e7eb":"#374151"},children:pe(new Date(v),"dd.MM.")}),A.filter(N=>N.aktivan).map(N=>{const b=x[N.tura],B=N.target_per_day||0,W=b>=B,g=`${v}-${N.tura}`,I=M[g],i=o==="night"?"#4ade80":"#15803d",c=o==="night"?"#fb7185":"#dc2626";return e.jsx("td",{className:"px-1 py-1.5 text-center text-xs font-extrabold",style:{color:I?o==="night"?"#f59e0b":"#d97706":b?W?i:c:"#9ca3af",fontWeight:"900",textShadow:(b||I)&&o==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:I?"Urlaub":b||"‚Äì"},N.tura)}),e.jsx("td",{className:"px-1 py-1.5 text-center text-xs font-extrabold",style:{color:S>=300?o==="night"?"#4ade80":"#15803d":S>0?o==="night"?"#fb7185":"#dc2626":"#9ca3af",fontWeight:"900",textShadow:S>0&&o==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:S||"‚Äì"})]},v)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:`border-t-2 ${o==="night"?"border-gray-600 bg-gray-700/70":"border-gray-400 bg-gray-200/80"}`,children:[e.jsx("td",{className:"px-1 py-2 text-xs font-extrabold",style:{color:o==="night"?"#fff":"#1f2937"},children:"Ukupno"}),A.filter(v=>v.aktivan).map(v=>{const U=L.filter(g=>{const I=pe(g,"yyyy-MM-dd");return(y[I]||{})[v.tura]>0}),x=U.reduce((g,I)=>{const i=pe(I,"yyyy-MM-dd"),c=y[i]||{};return g+(c[v.tura]||0)},0),S=(v.target_per_day||0)*L.length,h=x-S,N=o==="night"?"#4ade80":"#15803d",b=o==="night"?"#fb7185":"#dc2626",B=x>=(v.target_per_day||0)*U.length?N:b,W=h>=0?N:b;return e.jsxs("td",{className:"px-1 py-2 text-center",children:[e.jsx("div",{className:"text-xs font-extrabold",style:{color:B,textShadow:o==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:x}),e.jsxs("div",{className:"text-[10px] font-black",style:{color:W,textShadow:o==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:["(",h>0?"+":"",h,")"]})]},v.tura)}),e.jsx("td",{className:"px-1 py-2 text-center",children:(()=>{const v=L.filter(g=>{const I=pe(g,"yyyy-MM-dd"),i=y[I]||{};return A.filter(k=>k.aktivan).reduce((k,O)=>k+(i[O.tura]||0),0)>0}),U=v.reduce((g,I)=>{const i=pe(I,"yyyy-MM-dd"),c=y[i]||{};return g+A.filter(k=>k.aktivan).reduce((k,O)=>k+(c[O.tura]||0),0)},0),x=A.filter(g=>g.aktivan).reduce((g,I)=>g+(I.target_per_day||0)*L.length,0),S=U-x,h=o==="night"?"#4ade80":"#15803d",N=o==="night"?"#fb7185":"#dc2626",b=A.filter(g=>g.aktivan).reduce((g,I)=>g+(I.target_per_day||0)*v.length,0),B=U>=b?h:N,W=S>=0?h:N;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs font-extrabold",style:{color:B,textShadow:o==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:U}),e.jsxs("div",{className:"text-[10px] font-black",style:{color:W,textShadow:o==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:["(",S>0?"+":"",S,")"]})]})})()})]})})]})})})]})]})}const vr=Object.freeze(Object.defineProperty({__proto__:null,default:nr},Symbol.toStringTag,{value:"Module"}));function ir({syncStatus:t}){const a=t?.unsyncedCount===0;if(!t)return null;const s=a?"100%":"30%",r=a?"#4caf50":"#f44336";return e.jsx("div",{style:{width:"100%",height:6,backgroundColor:"#e0e0e0",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:3,width:s,backgroundColor:r,transition:"width 1s, background-color 1s"}})})}const lr=new Date().getFullYear(),ct=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function cr(){const t=Ie(),[a,s]=l.useState(lr),[r,n]=l.useState(new Date().getMonth()),[m,p]=l.useState(0),[o,u]=l.useState("night"),[M,H]=l.useState(new Date),F={default:{background:"from-blue-50 via-white to-purple-50"},sunrise:{background:"from-orange-100 via-pink-100 to-yellow-100"},afternoon:{background:"from-blue-100 via-cyan-100 to-sky-100"},evening:{background:"from-purple-100 via-pink-100 to-indigo-100"},night:{background:"from-slate-900 via-blue-900 to-indigo-900"}},A=()=>`bg-gradient-to-br ${(F[o]||F.night).background}`;l.useEffect(()=>{u("night")},[]),l.useEffect(()=>{const i=setInterval(()=>H(new Date),6e4);return()=>clearInterval(i)},[]);const[P,C]=l.useState(!0);l.useEffect(()=>{const i=setInterval(()=>{C(c=>!c)},400);return()=>clearInterval(i)},[]);const{driverName:w}=aa(),{data:R=[],isLoading:K}=_t(),{data:V=[]}=Mt(a),[L,T]=l.useState({});l.useEffect(()=>{(async()=>{try{const{data:c,error:k}=await ae.from("urlaub_marks").select("date, driver").eq("is_active",!0);if(k)throw k;const O={};(c||[]).forEach(z=>{const d=typeof z.date=="string"?z.date.slice(0,10):z.date;O[`${d}-${z.driver}`]=!0}),T(O)}catch(c){console.error("Gre≈°ka pri dohvaƒáanju urlaub marks:",c)}})()},[]);const E=()=>{r===0?(n(11),s(a-1)):n(r-1)},y=()=>{r===11?(n(0),s(a+1)):n(r+1)},Z=()=>{p(i=>i===0?R.length-1:i-1)},j=()=>{p(i=>i===R.length-1?0:i+1)};l.useEffect(()=>{if(R.length>0){const i=w?R.findIndex(c=>c.ime===w):R.findIndex(c=>c.aktivan);i>=0&&p(i)}},[R,w]);const J=R[m]?.ime||"",ie=R[m]?.tura||"",se=R[m],{data:v=[],isLoading:U}=rr(se?.tura,a,r,{enabled:!!se}),x=U||K,S=It(a,r,V.map(i=>i.date)),h=l.useMemo(()=>{if(!v.length||!se)return[];const i=d=>{if(!d)return 0;const _=d.toString().replace("%","").replace(",",".").trim();return parseFloat(_)||0},c={};v.forEach(d=>{const _=new Date(d.date),Y=_.getMonth();if(_.getFullYear()!==a||Y!==r)return;const G=d.date;c[G]||(c[G]={date:G,stops:0,packages:0,pickupPackages:0,complaints:0,totalTime:0,realPercentage:i(d.zustellung_proc),undelivered:parseInt(d.zustellung_nedostavljeno)||0,pickupPercentage:i(d.pickup_proc),pickupUndelivered:parseInt(d.pickup_nedostavljeno)||0,firstComplaints:parseInt(d.probleme_prva)||0,secondComplaints:parseInt(d.probleme_druga)||0,stopsPerHourRaw:d.produktivitaet_stops_pro_std||"0",isUrlaubDay:!1}),c[G].stops+=d.produktivitaet_stops||0,c[G].packages+=d.zustellung_paketi||0,c[G].pickupPackages+=parseInt(d.pickup_paketi)||0,c[G].complaints+=parseInt(d.probleme_druga)||0;const le=(d.produktivitaet_dauer||"0:00").split(":"),je=(parseInt(le[0])||0)*60+(parseInt(le[1])||0);c[G].totalTime+=je});const k=new Date;k.setHours(0,0,0,0);const O=new Date(a,r+1,0).getDate();for(let d=1;d<=O;d++){const _=`${a}-${String(r+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;if(new Date(_)>k)continue;Object.keys(L).some(G=>G.startsWith(_))&&!c[_]&&(c[_]={date:_,stops:0,packages:0,pickupPackages:0,complaints:0,totalTime:0,realPercentage:0,undelivered:0,pickupPercentage:0,pickupUndelivered:0,firstComplaints:0,secondComplaints:0,stopsPerHourRaw:"0",isUrlaubDay:!1})}const z=se.tura?.toString();return z==="8610"&&Object.keys(c).forEach(d=>{const _=`${d}-${z}`;L[_]&&(c[d].isUrlaubDay=!0,c[d].stops=0,c[d].packages=0,c[d].pickupPackages=0,c[d].complaints=0,c[d].totalTime=0)}),(z==="8620"||z==="8640")&&Object.keys(c).forEach(d=>{const _=`${d}-${z}`;L[_]&&(c[d].isUrlaubDay=!0,c[d].stops=0,c[d].packages=0,c[d].pickupPackages=0,c[d].complaints=0,c[d].totalTime=0)}),Object.values(c).filter(d=>d.stops>0||d.isUrlaubDay).map(d=>{const _=d.realPercentage>0?d.realPercentage:d.stops>0?d.packages/d.stops*100:0;return{...d,percentage:_,stopsPerHour:d.totalTime>0?d.stops/(d.totalTime/60):0}}).sort((d,_)=>new Date(d.date)-new Date(_.date))},[v,a,r,se,L]),N=l.useMemo(()=>{const i=S.length,c=h.filter(X=>X.stops>0).length,k=h.reduce((X,re)=>X+re.stops,0),O=h.reduce((X,re)=>X+re.packages,0),z=c>0?k/c:0,d=c>0?O/c:0,_=new Date,Y=_.getFullYear(),ee=_.getMonth();let G=0;if(a===Y&&r===ee){const X=_.getDate();G=S.filter(re=>new Date(re).getDate()<=X).length}else a<Y||a===Y&&r<ee?G=i:G=0;const le=(se?.target_per_day||0)*i,je=k-le;return{totalWorkdays:i,passedWorkdays:G,daysWithData:c,avgPackagesPerDay:Math.round(d),avgStopsPerDay:Math.round(z),totalStops:k,totalPackages:O,difference:je}},[S,h,se,a,r]),b=i=>i.toLocaleTimeString("bs-BA",{hour:"2-digit",minute:"2-digit",hour12:!1}),B=i=>i.toLocaleDateString("bs-BA",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),W=o==="night"?"#4ade80":"#15803d",g=o==="night"?"#fb7185":"#dc2626",I="#9ca3af";return e.jsxs("div",{className:`min-h-screen ${A()} ${o==="night"?"text-white":"text-gray-800"}`,children:[e.jsx(ir,{}),e.jsx(f.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`${o==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/50"} backdrop-blur-xl border-b sticky top-0 z-50`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:`p-2 rounded-xl ${o==="night"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(Ye,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:`w-8 h-8 ${o==="night"?"text-blue-400":"text-blue-600"}`}),e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:"Vozaƒçi Statistike"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`mb-6 p-4 md:p-6 rounded-2xl ${o==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:E,className:`p-2 rounded-lg ${o==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Ee,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:`text-2xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:[ct[r]," ",a]}),e.jsxs("p",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"} mt-1`,children:[b(M)," ‚Ä¢ ",B(M)]})]}),e.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:y,className:`p-2 rounded-lg ${o==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6 mb-6",children:[e.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Z,className:`p-2 rounded-lg ${o==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Ee,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:`text-xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:J?`${J} (${ie})`:"Nema vozaƒça"}),e.jsx("p",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"} mt-1`,children:R.length>0?`${m+1} / ${R.length}`:"0 / 0"})]}),e.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:j,className:`p-2 rounded-lg ${o==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:`p-4 rounded-xl ${o==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Ce,{className:`w-6 h-6 ${o==="night"?"text-blue-400":"text-blue-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:`text-2xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:[N.passedWorkdays,"/",N.totalWorkdays]}),e.jsx("div",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"}`,children:"Radni dani"})]})]}),e.jsxs(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:`p-4 rounded-xl ${o==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Te,{className:`w-6 h-6 ${o==="night"?"text-green-400":"text-green-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:J?`${J} (${ie})`:"‚Äî"}),e.jsx("div",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"}`,children:"Vozaƒç"})]})]}),e.jsxs(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:`p-4 rounded-xl ${o==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(mt,{className:`w-6 h-6 ${o==="night"?"text-purple-400":"text-purple-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${o==="night"?"text-white":"text-gray-800"}`,children:N.totalStops}),e.jsx("div",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"}`,children:"Ukupno stopova"})]})]}),e.jsxs(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:`p-4 rounded-xl ${o==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Ae,{className:`w-6 h-6 ${N.difference>=0?o==="night"?"text-green-400":"text-green-600":o==="night"?"text-red-400":"text-red-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",style:{color:N.difference>=0?W:g},children:[N.difference>0?"+":"",N.difference]}),e.jsx("div",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"}`,children:"Bilans"})]})]})]})]}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:`rounded-2xl overflow-hidden ${o==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:x?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:`w-8 h-8 border-2 rounded-full animate-spin ${o==="night"?"border-gray-600 border-t-white":"border-gray-300 border-t-blue-600"}`}),e.jsx("p",{className:`text-sm mt-4 ${o==="night"?"text-gray-400":"text-gray-600"}`,children:"Uƒçitavanje..."})]}):h.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Re,{className:`w-12 h-12 mb-4 ${o==="night"?"text-gray-600":"text-gray-400"}`}),e.jsxs("p",{className:`text-lg font-medium mb-2 ${o==="night"?"text-white":"text-gray-900"}`,children:["Nema podataka za ",ct[r]," ",a]}),e.jsx("p",{className:`text-sm ${o==="night"?"text-gray-400":"text-gray-600"}`,children:"Odaberite vozaƒça iz liste da vidite statistiku"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-full",children:[e.jsx("thead",{className:`${o==="night"?"bg-gray-700/50 text-gray-300":"bg-gray-50 text-gray-700"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Datum"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stopovi"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Paketi"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Pickup"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Reklamacije"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Vreme (h)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Efikasnost"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stop/h"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[h.map((i,c)=>{const k=new Date(i.date),O=se?.target_per_day||0,z=i.stops>=O,d=i.isUrlaubDay;return e.jsxs(f.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+c*.05},className:`transition-colors ${o==="night"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap font-medium",children:pe(k,"dd.MM.")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap font-semibold",style:{color:d?"#f59e0b":I},children:d?"Urlaub":"Radni dan"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:d?I:z?W:g,fontWeight:"700"},children:i.stops||(d?"0":"‚Äì")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:i.packages||(d?"0":"‚Äì")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:i.pickupPackages||(d?"0":"‚Äì")}),e.jsxs("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:i.secondComplaints>0?{backgroundColor:P?"#ffffff":"#f44336",color:P?"#f44336":"#ffffff",fontWeight:"900",textAlign:"center",transition:"all 0.3s",outline:P?"2px solid #f44336":"none",outlineOffset:"-2px",borderRadius:"4px"}:{},children:[i.secondComplaints>0&&e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(Ge,{className:"w-4 h-4"}),i.secondComplaints]}),i.secondComplaints===0&&"‚Äì"]}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:i.totalTime?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Vt,{className:"w-4 h-4"}),`${(i.totalTime/60).toFixed(1)}h`]}):"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:i.percentage>=98?W:g,fontWeight:"600"},children:i.percentage?`${i.percentage.toFixed(1)}%`:"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:i.stopsPerHour?i.stopsPerHour.toFixed(1):"‚Äì"})]},c)}),e.jsxs(f.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},className:`${o==="night"?"bg-gray-700/70 font-bold":"bg-gray-50 font-bold"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:"Ukupno"})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:"‚Äî"})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:N.difference>=0?W:g,fontWeight:"900"},children:e.jsxs("strong",{children:[N.totalStops," (",N.difference>0?"+":"",N.difference,")"]})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:N.totalPackages})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:h.reduce((i,c)=>i+(c.pickupPackages||0),0)})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:h.reduce((c,k)=>c+(k.secondComplaints||0),0)>0?{backgroundColor:P?"#ffffff":"#f44336",color:P?"#f44336":"#ffffff",fontWeight:"900",transition:"all 0.3s",borderRadius:"4px",outline:P?"2px solid #f44336":"none",textAlign:"center"}:{color:W,fontWeight:"700"},children:e.jsx("strong",{children:(()=>{const i=h.reduce((c,k)=>c+(k.secondComplaints||0),0);return i>0?e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(Ge,{className:"w-4 h-4"}),i]}):i})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const i=h.reduce((c,k)=>c+(k.totalTime||0),0);return i?`${(i/60).toFixed(1)}h`:"‚Äì"})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const i=h.filter(k=>k.percentage&&k.percentage>0),c=i.length>0?i.reduce((k,O)=>k+O.percentage,0)/i.length:0;return c>0?`${c.toFixed(1)}%`:"‚Äì"})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const i=h.filter(k=>k.stopsPerHour&&k.stopsPerHour>0),c=i.length>0?(i.reduce((k,O)=>k+O.stopsPerHour,0)/i.length).toFixed(1):"‚Äì";return c!=="NaN"?c:"‚Äì"})()})})]})]})]})})})]})]})}const wr=Object.freeze(Object.defineProperty({__proto__:null,default:cr},Symbol.toStringTag,{value:"Module"})),dt=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],ze=t=>{if(!t)return"";const a=new Date(t),s=a.getDate().toString().padStart(2,"0"),r=(a.getMonth()+1).toString().padStart(2,"0"),n=a.getFullYear();return`${s}.${r}.${n}`},dr=()=>{const t=Ie(),{currentUser:a}=xt(),[s,r]=l.useState("night"),[n,m]=l.useState(null),[p,o]=l.useState([]),[u,M]=l.useState([]),[H,F]=l.useState(!0),[A,P]=l.useState(!1),[C,w]=l.useState(null),[R,K]=l.useState({}),V=l.useMemo(()=>dt[new Date().getMonth()],[]),L=l.useMemo(()=>new Date().getFullYear(),[]),T=l.useMemo(()=>({id:"sonderfahrt-8699",ime:"Sonderfahrt",tura:"8699",routes:["8696","8697","8698","8699"],aktivan:!0,target_per_day:0}),[]),E=l.useMemo(()=>[...Array.isArray(p)?p.filter(S=>S&&S.aktivan):[],T],[p,T]);l.useEffect(()=>{r("night")},[]);const y=s==="night",Z=l.useCallback(x=>x==="8610"?50:x==="8620"||x==="8630"?85:x==="8640"?80:50,[]);l.useEffect(()=>{(async()=>{try{const{data:S,error:h}=await ae.from("urlaub_marks").select("date, driver").eq("is_active",!0);if(h)throw h;const N={};(S||[]).forEach(b=>{const B=typeof b.date=="string"?b.date.slice(0,10):b.date;N[`${B}-${b.driver}`]=!0}),K(N)}catch(S){console.error("Gre≈°ka pri dohvaƒáanju urlaub marks:",S)}})()},[]),l.useEffect(()=>{(async()=>{try{const{data:S,error:h}=await ae.from("drivers").select("*").eq("aktivan",!0).order("ime",{ascending:!0});if(h)throw h;o(S||[]),console.log("üöó StatistikaScreen - Loaded drivers:",S?.length||0),console.log("üë§ Current user:",a)}catch(S){console.error("Gre≈°ka pri uƒçitavanju vozaƒça:",S),w(S.message)}finally{F(!1)}})()},[]),l.useEffect(()=>{if(!p||p.length===0||!a||n)return;const x=a.name||a.ime,S=a.username||a.tura;if(x){console.log("üîç Looking for driver with name:",x);const h=p.find(N=>N.ime===x);if(h){console.log("‚úÖ Found driver by name:",h.ime),m(h);return}}if(S){console.log("üîç Driver not found by name, trying by tura:",S);const h=p.find(N=>String(N.tura).trim()===String(S).trim());if(h){console.log("‚úÖ Found driver by tura:",h.ime),m(h);return}}console.log("‚ùå Logged-in driver not matched, selecting first driver"),m(p[0])},[a,p,n]);const j=l.useCallback(async x=>{if(!(!x||!x.tura)){P(!0);try{const S=X=>{const re=X.getTimezoneOffset()*6e4;return new Date(X.getTime()-re).toISOString().slice(0,10)},h=(X,re)=>{if(!X||!re)return!1;const ce=typeof X=="string"?X.slice(0,10):new Date(X).toISOString().slice(0,10),ye=String(re).trim();return R[`${ce}-${ye}`]===!0},N=new Date,b=S(N),B=S(new Date(N.getFullYear(),N.getMonth(),1)),W=S(new Date(N.getFullYear(),N.getMonth()+1,0)),g=S(new Date(N.getFullYear(),0,1)),I=S(new Date(N.getFullYear(),11,31)),i=Array.isArray(x?.routes)&&x.routes.length>0?x.routes.map(X=>String(X).trim()).filter(Boolean):[String(x.tura).trim()],{data:c}=await ae.from("deliveries").select("*").in("driver",i).eq("deleted",0).order("date",{ascending:!1}).limit(20),k=c?.find(X=>h(X.date,X.driver)?!1:parseInt(X?.produktivitaet_stops||0,10)>0),O=k?.date&&typeof k.date=="string"?k.date.slice(0,10):b,[z,d,_]=await Promise.all([ae.from("deliveries").select("*").in("driver",i).gte("date",`${O}T00:00:00`).lte("date",`${O}T23:59:59`).eq("deleted",0),ae.from("deliveries").select("*").in("driver",i).gte("date",B).lte("date",W).eq("deleted",0),ae.from("deliveries").select("*").in("driver",i).gte("date",g).lte("date",I).eq("deleted",0)]),Y=parseInt(x?.target_per_day??Z(x.tura)??0,10)||0,ee=(X,re)=>{if(!X||X.length===0)return{packages:0,diff:re==="day"?-Y:0,complaints:0,date:re==="day"?O:null};let ce=X;if(re==="month"){const Q=new Date,he=Q.getFullYear(),Tt=Q.getMonth();ce=X.filter(ge=>{if(!ge?.date||h(ge.date,ge.driver))return!1;const Et=typeof ge.date=="string"?ge.date.slice(0,10):ge.date,Qe=new Date(Et),Ne=ge.zustellung_paketi,Ot=Ne!=null&&Ne!==""&&!isNaN(Number(Ne))&&Number(Ne)>0;return Qe.getFullYear()===he&&Qe.getMonth()===Tt&&ge.driver==x.tura&&ge.deleted==0&&Ot})}else re==="year"?ce=X.filter(Q=>h(Q.date,Q.driver)?!1:parseInt(Q?.produktivitaet_stops||0,10)>0):re==="day"&&(ce=X.filter(Q=>h(Q.date,Q.driver)?!1:parseInt(Q?.produktivitaet_stops||0,10)>0));const ye=ce.reduce((Q,he)=>Q+(parseInt(he?.produktivitaet_stops||0,10)||0),0),Xe=ce.reduce((Q,he)=>Q+(parseInt(he?.probleme_druga||0,10)||0),0),zt=(new Set(ce.map(Q=>Q?.date?typeof Q.date=="string"?Q.date.slice(0,10):new Date(Q.date).toISOString().slice(0,10):null).filter(Boolean)).size||0)*Y,Pt=ce.length>0?ce.map(Q=>Q?.date?typeof Q.date=="string"?Q.date.slice(0,10):new Date(Q.date).toISOString().slice(0,10):null).filter(Boolean).sort((Q,he)=>new Date(he)-new Date(Q))[0]:null;return re==="day"?{packages:ye,diff:ye-Y,complaints:Xe,date:O}:{packages:ye,diff:ye-zt,complaints:Xe,date:Pt}},G=ee(z.data,"day"),oe=ee(d.data,"month"),le=ee(_.data,"year"),je=[{label:`Dostava (${G.date||""})`,value:G.diff,packages:G.packages,complaints:G.complaints,target:Y,date:G.date,dataDate:G.date},{label:`Reklamacije (${G.date||""})`,value:G.complaints,date:G.date,dataDate:G.date},{label:`Dostava za ${V}`,value:oe.diff,packages:oe.packages,complaints:oe.complaints,dataDate:oe.date},{label:`Reklamacije za ${V}`,value:oe.complaints,dataDate:oe.date},{label:`Dostava za ${L}`,value:le.diff,packages:le.packages,complaints:le.complaints,dataDate:le.date},{label:`Reklamacije za ${L}`,value:le.complaints,dataDate:le.date}];M(je)}catch(S){console.error("Gre≈°ka pri uƒçitavanju statistika:",S),w(S.message),M([])}finally{P(!1)}}},[Z,V,L,R]);l.useEffect(()=>{n&&j(n)},[n,j]);const J=[{title:u[0]?.date?ze(u[0].date):"Danas",period:u[0]?.dataDate?`Podaci: ${ze(u[0].dataDate)}`:u[0]?.label||"Danas",delivery:{value:u[0]?.packages||0,diff:u[0]?.value||0,target:u[0]?.target||0,trend:(u[0]?.value||0)>0?"up":(u[0]?.value||0)<0?"down":"neutral"},complaints:{value:u[1]?.value||0,trend:(u[1]?.value||0)===0?"good":"bad"},icon:Ce},{title:u[2]?.dataDate?dt[new Date(u[2].dataDate).getMonth()]:"Ovaj mjesec",period:u[2]?.dataDate?`Podaci do: ${ze(u[2].dataDate)}`:u[2]?.label||"Ovaj mjesec",delivery:{value:u[2]?.packages||0,diff:u[2]?.value||0,target:(u[2]?.packages||0)-(u[2]?.value||0),trend:(u[2]?.value||0)>0?"up":(u[2]?.value||0)<0?"down":"neutral"},complaints:{value:u[3]?.value||0,trend:(u[3]?.value||0)===0?"good":"bad"},icon:Bt},{title:u[4]?.dataDate?new Date(u[4].dataDate).getFullYear():"Ova godina",period:u[4]?.dataDate?`Podaci do: ${ze(u[4].dataDate)}`:u[4]?.label||"Ova godina",delivery:{value:u[4]?.packages||0,diff:u[4]?.value||0,target:(u[4]?.packages||0)-(u[4]?.value||0),trend:(u[4]?.value||0)>0?"up":(u[4]?.value||0)<0?"down":"neutral"},complaints:{value:u[5]?.value||0,trend:(u[5]?.value||0)===0?"good":"bad"},icon:Yt}],ie=x=>x==="up"?Ae:x==="down"?gt:x==="good"?Ze:x==="bad"?Jt:Re,se=(x,S=!1)=>{if(S){if(x==="good")return y?"text-green-400":"text-green-600";if(x==="bad")return y?"text-red-400":"text-red-600"}else{if(x==="up")return y?"text-green-400":"text-green-600";if(x==="down")return y?"text-red-400":"text-red-600"}return y?"text-gray-400":"text-gray-600"},v=()=>{if(!n||E.length===0)return;const x=E.findIndex(h=>h.id===n.id),S=x===0?E.length-1:x-1;m(E[S])},U=()=>{if(!n||E.length===0)return;const x=E.findIndex(h=>h.id===n.id),S=x===E.length-1?0:x+1;m(E[S])};return e.jsx("div",{className:`min-h-screen p-4 sm:p-6 lg:p-8 ${y?"bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900":"bg-gradient-to-br from-blue-50 via-white to-indigo-50"}`,children:e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:`mb-6 sm:mb-8 p-4 sm:p-6 rounded-2xl ${y?"bg-gray-800/50":"bg-white/80"} backdrop-blur-xl border ${y?"border-gray-700":"border-white/20"} shadow-xl`,children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f.button,{onClick:()=>t("/"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-xl ${y?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(Ye,{className:"w-6 h-6"})}),e.jsx(f.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"p-3 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600",children:e.jsx($e,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl sm:text-3xl font-bold ${y?"text-white":"text-gray-800"}`,children:"Statistika"}),e.jsx("p",{className:`text-sm ${y?"text-gray-400":"text-gray-600"}`,children:"Pregled performansi vozaƒça"})]})]})}),n&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 pt-4 border-t ${y?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"w-full flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f.button,{onClick:v,whileHover:{scale:1.1,x:-3,backgroundColor:y?"#374151":"#e5e7eb"},whileTap:{scale:.9,x:-5},animate:{x:[0,-2,0]},transition:{x:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2},backgroundColor:{duration:.3}},className:`p-3 rounded-lg ${y?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 shadow-lg shadow-blue-500/20":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 shadow-lg shadow-blue-500/10"} transition-all duration-200 border-2 border-transparent hover:border-blue-400/30`,children:e.jsx(Ee,{className:"w-5 h-5"})}),e.jsxs(f.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},transition:{type:"spring",stiffness:300,damping:20,duration:.4},className:"flex flex-wrap gap-4 items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:`w-5 h-5 ${y?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-lg font-bold ${y?"text-white":"text-gray-900"}`,children:n.ime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:`w-4 h-4 ${y?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${y?"text-gray-400":"text-gray-600"}`,children:["Tura ",n.tura]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{className:`w-4 h-4 ${y?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${y?"text-gray-400":"text-gray-600"}`,children:["Cilj: ",parseInt(n?.target_per_day??(n?.id==="sonderfahrt-8699"?0:Z(n.tura))??0,10)||0," stopova/dan"]})]})]},n?.id),e.jsx(f.button,{onClick:U,whileHover:{scale:1.1,x:3,backgroundColor:y?"#374151":"#e5e7eb"},whileTap:{scale:.9,x:5},animate:{x:[0,2,0]},transition:{x:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2},backgroundColor:{duration:.3}},className:`p-3 rounded-lg ${y?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 shadow-lg shadow-blue-500/20":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 shadow-lg shadow-blue-500/10"} transition-all duration-200 border-2 border-transparent hover:border-blue-400/30`,children:e.jsx(Oe,{className:"w-5 h-5"})})]})})})]}),C&&e.jsx(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`mb-6 p-4 rounded-xl ${y?"bg-red-900/30 border-red-700/50":"bg-red-50 border-red-200/50"} border`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:`w-5 h-5 ${y?"text-red-400":"text-red-600"}`}),e.jsxs("p",{className:`text-sm font-medium ${y?"text-red-400":"text-red-600"}`,children:["Gre≈°ka pri uƒçitavanju podataka: ",C]})]})}),H||A?e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[e.jsx(f.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 mb-4 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx(Re,{className:"w-8 h-8 text-white"})}),e.jsx("span",{className:`text-lg ${y?"text-gray-300":"text-gray-600"}`,children:e.jsxs(f.div,{className:"flex items-center gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx(f.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:`w-6 h-6 rounded-full border-2 border-t-transparent ${y?"border-blue-400":"border-blue-600"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(f.span,{animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:"Uƒçitavanje statistike..."}),e.jsx(f.div,{className:`h-2 mt-2 bg-gradient-to-r ${y?"from-blue-600 via-blue-400 to-blue-600":"from-blue-500 via-blue-300 to-blue-500"} rounded-full`,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:2,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}})]})]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:e.jsx(Be,{children:J.map((x,S)=>{const h=n?.id==="sonderfahrt-8699",N=x.icon,b=ie(x.delivery.trend);ie(x.complaints.trend);const B=x.complaints.value>0,W=x.delivery.target>0?x.delivery.value/x.delivery.target*100:0;return e.jsxs(f.div,{initial:{opacity:0,y:30,scale:.8,rotateX:-15},animate:{opacity:1,y:0,scale:1,rotateX:0},exit:{opacity:0,y:-30,scale:.8,rotateX:15},transition:{delay:S*.15,type:"spring",stiffness:300,damping:25,duration:.6},whileHover:{scale:1.03,y:-8,rotateY:2,transition:{duration:.3}},className:"relative group cursor-pointer",style:{perspective:"1000px"},children:[e.jsx("div",{className:`absolute inset-0 rounded-3xl border-2 shadow-2xl transform group-hover:scale-105 transition-transform duration-300 ${h?"bg-gradient-to-br from-white via-rose-50 to-white border-red-400/90 shadow-[0_18px_45px_-12px_rgba(220,38,38,0.18)]":"bg-gradient-to-br from-white via-gray-50 to-gray-100 border-gray-200/60"}`}),h&&e.jsx("div",{className:"absolute top-4 left-4 z-10 px-3 py-1 rounded-full bg-red-600 text-white text-xs font-black tracking-wide shadow-lg",children:"SONDERFAHRT"}),e.jsx("div",{className:`absolute inset-1 rounded-3xl bg-gradient-to-br pointer-events-none ${h?"from-white/70 to-transparent":"from-white/80 to-transparent"}`}),e.jsx(f.div,{className:`absolute inset-0 rounded-3xl transition-opacity duration-500 ${h?"opacity-20":"opacity-0 group-hover:opacity-100"}`,animate:{background:h?["radial-gradient(circle at 0% 0%, rgba(239, 68, 68, 0.20) 0%, transparent 58%)","radial-gradient(circle at 100% 100%, rgba(244, 63, 94, 0.18) 0%, transparent 58%)","radial-gradient(circle at 0% 100%, rgba(190, 18, 60, 0.15) 0%, transparent 58%)","radial-gradient(circle at 100% 0%, rgba(239, 68, 68, 0.20) 0%, transparent 58%)"]:["radial-gradient(circle at 0% 0%, rgba(59, 130, 246, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 100%, rgba(147, 51, 234, 0.3) 0%, transparent 50%)","radial-gradient(circle at 0% 100%, rgba(236, 72, 153, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 0%, rgba(59, 130, 246, 0.3) 0%, transparent 50%)"]},transition:{duration:4,repeat:1/0,ease:"linear"}}),B&&e.jsx(f.div,{className:"absolute inset-0 rounded-3xl bg-red-500/10 border border-red-400/30",animate:{opacity:[.3,.6,.3],scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:"relative p-8 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(f.div,{className:"relative",whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:400},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-purple-600 rounded-2xl blur-md opacity-70"}),e.jsx("div",{className:"relative p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:e.jsx(N,{className:"w-6 h-6 text-white drop-shadow-lg"})}),e.jsx(f.div,{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",animate:{scale:[1,1.3,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:`text-lg font-bold ${h?"text-red-700":"text-gray-800"}`,children:x.title}),e.jsx("p",{className:`text-sm font-medium ${h?"text-red-600":"text-gray-600"}`,children:x.period})]})]}),e.jsxs("div",{className:"space-y-6 flex-grow",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`text-sm font-bold uppercase tracking-wide ${h?"text-red-700":"text-gray-700"}`,children:"Dostavljeno"}),e.jsx(f.div,{animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"},children:e.jsx(b,{className:`w-5 h-5 ${se(x.delivery.trend)} drop-shadow-sm`})})]}),e.jsxs("div",{className:"flex items-baseline justify-between mb-4",children:[e.jsx(f.span,{className:`text-4xl font-black ${h?"text-red-700":"text-gray-900"}`,animate:{textShadow:["2px 2px 4px rgba(0,0,0,0.1)","4px 4px 8px rgba(0,0,0,0.15)","2px 2px 4px rgba(0,0,0,0.1)"]},transition:{duration:3,repeat:1/0},children:x.delivery.value}),e.jsx("span",{className:`text-lg font-bold ${h?"text-red-600":"text-gray-600"}`,children:"stopova"}),x.delivery.diff!==void 0&&x.delivery.diff!==0&&e.jsxs(f.span,{className:`px-2 py-1 rounded-full text-sm font-bold ${x.delivery.diff>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:[x.delivery.diff>0?"+":"",x.delivery.diff]})]}),x.delivery.target>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold",children:[e.jsxs("span",{className:`${h?"text-red-700":"text-gray-800"}`,children:["Cilj: ",x.delivery.target]}),e.jsxs(f.span,{className:`font-black ${W>=100?"text-green-600":W>=80?"text-blue-700":"text-red-700"}`,animate:W>=100?{scale:[1,1.15,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(34,197,94,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]}:W>=80?{scale:[1,1.08,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(59,130,246,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]}:{scale:[1,1.1,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(220,38,38,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]},transition:{duration:1.5,repeat:1/0},children:[Math.round(W),"%"]})]}),e.jsxs("div",{className:"relative h-3 bg-gray-200 rounded-full overflow-hidden border border-gray-300",children:[e.jsx(f.div,{className:`h-full rounded-full relative ${W>=100?"bg-gradient-to-r from-green-400 via-green-500 to-emerald-600":W>=80?"bg-gradient-to-r from-blue-400 via-blue-500 to-indigo-600":"bg-gradient-to-r from-red-400 via-red-500 to-red-600"}`,initial:{width:0},animate:{width:`${Math.min(W,100)}%`},transition:{duration:1.5,delay:.5,ease:"easeOut"},children:e.jsx(f.div,{className:"absolute inset-0 bg-white/30",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})}),W>=100&&e.jsx(f.div,{className:"absolute right-2 top-1/2 transform -translate-y-1/2",animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:e.jsx("span",{className:"text-xs font-bold text-white drop-shadow",children:"üéØ"})})]})]})]}),e.jsxs("div",{className:`relative p-4 rounded-2xl transition-all duration-500 border-2 ${B?"bg-red-50 border-red-200 shadow-lg shadow-red-100":"bg-green-50 border-green-200 shadow-lg shadow-green-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-sm font-bold uppercase tracking-wide ${h?"text-red-700":"text-gray-700"}`,children:"Reklamacije"}),B?e.jsx(f.div,{initial:{scale:0},animate:{rotate:[0,-10,10,-10,0],scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:e.jsx(Ge,{className:"w-5 h-5 text-red-600 drop-shadow-sm"})}):e.jsx(f.div,{initial:{scale:0},animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(Ze,{className:"w-5 h-5 text-green-600 drop-shadow-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(f.span,{className:`text-3xl font-black ${B?"text-red-700":"text-green-700"}`,animate:B?{scale:[1,1.1,1],textShadow:["1px 1px 2px rgba(0,0,0,0.1)","2px 2px 4px rgba(220, 38, 38, 0.3)","1px 1px 2px rgba(0,0,0,0.1)"]}:{textShadow:["1px 1px 2px rgba(0,0,0,0.1)","2px 2px 4px rgba(34, 197, 94, 0.3)","1px 1px 2px rgba(0,0,0,0.1)"]},transition:{duration:2,repeat:1/0},children:x.complaints.value}),B?e.jsxs(f.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200},className:"px-3 py-1 bg-red-600 text-white text-xs font-bold rounded-full shadow-lg flex items-center gap-1",children:[e.jsx("span",{children:"‚âà"}),e.jsxs("span",{children:[(x.complaints.value*80).toLocaleString(),"‚Ç¨"]})]}):e.jsx(f.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200},className:"px-3 py-1 bg-green-600 text-white text-xs font-bold rounded-full shadow-lg",children:"SAVR≈†ENO!"})]})]})]}),e.jsx(f.div,{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full shadow-lg"})})]})]},x.title)})})})]})})},kr=Object.freeze(Object.defineProperty({__proto__:null,default:dr},Symbol.toStringTag,{value:"Module"}));export{er as C,vr as D,yr as H,kr as S,lt as U,fr as a,aa as b,wr as c,br as i,ue as q,xt as u};

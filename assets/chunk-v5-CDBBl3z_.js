import{j as e,m as b,C as Rt,T as Pe,a as At,A as Be,W as Ut,K as ut,L as Ht,X as Ft,b as Gt,c as Te,d as $e,e as Ue,f as Lt,N as Wt,U as Ee,M as qt,I as Vt,g as Ye,h as Oe,i as Re,P as Ae,k as gt,l as mt,n as Le,o as Bt,p as Yt,q as Kt,r as Jt,s as Ze,t as Xt}from"./chunk-v5-4P3DX6qJ.js";import{a as c,u as Ce}from"./chunk-v5-BnSIf2SQ.js";import{s as re,g as Qt,a as Zt}from"./chunk-v5-D-tK2_gu.js";import{e as ea,i as ta,f as xe}from"./chunk-v5-CpHZO0Zi.js";import{Q as aa,u as He}from"./chunk-v5-nyoeD1-R.js";const ue={getItem:t=>window.localStorage.getItem(t),setItem:(t,a)=>window.localStorage.setItem(t,a),deleteItem:t=>window.localStorage.removeItem(t)},pt=c.createContext();function br({children:t,forceShowInit:a}){const[o,r]=c.useState(!1),[i,p]=c.useState(""),[x,n]=c.useState(""),[g,z]=c.useState("user"),[H,G]=c.useState(""),[U,T]=c.useState("#1769aa"),$=c.useCallback(()=>{const B=ue.getItem("DRIVER_TURA"),F=ue.getItem("DRIVER_NAME"),A=ue.getItem("DRIVER_ROLE"),W=ue.getItem("DEVICE_ID"),w=ue.getItem("IS_ADMIN");p(B||""),n(F||""),z(A||"user"),G(W||""),r(w==="true"),w==="true"?T("#cc0000"):F&&B&&T("#1769aa")},[]);c.useEffect(()=>{$(),typeof window<"u"&&(window.__USER_CONTEXT__={refreshStatus:$})},[$]);const X={isAdmin:o,driverTura:i,driverName:x,driverRole:g,deviceId:H,userColor:U,refreshStatus:$,resetLoginData:()=>(ue.deleteItem("DRIVER_TURA"),ue.deleteItem("DRIVER_NAME"),ue.deleteItem("DRIVER_ROLE"),ue.deleteItem("DEVICE_ID"),ue.deleteItem("IS_ADMIN"),ue.deleteItem("APP_LANG"),$(),typeof a=="function"&&a(),!0),validateDriverAccess:()=>!(!i||!H)};return e.jsx(pt.Provider,{value:X,children:t})}function ra(){const t=c.useContext(pt);if(!t)throw new Error("useUserContext mora biti kori≈°ten unutar <UserProvider>");return t}const sa=()=>({persistClient:t=>{try{const a={timestamp:Date.now(),clientState:JSON.stringify({queries:t.getQueryCache().getAll().filter(o=>{const r=o.queryKey[0];return["drivers","holidays"].includes(r)}).map(o=>({queryKey:o.queryKey,state:o.state}))})};localStorage.setItem("bde_query_cache",JSON.stringify(a))}catch(a){console.warn("Failed to persist query cache:",a)}},restoreClient:()=>{try{const t=localStorage.getItem("bde_query_cache");if(!t)return;const{timestamp:a,clientState:o}=JSON.parse(t),r=1440*60*1e3;if(Date.now()-a>r){localStorage.removeItem("bde_query_cache");return}return JSON.parse(o)}catch(t){console.warn("Failed to restore query cache:",t),localStorage.removeItem("bde_query_cache")}},removeClient:()=>{localStorage.removeItem("bde_query_cache")}}),Ke=sa(),oa=()=>{const t=new Date,a=t.getHours(),o=t.getDay();let r,i;return o>=1&&o<=5&&a>=2&&a<=9?(r=300*1e3,i="radni sat (dodaju se novi podaci)"):o>=1&&o<=5&&a>9?(r=7200*1e3,i="radni dan posle 09h"):(r=360*60*1e3,i=o===0||o===6?"vikend":"noƒá"),console.log(`üß† Smart cache: ${r/6e4} min (${i})`),r},ge=new aa({defaultOptions:{queries:{staleTime:oa(),cacheTime:14400*1e3,refetchOnWindowFocus:()=>{const t=new Date().getHours(),a=new Date().getDay();return a>=1&&a<=5&&t>=2&&t<=9},refetchOnReconnect:!0,refetchOnMount:!1,retry:2,retryDelay:t=>Math.min(1e3*2**t,3e4),suspense:!1,useErrorBoundary:!1,networkMode:"online"},mutations:{retry:1,networkMode:"online"}}}),le={drivers:{all:["drivers"]},deliveries:{all:["deliveries"],byMonth:(t,a)=>[...le.deliveries.all,"month",t,a],byYear:t=>[...le.deliveries.all,"year",t],byDriver:(t,a,o)=>[...le.deliveries.all,"driver",t,a,o],stats:(t,a)=>[...le.deliveries.all,"stats",t,a]},holidays:{all:["holidays"],byYear:t=>[...le.holidays.all,"year",t]},extraRides:{all:["extraRides"]},driverStats:{all:["driverStats"]}},yr={drivers:()=>ge.invalidateQueries({queryKey:le.drivers.all}),deliveries:()=>ge.invalidateQueries({queryKey:le.deliveries.all}),holidays:()=>ge.invalidateQueries({queryKey:le.holidays.all}),extraRides:()=>ge.invalidateQueries({queryKey:le.extraRides.all}),driverStats:()=>ge.invalidateQueries({queryKey:le.driverStats.all}),all:()=>ge.invalidateQueries()};try{const t=Ke.restoreClient();t?.queries&&t.queries.forEach(({queryKey:a,state:o})=>{o.data&&ge.setQueryData(a,o.data)})}catch(t){console.warn("Failed to restore query cache on init:",t)}let et;ge.getQueryCache().subscribe(()=>{clearTimeout(et),et=setTimeout(()=>{Ke.persistClient(ge)},1e3)});typeof window<"u"&&window.addEventListener("beforeunload",()=>{Ke.persistClient(ge)});function xt(){const[t,a]=c.useState(null),[o,r]=c.useState(!0),[i,p]=c.useState(null),x=c.useCallback(()=>{try{const T=localStorage.getItem("bde_current_user"),$=localStorage.getItem("bde_login_time");if(T&&$){const N=JSON.parse(T);if(Date.now()-parseInt($)<10080*60*1e3)return N;localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}}catch(T){console.error("Error loading user from storage:",T),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time")}return null},[]),n=c.useCallback(T=>{try{localStorage.setItem("bde_current_user",JSON.stringify(T)),localStorage.setItem("bde_login_time",Date.now().toString())}catch($){console.error("Error saving user to storage:",$)}},[]),g=c.useCallback(async T=>{console.log("üöÄ checkDriverExists called with tura:",T),r(!0),p(null);try{const{data:$,error:N}=await re.from("drivers").select("id, ime, tura, aktivan, role, password_hash").eq("tura",T.toUpperCase()).eq("aktivan",!0).single();if(N)throw console.error("Database error checking driver:",N),new Error(`Vozaƒç sa turom ${T} nije pronaƒëen ili nije aktivan`);console.log("üîç Driver check result:",{id:$.id,ime:$.ime,tura:$.tura,hasPassword:!!$.password_hash,role:$.role});const E={id:$.id,ime:$.ime,tura:$.tura,role:$.role||"driver",hasPassword:!!$.password_hash};return console.log("üéØ Returning from checkDriverExists:",E),E}catch($){throw p($.message),$}finally{r(!1)}},[]),z=c.useCallback(async(T,$)=>{r(!0),p(null);try{const N=btoa($),{error:E}=await re.from("drivers").update({password_hash:N,last_login:new Date}).eq("id",T);if(E)throw new Error("Gre≈°ka pri postavljanju lozinke");return!0}catch(N){throw p(N.message),N}finally{r(!1)}},[]),H=c.useCallback(async(T,$)=>{r(!0),p(null);try{const{data:N,error:E}=await re.from("drivers").select("*").eq("tura",T.toUpperCase()).eq("aktivan",!0).single();if(E)throw console.error("Database error during login:",E),new Error(`Vozaƒç sa turom ${T} nije pronaƒëen ili nije aktivan`);if(console.log("üîç Driver found for login:",{tura:N.tura,ime:N.ime,hasPassword:!!N.password_hash,role:N.role}),!N.password_hash)throw new Error("Vozaƒç nema postavljenu lozinku. Kontaktirajte administratora.");if(!(N.password_hash===$||N.password_hash===btoa($)))throw new Error("Neispravna lozinka");await re.from("drivers").update({last_login:new Date}).eq("id",N.id);const B={id:N.id,username:N.tura,name:N.ime,role:N.role||"driver",loginTime:Date.now()};return a(B),n(B),B}catch(N){throw p(N.message),N}finally{r(!1)}},[n]),G=c.useCallback(async(T,$)=>{if(!t)throw new Error("Morate biti ulogovani");r(!0),p(null);try{const{data:N,error:E}=await re.from("drivers").select("password_hash").eq("id",t.id).single();if(E)throw new Error("Gre≈°ka pri provjeri korisnika");if(!(N.password_hash===T||N.password_hash===btoa(T)))throw new Error("Stara lozinka nije ispravna");const B=btoa($),{error:F}=await re.from("drivers").update({password_hash:B}).eq("id",t.id);if(F)throw new Error("Gre≈°ka pri a≈æuriranju lozinke");return!0}catch(N){throw p(N.message),N}finally{r(!1)}},[t]),U=c.useCallback(()=>{a(null),localStorage.removeItem("bde_current_user"),localStorage.removeItem("bde_login_time"),p(null),console.log("‚úÖ User logged out")},[]);return c.useEffect(()=>{const T=x();T&&a(T),r(!1)},[x]),{currentUser:t,loading:o,error:i,checkDriverExists:g,setInitialPassword:z,login:H,changePassword:G,logout:U,isAuthenticated:!!t}}function tt(t,a){if(typeof t=="function")return t(a);t!=null&&(t.current=a)}function na(...t){return a=>{let o=!1;const r=t.map(i=>{const p=tt(i,a);return!o&&typeof p=="function"&&(o=!0),p});if(o)return()=>{for(let i=0;i<r.length;i++){const p=r[i];typeof p=="function"?p():tt(t[i],null)}}}}function ia(t){const a=ca(t),o=c.forwardRef((r,i)=>{const{children:p,...x}=r,n=c.Children.toArray(p),g=n.find(ua);if(g){const z=g.props.children,H=n.map(G=>G===g?c.Children.count(z)>1?c.Children.only(null):c.isValidElement(z)?z.props.children:null:G);return e.jsx(a,{...x,ref:i,children:c.isValidElement(z)?c.cloneElement(z,void 0,H):null})}return e.jsx(a,{...x,ref:i,children:p})});return o.displayName=`${t}.Slot`,o}var la=ia("Slot");function ca(t){const a=c.forwardRef((o,r)=>{const{children:i,...p}=o;if(c.isValidElement(i)){const x=ma(i),n=ga(p,i.props);return i.type!==c.Fragment&&(n.ref=r?na(r,x):x),c.cloneElement(i,n)}return c.Children.count(i)>1?c.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var da=Symbol("radix.slottable");function ua(t){return c.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===da}function ga(t,a){const o={...a};for(const r in a){const i=t[r],p=a[r];/^on[A-Z]/.test(r)?i&&p?o[r]=(...n)=>{const g=p(...n);return i(...n),g}:i&&(o[r]=i):r==="style"?o[r]={...i,...p}:r==="className"&&(o[r]=[i,p].filter(Boolean).join(" "))}return{...t,...o}}function ma(t){let a=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,o=a&&"isReactWarning"in a&&a.isReactWarning;return o?t.ref:(a=Object.getOwnPropertyDescriptor(t,"ref")?.get,o=a&&"isReactWarning"in a&&a.isReactWarning,o?t.props.ref:t.props.ref||t.ref)}function ht(t){var a,o,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(a=0;a<i;a++)t[a]&&(o=ht(t[a]))&&(r&&(r+=" "),r+=o)}else for(o in t)t[o]&&(r&&(r+=" "),r+=o);return r}function ft(){for(var t,a,o=0,r="",i=arguments.length;o<i;o++)(t=arguments[o])&&(a=ht(t))&&(r&&(r+=" "),r+=a);return r}const at=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,rt=ft,pa=(t,a)=>o=>{var r;if(a?.variants==null)return rt(t,o?.class,o?.className);const{variants:i,defaultVariants:p}=a,x=Object.keys(i).map(z=>{const H=o?.[z],G=p?.[z];if(H===null)return null;const U=at(H)||at(G);return i[z][U]}),n=o&&Object.entries(o).reduce((z,H)=>{let[G,U]=H;return U===void 0||(z[G]=U),z},{}),g=a==null||(r=a.compoundVariants)===null||r===void 0?void 0:r.reduce((z,H)=>{let{class:G,className:U,...T}=H;return Object.entries(T).every($=>{let[N,E]=$;return Array.isArray(E)?E.includes({...p,...n}[N]):{...p,...n}[N]===E})?[...z,G,U]:z},[]);return rt(t,x,g,o?.class,o?.className)},Je="-",xa=t=>{const a=fa(t),{conflictingClassGroups:o,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:x=>{const n=x.split(Je);return n[0]===""&&n.length!==1&&n.shift(),bt(n,a)||ha(x)},getConflictingClassGroupIds:(x,n)=>{const g=o[x]||[];return n&&r[x]?[...g,...r[x]]:g}}},bt=(t,a)=>{if(t.length===0)return a.classGroupId;const o=t[0],r=a.nextPart.get(o),i=r?bt(t.slice(1),r):void 0;if(i)return i;if(a.validators.length===0)return;const p=t.join(Je);return a.validators.find(({validator:x})=>x(p))?.classGroupId},st=/^\[(.+)\]$/,ha=t=>{if(st.test(t)){const a=st.exec(t)[1],o=a?.substring(0,a.indexOf(":"));if(o)return"arbitrary.."+o}},fa=t=>{const{theme:a,classGroups:o}=t,r={nextPart:new Map,validators:[]};for(const i in o)We(o[i],r,i,a);return r},We=(t,a,o,r)=>{t.forEach(i=>{if(typeof i=="string"){const p=i===""?a:ot(a,i);p.classGroupId=o;return}if(typeof i=="function"){if(ba(i)){We(i(r),a,o,r);return}a.validators.push({validator:i,classGroupId:o});return}Object.entries(i).forEach(([p,x])=>{We(x,ot(a,p),o,r)})})},ot=(t,a)=>{let o=t;return a.split(Je).forEach(r=>{o.nextPart.has(r)||o.nextPart.set(r,{nextPart:new Map,validators:[]}),o=o.nextPart.get(r)}),o},ba=t=>t.isThemeGetter,ya=t=>{if(t<1)return{get:()=>{},set:()=>{}};let a=0,o=new Map,r=new Map;const i=(p,x)=>{o.set(p,x),a++,a>t&&(a=0,r=o,o=new Map)};return{get(p){let x=o.get(p);if(x!==void 0)return x;if((x=r.get(p))!==void 0)return i(p,x),x},set(p,x){o.has(p)?o.set(p,x):i(p,x)}}},qe="!",Ve=":",va=Ve.length,wa=t=>{const{prefix:a,experimentalParseClassName:o}=t;let r=i=>{const p=[];let x=0,n=0,g=0,z;for(let $=0;$<i.length;$++){let N=i[$];if(x===0&&n===0){if(N===Ve){p.push(i.slice(g,$)),g=$+va;continue}if(N==="/"){z=$;continue}}N==="["?x++:N==="]"?x--:N==="("?n++:N===")"&&n--}const H=p.length===0?i:i.substring(g),G=ka(H),U=G!==H,T=z&&z>g?z-g:void 0;return{modifiers:p,hasImportantModifier:U,baseClassName:G,maybePostfixModifierPosition:T}};if(a){const i=a+Ve,p=r;r=x=>x.startsWith(i)?p(x.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:x,maybePostfixModifierPosition:void 0}}if(o){const i=r;r=p=>o({className:p,parseClassName:i})}return r},ka=t=>t.endsWith(qe)?t.substring(0,t.length-1):t.startsWith(qe)?t.substring(1):t,ja=t=>{const a=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let p=[];return r.forEach(x=>{x[0]==="["||a[x]?(i.push(...p.sort(),x),p=[]):p.push(x)}),i.push(...p.sort()),i}},Na=t=>({cache:ya(t.cacheSize),parseClassName:wa(t),sortModifiers:ja(t),...xa(t)}),Sa=/\s+/,Da=(t,a)=>{const{parseClassName:o,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:p}=a,x=[],n=t.trim().split(Sa);let g="";for(let z=n.length-1;z>=0;z-=1){const H=n[z],{isExternal:G,modifiers:U,hasImportantModifier:T,baseClassName:$,maybePostfixModifierPosition:N}=o(H);if(G){g=H+(g.length>0?" "+g:g);continue}let E=!!N,X=r(E?$.substring(0,N):$);if(!X){if(!E){g=H+(g.length>0?" "+g:g);continue}if(X=r($),!X){g=H+(g.length>0?" "+g:g);continue}E=!1}const B=p(U).join(":"),F=T?B+qe:B,A=F+X;if(x.includes(A))continue;x.push(A);const W=i(X,E);for(let w=0;w<W.length;++w){const ee=W[w];x.push(F+ee)}g=H+(g.length>0?" "+g:g)}return g};function $a(){let t=0,a,o,r="";for(;t<arguments.length;)(a=arguments[t++])&&(o=yt(a))&&(r&&(r+=" "),r+=o);return r}const yt=t=>{if(typeof t=="string")return t;let a,o="";for(let r=0;r<t.length;r++)t[r]&&(a=yt(t[r]))&&(o&&(o+=" "),o+=a);return o};function Ca(t,...a){let o,r,i,p=x;function x(g){const z=a.reduce((H,G)=>G(H),t());return o=Na(z),r=o.cache.get,i=o.cache.set,p=n,n(g)}function n(g){const z=r(g);if(z)return z;const H=Da(g,o);return i(g,H),H}return function(){return p($a.apply(null,arguments))}}const ae=t=>{const a=o=>o[t]||[];return a.isThemeGetter=!0,a},vt=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,wt=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ia=/^\d+\/\d+$/,_a=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ma=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,za=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Pa=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ta=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,we=t=>Ia.test(t),V=t=>!!t&&!Number.isNaN(Number(t)),he=t=>!!t&&Number.isInteger(Number(t)),Fe=t=>t.endsWith("%")&&V(t.slice(0,-1)),pe=t=>_a.test(t),Ea=()=>!0,Oa=t=>Ma.test(t)&&!za.test(t),kt=()=>!1,Ra=t=>Pa.test(t),Aa=t=>Ta.test(t),Ua=t=>!C(t)&&!I(t),Ha=t=>ke(t,St,kt),C=t=>vt.test(t),be=t=>ke(t,Dt,Oa),Ge=t=>ke(t,qa,V),nt=t=>ke(t,jt,kt),Fa=t=>ke(t,Nt,Aa),Ie=t=>ke(t,$t,Ra),I=t=>wt.test(t),De=t=>je(t,Dt),Ga=t=>je(t,Va),it=t=>je(t,jt),La=t=>je(t,St),Wa=t=>je(t,Nt),_e=t=>je(t,$t,!0),ke=(t,a,o)=>{const r=vt.exec(t);return r?r[1]?a(r[1]):o(r[2]):!1},je=(t,a,o=!1)=>{const r=wt.exec(t);return r?r[1]?a(r[1]):o:!1},jt=t=>t==="position"||t==="percentage",Nt=t=>t==="image"||t==="url",St=t=>t==="length"||t==="size"||t==="bg-size",Dt=t=>t==="length",qa=t=>t==="number",Va=t=>t==="family-name",$t=t=>t==="shadow",Ba=()=>{const t=ae("color"),a=ae("font"),o=ae("text"),r=ae("font-weight"),i=ae("tracking"),p=ae("leading"),x=ae("breakpoint"),n=ae("container"),g=ae("spacing"),z=ae("radius"),H=ae("shadow"),G=ae("inset-shadow"),U=ae("text-shadow"),T=ae("drop-shadow"),$=ae("blur"),N=ae("perspective"),E=ae("aspect"),X=ae("ease"),B=ae("animate"),F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],W=()=>[...A(),I,C],w=()=>["auto","hidden","clip","visible","scroll"],ee=()=>["auto","contain","none"],k=()=>[I,C,g],J=()=>[we,"full","auto",...k()],oe=()=>[he,"none","subgrid",I,C],ne=()=>["auto",{span:["full",he,I,C]},he,I,C],v=()=>[he,"auto",I,C],R=()=>["auto","min","max","fr",I,C],h=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],D=()=>["start","end","center","stretch","center-safe","end-safe"],f=()=>["auto",...k()],S=()=>[we,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],y=()=>[t,I,C],Y=()=>[...A(),it,nt,{position:[I,C]}],q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],m=()=>["auto","cover","contain",La,Ha,{size:[I,C]}],_=()=>[Fe,De,be],l=()=>["","none","full",z,I,C],d=()=>["",V,De,be],j=()=>["solid","dashed","dotted","double"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>[V,Fe,it,nt],u=()=>["","none",$,I,C],M=()=>["none",V,I,C],K=()=>["none",V,I,C],te=()=>[V,I,C],L=()=>[we,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[pe],breakpoint:[pe],color:[Ea],container:[pe],"drop-shadow":[pe],ease:["in","out","in-out"],font:[Ua],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[pe],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[pe],shadow:[pe],spacing:["px",V],text:[pe],"text-shadow":[pe],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",we,C,I,E]}],container:["container"],columns:[{columns:[V,C,I,n]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:W()}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:ee()}],"overscroll-x":[{"overscroll-x":ee()}],"overscroll-y":[{"overscroll-y":ee()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:J()}],"inset-x":[{"inset-x":J()}],"inset-y":[{"inset-y":J()}],start:[{start:J()}],end:[{end:J()}],top:[{top:J()}],right:[{right:J()}],bottom:[{bottom:J()}],left:[{left:J()}],visibility:["visible","invisible","collapse"],z:[{z:[he,"auto",I,C]}],basis:[{basis:[we,"full","auto",n,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[V,we,"auto","initial","none",C]}],grow:[{grow:["",V,I,C]}],shrink:[{shrink:["",V,I,C]}],order:[{order:[he,"first","last","none",I,C]}],"grid-cols":[{"grid-cols":oe()}],"col-start-end":[{col:ne()}],"col-start":[{"col-start":v()}],"col-end":[{"col-end":v()}],"grid-rows":[{"grid-rows":oe()}],"row-start-end":[{row:ne()}],"row-start":[{"row-start":v()}],"row-end":[{"row-end":v()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...h(),"normal"]}],"justify-items":[{"justify-items":[...D(),"normal"]}],"justify-self":[{"justify-self":["auto",...D()]}],"align-content":[{content:["normal",...h()]}],"align-items":[{items:[...D(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...D(),{baseline:["","last"]}]}],"place-content":[{"place-content":h()}],"place-items":[{"place-items":[...D(),"baseline"]}],"place-self":[{"place-self":["auto",...D()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:f()}],mx:[{mx:f()}],my:[{my:f()}],ms:[{ms:f()}],me:[{me:f()}],mt:[{mt:f()}],mr:[{mr:f()}],mb:[{mb:f()}],ml:[{ml:f()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:S()}],w:[{w:[n,"screen",...S()]}],"min-w":[{"min-w":[n,"screen","none",...S()]}],"max-w":[{"max-w":[n,"screen","none","prose",{screen:[x]},...S()]}],h:[{h:["screen","lh",...S()]}],"min-h":[{"min-h":["screen","lh","none",...S()]}],"max-h":[{"max-h":["screen","lh",...S()]}],"font-size":[{text:["base",o,De,be]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,I,Ge]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fe,C]}],"font-family":[{font:[Ga,C,a]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,I,C]}],"line-clamp":[{"line-clamp":[V,"none",I,Ge]}],leading:[{leading:[p,...k()]}],"list-image":[{"list-image":["none",I,C]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",I,C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:y()}],"text-color":[{text:y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:[V,"from-font","auto",I,be]}],"text-decoration-color":[{decoration:y()}],"underline-offset":[{"underline-offset":[V,"auto",I,C]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",I,C]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",I,C]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:q()}],"bg-size":[{bg:m()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},he,I,C],radial:["",I,C],conic:[he,I,C]},Wa,Fa]}],"bg-color":[{bg:y()}],"gradient-from-pos":[{from:_()}],"gradient-via-pos":[{via:_()}],"gradient-to-pos":[{to:_()}],"gradient-from":[{from:y()}],"gradient-via":[{via:y()}],"gradient-to":[{to:y()}],rounded:[{rounded:l()}],"rounded-s":[{"rounded-s":l()}],"rounded-e":[{"rounded-e":l()}],"rounded-t":[{"rounded-t":l()}],"rounded-r":[{"rounded-r":l()}],"rounded-b":[{"rounded-b":l()}],"rounded-l":[{"rounded-l":l()}],"rounded-ss":[{"rounded-ss":l()}],"rounded-se":[{"rounded-se":l()}],"rounded-ee":[{"rounded-ee":l()}],"rounded-es":[{"rounded-es":l()}],"rounded-tl":[{"rounded-tl":l()}],"rounded-tr":[{"rounded-tr":l()}],"rounded-br":[{"rounded-br":l()}],"rounded-bl":[{"rounded-bl":l()}],"border-w":[{border:d()}],"border-w-x":[{"border-x":d()}],"border-w-y":[{"border-y":d()}],"border-w-s":[{"border-s":d()}],"border-w-e":[{"border-e":d()}],"border-w-t":[{"border-t":d()}],"border-w-r":[{"border-r":d()}],"border-w-b":[{"border-b":d()}],"border-w-l":[{"border-l":d()}],"divide-x":[{"divide-x":d()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":d()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...j(),"hidden","none"]}],"divide-style":[{divide:[...j(),"hidden","none"]}],"border-color":[{border:y()}],"border-color-x":[{"border-x":y()}],"border-color-y":[{"border-y":y()}],"border-color-s":[{"border-s":y()}],"border-color-e":[{"border-e":y()}],"border-color-t":[{"border-t":y()}],"border-color-r":[{"border-r":y()}],"border-color-b":[{"border-b":y()}],"border-color-l":[{"border-l":y()}],"divide-color":[{divide:y()}],"outline-style":[{outline:[...j(),"none","hidden"]}],"outline-offset":[{"outline-offset":[V,I,C]}],"outline-w":[{outline:["",V,De,be]}],"outline-color":[{outline:y()}],shadow:[{shadow:["","none",H,_e,Ie]}],"shadow-color":[{shadow:y()}],"inset-shadow":[{"inset-shadow":["none",G,_e,Ie]}],"inset-shadow-color":[{"inset-shadow":y()}],"ring-w":[{ring:d()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:y()}],"ring-offset-w":[{"ring-offset":[V,be]}],"ring-offset-color":[{"ring-offset":y()}],"inset-ring-w":[{"inset-ring":d()}],"inset-ring-color":[{"inset-ring":y()}],"text-shadow":[{"text-shadow":["none",U,_e,Ie]}],"text-shadow-color":[{"text-shadow":y()}],opacity:[{opacity:[V,I,C]}],"mix-blend":[{"mix-blend":[...O(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":O()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[V]}],"mask-image-linear-from-pos":[{"mask-linear-from":P()}],"mask-image-linear-to-pos":[{"mask-linear-to":P()}],"mask-image-linear-from-color":[{"mask-linear-from":y()}],"mask-image-linear-to-color":[{"mask-linear-to":y()}],"mask-image-t-from-pos":[{"mask-t-from":P()}],"mask-image-t-to-pos":[{"mask-t-to":P()}],"mask-image-t-from-color":[{"mask-t-from":y()}],"mask-image-t-to-color":[{"mask-t-to":y()}],"mask-image-r-from-pos":[{"mask-r-from":P()}],"mask-image-r-to-pos":[{"mask-r-to":P()}],"mask-image-r-from-color":[{"mask-r-from":y()}],"mask-image-r-to-color":[{"mask-r-to":y()}],"mask-image-b-from-pos":[{"mask-b-from":P()}],"mask-image-b-to-pos":[{"mask-b-to":P()}],"mask-image-b-from-color":[{"mask-b-from":y()}],"mask-image-b-to-color":[{"mask-b-to":y()}],"mask-image-l-from-pos":[{"mask-l-from":P()}],"mask-image-l-to-pos":[{"mask-l-to":P()}],"mask-image-l-from-color":[{"mask-l-from":y()}],"mask-image-l-to-color":[{"mask-l-to":y()}],"mask-image-x-from-pos":[{"mask-x-from":P()}],"mask-image-x-to-pos":[{"mask-x-to":P()}],"mask-image-x-from-color":[{"mask-x-from":y()}],"mask-image-x-to-color":[{"mask-x-to":y()}],"mask-image-y-from-pos":[{"mask-y-from":P()}],"mask-image-y-to-pos":[{"mask-y-to":P()}],"mask-image-y-from-color":[{"mask-y-from":y()}],"mask-image-y-to-color":[{"mask-y-to":y()}],"mask-image-radial":[{"mask-radial":[I,C]}],"mask-image-radial-from-pos":[{"mask-radial-from":P()}],"mask-image-radial-to-pos":[{"mask-radial-to":P()}],"mask-image-radial-from-color":[{"mask-radial-from":y()}],"mask-image-radial-to-color":[{"mask-radial-to":y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[V]}],"mask-image-conic-from-pos":[{"mask-conic-from":P()}],"mask-image-conic-to-pos":[{"mask-conic-to":P()}],"mask-image-conic-from-color":[{"mask-conic-from":y()}],"mask-image-conic-to-color":[{"mask-conic-to":y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:q()}],"mask-size":[{mask:m()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",I,C]}],filter:[{filter:["","none",I,C]}],blur:[{blur:u()}],brightness:[{brightness:[V,I,C]}],contrast:[{contrast:[V,I,C]}],"drop-shadow":[{"drop-shadow":["","none",T,_e,Ie]}],"drop-shadow-color":[{"drop-shadow":y()}],grayscale:[{grayscale:["",V,I,C]}],"hue-rotate":[{"hue-rotate":[V,I,C]}],invert:[{invert:["",V,I,C]}],saturate:[{saturate:[V,I,C]}],sepia:[{sepia:["",V,I,C]}],"backdrop-filter":[{"backdrop-filter":["","none",I,C]}],"backdrop-blur":[{"backdrop-blur":u()}],"backdrop-brightness":[{"backdrop-brightness":[V,I,C]}],"backdrop-contrast":[{"backdrop-contrast":[V,I,C]}],"backdrop-grayscale":[{"backdrop-grayscale":["",V,I,C]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[V,I,C]}],"backdrop-invert":[{"backdrop-invert":["",V,I,C]}],"backdrop-opacity":[{"backdrop-opacity":[V,I,C]}],"backdrop-saturate":[{"backdrop-saturate":[V,I,C]}],"backdrop-sepia":[{"backdrop-sepia":["",V,I,C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",I,C]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[V,"initial",I,C]}],ease:[{ease:["linear","initial",X,I,C]}],delay:[{delay:[V,I,C]}],animate:[{animate:["none",B,I,C]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,I,C]}],"perspective-origin":[{"perspective-origin":W()}],rotate:[{rotate:M()}],"rotate-x":[{"rotate-x":M()}],"rotate-y":[{"rotate-y":M()}],"rotate-z":[{"rotate-z":M()}],scale:[{scale:K()}],"scale-x":[{"scale-x":K()}],"scale-y":[{"scale-y":K()}],"scale-z":[{"scale-z":K()}],"scale-3d":["scale-3d"],skew:[{skew:te()}],"skew-x":[{"skew-x":te()}],"skew-y":[{"skew-y":te()}],transform:[{transform:[I,C,"","none","gpu","cpu"]}],"transform-origin":[{origin:W()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:L()}],"translate-x":[{"translate-x":L()}],"translate-y":[{"translate-y":L()}],"translate-z":[{"translate-z":L()}],"translate-none":["translate-none"],accent:[{accent:y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",I,C]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",I,C]}],fill:[{fill:["none",...y()]}],"stroke-w":[{stroke:[V,De,be,Ge]}],stroke:[{stroke:["none",...y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Ya=Ca(Ba);function ye(...t){return Ya(ft(t))}const Ka=pa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ze=c.forwardRef(({className:t,variant:a,size:o,asChild:r=!1,...i},p)=>{const x=r?la:"button";return e.jsx(x,{className:ye(Ka({variant:a,size:o,className:t})),ref:p,...i})});ze.displayName="Button";function lt({user:t,onChangePassword:a,onLogout:o,scraperData:r,currentTheme:i="default",themes:p}){const[x,n]=c.useState(!1),[g,z]=c.useState({amount:null,date:null}),H=c.useRef(null),G=c.useRef(null);c.useRef(null);const U=Ce();c.useEffect(()=>{(async()=>{if(!(!t||t.role==="admin"))try{const{data:E,error:X}=await re.from("payrolls").select("file_name, neto").eq("driver_name",(t.username||t.name||"").toLowerCase());if(!X&&E&&E.length>0){const F=E.sort((A,W)=>{const w=J=>{const oe=J.match(/(\d{2})_(\d{4})/);return oe?{m:parseInt(oe[1]),y:parseInt(oe[2])}:{m:0,y:0}},ee=w(A.file_name),k=w(W.file_name);return k.y!==ee.y?k.y-ee.y:k.m-ee.m})[0];z({amount:parseFloat(F.neto).toFixed(2),date:F.file_name.replace(".pdf","").replace(".PDF","").replace("_","/")})}}catch(E){console.error("Gre≈°ka pri dohvatu plate:",E)}})()},[t]);const $=p||{default:{accent:"from-blue-600 to-purple-600"},night:{accent:"from-gray-600 to-blue-800"}};return e.jsxs("div",{className:"relative inline-block text-left",ref:H,style:{zIndex:x?999999:"auto"},children:[e.jsxs(b.div,{ref:G,onClick:()=>n(!x),whileHover:{scale:1.05,y:-2},className:`flex items-center gap-3 px-3 py-2 ${i==="night"?"bg-gray-800/40 border-white/10":"bg-white/60 border-gray-100/50"} backdrop-blur-2xl rounded-full border cursor-pointer transition-all duration-300`,style:{boxShadow:"6px 6px 12px rgba(0,0,0,0.08)"},children:[e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br ${$[i].accent} flex items-center justify-center text-white font-bold`,children:t?.role==="admin"?e.jsx(Rt,{size:18}):e.jsx(Pe,{size:18})}),e.jsx("span",{className:"font-medium",children:t?.name}),e.jsx(At,{size:16,className:x?"rotate-180":""})]}),e.jsx(Be,{children:x&&e.jsxs(b.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},className:`absolute right-0 mt-2 w-72 ${i==="night"?"bg-gray-900/95 border-white/30":"bg-white/95 border-gray-300"} backdrop-blur-3xl border rounded-2xl p-4 shadow-2xl`,style:{position:"absolute",top:"100%",right:0},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${$[i].accent} rounded-full flex items-center justify-center text-white font-bold`,children:(t?.name||"K")[0]}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h3",{className:"font-semibold text-sm",children:t?.name}),e.jsx("p",{className:"text-xs opacity-50",children:t?.username})]})]}),t?.role!=="admin"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs(b.div,{className:`${i==="night"?"bg-gray-800/50 border-gray-600/50":"bg-blue-50/80 border-blue-200/60"} border rounded-xl p-2 backdrop-blur-sm`,children:[e.jsxs("div",{className:"text-[10px] font-bold text-blue-500 uppercase leading-none",children:["Zadnja plata ",g.date&&`(${g.date})`]}),e.jsx("div",{className:`font-black ${i==="night"?"text-blue-300":"text-blue-900"} text-sm mt-1`,children:g.amount?`${g.amount} ‚Ç¨`:"Uƒçitavam..."})]}),e.jsxs(b.div,{className:`${i==="night"?"bg-gray-800/50 border-gray-600/50":"bg-emerald-50/80 border-emerald-200/60"} border rounded-xl p-2 backdrop-blur-sm`,children:[e.jsx("div",{className:"text-[10px] font-bold text-emerald-500 uppercase leading-none",children:"Ukupna zarada"}),e.jsx("div",{className:`font-black ${i==="night"?"text-emerald-300":"text-emerald-900"} text-sm mt-1`,children:t?.ukupnaZarada||"-"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ze,{variant:"ghost",size:"sm",className:"w-full justify-start text-left text-emerald-600 rounded-xl",onClick:()=>U("/payroll-list"),children:[e.jsx(Ut,{className:"w-4 h-4 mr-2"})," Platne liste"]}),e.jsxs(ze,{variant:"ghost",size:"sm",className:"w-full justify-start text-left text-amber-600 rounded-xl",onClick:a,children:[e.jsx(ut,{className:"w-4 h-4 mr-2"})," Promijeni ≈°ifru"]}),e.jsxs(ze,{variant:"ghost",size:"sm",className:"w-full justify-start text-left text-rose-600 rounded-xl",onClick:o,children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"})," Odjava"]})]})]})})]})}s;const Ct=c.forwardRef(({className:t,...a},o)=>e.jsx("div",{ref:o,className:ye("rounded-xl border bg-card text-card-foreground shadow",t),...a}));Ct.displayName="Card";const Ja=c.forwardRef(({className:t,...a},o)=>e.jsx("div",{ref:o,className:ye("flex flex-col space-y-1.5 p-6",t),...a}));Ja.displayName="CardHeader";const Xa=c.forwardRef(({className:t,...a},o)=>e.jsx("div",{ref:o,className:ye("font-semibold leading-none tracking-tight",t),...a}));Xa.displayName="CardTitle";const Qa=c.forwardRef(({className:t,...a},o)=>e.jsx("div",{ref:o,className:ye("text-sm text-muted-foreground",t),...a}));Qa.displayName="CardDescription";const Za=c.forwardRef(({className:t,...a},o)=>e.jsx("div",{ref:o,className:ye("p-6 pt-0",t),...a}));Za.displayName="CardContent";const er=c.forwardRef(({className:t,...a},o)=>e.jsx("div",{ref:o,className:ye("flex items-center p-6 pt-0",t),...a}));er.displayName="CardFooter";function tr({isOpen:t,onClose:a,onChangePassword:o,loading:r}){const[i,p]=c.useState(""),[x,n]=c.useState(""),[g,z]=c.useState(""),[H,G]=c.useState(null),[U,T]=c.useState(!1),[$,N]=c.useState(!1),[E,X]=c.useState("default"),B={default:{background:"from-slate-50 via-blue-50 to-indigo-100",accent:"from-blue-500 to-purple-500",particles:["bg-blue-400/20","bg-purple-400/20","bg-indigo-400/20"]},sunrise:{background:"from-orange-50 via-pink-50 to-red-100",accent:"from-orange-500 to-pink-500",particles:["bg-orange-400/20","bg-pink-400/20","bg-red-400/20"]},afternoon:{background:"from-amber-50 via-yellow-50 to-orange-100",accent:"from-amber-500 to-orange-500",particles:["bg-amber-400/20","bg-yellow-400/20","bg-orange-400/20"]},evening:{background:"from-purple-50 via-indigo-50 to-blue-100",accent:"from-purple-500 to-indigo-500",particles:["bg-purple-400/20","bg-indigo-400/20","bg-blue-400/20"]},night:{background:"from-gray-800 via-gray-900 to-black",accent:"from-blue-400 to-purple-400",particles:["bg-blue-300/30","bg-purple-300/30","bg-indigo-300/30"]}};c.useEffect(()=>{const w=()=>{const k=new Date().getHours();k>=5&&k<8?X("sunrise"):k>=8&&k<12?X("default"):k>=12&&k<17?X("afternoon"):k>=17&&k<20?X("evening"):X("night")};w();const ee=setInterval(w,6e4);return()=>clearInterval(ee)},[]);const F=async w=>{if(w.preventDefault(),!i.trim()){G("Molimo unesite staru lozinku");return}if(!x.trim()){G("Molimo unesite novu lozinku");return}if(x.length<4){G("Nova lozinka mora imati najmanje 4 karaktera");return}if(x!==g){G("Nove lozinke se ne poklapaju");return}try{G(null),N(!0),await o(i,x),T(!0),setTimeout(()=>{A()},2e3)}catch(ee){G(ee.message||"Gre≈°ka pri promjeni lozinke")}finally{N(!1)}},A=()=>{p(""),n(""),z(""),G(null),T(!1),a()};if(!t)return null;const W=E==="night";return e.jsx(Be,{children:t&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:A,children:e.jsxs(b.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:`${W?"bg-gray-800":"bg-white"} rounded-2xl shadow-2xl max-w-md w-full overflow-hidden`,onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:`bg-gradient-to-r ${B[E].accent} p-6 text-white relative`,children:[e.jsx("button",{onClick:A,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Ft,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(ut,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Promjena lozinke"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Unesite staru i novu lozinku"})]})]})]}),e.jsx("div",{className:"p-6",children:U?e.jsxs(b.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(Gt,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:`text-xl font-bold ${W?"text-white":"text-gray-800"} mb-2`,children:"Lozinka promijenjena!"}),e.jsx("p",{className:`${W?"text-gray-400":"text-gray-600"}`,children:"Va≈°a lozinka je uspje≈°no a≈æurirana."})]}):e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${W?"text-gray-300":"text-gray-700"} mb-2`,children:"Stara lozinka"}),e.jsx("input",{type:"password",value:i,onChange:w=>p(w.target.value),placeholder:"Unesite staru lozinku",disabled:$,autoFocus:!0,className:`w-full px-4 py-3 border ${W?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${W?"text-gray-300":"text-gray-700"} mb-2`,children:"Nova lozinka"}),e.jsx("input",{type:"password",value:x,onChange:w=>n(w.target.value),placeholder:"Unesite novu lozinku",disabled:$,className:`w-full px-4 py-3 border ${W?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${W?"text-gray-300":"text-gray-700"} mb-2`,children:"Potvrdite novu lozinku"}),e.jsx("input",{type:"password",value:g,onChange:w=>z(w.target.value),placeholder:"Ponovite novu lozinku",disabled:$,className:`w-full px-4 py-3 border ${W?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all`})]}),H&&e.jsxs(b.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-start gap-2 p-4 ${W?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200"} border rounded-xl`,children:[e.jsx(Te,{className:`w-5 h-5 ${W?"text-red-400":"text-red-600"} flex-shrink-0 mt-0.5`}),e.jsx("p",{className:`text-sm ${W?"text-red-300":"text-red-800"}`,children:H})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:A,disabled:$,className:`flex-1 px-4 py-3 border ${W?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-xl disabled:opacity-50 font-medium transition-all`,children:"Otka≈æi"}),e.jsx("button",{type:"submit",disabled:$||!i.trim()||!x.trim()||!g.trim(),className:`flex-1 px-4 py-3 bg-gradient-to-r ${B[E].accent} text-white rounded-xl hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-all shadow-lg`,children:$?"Mijenjam...":"Promijeni lozinku"})]})]})})]})})})}function ar(){const[t,a]=c.useState(!1),[o,r]=c.useState(null),[i,p]=c.useState(new Date),[x,n]=c.useState([{id:1,message:"Novi podatci sinhronizovani",time:"5 min",read:!1},{id:2,message:"GitHub scraper zavr≈°en",time:"1h",read:!1},{id:3,message:"Payroll a≈æuriran",time:"2h",read:!0}]),[g,z]=c.useState(!1),[H,G]=c.useState("-"),[U,T]=c.useState("-"),[$,N]=c.useState([]),[E,X]=c.useState([]),[B,F]=c.useState(0),[A,W]=c.useState("night"),[w,ee]=c.useState({}),k=Ce(),{currentUser:J,logout:oe,changePassword:ne}=xt();J?.name||J?.ime;const v={default:{background:"from-slate-50 via-blue-50 to-indigo-100",accent:"from-blue-500 to-purple-500",particles:["bg-blue-400/20","bg-purple-400/20","bg-indigo-400/20"]},sunrise:{background:"from-orange-50 via-pink-50 to-red-100",accent:"from-orange-500 to-pink-500",particles:["bg-orange-400/20","bg-pink-400/20","bg-red-400/20"]},afternoon:{background:"from-amber-50 via-yellow-50 to-orange-100",accent:"from-amber-500 to-orange-500",particles:["bg-amber-400/20","bg-yellow-400/20","bg-orange-400/20"]},evening:{background:"from-purple-50 via-indigo-50 to-blue-100",accent:"from-purple-500 to-indigo-500",particles:["bg-purple-400/20","bg-indigo-400/20","bg-blue-400/20"]},night:{background:"from-slate-900 via-blue-900 to-indigo-900",accent:"from-blue-400 to-cyan-400",particles:["bg-blue-400/20","bg-cyan-400/20","bg-indigo-400/20"]}},R=()=>e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:E.map(m=>e.jsx(b.div,{className:`absolute rounded-full ${m.color}`,style:{left:`${m.x}%`,top:`${m.y}%`,width:`${m.size}px`,height:`${m.size}px`},animate:{y:[0,-100,0],x:[0,Math.sin(m.id*.5)*50,0],opacity:[.2,.8,.2],scale:[1,1.5,1]},transition:{duration:m.duration,delay:m.delay,repeat:1/0,ease:"easeInOut"}},m.id))}),h=(m,_)=>{f(m,_)},D=m=>{S(m)},f=(m,_)=>{const d=m.currentTarget.getBoundingClientRect(),j=m.clientX-d.left,O=m.clientY-d.top,P=d.width/2,u=d.height/2,M=(O-u)/10,K=(P-j)/10;ee(te=>({...te,[_]:{transform:`perspective(1000px) rotateX(${M}deg) rotateY(${K}deg) scale3d(1.02, 1.02, 1.02)`,transition:"transform 0.1s ease-out"}}))},S=m=>{ee(_=>({..._,[m]:{transform:"perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)",transition:"transform 0.3s ease-out"}}))},y=async()=>{if(J){try{const{data:m,error:_}=await re.from("payroll_amounts").select("neto").eq("driver_name",J.name.toLowerCase());if(_)throw _;const l=m.reduce((d,j)=>d+(j.neto||0),0);G(`${l.toFixed(2)} ‚Ç¨`)}catch{G("Gre≈°ka")}try{const{data:m,error:_}=await re.from("payroll_amounts").select("neto, file_name, created_at").eq("driver_name",J.name.toLowerCase()).order("file_name",{ascending:!1}).limit(1);if(_)throw _;m&&m.length>0&&typeof m[0].neto=="number"?T(`${Number(m[0].neto).toFixed(2)} ‚Ç¨`):T("-")}catch{T("Gre≈°ka")}}};c.useEffect(()=>{J&&y()},[J]),x.filter(m=>!m.read).length;const Y=async()=>{try{console.log("üêô Poku≈°avam da dohvatim podatke sa GitHub API...");const m="eldin007b/gls-scraper",_="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",[l,d]=m.split("/"),j=P=>{if(!P)return"Nepoznato";const u=new Date(P);if(isNaN(u.getTime()))return"Nepoznato";const M=u.getDate().toString().padStart(2,"0"),K=(u.getMonth()+1).toString().padStart(2,"0"),te=u.getHours().toString().padStart(2,"0"),L=u.getMinutes().toString().padStart(2,"0");return`${M}.${K} ${te}:${L}`};let O=await fetch(`https://api.github.com/repos/${l}/${d}/actions/runs?per_page=5`,{headers:{Accept:"application/vnd.github.v3+json",..._&&{Authorization:`token ${_}`}}});if(!O.ok&&O.status===401&&_&&(console.log("üîë Token nevaljan, poku≈°avam bez token-a..."),O=await fetch(`https://api.github.com/repos/${l}/${d}/actions/runs?per_page=5`,{headers:{Accept:"application/vnd.github.v3+json"}})),O.ok){const u=((await O.json()).workflow_runs||[]).filter(M=>{const K=(M.name||"").toLowerCase();return K.includes("gls scraper")||K.includes("scraper")||K.includes("gls")});if(u.length>0){const M=u[0];console.log("‚úÖ Na≈°ao GitHub workflow:",M);const K=M.updated_at||M.run_started_at||M.created_at||new Date().toISOString(),te=j(K),L={status:M.conclusion==="success"||M.conclusion==="completed"?"completed":M.conclusion||"unknown",mode:"Automatski (GitHub)",timestamp:K,formattedTimestamp:te,name:M.name,repoUsed:`${l}/${d}`,raw:M};console.log("üîÑ GitHub API podaci formatovani:",L),r(L);try{localStorage.setItem("github_scraper_history",JSON.stringify([L]))}catch(ie){console.warn("‚ö†Ô∏è Neuspjelo pisanje u localStorage:",ie)}return!0}}else console.warn("‚ö†Ô∏è GitHub API vratio nenormalan odgovor:",O.status,O.statusText)}catch(m){console.error("üí• Gre≈°ka pri GitHub API pozivu:",m)}return!1};c.useEffect(()=>{const m=async()=>{try{if(console.log("üîç Poku≈°avam da uƒçitam podatke o sinhronizaciji..."),console.log("üóùÔ∏è Svi kljuƒçevi u localStorage:",Object.keys(localStorage)),await Y()){console.log("ÔøΩ GitHub fetch successful, reloading saved history...");const O=localStorage.getItem("github_scraper_history");if(O){const P=JSON.parse(O);if(P.length>0){r(P[0]);return}}}const j=localStorage.getItem("github_scraper_history");if(console.log("üì¶ Raw podatci iz localStorage:",j),j){const O=JSON.parse(j);if(console.log("üìã Parsovana historija:",O),console.log("üìè Broj elemenata u historiji:",O.length),O.length>0){const P=O[0];console.log("‚è∞ Poslednja sinhronizacija:",P),r(P)}else console.log("‚ö†Ô∏è Historija je prazna"),r(null)}else{console.log("‚ùå Nema podataka u localStorage za github_scraper_history");const O=localStorage.getItem("autoSyncState");if(O)try{const P=JSON.parse(O);console.log("üîÑ Koristim autoSyncState kao fallback:",P);const u={status:"completed",mode:"Automatski",timestamp:P.lastSync?new Date(P.lastSync).toLocaleString("bs-BA"):"Nepoznato"};console.log("üîÑ Fallback podaci iz autoSync:",u),r(u)}catch(P){console.error("üí• Gre≈°ka u parsiranju autoSyncState:",P),await Y()||r(null)}else console.log("‚ùå Nema ni autoSyncState podataka - poku≈°avam GitHub API"),await Y()||r(null)}}catch(d){console.error("üí• Gre≈°ka prilikom uƒçitavanja podataka o sinhronizaciji:",d),r(null)}};(async()=>{await m()})();const l=setInterval(()=>{m().catch(d=>{console.error("üí• Gre≈°ka u interval sync:",d)})},3e4);return()=>clearInterval(l)},[]),c.useEffect(()=>{const m=setInterval(()=>{p(new Date)},3e4);return()=>clearInterval(m)},[]),c.useEffect(()=>{(()=>{const _=v[A],l=Array.from({length:40},(d,j)=>({id:j,x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+1,color:_.particles[Math.floor(Math.random()*_.particles.length)],duration:Math.random()*25+15,delay:Math.random()*8}));X(l)})()},[A]),c.useEffect(()=>{W("night")},[]),c.useEffect(()=>{const m=()=>{F(window.scrollY)};return window.addEventListener("scroll",m,{passive:!0}),()=>window.removeEventListener("scroll",m)},[]),c.useEffect(()=>{const m=_=>{g&&!_.target.closest(".notification-container")&&z(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[g]),c.useEffect(()=>{const m=_=>{try{const l=_.detail;if(console.log("üîî Primljen githubSync:updated event:",l),l){const d={...l,timestamp:l.timestamp&&typeof l.timestamp=="string"&&l.timestamp.indexOf("T")!==-1?l.timestamp:l.raw?.updated_at||l.raw?.run_started_at||l.raw?.created_at||l.timestamp,formattedTimestamp:l.formattedTimestamp||(l.timestamp?(()=>{try{const j=new Date(l.timestamp);if(!isNaN(j.getTime())){const O=j.getDate().toString().padStart(2,"0"),P=(j.getMonth()+1).toString().padStart(2,"0"),u=j.getHours().toString().padStart(2,"0"),M=j.getMinutes().toString().padStart(2,"0");return`${O}.${P} ${u}:${M}`}}catch{}return l.timestamp})():l.timestamp)};r(d)}}catch(l){console.error("Gre≈°ka u event handleru:",l)}};return window.addEventListener("githubSync:updated",m),()=>window.removeEventListener("githubSync:updated",m)},[]);const q=[{title:"Statistika",desc:"Grafovi i izvje≈°taji",icon:e.jsx(Lt,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/statistika",gradient:"from-purple-500 to-pink-500",hoverGradient:"from-purple-600 to-pink-600",bgColor:"bg-purple-50",iconColor:"text-purple-600"},{title:"Navigacija",desc:"Mapa i praƒáenje ruta",icon:e.jsx(Wt,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/navigacija",gradient:"from-indigo-500 to-blue-500",hoverGradient:"from-indigo-600 to-blue-600",bgColor:"bg-indigo-50",iconColor:"text-indigo-600"},{title:"Dostava",desc:"Pregled po mjesecu",icon:e.jsx(Pe,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/deliveries",gradient:"from-blue-500 to-cyan-500",hoverGradient:"from-blue-600 to-cyan-600",bgColor:"bg-blue-50",iconColor:"text-blue-600"},{title:"Vozaƒçi",desc:"Detaljna statistika po vozaƒçu",icon:e.jsx(Ee,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/drivers",gradient:"from-emerald-500 to-teal-500",hoverGradient:"from-emerald-600 to-teal-600",bgColor:"bg-emerald-50",iconColor:"text-emerald-600"},{title:"Extra vo≈ænje",desc:"Posebne ture (Sonderfahrt)",icon:e.jsx(qt,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/extra-rides",gradient:"from-orange-500 to-red-500",hoverGradient:"from-orange-600 to-red-600",bgColor:"bg-orange-50",iconColor:"text-orange-600"},{title:"O aplikaciji",desc:"Informacije i pomoƒá",icon:e.jsx(Vt,{className:"w-8 h-8 md:w-10 md:h-10"}),path:"/about",gradient:"from-gray-500 to-slate-500",hoverGradient:"from-gray-600 to-slate-600",bgColor:"bg-gray-50",iconColor:"text-gray-600"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`min-h-screen bg-gradient-to-br ${v[A].background} relative transition-all duration-1000`,children:[e.jsx(R,{}),e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx(b.div,{style:{transform:`translateY(${B*.2}px) translateX(${B*.1}px)`},className:`absolute top-20 left-10 w-96 h-96 bg-gradient-to-r ${v[A].accent} rounded-full mix-blend-multiply filter blur-3xl`,animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(b.div,{style:{transform:`translateY(${B*-.15}px) translateX(${B*-.05}px)`},className:"absolute top-40 right-10 w-80 h-80 bg-gradient-to-r from-yellow-400/40 to-pink-400/40 rounded-full mix-blend-multiply filter blur-2xl",animate:{scale:[1.1,1,1.1],opacity:[.4,.6,.4]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2}}),e.jsx(b.div,{style:{transform:`translateY(${B*.25}px) translateX(${B*-.08}px)`},className:"absolute -bottom-8 left-20 w-72 h-72 bg-gradient-to-r from-emerald-400/30 to-blue-400/30 rounded-full mix-blend-multiply filter blur-xl",animate:{scale:[1,1.2,1],opacity:[.25,.45,.25]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:4}})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-start py-8 px-4",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[e.jsx(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8 relative z-[1000]",style:{transform:`translateY(${B*.1}px)`},children:e.jsxs("div",{className:`${A==="night"?"bg-gray-800/20":"bg-white/20"} backdrop-blur-3xl border ${A==="night"?"border-white/10":"border-white/30"} rounded-3xl p-4 md:p-6 shadow-2xl relative`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${v[A].accent.replace("from-","from-").replace("to-","to-")}/10 rounded-3xl`}),e.jsx(b.div,{className:`absolute inset-0 rounded-3xl bg-gradient-to-r ${v[A].accent} p-[1px]`,animate:{opacity:[0,.3,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:`w-full h-full rounded-3xl ${A==="night"?"bg-gray-800/20":"bg-white/20"} backdrop-blur-3xl`})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col lg:hidden gap-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-white/20 backdrop-blur-sm rounded-xl border border-white/30",style:{transform:"scale(1.1)",filter:"drop-shadow(0 8px 32px rgba(0,0,0,0.3))"}}),e.jsx("h1",{className:"relative text-2xl sm:text-3xl md:text-4xl font-black tracking-wider leading-tight text-slate-800 px-4 py-2 md:px-6 md:py-3",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8), 0 0 4px rgba(255,255,255,0.6)",fontWeight:"900",letterSpacing:"0.05em"},children:"B&D Evidencija"})]})})}),e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-sm rounded-full border border-white/30",style:{filter:"drop-shadow(0 4px 16px rgba(0,0,0,0.2))"}}),e.jsxs("div",{className:"relative flex items-center gap-2 px-3 py-1.5",children:[e.jsx($e,{className:"w-3 h-3 text-slate-700"}),e.jsx("span",{className:"text-xs font-semibold text-slate-800",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8)"},children:(()=>{const m=i.getDate().toString().padStart(2,"0"),_=(i.getMonth()+1).toString().padStart(2,"0"),l=i.getFullYear(),d=i.getHours().toString().padStart(2,"0"),j=i.getMinutes().toString().padStart(2,"0");return`${m}.${_}.${l} ${d}:${j}`})()})]})]}),e.jsx(lt,{user:{...J,ukupnaZarada:H,zadnjaPlata:U},onChangePassword:()=>a(!0),onLogout:oe,currentTheme:A,themes:v})]})]}),e.jsxs("div",{className:"hidden lg:flex lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-md rounded-2xl border border-white/40",style:{transform:"scale(1.1)",filter:"drop-shadow(0 12px 40px rgba(0,0,0,0.3))"}}),e.jsx("h1",{className:"relative text-3xl md:text-4xl font-black tracking-wide text-slate-800 px-6 py-3",style:{textShadow:"2px 2px 4px rgba(255,255,255,0.8), 0 0 6px rgba(255,255,255,0.6)",fontWeight:"900",letterSpacing:"0.05em"},children:"B&D Evidencija"})]})})}),e.jsx("div",{className:"flex justify-center flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/25 backdrop-blur-md rounded-full border border-white/30",style:{filter:"drop-shadow(0 6px 20px rgba(0,0,0,0.25))"}}),e.jsxs("div",{className:"relative flex items-center gap-2 px-4 py-2",children:[e.jsx($e,{className:"w-4 h-4 text-slate-700"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",style:{textShadow:"1px 1px 2px rgba(255,255,255,0.8)"},children:(()=>{const m=i.getDate().toString().padStart(2,"0"),_=(i.getMonth()+1).toString().padStart(2,"0"),l=i.getFullYear(),d=i.getHours().toString().padStart(2,"0"),j=i.getMinutes().toString().padStart(2,"0");return`${m}.${_}.${l} ${d}:${j}`})()})]})]})}),e.jsx(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.6},className:"flex items-center gap-3 justify-end flex-shrink-0",children:e.jsx(lt,{user:{...J,ukupnaZarada:H,zadnjaPlata:U},onChangePassword:()=>a(!0),onLogout:oe,currentTheme:A,themes:v})})]})]})]})}),e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:q.map((m,_)=>e.jsx(b.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,delay:.6+_*.1,type:"spring",stiffness:100},whileHover:{y:-12,scale:1.05,rotateX:5,rotateY:5,transition:{duration:.3}},whileTap:{scale:.95},className:"group perspective-1000",style:{transformStyle:"preserve-3d",...w[`card-${_}`]},onMouseEnter:l=>h(l,`card-${_}`),onMouseLeave:()=>D(`card-${_}`),onMouseMove:l=>f(l,`card-${_}`),children:e.jsxs(Ct,{className:`cursor-pointer relative overflow-hidden ${A==="night"?"bg-gray-800/30 shadow-inner shadow-gray-900/20":"bg-white/40 shadow-inner shadow-gray-300/20"} backdrop-blur-2xl border-0 transition-all duration-500 rounded-3xl p-4 md:p-8 min-h-[180px] md:h-auto flex flex-col justify-between group-hover:shadow-2xl group-hover:backdrop-blur-3xl`,style:{boxShadow:A==="night"?"12px 12px 24px rgba(0,0,0,0.5), -12px -12px 24px rgba(255,255,255,0.02), inset 2px 2px 6px rgba(255,255,255,0.1)":"12px 12px 24px rgba(0,0,0,0.1), -12px -12px 24px rgba(255,255,255,0.8), inset 2px 2px 6px rgba(255,255,255,0.5)",transformStyle:"preserve-3d"},onClick:()=>k(m.path),children:[e.jsx(b.div,{className:`absolute inset-0 bg-gradient-to-br ${m.gradient} rounded-3xl`,initial:{opacity:0},whileHover:{opacity:.15,scale:1.1},transition:{duration:.4}}),e.jsxs(b.div,{className:"absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-500",initial:{opacity:0},whileHover:{opacity:.3},children:[e.jsx("div",{className:"absolute top-2 left-2 w-1 h-1 bg-white rounded-full animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"absolute top-4 right-3 w-0.5 h-0.5 bg-white rounded-full animate-pulse",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"absolute bottom-3 left-4 w-1.5 h-1.5 bg-white rounded-full animate-pulse",style:{animationDelay:"400ms"}}),e.jsx("div",{className:"absolute bottom-2 right-2 w-0.5 h-0.5 bg-white rounded-full animate-pulse",style:{animationDelay:"600ms"}})]}),e.jsxs(b.div,{className:`w-12 h-12 md:w-16 md:h-16 ${m.bgColor} rounded-2xl flex items-center justify-center mb-2 md:mb-6 relative z-10`,style:{boxShadow:A==="night"?"6px 6px 12px rgba(0,0,0,0.6), -6px -6px 12px rgba(255,255,255,0.05), inset 2px 2px 4px rgba(255,255,255,0.1)":"6px 6px 12px rgba(0,0,0,0.15), -6px -6px 12px rgba(255,255,255,0.9), inset 2px 2px 4px rgba(255,255,255,0.7)"},whileHover:{scale:1.15,rotateY:15,rotateX:15,transition:{duration:.3}},initial:{rotateY:0,rotateX:0},children:[e.jsx(b.div,{className:m.iconColor,whileHover:{rotate:[0,5,-5,0],scale:1.1},transition:{rotate:{duration:.5,ease:"easeInOut"},scale:{duration:.2}},children:m.icon}),e.jsx(b.div,{className:"absolute inset-0 rounded-2xl bg-gradient-to-tr from-white/20 to-transparent opacity-0",whileHover:{opacity:1,backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:.6}})]}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[e.jsx(b.h3,{className:`text-sm md:text-xl font-bold mb-1 md:mb-2 ${A==="night"?"text-gray-200 group-hover:text-white":"text-gray-800 group-hover:text-gray-900"} transition-colors leading-tight`,whileHover:{scale:1.05,x:2},transition:{duration:.2},children:m.title}),e.jsx(b.p,{className:`text-xs md:text-base ${A==="night"?"text-gray-400 group-hover:text-gray-300":"text-gray-600 group-hover:text-gray-700"} transition-colors leading-relaxed mt-2`,initial:{opacity:.8},whileHover:{opacity:1,y:-1},transition:{duration:.2},children:m.desc})]}),e.jsx(b.div,{className:"absolute top-4 md:top-6 right-4 md:right-6 z-20",initial:{opacity:0,x:-10,rotate:-45},whileHover:{opacity:1,x:0,rotate:0,scale:1.2,transition:{duration:.3}},children:e.jsx(b.div,{animate:{y:[0,-2,0],rotate:[0,5,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(Ue,{className:`w-4 h-4 md:w-5 md:h-5 ${A==="night"?"text-gray-300":"text-gray-500"}`})})}),e.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${m.gradient} transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left`})]})},_))}),e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.2},className:"mt-16 text-center relative z-10",children:e.jsxs(b.div,{className:`${A==="night"?"bg-gray-800/30":"bg-white/30"} backdrop-blur-xl rounded-2xl p-6 border ${A==="night"?"border-white/10":"border-gray-200/30"} relative overflow-hidden`,style:{boxShadow:A==="night"?"8px 8px 16px rgba(0,0,0,0.4), -8px -8px 16px rgba(255,255,255,0.02)":"8px 8px 16px rgba(0,0,0,0.08), -8px -8px 16px rgba(255,255,255,0.8)"},whileHover:{scale:1.02,transition:{duration:.3}},children:[e.jsx(b.div,{className:`absolute inset-0 bg-gradient-to-r ${v[A].accent} opacity-5`,animate:{backgroundPosition:["0% 0%","100% 100%","0% 0%"]},transition:{duration:8,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}}),e.jsxs(b.p,{className:`text-sm ${A==="night"?"text-gray-300":"text-gray-600"} relative z-10`,initial:{opacity:.8},whileHover:{opacity:1},children:["¬© ",new Date().getFullYear()," B&D Evidencija. Sva prava zadr≈æana.",e.jsx(b.span,{className:"inline-block ml-2",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"‚ú®"})]})]})})]})})]}),e.jsx(tr,{isOpen:t,onClose:()=>a(!1),onChangePassword:ne,loading:!1})]})}const vr=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"}));function It(t,a,o=[]){return c.useMemo(()=>{const r=new Date(t,a,1),i=new Date(t,a+1,0);return ea({start:r,end:i}).filter(x=>!ta(x)&&!(o||[]).includes(xe(x,"yyyy-MM-dd")))},[t,a,o])}function _t(t={}){return He({queryKey:le.drivers.all,queryFn:async()=>{console.log("üöó Fetching drivers from Supabase...");const{data:a,error:o}=await re.from("drivers").select("*").order("tura",{ascending:!0});if(o)throw o;return console.log("‚úÖ Drivers loaded from Supabase:",a?.length||0),a||[]},staleTime:1800*1e3,...t})}function rr(t,a,o={}){return He({queryKey:le.deliveries.byMonth(t,a),queryFn:()=>Qt(t,a),staleTime:180*1e3,enabled:t!==void 0&&a!==void 0,...o})}function sr(t,a,o,r={}){return He({queryKey:le.deliveries.byDriver(t,a,o),queryFn:async()=>{const i=new Date(a,o,1),p=new Date(a,o+1,0),x=i.toISOString().split("T")[0],n=p.toISOString().split("T")[0],{data:g,error:z}=await re.from("deliveries").select("*").eq("driver",t).gte("date",x).lte("date",n).order("date",{ascending:!0});if(z)throw z;return g||[]},enabled:!!t&&a!==void 0&&o!==void 0,staleTime:180*1e3,...r})}function Mt(t,a={}){return He({queryKey:le.holidays.byYear(t),queryFn:()=>Zt(t),staleTime:1800*1e3,enabled:t!==void 0,...a})}const or=new Date().getFullYear(),nr=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function ir(){const t=Ce(),[a,o]=c.useState(or),[r,i]=c.useState(new Date().getMonth()),[p,x]=c.useState(new Date),[n,g]=c.useState("night"),[z,H]=c.useState({}),G={default:{background:"from-blue-50 via-white to-purple-50"},sunrise:{background:"from-orange-100 via-pink-100 to-yellow-100"},afternoon:{background:"from-blue-100 via-cyan-100 to-sky-100"},evening:{background:"from-purple-100 via-pink-100 to-indigo-100"},night:{background:"from-slate-900 via-blue-900 to-indigo-900"}},{data:U=[],isLoading:T,error:$}=_t(),{data:N=[],isLoading:E,error:X}=rr(a,r),{data:B=[]}=Mt(a),F=It(a,r,B.map(v=>v.date));console.log("üöö Deliveries query:",{deliveries:N,deliveriesLoading:E,deliveriesError:X,year:a,month:r,drivers:U.length,workdays:F.length});const A=T||E;c.useEffect(()=>{g("night")},[]),c.useEffect(()=>{const v=setInterval(()=>x(new Date),6e4);return()=>clearInterval(v)},[]);const W=c.useRef(!1);c.useEffect(()=>{if(W.current)return;(async()=>{try{const{data:R,error:h}=await re.from("urlaub_marks").select("date, driver").eq("is_active",!0);if(console.log("üìÖ Supabase urlaub_marks response:",{data:R,error:h}),h){console.error("‚ùå Supabase error:",h);return}const D={};R?.forEach(f=>{const S=typeof f.date=="string"?f.date.slice(0,10):f.date;D[`${S}-${f.driver}`]=!0}),console.log("‚úÖ urlaubMarks loaded:",D),H(D),W.current=!0}catch(R){console.error("‚ùå Urlaub fetch error:",R)}})()},[]);const w=c.useMemo(()=>{if(console.log("üì¶ Creating groupedData, deliveries count:",N?.length),!N||!Array.isArray(N))return console.log("üì¶ No valid deliveries data"),{};const v={};return N.forEach(R=>{v[R.date]||(v[R.date]={}),v[R.date][R.driver]=R.produktivitaet_stops||0}),Object.keys(v).forEach(R=>{if((R==="2025-11-17"||R==="2025-11-25")&&v[R][8640]){const h=v[R][8640];v[R][8610]?v[R][8610]+=h:v[R][8610]=h,delete v[R][8640]}}),console.log("üì¶ groupedData created with dates:",Object.keys(v).join(", ")),v},[N]),ee=c.useMemo(()=>{if(console.log("üéØ Creating groupedDataWithUrlaub",{workdays:F?.length,drivers:U?.length,groupedDataKeys:Object.keys(w).length,urlaubMarksKeys:Object.keys(z).length}),!F||!U||!w)return console.log("üéØ Missing required data for groupedDataWithUrlaub"),{};const v={...w},R=new Date;R.setHours(0,0,0,0);const h=new Date(a,r+1,0).getDate();for(let f=1;f<=h;f++){const S=String(r+1).padStart(2,"0"),y=String(f).padStart(2,"0"),Y=`${a}-${S}-${y}`;if(new Date(a,r,f)>R)continue;Object.keys(z).some(_=>_.startsWith(Y))&&!v[Y]&&(v[Y]={})}const D=Object.keys(v).reduce((f,S)=>{const y=v[S],Y=Array.isArray(U)&&U.some(m=>m&&m.tura!==void 0&&y[m.tura]>0),q=Object.keys(z).some(m=>m.startsWith(S));return(Y||q)&&(f[S]=y),f},{});return console.log("üéØ groupedDataWithUrlaub result - dates with data:",Object.keys(D).join(", ")),D},[w,z,a,r,F,U]),k=c.useMemo(()=>{if(!Array.isArray(F))return{totalWorkdays:0,passedWorkdays:0,drivers:0,remainingDays:0,totalStops:0,monthlyTarget:0,targetForWorkedDays:0,difference:0,totalAllWorked:0,targetForWorkedDaysBD:0,targetAllDaysBD:0,bilansBD:0};console.log("üìÖ Workdays data:",F);const v=F.length,R=new Set;N.forEach(u=>{u.produktivitaet_stops>0&&R.add(u.date)});const h=R.size,D=new Date,f=D.getFullYear(),S=D.getMonth();let y=0;if(a===f&&r===S){const u=D.getDate();y=F.filter(M=>new Date(M).getDate()<=u).length}else(a<f||a===f&&r<S)&&(y=v);const Y=N.reduce((u,M)=>u+(M.produktivitaet_stops||0),0),q=U.filter(u=>u.aktivan),m=q.reduce((u,M)=>u+(M.target_per_day||0)*v,0),_=q.reduce((u,M)=>u+(M.target_per_day||0)*h,0),l=Y-m,d=F.filter(u=>{const M=xe(u,"yyyy-MM-dd"),K=w[M]||{};return q.reduce((L,ie)=>L+(K[ie.tura]||0),0)>0}),j=d.reduce((u,M)=>{const K=xe(M,"yyyy-MM-dd"),te=w[K]||{};return u+q.reduce((L,ie)=>L+(te[ie.tura]||0),0)},0),O=q.reduce((u,M)=>u+(M.target_per_day||0)*v,0),P=j-O;return{totalWorkdays:v,passedWorkdays:y,drivers:q.length,remainingDays:Math.max(0,v-h),totalStops:Y,monthlyTarget:m,targetForWorkedDays:_,difference:l,totalAllWorked:j,targetForWorkedDaysBD:q.reduce((u,M)=>u+(M.target_per_day||0)*d.length,0),bilansBD:P}},[F,N,U,a,r,w]),J=()=>{r===0?(i(11),o(a-1)):i(r-1)},oe=()=>{r===11?(i(0),o(a+1)):i(r+1)},ne=()=>`bg-gradient-to-br ${G[n].background}`;if($||X){const v=$||X;return console.error("Gre≈°ka u DeliveriesScreen:",v),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx(Te,{className:"w-16 h-16 mx-auto mb-4 text-red-500"}),e.jsx("p",{children:"Gre≈°ka pri uƒçitavanju podataka"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:v?.message})]})})}return e.jsxs("div",{className:`min-h-screen ${ne()} ${n==="night"?"text-white":"text-gray-800"}`,children:[e.jsx(b.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/50"} backdrop-blur-xl border-b sticky top-0 z-50`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:`p-2 rounded-xl ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(Ye,{className:"w-6 h-6"})}),e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:"Pregled Dostava"})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`mb-6 p-4 md:p-6 rounded-2xl ${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:J,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Oe,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-center",children:e.jsxs("h2",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:[nr[r]," ",a]})}),e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:oe,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Re,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($e,{className:`w-5 h-5 ${n==="night"?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Radnih dana"})]}),e.jsxs("p",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:[k.passedWorkdays,"/",k.totalWorkdays]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ee,{className:`w-5 h-5 ${n==="night"?"text-green-400":"text-green-600"}`}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Vozaƒça"})]}),e.jsx("p",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:k.drivers})]}),e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ae,{className:`w-5 h-5 ${n==="night"?"text-purple-400":"text-purple-600"}`}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Ukupno"})]}),e.jsx("p",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:k.totalAllWorked})]}),e.jsxs("div",{className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[k.bilansBD>=0?e.jsx(Ue,{className:"w-5 h-5",style:{color:n==="night"?"#4ade80":"#15803d"}}):e.jsx(gt,{className:"w-5 h-5",style:{color:n==="night"?"#fb7185":"#dc2626"}}),e.jsx("span",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Bilans"})]}),e.jsxs("p",{className:"text-2xl font-black",style:{color:k.bilansBD>=0?n==="night"?"#4ade80":"#15803d":n==="night"?"#fb7185":"#dc2626",textShadow:n==="night"?"0 0 3px rgba(0,0,0,0.3)":"none"},children:[k.bilansBD>0?"+":"",k.bilansBD]})]})]})]}),A?e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:`p-8 rounded-2xl ${n==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-xl text-center`,children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:n==="night"?"text-gray-400":"text-gray-600",children:"Uƒçitavanje..."})]}):F.length===0?e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:`p-8 rounded-2xl ${n==="night"?"bg-gray-800/40":"bg-white/60"} backdrop-blur-xl text-center`,children:[e.jsx(Te,{className:`w-16 h-16 mx-auto mb-4 ${n==="night"?"text-gray-600":"text-gray-400"}`}),e.jsx("p",{className:n==="night"?"text-gray-400":"text-gray-600",children:"Nema radnih dana"})]}):e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`rounded-2xl ${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/70 border-gray-200/30"} border backdrop-blur-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",style:{fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:n==="night"?"bg-gray-700/50":"bg-gray-100/80",children:[e.jsx("th",{className:"px-1 py-2 text-left text-xs font-bold w-16",style:{color:n==="night"?"#fff":"#1f2937"},children:"Datum"}),U.filter(v=>v.aktivan).map(v=>e.jsxs("th",{className:"px-1 py-2 text-center text-xs font-bold",style:{color:n==="night"?"#fff":"#1f2937"},children:[e.jsx("div",{className:"font-semibold",children:v.ime}),e.jsx("div",{className:"text-[10px] opacity-70",children:v.tura})]},v.tura)),e.jsxs("th",{className:"px-1 py-2 text-center text-xs font-bold w-16",style:{color:n==="night"?"#fff":"#1f2937"},children:[e.jsx("div",{className:"font-semibold",children:"Ukupno"}),e.jsx("div",{className:"text-[10px] opacity-70",children:"B&D"})]})]})}),e.jsx("tbody",{children:Object.keys(ee).sort((v,R)=>v<R?-1:v>R?1:0).map((v,R)=>{const h=ee[v]||{},D=U.filter(S=>S.aktivan).reduce((S,y)=>S+(h[y.tura]||0),0),f=B.some(S=>S.date===v);return e.jsxs(b.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:R*.02},className:`border-t ${n==="night"?"border-gray-700/50":"border-gray-200/50"} ${f?n==="night"?"bg-red-900/20":"bg-red-50/70":""}`,children:[e.jsx("td",{className:"px-1 py-1.5 text-xs font-bold",style:{color:n==="night"?"#e5e7eb":"#374151"},children:xe(new Date(v),"dd.MM.")}),U.filter(S=>S.aktivan).map(S=>{const y=h[S.tura],Y=S.target_per_day||0,q=y>=Y,m=`${v}-${S.tura}`,_=z[m],l=n==="night"?"#4ade80":"#15803d",d=n==="night"?"#fb7185":"#dc2626";return e.jsx("td",{className:"px-1 py-1.5 text-center text-xs font-extrabold",style:{color:_?n==="night"?"#f59e0b":"#d97706":y?q?l:d:"#9ca3af",fontWeight:"900",textShadow:(y||_)&&n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:_?"Urlaub":y||"‚Äì"},S.tura)}),e.jsx("td",{className:"px-1 py-1.5 text-center text-xs font-extrabold",style:{color:D>=300?n==="night"?"#4ade80":"#15803d":D>0?n==="night"?"#fb7185":"#dc2626":"#9ca3af",fontWeight:"900",textShadow:D>0&&n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:D||"‚Äì"})]},v)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:`border-t-2 ${n==="night"?"border-gray-600 bg-gray-700/70":"border-gray-400 bg-gray-200/80"}`,children:[e.jsx("td",{className:"px-1 py-2 text-xs font-extrabold",style:{color:n==="night"?"#fff":"#1f2937"},children:"Ukupno"}),U.filter(v=>v.aktivan).map(v=>{const R=F.filter(m=>{const _=xe(m,"yyyy-MM-dd");return(w[_]||{})[v.tura]>0}),h=R.reduce((m,_)=>{const l=xe(_,"yyyy-MM-dd"),d=w[l]||{};return m+(d[v.tura]||0)},0),D=(v.target_per_day||0)*F.length,f=h-D,S=n==="night"?"#4ade80":"#15803d",y=n==="night"?"#fb7185":"#dc2626",Y=h>=(v.target_per_day||0)*R.length?S:y,q=f>=0?S:y;return e.jsxs("td",{className:"px-1 py-2 text-center",children:[e.jsx("div",{className:"text-xs font-extrabold",style:{color:Y,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:h}),e.jsxs("div",{className:"text-[10px] font-black",style:{color:q,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:["(",f>0?"+":"",f,")"]})]},v.tura)}),e.jsx("td",{className:"px-1 py-2 text-center",children:(()=>{const v=F.filter(m=>{const _=xe(m,"yyyy-MM-dd"),l=w[_]||{};return U.filter(j=>j.aktivan).reduce((j,O)=>j+(l[O.tura]||0),0)>0}),R=v.reduce((m,_)=>{const l=xe(_,"yyyy-MM-dd"),d=w[l]||{};return m+U.filter(j=>j.aktivan).reduce((j,O)=>j+(d[O.tura]||0),0)},0),h=U.filter(m=>m.aktivan).reduce((m,_)=>m+(_.target_per_day||0)*F.length,0),D=R-h,f=n==="night"?"#4ade80":"#15803d",S=n==="night"?"#fb7185":"#dc2626",y=U.filter(m=>m.aktivan).reduce((m,_)=>m+(_.target_per_day||0)*v.length,0),Y=R>=y?f:S,q=D>=0?f:S;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs font-extrabold",style:{color:Y,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:R}),e.jsxs("div",{className:"text-[10px] font-black",style:{color:q,textShadow:n==="night"?"0 0 2px rgba(0,0,0,0.5)":"none"},children:["(",D>0?"+":"",D,")"]})]})})()})]})})]})})})]})]})}const wr=Object.freeze(Object.defineProperty({__proto__:null,default:ir},Symbol.toStringTag,{value:"Module"}));function lr({syncStatus:t}){const a=t?.unsyncedCount===0;if(!t)return null;const o=a?"100%":"30%",r=a?"#4caf50":"#f44336";return e.jsx("div",{style:{width:"100%",height:6,backgroundColor:"#e0e0e0",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:3,width:o,backgroundColor:r,transition:"width 1s, background-color 1s"}})})}const cr=new Date().getFullYear(),ct=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function dr(){const t=Ce(),[a,o]=c.useState(cr),[r,i]=c.useState(new Date().getMonth()),[p,x]=c.useState(0),[n,g]=c.useState("night"),[z,H]=c.useState(new Date),G={default:{background:"from-blue-50 via-white to-purple-50"},sunrise:{background:"from-orange-100 via-pink-100 to-yellow-100"},afternoon:{background:"from-blue-100 via-cyan-100 to-sky-100"},evening:{background:"from-purple-100 via-pink-100 to-indigo-100"},night:{background:"from-slate-900 via-blue-900 to-indigo-900"}},U=()=>`bg-gradient-to-br ${(G[n]||G.night).background}`;c.useEffect(()=>{g("night")},[]),c.useEffect(()=>{const l=setInterval(()=>H(new Date),6e4);return()=>clearInterval(l)},[]);const[T,$]=c.useState(!0);c.useEffect(()=>{const l=setInterval(()=>{$(d=>!d)},400);return()=>clearInterval(l)},[]);const{driverName:N}=ra(),{data:E=[],isLoading:X}=_t(),{data:B=[]}=Mt(a),[F,A]=c.useState({});c.useEffect(()=>{(async()=>{try{const{data:d,error:j}=await re.from("urlaub_marks").select("date, driver").eq("is_active",!0);if(j)throw j;const O={};(d||[]).forEach(P=>{const u=typeof P.date=="string"?P.date.slice(0,10):P.date;O[`${u}-${P.driver}`]=!0}),A(O)}catch(d){console.error("Gre≈°ka pri dohvaƒáanju urlaub marks:",d)}})()},[]);const W=()=>{r===0?(i(11),o(a-1)):i(r-1)},w=()=>{r===11?(i(0),o(a+1)):i(r+1)},ee=()=>{x(l=>l===0?E.length-1:l-1)},k=()=>{x(l=>l===E.length-1?0:l+1)};c.useEffect(()=>{if(E.length>0){const l=N?E.findIndex(d=>d.ime===N):E.findIndex(d=>d.aktivan);l>=0&&x(l)}},[E,N]);const J=E[p]?.ime||"",oe=E[p]?.tura||"",ne=E[p],{data:v=[],isLoading:R}=sr(ne?.tura,a,r,{enabled:!!ne}),h=R||X,D=It(a,r,B.map(l=>l.date)),f=c.useMemo(()=>{if(!v.length||!ne)return[];const l=u=>{if(!u)return 0;const M=u.toString().replace("%","").replace(",",".").trim();return parseFloat(M)||0},d={};v.forEach(u=>{const M=new Date(u.date),K=M.getMonth();if(M.getFullYear()!==a||K!==r)return;const L=u.date;d[L]||(d[L]={date:L,stops:0,packages:0,pickupPackages:0,complaints:0,totalTime:0,realPercentage:l(u.zustellung_proc),undelivered:parseInt(u.zustellung_nedostavljeno)||0,pickupPercentage:l(u.pickup_proc),pickupUndelivered:parseInt(u.pickup_nedostavljeno)||0,firstComplaints:parseInt(u.probleme_prva)||0,secondComplaints:parseInt(u.probleme_druga)||0,stopsPerHourRaw:u.produktivitaet_stops_pro_std||"0",isUrlaubDay:!1}),d[L].stops+=u.produktivitaet_stops||0,d[L].packages+=u.zustellung_paketi||0,d[L].pickupPackages+=parseInt(u.pickup_paketi)||0,d[L].complaints+=parseInt(u.probleme_druga)||0;const ce=(u.produktivitaet_dauer||"0:00").split(":"),Ne=(parseInt(ce[0])||0)*60+(parseInt(ce[1])||0);d[L].totalTime+=Ne});const j=new Date;j.setHours(0,0,0,0);const O=new Date(a,r+1,0).getDate();for(let u=1;u<=O;u++){const M=`${a}-${String(r+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`;if(new Date(M)>j)continue;Object.keys(F).some(L=>L.startsWith(M))&&!d[M]&&(d[M]={date:M,stops:0,packages:0,pickupPackages:0,complaints:0,totalTime:0,realPercentage:0,undelivered:0,pickupPercentage:0,pickupUndelivered:0,firstComplaints:0,secondComplaints:0,stopsPerHourRaw:"0",isUrlaubDay:!1})}const P=ne.tura?.toString();return P==="8610"&&Object.keys(d).forEach(u=>{const M=`${u}-${P}`;F[M]&&(d[u].isUrlaubDay=!0,d[u].stops=0,d[u].packages=0,d[u].pickupPackages=0,d[u].complaints=0,d[u].totalTime=0)}),(P==="8620"||P==="8640")&&Object.keys(d).forEach(u=>{const M=`${u}-${P}`;F[M]&&(d[u].isUrlaubDay=!0,d[u].stops=0,d[u].packages=0,d[u].pickupPackages=0,d[u].complaints=0,d[u].totalTime=0)}),Object.values(d).filter(u=>u.stops>0||u.isUrlaubDay).map(u=>{const M=u.realPercentage>0?u.realPercentage:u.stops>0?u.packages/u.stops*100:0;return{...u,percentage:M,stopsPerHour:u.totalTime>0?u.stops/(u.totalTime/60):0}}).sort((u,M)=>new Date(u.date)-new Date(M.date))},[v,a,r,ne,F]),S=c.useMemo(()=>{const l=D.length,d=f.filter(Q=>Q.stops>0).length,j=f.reduce((Q,se)=>Q+se.stops,0),O=f.reduce((Q,se)=>Q+se.packages,0),P=d>0?j/d:0,u=d>0?O/d:0,M=new Date,K=M.getFullYear(),te=M.getMonth();let L=0;if(a===K&&r===te){const Q=M.getDate();L=D.filter(se=>new Date(se).getDate()<=Q).length}else a<K||a===K&&r<te?L=l:L=0;const ce=(ne?.target_per_day||0)*l,Ne=j-ce;return{totalWorkdays:l,passedWorkdays:L,daysWithData:d,avgPackagesPerDay:Math.round(u),avgStopsPerDay:Math.round(P),totalStops:j,totalPackages:O,difference:Ne}},[D,f,ne,a,r]),y=l=>l.toLocaleTimeString("bs-BA",{hour:"2-digit",minute:"2-digit",hour12:!1}),Y=l=>l.toLocaleDateString("bs-BA",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),q=n==="night"?"#4ade80":"#15803d",m=n==="night"?"#fb7185":"#dc2626",_="#9ca3af";return e.jsxs("div",{className:`min-h-screen ${U()} ${n==="night"?"text-white":"text-gray-800"}`,children:[e.jsx(lr,{}),e.jsx(b.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/50"} backdrop-blur-xl border-b sticky top-0 z-50`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:`p-2 rounded-xl ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(Ye,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:`w-8 h-8 ${n==="night"?"text-blue-400":"text-blue-600"}`}),e.jsx("h1",{className:`text-2xl md:text-3xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:"Vozaƒçi Statistike"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`mb-6 p-4 md:p-6 rounded-2xl ${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:W,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Oe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:[ct[r]," ",a]}),e.jsxs("p",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"} mt-1`,children:[y(z)," ‚Ä¢ ",Y(z)]})]}),e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:w,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Re,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6 mb-6",children:[e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ee,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Oe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:`text-xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:J?`${J} (${oe})`:"Nema vozaƒça"}),e.jsx("p",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"} mt-1`,children:E.length>0?`${p+1} / ${E.length}`:"0 / 0"})]}),e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:k,className:`p-2 rounded-lg ${n==="night"?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-100/50 hover:bg-gray-200/50"} transition-all`,children:e.jsx(Re,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx($e,{className:`w-6 h-6 ${n==="night"?"text-blue-400":"text-blue-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:[S.passedWorkdays,"/",S.totalWorkdays]}),e.jsx("div",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Radni dani"})]})]}),e.jsxs(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Ee,{className:`w-6 h-6 ${n==="night"?"text-green-400":"text-green-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:J?`${J} (${oe})`:"‚Äî"}),e.jsx("div",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Vozaƒç"})]})]}),e.jsxs(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(mt,{className:`w-6 h-6 ${n==="night"?"text-purple-400":"text-purple-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${n==="night"?"text-white":"text-gray-800"}`,children:S.totalStops}),e.jsx("div",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Ukupno stopova"})]})]}),e.jsxs(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:`p-4 rounded-xl ${n==="night"?"bg-gray-700/30":"bg-gray-50/50"} backdrop-blur-sm flex items-center gap-3`,children:[e.jsx(Ue,{className:`w-6 h-6 ${S.difference>=0?n==="night"?"text-green-400":"text-green-600":n==="night"?"text-red-400":"text-red-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",style:{color:S.difference>=0?q:m},children:[S.difference>0?"+":"",S.difference]}),e.jsx("div",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Bilans"})]})]})]})]}),e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:`rounded-2xl overflow-hidden ${n==="night"?"bg-gray-800/40 border-gray-700/50":"bg-white/60 border-gray-200/30"} border backdrop-blur-xl`,children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:`w-8 h-8 border-2 rounded-full animate-spin ${n==="night"?"border-gray-600 border-t-white":"border-gray-300 border-t-blue-600"}`}),e.jsx("p",{className:`text-sm mt-4 ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Uƒçitavanje..."})]}):f.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ae,{className:`w-12 h-12 mb-4 ${n==="night"?"text-gray-600":"text-gray-400"}`}),e.jsxs("p",{className:`text-lg font-medium mb-2 ${n==="night"?"text-white":"text-gray-900"}`,children:["Nema podataka za ",ct[r]," ",a]}),e.jsx("p",{className:`text-sm ${n==="night"?"text-gray-400":"text-gray-600"}`,children:"Odaberite vozaƒça iz liste da vidite statistiku"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-full",children:[e.jsx("thead",{className:`${n==="night"?"bg-gray-700/50 text-gray-300":"bg-gray-50 text-gray-700"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Datum"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stopovi"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Paketi"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Pickup"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Reklamacije"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Vreme (h)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Efikasnost"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stop/h"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[f.map((l,d)=>{const j=new Date(l.date),O=ne?.target_per_day||0,P=l.stops>=O,u=l.isUrlaubDay;return e.jsxs(b.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+d*.05},className:`transition-colors ${n==="night"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap font-medium",children:xe(j,"dd.MM.")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap font-semibold",style:{color:u?"#f59e0b":_},children:u?"Urlaub":"Radni dan"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:u?_:P?q:m,fontWeight:"700"},children:l.stops||(u?"0":"‚Äì")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:l.packages||(u?"0":"‚Äì")}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:l.pickupPackages||(u?"0":"‚Äì")}),e.jsxs("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:l.secondComplaints>0?{backgroundColor:T?"#ffffff":"#f44336",color:T?"#f44336":"#ffffff",fontWeight:"900",textAlign:"center",transition:"all 0.3s",outline:T?"2px solid #f44336":"none",outlineOffset:"-2px",borderRadius:"4px"}:{},children:[l.secondComplaints>0&&e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(Le,{className:"w-4 h-4"}),l.secondComplaints]}),l.secondComplaints===0&&"‚Äì"]}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:l.totalTime?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Bt,{className:"w-4 h-4"}),`${(l.totalTime/60).toFixed(1)}h`]}):"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:l.percentage>=98?q:m,fontWeight:"600"},children:l.percentage?`${l.percentage.toFixed(1)}%`:"‚Äì"}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:l.stopsPerHour?l.stopsPerHour.toFixed(1):"‚Äì"})]},d)}),e.jsxs(b.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},className:`${n==="night"?"bg-gray-700/70 font-bold":"bg-gray-50 font-bold"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:"Ukupno"})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:"‚Äî"})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:{color:S.difference>=0?q:m,fontWeight:"900"},children:e.jsxs("strong",{children:[S.totalStops," (",S.difference>0?"+":"",S.difference,")"]})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:S.totalPackages})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:f.reduce((l,d)=>l+(d.pickupPackages||0),0)})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",style:f.reduce((d,j)=>d+(j.secondComplaints||0),0)>0?{backgroundColor:T?"#ffffff":"#f44336",color:T?"#f44336":"#ffffff",fontWeight:"900",transition:"all 0.3s",borderRadius:"4px",outline:T?"2px solid #f44336":"none",textAlign:"center"}:{color:q,fontWeight:"700"},children:e.jsx("strong",{children:(()=>{const l=f.reduce((d,j)=>d+(j.secondComplaints||0),0);return l>0?e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(Le,{className:"w-4 h-4"}),l]}):l})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const l=f.reduce((d,j)=>d+(j.totalTime||0),0);return l?`${(l/60).toFixed(1)}h`:"‚Äì"})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const l=f.filter(j=>j.percentage&&j.percentage>0),d=l.length>0?l.reduce((j,O)=>j+O.percentage,0)/l.length:0;return d>0?`${d.toFixed(1)}%`:"‚Äì"})()})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsx("strong",{children:(()=>{const l=f.filter(j=>j.stopsPerHour&&j.stopsPerHour>0),d=l.length>0?(l.reduce((j,O)=>j+O.stopsPerHour,0)/l.length).toFixed(1):"‚Äì";return d!=="NaN"?d:"‚Äì"})()})})]})]})]})})})]})]})}const kr=Object.freeze(Object.defineProperty({__proto__:null,default:dr},Symbol.toStringTag,{value:"Module"})),dt=["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],Me=t=>{if(!t)return"";const a=new Date(t),o=a.getDate().toString().padStart(2,"0"),r=(a.getMonth()+1).toString().padStart(2,"0"),i=a.getFullYear();return`${o}.${r}.${i}`},ur=()=>{const t=Ce(),{currentUser:a}=xt(),[o,r]=c.useState("night"),[i,p]=c.useState(null),[x,n]=c.useState([]),[g,z]=c.useState([]),[H,G]=c.useState(!0),[U,T]=c.useState(!1),[$,N]=c.useState(null),[E,X]=c.useState({}),B=c.useMemo(()=>dt[new Date().getMonth()],[]),F=c.useMemo(()=>new Date().getFullYear(),[]),A=c.useMemo(()=>({id:"sonderfahrt-8699",ime:"Sonderfahrt",tura:"8699",routes:["8696","8697","8698","8699"],aktivan:!0,target_per_day:0}),[]),W=c.useMemo(()=>[...Array.isArray(x)?x.filter(D=>D&&D.aktivan):[],A],[x,A]);c.useEffect(()=>{r("night")},[]);const w=o==="night",ee=c.useCallback(h=>h==="8610"?50:h==="8620"||h==="8630"?85:h==="8640"?80:50,[]);c.useEffect(()=>{(async()=>{try{const{data:D,error:f}=await re.from("urlaub_marks").select("date, driver").eq("is_active",!0);if(f)throw f;const S={};(D||[]).forEach(y=>{const Y=typeof y.date=="string"?y.date.slice(0,10):y.date;S[`${Y}-${y.driver}`]=!0}),X(S)}catch(D){console.error("Gre≈°ka pri dohvaƒáanju urlaub marks:",D)}})()},[]),c.useEffect(()=>{(async()=>{try{const{data:D,error:f}=await re.from("drivers").select("*").eq("aktivan",!0).order("ime",{ascending:!0});if(f)throw f;n(D||[]),console.log("üöó StatistikaScreen - Loaded drivers:",D?.length||0),console.log("üë§ Current user:",a)}catch(D){console.error("Gre≈°ka pri uƒçitavanju vozaƒça:",D),N(D.message)}finally{G(!1)}})()},[]),c.useEffect(()=>{if(!x||x.length===0||!a||i)return;const h=a.name||a.ime,D=a.username||a.tura;if(h){console.log("üîç Looking for driver with name:",h);const f=x.find(S=>S.ime===h);if(f){console.log("‚úÖ Found driver by name:",f.ime),p(f);return}}if(D){console.log("üîç Driver not found by name, trying by tura:",D);const f=x.find(S=>String(S.tura).trim()===String(D).trim());if(f){console.log("‚úÖ Found driver by tura:",f.ime),p(f);return}}console.log("‚ùå Logged-in driver not matched, selecting first driver"),p(x[0])},[a,x,i]);const k=c.useCallback(async h=>{if(!(!h||!h.tura)){T(!0);try{const D=Q=>{const se=Q.getTimezoneOffset()*6e4;return new Date(Q.getTime()-se).toISOString().slice(0,10)},f=(Q,se)=>{if(!Q||!se)return!1;const de=typeof Q=="string"?Q.slice(0,10):new Date(Q).toISOString().slice(0,10),ve=String(se).trim();return E[`${de}-${ve}`]===!0},S=new Date,y=D(S),Y=D(new Date(S.getFullYear(),S.getMonth(),1)),q=D(new Date(S.getFullYear(),S.getMonth()+1,0)),m=D(new Date(S.getFullYear(),0,1)),_=D(new Date(S.getFullYear(),11,31)),l=Array.isArray(h?.routes)&&h.routes.length>0?h.routes.map(Q=>String(Q).trim()).filter(Boolean):[String(h.tura).trim()],{data:d}=await re.from("deliveries").select("*").in("driver",l).eq("deleted",0).order("date",{ascending:!1}).limit(20),j=d?.find(Q=>f(Q.date,Q.driver)?!1:parseInt(Q?.produktivitaet_stops||0,10)>0),O=j?.date&&typeof j.date=="string"?j.date.slice(0,10):y,[P,u,M]=await Promise.all([re.from("deliveries").select("*").in("driver",l).gte("date",`${O}T00:00:00`).lte("date",`${O}T23:59:59`).eq("deleted",0),re.from("deliveries").select("*").in("driver",l).gte("date",Y).lte("date",q).eq("deleted",0),re.from("deliveries").select("*").in("driver",l).gte("date",m).lte("date",_).eq("deleted",0)]),K=parseInt(h?.target_per_day??ee(h.tura)??0,10)||0,te=(Q,se)=>{if(!Q||Q.length===0)return{packages:0,diff:se==="day"?-K:0,complaints:0,date:se==="day"?O:null};let de=Q;if(se==="month"){const Z=new Date,fe=Z.getFullYear(),Tt=Z.getMonth();de=Q.filter(me=>{if(!me?.date||f(me.date,me.driver))return!1;const Et=typeof me.date=="string"?me.date.slice(0,10):me.date,Qe=new Date(Et),Se=me.zustellung_paketi,Ot=Se!=null&&Se!==""&&!isNaN(Number(Se))&&Number(Se)>0;return Qe.getFullYear()===fe&&Qe.getMonth()===Tt&&me.driver==h.tura&&me.deleted==0&&Ot})}else se==="year"?de=Q.filter(Z=>f(Z.date,Z.driver)?!1:parseInt(Z?.produktivitaet_stops||0,10)>0):se==="day"&&(de=Q.filter(Z=>f(Z.date,Z.driver)?!1:parseInt(Z?.produktivitaet_stops||0,10)>0));const ve=de.reduce((Z,fe)=>Z+(parseInt(fe?.produktivitaet_stops||0,10)||0),0),Xe=de.reduce((Z,fe)=>Z+(parseInt(fe?.probleme_druga||0,10)||0),0),zt=(new Set(de.map(Z=>Z?.date?typeof Z.date=="string"?Z.date.slice(0,10):new Date(Z.date).toISOString().slice(0,10):null).filter(Boolean)).size||0)*K,Pt=de.length>0?de.map(Z=>Z?.date?typeof Z.date=="string"?Z.date.slice(0,10):new Date(Z.date).toISOString().slice(0,10):null).filter(Boolean).sort((Z,fe)=>new Date(fe)-new Date(Z))[0]:null;return se==="day"?{packages:ve,diff:ve-K,complaints:Xe,date:O}:{packages:ve,diff:ve-zt,complaints:Xe,date:Pt}},L=te(P.data,"day"),ie=te(u.data,"month"),ce=te(M.data,"year"),Ne=[{label:`Dostava (${L.date||""})`,value:L.diff,packages:L.packages,complaints:L.complaints,target:K,date:L.date,dataDate:L.date},{label:`Reklamacije (${L.date||""})`,value:L.complaints,date:L.date,dataDate:L.date},{label:`Dostava za ${B}`,value:ie.diff,packages:ie.packages,complaints:ie.complaints,dataDate:ie.date},{label:`Reklamacije za ${B}`,value:ie.complaints,dataDate:ie.date},{label:`Dostava za ${F}`,value:ce.diff,packages:ce.packages,complaints:ce.complaints,dataDate:ce.date},{label:`Reklamacije za ${F}`,value:ce.complaints,dataDate:ce.date}];z(Ne)}catch(D){console.error("Gre≈°ka pri uƒçitavanju statistika:",D),N(D.message),z([])}finally{T(!1)}}},[ee,B,F,E]);c.useEffect(()=>{i&&k(i)},[i,k]);const J=[{title:g[0]?.date?Me(g[0].date):"Danas",period:g[0]?.dataDate?`Podaci: ${Me(g[0].dataDate)}`:g[0]?.label||"Danas",delivery:{value:g[0]?.packages||0,diff:g[0]?.value||0,target:g[0]?.target||0,trend:(g[0]?.value||0)>0?"up":(g[0]?.value||0)<0?"down":"neutral"},complaints:{value:g[1]?.value||0,trend:(g[1]?.value||0)===0?"good":"bad"},icon:$e},{title:g[2]?.dataDate?dt[new Date(g[2].dataDate).getMonth()]:"Ovaj mjesec",period:g[2]?.dataDate?`Podaci do: ${Me(g[2].dataDate)}`:g[2]?.label||"Ovaj mjesec",delivery:{value:g[2]?.packages||0,diff:g[2]?.value||0,target:(g[2]?.packages||0)-(g[2]?.value||0),trend:(g[2]?.value||0)>0?"up":(g[2]?.value||0)<0?"down":"neutral"},complaints:{value:g[3]?.value||0,trend:(g[3]?.value||0)===0?"good":"bad"},icon:Yt},{title:g[4]?.dataDate?new Date(g[4].dataDate).getFullYear():"Ova godina",period:g[4]?.dataDate?`Podaci do: ${Me(g[4].dataDate)}`:g[4]?.label||"Ova godina",delivery:{value:g[4]?.packages||0,diff:g[4]?.value||0,target:(g[4]?.packages||0)-(g[4]?.value||0),trend:(g[4]?.value||0)>0?"up":(g[4]?.value||0)<0?"down":"neutral"},complaints:{value:g[5]?.value||0,trend:(g[5]?.value||0)===0?"good":"bad"},icon:Kt}],oe=h=>h==="up"?Ue:h==="down"?gt:h==="good"?Ze:h==="bad"?Xt:Ae,ne=(h,D=!1)=>{if(D){if(h==="good")return w?"text-green-400":"text-green-600";if(h==="bad")return w?"text-red-400":"text-red-600"}else{if(h==="up")return w?"text-green-400":"text-green-600";if(h==="down")return w?"text-red-400":"text-red-600"}return w?"text-gray-400":"text-gray-600"},v=()=>{if(!i||W.length===0)return;const h=W.findIndex(f=>f.id===i.id),D=h===0?W.length-1:h-1;p(W[D])},R=()=>{if(!i||W.length===0)return;const h=W.findIndex(f=>f.id===i.id),D=h===W.length-1?0:h+1;p(W[D])};return e.jsx("div",{className:`min-h-screen p-4 sm:p-6 lg:p-8 ${w?"bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900":"bg-gradient-to-br from-blue-50 via-white to-indigo-50"}`,children:e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:`mb-6 sm:mb-8 p-4 sm:p-6 rounded-2xl ${w?"bg-gray-800/50":"bg-white/80"} backdrop-blur-xl border ${w?"border-gray-700":"border-white/20"} shadow-xl`,children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b.button,{onClick:()=>t("/"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-xl ${w?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600"} transition-all duration-200`,children:e.jsx(Ye,{className:"w-6 h-6"})}),e.jsx(b.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"p-3 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600",children:e.jsx(Pe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl sm:text-3xl font-bold ${w?"text-white":"text-gray-800"}`,children:"Statistika"}),e.jsx("p",{className:`text-sm ${w?"text-gray-400":"text-gray-600"}`,children:"Pregled performansi vozaƒça"})]})]})}),i&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 pt-4 border-t ${w?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"w-full flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b.button,{onClick:v,whileHover:{scale:1.1,x:-3,backgroundColor:w?"#374151":"#e5e7eb"},whileTap:{scale:.9,x:-5},animate:{x:[0,-2,0]},transition:{x:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2},backgroundColor:{duration:.3}},className:`p-3 rounded-lg ${w?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 shadow-lg shadow-blue-500/20":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 shadow-lg shadow-blue-500/10"} transition-all duration-200 border-2 border-transparent hover:border-blue-400/30`,children:e.jsx(Oe,{className:"w-5 h-5"})}),e.jsxs(b.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},transition:{type:"spring",stiffness:300,damping:20,duration:.4},className:"flex flex-wrap gap-4 items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:`w-5 h-5 ${w?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-lg font-bold ${w?"text-white":"text-gray-900"}`,children:i.ime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:`w-4 h-4 ${w?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${w?"text-gray-400":"text-gray-600"}`,children:["Tura ",i.tura]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{className:`w-4 h-4 ${w?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${w?"text-gray-400":"text-gray-600"}`,children:["Cilj: ",parseInt(i?.target_per_day??(i?.id==="sonderfahrt-8699"?0:ee(i.tura))??0,10)||0," stopova/dan"]})]})]},i?.id),e.jsx(b.button,{onClick:R,whileHover:{scale:1.1,x:3,backgroundColor:w?"#374151":"#e5e7eb"},whileTap:{scale:.9,x:5},animate:{x:[0,2,0]},transition:{x:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2},backgroundColor:{duration:.3}},className:`p-3 rounded-lg ${w?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 shadow-lg shadow-blue-500/20":"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 shadow-lg shadow-blue-500/10"} transition-all duration-200 border-2 border-transparent hover:border-blue-400/30`,children:e.jsx(Re,{className:"w-5 h-5"})})]})})})]}),$&&e.jsx(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`mb-6 p-4 rounded-xl ${w?"bg-red-900/30 border-red-700/50":"bg-red-50 border-red-200/50"} border`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{className:`w-5 h-5 ${w?"text-red-400":"text-red-600"}`}),e.jsxs("p",{className:`text-sm font-medium ${w?"text-red-400":"text-red-600"}`,children:["Gre≈°ka pri uƒçitavanju podataka: ",$]})]})}),H||U?e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[e.jsx(b.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 mb-4 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx(Ae,{className:"w-8 h-8 text-white"})}),e.jsx("span",{className:`text-lg ${w?"text-gray-300":"text-gray-600"}`,children:e.jsxs(b.div,{className:"flex items-center gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx(b.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:`w-6 h-6 rounded-full border-2 border-t-transparent ${w?"border-blue-400":"border-blue-600"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(b.span,{animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:"Uƒçitavanje statistike..."}),e.jsx(b.div,{className:`h-2 mt-2 bg-gradient-to-r ${w?"from-blue-600 via-blue-400 to-blue-600":"from-blue-500 via-blue-300 to-blue-500"} rounded-full`,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:2,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}})]})]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:e.jsx(Be,{children:J.map((h,D)=>{const f=i?.id==="sonderfahrt-8699",S=h.icon,y=oe(h.delivery.trend);oe(h.complaints.trend);const Y=h.complaints.value>0,q=h.delivery.target>0?h.delivery.value/h.delivery.target*100:0;return e.jsxs(b.div,{initial:{opacity:0,y:30,scale:.8,rotateX:-15},animate:{opacity:1,y:0,scale:1,rotateX:0},exit:{opacity:0,y:-30,scale:.8,rotateX:15},transition:{delay:D*.15,type:"spring",stiffness:300,damping:25,duration:.6},whileHover:{scale:1.03,y:-8,rotateY:2,transition:{duration:.3}},className:"relative group cursor-pointer",style:{perspective:"1000px"},children:[e.jsx("div",{className:`absolute inset-0 rounded-3xl border-2 shadow-2xl transform group-hover:scale-105 transition-transform duration-300 ${f?"bg-gradient-to-br from-white via-rose-50 to-white border-red-400/90 shadow-[0_18px_45px_-12px_rgba(220,38,38,0.18)]":"bg-gradient-to-br from-white via-gray-50 to-gray-100 border-gray-200/60"}`}),f&&e.jsx("div",{className:"absolute top-4 left-4 z-10 px-3 py-1 rounded-full bg-red-600 text-white text-xs font-black tracking-wide shadow-lg",children:"SONDERFAHRT"}),e.jsx("div",{className:`absolute inset-1 rounded-3xl bg-gradient-to-br pointer-events-none ${f?"from-white/70 to-transparent":"from-white/80 to-transparent"}`}),e.jsx(b.div,{className:`absolute inset-0 rounded-3xl transition-opacity duration-500 ${f?"opacity-20":"opacity-0 group-hover:opacity-100"}`,animate:{background:f?["radial-gradient(circle at 0% 0%, rgba(239, 68, 68, 0.20) 0%, transparent 58%)","radial-gradient(circle at 100% 100%, rgba(244, 63, 94, 0.18) 0%, transparent 58%)","radial-gradient(circle at 0% 100%, rgba(190, 18, 60, 0.15) 0%, transparent 58%)","radial-gradient(circle at 100% 0%, rgba(239, 68, 68, 0.20) 0%, transparent 58%)"]:["radial-gradient(circle at 0% 0%, rgba(59, 130, 246, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 100%, rgba(147, 51, 234, 0.3) 0%, transparent 50%)","radial-gradient(circle at 0% 100%, rgba(236, 72, 153, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 0%, rgba(59, 130, 246, 0.3) 0%, transparent 50%)"]},transition:{duration:4,repeat:1/0,ease:"linear"}}),Y&&e.jsx(b.div,{className:"absolute inset-0 rounded-3xl bg-red-500/10 border border-red-400/30",animate:{opacity:[.3,.6,.3],scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:"relative p-8 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(b.div,{className:"relative",whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:400},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-purple-600 rounded-2xl blur-md opacity-70"}),e.jsx("div",{className:"relative p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:e.jsx(S,{className:"w-6 h-6 text-white drop-shadow-lg"})}),e.jsx(b.div,{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",animate:{scale:[1,1.3,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:`text-lg font-bold ${f?"text-red-700":"text-gray-800"}`,children:h.title}),e.jsx("p",{className:`text-sm font-medium ${f?"text-red-600":"text-gray-600"}`,children:h.period})]})]}),e.jsxs("div",{className:"space-y-6 flex-grow",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`text-sm font-bold uppercase tracking-wide ${f?"text-red-700":"text-gray-700"}`,children:"Dostavljeno"}),e.jsx(b.div,{animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"},children:e.jsx(y,{className:`w-5 h-5 ${ne(h.delivery.trend)} drop-shadow-sm`})})]}),e.jsxs("div",{className:"flex items-baseline justify-between mb-4",children:[e.jsx(b.span,{className:`text-4xl font-black ${f?"text-red-700":"text-gray-900"}`,animate:{textShadow:["2px 2px 4px rgba(0,0,0,0.1)","4px 4px 8px rgba(0,0,0,0.15)","2px 2px 4px rgba(0,0,0,0.1)"]},transition:{duration:3,repeat:1/0},children:h.delivery.value}),e.jsx("span",{className:`text-lg font-bold ${f?"text-red-600":"text-gray-600"}`,children:"stopova"}),h.delivery.diff!==void 0&&h.delivery.diff!==0&&e.jsxs(b.span,{className:`px-2 py-1 rounded-full text-sm font-bold ${h.delivery.diff>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:[h.delivery.diff>0?"+":"",h.delivery.diff]})]}),h.delivery.target>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold",children:[e.jsxs("span",{className:`${f?"text-red-700":"text-gray-800"}`,children:["Cilj: ",h.delivery.target]}),e.jsxs(b.span,{className:`font-black ${q>=100?"text-green-600":q>=80?"text-blue-700":"text-red-700"}`,animate:q>=100?{scale:[1,1.15,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(34,197,94,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]}:q>=80?{scale:[1,1.08,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(59,130,246,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]}:{scale:[1,1.1,1],textShadow:["1px 1px 2px rgba(0,0,0,0.2)","2px 2px 4px rgba(220,38,38,0.4)","1px 1px 2px rgba(0,0,0,0.2)"]},transition:{duration:1.5,repeat:1/0},children:[Math.round(q),"%"]})]}),e.jsxs("div",{className:"relative h-3 bg-gray-200 rounded-full overflow-hidden border border-gray-300",children:[e.jsx(b.div,{className:`h-full rounded-full relative ${q>=100?"bg-gradient-to-r from-green-400 via-green-500 to-emerald-600":q>=80?"bg-gradient-to-r from-blue-400 via-blue-500 to-indigo-600":"bg-gradient-to-r from-red-400 via-red-500 to-red-600"}`,initial:{width:0},animate:{width:`${Math.min(q,100)}%`},transition:{duration:1.5,delay:.5,ease:"easeOut"},children:e.jsx(b.div,{className:"absolute inset-0 bg-white/30",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})}),q>=100&&e.jsx(b.div,{className:"absolute right-2 top-1/2 transform -translate-y-1/2",animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:e.jsx("span",{className:"text-xs font-bold text-white drop-shadow",children:"üéØ"})})]})]})]}),e.jsxs("div",{className:`relative p-4 rounded-2xl transition-all duration-500 border-2 ${Y?"bg-red-50 border-red-200 shadow-lg shadow-red-100":"bg-green-50 border-green-200 shadow-lg shadow-green-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-sm font-bold uppercase tracking-wide ${f?"text-red-700":"text-gray-700"}`,children:"Reklamacije"}),Y?e.jsx(b.div,{initial:{scale:0},animate:{rotate:[0,-10,10,-10,0],scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:e.jsx(Le,{className:"w-5 h-5 text-red-600 drop-shadow-sm"})}):e.jsx(b.div,{initial:{scale:0},animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(Ze,{className:"w-5 h-5 text-green-600 drop-shadow-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b.span,{className:`text-3xl font-black ${Y?"text-red-700":"text-green-700"}`,animate:Y?{scale:[1,1.1,1],textShadow:["1px 1px 2px rgba(0,0,0,0.1)","2px 2px 4px rgba(220, 38, 38, 0.3)","1px 1px 2px rgba(0,0,0,0.1)"]}:{textShadow:["1px 1px 2px rgba(0,0,0,0.1)","2px 2px 4px rgba(34, 197, 94, 0.3)","1px 1px 2px rgba(0,0,0,0.1)"]},transition:{duration:2,repeat:1/0},children:h.complaints.value}),Y?e.jsxs(b.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200},className:"px-3 py-1 bg-red-600 text-white text-xs font-bold rounded-full shadow-lg flex items-center gap-1",children:[e.jsx("span",{children:"‚âà"}),e.jsxs("span",{children:[(h.complaints.value*80).toLocaleString(),"‚Ç¨"]})]}):e.jsx(b.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200},className:"px-3 py-1 bg-green-600 text-white text-xs font-bold rounded-full shadow-lg",children:"SAVR≈†ENO!"})]})]})]}),e.jsx(b.div,{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full shadow-lg"})})]})]},h.title)})})})]})})},jr=Object.freeze(Object.defineProperty({__proto__:null,default:ur},Symbol.toStringTag,{value:"Module"}));export{tr as C,wr as D,vr as H,jr as S,lt as U,br as a,ra as b,kr as c,yr as i,ge as q,xt as u};

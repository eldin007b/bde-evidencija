import{s as m}from"./chunk-v5-NPu4-6jz.js";import"./chunk-v5-BnSIf2SQ.js";import"./chunk-v5-DgaHRPzO.js";import"./chunk-v5-gv7r2pb9.js";async function b(i){const{data:n,error:s}=await m.from("payroll_amounts").select("driver_name, file_name, ukupni_trosak");if(s||!n)return{drivers:[],total:0};const l=Number(i)||new Date().getFullYear(),f=n.filter(r=>{if(!r?.file_name)return!1;const e=r.file_name.match(/_(\d{4})\.pdf$/);return e?Number(e[1])===l:!1}),t={};let o=0;for(const r of f){const e=r.driver_name,a=Number(r.ukupni_trosak||0);t[e]||(t[e]=0),t[e]+=a,o+=a}return{drivers:Object.entries(t).map(([r,e])=>({name:r,cost:e})),total:o}}export{b as getPayrollAnalytics};
